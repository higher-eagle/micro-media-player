(function(oa){typeof define=="function"&&define.amd?define(oa):oa()})(function(){"use strict";function oa(a,t){const i=Object.create(null),r=a.split(",");for(let e=0;e<r.length;e++)i[r[e]]=!0;return t?e=>!!i[e.toLowerCase()]:e=>!!i[e]}function _f(a){if(Ye(a)){const t={};for(let i=0;i<a.length;i++){const r=a[i],e=zt(r)?Bw(r):_f(r);if(e)for(const n in e)t[n]=e[n]}return t}else{if(zt(a))return a;if(Ft(a))return a}}const Fw=/;(?![^(]*\))/g,Nw=/:([^]+)/,Uw=/\/\*.*?\*\//gs;function Bw(a){const t={};return a.replace(Uw,"").split(Fw).forEach(i=>{if(i){const r=i.split(Nw);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function ep(a){let t="";if(zt(a))t=a;else if(Ye(a))for(let i=0;i<a.length;i++){const r=ep(a[i]);r&&(t+=r+" ")}else if(Ft(a))for(const i in a)a[i]&&(t+=i+" ");return t.trim()}const jw=oa("itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly");function E0(a){return!!a||a===""}const Dt={}.NODE_ENV!=="production"?Object.freeze({}):{},Mo={}.NODE_ENV!=="production"?Object.freeze([]):[],yi=()=>{},w0=()=>!1,Vw=/^on[^a-z]/,ll=a=>Vw.test(a),yf=a=>a.startsWith("onUpdate:"),Gt=Object.assign,tp=(a,t)=>{const i=a.indexOf(t);i>-1&&a.splice(i,1)},Hw=Object.prototype.hasOwnProperty,ct=(a,t)=>Hw.call(a,t),Ye=Array.isArray,Fo=a=>Tf(a)==="[object Map]",$w=a=>Tf(a)==="[object Set]",Ze=a=>typeof a=="function",zt=a=>typeof a=="string",ip=a=>typeof a=="symbol",Ft=a=>a!==null&&typeof a=="object",rp=a=>Ft(a)&&Ze(a.then)&&Ze(a.catch),Ww=Object.prototype.toString,Tf=a=>Ww.call(a),np=a=>Tf(a).slice(8,-1),qw=a=>Tf(a)==="[object Object]",ap=a=>zt(a)&&a!=="NaN"&&a[0]!=="-"&&""+parseInt(a,10)===a,bf=oa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Gw=oa("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),xf=a=>{const t=Object.create(null);return i=>t[i]||(t[i]=a(i))},zw=/-(\w)/g,vr=xf(a=>a.replace(zw,(t,i)=>i?i.toUpperCase():"")),Kw=/\B([A-Z])/g,_r=xf(a=>a.replace(Kw,"-$1").toLowerCase()),Ps=xf(a=>a.charAt(0).toUpperCase()+a.slice(1)),Os=xf(a=>a?`on${Ps(a)}`:""),dl=(a,t)=>!Object.is(a,t),fl=(a,t)=>{for(let i=0;i<a.length;i++)a[i](t)},Sf=(a,t,i)=>{Object.defineProperty(a,t,{configurable:!0,enumerable:!1,value:i})},Xw=a=>{const t=parseFloat(a);return isNaN(t)?a:t},C0=a=>{const t=zt(a)?Number(a):NaN;return isNaN(t)?a:t};let A0;const I0=()=>A0||(A0=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function sp(a,...t){console.warn(`[Vue warn] ${a}`,...t)}let en;class Qw{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=en,!t&&en&&(this.index=(en.scopes||(en.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const i=en;try{return en=this,t()}finally{en=i}}else({}).NODE_ENV!=="production"&&sp("cannot run an inactive effect scope.")}on(){en=this}off(){en=this.parent}stop(t){if(this._active){let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!t){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function Yw(a,t=en){t&&t.active&&t.effects.push(a)}function Jw(){return en}const cl=a=>{const t=new Set(a);return t.w=0,t.n=0,t},P0=a=>(a.w&za)>0,O0=a=>(a.n&za)>0,Zw=({deps:a})=>{if(a.length)for(let t=0;t<a.length;t++)a[t].w|=za},eC=a=>{const{deps:t}=a;if(t.length){let i=0;for(let r=0;r<t.length;r++){const e=t[r];P0(e)&&!O0(e)?e.delete(a):t[i++]=e,e.w&=~za,e.n&=~za}t.length=i}},op=new WeakMap;let hl=0,za=1;const up=30;let Bi;const Ds=Symbol({}.NODE_ENV!=="production"?"iterate":""),lp=Symbol({}.NODE_ENV!=="production"?"Map key iterate":"");class dp{constructor(t,i=null,r){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,Yw(this,r)}run(){if(!this.active)return this.fn();let t=Bi,i=Ka;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=Bi,Bi=this,Ka=!0,za=1<<++hl,hl<=up?Zw(this):D0(this),this.fn()}finally{hl<=up&&eC(this),za=1<<--hl,Bi=this.parent,Ka=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){Bi===this?this.deferStop=!0:this.active&&(D0(this),this.onStop&&this.onStop(),this.active=!1)}}function D0(a){const{deps:t}=a;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(a);t.length=0}}let Ka=!0;const L0=[];function Ls(){L0.push(Ka),Ka=!1}function ks(){const a=L0.pop();Ka=a===void 0?!0:a}function ji(a,t,i){if(Ka&&Bi){let r=op.get(a);r||op.set(a,r=new Map);let e=r.get(i);e||r.set(i,e=cl());const n={}.NODE_ENV!=="production"?{effect:Bi,target:a,type:t,key:i}:void 0;fp(e,n)}}function fp(a,t){let i=!1;hl<=up?O0(a)||(a.n|=za,i=!P0(a)):i=!a.has(Bi),i&&(a.add(Bi),Bi.deps.push(a),{}.NODE_ENV!=="production"&&Bi.onTrack&&Bi.onTrack(Object.assign({effect:Bi},t)))}function ua(a,t,i,r,e,n){const s=op.get(a);if(!s)return;let o=[];if(t==="clear")o=[...s.values()];else if(i==="length"&&Ye(a)){const f=Number(r);s.forEach((m,v)=>{(v==="length"||v>=f)&&o.push(m)})}else switch(i!==void 0&&o.push(s.get(i)),t){case"add":Ye(a)?ap(i)&&o.push(s.get("length")):(o.push(s.get(Ds)),Fo(a)&&o.push(s.get(lp)));break;case"delete":Ye(a)||(o.push(s.get(Ds)),Fo(a)&&o.push(s.get(lp)));break;case"set":Fo(a)&&o.push(s.get(Ds));break}const l={}.NODE_ENV!=="production"?{target:a,type:t,key:i,newValue:r,oldValue:e,oldTarget:n}:void 0;if(o.length===1)o[0]&&({}.NODE_ENV!=="production"?No(o[0],l):No(o[0]));else{const f=[];for(const m of o)m&&f.push(...m);({}).NODE_ENV!=="production"?No(cl(f),l):No(cl(f))}}function No(a,t){const i=Ye(a)?a:[...a];for(const r of i)r.computed&&k0(r,t);for(const r of i)r.computed||k0(r,t)}function k0(a,t){(a!==Bi||a.allowRecurse)&&({}.NODE_ENV!=="production"&&a.onTrigger&&a.onTrigger(Gt({effect:a},t)),a.scheduler?a.scheduler():a.run())}const tC=oa("__proto__,__v_isRef,__isVue"),R0=new Set(Object.getOwnPropertyNames(Symbol).filter(a=>a!=="arguments"&&a!=="caller").map(a=>Symbol[a]).filter(ip)),iC=Ef(),rC=Ef(!1,!0),nC=Ef(!0),aC=Ef(!0,!0),M0=sC();function sC(){const a={};return["includes","indexOf","lastIndexOf"].forEach(t=>{a[t]=function(...i){const r=nt(this);for(let n=0,s=this.length;n<s;n++)ji(r,"get",n+"");const e=r[t](...i);return e===-1||e===!1?r[t](...i.map(nt)):e}}),["push","pop","shift","unshift","splice"].forEach(t=>{a[t]=function(...i){Ls();const r=nt(this)[t].apply(this,i);return ks(),r}}),a}function oC(a){const t=nt(this);return ji(t,"has",a),t.hasOwnProperty(a)}function Ef(a=!1,t=!1){return function(r,e,n){if(e==="__v_isReactive")return!a;if(e==="__v_isReadonly")return a;if(e==="__v_isShallow")return t;if(e==="__v_raw"&&n===(a?t?z0:G0:t?q0:W0).get(r))return r;const s=Ye(r);if(!a){if(s&&ct(M0,e))return Reflect.get(M0,e,n);if(e==="hasOwnProperty")return oC}const o=Reflect.get(r,e,n);return(ip(e)?R0.has(e):tC(e))||(a||ji(r,"get",e),t)?o:si(o)?s&&ap(e)?o:o.value:Ft(o)?a?K0(o):Lf(o):o}}const uC=F0(),lC=F0(!0);function F0(a=!1){return function(i,r,e,n){let s=i[r];if(Qa(s)&&si(s)&&!si(e))return!1;if(!a&&(!Rf(e)&&!Qa(e)&&(s=nt(s),e=nt(e)),!Ye(i)&&si(s)&&!si(e)))return s.value=e,!0;const o=Ye(i)&&ap(r)?Number(r)<i.length:ct(i,r),l=Reflect.set(i,r,e,n);return i===nt(n)&&(o?dl(e,s)&&ua(i,"set",r,e,s):ua(i,"add",r,e)),l}}function dC(a,t){const i=ct(a,t),r=a[t],e=Reflect.deleteProperty(a,t);return e&&i&&ua(a,"delete",t,void 0,r),e}function fC(a,t){const i=Reflect.has(a,t);return(!ip(t)||!R0.has(t))&&ji(a,"has",t),i}function cC(a){return ji(a,"iterate",Ye(a)?"length":Ds),Reflect.ownKeys(a)}const N0={get:iC,set:uC,deleteProperty:dC,has:fC,ownKeys:cC},U0={get:nC,set(a,t){return{}.NODE_ENV!=="production"&&sp(`Set operation on key "${String(t)}" failed: target is readonly.`,a),!0},deleteProperty(a,t){return{}.NODE_ENV!=="production"&&sp(`Delete operation on key "${String(t)}" failed: target is readonly.`,a),!0}},hC=Gt({},N0,{get:rC,set:lC}),pC=Gt({},U0,{get:aC}),cp=a=>a,wf=a=>Reflect.getPrototypeOf(a);function Cf(a,t,i=!1,r=!1){a=a.__v_raw;const e=nt(a),n=nt(t);i||(t!==n&&ji(e,"get",t),ji(e,"get",n));const{has:s}=wf(e),o=r?cp:i?pp:pl;if(s.call(e,t))return o(a.get(t));if(s.call(e,n))return o(a.get(n));a!==e&&a.get(t)}function Af(a,t=!1){const i=this.__v_raw,r=nt(i),e=nt(a);return t||(a!==e&&ji(r,"has",a),ji(r,"has",e)),a===e?i.has(a):i.has(a)||i.has(e)}function If(a,t=!1){return a=a.__v_raw,!t&&ji(nt(a),"iterate",Ds),Reflect.get(a,"size",a)}function B0(a){a=nt(a);const t=nt(this);return wf(t).has.call(t,a)||(t.add(a),ua(t,"add",a,a)),this}function j0(a,t){t=nt(t);const i=nt(this),{has:r,get:e}=wf(i);let n=r.call(i,a);n?{}.NODE_ENV!=="production"&&$0(i,r,a):(a=nt(a),n=r.call(i,a));const s=e.call(i,a);return i.set(a,t),n?dl(t,s)&&ua(i,"set",a,t,s):ua(i,"add",a,t),this}function V0(a){const t=nt(this),{has:i,get:r}=wf(t);let e=i.call(t,a);e?{}.NODE_ENV!=="production"&&$0(t,i,a):(a=nt(a),e=i.call(t,a));const n=r?r.call(t,a):void 0,s=t.delete(a);return e&&ua(t,"delete",a,void 0,n),s}function H0(){const a=nt(this),t=a.size!==0,i={}.NODE_ENV!=="production"?Fo(a)?new Map(a):new Set(a):void 0,r=a.clear();return t&&ua(a,"clear",void 0,void 0,i),r}function Pf(a,t){return function(r,e){const n=this,s=n.__v_raw,o=nt(s),l=t?cp:a?pp:pl;return!a&&ji(o,"iterate",Ds),s.forEach((f,m)=>r.call(e,l(f),l(m),n))}}function Of(a,t,i){return function(...r){const e=this.__v_raw,n=nt(e),s=Fo(n),o=a==="entries"||a===Symbol.iterator&&s,l=a==="keys"&&s,f=e[a](...r),m=i?cp:t?pp:pl;return!t&&ji(n,"iterate",l?lp:Ds),{next(){const{value:v,done:y}=f.next();return y?{value:v,done:y}:{value:o?[m(v[0]),m(v[1])]:m(v),done:y}},[Symbol.iterator](){return this}}}}function Xa(a){return function(...t){if({}.NODE_ENV!=="production"){const i=t[0]?`on key "${t[0]}" `:"";console.warn(`${Ps(a)} operation ${i}failed: target is readonly.`,nt(this))}return a==="delete"?!1:this}}function mC(){const a={get(n){return Cf(this,n)},get size(){return If(this)},has:Af,add:B0,set:j0,delete:V0,clear:H0,forEach:Pf(!1,!1)},t={get(n){return Cf(this,n,!1,!0)},get size(){return If(this)},has:Af,add:B0,set:j0,delete:V0,clear:H0,forEach:Pf(!1,!0)},i={get(n){return Cf(this,n,!0)},get size(){return If(this,!0)},has(n){return Af.call(this,n,!0)},add:Xa("add"),set:Xa("set"),delete:Xa("delete"),clear:Xa("clear"),forEach:Pf(!0,!1)},r={get(n){return Cf(this,n,!0,!0)},get size(){return If(this,!0)},has(n){return Af.call(this,n,!0)},add:Xa("add"),set:Xa("set"),delete:Xa("delete"),clear:Xa("clear"),forEach:Pf(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{a[n]=Of(n,!1,!1),i[n]=Of(n,!0,!1),t[n]=Of(n,!1,!0),r[n]=Of(n,!0,!0)}),[a,i,t,r]}const[gC,vC,_C,yC]=mC();function Df(a,t){const i=t?a?yC:_C:a?vC:gC;return(r,e,n)=>e==="__v_isReactive"?!a:e==="__v_isReadonly"?a:e==="__v_raw"?r:Reflect.get(ct(i,e)&&e in r?i:r,e,n)}const TC={get:Df(!1,!1)},bC={get:Df(!1,!0)},xC={get:Df(!0,!1)},SC={get:Df(!0,!0)};function $0(a,t,i){const r=nt(i);if(r!==i&&t.call(a,r)){const e=np(a);console.warn(`Reactive ${e} contains both the raw and reactive versions of the same object${e==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const W0=new WeakMap,q0=new WeakMap,G0=new WeakMap,z0=new WeakMap;function EC(a){switch(a){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function wC(a){return a.__v_skip||!Object.isExtensible(a)?0:EC(np(a))}function Lf(a){return Qa(a)?a:kf(a,!1,N0,TC,W0)}function CC(a){return kf(a,!1,hC,bC,q0)}function K0(a){return kf(a,!0,U0,xC,G0)}function Uo(a){return kf(a,!0,pC,SC,z0)}function kf(a,t,i,r,e){if(!Ft(a))return{}.NODE_ENV!=="production"&&console.warn(`value cannot be made reactive: ${String(a)}`),a;if(a.__v_raw&&!(t&&a.__v_isReactive))return a;const n=e.get(a);if(n)return n;const s=wC(a);if(s===0)return a;const o=new Proxy(a,s===2?r:i);return e.set(a,o),o}function Rs(a){return Qa(a)?Rs(a.__v_raw):!!(a&&a.__v_isReactive)}function Qa(a){return!!(a&&a.__v_isReadonly)}function Rf(a){return!!(a&&a.__v_isShallow)}function hp(a){return Rs(a)||Qa(a)}function nt(a){const t=a&&a.__v_raw;return t?nt(t):a}function X0(a){return Sf(a,"__v_skip",!0),a}const pl=a=>Ft(a)?Lf(a):a,pp=a=>Ft(a)?K0(a):a;function Q0(a){Ka&&Bi&&(a=nt(a),{}.NODE_ENV!=="production"?fp(a.dep||(a.dep=cl()),{target:a,type:"get",key:"value"}):fp(a.dep||(a.dep=cl())))}function Y0(a,t){a=nt(a);const i=a.dep;i&&({}.NODE_ENV!=="production"?No(i,{target:a,type:"set",key:"value",newValue:t}):No(i))}function si(a){return!!(a&&a.__v_isRef===!0)}function AC(a){return IC(a,!1)}function IC(a,t){return si(a)?a:new PC(a,t)}class PC{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:nt(t),this._value=i?t:pl(t)}get value(){return Q0(this),this._value}set value(t){const i=this.__v_isShallow||Rf(t)||Qa(t);t=i?t:nt(t),dl(t,this._rawValue)&&(this._rawValue=t,this._value=i?t:pl(t),Y0(this,t))}}function Bo(a){return si(a)?a.value:a}const OC={get:(a,t,i)=>Bo(Reflect.get(a,t,i)),set:(a,t,i,r)=>{const e=a[t];return si(e)&&!si(i)?(e.value=i,!0):Reflect.set(a,t,i,r)}};function J0(a){return Rs(a)?a:new Proxy(a,OC)}var Z0;class DC{constructor(t,i,r,e){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this[Z0]=!1,this._dirty=!0,this.effect=new dp(t,()=>{this._dirty||(this._dirty=!0,Y0(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!e,this.__v_isReadonly=r}get value(){const t=nt(this);return Q0(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}Z0="__v_isReadonly";function LC(a,t,i=!1){let r,e;const n=Ze(a);n?(r=a,e={}.NODE_ENV!=="production"?()=>{console.warn("Write operation failed: computed value is readonly")}:yi):(r=a.get,e=a.set);const s=new DC(r,e,n||!e,i);return{}.NODE_ENV!=="production"&&t&&!i&&(s.effect.onTrack=t.onTrack,s.effect.onTrigger=t.onTrigger),s}const Ms=[];function Mf(a){Ms.push(a)}function Ff(){Ms.pop()}function Pe(a,...t){if({}.NODE_ENV==="production")return;Ls();const i=Ms.length?Ms[Ms.length-1].component:null,r=i&&i.appContext.config.warnHandler,e=kC();if(r)la(r,i,11,[a+t.join(""),i&&i.proxy,e.map(({vnode:n})=>`at <${Zf(i,n.type)}>`).join(`
`),e]);else{const n=[`[Vue warn]: ${a}`,...t];e.length&&n.push(`
`,...RC(e)),console.warn(...n)}ks()}function kC(){let a=Ms[Ms.length-1];if(!a)return[];const t=[];for(;a;){const i=t[0];i&&i.vnode===a?i.recurseCount++:t.push({vnode:a,recurseCount:0});const r=a.component&&a.component.parent;a=r&&r.vnode}return t}function RC(a){const t=[];return a.forEach((i,r)=>{t.push(...r===0?[]:[`
`],...MC(i))}),t}function MC({vnode:a,recurseCount:t}){const i=t>0?`... (${t} recursive calls)`:"",r=a.component?a.component.parent==null:!1,e=` at <${Zf(a.component,a.type,r)}`,n=">"+i;return a.props?[e,...FC(a.props),n]:[e+n]}function FC(a){const t=[],i=Object.keys(a);return i.slice(0,3).forEach(r=>{t.push(...e_(r,a[r]))}),i.length>3&&t.push(" ..."),t}function e_(a,t,i){return zt(t)?(t=JSON.stringify(t),i?t:[`${a}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?i?t:[`${a}=${t}`]:si(t)?(t=e_(a,nt(t.value),!0),i?t:[`${a}=Ref<`,t,">"]):Ze(t)?[`${a}=fn${t.name?`<${t.name}>`:""}`]:(t=nt(t),i?t:[`${a}=`,t])}const mp={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function la(a,t,i,r){let e;try{e=r?a(...r):a()}catch(n){Nf(n,t,i)}return e}function tn(a,t,i,r){if(Ze(a)){const n=la(a,t,i,r);return n&&rp(n)&&n.catch(s=>{Nf(s,t,i)}),n}const e=[];for(let n=0;n<a.length;n++)e.push(tn(a[n],t,i,r));return e}function Nf(a,t,i,r=!0){const e=t?t.vnode:null;if(t){let n=t.parent;const s=t.proxy,o={}.NODE_ENV!=="production"?mp[i]:i;for(;n;){const f=n.ec;if(f){for(let m=0;m<f.length;m++)if(f[m](a,s,o)===!1)return}n=n.parent}const l=t.appContext.config.errorHandler;if(l){la(l,null,10,[a,s,o]);return}}NC(a,i,e,r)}function NC(a,t,i,r=!0){if({}.NODE_ENV!=="production"){const e=mp[t];if(i&&Mf(i),Pe(`Unhandled error${e?` during execution of ${e}`:""}`),i&&Ff(),r)throw a;console.error(a)}else console.error(a)}let ml=!1,gp=!1;const Oi=[];let Ln=0;const jo=[];let kn=null,Ya=0;const t_=Promise.resolve();let vp=null;const UC=100;function Vo(a){const t=vp||t_;return a?t.then(this?a.bind(this):a):t}function BC(a){let t=Ln+1,i=Oi.length;for(;t<i;){const r=t+i>>>1;gl(Oi[r])<a?t=r+1:i=r}return t}function Uf(a){(!Oi.length||!Oi.includes(a,ml&&a.allowRecurse?Ln+1:Ln))&&(a.id==null?Oi.push(a):Oi.splice(BC(a.id),0,a),i_())}function i_(){!ml&&!gp&&(gp=!0,vp=t_.then(s_))}function jC(a){const t=Oi.indexOf(a);t>Ln&&Oi.splice(t,1)}function r_(a){Ye(a)?jo.push(...a):(!kn||!kn.includes(a,a.allowRecurse?Ya+1:Ya))&&jo.push(a),i_()}function n_(a,t=ml?Ln+1:0){for({}.NODE_ENV!=="production"&&(a=a||new Map);t<Oi.length;t++){const i=Oi[t];if(i&&i.pre){if({}.NODE_ENV!=="production"&&_p(a,i))continue;Oi.splice(t,1),t--,i()}}}function a_(a){if(jo.length){const t=[...new Set(jo)];if(jo.length=0,kn){kn.push(...t);return}for(kn=t,{}.NODE_ENV!=="production"&&(a=a||new Map),kn.sort((i,r)=>gl(i)-gl(r)),Ya=0;Ya<kn.length;Ya++)({}).NODE_ENV!=="production"&&_p(a,kn[Ya])||kn[Ya]();kn=null,Ya=0}}const gl=a=>a.id==null?1/0:a.id,VC=(a,t)=>{const i=gl(a)-gl(t);if(i===0){if(a.pre&&!t.pre)return-1;if(t.pre&&!a.pre)return 1}return i};function s_(a){gp=!1,ml=!0,{}.NODE_ENV!=="production"&&(a=a||new Map),Oi.sort(VC);const t={}.NODE_ENV!=="production"?i=>_p(a,i):yi;try{for(Ln=0;Ln<Oi.length;Ln++){const i=Oi[Ln];if(i&&i.active!==!1){if({}.NODE_ENV!=="production"&&t(i))continue;la(i,null,14)}}}finally{Ln=0,Oi.length=0,a_(a),ml=!1,vp=null,(Oi.length||jo.length)&&s_(a)}}function _p(a,t){if(!a.has(t))a.set(t,1);else{const i=a.get(t);if(i>UC){const r=t.ownerInstance,e=r&&$p(r.type);return Pe(`Maximum recursive updates exceeded${e?` in component <${e}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}else a.set(t,i+1)}}let Fs=!1;const Ho=new Set;({}).NODE_ENV!=="production"&&(I0().__VUE_HMR_RUNTIME__={createRecord:yp(o_),rerender:yp(WC),reload:yp(qC)});const Ns=new Map;function HC(a){const t=a.type.__hmrId;let i=Ns.get(t);i||(o_(t,a.type),i=Ns.get(t)),i.instances.add(a)}function $C(a){Ns.get(a.type.__hmrId).instances.delete(a)}function o_(a,t){return Ns.has(a)?!1:(Ns.set(a,{initialDef:vl(t),instances:new Set}),!0)}function vl(a){return X_(a)?a.__vccOpts:a}function WC(a,t){const i=Ns.get(a);i&&(i.initialDef.render=t,[...i.instances].forEach(r=>{t&&(r.render=t,vl(r.type).render=t),r.renderCache=[],Fs=!0,r.update(),Fs=!1}))}function qC(a,t){const i=Ns.get(a);if(!i)return;t=vl(t),u_(i.initialDef,t);const r=[...i.instances];for(const e of r){const n=vl(e.type);Ho.has(n)||(n!==i.initialDef&&u_(n,t),Ho.add(n)),e.appContext.optionsCache.delete(e.type),e.ceReload?(Ho.add(n),e.ceReload(t.styles),Ho.delete(n)):e.parent?Uf(e.parent.update):e.appContext.reload?e.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required.")}r_(()=>{for(const e of r)Ho.delete(vl(e.type))})}function u_(a,t){Gt(a,t);for(const i in a)i!=="__file"&&!(i in t)&&delete a[i]}function yp(a){return(t,i)=>{try{return a(t,i)}catch(r){console.error(r),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let Rn,_l=[],Tp=!1;function yl(a,...t){Rn?Rn.emit(a,...t):Tp||_l.push({event:a,args:t})}function l_(a,t){var i,r;Rn=a,Rn?(Rn.enabled=!0,_l.forEach(({event:e,args:n})=>Rn.emit(e,...n)),_l=[]):typeof window<"u"&&window.HTMLElement&&!(!((r=(i=window.navigator)===null||i===void 0?void 0:i.userAgent)===null||r===void 0)&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(n=>{l_(n,t)}),setTimeout(()=>{Rn||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Tp=!0,_l=[])},3e3)):(Tp=!0,_l=[])}function GC(a,t){yl("app:init",a,t,{Fragment:rn,Text:Sl,Comment:yr,Static:El})}function zC(a){yl("app:unmount",a)}const KC=bp("component:added"),d_=bp("component:updated"),XC=bp("component:removed"),QC=a=>{Rn&&typeof Rn.cleanupBuffer=="function"&&!Rn.cleanupBuffer(a)&&XC(a)};function bp(a){return t=>{yl(a,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}const YC=f_("perf:start"),JC=f_("perf:end");function f_(a){return(t,i,r)=>{yl(a,t.appContext.app,t.uid,t,i,r)}}function ZC(a,t,i){yl("component:emit",a.appContext.app,a,t,i)}function eA(a,t,...i){if(a.isUnmounted)return;const r=a.vnode.props||Dt;if({}.NODE_ENV!=="production"){const{emitsOptions:m,propsOptions:[v]}=a;if(m)if(!(t in m))(!v||!(Os(t)in v))&&Pe(`Component emitted event "${t}" but it is neither declared in the emits option nor as an "${Os(t)}" prop.`);else{const y=m[t];Ze(y)&&(y(...i)||Pe(`Invalid event arguments: event validation failed for event "${t}".`))}}let e=i;const n=t.startsWith("update:"),s=n&&t.slice(7);if(s&&s in r){const m=`${s==="modelValue"?"model":s}Modifiers`,{number:v,trim:y}=r[m]||Dt;y&&(e=i.map(E=>zt(E)?E.trim():E)),v&&(e=i.map(Xw))}if({}.NODE_ENV!=="production"&&ZC(a,t,e),{}.NODE_ENV!=="production"){const m=t.toLowerCase();m!==t&&r[Os(m)]&&Pe(`Event "${m}" is emitted in component ${Zf(a,a.type)} but the handler is registered for "${t}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${_r(t)}" instead of "${t}".`)}let o,l=r[o=Os(t)]||r[o=Os(vr(t))];!l&&n&&(l=r[o=Os(_r(t))]),l&&tn(l,a,6,e);const f=r[o+"Once"];if(f){if(!a.emitted)a.emitted={};else if(a.emitted[o])return;a.emitted[o]=!0,tn(f,a,6,e)}}function c_(a,t,i=!1){const r=t.emitsCache,e=r.get(a);if(e!==void 0)return e;const n=a.emits;let s={},o=!1;if(!Ze(a)){const l=f=>{const m=c_(f,t,!0);m&&(o=!0,Gt(s,m))};!i&&t.mixins.length&&t.mixins.forEach(l),a.extends&&l(a.extends),a.mixins&&a.mixins.forEach(l)}return!n&&!o?(Ft(a)&&r.set(a,null),null):(Ye(n)?n.forEach(l=>s[l]=null):Gt(s,n),Ft(a)&&r.set(a,s),s)}function Bf(a,t){return!a||!ll(t)?!1:(t=t.slice(2).replace(/Once$/,""),ct(a,t[0].toLowerCase()+t.slice(1))||ct(a,_r(t))||ct(a,t))}let Vi=null,h_=null;function jf(a){const t=Vi;return Vi=a,h_=a&&a.type.__scopeId||null,t}function tA(a,t=Vi,i){if(!t||a._n)return a;const r=(...e)=>{r._d&&B_(-1);const n=jf(t);let s;try{s=a(...e)}finally{jf(n),r._d&&B_(1)}return{}.NODE_ENV!=="production"&&d_(t),s};return r._n=!0,r._c=!0,r._d=!0,r}let xp=!1;function Vf(){xp=!0}function Sp(a){const{type:t,vnode:i,proxy:r,withProxy:e,props:n,propsOptions:[s],slots:o,attrs:l,emit:f,render:m,renderCache:v,data:y,setupState:E,ctx:I,inheritAttrs:O}=a;let D,R;const H=jf(a);({}).NODE_ENV!=="production"&&(xp=!1);try{if(i.shapeFlag&4){const W=e||r;D=an(m.call(W,W,v,n,E,y,I)),R=l}else{const W=t;({}).NODE_ENV!=="production"&&l===n&&Vf(),D=an(W.length>1?W(n,{}.NODE_ENV!=="production"?{get attrs(){return Vf(),l},slots:o,emit:f}:{attrs:l,slots:o,emit:f}):W(n,null)),R=t.props?l:rA(l)}}catch(W){wl.length=0,Nf(W,a,1),D=Mn(yr)}let Z=D,V;if({}.NODE_ENV!=="production"&&D.patchFlag>0&&D.patchFlag&2048&&([Z,V]=iA(D)),R&&O!==!1){const W=Object.keys(R),{shapeFlag:te}=Z;if(W.length){if(te&7)s&&W.some(yf)&&(R=nA(R,s)),Z=Za(Z,R);else if({}.NODE_ENV!=="production"&&!xp&&Z.type!==yr){const z=Object.keys(l),q=[],X=[];for(let j=0,oe=z.length;j<oe;j++){const re=z[j];ll(re)?yf(re)||q.push(re[2].toLowerCase()+re.slice(3)):X.push(re)}X.length&&Pe(`Extraneous non-props attributes (${X.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`),q.length&&Pe(`Extraneous non-emits event listeners (${q.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return i.dirs&&({}.NODE_ENV!=="production"&&!m_(Z)&&Pe("Runtime directive used on component with non-element root node. The directives will not function as intended."),Z=Za(Z),Z.dirs=Z.dirs?Z.dirs.concat(i.dirs):i.dirs),i.transition&&({}.NODE_ENV!=="production"&&!m_(Z)&&Pe("Component inside <Transition> renders non-element root node that cannot be animated."),Z.transition=i.transition),{}.NODE_ENV!=="production"&&V?V(Z):D=Z,jf(H),D}const iA=a=>{const t=a.children,i=a.dynamicChildren,r=p_(t);if(!r)return[a,void 0];const e=t.indexOf(r),n=i?i.indexOf(r):-1,s=o=>{t[e]=o,i&&(n>-1?i[n]=o:o.patchFlag>0&&(a.dynamicChildren=[...i,o]))};return[an(r),s]};function p_(a){let t;for(let i=0;i<a.length;i++){const r=a[i];if(Bp(r)){if(r.type!==yr||r.children==="v-if"){if(t)return;t=r}}else return}return t}const rA=a=>{let t;for(const i in a)(i==="class"||i==="style"||ll(i))&&((t||(t={}))[i]=a[i]);return t},nA=(a,t)=>{const i={};for(const r in a)(!yf(r)||!(r.slice(9)in t))&&(i[r]=a[r]);return i},m_=a=>a.shapeFlag&7||a.type===yr;function aA(a,t,i){const{props:r,children:e,component:n}=a,{props:s,children:o,patchFlag:l}=t,f=n.emitsOptions;if({}.NODE_ENV!=="production"&&(e||o)&&Fs||t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?g_(r,s,f):!!s;if(l&8){const m=t.dynamicProps;for(let v=0;v<m.length;v++){const y=m[v];if(s[y]!==r[y]&&!Bf(f,y))return!0}}}else return(e||o)&&(!o||!o.$stable)?!0:r===s?!1:r?s?g_(r,s,f):!0:!!s;return!1}function g_(a,t,i){const r=Object.keys(t);if(r.length!==Object.keys(a).length)return!0;for(let e=0;e<r.length;e++){const n=r[e];if(t[n]!==a[n]&&!Bf(i,n))return!0}return!1}function sA({vnode:a,parent:t},i){for(;t&&t.subTree===a;)(a=t.vnode).el=i,t=t.parent}const oA=a=>a.__isSuspense;function uA(a,t){t&&t.pendingBranch?Ye(a)?t.effects.push(...a):t.effects.push(a):r_(a)}function lA(a,t){if(!$t)({}).NODE_ENV!=="production"&&Pe("provide() can only be used inside setup().");else{let i=$t.provides;const r=$t.parent&&$t.parent.provides;r===i&&(i=$t.provides=Object.create(r)),i[a]=t}}function Hf(a,t,i=!1){const r=$t||Vi;if(r){const e=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(e&&a in e)return e[a];if(arguments.length>1)return i&&Ze(t)?t.call(r.proxy):t;({}).NODE_ENV!=="production"&&Pe(`injection "${String(a)}" not found.`)}else({}).NODE_ENV!=="production"&&Pe("inject() can only be used inside setup() or functional components.")}function dA(a,t){return Ep(a,null,{}.NODE_ENV!=="production"?Object.assign(Object.assign({},t),{flush:"post"}):{flush:"post"})}const $f={};function Tl(a,t,i){return{}.NODE_ENV!=="production"&&!Ze(t)&&Pe("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),Ep(a,t,i)}function Ep(a,t,{immediate:i,deep:r,flush:e,onTrack:n,onTrigger:s}=Dt){({}).NODE_ENV!=="production"&&!t&&(i!==void 0&&Pe('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),r!==void 0&&Pe('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const o=V=>{Pe("Invalid watch source: ",V,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},l=Jw()===($t==null?void 0:$t.scope)?$t:null;let f,m=!1,v=!1;if(si(a)?(f=()=>a.value,m=Rf(a)):Rs(a)?(f=()=>a,r=!0):Ye(a)?(v=!0,m=a.some(V=>Rs(V)||Rf(V)),f=()=>a.map(V=>{if(si(V))return V.value;if(Rs(V))return Us(V);if(Ze(V))return la(V,l,2);({}).NODE_ENV!=="production"&&o(V)})):Ze(a)?t?f=()=>la(a,l,2):f=()=>{if(!(l&&l.isUnmounted))return y&&y(),tn(a,l,3,[E])}:(f=yi,{}.NODE_ENV!=="production"&&o(a)),t&&r){const V=f;f=()=>Us(V())}let y,E=V=>{y=H.onStop=()=>{la(V,l,4)}},I;if(Pl)if(E=yi,t?i&&tn(t,l,3,[f(),v?[]:void 0,E]):f(),e==="sync"){const V=vI();I=V.__watcherHandles||(V.__watcherHandles=[])}else return yi;let O=v?new Array(a.length).fill($f):$f;const D=()=>{if(H.active)if(t){const V=H.run();(r||m||(v?V.some((W,te)=>dl(W,O[te])):dl(V,O)))&&(y&&y(),tn(t,l,3,[V,O===$f?void 0:v&&O[0]===$f?[]:O,E]),O=V)}else H.run()};D.allowRecurse=!!t;let R;e==="sync"?R=D:e==="post"?R=()=>ir(D,l&&l.suspense):(D.pre=!0,l&&(D.id=l.uid),R=()=>Uf(D));const H=new dp(f,R);({}).NODE_ENV!=="production"&&(H.onTrack=n,H.onTrigger=s),t?i?D():O=H.run():e==="post"?ir(H.run.bind(H),l&&l.suspense):H.run();const Z=()=>{H.stop(),l&&l.scope&&tp(l.scope.effects,H)};return I&&I.push(Z),Z}function fA(a,t,i){const r=this.proxy,e=zt(a)?a.includes(".")?v_(r,a):()=>r[a]:a.bind(r,r);let n;Ze(t)?n=t:(n=t.handler,i=t);const s=$t;$o(this);const o=Ep(e,n.bind(r),i);return s?$o(s):$s(),o}function v_(a,t){const i=t.split(".");return()=>{let r=a;for(let e=0;e<i.length&&r;e++)r=r[i[e]];return r}}function Us(a,t){if(!Ft(a)||a.__v_skip||(t=t||new Set,t.has(a)))return a;if(t.add(a),si(a))Us(a.value,t);else if(Ye(a))for(let i=0;i<a.length;i++)Us(a[i],t);else if($w(a)||Fo(a))a.forEach(i=>{Us(i,t)});else if(qw(a))for(const i in a)Us(a[i],t);return a}function bl(a){return Ze(a)?{setup:a,name:a.name}:a}const Wf=a=>!!a.type.__asyncLoader,wp=a=>a.type.__isKeepAlive;function cA(a,t){__(a,"a",t)}function hA(a,t){__(a,"da",t)}function __(a,t,i=$t){const r=a.__wdc||(a.__wdc=()=>{let e=i;for(;e;){if(e.isDeactivated)return;e=e.parent}return a()});if(qf(t,r,i),i){let e=i.parent;for(;e&&e.parent;)wp(e.parent.vnode)&&pA(r,t,i,e),e=e.parent}}function pA(a,t,i,r){const e=qf(t,a,r,!0);Cp(()=>{tp(r[t],e)},i)}function qf(a,t,i=$t,r=!1){if(i){const e=i[a]||(i[a]=[]),n=t.__weh||(t.__weh=(...s)=>{if(i.isUnmounted)return;Ls(),$o(i);const o=tn(t,i,a,s);return $s(),ks(),o});return r?e.unshift(n):e.push(n),n}else if({}.NODE_ENV!=="production"){const e=Os(mp[a].replace(/ hook$/,""));Pe(`${e} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const da=a=>(t,i=$t)=>(!Pl||a==="sp")&&qf(a,(...r)=>t(...r),i),mA=da("bm"),y_=da("m"),gA=da("bu"),vA=da("u"),_A=da("bum"),Cp=da("um"),yA=da("sp"),TA=da("rtg"),bA=da("rtc");function xA(a,t=$t){qf("ec",a,t)}function T_(a){Gw(a)&&Pe("Do not use built-in directive ids as custom directive id: "+a)}function SA(a,t){const i=Vi;if(i===null)return{}.NODE_ENV!=="production"&&Pe("withDirectives can only be used inside render functions."),a;const r=Jf(i)||i.proxy,e=a.dirs||(a.dirs=[]);for(let n=0;n<t.length;n++){let[s,o,l,f=Dt]=t[n];s&&(Ze(s)&&(s={mounted:s,updated:s}),s.deep&&Us(o),e.push({dir:s,instance:r,value:o,oldValue:void 0,arg:l,modifiers:f}))}return a}function Bs(a,t,i,r){const e=a.dirs,n=t&&t.dirs;for(let s=0;s<e.length;s++){const o=e[s];n&&(o.oldValue=n[s].value);let l=o.dir[r];l&&(Ls(),tn(l,i,8,[a.el,o,a,t]),ks())}}const Ap="components",b_=Symbol();function EA(a){return zt(a)?wA(Ap,a,!1)||a:a||b_}function wA(a,t,i=!0,r=!1){const e=Vi||$t;if(e){const n=e.type;if(a===Ap){const o=$p(n,!1);if(o&&(o===t||o===vr(t)||o===Ps(vr(t))))return n}const s=x_(e[a]||n[a],t)||x_(e.appContext[a],t);if(!s&&r)return n;if({}.NODE_ENV!=="production"&&i&&!s){const o=a===Ap?`
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.`:"";Pe(`Failed to resolve ${a.slice(0,-1)}: ${t}${o}`)}return s}else({}).NODE_ENV!=="production"&&Pe(`resolve${Ps(a.slice(0,-1))} can only be used in render() or setup().`)}function x_(a,t){return a&&(a[t]||a[vr(t)]||a[Ps(vr(t))])}const Ip=a=>a?q_(a)?Jf(a)||a.proxy:Ip(a.parent):null,js=Gt(Object.create(null),{$:a=>a,$el:a=>a.vnode.el,$data:a=>a.data,$props:a=>({}).NODE_ENV!=="production"?Uo(a.props):a.props,$attrs:a=>({}).NODE_ENV!=="production"?Uo(a.attrs):a.attrs,$slots:a=>({}).NODE_ENV!=="production"?Uo(a.slots):a.slots,$refs:a=>({}).NODE_ENV!=="production"?Uo(a.refs):a.refs,$parent:a=>Ip(a.parent),$root:a=>Ip(a.root),$emit:a=>a.emit,$options:a=>Lp(a),$forceUpdate:a=>a.f||(a.f=()=>Uf(a.update)),$nextTick:a=>a.n||(a.n=Vo.bind(a.proxy)),$watch:a=>fA.bind(a)}),Pp=a=>a==="_"||a==="$",Op=(a,t)=>a!==Dt&&!a.__isScriptSetup&&ct(a,t),S_={get({_:a},t){const{ctx:i,setupState:r,data:e,props:n,accessCache:s,type:o,appContext:l}=a;if({}.NODE_ENV!=="production"&&t==="__isVue")return!0;let f;if(t[0]!=="$"){const E=s[t];if(E!==void 0)switch(E){case 1:return r[t];case 2:return e[t];case 4:return i[t];case 3:return n[t]}else{if(Op(r,t))return s[t]=1,r[t];if(e!==Dt&&ct(e,t))return s[t]=2,e[t];if((f=a.propsOptions[0])&&ct(f,t))return s[t]=3,n[t];if(i!==Dt&&ct(i,t))return s[t]=4,i[t];Dp&&(s[t]=0)}}const m=js[t];let v,y;if(m)return t==="$attrs"&&(ji(a,"get",t),{}.NODE_ENV!=="production"&&Vf()),m(a);if((v=o.__cssModules)&&(v=v[t]))return v;if(i!==Dt&&ct(i,t))return s[t]=4,i[t];if(y=l.config.globalProperties,ct(y,t))return y[t];({}).NODE_ENV!=="production"&&Vi&&(!zt(t)||t.indexOf("__v")!==0)&&(e!==Dt&&Pp(t[0])&&ct(e,t)?Pe(`Property ${JSON.stringify(t)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):a===Vi&&Pe(`Property ${JSON.stringify(t)} was accessed during render but is not defined on instance.`))},set({_:a},t,i){const{data:r,setupState:e,ctx:n}=a;return Op(e,t)?(e[t]=i,!0):{}.NODE_ENV!=="production"&&e.__isScriptSetup&&ct(e,t)?(Pe(`Cannot mutate <script setup> binding "${t}" from Options API.`),!1):r!==Dt&&ct(r,t)?(r[t]=i,!0):ct(a.props,t)?({}.NODE_ENV!=="production"&&Pe(`Attempting to mutate prop "${t}". Props are readonly.`),!1):t[0]==="$"&&t.slice(1)in a?({}.NODE_ENV!=="production"&&Pe(`Attempting to mutate public property "${t}". Properties starting with $ are reserved and readonly.`),!1):({}.NODE_ENV!=="production"&&t in a.appContext.config.globalProperties?Object.defineProperty(n,t,{enumerable:!0,configurable:!0,value:i}):n[t]=i,!0)},has({_:{data:a,setupState:t,accessCache:i,ctx:r,appContext:e,propsOptions:n}},s){let o;return!!i[s]||a!==Dt&&ct(a,s)||Op(t,s)||(o=n[0])&&ct(o,s)||ct(r,s)||ct(js,s)||ct(e.config.globalProperties,s)},defineProperty(a,t,i){return i.get!=null?a._.accessCache[t]=0:ct(i,"value")&&this.set(a,t,i.value,null),Reflect.defineProperty(a,t,i)}};({}).NODE_ENV!=="production"&&(S_.ownKeys=a=>(Pe("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(a)));function CA(a){const t={};return Object.defineProperty(t,"_",{configurable:!0,enumerable:!1,get:()=>a}),Object.keys(js).forEach(i=>{Object.defineProperty(t,i,{configurable:!0,enumerable:!1,get:()=>js[i](a),set:yi})}),t}function AA(a){const{ctx:t,propsOptions:[i]}=a;i&&Object.keys(i).forEach(r=>{Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.props[r],set:yi})})}function IA(a){const{ctx:t,setupState:i}=a;Object.keys(nt(i)).forEach(r=>{if(!i.__isScriptSetup){if(Pp(r[0])){Pe(`setup() return property ${JSON.stringify(r)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i[r],set:yi})}})}function PA(){const a=Object.create(null);return(t,i)=>{a[i]?Pe(`${t} property "${i}" is already defined in ${a[i]}.`):a[i]=t}}let Dp=!0;function OA(a){const t=Lp(a),i=a.proxy,r=a.ctx;Dp=!1,t.beforeCreate&&E_(t.beforeCreate,a,"bc");const{data:e,computed:n,methods:s,watch:o,provide:l,inject:f,created:m,beforeMount:v,mounted:y,beforeUpdate:E,updated:I,activated:O,deactivated:D,beforeDestroy:R,beforeUnmount:H,destroyed:Z,unmounted:V,render:W,renderTracked:te,renderTriggered:z,errorCaptured:q,serverPrefetch:X,expose:j,inheritAttrs:oe,components:re,directives:se,filters:he}=t,le={}.NODE_ENV!=="production"?PA():null;if({}.NODE_ENV!=="production"){const[ne]=a.propsOptions;if(ne)for(const fe in ne)le("Props",fe)}if(f&&DA(f,r,le,a.appContext.config.unwrapInjectedRef),s)for(const ne in s){const fe=s[ne];Ze(fe)?({}.NODE_ENV!=="production"?Object.defineProperty(r,ne,{value:fe.bind(i),configurable:!0,enumerable:!0,writable:!0}):r[ne]=fe.bind(i),{}.NODE_ENV!=="production"&&le("Methods",ne)):{}.NODE_ENV!=="production"&&Pe(`Method "${ne}" has type "${typeof fe}" in the component definition. Did you reference the function correctly?`)}if(e){({}).NODE_ENV!=="production"&&!Ze(e)&&Pe("The data option must be a function. Plain object usage is no longer supported.");const ne=e.call(i,i);if({}.NODE_ENV!=="production"&&rp(ne)&&Pe("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!Ft(ne))({}).NODE_ENV!=="production"&&Pe("data() should return an object.");else if(a.data=Lf(ne),{}.NODE_ENV!=="production")for(const fe in ne)le("Data",fe),Pp(fe[0])||Object.defineProperty(r,fe,{configurable:!0,enumerable:!0,get:()=>ne[fe],set:yi})}if(Dp=!0,n)for(const ne in n){const fe=n[ne],Ie=Ze(fe)?fe.bind(i,i):Ze(fe.get)?fe.get.bind(i,i):yi;({}).NODE_ENV!=="production"&&Ie===yi&&Pe(`Computed property "${ne}" has no getter.`);const Ce=!Ze(fe)&&Ze(fe.set)?fe.set.bind(i):{}.NODE_ENV!=="production"?()=>{Pe(`Write operation failed: computed property "${ne}" is readonly.`)}:yi,Xe=ec({get:Ie,set:Ce});Object.defineProperty(r,ne,{enumerable:!0,configurable:!0,get:()=>Xe.value,set:Be=>Xe.value=Be}),{}.NODE_ENV!=="production"&&le("Computed",ne)}if(o)for(const ne in o)w_(o[ne],r,i,ne);if(l){const ne=Ze(l)?l.call(i):l;Reflect.ownKeys(ne).forEach(fe=>{lA(fe,ne[fe])})}m&&E_(m,a,"c");function pe(ne,fe){Ye(fe)?fe.forEach(Ie=>ne(Ie.bind(i))):fe&&ne(fe.bind(i))}if(pe(mA,v),pe(y_,y),pe(gA,E),pe(vA,I),pe(cA,O),pe(hA,D),pe(xA,q),pe(bA,te),pe(TA,z),pe(_A,H),pe(Cp,V),pe(yA,X),Ye(j))if(j.length){const ne=a.exposed||(a.exposed={});j.forEach(fe=>{Object.defineProperty(ne,fe,{get:()=>i[fe],set:Ie=>i[fe]=Ie})})}else a.exposed||(a.exposed={});W&&a.render===yi&&(a.render=W),oe!=null&&(a.inheritAttrs=oe),re&&(a.components=re),se&&(a.directives=se)}function DA(a,t,i=yi,r=!1){Ye(a)&&(a=kp(a));for(const e in a){const n=a[e];let s;Ft(n)?"default"in n?s=Hf(n.from||e,n.default,!0):s=Hf(n.from||e):s=Hf(n),si(s)?r?Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):({}.NODE_ENV!=="production"&&Pe(`injected property "${e}" is a ref and will be auto-unwrapped and no longer needs \`.value\` in the next minor release. To opt-in to the new behavior now, set \`app.config.unwrapInjectedRef = true\` (this config is temporary and will not be needed in the future.)`),t[e]=s):t[e]=s,{}.NODE_ENV!=="production"&&i("Inject",e)}}function E_(a,t,i){tn(Ye(a)?a.map(r=>r.bind(t.proxy)):a.bind(t.proxy),t,i)}function w_(a,t,i,r){const e=r.includes(".")?v_(i,r):()=>i[r];if(zt(a)){const n=t[a];Ze(n)?Tl(e,n):{}.NODE_ENV!=="production"&&Pe(`Invalid watch handler specified by key "${a}"`,n)}else if(Ze(a))Tl(e,a.bind(i));else if(Ft(a))if(Ye(a))a.forEach(n=>w_(n,t,i,r));else{const n=Ze(a.handler)?a.handler.bind(i):t[a.handler];Ze(n)?Tl(e,n,a):{}.NODE_ENV!=="production"&&Pe(`Invalid watch handler specified by key "${a.handler}"`,n)}else({}).NODE_ENV!=="production"&&Pe(`Invalid watch option: "${r}"`,a)}function Lp(a){const t=a.type,{mixins:i,extends:r}=t,{mixins:e,optionsCache:n,config:{optionMergeStrategies:s}}=a.appContext,o=n.get(t);let l;return o?l=o:!e.length&&!i&&!r?l=t:(l={},e.length&&e.forEach(f=>Gf(l,f,s,!0)),Gf(l,t,s)),Ft(t)&&n.set(t,l),l}function Gf(a,t,i,r=!1){const{mixins:e,extends:n}=t;n&&Gf(a,n,i,!0),e&&e.forEach(s=>Gf(a,s,i,!0));for(const s in t)if(r&&s==="expose")({}).NODE_ENV!=="production"&&Pe('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const o=LA[s]||i&&i[s];a[s]=o?o(a[s],t[s]):t[s]}return a}const LA={data:C_,props:Vs,emits:Vs,methods:Vs,computed:Vs,beforeCreate:Hi,created:Hi,beforeMount:Hi,mounted:Hi,beforeUpdate:Hi,updated:Hi,beforeDestroy:Hi,beforeUnmount:Hi,destroyed:Hi,unmounted:Hi,activated:Hi,deactivated:Hi,errorCaptured:Hi,serverPrefetch:Hi,components:Vs,directives:Vs,watch:RA,provide:C_,inject:kA};function C_(a,t){return t?a?function(){return Gt(Ze(a)?a.call(this,this):a,Ze(t)?t.call(this,this):t)}:t:a}function kA(a,t){return Vs(kp(a),kp(t))}function kp(a){if(Ye(a)){const t={};for(let i=0;i<a.length;i++)t[a[i]]=a[i];return t}return a}function Hi(a,t){return a?[...new Set([].concat(a,t))]:t}function Vs(a,t){return a?Gt(Gt(Object.create(null),a),t):t}function RA(a,t){if(!a)return t;if(!t)return a;const i=Gt(Object.create(null),a);for(const r in t)i[r]=Hi(a[r],t[r]);return i}function MA(a,t,i,r=!1){const e={},n={};Sf(n,Xf,1),a.propsDefaults=Object.create(null),A_(a,t,e,n);for(const s in a.propsOptions[0])s in e||(e[s]=void 0);({}).NODE_ENV!=="production"&&L_(t||{},e,a),i?a.props=r?e:CC(e):a.type.props?a.props=e:a.props=n,a.attrs=n}function FA(a){for(;a;){if(a.type.__hmrId)return!0;a=a.parent}}function NA(a,t,i,r){const{props:e,attrs:n,vnode:{patchFlag:s}}=a,o=nt(e),[l]=a.propsOptions;let f=!1;if(!({}.NODE_ENV!=="production"&&FA(a))&&(r||s>0)&&!(s&16)){if(s&8){const m=a.vnode.dynamicProps;for(let v=0;v<m.length;v++){let y=m[v];if(Bf(a.emitsOptions,y))continue;const E=t[y];if(l)if(ct(n,y))E!==n[y]&&(n[y]=E,f=!0);else{const I=vr(y);e[I]=Rp(l,o,I,E,a,!1)}else E!==n[y]&&(n[y]=E,f=!0)}}}else{A_(a,t,e,n)&&(f=!0);let m;for(const v in o)(!t||!ct(t,v)&&((m=_r(v))===v||!ct(t,m)))&&(l?i&&(i[v]!==void 0||i[m]!==void 0)&&(e[v]=Rp(l,o,v,void 0,a,!0)):delete e[v]);if(n!==o)for(const v in n)(!t||!ct(t,v))&&(delete n[v],f=!0)}f&&ua(a,"set","$attrs"),{}.NODE_ENV!=="production"&&L_(t||{},e,a)}function A_(a,t,i,r){const[e,n]=a.propsOptions;let s=!1,o;if(t)for(let l in t){if(bf(l))continue;const f=t[l];let m;e&&ct(e,m=vr(l))?!n||!n.includes(m)?i[m]=f:(o||(o={}))[m]=f:Bf(a.emitsOptions,l)||(!(l in r)||f!==r[l])&&(r[l]=f,s=!0)}if(n){const l=nt(i),f=o||Dt;for(let m=0;m<n.length;m++){const v=n[m];i[v]=Rp(e,l,v,f[v],a,!ct(f,v))}}return s}function Rp(a,t,i,r,e,n){const s=a[i];if(s!=null){const o=ct(s,"default");if(o&&r===void 0){const l=s.default;if(s.type!==Function&&Ze(l)){const{propsDefaults:f}=e;i in f?r=f[i]:($o(e),r=f[i]=l.call(null,t),$s())}else r=l}s[0]&&(n&&!o?r=!1:s[1]&&(r===""||r===_r(i))&&(r=!0))}return r}function I_(a,t,i=!1){const r=t.propsCache,e=r.get(a);if(e)return e;const n=a.props,s={},o=[];let l=!1;if(!Ze(a)){const m=v=>{l=!0;const[y,E]=I_(v,t,!0);Gt(s,y),E&&o.push(...E)};!i&&t.mixins.length&&t.mixins.forEach(m),a.extends&&m(a.extends),a.mixins&&a.mixins.forEach(m)}if(!n&&!l)return Ft(a)&&r.set(a,Mo),Mo;if(Ye(n))for(let m=0;m<n.length;m++){({}).NODE_ENV!=="production"&&!zt(n[m])&&Pe("props must be strings when using array syntax.",n[m]);const v=vr(n[m]);P_(v)&&(s[v]=Dt)}else if(n){({}).NODE_ENV!=="production"&&!Ft(n)&&Pe("invalid props options",n);for(const m in n){const v=vr(m);if(P_(v)){const y=n[m],E=s[v]=Ye(y)||Ze(y)?{type:y}:Object.assign({},y);if(E){const I=D_(Boolean,E.type),O=D_(String,E.type);E[0]=I>-1,E[1]=O<0||I<O,(I>-1||ct(E,"default"))&&o.push(v)}}}}const f=[s,o];return Ft(a)&&r.set(a,f),f}function P_(a){return a[0]!=="$"?!0:({}.NODE_ENV!=="production"&&Pe(`Invalid prop name: "${a}" is a reserved property.`),!1)}function Mp(a){const t=a&&a.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:a===null?"null":""}function O_(a,t){return Mp(a)===Mp(t)}function D_(a,t){return Ye(t)?t.findIndex(i=>O_(i,a)):Ze(t)&&O_(t,a)?0:-1}function L_(a,t,i){const r=nt(t),e=i.propsOptions[0];for(const n in e){let s=e[n];s!=null&&UA(n,r[n],s,!ct(a,n)&&!ct(a,_r(n)))}}function UA(a,t,i,r){const{type:e,required:n,validator:s}=i;if(n&&r){Pe('Missing required prop: "'+a+'"');return}if(!(t==null&&!i.required)){if(e!=null&&e!==!0){let o=!1;const l=Ye(e)?e:[e],f=[];for(let m=0;m<l.length&&!o;m++){const{valid:v,expectedType:y}=jA(t,l[m]);f.push(y||""),o=v}if(!o){Pe(VA(a,t,f));return}}s&&!s(t)&&Pe('Invalid prop: custom validator check failed for prop "'+a+'".')}}const BA=oa("String,Number,Boolean,Function,Symbol,BigInt");function jA(a,t){let i;const r=Mp(t);if(BA(r)){const e=typeof a;i=e===r.toLowerCase(),!i&&e==="object"&&(i=a instanceof t)}else r==="Object"?i=Ft(a):r==="Array"?i=Ye(a):r==="null"?i=a===null:i=a instanceof t;return{valid:i,expectedType:r}}function VA(a,t,i){let r=`Invalid prop: type check failed for prop "${a}". Expected ${i.map(Ps).join(" | ")}`;const e=i[0],n=np(t),s=k_(t,e),o=k_(t,n);return i.length===1&&R_(e)&&!HA(e,n)&&(r+=` with value ${s}`),r+=`, got ${n} `,R_(n)&&(r+=`with value ${o}.`),r}function k_(a,t){return t==="String"?`"${a}"`:t==="Number"?`${Number(a)}`:`${a}`}function R_(a){return["string","number","boolean"].some(i=>a.toLowerCase()===i)}function HA(...a){return a.some(t=>t.toLowerCase()==="boolean")}const M_=a=>a[0]==="_"||a==="$stable",Fp=a=>Ye(a)?a.map(an):[an(a)],$A=(a,t,i)=>{if(t._n)return t;const r=tA((...e)=>({}.NODE_ENV!=="production"&&$t&&Pe(`Slot "${a}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),Fp(t(...e))),i);return r._c=!1,r},F_=(a,t,i)=>{const r=a._ctx;for(const e in a){if(M_(e))continue;const n=a[e];if(Ze(n))t[e]=$A(e,n,r);else if(n!=null){({}).NODE_ENV!=="production"&&Pe(`Non-function value encountered for slot "${e}". Prefer function slots for better performance.`);const s=Fp(n);t[e]=()=>s}}},N_=(a,t)=>{({}).NODE_ENV!=="production"&&!wp(a.vnode)&&Pe("Non-function value encountered for default slot. Prefer function slots for better performance.");const i=Fp(t);a.slots.default=()=>i},WA=(a,t)=>{if(a.vnode.shapeFlag&32){const i=t._;i?(a.slots=nt(t),Sf(t,"_",i)):F_(t,a.slots={})}else a.slots={},t&&N_(a,t);Sf(a.slots,Xf,1)},qA=(a,t,i)=>{const{vnode:r,slots:e}=a;let n=!0,s=Dt;if(r.shapeFlag&32){const o=t._;o?{}.NODE_ENV!=="production"&&Fs?Gt(e,t):i&&o===1?n=!1:(Gt(e,t),!i&&o===1&&delete e._):(n=!t.$stable,F_(t,e)),s=t}else t&&(N_(a,t),s={default:1});if(n)for(const o in e)!M_(o)&&!(o in s)&&delete e[o]};function U_(){return{app:null,config:{isNativeTag:w0,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let GA=0;function zA(a,t){return function(r,e=null){Ze(r)||(r=Object.assign({},r)),e!=null&&!Ft(e)&&({}.NODE_ENV!=="production"&&Pe("root props passed to app.mount() must be an object."),e=null);const n=U_(),s=new Set;let o=!1;const l=n.app={_uid:GA++,_component:r,_props:e,_container:null,_context:n,_instance:null,version:Q_,get config(){return n.config},set config(f){({}).NODE_ENV!=="production"&&Pe("app.config cannot be replaced. Modify individual options instead.")},use(f,...m){return s.has(f)?{}.NODE_ENV!=="production"&&Pe("Plugin has already been applied to target app."):f&&Ze(f.install)?(s.add(f),f.install(l,...m)):Ze(f)?(s.add(f),f(l,...m)):{}.NODE_ENV!=="production"&&Pe('A plugin must either be a function or an object with an "install" function.'),l},mixin(f){return n.mixins.includes(f)?{}.NODE_ENV!=="production"&&Pe("Mixin has already been applied to target app"+(f.name?`: ${f.name}`:"")):n.mixins.push(f),l},component(f,m){return{}.NODE_ENV!=="production"&&Vp(f,n.config),m?({}.NODE_ENV!=="production"&&n.components[f]&&Pe(`Component "${f}" has already been registered in target app.`),n.components[f]=m,l):n.components[f]},directive(f,m){return{}.NODE_ENV!=="production"&&T_(f),m?({}.NODE_ENV!=="production"&&n.directives[f]&&Pe(`Directive "${f}" has already been registered in target app.`),n.directives[f]=m,l):n.directives[f]},mount(f,m,v){if(o)({}).NODE_ENV!=="production"&&Pe("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{({}).NODE_ENV!=="production"&&f.__vue_app__&&Pe("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const y=Mn(r,e);return y.appContext=n,{}.NODE_ENV!=="production"&&(n.reload=()=>{a(Za(y),f,v)}),m&&t?t(y,f):a(y,f,v),o=!0,l._container=f,f.__vue_app__=l,{}.NODE_ENV!=="production"&&(l._instance=y.component,GC(l,Q_)),Jf(y.component)||y.component.proxy}},unmount(){o?(a(null,l._container),{}.NODE_ENV!=="production"&&(l._instance=null,zC(l)),delete l._container.__vue_app__):{}.NODE_ENV!=="production"&&Pe("Cannot unmount an app that is not mounted.")},provide(f,m){return{}.NODE_ENV!=="production"&&f in n.provides&&Pe(`App already provides property with key "${String(f)}". It will be overwritten with the new value.`),n.provides[f]=m,l}};return l}}function Np(a,t,i,r,e=!1){if(Ye(a)){a.forEach((y,E)=>Np(y,t&&(Ye(t)?t[E]:t),i,r,e));return}if(Wf(r)&&!e)return;const n=r.shapeFlag&4?Jf(r.component)||r.component.proxy:r.el,s=e?null:n,{i:o,r:l}=a;if({}.NODE_ENV!=="production"&&!o){Pe("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const f=t&&t.r,m=o.refs===Dt?o.refs={}:o.refs,v=o.setupState;if(f!=null&&f!==l&&(zt(f)?(m[f]=null,ct(v,f)&&(v[f]=null)):si(f)&&(f.value=null)),Ze(l))la(l,o,12,[s,m]);else{const y=zt(l),E=si(l);if(y||E){const I=()=>{if(a.f){const O=y?ct(v,l)?v[l]:m[l]:l.value;e?Ye(O)&&tp(O,n):Ye(O)?O.includes(n)||O.push(n):y?(m[l]=[n],ct(v,l)&&(v[l]=m[l])):(l.value=[n],a.k&&(m[a.k]=l.value))}else y?(m[l]=s,ct(v,l)&&(v[l]=s)):E?(l.value=s,a.k&&(m[a.k]=s)):{}.NODE_ENV!=="production"&&Pe("Invalid template ref type:",l,`(${typeof l})`)};s?(I.id=-1,ir(I,i)):I()}else({}).NODE_ENV!=="production"&&Pe("Invalid template ref type:",l,`(${typeof l})`)}}let xl,Ja;function fa(a,t){a.appContext.config.performance&&zf()&&Ja.mark(`vue-${t}-${a.uid}`),{}.NODE_ENV!=="production"&&YC(a,t,zf()?Ja.now():Date.now())}function ca(a,t){if(a.appContext.config.performance&&zf()){const i=`vue-${t}-${a.uid}`,r=i+":end";Ja.mark(r),Ja.measure(`<${Zf(a,a.type)}> ${t}`,i,r),Ja.clearMarks(i),Ja.clearMarks(r)}({}).NODE_ENV!=="production"&&JC(a,t,zf()?Ja.now():Date.now())}function zf(){return xl!==void 0||(typeof window<"u"&&window.performance?(xl=!0,Ja=window.performance):xl=!1),xl}function KA(){const a=[];if({}.NODE_ENV!=="production"&&a.length){const t=a.length>1;console.warn(`Feature flag${t?"s":""} ${a.join(", ")} ${t?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const ir=uA;function XA(a){return QA(a)}function QA(a,t){KA();const i=I0();i.__VUE__=!0,{}.NODE_ENV!=="production"&&l_(i.__VUE_DEVTOOLS_GLOBAL_HOOK__,i);const{insert:r,remove:e,patchProp:n,createElement:s,createText:o,createComment:l,setText:f,setElementText:m,parentNode:v,nextSibling:y,setScopeId:E=yi,insertStaticContent:I}=a,O=(G,J,de,me=null,ce=null,we=null,ue=!1,Ee=null,be={}.NODE_ENV!=="production"&&Fs?!1:!!J.dynamicChildren)=>{if(G===J)return;G&&!Il(G,J)&&(me=Ct(G),Qe(G,ce,we,!0),G=null),J.patchFlag===-2&&(be=!1,J.dynamicChildren=null);const{type:_e,ref:Re,shapeFlag:ke}=J;switch(_e){case Sl:D(G,J,de,me);break;case yr:R(G,J,de,me);break;case El:G==null?H(J,de,me,ue):{}.NODE_ENV!=="production"&&Z(G,J,de,ue);break;case rn:se(G,J,de,me,ce,we,ue,Ee,be);break;default:ke&1?te(G,J,de,me,ce,we,ue,Ee,be):ke&6?he(G,J,de,me,ce,we,ue,Ee,be):ke&64||ke&128?_e.process(G,J,de,me,ce,we,ue,Ee,be,Yt):{}.NODE_ENV!=="production"&&Pe("Invalid VNode type:",_e,`(${typeof _e})`)}Re!=null&&ce&&Np(Re,G&&G.ref,we,J||G,!J)},D=(G,J,de,me)=>{if(G==null)r(J.el=o(J.children),de,me);else{const ce=J.el=G.el;J.children!==G.children&&f(ce,J.children)}},R=(G,J,de,me)=>{G==null?r(J.el=l(J.children||""),de,me):J.el=G.el},H=(G,J,de,me)=>{[G.el,G.anchor]=I(G.children,J,de,me,G.el,G.anchor)},Z=(G,J,de,me)=>{if(J.children!==G.children){const ce=y(G.anchor);W(G),[J.el,J.anchor]=I(J.children,de,ce,me)}else J.el=G.el,J.anchor=G.anchor},V=({el:G,anchor:J},de,me)=>{let ce;for(;G&&G!==J;)ce=y(G),r(G,de,me),G=ce;r(J,de,me)},W=({el:G,anchor:J})=>{let de;for(;G&&G!==J;)de=y(G),e(G),G=de;e(J)},te=(G,J,de,me,ce,we,ue,Ee,be)=>{ue=ue||J.type==="svg",G==null?z(J,de,me,ce,we,ue,Ee,be):j(G,J,ce,we,ue,Ee,be)},z=(G,J,de,me,ce,we,ue,Ee)=>{let be,_e;const{type:Re,props:ke,shapeFlag:Me,transition:je,dirs:qe}=G;if(be=G.el=s(G.type,we,ke&&ke.is,ke),Me&8?m(be,G.children):Me&16&&X(G.children,be,null,me,ce,we&&Re!=="foreignObject",ue,Ee),qe&&Bs(G,null,me,"created"),q(be,G,G.scopeId,ue,me),ke){for(const ft in ke)ft!=="value"&&!bf(ft)&&n(be,ft,null,ke[ft],we,G.children,me,ce,wt);"value"in ke&&n(be,"value",null,ke.value),(_e=ke.onVnodeBeforeMount)&&Fn(_e,me,G)}({}).NODE_ENV!=="production"&&(Object.defineProperty(be,"__vnode",{value:G,enumerable:!1}),Object.defineProperty(be,"__vueParentComponent",{value:me,enumerable:!1})),qe&&Bs(G,null,me,"beforeMount");const ut=(!ce||ce&&!ce.pendingBranch)&&je&&!je.persisted;ut&&je.beforeEnter(be),r(be,J,de),((_e=ke&&ke.onVnodeMounted)||ut||qe)&&ir(()=>{_e&&Fn(_e,me,G),ut&&je.enter(be),qe&&Bs(G,null,me,"mounted")},ce)},q=(G,J,de,me,ce)=>{if(de&&E(G,de),me)for(let we=0;we<me.length;we++)E(G,me[we]);if(ce){let we=ce.subTree;if({}.NODE_ENV!=="production"&&we.patchFlag>0&&we.patchFlag&2048&&(we=p_(we.children)||we),J===we){const ue=ce.vnode;q(G,ue,ue.scopeId,ue.slotScopeIds,ce.parent)}}},X=(G,J,de,me,ce,we,ue,Ee,be=0)=>{for(let _e=be;_e<G.length;_e++){const Re=G[_e]=Ee?es(G[_e]):an(G[_e]);O(null,Re,J,de,me,ce,we,ue,Ee)}},j=(G,J,de,me,ce,we,ue)=>{const Ee=J.el=G.el;let{patchFlag:be,dynamicChildren:_e,dirs:Re}=J;be|=G.patchFlag&16;const ke=G.props||Dt,Me=J.props||Dt;let je;de&&Hs(de,!1),(je=Me.onVnodeBeforeUpdate)&&Fn(je,de,J,G),Re&&Bs(J,G,de,"beforeUpdate"),de&&Hs(de,!0),{}.NODE_ENV!=="production"&&Fs&&(be=0,ue=!1,_e=null);const qe=ce&&J.type!=="foreignObject";if(_e?(oe(G.dynamicChildren,_e,Ee,de,me,qe,we),{}.NODE_ENV!=="production"&&de&&de.type.__hmrId&&Kf(G,J)):ue||Ie(G,J,Ee,null,de,me,qe,we,!1),be>0){if(be&16)re(Ee,J,ke,Me,de,me,ce);else if(be&2&&ke.class!==Me.class&&n(Ee,"class",null,Me.class,ce),be&4&&n(Ee,"style",ke.style,Me.style,ce),be&8){const ut=J.dynamicProps;for(let ft=0;ft<ut.length;ft++){const At=ut[ft],Oe=ke[At],lr=Me[At];(lr!==Oe||At==="value")&&n(Ee,At,Oe,lr,ce,G.children,de,me,wt)}}be&1&&G.children!==J.children&&m(Ee,J.children)}else!ue&&_e==null&&re(Ee,J,ke,Me,de,me,ce);((je=Me.onVnodeUpdated)||Re)&&ir(()=>{je&&Fn(je,de,J,G),Re&&Bs(J,G,de,"updated")},me)},oe=(G,J,de,me,ce,we,ue)=>{for(let Ee=0;Ee<J.length;Ee++){const be=G[Ee],_e=J[Ee],Re=be.el&&(be.type===rn||!Il(be,_e)||be.shapeFlag&70)?v(be.el):de;O(be,_e,Re,null,me,ce,we,ue,!0)}},re=(G,J,de,me,ce,we,ue)=>{if(de!==me){if(de!==Dt)for(const Ee in de)!bf(Ee)&&!(Ee in me)&&n(G,Ee,de[Ee],null,ue,J.children,ce,we,wt);for(const Ee in me){if(bf(Ee))continue;const be=me[Ee],_e=de[Ee];be!==_e&&Ee!=="value"&&n(G,Ee,_e,be,ue,J.children,ce,we,wt)}"value"in me&&n(G,"value",de.value,me.value)}},se=(G,J,de,me,ce,we,ue,Ee,be)=>{const _e=J.el=G?G.el:o(""),Re=J.anchor=G?G.anchor:o("");let{patchFlag:ke,dynamicChildren:Me,slotScopeIds:je}=J;({}).NODE_ENV!=="production"&&(Fs||ke&2048)&&(ke=0,be=!1,Me=null),je&&(Ee=Ee?Ee.concat(je):je),G==null?(r(_e,de,me),r(Re,de,me),X(J.children,de,Re,ce,we,ue,Ee,be)):ke>0&&ke&64&&Me&&G.dynamicChildren?(oe(G.dynamicChildren,Me,de,ce,we,ue,Ee),{}.NODE_ENV!=="production"&&ce&&ce.type.__hmrId?Kf(G,J):(J.key!=null||ce&&J===ce.subTree)&&Kf(G,J,!0)):Ie(G,J,de,Re,ce,we,ue,Ee,be)},he=(G,J,de,me,ce,we,ue,Ee,be)=>{J.slotScopeIds=Ee,G==null?J.shapeFlag&512?ce.ctx.activate(J,de,me,ue,be):le(J,de,me,ce,we,ue,be):pe(G,J,be)},le=(G,J,de,me,ce,we,ue)=>{const Ee=G.component=oI(G,me,ce);if({}.NODE_ENV!=="production"&&Ee.type.__hmrId&&HC(Ee),{}.NODE_ENV!=="production"&&(Mf(G),fa(Ee,"mount")),wp(G)&&(Ee.ctx.renderer=Yt),{}.NODE_ENV!=="production"&&fa(Ee,"init"),dI(Ee),{}.NODE_ENV!=="production"&&ca(Ee,"init"),Ee.asyncDep){if(ce&&ce.registerDep(Ee,ne),!G.el){const be=Ee.subTree=Mn(yr);R(null,be,J,de)}return}ne(Ee,G,J,de,ce,we,ue),{}.NODE_ENV!=="production"&&(Ff(),ca(Ee,"mount"))},pe=(G,J,de)=>{const me=J.component=G.component;if(aA(G,J,de))if(me.asyncDep&&!me.asyncResolved){({}).NODE_ENV!=="production"&&Mf(J),fe(me,J,de),{}.NODE_ENV!=="production"&&Ff();return}else me.next=J,jC(me.update),me.update();else J.el=G.el,me.vnode=J},ne=(G,J,de,me,ce,we,ue)=>{const Ee=()=>{if(G.isMounted){let{next:Re,bu:ke,u:Me,parent:je,vnode:qe}=G,ut=Re,ft;({}).NODE_ENV!=="production"&&Mf(Re||G.vnode),Hs(G,!1),Re?(Re.el=qe.el,fe(G,Re,ue)):Re=qe,ke&&fl(ke),(ft=Re.props&&Re.props.onVnodeBeforeUpdate)&&Fn(ft,je,Re,qe),Hs(G,!0),{}.NODE_ENV!=="production"&&fa(G,"render");const At=Sp(G);({}).NODE_ENV!=="production"&&ca(G,"render");const Oe=G.subTree;G.subTree=At,{}.NODE_ENV!=="production"&&fa(G,"patch"),O(Oe,At,v(Oe.el),Ct(Oe),G,ce,we),{}.NODE_ENV!=="production"&&ca(G,"patch"),Re.el=At.el,ut===null&&sA(G,At.el),Me&&ir(Me,ce),(ft=Re.props&&Re.props.onVnodeUpdated)&&ir(()=>Fn(ft,je,Re,qe),ce),{}.NODE_ENV!=="production"&&d_(G),{}.NODE_ENV!=="production"&&Ff()}else{let Re;const{el:ke,props:Me}=J,{bm:je,m:qe,parent:ut}=G,ft=Wf(J);if(Hs(G,!1),je&&fl(je),!ft&&(Re=Me&&Me.onVnodeBeforeMount)&&Fn(Re,ut,J),Hs(G,!0),ke&&Ei){const At=()=>{({}).NODE_ENV!=="production"&&fa(G,"render"),G.subTree=Sp(G),{}.NODE_ENV!=="production"&&ca(G,"render"),{}.NODE_ENV!=="production"&&fa(G,"hydrate"),Ei(ke,G.subTree,G,ce,null),{}.NODE_ENV!=="production"&&ca(G,"hydrate")};ft?J.type.__asyncLoader().then(()=>!G.isUnmounted&&At()):At()}else{({}).NODE_ENV!=="production"&&fa(G,"render");const At=G.subTree=Sp(G);({}).NODE_ENV!=="production"&&ca(G,"render"),{}.NODE_ENV!=="production"&&fa(G,"patch"),O(null,At,de,me,G,ce,we),{}.NODE_ENV!=="production"&&ca(G,"patch"),J.el=At.el}if(qe&&ir(qe,ce),!ft&&(Re=Me&&Me.onVnodeMounted)){const At=J;ir(()=>Fn(Re,ut,At),ce)}(J.shapeFlag&256||ut&&Wf(ut.vnode)&&ut.vnode.shapeFlag&256)&&G.a&&ir(G.a,ce),G.isMounted=!0,{}.NODE_ENV!=="production"&&KC(G),J=de=me=null}},be=G.effect=new dp(Ee,()=>Uf(_e),G.scope),_e=G.update=()=>be.run();_e.id=G.uid,Hs(G,!0),{}.NODE_ENV!=="production"&&(be.onTrack=G.rtc?Re=>fl(G.rtc,Re):void 0,be.onTrigger=G.rtg?Re=>fl(G.rtg,Re):void 0,_e.ownerInstance=G),_e()},fe=(G,J,de)=>{J.component=G;const me=G.vnode.props;G.vnode=J,G.next=null,NA(G,J.props,me,de),qA(G,J.children,de),Ls(),n_(),ks()},Ie=(G,J,de,me,ce,we,ue,Ee,be=!1)=>{const _e=G&&G.children,Re=G?G.shapeFlag:0,ke=J.children,{patchFlag:Me,shapeFlag:je}=J;if(Me>0){if(Me&128){Xe(_e,ke,de,me,ce,we,ue,Ee,be);return}else if(Me&256){Ce(_e,ke,de,me,ce,we,ue,Ee,be);return}}je&8?(Re&16&&wt(_e,ce,we),ke!==_e&&m(de,ke)):Re&16?je&16?Xe(_e,ke,de,me,ce,we,ue,Ee,be):wt(_e,ce,we,!0):(Re&8&&m(de,""),je&16&&X(ke,de,me,ce,we,ue,Ee,be))},Ce=(G,J,de,me,ce,we,ue,Ee,be)=>{G=G||Mo,J=J||Mo;const _e=G.length,Re=J.length,ke=Math.min(_e,Re);let Me;for(Me=0;Me<ke;Me++){const je=J[Me]=be?es(J[Me]):an(J[Me]);O(G[Me],je,de,null,ce,we,ue,Ee,be)}_e>Re?wt(G,ce,we,!0,!1,ke):X(J,de,me,ce,we,ue,Ee,be,ke)},Xe=(G,J,de,me,ce,we,ue,Ee,be)=>{let _e=0;const Re=J.length;let ke=G.length-1,Me=Re-1;for(;_e<=ke&&_e<=Me;){const je=G[_e],qe=J[_e]=be?es(J[_e]):an(J[_e]);if(Il(je,qe))O(je,qe,de,null,ce,we,ue,Ee,be);else break;_e++}for(;_e<=ke&&_e<=Me;){const je=G[ke],qe=J[Me]=be?es(J[Me]):an(J[Me]);if(Il(je,qe))O(je,qe,de,null,ce,we,ue,Ee,be);else break;ke--,Me--}if(_e>ke){if(_e<=Me){const je=Me+1,qe=je<Re?J[je].el:me;for(;_e<=Me;)O(null,J[_e]=be?es(J[_e]):an(J[_e]),de,qe,ce,we,ue,Ee,be),_e++}}else if(_e>Me)for(;_e<=ke;)Qe(G[_e],ce,we,!0),_e++;else{const je=_e,qe=_e,ut=new Map;for(_e=qe;_e<=Me;_e++){const Vt=J[_e]=be?es(J[_e]):an(J[_e]);Vt.key!=null&&({}.NODE_ENV!=="production"&&ut.has(Vt.key)&&Pe("Duplicate keys found during update:",JSON.stringify(Vt.key),"Make sure keys are unique."),ut.set(Vt.key,_e))}let ft,At=0;const Oe=Me-qe+1;let lr=!1,Xn=0;const Cr=new Array(Oe);for(_e=0;_e<Oe;_e++)Cr[_e]=0;for(_e=je;_e<=ke;_e++){const Vt=G[_e];if(At>=Oe){Qe(Vt,ce,we,!0);continue}let jt;if(Vt.key!=null)jt=ut.get(Vt.key);else for(ft=qe;ft<=Me;ft++)if(Cr[ft-qe]===0&&Il(Vt,J[ft])){jt=ft;break}jt===void 0?Qe(Vt,ce,we,!0):(Cr[jt-qe]=_e+1,jt>=Xn?Xn=jt:lr=!0,O(Vt,J[jt],de,null,ce,we,ue,Ee,be),At++)}const Qn=lr?YA(Cr):Mo;for(ft=Qn.length-1,_e=Oe-1;_e>=0;_e--){const Vt=qe+_e,jt=J[Vt],ls=Vt+1<Re?J[Vt+1].el:me;Cr[_e]===0?O(null,jt,de,ls,ce,we,ue,Ee,be):lr&&(ft<0||_e!==Qn[ft]?Be(jt,de,ls,2):ft--)}}},Be=(G,J,de,me,ce=null)=>{const{el:we,type:ue,transition:Ee,children:be,shapeFlag:_e}=G;if(_e&6){Be(G.component.subTree,J,de,me);return}if(_e&128){G.suspense.move(J,de,me);return}if(_e&64){ue.move(G,J,de,Yt);return}if(ue===rn){r(we,J,de);for(let ke=0;ke<be.length;ke++)Be(be[ke],J,de,me);r(G.anchor,J,de);return}if(ue===El){V(G,J,de);return}if(me!==2&&_e&1&&Ee)if(me===0)Ee.beforeEnter(we),r(we,J,de),ir(()=>Ee.enter(we),ce);else{const{leave:ke,delayLeave:Me,afterLeave:je}=Ee,qe=()=>r(we,J,de),ut=()=>{ke(we,()=>{qe(),je&&je()})};Me?Me(we,qe,ut):ut()}else r(we,J,de)},Qe=(G,J,de,me=!1,ce=!1)=>{const{type:we,props:ue,ref:Ee,children:be,dynamicChildren:_e,shapeFlag:Re,patchFlag:ke,dirs:Me}=G;if(Ee!=null&&Np(Ee,null,de,G,!0),Re&256){J.ctx.deactivate(G);return}const je=Re&1&&Me,qe=!Wf(G);let ut;if(qe&&(ut=ue&&ue.onVnodeBeforeUnmount)&&Fn(ut,J,G),Re&6)xt(G.component,de,me);else{if(Re&128){G.suspense.unmount(de,me);return}je&&Bs(G,null,J,"beforeUnmount"),Re&64?G.type.remove(G,J,de,ce,Yt,me):_e&&(we!==rn||ke>0&&ke&64)?wt(_e,J,de,!1,!0):(we===rn&&ke&384||!ce&&Re&16)&&wt(be,J,de),me&&Et(G)}(qe&&(ut=ue&&ue.onVnodeUnmounted)||je)&&ir(()=>{ut&&Fn(ut,J,G),je&&Bs(G,null,J,"unmounted")},de)},Et=G=>{const{type:J,el:de,anchor:me,transition:ce}=G;if(J===rn){({}).NODE_ENV!=="production"&&G.patchFlag>0&&G.patchFlag&2048&&ce&&!ce.persisted?G.children.forEach(ue=>{ue.type===yr?e(ue.el):Et(ue)}):bt(de,me);return}if(J===El){W(G);return}const we=()=>{e(de),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(G.shapeFlag&1&&ce&&!ce.persisted){const{leave:ue,delayLeave:Ee}=ce,be=()=>ue(de,we);Ee?Ee(G.el,we,be):be()}else we()},bt=(G,J)=>{let de;for(;G!==J;)de=y(G),e(G),G=de;e(J)},xt=(G,J,de)=>{({}).NODE_ENV!=="production"&&G.type.__hmrId&&$C(G);const{bum:me,scope:ce,update:we,subTree:ue,um:Ee}=G;me&&fl(me),ce.stop(),we&&(we.active=!1,Qe(ue,G,J,de)),Ee&&ir(Ee,J),ir(()=>{G.isUnmounted=!0},J),J&&J.pendingBranch&&!J.isUnmounted&&G.asyncDep&&!G.asyncResolved&&G.suspenseId===J.pendingId&&(J.deps--,J.deps===0&&J.resolve()),{}.NODE_ENV!=="production"&&QC(G)},wt=(G,J,de,me=!1,ce=!1,we=0)=>{for(let ue=we;ue<G.length;ue++)Qe(G[ue],J,de,me,ce)},Ct=G=>G.shapeFlag&6?Ct(G.component.subTree):G.shapeFlag&128?G.suspense.next():y(G.anchor||G.el),ht=(G,J,de)=>{G==null?J._vnode&&Qe(J._vnode,null,null,!0):O(J._vnode||null,G,J,null,null,null,de),n_(),a_(),J._vnode=G},Yt={p:O,um:Qe,m:Be,r:Et,mt:le,mc:X,pc:Ie,pbc:oe,n:Ct,o:a};let gi,Ei;return t&&([gi,Ei]=t(Yt)),{render:ht,hydrate:gi,createApp:zA(ht,gi)}}function Hs({effect:a,update:t},i){a.allowRecurse=t.allowRecurse=i}function Kf(a,t,i=!1){const r=a.children,e=t.children;if(Ye(r)&&Ye(e))for(let n=0;n<r.length;n++){const s=r[n];let o=e[n];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=e[n]=es(e[n]),o.el=s.el),i||Kf(s,o)),o.type===Sl&&(o.el=s.el),{}.NODE_ENV!=="production"&&o.type===yr&&!o.el&&(o.el=s.el)}}function YA(a){const t=a.slice(),i=[0];let r,e,n,s,o;const l=a.length;for(r=0;r<l;r++){const f=a[r];if(f!==0){if(e=i[i.length-1],a[e]<f){t[r]=e,i.push(r);continue}for(n=0,s=i.length-1;n<s;)o=n+s>>1,a[i[o]]<f?n=o+1:s=o;f<a[i[n]]&&(n>0&&(t[r]=i[n-1]),i[n]=r)}}for(n=i.length,s=i[n-1];n-- >0;)i[n]=s,s=t[s];return i}const JA=a=>a.__isTeleport,rn=Symbol({}.NODE_ENV!=="production"?"Fragment":void 0),Sl=Symbol({}.NODE_ENV!=="production"?"Text":void 0),yr=Symbol({}.NODE_ENV!=="production"?"Comment":void 0),El=Symbol({}.NODE_ENV!=="production"?"Static":void 0),wl=[];let nn=null;function Cl(a=!1){wl.push(nn=a?null:[])}function ZA(){wl.pop(),nn=wl[wl.length-1]||null}let Al=1;function B_(a){Al+=a}function j_(a){return a.dynamicChildren=Al>0?nn||Mo:null,ZA(),Al>0&&nn&&nn.push(a),a}function Up(a,t,i,r,e,n){return j_(Yf(a,t,i,r,e,n,!0))}function V_(a,t,i,r,e){return j_(Mn(a,t,i,r,e,!0))}function Bp(a){return a?a.__v_isVNode===!0:!1}function Il(a,t){return{}.NODE_ENV!=="production"&&t.shapeFlag&6&&Ho.has(t.type)?(a.shapeFlag&=-257,t.shapeFlag&=-513,!1):a.type===t.type&&a.key===t.key}const eI=(...a)=>$_(...a),Xf="__vInternal",H_=({key:a})=>a??null,Qf=({ref:a,ref_key:t,ref_for:i})=>a!=null?zt(a)||si(a)||Ze(a)?{i:Vi,r:a,k:t,f:!!i}:a:null;function Yf(a,t=null,i=null,r=0,e=null,n=a===rn?0:1,s=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:a,props:t,key:t&&H_(t),ref:t&&Qf(t),scopeId:h_,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:r,dynamicProps:e,dynamicChildren:null,appContext:null,ctx:Vi};return o?(jp(l,i),n&128&&a.normalize(l)):i&&(l.shapeFlag|=zt(i)?8:16),{}.NODE_ENV!=="production"&&l.key!==l.key&&Pe("VNode created with invalid key (NaN). VNode type:",l.type),Al>0&&!s&&nn&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&nn.push(l),l}const Mn={}.NODE_ENV!=="production"?eI:$_;function $_(a,t=null,i=null,r=0,e=null,n=!1){if((!a||a===b_)&&({}.NODE_ENV!=="production"&&!a&&Pe(`Invalid vnode type when creating vnode: ${a}.`),a=yr),Bp(a)){const o=Za(a,t,!0);return i&&jp(o,i),Al>0&&!n&&nn&&(o.shapeFlag&6?nn[nn.indexOf(a)]=o:nn.push(o)),o.patchFlag|=-2,o}if(X_(a)&&(a=a.__vccOpts),t){t=tI(t);let{class:o,style:l}=t;o&&!zt(o)&&(t.class=ep(o)),Ft(l)&&(hp(l)&&!Ye(l)&&(l=Gt({},l)),t.style=_f(l))}const s=zt(a)?1:oA(a)?128:JA(a)?64:Ft(a)?4:Ze(a)?2:0;return{}.NODE_ENV!=="production"&&s&4&&hp(a)&&(a=nt(a),Pe("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,a)),Yf(a,t,i,r,e,s,n,!0)}function tI(a){return a?hp(a)||Xf in a?Gt({},a):a:null}function Za(a,t,i=!1){const{props:r,ref:e,patchFlag:n,children:s}=a,o=t?nI(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:a.type,props:o,key:o&&H_(o),ref:t&&t.ref?i&&e?Ye(e)?e.concat(Qf(t)):[e,Qf(t)]:Qf(t):e,scopeId:a.scopeId,slotScopeIds:a.slotScopeIds,children:{}.NODE_ENV!=="production"&&n===-1&&Ye(s)?s.map(W_):s,target:a.target,targetAnchor:a.targetAnchor,staticCount:a.staticCount,shapeFlag:a.shapeFlag,patchFlag:t&&a.type!==rn?n===-1?16:n|16:n,dynamicProps:a.dynamicProps,dynamicChildren:a.dynamicChildren,appContext:a.appContext,dirs:a.dirs,transition:a.transition,component:a.component,suspense:a.suspense,ssContent:a.ssContent&&Za(a.ssContent),ssFallback:a.ssFallback&&Za(a.ssFallback),el:a.el,anchor:a.anchor,ctx:a.ctx,ce:a.ce}}function W_(a){const t=Za(a);return Ye(a.children)&&(t.children=a.children.map(W_)),t}function iI(a=" ",t=0){return Mn(Sl,null,a,t)}function rI(a="",t=!1){return t?(Cl(),V_(yr,null,a)):Mn(yr,null,a)}function an(a){return a==null||typeof a=="boolean"?Mn(yr):Ye(a)?Mn(rn,null,a.slice()):typeof a=="object"?es(a):Mn(Sl,null,String(a))}function es(a){return a.el===null&&a.patchFlag!==-1||a.memo?a:Za(a)}function jp(a,t){let i=0;const{shapeFlag:r}=a;if(t==null)t=null;else if(Ye(t))i=16;else if(typeof t=="object")if(r&65){const e=t.default;e&&(e._c&&(e._d=!1),jp(a,e()),e._c&&(e._d=!0));return}else{i=32;const e=t._;!e&&!(Xf in t)?t._ctx=Vi:e===3&&Vi&&(Vi.slots._===1?t._=1:(t._=2,a.patchFlag|=1024))}else Ze(t)?(t={default:t,_ctx:Vi},i=32):(t=String(t),r&64?(i=16,t=[iI(t)]):i=8);a.children=t,a.shapeFlag|=i}function nI(...a){const t={};for(let i=0;i<a.length;i++){const r=a[i];for(const e in r)if(e==="class")t.class!==r.class&&(t.class=ep([t.class,r.class]));else if(e==="style")t.style=_f([t.style,r.style]);else if(ll(e)){const n=t[e],s=r[e];s&&n!==s&&!(Ye(n)&&n.includes(s))&&(t[e]=n?[].concat(n,s):s)}else e!==""&&(t[e]=r[e])}return t}function Fn(a,t,i,r=null){tn(a,t,7,[i,r])}const aI=U_();let sI=0;function oI(a,t,i){const r=a.type,e=(t?t.appContext:a.appContext)||aI,n={uid:sI++,vnode:a,type:r,parent:t,appContext:e,root:null,next:null,subTree:null,effect:null,update:null,scope:new Qw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(e.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:I_(r,e),emitsOptions:c_(r,e),emit:null,emitted:null,propsDefaults:Dt,inheritAttrs:r.inheritAttrs,ctx:Dt,data:Dt,props:Dt,attrs:Dt,slots:Dt,refs:Dt,setupState:Dt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return{}.NODE_ENV!=="production"?n.ctx=CA(n):n.ctx={_:n},n.root=t?t.root:n,n.emit=eA.bind(null,n),a.ce&&a.ce(n),n}let $t=null;const uI=()=>$t||Vi,$o=a=>{$t=a,a.scope.on()},$s=()=>{$t&&$t.scope.off(),$t=null},lI=oa("slot,component");function Vp(a,t){const i=t.isNativeTag||w0;(lI(a)||i(a))&&Pe("Do not use built-in or reserved HTML elements as component id: "+a)}function q_(a){return a.vnode.shapeFlag&4}let Pl=!1;function dI(a,t=!1){Pl=t;const{props:i,children:r}=a.vnode,e=q_(a);MA(a,i,e,t),WA(a,r);const n=e?fI(a,t):void 0;return Pl=!1,n}function fI(a,t){var i;const r=a.type;if({}.NODE_ENV!=="production"){if(r.name&&Vp(r.name,a.appContext.config),r.components){const n=Object.keys(r.components);for(let s=0;s<n.length;s++)Vp(n[s],a.appContext.config)}if(r.directives){const n=Object.keys(r.directives);for(let s=0;s<n.length;s++)T_(n[s])}r.compilerOptions&&cI()&&Pe('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}a.accessCache=Object.create(null),a.proxy=X0(new Proxy(a.ctx,S_)),{}.NODE_ENV!=="production"&&AA(a);const{setup:e}=r;if(e){const n=a.setupContext=e.length>1?hI(a):null;$o(a),Ls();const s=la(e,a,0,[{}.NODE_ENV!=="production"?Uo(a.props):a.props,n]);if(ks(),$s(),rp(s)){if(s.then($s,$s),t)return s.then(o=>{G_(a,o,t)}).catch(o=>{Nf(o,a,0)});if(a.asyncDep=s,{}.NODE_ENV!=="production"&&!a.suspense){const o=(i=r.name)!==null&&i!==void 0?i:"Anonymous";Pe(`Component <${o}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else G_(a,s,t)}else z_(a,t)}function G_(a,t,i){Ze(t)?a.type.__ssrInlineRender?a.ssrRender=t:a.render=t:Ft(t)?({}.NODE_ENV!=="production"&&Bp(t)&&Pe("setup() should not return VNodes directly - return a render function instead."),{}.NODE_ENV!=="production"&&(a.devtoolsRawSetupState=t),a.setupState=J0(t),{}.NODE_ENV!=="production"&&IA(a)):{}.NODE_ENV!=="production"&&t!==void 0&&Pe(`setup() should return an object. Received: ${t===null?"null":typeof t}`),z_(a,i)}let Hp;const cI=()=>!Hp;function z_(a,t,i){const r=a.type;if(!a.render){if(!t&&Hp&&!r.render){const e=r.template||Lp(a).template;if(e){({}).NODE_ENV!=="production"&&fa(a,"compile");const{isCustomElement:n,compilerOptions:s}=a.appContext.config,{delimiters:o,compilerOptions:l}=r,f=Gt(Gt({isCustomElement:n,delimiters:o},s),l);r.render=Hp(e,f),{}.NODE_ENV!=="production"&&ca(a,"compile")}}a.render=r.render||yi}$o(a),Ls(),OA(a),ks(),$s(),{}.NODE_ENV!=="production"&&!r.render&&a.render===yi&&!t&&(r.template?Pe('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):Pe("Component is missing template or render function."))}function K_(a){return new Proxy(a.attrs,{}.NODE_ENV!=="production"?{get(t,i){return Vf(),ji(a,"get","$attrs"),t[i]},set(){return Pe("setupContext.attrs is readonly."),!1},deleteProperty(){return Pe("setupContext.attrs is readonly."),!1}}:{get(t,i){return ji(a,"get","$attrs"),t[i]}})}function hI(a){const t=r=>{if({}.NODE_ENV!=="production"&&(a.exposed&&Pe("expose() should be called only once per setup()."),r!=null)){let e=typeof r;e==="object"&&(Ye(r)?e="array":si(r)&&(e="ref")),e!=="object"&&Pe(`expose() should be passed a plain object, received ${e}.`)}a.exposed=r||{}};let i;return{}.NODE_ENV!=="production"?Object.freeze({get attrs(){return i||(i=K_(a))},get slots(){return Uo(a.slots)},get emit(){return(r,...e)=>a.emit(r,...e)},expose:t}):{get attrs(){return i||(i=K_(a))},slots:a.slots,emit:a.emit,expose:t}}function Jf(a){if(a.exposed)return a.exposeProxy||(a.exposeProxy=new Proxy(J0(X0(a.exposed)),{get(t,i){if(i in t)return t[i];if(i in js)return js[i](a)},has(t,i){return i in t||i in js}}))}const pI=/(?:^|[-_])(\w)/g,mI=a=>a.replace(pI,t=>t.toUpperCase()).replace(/[-_]/g,"");function $p(a,t=!0){return Ze(a)?a.displayName||a.name:a.name||t&&a.__name}function Zf(a,t,i=!1){let r=$p(t);if(!r&&t.__file){const e=t.__file.match(/([^/\\]+)\.\w+$/);e&&(r=e[1])}if(!r&&a&&a.parent){const e=n=>{for(const s in n)if(n[s]===t)return s};r=e(a.components||a.parent.type.components)||e(a.appContext.components)}return r?mI(r):i?"App":"Anonymous"}function X_(a){return Ze(a)&&"__vccOpts"in a}const ec=(a,t)=>LC(a,t,Pl),gI=Symbol({}.NODE_ENV!=="production"?"ssrContext":""),vI=()=>{{const a=Hf(gI);return a||{}.NODE_ENV!=="production"&&Pe("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),a}};function Wp(a){return!!(a&&a.__v_isShallow)}function _I(){if({}.NODE_ENV==="production"||typeof window>"u")return;const a={style:"color:#3ba776"},t={style:"color:#0b1bc9"},i={style:"color:#b62e24"},r={style:"color:#9d288c"},e={header(v){return Ft(v)?v.__isVue?["div",a,"VueInstance"]:si(v)?["div",{},["span",a,m(v)],"<",o(v.value),">"]:Rs(v)?["div",{},["span",a,Wp(v)?"ShallowReactive":"Reactive"],"<",o(v),`>${Qa(v)?" (readonly)":""}`]:Qa(v)?["div",{},["span",a,Wp(v)?"ShallowReadonly":"Readonly"],"<",o(v),">"]:null:null},hasBody(v){return v&&v.__isVue},body(v){if(v&&v.__isVue)return["div",{},...n(v.$)]}};function n(v){const y=[];v.type.props&&v.props&&y.push(s("props",nt(v.props))),v.setupState!==Dt&&y.push(s("setup",v.setupState)),v.data!==Dt&&y.push(s("data",nt(v.data)));const E=l(v,"computed");E&&y.push(s("computed",E));const I=l(v,"inject");return I&&y.push(s("injected",I)),y.push(["div",{},["span",{style:r.style+";opacity:0.66"},"$ (internal): "],["object",{object:v}]]),y}function s(v,y){return y=Gt({},y),Object.keys(y).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},v],["div",{style:"padding-left:1.25em"},...Object.keys(y).map(E=>["div",{},["span",r,E+": "],o(y[E],!1)])]]:["span",{}]}function o(v,y=!0){return typeof v=="number"?["span",t,v]:typeof v=="string"?["span",i,JSON.stringify(v)]:typeof v=="boolean"?["span",r,v]:Ft(v)?["object",{object:y?nt(v):v}]:["span",i,String(v)]}function l(v,y){const E=v.type;if(Ze(E))return;const I={};for(const O in v.ctx)f(E,O,y)&&(I[O]=v.ctx[O]);return I}function f(v,y,E){const I=v[E];if(Ye(I)&&I.includes(y)||Ft(I)&&y in I||v.extends&&f(v.extends,y,E)||v.mixins&&v.mixins.some(O=>f(O,y,E)))return!0}function m(v){return Wp(v)?"ShallowRef":v.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(e):window.devtoolsFormatters=[e]}const Q_="3.2.47",yI="http://www.w3.org/2000/svg",Ws=typeof document<"u"?document:null,Y_=Ws&&Ws.createElement("template"),TI={insert:(a,t,i)=>{t.insertBefore(a,i||null)},remove:a=>{const t=a.parentNode;t&&t.removeChild(a)},createElement:(a,t,i,r)=>{const e=t?Ws.createElementNS(yI,a):Ws.createElement(a,i?{is:i}:void 0);return a==="select"&&r&&r.multiple!=null&&e.setAttribute("multiple",r.multiple),e},createText:a=>Ws.createTextNode(a),createComment:a=>Ws.createComment(a),setText:(a,t)=>{a.nodeValue=t},setElementText:(a,t)=>{a.textContent=t},parentNode:a=>a.parentNode,nextSibling:a=>a.nextSibling,querySelector:a=>Ws.querySelector(a),setScopeId(a,t){a.setAttribute(t,"")},insertStaticContent(a,t,i,r,e,n){const s=i?i.previousSibling:t.lastChild;if(e&&(e===n||e.nextSibling))for(;t.insertBefore(e.cloneNode(!0),i),!(e===n||!(e=e.nextSibling)););else{Y_.innerHTML=r?`<svg>${a}</svg>`:a;const o=Y_.content;if(r){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,i)}return[s?s.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function bI(a,t,i){const r=a._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?a.removeAttribute("class"):i?a.setAttribute("class",t):a.className=t}function xI(a,t,i){const r=a.style,e=zt(i);if(i&&!e){if(t&&!zt(t))for(const n in t)i[n]==null&&qp(r,n,"");for(const n in i)qp(r,n,i[n])}else{const n=r.display;e?t!==i&&(r.cssText=i):t&&a.removeAttribute("style"),"_vod"in a&&(r.display=n)}}const SI=/[^\\];\s*$/,J_=/\s*!important$/;function qp(a,t,i){if(Ye(i))i.forEach(r=>qp(a,t,r));else if(i==null&&(i=""),{}.NODE_ENV!=="production"&&SI.test(i)&&Pe(`Unexpected semicolon at the end of '${t}' style value: '${i}'`),t.startsWith("--"))a.setProperty(t,i);else{const r=EI(a,t);J_.test(i)?a.setProperty(_r(r),i.replace(J_,""),"important"):a[r]=i}}const Z_=["Webkit","Moz","ms"],Gp={};function EI(a,t){const i=Gp[t];if(i)return i;let r=vr(t);if(r!=="filter"&&r in a)return Gp[t]=r;r=Ps(r);for(let e=0;e<Z_.length;e++){const n=Z_[e]+r;if(n in a)return Gp[t]=n}return t}const ey="http://www.w3.org/1999/xlink";function wI(a,t,i,r,e){if(r&&t.startsWith("xlink:"))i==null?a.removeAttributeNS(ey,t.slice(6,t.length)):a.setAttributeNS(ey,t,i);else{const n=jw(t);i==null||n&&!E0(i)?a.removeAttribute(t):a.setAttribute(t,n?"":i)}}function CI(a,t,i,r,e,n,s){if(t==="innerHTML"||t==="textContent"){r&&s(r,e,n),a[t]=i??"";return}if(t==="value"&&a.tagName!=="PROGRESS"&&!a.tagName.includes("-")){a._value=i;const l=i??"";(a.value!==l||a.tagName==="OPTION")&&(a.value=l),i==null&&a.removeAttribute(t);return}let o=!1;if(i===""||i==null){const l=typeof a[t];l==="boolean"?i=E0(i):i==null&&l==="string"?(i="",o=!0):l==="number"&&(i=0,o=!0)}try{a[t]=i}catch(l){({}).NODE_ENV!=="production"&&!o&&Pe(`Failed setting prop "${t}" on <${a.tagName.toLowerCase()}>: value ${i} is invalid.`,l)}o&&a.removeAttribute(t)}function AI(a,t,i,r){a.addEventListener(t,i,r)}function II(a,t,i,r){a.removeEventListener(t,i,r)}function PI(a,t,i,r,e=null){const n=a._vei||(a._vei={}),s=n[t];if(r&&s)s.value=r;else{const[o,l]=OI(t);if(r){const f=n[t]=kI(r,e);AI(a,o,f,l)}else s&&(II(a,o,s,l),n[t]=void 0)}}const ty=/(?:Once|Passive|Capture)$/;function OI(a){let t;if(ty.test(a)){t={};let r;for(;r=a.match(ty);)a=a.slice(0,a.length-r[0].length),t[r[0].toLowerCase()]=!0}return[a[2]===":"?a.slice(3):_r(a.slice(2)),t]}let zp=0;const DI=Promise.resolve(),LI=()=>zp||(DI.then(()=>zp=0),zp=Date.now());function kI(a,t){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;tn(RI(r,i.value),t,5,[r])};return i.value=a,i.attached=LI(),i}function RI(a,t){if(Ye(t)){const i=a.stopImmediatePropagation;return a.stopImmediatePropagation=()=>{i.call(a),a._stopped=!0},t.map(r=>e=>!e._stopped&&r&&r(e))}else return t}const iy=/^on[a-z]/,MI=(a,t,i,r,e=!1,n,s,o,l)=>{t==="class"?bI(a,r,e):t==="style"?xI(a,i,r):ll(t)?yf(t)||PI(a,t,i,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):FI(a,t,r,e))?CI(a,t,r,n,s,o,l):(t==="true-value"?a._trueValue=r:t==="false-value"&&(a._falseValue=r),wI(a,t,r,e))};function FI(a,t,i,r){return r?!!(t==="innerHTML"||t==="textContent"||t in a&&iy.test(t)&&Ze(i)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&a.tagName==="INPUT"||t==="type"&&a.tagName==="TEXTAREA"||iy.test(t)&&zt(i)?!1:t in a}function NI(a,t){const i=bl(a);class r extends Kp{constructor(n){super(i,n,t)}}return r.def=i,r}const UI=typeof HTMLElement<"u"?HTMLElement:class{};class Kp extends UI{constructor(t,i={},r){super(),this._def=t,this._props=i,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):({}.NODE_ENV!=="production"&&this.shadowRoot&&Pe("Custom element has pre-rendered declarative shadow root but is not defined as hydratable. Use `defineSSRCustomElement`."),this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,Vo(()=>{this._connected||(ny(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);new MutationObserver(r=>{for(const e of r)this._setAttr(e.attributeName)}).observe(this,{attributes:!0});const t=(r,e=!1)=>{const{props:n,styles:s}=r;let o;if(n&&!Ye(n))for(const l in n){const f=n[l];(f===Number||f&&f.type===Number)&&(l in this._props&&(this._props[l]=C0(this._props[l])),(o||(o=Object.create(null)))[vr(l)]=!0)}this._numberProps=o,e&&this._resolveProps(r),this._applyStyles(s),this._update()},i=this._def.__asyncLoader;i?i().then(r=>t(r,!0)):t(this._def)}_resolveProps(t){const{props:i}=t,r=Ye(i)?i:Object.keys(i||{});for(const e of Object.keys(this))e[0]!=="_"&&r.includes(e)&&this._setProp(e,this[e],!0,!1);for(const e of r.map(vr))Object.defineProperty(this,e,{get(){return this._getProp(e)},set(n){this._setProp(e,n)}})}_setAttr(t){let i=this.getAttribute(t);const r=vr(t);this._numberProps&&this._numberProps[r]&&(i=C0(i)),this._setProp(r,i,!1)}_getProp(t){return this._props[t]}_setProp(t,i,r=!0,e=!0){i!==this._props[t]&&(this._props[t]=i,e&&this._instance&&this._update(),r&&(i===!0?this.setAttribute(_r(t),""):typeof i=="string"||typeof i=="number"?this.setAttribute(_r(t),i+""):i||this.removeAttribute(_r(t))))}_update(){ny(this._createVNode(),this.shadowRoot)}_createVNode(){const t=Mn(this._def,Gt({},this._props));return this._instance||(t.ce=i=>{this._instance=i,i.isCE=!0,{}.NODE_ENV!=="production"&&(i.ceReload=n=>{this._styles&&(this._styles.forEach(s=>this.shadowRoot.removeChild(s)),this._styles.length=0),this._applyStyles(n),this._instance=null,this._update()});const r=(n,s)=>{this.dispatchEvent(new CustomEvent(n,{detail:s}))};i.emit=(n,...s)=>{r(n,s),_r(n)!==n&&r(_r(n),s)};let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof Kp){i.parent=e._instance,i.provides=e._instance.provides;break}}),t}_applyStyles(t){t&&t.forEach(i=>{const r=document.createElement("style");r.textContent=i,this.shadowRoot.appendChild(r),{}.NODE_ENV!=="production"&&(this._styles||(this._styles=[])).push(r)})}}function BI(a){const t=uI();if(!t){({}).NODE_ENV!=="production"&&Pe("useCssVars is called without current active component instance.");return}const i=t.ut=(e=a(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(n=>Qp(n,e))},r=()=>{const e=a(t.proxy);Xp(t.subTree,e),i(e)};dA(r),y_(()=>{const e=new MutationObserver(r);e.observe(t.subTree.el.parentNode,{childList:!0}),Cp(()=>e.disconnect())})}function Xp(a,t){if(a.shapeFlag&128){const i=a.suspense;a=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{Xp(i.activeBranch,t)})}for(;a.component;)a=a.component.subTree;if(a.shapeFlag&1&&a.el)Qp(a.el,t);else if(a.type===rn)a.children.forEach(i=>Xp(i,t));else if(a.type===El){let{el:i,anchor:r}=a;for(;i&&(Qp(i,t),i!==r);)i=i.nextSibling}}function Qp(a,t){if(a.nodeType===1){const i=a.style;for(const r in t)i.setProperty(`--${r}`,t[r])}}const jI={beforeMount(a,{value:t},{transition:i}){a._vod=a.style.display==="none"?"":a.style.display,i&&t?i.beforeEnter(a):Ol(a,t)},mounted(a,{value:t},{transition:i}){i&&t&&i.enter(a)},updated(a,{value:t,oldValue:i},{transition:r}){!t!=!i&&(r?t?(r.beforeEnter(a),Ol(a,!0),r.enter(a)):r.leave(a,()=>{Ol(a,!1)}):Ol(a,t))},beforeUnmount(a,{value:t}){Ol(a,t)}};function Ol(a,t){a.style.display=t?a._vod:"none"}const VI=Gt({patchProp:MI},TI);let ry;function HI(){return ry||(ry=XA(VI))}const ny=(...a)=>{HI().render(...a)};function $I(){_I()}({}).NODE_ENV!=="production"&&$I();const WI={webComponentUploaderVersion:"1.0.1",webComponentNameUploader:"micro-media-uploader",webComponentSimpleUploaderVersion:"1.0.0",webComponentNameSimpleUploader:"micro-media-simple-uploader",webComponentPlayerVersion:"1.0.0",webComponentNamePlayer:"micro-media-player",allowFileTypeList:["video/"],allowFileExtensionList:["mp4","webm","avi","mov"]};let tc;const qI=new Uint8Array(16);function GI(){if(!tc&&(tc=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!tc))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tc(qI)}const Ti=[];for(let a=0;a<256;++a)Ti.push((a+256).toString(16).slice(1));function zI(a,t=0){return(Ti[a[t+0]]+Ti[a[t+1]]+Ti[a[t+2]]+Ti[a[t+3]]+"-"+Ti[a[t+4]]+Ti[a[t+5]]+"-"+Ti[a[t+6]]+Ti[a[t+7]]+"-"+Ti[a[t+8]]+Ti[a[t+9]]+"-"+Ti[a[t+10]]+Ti[a[t+11]]+Ti[a[t+12]]+Ti[a[t+13]]+Ti[a[t+14]]+Ti[a[t+15]]).toLowerCase()}const ay={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function KI(a,t,i){if(ay.randomUUID&&!t&&!a)return ay.randomUUID();a=a||{};const r=a.random||(a.rng||GI)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=r[e];return t}return zI(r)}var Nn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function sy(a){if(a.__esModule)return a;var t=a.default;if(typeof t=="function"){var i=function r(){if(this instanceof r){var e=[null];e.push.apply(e,arguments);var n=Function.bind.apply(t,e);return new n}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(a).forEach(function(r){var e=Object.getOwnPropertyDescriptor(a,r);Object.defineProperty(i,r,e.get?e:{enumerable:!0,get:function(){return a[r]}})}),i}var qs={},XI={get exports(){return qs},set exports(a){qs=a}};(function(a,t){(function(){var i,r="4.17.21",e=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",f=500,m="__lodash_placeholder__",v=1,y=2,E=4,I=1,O=2,D=1,R=2,H=4,Z=8,V=16,W=32,te=64,z=128,q=256,X=512,j=30,oe="...",re=800,se=16,he=1,le=2,pe=3,ne=1/0,fe=9007199254740991,Ie=17976931348623157e292,Ce=0/0,Xe=4294967295,Be=Xe-1,Qe=Xe>>>1,Et=[["ary",z],["bind",D],["bindKey",R],["curry",Z],["curryRight",V],["flip",X],["partial",W],["partialRight",te],["rearg",q]],bt="[object Arguments]",xt="[object Array]",wt="[object AsyncFunction]",Ct="[object Boolean]",ht="[object Date]",Yt="[object DOMException]",gi="[object Error]",Ei="[object Function]",G="[object GeneratorFunction]",J="[object Map]",de="[object Number]",me="[object Null]",ce="[object Object]",we="[object Promise]",ue="[object Proxy]",Ee="[object RegExp]",be="[object Set]",_e="[object String]",Re="[object Symbol]",ke="[object Undefined]",Me="[object WeakMap]",je="[object WeakSet]",qe="[object ArrayBuffer]",ut="[object DataView]",ft="[object Float32Array]",At="[object Float64Array]",Oe="[object Int8Array]",lr="[object Int16Array]",Xn="[object Int32Array]",Cr="[object Uint8Array]",Qn="[object Uint8ClampedArray]",Vt="[object Uint16Array]",jt="[object Uint32Array]",ls=/\b__p \+= '';/g,Sd=/\b(__p \+=) '' \+/g,Ed=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Mu=/&(?:amp|lt|gt|quot|#39);/g,Mt=/[&<>"']/g,so=RegExp(Mu.source),wd=RegExp(Mt.source),Cd=/<%-([\s\S]+?)%>/g,Ad=/<%([\s\S]+?)%>/g,Fu=/<%=([\s\S]+?)%>/g,Id=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ar=/^\w*$/,Ot=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,oo=/[\\^$.*+?()[\]{}|]/g,Pd=RegExp(oo.source),Ir=/^\s+/,Jt=/\s/,pn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ve=/\{\n\/\* \[wrapped with (.+)\] \*/,Od=/,? & /,mn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,gn=/[()=,{}\[\]\/\s]/,Dd=/\\(\\)?/g,wi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ge=/\w*$/,vn=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,Ld=/^\[object .+?Constructor\]$/,kd=/^0o[0-7]+$/i,uo=/^(?:0|[1-9]\d*)$/,La=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Yn=/($^)/,lo=/['\n\r\u2028\u2029\\]/g,Jn="\\ud800-\\udfff",_n="\\u0300-\\u036f",Rd="\\ufe20-\\ufe2f",yn="\\u20d0-\\u20ff",ds=_n+Rd+yn,Vr="\\u2700-\\u27bf",Nu="a-z\\xdf-\\xf6\\xf8-\\xff",Md="\\xac\\xb1\\xd7\\xf7",Tn="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Pr="\\u2000-\\u206f",bn=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Mi="A-Z\\xc0-\\xd6\\xd8-\\xde",Zn="\\ufe0e\\ufe0f",fs=Md+Tn+Pr+bn,xn="[']",Zt="["+Jn+"]",Uu="["+fs+"]",dr="["+ds+"]",cs="\\d+",fo="["+Vr+"]",hs="["+Nu+"]",Bu="[^"+Jn+fs+cs+Vr+Nu+Mi+"]",Or="\\ud83c[\\udffb-\\udfff]",Dr="(?:"+dr+"|"+Or+")",ps="[^"+Jn+"]",co="(?:\\ud83c[\\udde6-\\uddff]){2}",ho="[\\ud800-\\udbff][\\udc00-\\udfff]",Hr="["+Mi+"]",ju="\\u200d",Vu="(?:"+hs+"|"+Bu+")",po="(?:"+Hr+"|"+Bu+")",Hu="(?:"+xn+"(?:d|ll|m|re|s|t|ve))?",$u="(?:"+xn+"(?:D|LL|M|RE|S|T|VE))?",Wu=Dr+"?",qu="["+Zn+"]?",Fd="(?:"+ju+"(?:"+[ps,co,ho].join("|")+")"+qu+Wu+")*",Nd="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Sn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",$r=qu+Wu+Fd,Ud="(?:"+[fo,co,ho].join("|")+")"+$r,Bd="(?:"+[ps+dr+"?",dr,co,ho,Zt].join("|")+")",ka=RegExp(xn,"g"),jd=RegExp(dr,"g"),En=RegExp(Or+"(?="+Or+")|"+Bd+$r,"g"),Vd=RegExp([Hr+"?"+hs+"+"+Hu+"(?="+[Uu,Hr,"$"].join("|")+")",po+"+"+$u+"(?="+[Uu,Hr+Vu,"$"].join("|")+")",Hr+"?"+Vu+"+"+Hu,Hr+"+"+$u,Sn,Nd,cs,Ud].join("|"),"g"),Hd=RegExp("["+ju+Jn+ds+Zn+"]"),$d=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Lr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Yi=-1,_t={};_t[ft]=_t[At]=_t[Oe]=_t[lr]=_t[Xn]=_t[Cr]=_t[Qn]=_t[Vt]=_t[jt]=!0,_t[bt]=_t[xt]=_t[qe]=_t[Ct]=_t[ut]=_t[ht]=_t[gi]=_t[Ei]=_t[J]=_t[de]=_t[ce]=_t[Ee]=_t[be]=_t[_e]=_t[Me]=!1;var rt={};rt[bt]=rt[xt]=rt[qe]=rt[ut]=rt[Ct]=rt[ht]=rt[ft]=rt[At]=rt[Oe]=rt[lr]=rt[Xn]=rt[J]=rt[de]=rt[ce]=rt[Ee]=rt[be]=rt[_e]=rt[Re]=rt[Cr]=rt[Qn]=rt[Vt]=rt[jt]=!0,rt[gi]=rt[Ei]=rt[Me]=!1;var Wd={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},mo={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},go={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ra={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},qd=parseFloat,Gd=parseInt,Gu=typeof Nn=="object"&&Nn&&Nn.Object===Object&&Nn,wn=typeof self=="object"&&self&&self.Object===Object&&self,ei=Gu||wn||Function("return this")(),ui=t&&!t.nodeType&&t,Cn=ui&&!0&&a&&!a.nodeType&&a,zu=Cn&&Cn.exports===ui,He=zu&&Gu.process,Fi=function(){try{var S=Cn&&Cn.require&&Cn.require("util").types;return S||He&&He.binding&&He.binding("util")}catch{}}(),Ku=Fi&&Fi.isArrayBuffer,Xu=Fi&&Fi.isDate,ms=Fi&&Fi.isMap,Qu=Fi&&Fi.isRegExp,gs=Fi&&Fi.isSet,Yu=Fi&&Fi.isTypedArray;function li(S,P,C){switch(C.length){case 0:return S.call(P);case 1:return S.call(P,C[0]);case 2:return S.call(P,C[0],C[1]);case 3:return S.call(P,C[0],C[1],C[2])}return S.apply(P,C)}function zd(S,P,C,L){for(var B=-1,ee=S==null?0:S.length;++B<ee;){var ae=S[B];P(L,ae,C(ae),S)}return L}function vi(S,P){for(var C=-1,L=S==null?0:S.length;++C<L&&P(S[C],C,S)!==!1;);return S}function vo(S,P){for(var C=S==null?0:S.length;C--&&P(S[C],C,S)!==!1;);return S}function fr(S,P){for(var C=-1,L=S==null?0:S.length;++C<L;)if(!P(S[C],C,S))return!1;return!0}function ni(S,P){for(var C=-1,L=S==null?0:S.length,B=0,ee=[];++C<L;){var ae=S[C];P(ae,C,S)&&(ee[B++]=ae)}return ee}function vs(S,P){var C=S==null?0:S.length;return!!C&&qr(S,P,0)>-1}function _o(S,P,C){for(var L=-1,B=S==null?0:S.length;++L<B;)if(C(P,S[L]))return!0;return!1}function Lt(S,P){for(var C=-1,L=S==null?0:S.length,B=Array(L);++C<L;)B[C]=P(S[C],C,S);return B}function Wr(S,P){for(var C=-1,L=P.length,B=S.length;++C<L;)S[B+C]=P[C];return S}function yo(S,P,C,L){var B=-1,ee=S==null?0:S.length;for(L&&ee&&(C=S[++B]);++B<ee;)C=P(C,S[B],B,S);return C}function Kd(S,P,C,L){var B=S==null?0:S.length;for(L&&B&&(C=S[--B]);B--;)C=P(C,S[B],B,S);return C}function To(S,P){for(var C=-1,L=S==null?0:S.length;++C<L;)if(P(S[C],C,S))return!0;return!1}var Xd=Ma("length");function Qd(S){return S.split("")}function An(S){return S.match(mn)||[]}function cr(S,P,C){var L;return C(S,function(B,ee,ae){if(P(B,ee,ae))return L=ee,!1}),L}function _s(S,P,C,L){for(var B=S.length,ee=C+(L?1:-1);L?ee--:++ee<B;)if(P(S[ee],ee,S))return ee;return-1}function qr(S,P,C){return P===P?tf(S,P,C):_s(S,ys,C)}function bo(S,P,C,L){for(var B=C-1,ee=S.length;++B<ee;)if(L(S[B],P))return B;return-1}function ys(S){return S!==S}function Ts(S,P){var C=S==null?0:S.length;return C?kr(S,P)/C:Ce}function Ma(S){return function(P){return P==null?i:P[S]}}function In(S){return function(P){return S==null?i:S[P]}}function bs(S,P,C,L,B){return B(S,function(ee,ae,Q){C=L?(L=!1,ee):P(C,ee,ae,Q)}),C}function xo(S,P){var C=S.length;for(S.sort(P);C--;)S[C]=S[C].value;return S}function kr(S,P){for(var C,L=-1,B=S.length;++L<B;){var ee=P(S[L]);ee!==i&&(C=C===i?ee:C+ee)}return C}function Rr(S,P){for(var C=-1,L=Array(S);++C<S;)L[C]=P(C);return L}function Yd(S,P){return Lt(P,function(C){return[C,S[C]]})}function Ju(S){return S&&S.slice(0,d(S)+1).replace(Ir,"")}function Ci(S){return function(P){return S(P)}}function So(S,P){return Lt(P,function(C){return S[C]})}function Fa(S,P){return S.has(P)}function ea(S,P){for(var C=-1,L=S.length;++C<L&&qr(P,S[C],0)>-1;);return C}function Zu(S,P){for(var C=S.length;C--&&qr(P,S[C],0)>-1;);return C}function Jd(S,P){for(var C=S.length,L=0;C--;)S[C]===P&&++L;return L}var Ji=In(Wd),Fe=In(mo);function Ai(S){return"\\"+Ra[S]}function St(S,P){return S==null?i:S[P]}function kt(S){return Hd.test(S)}function Zd(S){return $d.test(S)}function Eo(S){for(var P,C=[];!(P=S.next()).done;)C.push(P.value);return C}function wo(S){var P=-1,C=Array(S.size);return S.forEach(function(L,B){C[++P]=[B,L]}),C}function el(S,P){return function(C){return S(P(C))}}function Gr(S,P){for(var C=-1,L=S.length,B=0,ee=[];++C<L;){var ae=S[C];(ae===P||ae===m)&&(S[C]=m,ee[B++]=C)}return ee}function xs(S){var P=-1,C=Array(S.size);return S.forEach(function(L){C[++P]=L}),C}function ef(S){var P=-1,C=Array(S.size);return S.forEach(function(L){C[++P]=[L,L]}),C}function tf(S,P,C){for(var L=C-1,B=S.length;++L<B;)if(S[L]===P)return L;return-1}function rf(S,P,C){for(var L=C+1;L--;)if(S[L]===P)return L;return L}function zr(S){return kt(S)?h(S):Xd(S)}function x(S){return kt(S)?g(S):Qd(S)}function d(S){for(var P=S.length;P--&&Jt.test(S.charAt(P)););return P}var p=In(go);function h(S){for(var P=En.lastIndex=0;En.test(S);)++P;return P}function g(S){return S.match(En)||[]}function _(S){return S.match(Vd)||[]}var T=function S(P){P=P==null?ei:w.defaults(ei.Object(),P,w.pick(ei,Lr));var C=P.Array,L=P.Date,B=P.Error,ee=P.Function,ae=P.Math,Q=P.Object,ye=P.RegExp,at=P.String,tt=P.TypeError,ai=C.prototype,Na=ee.prototype,Kr=Q.prototype,ta=P["__core-js_shared__"],ia=Na.toString,mt=Kr.hasOwnProperty,Co=0,Je=function(){var u=/[^.]+$/.exec(ta&&ta.keys&&ta.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),ra=Kr.toString,Ii=ia.call(Q),aB=ei._,sB=ye("^"+ia.call(mt).replace(oo,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),xh=zu?P.Buffer:i,Ss=P.Symbol,Sh=P.Uint8Array,KE=xh?xh.allocUnsafe:i,Eh=el(Q.getPrototypeOf,Q),XE=Q.create,QE=Kr.propertyIsEnumerable,wh=ai.splice,YE=Ss?Ss.isConcatSpreadable:i,nf=Ss?Ss.iterator:i,Ao=Ss?Ss.toStringTag:i,Ch=function(){try{var u=Lo(Q,"defineProperty");return u({},"",{}),u}catch{}}(),oB=P.clearTimeout!==ei.clearTimeout&&P.clearTimeout,uB=L&&L.now!==ei.Date.now&&L.now,lB=P.setTimeout!==ei.setTimeout&&P.setTimeout,Ah=ae.ceil,Ih=ae.floor,Dv=Q.getOwnPropertySymbols,dB=xh?xh.isBuffer:i,JE=P.isFinite,fB=ai.join,cB=el(Q.keys,Q),di=ae.max,Ni=ae.min,hB=L.now,pB=P.parseInt,ZE=ae.random,mB=ai.reverse,Lv=Lo(P,"DataView"),af=Lo(P,"Map"),kv=Lo(P,"Promise"),tl=Lo(P,"Set"),sf=Lo(P,"WeakMap"),of=Lo(Q,"create"),Ph=sf&&new sf,il={},gB=ko(Lv),vB=ko(af),_B=ko(kv),yB=ko(tl),TB=ko(sf),Oh=Ss?Ss.prototype:i,uf=Oh?Oh.valueOf:i,e1=Oh?Oh.toString:i;function M(u){if(qt(u)&&!it(u)&&!(u instanceof vt)){if(u instanceof Xr)return u;if(mt.call(u,"__wrapped__"))return tw(u)}return new Xr(u)}var rl=function(){function u(){}return function(c){if(!Ht(c))return{};if(XE)return XE(c);u.prototype=c;var b=new u;return u.prototype=i,b}}();function Dh(){}function Xr(u,c){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=i}M.templateSettings={escape:Cd,evaluate:Ad,interpolate:Fu,variable:"",imports:{_:M}},M.prototype=Dh.prototype,M.prototype.constructor=M,Xr.prototype=rl(Dh.prototype),Xr.prototype.constructor=Xr;function vt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Xe,this.__views__=[]}function bB(){var u=new vt(this.__wrapped__);return u.__actions__=hr(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=hr(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=hr(this.__views__),u}function xB(){if(this.__filtered__){var u=new vt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function SB(){var u=this.__wrapped__.value(),c=this.__dir__,b=it(u),A=c<0,k=b?u.length:0,U=Mj(0,k,this.__views__),K=U.start,Y=U.end,ie=Y-K,ge=A?Y:K-1,ve=this.__iteratees__,xe=ve.length,Le=0,Ne=Ni(ie,this.__takeCount__);if(!b||!A&&k==ie&&Ne==ie)return E1(u,this.__actions__);var ze=[];e:for(;ie--&&Le<Ne;){ge+=c;for(var lt=-1,Ke=u[ge];++lt<xe;){var gt=ve[lt],yt=gt.iteratee,Nr=gt.type,tr=yt(Ke);if(Nr==le)Ke=tr;else if(!tr){if(Nr==he)continue e;break e}}ze[Le++]=Ke}return ze}vt.prototype=rl(Dh.prototype),vt.prototype.constructor=vt;function Io(u){var c=-1,b=u==null?0:u.length;for(this.clear();++c<b;){var A=u[c];this.set(A[0],A[1])}}function EB(){this.__data__=of?of(null):{},this.size=0}function wB(u){var c=this.has(u)&&delete this.__data__[u];return this.size-=c?1:0,c}function CB(u){var c=this.__data__;if(of){var b=c[u];return b===l?i:b}return mt.call(c,u)?c[u]:i}function AB(u){var c=this.__data__;return of?c[u]!==i:mt.call(c,u)}function IB(u,c){var b=this.__data__;return this.size+=this.has(u)?0:1,b[u]=of&&c===i?l:c,this}Io.prototype.clear=EB,Io.prototype.delete=wB,Io.prototype.get=CB,Io.prototype.has=AB,Io.prototype.set=IB;function Ua(u){var c=-1,b=u==null?0:u.length;for(this.clear();++c<b;){var A=u[c];this.set(A[0],A[1])}}function PB(){this.__data__=[],this.size=0}function OB(u){var c=this.__data__,b=Lh(c,u);if(b<0)return!1;var A=c.length-1;return b==A?c.pop():wh.call(c,b,1),--this.size,!0}function DB(u){var c=this.__data__,b=Lh(c,u);return b<0?i:c[b][1]}function LB(u){return Lh(this.__data__,u)>-1}function kB(u,c){var b=this.__data__,A=Lh(b,u);return A<0?(++this.size,b.push([u,c])):b[A][1]=c,this}Ua.prototype.clear=PB,Ua.prototype.delete=OB,Ua.prototype.get=DB,Ua.prototype.has=LB,Ua.prototype.set=kB;function Ba(u){var c=-1,b=u==null?0:u.length;for(this.clear();++c<b;){var A=u[c];this.set(A[0],A[1])}}function RB(){this.size=0,this.__data__={hash:new Io,map:new(af||Ua),string:new Io}}function MB(u){var c=Wh(this,u).delete(u);return this.size-=c?1:0,c}function FB(u){return Wh(this,u).get(u)}function NB(u){return Wh(this,u).has(u)}function UB(u,c){var b=Wh(this,u),A=b.size;return b.set(u,c),this.size+=b.size==A?0:1,this}Ba.prototype.clear=RB,Ba.prototype.delete=MB,Ba.prototype.get=FB,Ba.prototype.has=NB,Ba.prototype.set=UB;function Po(u){var c=-1,b=u==null?0:u.length;for(this.__data__=new Ba;++c<b;)this.add(u[c])}function BB(u){return this.__data__.set(u,l),this}function jB(u){return this.__data__.has(u)}Po.prototype.add=Po.prototype.push=BB,Po.prototype.has=jB;function Pn(u){var c=this.__data__=new Ua(u);this.size=c.size}function VB(){this.__data__=new Ua,this.size=0}function HB(u){var c=this.__data__,b=c.delete(u);return this.size=c.size,b}function $B(u){return this.__data__.get(u)}function WB(u){return this.__data__.has(u)}function qB(u,c){var b=this.__data__;if(b instanceof Ua){var A=b.__data__;if(!af||A.length<e-1)return A.push([u,c]),this.size=++b.size,this;b=this.__data__=new Ba(A)}return b.set(u,c),this.size=b.size,this}Pn.prototype.clear=VB,Pn.prototype.delete=HB,Pn.prototype.get=$B,Pn.prototype.has=WB,Pn.prototype.set=qB;function t1(u,c){var b=it(u),A=!b&&Ro(u),k=!b&&!A&&Is(u),U=!b&&!A&&!k&&ol(u),K=b||A||k||U,Y=K?Rr(u.length,at):[],ie=Y.length;for(var ge in u)(c||mt.call(u,ge))&&!(K&&(ge=="length"||k&&(ge=="offset"||ge=="parent")||U&&(ge=="buffer"||ge=="byteLength"||ge=="byteOffset")||$a(ge,ie)))&&Y.push(ge);return Y}function i1(u){var c=u.length;return c?u[Wv(0,c-1)]:i}function GB(u,c){return qh(hr(u),Oo(c,0,u.length))}function zB(u){return qh(hr(u))}function Rv(u,c,b){(b!==i&&!On(u[c],b)||b===i&&!(c in u))&&ja(u,c,b)}function lf(u,c,b){var A=u[c];(!(mt.call(u,c)&&On(A,b))||b===i&&!(c in u))&&ja(u,c,b)}function Lh(u,c){for(var b=u.length;b--;)if(On(u[b][0],c))return b;return-1}function KB(u,c,b,A){return Es(u,function(k,U,K){c(A,k,b(k),K)}),A}function r1(u,c){return u&&aa(c,_i(c),u)}function XB(u,c){return u&&aa(c,mr(c),u)}function ja(u,c,b){c=="__proto__"&&Ch?Ch(u,c,{configurable:!0,enumerable:!0,value:b,writable:!0}):u[c]=b}function Mv(u,c){for(var b=-1,A=c.length,k=C(A),U=u==null;++b<A;)k[b]=U?i:m0(u,c[b]);return k}function Oo(u,c,b){return u===u&&(b!==i&&(u=u<=b?u:b),c!==i&&(u=u>=c?u:c)),u}function Qr(u,c,b,A,k,U){var K,Y=c&v,ie=c&y,ge=c&E;if(b&&(K=k?b(u,A,k,U):b(u)),K!==i)return K;if(!Ht(u))return u;var ve=it(u);if(ve){if(K=Nj(u),!Y)return hr(u,K)}else{var xe=Ui(u),Le=xe==Ei||xe==G;if(Is(u))return A1(u,Y);if(xe==ce||xe==bt||Le&&!k){if(K=ie||Le?{}:G1(u),!Y)return ie?Cj(u,XB(K,u)):wj(u,r1(K,u))}else{if(!rt[xe])return k?u:{};K=Uj(u,xe,Y)}}U||(U=new Pn);var Ne=U.get(u);if(Ne)return Ne;U.set(u,K),bw(u)?u.forEach(function(Ke){K.add(Qr(Ke,c,b,Ke,u,U))}):yw(u)&&u.forEach(function(Ke,gt){K.set(gt,Qr(Ke,c,b,gt,u,U))});var ze=ge?ie?t0:e0:ie?mr:_i,lt=ve?i:ze(u);return vi(lt||u,function(Ke,gt){lt&&(gt=Ke,Ke=u[gt]),lf(K,gt,Qr(Ke,c,b,gt,u,U))}),K}function QB(u){var c=_i(u);return function(b){return n1(b,u,c)}}function n1(u,c,b){var A=b.length;if(u==null)return!A;for(u=Q(u);A--;){var k=b[A],U=c[k],K=u[k];if(K===i&&!(k in u)||!U(K))return!1}return!0}function a1(u,c,b){if(typeof u!="function")throw new tt(s);return gf(function(){u.apply(i,b)},c)}function df(u,c,b,A){var k=-1,U=vs,K=!0,Y=u.length,ie=[],ge=c.length;if(!Y)return ie;b&&(c=Lt(c,Ci(b))),A?(U=_o,K=!1):c.length>=e&&(U=Fa,K=!1,c=new Po(c));e:for(;++k<Y;){var ve=u[k],xe=b==null?ve:b(ve);if(ve=A||ve!==0?ve:0,K&&xe===xe){for(var Le=ge;Le--;)if(c[Le]===xe)continue e;ie.push(ve)}else U(c,xe,A)||ie.push(ve)}return ie}var Es=L1(na),s1=L1(Nv,!0);function YB(u,c){var b=!0;return Es(u,function(A,k,U){return b=!!c(A,k,U),b}),b}function kh(u,c,b){for(var A=-1,k=u.length;++A<k;){var U=u[A],K=c(U);if(K!=null&&(Y===i?K===K&&!Fr(K):b(K,Y)))var Y=K,ie=U}return ie}function JB(u,c,b,A){var k=u.length;for(b=st(b),b<0&&(b=-b>k?0:k+b),A=A===i||A>k?k:st(A),A<0&&(A+=k),A=b>A?0:Sw(A);b<A;)u[b++]=c;return u}function o1(u,c){var b=[];return Es(u,function(A,k,U){c(A,k,U)&&b.push(A)}),b}function Pi(u,c,b,A,k){var U=-1,K=u.length;for(b||(b=jj),k||(k=[]);++U<K;){var Y=u[U];c>0&&b(Y)?c>1?Pi(Y,c-1,b,A,k):Wr(k,Y):A||(k[k.length]=Y)}return k}var Fv=k1(),u1=k1(!0);function na(u,c){return u&&Fv(u,c,_i)}function Nv(u,c){return u&&u1(u,c,_i)}function Rh(u,c){return ni(c,function(b){return Wa(u[b])})}function Do(u,c){c=Cs(c,u);for(var b=0,A=c.length;u!=null&&b<A;)u=u[sa(c[b++])];return b&&b==A?u:i}function l1(u,c,b){var A=c(u);return it(u)?A:Wr(A,b(u))}function Zi(u){return u==null?u===i?ke:me:Ao&&Ao in Q(u)?Rj(u):zj(u)}function Uv(u,c){return u>c}function ZB(u,c){return u!=null&&mt.call(u,c)}function ej(u,c){return u!=null&&c in Q(u)}function tj(u,c,b){return u>=Ni(c,b)&&u<di(c,b)}function Bv(u,c,b){for(var A=b?_o:vs,k=u[0].length,U=u.length,K=U,Y=C(U),ie=1/0,ge=[];K--;){var ve=u[K];K&&c&&(ve=Lt(ve,Ci(c))),ie=Ni(ve.length,ie),Y[K]=!b&&(c||k>=120&&ve.length>=120)?new Po(K&&ve):i}ve=u[0];var xe=-1,Le=Y[0];e:for(;++xe<k&&ge.length<ie;){var Ne=ve[xe],ze=c?c(Ne):Ne;if(Ne=b||Ne!==0?Ne:0,!(Le?Fa(Le,ze):A(ge,ze,b))){for(K=U;--K;){var lt=Y[K];if(!(lt?Fa(lt,ze):A(u[K],ze,b)))continue e}Le&&Le.push(ze),ge.push(Ne)}}return ge}function ij(u,c,b,A){return na(u,function(k,U,K){c(A,b(k),U,K)}),A}function ff(u,c,b){c=Cs(c,u),u=Q1(u,c);var A=u==null?u:u[sa(Jr(c))];return A==null?i:li(A,u,b)}function d1(u){return qt(u)&&Zi(u)==bt}function rj(u){return qt(u)&&Zi(u)==qe}function nj(u){return qt(u)&&Zi(u)==ht}function cf(u,c,b,A,k){return u===c?!0:u==null||c==null||!qt(u)&&!qt(c)?u!==u&&c!==c:aj(u,c,b,A,cf,k)}function aj(u,c,b,A,k,U){var K=it(u),Y=it(c),ie=K?xt:Ui(u),ge=Y?xt:Ui(c);ie=ie==bt?ce:ie,ge=ge==bt?ce:ge;var ve=ie==ce,xe=ge==ce,Le=ie==ge;if(Le&&Is(u)){if(!Is(c))return!1;K=!0,ve=!1}if(Le&&!ve)return U||(U=new Pn),K||ol(u)?$1(u,c,b,A,k,U):Lj(u,c,ie,b,A,k,U);if(!(b&I)){var Ne=ve&&mt.call(u,"__wrapped__"),ze=xe&&mt.call(c,"__wrapped__");if(Ne||ze){var lt=Ne?u.value():u,Ke=ze?c.value():c;return U||(U=new Pn),k(lt,Ke,b,A,U)}}return Le?(U||(U=new Pn),kj(u,c,b,A,k,U)):!1}function sj(u){return qt(u)&&Ui(u)==J}function jv(u,c,b,A){var k=b.length,U=k,K=!A;if(u==null)return!U;for(u=Q(u);k--;){var Y=b[k];if(K&&Y[2]?Y[1]!==u[Y[0]]:!(Y[0]in u))return!1}for(;++k<U;){Y=b[k];var ie=Y[0],ge=u[ie],ve=Y[1];if(K&&Y[2]){if(ge===i&&!(ie in u))return!1}else{var xe=new Pn;if(A)var Le=A(ge,ve,ie,u,c,xe);if(!(Le===i?cf(ve,ge,I|O,A,xe):Le))return!1}}return!0}function f1(u){if(!Ht(u)||Hj(u))return!1;var c=Wa(u)?sB:Ld;return c.test(ko(u))}function oj(u){return qt(u)&&Zi(u)==Ee}function uj(u){return qt(u)&&Ui(u)==be}function lj(u){return qt(u)&&Yh(u.length)&&!!_t[Zi(u)]}function c1(u){return typeof u=="function"?u:u==null?gr:typeof u=="object"?it(u)?m1(u[0],u[1]):p1(u):Rw(u)}function Vv(u){if(!mf(u))return cB(u);var c=[];for(var b in Q(u))mt.call(u,b)&&b!="constructor"&&c.push(b);return c}function dj(u){if(!Ht(u))return Gj(u);var c=mf(u),b=[];for(var A in u)A=="constructor"&&(c||!mt.call(u,A))||b.push(A);return b}function Hv(u,c){return u<c}function h1(u,c){var b=-1,A=pr(u)?C(u.length):[];return Es(u,function(k,U,K){A[++b]=c(k,U,K)}),A}function p1(u){var c=r0(u);return c.length==1&&c[0][2]?K1(c[0][0],c[0][1]):function(b){return b===u||jv(b,u,c)}}function m1(u,c){return a0(u)&&z1(c)?K1(sa(u),c):function(b){var A=m0(b,u);return A===i&&A===c?g0(b,u):cf(c,A,I|O)}}function Mh(u,c,b,A,k){u!==c&&Fv(c,function(U,K){if(k||(k=new Pn),Ht(U))fj(u,c,K,b,Mh,A,k);else{var Y=A?A(o0(u,K),U,K+"",u,c,k):i;Y===i&&(Y=U),Rv(u,K,Y)}},mr)}function fj(u,c,b,A,k,U,K){var Y=o0(u,b),ie=o0(c,b),ge=K.get(ie);if(ge){Rv(u,b,ge);return}var ve=U?U(Y,ie,b+"",u,c,K):i,xe=ve===i;if(xe){var Le=it(ie),Ne=!Le&&Is(ie),ze=!Le&&!Ne&&ol(ie);ve=ie,Le||Ne||ze?it(Y)?ve=Y:ti(Y)?ve=hr(Y):Ne?(xe=!1,ve=A1(ie,!0)):ze?(xe=!1,ve=I1(ie,!0)):ve=[]:vf(ie)||Ro(ie)?(ve=Y,Ro(Y)?ve=Ew(Y):(!Ht(Y)||Wa(Y))&&(ve=G1(ie))):xe=!1}xe&&(K.set(ie,ve),k(ve,ie,A,U,K),K.delete(ie)),Rv(u,b,ve)}function g1(u,c){var b=u.length;if(b)return c+=c<0?b:0,$a(c,b)?u[c]:i}function v1(u,c,b){c.length?c=Lt(c,function(U){return it(U)?function(K){return Do(K,U.length===1?U[0]:U)}:U}):c=[gr];var A=-1;c=Lt(c,Ci(We()));var k=h1(u,function(U,K,Y){var ie=Lt(c,function(ge){return ge(U)});return{criteria:ie,index:++A,value:U}});return xo(k,function(U,K){return Ej(U,K,b)})}function cj(u,c){return _1(u,c,function(b,A){return g0(u,A)})}function _1(u,c,b){for(var A=-1,k=c.length,U={};++A<k;){var K=c[A],Y=Do(u,K);b(Y,K)&&hf(U,Cs(K,u),Y)}return U}function hj(u){return function(c){return Do(c,u)}}function $v(u,c,b,A){var k=A?bo:qr,U=-1,K=c.length,Y=u;for(u===c&&(c=hr(c)),b&&(Y=Lt(u,Ci(b)));++U<K;)for(var ie=0,ge=c[U],ve=b?b(ge):ge;(ie=k(Y,ve,ie,A))>-1;)Y!==u&&wh.call(Y,ie,1),wh.call(u,ie,1);return u}function y1(u,c){for(var b=u?c.length:0,A=b-1;b--;){var k=c[b];if(b==A||k!==U){var U=k;$a(k)?wh.call(u,k,1):zv(u,k)}}return u}function Wv(u,c){return u+Ih(ZE()*(c-u+1))}function pj(u,c,b,A){for(var k=-1,U=di(Ah((c-u)/(b||1)),0),K=C(U);U--;)K[A?U:++k]=u,u+=b;return K}function qv(u,c){var b="";if(!u||c<1||c>fe)return b;do{c%2&&(b+=u),c=Ih(c/2),c&&(u+=u)}while(c);return b}function dt(u,c){return u0(X1(u,c,gr),u+"")}function mj(u){return i1(ul(u))}function gj(u,c){var b=ul(u);return qh(b,Oo(c,0,b.length))}function hf(u,c,b,A){if(!Ht(u))return u;c=Cs(c,u);for(var k=-1,U=c.length,K=U-1,Y=u;Y!=null&&++k<U;){var ie=sa(c[k]),ge=b;if(ie==="__proto__"||ie==="constructor"||ie==="prototype")return u;if(k!=K){var ve=Y[ie];ge=A?A(ve,ie,Y):i,ge===i&&(ge=Ht(ve)?ve:$a(c[k+1])?[]:{})}lf(Y,ie,ge),Y=Y[ie]}return u}var T1=Ph?function(u,c){return Ph.set(u,c),u}:gr,vj=Ch?function(u,c){return Ch(u,"toString",{configurable:!0,enumerable:!1,value:_0(c),writable:!0})}:gr;function _j(u){return qh(ul(u))}function Yr(u,c,b){var A=-1,k=u.length;c<0&&(c=-c>k?0:k+c),b=b>k?k:b,b<0&&(b+=k),k=c>b?0:b-c>>>0,c>>>=0;for(var U=C(k);++A<k;)U[A]=u[A+c];return U}function yj(u,c){var b;return Es(u,function(A,k,U){return b=c(A,k,U),!b}),!!b}function Fh(u,c,b){var A=0,k=u==null?A:u.length;if(typeof c=="number"&&c===c&&k<=Qe){for(;A<k;){var U=A+k>>>1,K=u[U];K!==null&&!Fr(K)&&(b?K<=c:K<c)?A=U+1:k=U}return k}return Gv(u,c,gr,b)}function Gv(u,c,b,A){var k=0,U=u==null?0:u.length;if(U===0)return 0;c=b(c);for(var K=c!==c,Y=c===null,ie=Fr(c),ge=c===i;k<U;){var ve=Ih((k+U)/2),xe=b(u[ve]),Le=xe!==i,Ne=xe===null,ze=xe===xe,lt=Fr(xe);if(K)var Ke=A||ze;else ge?Ke=ze&&(A||Le):Y?Ke=ze&&Le&&(A||!Ne):ie?Ke=ze&&Le&&!Ne&&(A||!lt):Ne||lt?Ke=!1:Ke=A?xe<=c:xe<c;Ke?k=ve+1:U=ve}return Ni(U,Be)}function b1(u,c){for(var b=-1,A=u.length,k=0,U=[];++b<A;){var K=u[b],Y=c?c(K):K;if(!b||!On(Y,ie)){var ie=Y;U[k++]=K===0?0:K}}return U}function x1(u){return typeof u=="number"?u:Fr(u)?Ce:+u}function Mr(u){if(typeof u=="string")return u;if(it(u))return Lt(u,Mr)+"";if(Fr(u))return e1?e1.call(u):"";var c=u+"";return c=="0"&&1/u==-ne?"-0":c}function ws(u,c,b){var A=-1,k=vs,U=u.length,K=!0,Y=[],ie=Y;if(b)K=!1,k=_o;else if(U>=e){var ge=c?null:Oj(u);if(ge)return xs(ge);K=!1,k=Fa,ie=new Po}else ie=c?[]:Y;e:for(;++A<U;){var ve=u[A],xe=c?c(ve):ve;if(ve=b||ve!==0?ve:0,K&&xe===xe){for(var Le=ie.length;Le--;)if(ie[Le]===xe)continue e;c&&ie.push(xe),Y.push(ve)}else k(ie,xe,b)||(ie!==Y&&ie.push(xe),Y.push(ve))}return Y}function zv(u,c){return c=Cs(c,u),u=Q1(u,c),u==null||delete u[sa(Jr(c))]}function S1(u,c,b,A){return hf(u,c,b(Do(u,c)),A)}function Nh(u,c,b,A){for(var k=u.length,U=A?k:-1;(A?U--:++U<k)&&c(u[U],U,u););return b?Yr(u,A?0:U,A?U+1:k):Yr(u,A?U+1:0,A?k:U)}function E1(u,c){var b=u;return b instanceof vt&&(b=b.value()),yo(c,function(A,k){return k.func.apply(k.thisArg,Wr([A],k.args))},b)}function Kv(u,c,b){var A=u.length;if(A<2)return A?ws(u[0]):[];for(var k=-1,U=C(A);++k<A;)for(var K=u[k],Y=-1;++Y<A;)Y!=k&&(U[k]=df(U[k]||K,u[Y],c,b));return ws(Pi(U,1),c,b)}function w1(u,c,b){for(var A=-1,k=u.length,U=c.length,K={};++A<k;){var Y=A<U?c[A]:i;b(K,u[A],Y)}return K}function Xv(u){return ti(u)?u:[]}function Qv(u){return typeof u=="function"?u:gr}function Cs(u,c){return it(u)?u:a0(u,c)?[u]:ew(It(u))}var Tj=dt;function As(u,c,b){var A=u.length;return b=b===i?A:b,!c&&b>=A?u:Yr(u,c,b)}var C1=oB||function(u){return ei.clearTimeout(u)};function A1(u,c){if(c)return u.slice();var b=u.length,A=KE?KE(b):new u.constructor(b);return u.copy(A),A}function Yv(u){var c=new u.constructor(u.byteLength);return new Sh(c).set(new Sh(u)),c}function bj(u,c){var b=c?Yv(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.byteLength)}function xj(u){var c=new u.constructor(u.source,Ge.exec(u));return c.lastIndex=u.lastIndex,c}function Sj(u){return uf?Q(uf.call(u)):{}}function I1(u,c){var b=c?Yv(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.length)}function P1(u,c){if(u!==c){var b=u!==i,A=u===null,k=u===u,U=Fr(u),K=c!==i,Y=c===null,ie=c===c,ge=Fr(c);if(!Y&&!ge&&!U&&u>c||U&&K&&ie&&!Y&&!ge||A&&K&&ie||!b&&ie||!k)return 1;if(!A&&!U&&!ge&&u<c||ge&&b&&k&&!A&&!U||Y&&b&&k||!K&&k||!ie)return-1}return 0}function Ej(u,c,b){for(var A=-1,k=u.criteria,U=c.criteria,K=k.length,Y=b.length;++A<K;){var ie=P1(k[A],U[A]);if(ie){if(A>=Y)return ie;var ge=b[A];return ie*(ge=="desc"?-1:1)}}return u.index-c.index}function O1(u,c,b,A){for(var k=-1,U=u.length,K=b.length,Y=-1,ie=c.length,ge=di(U-K,0),ve=C(ie+ge),xe=!A;++Y<ie;)ve[Y]=c[Y];for(;++k<K;)(xe||k<U)&&(ve[b[k]]=u[k]);for(;ge--;)ve[Y++]=u[k++];return ve}function D1(u,c,b,A){for(var k=-1,U=u.length,K=-1,Y=b.length,ie=-1,ge=c.length,ve=di(U-Y,0),xe=C(ve+ge),Le=!A;++k<ve;)xe[k]=u[k];for(var Ne=k;++ie<ge;)xe[Ne+ie]=c[ie];for(;++K<Y;)(Le||k<U)&&(xe[Ne+b[K]]=u[k++]);return xe}function hr(u,c){var b=-1,A=u.length;for(c||(c=C(A));++b<A;)c[b]=u[b];return c}function aa(u,c,b,A){var k=!b;b||(b={});for(var U=-1,K=c.length;++U<K;){var Y=c[U],ie=A?A(b[Y],u[Y],Y,b,u):i;ie===i&&(ie=u[Y]),k?ja(b,Y,ie):lf(b,Y,ie)}return b}function wj(u,c){return aa(u,n0(u),c)}function Cj(u,c){return aa(u,W1(u),c)}function Uh(u,c){return function(b,A){var k=it(b)?zd:KB,U=c?c():{};return k(b,u,We(A,2),U)}}function nl(u){return dt(function(c,b){var A=-1,k=b.length,U=k>1?b[k-1]:i,K=k>2?b[2]:i;for(U=u.length>3&&typeof U=="function"?(k--,U):i,K&&er(b[0],b[1],K)&&(U=k<3?i:U,k=1),c=Q(c);++A<k;){var Y=b[A];Y&&u(c,Y,A,U)}return c})}function L1(u,c){return function(b,A){if(b==null)return b;if(!pr(b))return u(b,A);for(var k=b.length,U=c?k:-1,K=Q(b);(c?U--:++U<k)&&A(K[U],U,K)!==!1;);return b}}function k1(u){return function(c,b,A){for(var k=-1,U=Q(c),K=A(c),Y=K.length;Y--;){var ie=K[u?Y:++k];if(b(U[ie],ie,U)===!1)break}return c}}function Aj(u,c,b){var A=c&D,k=pf(u);function U(){var K=this&&this!==ei&&this instanceof U?k:u;return K.apply(A?b:this,arguments)}return U}function R1(u){return function(c){c=It(c);var b=kt(c)?x(c):i,A=b?b[0]:c.charAt(0),k=b?As(b,1).join(""):c.slice(1);return A[u]()+k}}function al(u){return function(c){return yo(Lw(Dw(c).replace(ka,"")),u,"")}}function pf(u){return function(){var c=arguments;switch(c.length){case 0:return new u;case 1:return new u(c[0]);case 2:return new u(c[0],c[1]);case 3:return new u(c[0],c[1],c[2]);case 4:return new u(c[0],c[1],c[2],c[3]);case 5:return new u(c[0],c[1],c[2],c[3],c[4]);case 6:return new u(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new u(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var b=rl(u.prototype),A=u.apply(b,c);return Ht(A)?A:b}}function Ij(u,c,b){var A=pf(u);function k(){for(var U=arguments.length,K=C(U),Y=U,ie=sl(k);Y--;)K[Y]=arguments[Y];var ge=U<3&&K[0]!==ie&&K[U-1]!==ie?[]:Gr(K,ie);if(U-=ge.length,U<b)return B1(u,c,Bh,k.placeholder,i,K,ge,i,i,b-U);var ve=this&&this!==ei&&this instanceof k?A:u;return li(ve,this,K)}return k}function M1(u){return function(c,b,A){var k=Q(c);if(!pr(c)){var U=We(b,3);c=_i(c),b=function(Y){return U(k[Y],Y,k)}}var K=u(c,b,A);return K>-1?k[U?c[K]:K]:i}}function F1(u){return Ha(function(c){var b=c.length,A=b,k=Xr.prototype.thru;for(u&&c.reverse();A--;){var U=c[A];if(typeof U!="function")throw new tt(s);if(k&&!K&&$h(U)=="wrapper")var K=new Xr([],!0)}for(A=K?A:b;++A<b;){U=c[A];var Y=$h(U),ie=Y=="wrapper"?i0(U):i;ie&&s0(ie[0])&&ie[1]==(z|Z|W|q)&&!ie[4].length&&ie[9]==1?K=K[$h(ie[0])].apply(K,ie[3]):K=U.length==1&&s0(U)?K[Y]():K.thru(U)}return function(){var ge=arguments,ve=ge[0];if(K&&ge.length==1&&it(ve))return K.plant(ve).value();for(var xe=0,Le=b?c[xe].apply(this,ge):ve;++xe<b;)Le=c[xe].call(this,Le);return Le}})}function Bh(u,c,b,A,k,U,K,Y,ie,ge){var ve=c&z,xe=c&D,Le=c&R,Ne=c&(Z|V),ze=c&X,lt=Le?i:pf(u);function Ke(){for(var gt=arguments.length,yt=C(gt),Nr=gt;Nr--;)yt[Nr]=arguments[Nr];if(Ne)var tr=sl(Ke),Ur=Jd(yt,tr);if(A&&(yt=O1(yt,A,k,Ne)),U&&(yt=D1(yt,U,K,Ne)),gt-=Ur,Ne&&gt<ge){var ii=Gr(yt,tr);return B1(u,c,Bh,Ke.placeholder,b,yt,ii,Y,ie,ge-gt)}var Dn=xe?b:this,Ga=Le?Dn[u]:u;return gt=yt.length,Y?yt=Kj(yt,Y):ze&&gt>1&&yt.reverse(),ve&&ie<gt&&(yt.length=ie),this&&this!==ei&&this instanceof Ke&&(Ga=lt||pf(Ga)),Ga.apply(Dn,yt)}return Ke}function N1(u,c){return function(b,A){return ij(b,u,c(A),{})}}function jh(u,c){return function(b,A){var k;if(b===i&&A===i)return c;if(b!==i&&(k=b),A!==i){if(k===i)return A;typeof b=="string"||typeof A=="string"?(b=Mr(b),A=Mr(A)):(b=x1(b),A=x1(A)),k=u(b,A)}return k}}function Jv(u){return Ha(function(c){return c=Lt(c,Ci(We())),dt(function(b){var A=this;return u(c,function(k){return li(k,A,b)})})})}function Vh(u,c){c=c===i?" ":Mr(c);var b=c.length;if(b<2)return b?qv(c,u):c;var A=qv(c,Ah(u/zr(c)));return kt(c)?As(x(A),0,u).join(""):A.slice(0,u)}function Pj(u,c,b,A){var k=c&D,U=pf(u);function K(){for(var Y=-1,ie=arguments.length,ge=-1,ve=A.length,xe=C(ve+ie),Le=this&&this!==ei&&this instanceof K?U:u;++ge<ve;)xe[ge]=A[ge];for(;ie--;)xe[ge++]=arguments[++Y];return li(Le,k?b:this,xe)}return K}function U1(u){return function(c,b,A){return A&&typeof A!="number"&&er(c,b,A)&&(b=A=i),c=qa(c),b===i?(b=c,c=0):b=qa(b),A=A===i?c<b?1:-1:qa(A),pj(c,b,A,u)}}function Hh(u){return function(c,b){return typeof c=="string"&&typeof b=="string"||(c=Zr(c),b=Zr(b)),u(c,b)}}function B1(u,c,b,A,k,U,K,Y,ie,ge){var ve=c&Z,xe=ve?K:i,Le=ve?i:K,Ne=ve?U:i,ze=ve?i:U;c|=ve?W:te,c&=~(ve?te:W),c&H||(c&=~(D|R));var lt=[u,c,k,Ne,xe,ze,Le,Y,ie,ge],Ke=b.apply(i,lt);return s0(u)&&Y1(Ke,lt),Ke.placeholder=A,J1(Ke,u,c)}function Zv(u){var c=ae[u];return function(b,A){if(b=Zr(b),A=A==null?0:Ni(st(A),292),A&&JE(b)){var k=(It(b)+"e").split("e"),U=c(k[0]+"e"+(+k[1]+A));return k=(It(U)+"e").split("e"),+(k[0]+"e"+(+k[1]-A))}return c(b)}}var Oj=tl&&1/xs(new tl([,-0]))[1]==ne?function(u){return new tl(u)}:b0;function j1(u){return function(c){var b=Ui(c);return b==J?wo(c):b==be?ef(c):Yd(c,u(c))}}function Va(u,c,b,A,k,U,K,Y){var ie=c&R;if(!ie&&typeof u!="function")throw new tt(s);var ge=A?A.length:0;if(ge||(c&=~(W|te),A=k=i),K=K===i?K:di(st(K),0),Y=Y===i?Y:st(Y),ge-=k?k.length:0,c&te){var ve=A,xe=k;A=k=i}var Le=ie?i:i0(u),Ne=[u,c,b,A,k,ve,xe,U,K,Y];if(Le&&qj(Ne,Le),u=Ne[0],c=Ne[1],b=Ne[2],A=Ne[3],k=Ne[4],Y=Ne[9]=Ne[9]===i?ie?0:u.length:di(Ne[9]-ge,0),!Y&&c&(Z|V)&&(c&=~(Z|V)),!c||c==D)var ze=Aj(u,c,b);else c==Z||c==V?ze=Ij(u,c,Y):(c==W||c==(D|W))&&!k.length?ze=Pj(u,c,b,A):ze=Bh.apply(i,Ne);var lt=Le?T1:Y1;return J1(lt(ze,Ne),u,c)}function V1(u,c,b,A){return u===i||On(u,Kr[b])&&!mt.call(A,b)?c:u}function H1(u,c,b,A,k,U){return Ht(u)&&Ht(c)&&(U.set(c,u),Mh(u,c,i,H1,U),U.delete(c)),u}function Dj(u){return vf(u)?i:u}function $1(u,c,b,A,k,U){var K=b&I,Y=u.length,ie=c.length;if(Y!=ie&&!(K&&ie>Y))return!1;var ge=U.get(u),ve=U.get(c);if(ge&&ve)return ge==c&&ve==u;var xe=-1,Le=!0,Ne=b&O?new Po:i;for(U.set(u,c),U.set(c,u);++xe<Y;){var ze=u[xe],lt=c[xe];if(A)var Ke=K?A(lt,ze,xe,c,u,U):A(ze,lt,xe,u,c,U);if(Ke!==i){if(Ke)continue;Le=!1;break}if(Ne){if(!To(c,function(gt,yt){if(!Fa(Ne,yt)&&(ze===gt||k(ze,gt,b,A,U)))return Ne.push(yt)})){Le=!1;break}}else if(!(ze===lt||k(ze,lt,b,A,U))){Le=!1;break}}return U.delete(u),U.delete(c),Le}function Lj(u,c,b,A,k,U,K){switch(b){case ut:if(u.byteLength!=c.byteLength||u.byteOffset!=c.byteOffset)return!1;u=u.buffer,c=c.buffer;case qe:return!(u.byteLength!=c.byteLength||!U(new Sh(u),new Sh(c)));case Ct:case ht:case de:return On(+u,+c);case gi:return u.name==c.name&&u.message==c.message;case Ee:case _e:return u==c+"";case J:var Y=wo;case be:var ie=A&I;if(Y||(Y=xs),u.size!=c.size&&!ie)return!1;var ge=K.get(u);if(ge)return ge==c;A|=O,K.set(u,c);var ve=$1(Y(u),Y(c),A,k,U,K);return K.delete(u),ve;case Re:if(uf)return uf.call(u)==uf.call(c)}return!1}function kj(u,c,b,A,k,U){var K=b&I,Y=e0(u),ie=Y.length,ge=e0(c),ve=ge.length;if(ie!=ve&&!K)return!1;for(var xe=ie;xe--;){var Le=Y[xe];if(!(K?Le in c:mt.call(c,Le)))return!1}var Ne=U.get(u),ze=U.get(c);if(Ne&&ze)return Ne==c&&ze==u;var lt=!0;U.set(u,c),U.set(c,u);for(var Ke=K;++xe<ie;){Le=Y[xe];var gt=u[Le],yt=c[Le];if(A)var Nr=K?A(yt,gt,Le,c,u,U):A(gt,yt,Le,u,c,U);if(!(Nr===i?gt===yt||k(gt,yt,b,A,U):Nr)){lt=!1;break}Ke||(Ke=Le=="constructor")}if(lt&&!Ke){var tr=u.constructor,Ur=c.constructor;tr!=Ur&&"constructor"in u&&"constructor"in c&&!(typeof tr=="function"&&tr instanceof tr&&typeof Ur=="function"&&Ur instanceof Ur)&&(lt=!1)}return U.delete(u),U.delete(c),lt}function Ha(u){return u0(X1(u,i,nw),u+"")}function e0(u){return l1(u,_i,n0)}function t0(u){return l1(u,mr,W1)}var i0=Ph?function(u){return Ph.get(u)}:b0;function $h(u){for(var c=u.name+"",b=il[c],A=mt.call(il,c)?b.length:0;A--;){var k=b[A],U=k.func;if(U==null||U==u)return k.name}return c}function sl(u){var c=mt.call(M,"placeholder")?M:u;return c.placeholder}function We(){var u=M.iteratee||y0;return u=u===y0?c1:u,arguments.length?u(arguments[0],arguments[1]):u}function Wh(u,c){var b=u.__data__;return Vj(c)?b[typeof c=="string"?"string":"hash"]:b.map}function r0(u){for(var c=_i(u),b=c.length;b--;){var A=c[b],k=u[A];c[b]=[A,k,z1(k)]}return c}function Lo(u,c){var b=St(u,c);return f1(b)?b:i}function Rj(u){var c=mt.call(u,Ao),b=u[Ao];try{u[Ao]=i;var A=!0}catch{}var k=ra.call(u);return A&&(c?u[Ao]=b:delete u[Ao]),k}var n0=Dv?function(u){return u==null?[]:(u=Q(u),ni(Dv(u),function(c){return QE.call(u,c)}))}:x0,W1=Dv?function(u){for(var c=[];u;)Wr(c,n0(u)),u=Eh(u);return c}:x0,Ui=Zi;(Lv&&Ui(new Lv(new ArrayBuffer(1)))!=ut||af&&Ui(new af)!=J||kv&&Ui(kv.resolve())!=we||tl&&Ui(new tl)!=be||sf&&Ui(new sf)!=Me)&&(Ui=function(u){var c=Zi(u),b=c==ce?u.constructor:i,A=b?ko(b):"";if(A)switch(A){case gB:return ut;case vB:return J;case _B:return we;case yB:return be;case TB:return Me}return c});function Mj(u,c,b){for(var A=-1,k=b.length;++A<k;){var U=b[A],K=U.size;switch(U.type){case"drop":u+=K;break;case"dropRight":c-=K;break;case"take":c=Ni(c,u+K);break;case"takeRight":u=di(u,c-K);break}}return{start:u,end:c}}function Fj(u){var c=u.match(Ve);return c?c[1].split(Od):[]}function q1(u,c,b){c=Cs(c,u);for(var A=-1,k=c.length,U=!1;++A<k;){var K=sa(c[A]);if(!(U=u!=null&&b(u,K)))break;u=u[K]}return U||++A!=k?U:(k=u==null?0:u.length,!!k&&Yh(k)&&$a(K,k)&&(it(u)||Ro(u)))}function Nj(u){var c=u.length,b=new u.constructor(c);return c&&typeof u[0]=="string"&&mt.call(u,"index")&&(b.index=u.index,b.input=u.input),b}function G1(u){return typeof u.constructor=="function"&&!mf(u)?rl(Eh(u)):{}}function Uj(u,c,b){var A=u.constructor;switch(c){case qe:return Yv(u);case Ct:case ht:return new A(+u);case ut:return bj(u,b);case ft:case At:case Oe:case lr:case Xn:case Cr:case Qn:case Vt:case jt:return I1(u,b);case J:return new A;case de:case _e:return new A(u);case Ee:return xj(u);case be:return new A;case Re:return Sj(u)}}function Bj(u,c){var b=c.length;if(!b)return u;var A=b-1;return c[A]=(b>1?"& ":"")+c[A],c=c.join(b>2?", ":" "),u.replace(pn,`{
/* [wrapped with `+c+`] */
`)}function jj(u){return it(u)||Ro(u)||!!(YE&&u&&u[YE])}function $a(u,c){var b=typeof u;return c=c??fe,!!c&&(b=="number"||b!="symbol"&&uo.test(u))&&u>-1&&u%1==0&&u<c}function er(u,c,b){if(!Ht(b))return!1;var A=typeof c;return(A=="number"?pr(b)&&$a(c,b.length):A=="string"&&c in b)?On(b[c],u):!1}function a0(u,c){if(it(u))return!1;var b=typeof u;return b=="number"||b=="symbol"||b=="boolean"||u==null||Fr(u)?!0:Ar.test(u)||!Id.test(u)||c!=null&&u in Q(c)}function Vj(u){var c=typeof u;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?u!=="__proto__":u===null}function s0(u){var c=$h(u),b=M[c];if(typeof b!="function"||!(c in vt.prototype))return!1;if(u===b)return!0;var A=i0(b);return!!A&&u===A[0]}function Hj(u){return!!Je&&Je in u}var $j=ta?Wa:S0;function mf(u){var c=u&&u.constructor,b=typeof c=="function"&&c.prototype||Kr;return u===b}function z1(u){return u===u&&!Ht(u)}function K1(u,c){return function(b){return b==null?!1:b[u]===c&&(c!==i||u in Q(b))}}function Wj(u){var c=Xh(u,function(A){return b.size===f&&b.clear(),A}),b=c.cache;return c}function qj(u,c){var b=u[1],A=c[1],k=b|A,U=k<(D|R|z),K=A==z&&b==Z||A==z&&b==q&&u[7].length<=c[8]||A==(z|q)&&c[7].length<=c[8]&&b==Z;if(!(U||K))return u;A&D&&(u[2]=c[2],k|=b&D?0:H);var Y=c[3];if(Y){var ie=u[3];u[3]=ie?O1(ie,Y,c[4]):Y,u[4]=ie?Gr(u[3],m):c[4]}return Y=c[5],Y&&(ie=u[5],u[5]=ie?D1(ie,Y,c[6]):Y,u[6]=ie?Gr(u[5],m):c[6]),Y=c[7],Y&&(u[7]=Y),A&z&&(u[8]=u[8]==null?c[8]:Ni(u[8],c[8])),u[9]==null&&(u[9]=c[9]),u[0]=c[0],u[1]=k,u}function Gj(u){var c=[];if(u!=null)for(var b in Q(u))c.push(b);return c}function zj(u){return ra.call(u)}function X1(u,c,b){return c=di(c===i?u.length-1:c,0),function(){for(var A=arguments,k=-1,U=di(A.length-c,0),K=C(U);++k<U;)K[k]=A[c+k];k=-1;for(var Y=C(c+1);++k<c;)Y[k]=A[k];return Y[c]=b(K),li(u,this,Y)}}function Q1(u,c){return c.length<2?u:Do(u,Yr(c,0,-1))}function Kj(u,c){for(var b=u.length,A=Ni(c.length,b),k=hr(u);A--;){var U=c[A];u[A]=$a(U,b)?k[U]:i}return u}function o0(u,c){if(!(c==="constructor"&&typeof u[c]=="function")&&c!="__proto__")return u[c]}var Y1=Z1(T1),gf=lB||function(u,c){return ei.setTimeout(u,c)},u0=Z1(vj);function J1(u,c,b){var A=c+"";return u0(u,Bj(A,Xj(Fj(A),b)))}function Z1(u){var c=0,b=0;return function(){var A=hB(),k=se-(A-b);if(b=A,k>0){if(++c>=re)return arguments[0]}else c=0;return u.apply(i,arguments)}}function qh(u,c){var b=-1,A=u.length,k=A-1;for(c=c===i?A:c;++b<c;){var U=Wv(b,k),K=u[U];u[U]=u[b],u[b]=K}return u.length=c,u}var ew=Wj(function(u){var c=[];return u.charCodeAt(0)===46&&c.push(""),u.replace(Ot,function(b,A,k,U){c.push(k?U.replace(Dd,"$1"):A||b)}),c});function sa(u){if(typeof u=="string"||Fr(u))return u;var c=u+"";return c=="0"&&1/u==-ne?"-0":c}function ko(u){if(u!=null){try{return ia.call(u)}catch{}try{return u+""}catch{}}return""}function Xj(u,c){return vi(Et,function(b){var A="_."+b[0];c&b[1]&&!vs(u,A)&&u.push(A)}),u.sort()}function tw(u){if(u instanceof vt)return u.clone();var c=new Xr(u.__wrapped__,u.__chain__);return c.__actions__=hr(u.__actions__),c.__index__=u.__index__,c.__values__=u.__values__,c}function Qj(u,c,b){(b?er(u,c,b):c===i)?c=1:c=di(st(c),0);var A=u==null?0:u.length;if(!A||c<1)return[];for(var k=0,U=0,K=C(Ah(A/c));k<A;)K[U++]=Yr(u,k,k+=c);return K}function Yj(u){for(var c=-1,b=u==null?0:u.length,A=0,k=[];++c<b;){var U=u[c];U&&(k[A++]=U)}return k}function Jj(){var u=arguments.length;if(!u)return[];for(var c=C(u-1),b=arguments[0],A=u;A--;)c[A-1]=arguments[A];return Wr(it(b)?hr(b):[b],Pi(c,1))}var Zj=dt(function(u,c){return ti(u)?df(u,Pi(c,1,ti,!0)):[]}),e2=dt(function(u,c){var b=Jr(c);return ti(b)&&(b=i),ti(u)?df(u,Pi(c,1,ti,!0),We(b,2)):[]}),t2=dt(function(u,c){var b=Jr(c);return ti(b)&&(b=i),ti(u)?df(u,Pi(c,1,ti,!0),i,b):[]});function i2(u,c,b){var A=u==null?0:u.length;return A?(c=b||c===i?1:st(c),Yr(u,c<0?0:c,A)):[]}function r2(u,c,b){var A=u==null?0:u.length;return A?(c=b||c===i?1:st(c),c=A-c,Yr(u,0,c<0?0:c)):[]}function n2(u,c){return u&&u.length?Nh(u,We(c,3),!0,!0):[]}function a2(u,c){return u&&u.length?Nh(u,We(c,3),!0):[]}function s2(u,c,b,A){var k=u==null?0:u.length;return k?(b&&typeof b!="number"&&er(u,c,b)&&(b=0,A=k),JB(u,c,b,A)):[]}function iw(u,c,b){var A=u==null?0:u.length;if(!A)return-1;var k=b==null?0:st(b);return k<0&&(k=di(A+k,0)),_s(u,We(c,3),k)}function rw(u,c,b){var A=u==null?0:u.length;if(!A)return-1;var k=A-1;return b!==i&&(k=st(b),k=b<0?di(A+k,0):Ni(k,A-1)),_s(u,We(c,3),k,!0)}function nw(u){var c=u==null?0:u.length;return c?Pi(u,1):[]}function o2(u){var c=u==null?0:u.length;return c?Pi(u,ne):[]}function u2(u,c){var b=u==null?0:u.length;return b?(c=c===i?1:st(c),Pi(u,c)):[]}function l2(u){for(var c=-1,b=u==null?0:u.length,A={};++c<b;){var k=u[c];A[k[0]]=k[1]}return A}function aw(u){return u&&u.length?u[0]:i}function d2(u,c,b){var A=u==null?0:u.length;if(!A)return-1;var k=b==null?0:st(b);return k<0&&(k=di(A+k,0)),qr(u,c,k)}function f2(u){var c=u==null?0:u.length;return c?Yr(u,0,-1):[]}var c2=dt(function(u){var c=Lt(u,Xv);return c.length&&c[0]===u[0]?Bv(c):[]}),h2=dt(function(u){var c=Jr(u),b=Lt(u,Xv);return c===Jr(b)?c=i:b.pop(),b.length&&b[0]===u[0]?Bv(b,We(c,2)):[]}),p2=dt(function(u){var c=Jr(u),b=Lt(u,Xv);return c=typeof c=="function"?c:i,c&&b.pop(),b.length&&b[0]===u[0]?Bv(b,i,c):[]});function m2(u,c){return u==null?"":fB.call(u,c)}function Jr(u){var c=u==null?0:u.length;return c?u[c-1]:i}function g2(u,c,b){var A=u==null?0:u.length;if(!A)return-1;var k=A;return b!==i&&(k=st(b),k=k<0?di(A+k,0):Ni(k,A-1)),c===c?rf(u,c,k):_s(u,ys,k,!0)}function v2(u,c){return u&&u.length?g1(u,st(c)):i}var _2=dt(sw);function sw(u,c){return u&&u.length&&c&&c.length?$v(u,c):u}function y2(u,c,b){return u&&u.length&&c&&c.length?$v(u,c,We(b,2)):u}function T2(u,c,b){return u&&u.length&&c&&c.length?$v(u,c,i,b):u}var b2=Ha(function(u,c){var b=u==null?0:u.length,A=Mv(u,c);return y1(u,Lt(c,function(k){return $a(k,b)?+k:k}).sort(P1)),A});function x2(u,c){var b=[];if(!(u&&u.length))return b;var A=-1,k=[],U=u.length;for(c=We(c,3);++A<U;){var K=u[A];c(K,A,u)&&(b.push(K),k.push(A))}return y1(u,k),b}function l0(u){return u==null?u:mB.call(u)}function S2(u,c,b){var A=u==null?0:u.length;return A?(b&&typeof b!="number"&&er(u,c,b)?(c=0,b=A):(c=c==null?0:st(c),b=b===i?A:st(b)),Yr(u,c,b)):[]}function E2(u,c){return Fh(u,c)}function w2(u,c,b){return Gv(u,c,We(b,2))}function C2(u,c){var b=u==null?0:u.length;if(b){var A=Fh(u,c);if(A<b&&On(u[A],c))return A}return-1}function A2(u,c){return Fh(u,c,!0)}function I2(u,c,b){return Gv(u,c,We(b,2),!0)}function P2(u,c){var b=u==null?0:u.length;if(b){var A=Fh(u,c,!0)-1;if(On(u[A],c))return A}return-1}function O2(u){return u&&u.length?b1(u):[]}function D2(u,c){return u&&u.length?b1(u,We(c,2)):[]}function L2(u){var c=u==null?0:u.length;return c?Yr(u,1,c):[]}function k2(u,c,b){return u&&u.length?(c=b||c===i?1:st(c),Yr(u,0,c<0?0:c)):[]}function R2(u,c,b){var A=u==null?0:u.length;return A?(c=b||c===i?1:st(c),c=A-c,Yr(u,c<0?0:c,A)):[]}function M2(u,c){return u&&u.length?Nh(u,We(c,3),!1,!0):[]}function F2(u,c){return u&&u.length?Nh(u,We(c,3)):[]}var N2=dt(function(u){return ws(Pi(u,1,ti,!0))}),U2=dt(function(u){var c=Jr(u);return ti(c)&&(c=i),ws(Pi(u,1,ti,!0),We(c,2))}),B2=dt(function(u){var c=Jr(u);return c=typeof c=="function"?c:i,ws(Pi(u,1,ti,!0),i,c)});function j2(u){return u&&u.length?ws(u):[]}function V2(u,c){return u&&u.length?ws(u,We(c,2)):[]}function H2(u,c){return c=typeof c=="function"?c:i,u&&u.length?ws(u,i,c):[]}function d0(u){if(!(u&&u.length))return[];var c=0;return u=ni(u,function(b){if(ti(b))return c=di(b.length,c),!0}),Rr(c,function(b){return Lt(u,Ma(b))})}function ow(u,c){if(!(u&&u.length))return[];var b=d0(u);return c==null?b:Lt(b,function(A){return li(c,i,A)})}var $2=dt(function(u,c){return ti(u)?df(u,c):[]}),W2=dt(function(u){return Kv(ni(u,ti))}),q2=dt(function(u){var c=Jr(u);return ti(c)&&(c=i),Kv(ni(u,ti),We(c,2))}),G2=dt(function(u){var c=Jr(u);return c=typeof c=="function"?c:i,Kv(ni(u,ti),i,c)}),z2=dt(d0);function K2(u,c){return w1(u||[],c||[],lf)}function X2(u,c){return w1(u||[],c||[],hf)}var Q2=dt(function(u){var c=u.length,b=c>1?u[c-1]:i;return b=typeof b=="function"?(u.pop(),b):i,ow(u,b)});function uw(u){var c=M(u);return c.__chain__=!0,c}function Y2(u,c){return c(u),u}function Gh(u,c){return c(u)}var J2=Ha(function(u){var c=u.length,b=c?u[0]:0,A=this.__wrapped__,k=function(U){return Mv(U,u)};return c>1||this.__actions__.length||!(A instanceof vt)||!$a(b)?this.thru(k):(A=A.slice(b,+b+(c?1:0)),A.__actions__.push({func:Gh,args:[k],thisArg:i}),new Xr(A,this.__chain__).thru(function(U){return c&&!U.length&&U.push(i),U}))});function Z2(){return uw(this)}function e3(){return new Xr(this.value(),this.__chain__)}function t3(){this.__values__===i&&(this.__values__=xw(this.value()));var u=this.__index__>=this.__values__.length,c=u?i:this.__values__[this.__index__++];return{done:u,value:c}}function i3(){return this}function r3(u){for(var c,b=this;b instanceof Dh;){var A=tw(b);A.__index__=0,A.__values__=i,c?k.__wrapped__=A:c=A;var k=A;b=b.__wrapped__}return k.__wrapped__=u,c}function n3(){var u=this.__wrapped__;if(u instanceof vt){var c=u;return this.__actions__.length&&(c=new vt(this)),c=c.reverse(),c.__actions__.push({func:Gh,args:[l0],thisArg:i}),new Xr(c,this.__chain__)}return this.thru(l0)}function a3(){return E1(this.__wrapped__,this.__actions__)}var s3=Uh(function(u,c,b){mt.call(u,b)?++u[b]:ja(u,b,1)});function o3(u,c,b){var A=it(u)?fr:YB;return b&&er(u,c,b)&&(c=i),A(u,We(c,3))}function u3(u,c){var b=it(u)?ni:o1;return b(u,We(c,3))}var l3=M1(iw),d3=M1(rw);function f3(u,c){return Pi(zh(u,c),1)}function c3(u,c){return Pi(zh(u,c),ne)}function h3(u,c,b){return b=b===i?1:st(b),Pi(zh(u,c),b)}function lw(u,c){var b=it(u)?vi:Es;return b(u,We(c,3))}function dw(u,c){var b=it(u)?vo:s1;return b(u,We(c,3))}var p3=Uh(function(u,c,b){mt.call(u,b)?u[b].push(c):ja(u,b,[c])});function m3(u,c,b,A){u=pr(u)?u:ul(u),b=b&&!A?st(b):0;var k=u.length;return b<0&&(b=di(k+b,0)),Jh(u)?b<=k&&u.indexOf(c,b)>-1:!!k&&qr(u,c,b)>-1}var g3=dt(function(u,c,b){var A=-1,k=typeof c=="function",U=pr(u)?C(u.length):[];return Es(u,function(K){U[++A]=k?li(c,K,b):ff(K,c,b)}),U}),v3=Uh(function(u,c,b){ja(u,b,c)});function zh(u,c){var b=it(u)?Lt:h1;return b(u,We(c,3))}function _3(u,c,b,A){return u==null?[]:(it(c)||(c=c==null?[]:[c]),b=A?i:b,it(b)||(b=b==null?[]:[b]),v1(u,c,b))}var y3=Uh(function(u,c,b){u[b?0:1].push(c)},function(){return[[],[]]});function T3(u,c,b){var A=it(u)?yo:bs,k=arguments.length<3;return A(u,We(c,4),b,k,Es)}function b3(u,c,b){var A=it(u)?Kd:bs,k=arguments.length<3;return A(u,We(c,4),b,k,s1)}function x3(u,c){var b=it(u)?ni:o1;return b(u,Qh(We(c,3)))}function S3(u){var c=it(u)?i1:mj;return c(u)}function E3(u,c,b){(b?er(u,c,b):c===i)?c=1:c=st(c);var A=it(u)?GB:gj;return A(u,c)}function w3(u){var c=it(u)?zB:_j;return c(u)}function C3(u){if(u==null)return 0;if(pr(u))return Jh(u)?zr(u):u.length;var c=Ui(u);return c==J||c==be?u.size:Vv(u).length}function A3(u,c,b){var A=it(u)?To:yj;return b&&er(u,c,b)&&(c=i),A(u,We(c,3))}var I3=dt(function(u,c){if(u==null)return[];var b=c.length;return b>1&&er(u,c[0],c[1])?c=[]:b>2&&er(c[0],c[1],c[2])&&(c=[c[0]]),v1(u,Pi(c,1),[])}),Kh=uB||function(){return ei.Date.now()};function P3(u,c){if(typeof c!="function")throw new tt(s);return u=st(u),function(){if(--u<1)return c.apply(this,arguments)}}function fw(u,c,b){return c=b?i:c,c=u&&c==null?u.length:c,Va(u,z,i,i,i,i,c)}function cw(u,c){var b;if(typeof c!="function")throw new tt(s);return u=st(u),function(){return--u>0&&(b=c.apply(this,arguments)),u<=1&&(c=i),b}}var f0=dt(function(u,c,b){var A=D;if(b.length){var k=Gr(b,sl(f0));A|=W}return Va(u,A,c,b,k)}),hw=dt(function(u,c,b){var A=D|R;if(b.length){var k=Gr(b,sl(hw));A|=W}return Va(c,A,u,b,k)});function pw(u,c,b){c=b?i:c;var A=Va(u,Z,i,i,i,i,i,c);return A.placeholder=pw.placeholder,A}function mw(u,c,b){c=b?i:c;var A=Va(u,V,i,i,i,i,i,c);return A.placeholder=mw.placeholder,A}function gw(u,c,b){var A,k,U,K,Y,ie,ge=0,ve=!1,xe=!1,Le=!0;if(typeof u!="function")throw new tt(s);c=Zr(c)||0,Ht(b)&&(ve=!!b.leading,xe="maxWait"in b,U=xe?di(Zr(b.maxWait)||0,c):U,Le="trailing"in b?!!b.trailing:Le);function Ne(ii){var Dn=A,Ga=k;return A=k=i,ge=ii,K=u.apply(Ga,Dn),K}function ze(ii){return ge=ii,Y=gf(gt,c),ve?Ne(ii):K}function lt(ii){var Dn=ii-ie,Ga=ii-ge,Mw=c-Dn;return xe?Ni(Mw,U-Ga):Mw}function Ke(ii){var Dn=ii-ie,Ga=ii-ge;return ie===i||Dn>=c||Dn<0||xe&&Ga>=U}function gt(){var ii=Kh();if(Ke(ii))return yt(ii);Y=gf(gt,lt(ii))}function yt(ii){return Y=i,Le&&A?Ne(ii):(A=k=i,K)}function Nr(){Y!==i&&C1(Y),ge=0,A=ie=k=Y=i}function tr(){return Y===i?K:yt(Kh())}function Ur(){var ii=Kh(),Dn=Ke(ii);if(A=arguments,k=this,ie=ii,Dn){if(Y===i)return ze(ie);if(xe)return C1(Y),Y=gf(gt,c),Ne(ie)}return Y===i&&(Y=gf(gt,c)),K}return Ur.cancel=Nr,Ur.flush=tr,Ur}var O3=dt(function(u,c){return a1(u,1,c)}),D3=dt(function(u,c,b){return a1(u,Zr(c)||0,b)});function L3(u){return Va(u,X)}function Xh(u,c){if(typeof u!="function"||c!=null&&typeof c!="function")throw new tt(s);var b=function(){var A=arguments,k=c?c.apply(this,A):A[0],U=b.cache;if(U.has(k))return U.get(k);var K=u.apply(this,A);return b.cache=U.set(k,K)||U,K};return b.cache=new(Xh.Cache||Ba),b}Xh.Cache=Ba;function Qh(u){if(typeof u!="function")throw new tt(s);return function(){var c=arguments;switch(c.length){case 0:return!u.call(this);case 1:return!u.call(this,c[0]);case 2:return!u.call(this,c[0],c[1]);case 3:return!u.call(this,c[0],c[1],c[2])}return!u.apply(this,c)}}function k3(u){return cw(2,u)}var R3=Tj(function(u,c){c=c.length==1&&it(c[0])?Lt(c[0],Ci(We())):Lt(Pi(c,1),Ci(We()));var b=c.length;return dt(function(A){for(var k=-1,U=Ni(A.length,b);++k<U;)A[k]=c[k].call(this,A[k]);return li(u,this,A)})}),c0=dt(function(u,c){var b=Gr(c,sl(c0));return Va(u,W,i,c,b)}),vw=dt(function(u,c){var b=Gr(c,sl(vw));return Va(u,te,i,c,b)}),M3=Ha(function(u,c){return Va(u,q,i,i,i,c)});function F3(u,c){if(typeof u!="function")throw new tt(s);return c=c===i?c:st(c),dt(u,c)}function N3(u,c){if(typeof u!="function")throw new tt(s);return c=c==null?0:di(st(c),0),dt(function(b){var A=b[c],k=As(b,0,c);return A&&Wr(k,A),li(u,this,k)})}function U3(u,c,b){var A=!0,k=!0;if(typeof u!="function")throw new tt(s);return Ht(b)&&(A="leading"in b?!!b.leading:A,k="trailing"in b?!!b.trailing:k),gw(u,c,{leading:A,maxWait:c,trailing:k})}function B3(u){return fw(u,1)}function j3(u,c){return c0(Qv(c),u)}function V3(){if(!arguments.length)return[];var u=arguments[0];return it(u)?u:[u]}function H3(u){return Qr(u,E)}function $3(u,c){return c=typeof c=="function"?c:i,Qr(u,E,c)}function W3(u){return Qr(u,v|E)}function q3(u,c){return c=typeof c=="function"?c:i,Qr(u,v|E,c)}function G3(u,c){return c==null||n1(u,c,_i(c))}function On(u,c){return u===c||u!==u&&c!==c}var z3=Hh(Uv),K3=Hh(function(u,c){return u>=c}),Ro=d1(function(){return arguments}())?d1:function(u){return qt(u)&&mt.call(u,"callee")&&!QE.call(u,"callee")},it=C.isArray,X3=Ku?Ci(Ku):rj;function pr(u){return u!=null&&Yh(u.length)&&!Wa(u)}function ti(u){return qt(u)&&pr(u)}function Q3(u){return u===!0||u===!1||qt(u)&&Zi(u)==Ct}var Is=dB||S0,Y3=Xu?Ci(Xu):nj;function J3(u){return qt(u)&&u.nodeType===1&&!vf(u)}function Z3(u){if(u==null)return!0;if(pr(u)&&(it(u)||typeof u=="string"||typeof u.splice=="function"||Is(u)||ol(u)||Ro(u)))return!u.length;var c=Ui(u);if(c==J||c==be)return!u.size;if(mf(u))return!Vv(u).length;for(var b in u)if(mt.call(u,b))return!1;return!0}function e8(u,c){return cf(u,c)}function t8(u,c,b){b=typeof b=="function"?b:i;var A=b?b(u,c):i;return A===i?cf(u,c,i,b):!!A}function h0(u){if(!qt(u))return!1;var c=Zi(u);return c==gi||c==Yt||typeof u.message=="string"&&typeof u.name=="string"&&!vf(u)}function i8(u){return typeof u=="number"&&JE(u)}function Wa(u){if(!Ht(u))return!1;var c=Zi(u);return c==Ei||c==G||c==wt||c==ue}function _w(u){return typeof u=="number"&&u==st(u)}function Yh(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=fe}function Ht(u){var c=typeof u;return u!=null&&(c=="object"||c=="function")}function qt(u){return u!=null&&typeof u=="object"}var yw=ms?Ci(ms):sj;function r8(u,c){return u===c||jv(u,c,r0(c))}function n8(u,c,b){return b=typeof b=="function"?b:i,jv(u,c,r0(c),b)}function a8(u){return Tw(u)&&u!=+u}function s8(u){if($j(u))throw new B(n);return f1(u)}function o8(u){return u===null}function u8(u){return u==null}function Tw(u){return typeof u=="number"||qt(u)&&Zi(u)==de}function vf(u){if(!qt(u)||Zi(u)!=ce)return!1;var c=Eh(u);if(c===null)return!0;var b=mt.call(c,"constructor")&&c.constructor;return typeof b=="function"&&b instanceof b&&ia.call(b)==Ii}var p0=Qu?Ci(Qu):oj;function l8(u){return _w(u)&&u>=-fe&&u<=fe}var bw=gs?Ci(gs):uj;function Jh(u){return typeof u=="string"||!it(u)&&qt(u)&&Zi(u)==_e}function Fr(u){return typeof u=="symbol"||qt(u)&&Zi(u)==Re}var ol=Yu?Ci(Yu):lj;function d8(u){return u===i}function f8(u){return qt(u)&&Ui(u)==Me}function c8(u){return qt(u)&&Zi(u)==je}var h8=Hh(Hv),p8=Hh(function(u,c){return u<=c});function xw(u){if(!u)return[];if(pr(u))return Jh(u)?x(u):hr(u);if(nf&&u[nf])return Eo(u[nf]());var c=Ui(u),b=c==J?wo:c==be?xs:ul;return b(u)}function qa(u){if(!u)return u===0?u:0;if(u=Zr(u),u===ne||u===-ne){var c=u<0?-1:1;return c*Ie}return u===u?u:0}function st(u){var c=qa(u),b=c%1;return c===c?b?c-b:c:0}function Sw(u){return u?Oo(st(u),0,Xe):0}function Zr(u){if(typeof u=="number")return u;if(Fr(u))return Ce;if(Ht(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=Ht(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=Ju(u);var b=pt.test(u);return b||kd.test(u)?Gd(u.slice(2),b?2:8):vn.test(u)?Ce:+u}function Ew(u){return aa(u,mr(u))}function m8(u){return u?Oo(st(u),-fe,fe):u===0?u:0}function It(u){return u==null?"":Mr(u)}var g8=nl(function(u,c){if(mf(c)||pr(c)){aa(c,_i(c),u);return}for(var b in c)mt.call(c,b)&&lf(u,b,c[b])}),ww=nl(function(u,c){aa(c,mr(c),u)}),Zh=nl(function(u,c,b,A){aa(c,mr(c),u,A)}),v8=nl(function(u,c,b,A){aa(c,_i(c),u,A)}),_8=Ha(Mv);function y8(u,c){var b=rl(u);return c==null?b:r1(b,c)}var T8=dt(function(u,c){u=Q(u);var b=-1,A=c.length,k=A>2?c[2]:i;for(k&&er(c[0],c[1],k)&&(A=1);++b<A;)for(var U=c[b],K=mr(U),Y=-1,ie=K.length;++Y<ie;){var ge=K[Y],ve=u[ge];(ve===i||On(ve,Kr[ge])&&!mt.call(u,ge))&&(u[ge]=U[ge])}return u}),b8=dt(function(u){return u.push(i,H1),li(Cw,i,u)});function x8(u,c){return cr(u,We(c,3),na)}function S8(u,c){return cr(u,We(c,3),Nv)}function E8(u,c){return u==null?u:Fv(u,We(c,3),mr)}function w8(u,c){return u==null?u:u1(u,We(c,3),mr)}function C8(u,c){return u&&na(u,We(c,3))}function A8(u,c){return u&&Nv(u,We(c,3))}function I8(u){return u==null?[]:Rh(u,_i(u))}function P8(u){return u==null?[]:Rh(u,mr(u))}function m0(u,c,b){var A=u==null?i:Do(u,c);return A===i?b:A}function O8(u,c){return u!=null&&q1(u,c,ZB)}function g0(u,c){return u!=null&&q1(u,c,ej)}var D8=N1(function(u,c,b){c!=null&&typeof c.toString!="function"&&(c=ra.call(c)),u[c]=b},_0(gr)),L8=N1(function(u,c,b){c!=null&&typeof c.toString!="function"&&(c=ra.call(c)),mt.call(u,c)?u[c].push(b):u[c]=[b]},We),k8=dt(ff);function _i(u){return pr(u)?t1(u):Vv(u)}function mr(u){return pr(u)?t1(u,!0):dj(u)}function R8(u,c){var b={};return c=We(c,3),na(u,function(A,k,U){ja(b,c(A,k,U),A)}),b}function M8(u,c){var b={};return c=We(c,3),na(u,function(A,k,U){ja(b,k,c(A,k,U))}),b}var F8=nl(function(u,c,b){Mh(u,c,b)}),Cw=nl(function(u,c,b,A){Mh(u,c,b,A)}),N8=Ha(function(u,c){var b={};if(u==null)return b;var A=!1;c=Lt(c,function(U){return U=Cs(U,u),A||(A=U.length>1),U}),aa(u,t0(u),b),A&&(b=Qr(b,v|y|E,Dj));for(var k=c.length;k--;)zv(b,c[k]);return b});function U8(u,c){return Aw(u,Qh(We(c)))}var B8=Ha(function(u,c){return u==null?{}:cj(u,c)});function Aw(u,c){if(u==null)return{};var b=Lt(t0(u),function(A){return[A]});return c=We(c),_1(u,b,function(A,k){return c(A,k[0])})}function j8(u,c,b){c=Cs(c,u);var A=-1,k=c.length;for(k||(k=1,u=i);++A<k;){var U=u==null?i:u[sa(c[A])];U===i&&(A=k,U=b),u=Wa(U)?U.call(u):U}return u}function V8(u,c,b){return u==null?u:hf(u,c,b)}function H8(u,c,b,A){return A=typeof A=="function"?A:i,u==null?u:hf(u,c,b,A)}var Iw=j1(_i),Pw=j1(mr);function $8(u,c,b){var A=it(u),k=A||Is(u)||ol(u);if(c=We(c,4),b==null){var U=u&&u.constructor;k?b=A?new U:[]:Ht(u)?b=Wa(U)?rl(Eh(u)):{}:b={}}return(k?vi:na)(u,function(K,Y,ie){return c(b,K,Y,ie)}),b}function W8(u,c){return u==null?!0:zv(u,c)}function q8(u,c,b){return u==null?u:S1(u,c,Qv(b))}function G8(u,c,b,A){return A=typeof A=="function"?A:i,u==null?u:S1(u,c,Qv(b),A)}function ul(u){return u==null?[]:So(u,_i(u))}function z8(u){return u==null?[]:So(u,mr(u))}function K8(u,c,b){return b===i&&(b=c,c=i),b!==i&&(b=Zr(b),b=b===b?b:0),c!==i&&(c=Zr(c),c=c===c?c:0),Oo(Zr(u),c,b)}function X8(u,c,b){return c=qa(c),b===i?(b=c,c=0):b=qa(b),u=Zr(u),tj(u,c,b)}function Q8(u,c,b){if(b&&typeof b!="boolean"&&er(u,c,b)&&(c=b=i),b===i&&(typeof c=="boolean"?(b=c,c=i):typeof u=="boolean"&&(b=u,u=i)),u===i&&c===i?(u=0,c=1):(u=qa(u),c===i?(c=u,u=0):c=qa(c)),u>c){var A=u;u=c,c=A}if(b||u%1||c%1){var k=ZE();return Ni(u+k*(c-u+qd("1e-"+((k+"").length-1))),c)}return Wv(u,c)}var Y8=al(function(u,c,b){return c=c.toLowerCase(),u+(b?Ow(c):c)});function Ow(u){return v0(It(u).toLowerCase())}function Dw(u){return u=It(u),u&&u.replace(La,Ji).replace(jd,"")}function J8(u,c,b){u=It(u),c=Mr(c);var A=u.length;b=b===i?A:Oo(st(b),0,A);var k=b;return b-=c.length,b>=0&&u.slice(b,k)==c}function Z8(u){return u=It(u),u&&wd.test(u)?u.replace(Mt,Fe):u}function e4(u){return u=It(u),u&&Pd.test(u)?u.replace(oo,"\\$&"):u}var t4=al(function(u,c,b){return u+(b?"-":"")+c.toLowerCase()}),i4=al(function(u,c,b){return u+(b?" ":"")+c.toLowerCase()}),r4=R1("toLowerCase");function n4(u,c,b){u=It(u),c=st(c);var A=c?zr(u):0;if(!c||A>=c)return u;var k=(c-A)/2;return Vh(Ih(k),b)+u+Vh(Ah(k),b)}function a4(u,c,b){u=It(u),c=st(c);var A=c?zr(u):0;return c&&A<c?u+Vh(c-A,b):u}function s4(u,c,b){u=It(u),c=st(c);var A=c?zr(u):0;return c&&A<c?Vh(c-A,b)+u:u}function o4(u,c,b){return b||c==null?c=0:c&&(c=+c),pB(It(u).replace(Ir,""),c||0)}function u4(u,c,b){return(b?er(u,c,b):c===i)?c=1:c=st(c),qv(It(u),c)}function l4(){var u=arguments,c=It(u[0]);return u.length<3?c:c.replace(u[1],u[2])}var d4=al(function(u,c,b){return u+(b?"_":"")+c.toLowerCase()});function f4(u,c,b){return b&&typeof b!="number"&&er(u,c,b)&&(c=b=i),b=b===i?Xe:b>>>0,b?(u=It(u),u&&(typeof c=="string"||c!=null&&!p0(c))&&(c=Mr(c),!c&&kt(u))?As(x(u),0,b):u.split(c,b)):[]}var c4=al(function(u,c,b){return u+(b?" ":"")+v0(c)});function h4(u,c,b){return u=It(u),b=b==null?0:Oo(st(b),0,u.length),c=Mr(c),u.slice(b,b+c.length)==c}function p4(u,c,b){var A=M.templateSettings;b&&er(u,c,b)&&(c=i),u=It(u),c=Zh({},c,A,V1);var k=Zh({},c.imports,A.imports,V1),U=_i(k),K=So(k,U),Y,ie,ge=0,ve=c.interpolate||Yn,xe="__p += '",Le=ye((c.escape||Yn).source+"|"+ve.source+"|"+(ve===Fu?wi:Yn).source+"|"+(c.evaluate||Yn).source+"|$","g"),Ne="//# sourceURL="+(mt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Yi+"]")+`
`;u.replace(Le,function(Ke,gt,yt,Nr,tr,Ur){return yt||(yt=Nr),xe+=u.slice(ge,Ur).replace(lo,Ai),gt&&(Y=!0,xe+=`' +
__e(`+gt+`) +
'`),tr&&(ie=!0,xe+=`';
`+tr+`;
__p += '`),yt&&(xe+=`' +
((__t = (`+yt+`)) == null ? '' : __t) +
'`),ge=Ur+Ke.length,Ke}),xe+=`';
`;var ze=mt.call(c,"variable")&&c.variable;if(!ze)xe=`with (obj) {
`+xe+`
}
`;else if(gn.test(ze))throw new B(o);xe=(ie?xe.replace(ls,""):xe).replace(Sd,"$1").replace(Ed,"$1;"),xe="function("+(ze||"obj")+`) {
`+(ze?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Y?", __e = _.escape":"")+(ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+xe+`return __p
}`;var lt=kw(function(){return ee(U,Ne+"return "+xe).apply(i,K)});if(lt.source=xe,h0(lt))throw lt;return lt}function m4(u){return It(u).toLowerCase()}function g4(u){return It(u).toUpperCase()}function v4(u,c,b){if(u=It(u),u&&(b||c===i))return Ju(u);if(!u||!(c=Mr(c)))return u;var A=x(u),k=x(c),U=ea(A,k),K=Zu(A,k)+1;return As(A,U,K).join("")}function _4(u,c,b){if(u=It(u),u&&(b||c===i))return u.slice(0,d(u)+1);if(!u||!(c=Mr(c)))return u;var A=x(u),k=Zu(A,x(c))+1;return As(A,0,k).join("")}function y4(u,c,b){if(u=It(u),u&&(b||c===i))return u.replace(Ir,"");if(!u||!(c=Mr(c)))return u;var A=x(u),k=ea(A,x(c));return As(A,k).join("")}function T4(u,c){var b=j,A=oe;if(Ht(c)){var k="separator"in c?c.separator:k;b="length"in c?st(c.length):b,A="omission"in c?Mr(c.omission):A}u=It(u);var U=u.length;if(kt(u)){var K=x(u);U=K.length}if(b>=U)return u;var Y=b-zr(A);if(Y<1)return A;var ie=K?As(K,0,Y).join(""):u.slice(0,Y);if(k===i)return ie+A;if(K&&(Y+=ie.length-Y),p0(k)){if(u.slice(Y).search(k)){var ge,ve=ie;for(k.global||(k=ye(k.source,It(Ge.exec(k))+"g")),k.lastIndex=0;ge=k.exec(ve);)var xe=ge.index;ie=ie.slice(0,xe===i?Y:xe)}}else if(u.indexOf(Mr(k),Y)!=Y){var Le=ie.lastIndexOf(k);Le>-1&&(ie=ie.slice(0,Le))}return ie+A}function b4(u){return u=It(u),u&&so.test(u)?u.replace(Mu,p):u}var x4=al(function(u,c,b){return u+(b?" ":"")+c.toUpperCase()}),v0=R1("toUpperCase");function Lw(u,c,b){return u=It(u),c=b?i:c,c===i?Zd(u)?_(u):An(u):u.match(c)||[]}var kw=dt(function(u,c){try{return li(u,i,c)}catch(b){return h0(b)?b:new B(b)}}),S4=Ha(function(u,c){return vi(c,function(b){b=sa(b),ja(u,b,f0(u[b],u))}),u});function E4(u){var c=u==null?0:u.length,b=We();return u=c?Lt(u,function(A){if(typeof A[1]!="function")throw new tt(s);return[b(A[0]),A[1]]}):[],dt(function(A){for(var k=-1;++k<c;){var U=u[k];if(li(U[0],this,A))return li(U[1],this,A)}})}function w4(u){return QB(Qr(u,v))}function _0(u){return function(){return u}}function C4(u,c){return u==null||u!==u?c:u}var A4=F1(),I4=F1(!0);function gr(u){return u}function y0(u){return c1(typeof u=="function"?u:Qr(u,v))}function P4(u){return p1(Qr(u,v))}function O4(u,c){return m1(u,Qr(c,v))}var D4=dt(function(u,c){return function(b){return ff(b,u,c)}}),L4=dt(function(u,c){return function(b){return ff(u,b,c)}});function T0(u,c,b){var A=_i(c),k=Rh(c,A);b==null&&!(Ht(c)&&(k.length||!A.length))&&(b=c,c=u,u=this,k=Rh(c,_i(c)));var U=!(Ht(b)&&"chain"in b)||!!b.chain,K=Wa(u);return vi(k,function(Y){var ie=c[Y];u[Y]=ie,K&&(u.prototype[Y]=function(){var ge=this.__chain__;if(U||ge){var ve=u(this.__wrapped__),xe=ve.__actions__=hr(this.__actions__);return xe.push({func:ie,args:arguments,thisArg:u}),ve.__chain__=ge,ve}return ie.apply(u,Wr([this.value()],arguments))})}),u}function k4(){return ei._===this&&(ei._=aB),this}function b0(){}function R4(u){return u=st(u),dt(function(c){return g1(c,u)})}var M4=Jv(Lt),F4=Jv(fr),N4=Jv(To);function Rw(u){return a0(u)?Ma(sa(u)):hj(u)}function U4(u){return function(c){return u==null?i:Do(u,c)}}var B4=U1(),j4=U1(!0);function x0(){return[]}function S0(){return!1}function V4(){return{}}function H4(){return""}function $4(){return!0}function W4(u,c){if(u=st(u),u<1||u>fe)return[];var b=Xe,A=Ni(u,Xe);c=We(c),u-=Xe;for(var k=Rr(A,c);++b<u;)c(b);return k}function q4(u){return it(u)?Lt(u,sa):Fr(u)?[u]:hr(ew(It(u)))}function G4(u){var c=++Co;return It(u)+c}var z4=jh(function(u,c){return u+c},0),K4=Zv("ceil"),X4=jh(function(u,c){return u/c},1),Q4=Zv("floor");function Y4(u){return u&&u.length?kh(u,gr,Uv):i}function J4(u,c){return u&&u.length?kh(u,We(c,2),Uv):i}function Z4(u){return Ts(u,gr)}function eV(u,c){return Ts(u,We(c,2))}function tV(u){return u&&u.length?kh(u,gr,Hv):i}function iV(u,c){return u&&u.length?kh(u,We(c,2),Hv):i}var rV=jh(function(u,c){return u*c},1),nV=Zv("round"),aV=jh(function(u,c){return u-c},0);function sV(u){return u&&u.length?kr(u,gr):0}function oV(u,c){return u&&u.length?kr(u,We(c,2)):0}return M.after=P3,M.ary=fw,M.assign=g8,M.assignIn=ww,M.assignInWith=Zh,M.assignWith=v8,M.at=_8,M.before=cw,M.bind=f0,M.bindAll=S4,M.bindKey=hw,M.castArray=V3,M.chain=uw,M.chunk=Qj,M.compact=Yj,M.concat=Jj,M.cond=E4,M.conforms=w4,M.constant=_0,M.countBy=s3,M.create=y8,M.curry=pw,M.curryRight=mw,M.debounce=gw,M.defaults=T8,M.defaultsDeep=b8,M.defer=O3,M.delay=D3,M.difference=Zj,M.differenceBy=e2,M.differenceWith=t2,M.drop=i2,M.dropRight=r2,M.dropRightWhile=n2,M.dropWhile=a2,M.fill=s2,M.filter=u3,M.flatMap=f3,M.flatMapDeep=c3,M.flatMapDepth=h3,M.flatten=nw,M.flattenDeep=o2,M.flattenDepth=u2,M.flip=L3,M.flow=A4,M.flowRight=I4,M.fromPairs=l2,M.functions=I8,M.functionsIn=P8,M.groupBy=p3,M.initial=f2,M.intersection=c2,M.intersectionBy=h2,M.intersectionWith=p2,M.invert=D8,M.invertBy=L8,M.invokeMap=g3,M.iteratee=y0,M.keyBy=v3,M.keys=_i,M.keysIn=mr,M.map=zh,M.mapKeys=R8,M.mapValues=M8,M.matches=P4,M.matchesProperty=O4,M.memoize=Xh,M.merge=F8,M.mergeWith=Cw,M.method=D4,M.methodOf=L4,M.mixin=T0,M.negate=Qh,M.nthArg=R4,M.omit=N8,M.omitBy=U8,M.once=k3,M.orderBy=_3,M.over=M4,M.overArgs=R3,M.overEvery=F4,M.overSome=N4,M.partial=c0,M.partialRight=vw,M.partition=y3,M.pick=B8,M.pickBy=Aw,M.property=Rw,M.propertyOf=U4,M.pull=_2,M.pullAll=sw,M.pullAllBy=y2,M.pullAllWith=T2,M.pullAt=b2,M.range=B4,M.rangeRight=j4,M.rearg=M3,M.reject=x3,M.remove=x2,M.rest=F3,M.reverse=l0,M.sampleSize=E3,M.set=V8,M.setWith=H8,M.shuffle=w3,M.slice=S2,M.sortBy=I3,M.sortedUniq=O2,M.sortedUniqBy=D2,M.split=f4,M.spread=N3,M.tail=L2,M.take=k2,M.takeRight=R2,M.takeRightWhile=M2,M.takeWhile=F2,M.tap=Y2,M.throttle=U3,M.thru=Gh,M.toArray=xw,M.toPairs=Iw,M.toPairsIn=Pw,M.toPath=q4,M.toPlainObject=Ew,M.transform=$8,M.unary=B3,M.union=N2,M.unionBy=U2,M.unionWith=B2,M.uniq=j2,M.uniqBy=V2,M.uniqWith=H2,M.unset=W8,M.unzip=d0,M.unzipWith=ow,M.update=q8,M.updateWith=G8,M.values=ul,M.valuesIn=z8,M.without=$2,M.words=Lw,M.wrap=j3,M.xor=W2,M.xorBy=q2,M.xorWith=G2,M.zip=z2,M.zipObject=K2,M.zipObjectDeep=X2,M.zipWith=Q2,M.entries=Iw,M.entriesIn=Pw,M.extend=ww,M.extendWith=Zh,T0(M,M),M.add=z4,M.attempt=kw,M.camelCase=Y8,M.capitalize=Ow,M.ceil=K4,M.clamp=K8,M.clone=H3,M.cloneDeep=W3,M.cloneDeepWith=q3,M.cloneWith=$3,M.conformsTo=G3,M.deburr=Dw,M.defaultTo=C4,M.divide=X4,M.endsWith=J8,M.eq=On,M.escape=Z8,M.escapeRegExp=e4,M.every=o3,M.find=l3,M.findIndex=iw,M.findKey=x8,M.findLast=d3,M.findLastIndex=rw,M.findLastKey=S8,M.floor=Q4,M.forEach=lw,M.forEachRight=dw,M.forIn=E8,M.forInRight=w8,M.forOwn=C8,M.forOwnRight=A8,M.get=m0,M.gt=z3,M.gte=K3,M.has=O8,M.hasIn=g0,M.head=aw,M.identity=gr,M.includes=m3,M.indexOf=d2,M.inRange=X8,M.invoke=k8,M.isArguments=Ro,M.isArray=it,M.isArrayBuffer=X3,M.isArrayLike=pr,M.isArrayLikeObject=ti,M.isBoolean=Q3,M.isBuffer=Is,M.isDate=Y3,M.isElement=J3,M.isEmpty=Z3,M.isEqual=e8,M.isEqualWith=t8,M.isError=h0,M.isFinite=i8,M.isFunction=Wa,M.isInteger=_w,M.isLength=Yh,M.isMap=yw,M.isMatch=r8,M.isMatchWith=n8,M.isNaN=a8,M.isNative=s8,M.isNil=u8,M.isNull=o8,M.isNumber=Tw,M.isObject=Ht,M.isObjectLike=qt,M.isPlainObject=vf,M.isRegExp=p0,M.isSafeInteger=l8,M.isSet=bw,M.isString=Jh,M.isSymbol=Fr,M.isTypedArray=ol,M.isUndefined=d8,M.isWeakMap=f8,M.isWeakSet=c8,M.join=m2,M.kebabCase=t4,M.last=Jr,M.lastIndexOf=g2,M.lowerCase=i4,M.lowerFirst=r4,M.lt=h8,M.lte=p8,M.max=Y4,M.maxBy=J4,M.mean=Z4,M.meanBy=eV,M.min=tV,M.minBy=iV,M.stubArray=x0,M.stubFalse=S0,M.stubObject=V4,M.stubString=H4,M.stubTrue=$4,M.multiply=rV,M.nth=v2,M.noConflict=k4,M.noop=b0,M.now=Kh,M.pad=n4,M.padEnd=a4,M.padStart=s4,M.parseInt=o4,M.random=Q8,M.reduce=T3,M.reduceRight=b3,M.repeat=u4,M.replace=l4,M.result=j8,M.round=nV,M.runInContext=S,M.sample=S3,M.size=C3,M.snakeCase=d4,M.some=A3,M.sortedIndex=E2,M.sortedIndexBy=w2,M.sortedIndexOf=C2,M.sortedLastIndex=A2,M.sortedLastIndexBy=I2,M.sortedLastIndexOf=P2,M.startCase=c4,M.startsWith=h4,M.subtract=aV,M.sum=sV,M.sumBy=oV,M.template=p4,M.times=W4,M.toFinite=qa,M.toInteger=st,M.toLength=Sw,M.toLower=m4,M.toNumber=Zr,M.toSafeInteger=m8,M.toString=It,M.toUpper=g4,M.trim=v4,M.trimEnd=_4,M.trimStart=y4,M.truncate=T4,M.unescape=b4,M.uniqueId=G4,M.upperCase=x4,M.upperFirst=v0,M.each=lw,M.eachRight=dw,M.first=aw,T0(M,function(){var u={};return na(M,function(c,b){mt.call(M.prototype,b)||(u[b]=c)}),u}(),{chain:!1}),M.VERSION=r,vi(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){M[u].placeholder=M}),vi(["drop","take"],function(u,c){vt.prototype[u]=function(b){b=b===i?1:di(st(b),0);var A=this.__filtered__&&!c?new vt(this):this.clone();return A.__filtered__?A.__takeCount__=Ni(b,A.__takeCount__):A.__views__.push({size:Ni(b,Xe),type:u+(A.__dir__<0?"Right":"")}),A},vt.prototype[u+"Right"]=function(b){return this.reverse()[u](b).reverse()}}),vi(["filter","map","takeWhile"],function(u,c){var b=c+1,A=b==he||b==pe;vt.prototype[u]=function(k){var U=this.clone();return U.__iteratees__.push({iteratee:We(k,3),type:b}),U.__filtered__=U.__filtered__||A,U}}),vi(["head","last"],function(u,c){var b="take"+(c?"Right":"");vt.prototype[u]=function(){return this[b](1).value()[0]}}),vi(["initial","tail"],function(u,c){var b="drop"+(c?"":"Right");vt.prototype[u]=function(){return this.__filtered__?new vt(this):this[b](1)}}),vt.prototype.compact=function(){return this.filter(gr)},vt.prototype.find=function(u){return this.filter(u).head()},vt.prototype.findLast=function(u){return this.reverse().find(u)},vt.prototype.invokeMap=dt(function(u,c){return typeof u=="function"?new vt(this):this.map(function(b){return ff(b,u,c)})}),vt.prototype.reject=function(u){return this.filter(Qh(We(u)))},vt.prototype.slice=function(u,c){u=st(u);var b=this;return b.__filtered__&&(u>0||c<0)?new vt(b):(u<0?b=b.takeRight(-u):u&&(b=b.drop(u)),c!==i&&(c=st(c),b=c<0?b.dropRight(-c):b.take(c-u)),b)},vt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},vt.prototype.toArray=function(){return this.take(Xe)},na(vt.prototype,function(u,c){var b=/^(?:filter|find|map|reject)|While$/.test(c),A=/^(?:head|last)$/.test(c),k=M[A?"take"+(c=="last"?"Right":""):c],U=A||/^find/.test(c);k&&(M.prototype[c]=function(){var K=this.__wrapped__,Y=A?[1]:arguments,ie=K instanceof vt,ge=Y[0],ve=ie||it(K),xe=function(gt){var yt=k.apply(M,Wr([gt],Y));return A&&Le?yt[0]:yt};ve&&b&&typeof ge=="function"&&ge.length!=1&&(ie=ve=!1);var Le=this.__chain__,Ne=!!this.__actions__.length,ze=U&&!Le,lt=ie&&!Ne;if(!U&&ve){K=lt?K:new vt(this);var Ke=u.apply(K,Y);return Ke.__actions__.push({func:Gh,args:[xe],thisArg:i}),new Xr(Ke,Le)}return ze&&lt?u.apply(this,Y):(Ke=this.thru(xe),ze?A?Ke.value()[0]:Ke.value():Ke)})}),vi(["pop","push","shift","sort","splice","unshift"],function(u){var c=ai[u],b=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",A=/^(?:pop|shift)$/.test(u);M.prototype[u]=function(){var k=arguments;if(A&&!this.__chain__){var U=this.value();return c.apply(it(U)?U:[],k)}return this[b](function(K){return c.apply(it(K)?K:[],k)})}}),na(vt.prototype,function(u,c){var b=M[c];if(b){var A=b.name+"";mt.call(il,A)||(il[A]=[]),il[A].push({name:c,func:b})}}),il[Bh(i,R).name]=[{name:"wrapper",func:i}],vt.prototype.clone=bB,vt.prototype.reverse=xB,vt.prototype.value=SB,M.prototype.at=J2,M.prototype.chain=Z2,M.prototype.commit=e3,M.prototype.next=t3,M.prototype.plant=r3,M.prototype.reverse=n3,M.prototype.toJSON=M.prototype.valueOf=M.prototype.value=a3,M.prototype.first=M.prototype.head,nf&&(M.prototype[nf]=i3),M},w=T();Cn?((Cn.exports=w)._=w,ui._=w):ei._=w}).call(Nn)})(XI,qs);const QI={get:qs.get,round:qs.round,cloneDeep:qs.cloneDeep,isEqual:qs.isEqual};var Yp={},YI={get exports(){return Yp},set exports(a){Yp=a}};(function(a,t){(function(i,r){a.exports=r()})(Nn,function(){var i=1e3,r=6e4,e=36e5,n="millisecond",s="second",o="minute",l="hour",f="day",m="week",v="month",y="quarter",E="year",I="date",O="Invalid Date",D=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,H={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(se){var he=["th","st","nd","rd"],le=se%100;return"["+se+(he[(le-20)%10]||he[le]||he[0])+"]"}},Z=function(se,he,le){var pe=String(se);return!pe||pe.length>=he?se:""+Array(he+1-pe.length).join(le)+se},V={s:Z,z:function(se){var he=-se.utcOffset(),le=Math.abs(he),pe=Math.floor(le/60),ne=le%60;return(he<=0?"+":"-")+Z(pe,2,"0")+":"+Z(ne,2,"0")},m:function se(he,le){if(he.date()<le.date())return-se(le,he);var pe=12*(le.year()-he.year())+(le.month()-he.month()),ne=he.clone().add(pe,v),fe=le-ne<0,Ie=he.clone().add(pe+(fe?-1:1),v);return+(-(pe+(le-ne)/(fe?ne-Ie:Ie-ne))||0)},a:function(se){return se<0?Math.ceil(se)||0:Math.floor(se)},p:function(se){return{M:v,y:E,w:m,d:f,D:I,h:l,m:o,s:s,ms:n,Q:y}[se]||String(se||"").toLowerCase().replace(/s$/,"")},u:function(se){return se===void 0}},W="en",te={};te[W]=H;var z=function(se){return se instanceof oe},q=function se(he,le,pe){var ne;if(!he)return W;if(typeof he=="string"){var fe=he.toLowerCase();te[fe]&&(ne=fe),le&&(te[fe]=le,ne=fe);var Ie=he.split("-");if(!ne&&Ie.length>1)return se(Ie[0])}else{var Ce=he.name;te[Ce]=he,ne=Ce}return!pe&&ne&&(W=ne),ne||!pe&&W},X=function(se,he){if(z(se))return se.clone();var le=typeof he=="object"?he:{};return le.date=se,le.args=arguments,new oe(le)},j=V;j.l=q,j.i=z,j.w=function(se,he){return X(se,{locale:he.$L,utc:he.$u,x:he.$x,$offset:he.$offset})};var oe=function(){function se(le){this.$L=q(le.locale,null,!0),this.parse(le)}var he=se.prototype;return he.parse=function(le){this.$d=function(pe){var ne=pe.date,fe=pe.utc;if(ne===null)return new Date(NaN);if(j.u(ne))return new Date;if(ne instanceof Date)return new Date(ne);if(typeof ne=="string"&&!/Z$/i.test(ne)){var Ie=ne.match(D);if(Ie){var Ce=Ie[2]-1||0,Xe=(Ie[7]||"0").substring(0,3);return fe?new Date(Date.UTC(Ie[1],Ce,Ie[3]||1,Ie[4]||0,Ie[5]||0,Ie[6]||0,Xe)):new Date(Ie[1],Ce,Ie[3]||1,Ie[4]||0,Ie[5]||0,Ie[6]||0,Xe)}}return new Date(ne)}(le),this.$x=le.x||{},this.init()},he.init=function(){var le=this.$d;this.$y=le.getFullYear(),this.$M=le.getMonth(),this.$D=le.getDate(),this.$W=le.getDay(),this.$H=le.getHours(),this.$m=le.getMinutes(),this.$s=le.getSeconds(),this.$ms=le.getMilliseconds()},he.$utils=function(){return j},he.isValid=function(){return this.$d.toString()!==O},he.isSame=function(le,pe){var ne=X(le);return this.startOf(pe)<=ne&&ne<=this.endOf(pe)},he.isAfter=function(le,pe){return X(le)<this.startOf(pe)},he.isBefore=function(le,pe){return this.endOf(pe)<X(le)},he.$g=function(le,pe,ne){return j.u(le)?this[pe]:this.set(ne,le)},he.unix=function(){return Math.floor(this.valueOf()/1e3)},he.valueOf=function(){return this.$d.getTime()},he.startOf=function(le,pe){var ne=this,fe=!!j.u(pe)||pe,Ie=j.p(le),Ce=function(Ct,ht){var Yt=j.w(ne.$u?Date.UTC(ne.$y,ht,Ct):new Date(ne.$y,ht,Ct),ne);return fe?Yt:Yt.endOf(f)},Xe=function(Ct,ht){return j.w(ne.toDate()[Ct].apply(ne.toDate("s"),(fe?[0,0,0,0]:[23,59,59,999]).slice(ht)),ne)},Be=this.$W,Qe=this.$M,Et=this.$D,bt="set"+(this.$u?"UTC":"");switch(Ie){case E:return fe?Ce(1,0):Ce(31,11);case v:return fe?Ce(1,Qe):Ce(0,Qe+1);case m:var xt=this.$locale().weekStart||0,wt=(Be<xt?Be+7:Be)-xt;return Ce(fe?Et-wt:Et+(6-wt),Qe);case f:case I:return Xe(bt+"Hours",0);case l:return Xe(bt+"Minutes",1);case o:return Xe(bt+"Seconds",2);case s:return Xe(bt+"Milliseconds",3);default:return this.clone()}},he.endOf=function(le){return this.startOf(le,!1)},he.$set=function(le,pe){var ne,fe=j.p(le),Ie="set"+(this.$u?"UTC":""),Ce=(ne={},ne[f]=Ie+"Date",ne[I]=Ie+"Date",ne[v]=Ie+"Month",ne[E]=Ie+"FullYear",ne[l]=Ie+"Hours",ne[o]=Ie+"Minutes",ne[s]=Ie+"Seconds",ne[n]=Ie+"Milliseconds",ne)[fe],Xe=fe===f?this.$D+(pe-this.$W):pe;if(fe===v||fe===E){var Be=this.clone().set(I,1);Be.$d[Ce](Xe),Be.init(),this.$d=Be.set(I,Math.min(this.$D,Be.daysInMonth())).$d}else Ce&&this.$d[Ce](Xe);return this.init(),this},he.set=function(le,pe){return this.clone().$set(le,pe)},he.get=function(le){return this[j.p(le)]()},he.add=function(le,pe){var ne,fe=this;le=Number(le);var Ie=j.p(pe),Ce=function(Qe){var Et=X(fe);return j.w(Et.date(Et.date()+Math.round(Qe*le)),fe)};if(Ie===v)return this.set(v,this.$M+le);if(Ie===E)return this.set(E,this.$y+le);if(Ie===f)return Ce(1);if(Ie===m)return Ce(7);var Xe=(ne={},ne[o]=r,ne[l]=e,ne[s]=i,ne)[Ie]||1,Be=this.$d.getTime()+le*Xe;return j.w(Be,this)},he.subtract=function(le,pe){return this.add(-1*le,pe)},he.format=function(le){var pe=this,ne=this.$locale();if(!this.isValid())return ne.invalidDate||O;var fe=le||"YYYY-MM-DDTHH:mm:ssZ",Ie=j.z(this),Ce=this.$H,Xe=this.$m,Be=this.$M,Qe=ne.weekdays,Et=ne.months,bt=function(ht,Yt,gi,Ei){return ht&&(ht[Yt]||ht(pe,fe))||gi[Yt].slice(0,Ei)},xt=function(ht){return j.s(Ce%12||12,ht,"0")},wt=ne.meridiem||function(ht,Yt,gi){var Ei=ht<12?"AM":"PM";return gi?Ei.toLowerCase():Ei},Ct={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Be+1,MM:j.s(Be+1,2,"0"),MMM:bt(ne.monthsShort,Be,Et,3),MMMM:bt(Et,Be),D:this.$D,DD:j.s(this.$D,2,"0"),d:String(this.$W),dd:bt(ne.weekdaysMin,this.$W,Qe,2),ddd:bt(ne.weekdaysShort,this.$W,Qe,3),dddd:Qe[this.$W],H:String(Ce),HH:j.s(Ce,2,"0"),h:xt(1),hh:xt(2),a:wt(Ce,Xe,!0),A:wt(Ce,Xe,!1),m:String(Xe),mm:j.s(Xe,2,"0"),s:String(this.$s),ss:j.s(this.$s,2,"0"),SSS:j.s(this.$ms,3,"0"),Z:Ie};return fe.replace(R,function(ht,Yt){return Yt||Ct[ht]||Ie.replace(":","")})},he.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},he.diff=function(le,pe,ne){var fe,Ie=j.p(pe),Ce=X(le),Xe=(Ce.utcOffset()-this.utcOffset())*r,Be=this-Ce,Qe=j.m(this,Ce);return Qe=(fe={},fe[E]=Qe/12,fe[v]=Qe,fe[y]=Qe/3,fe[m]=(Be-Xe)/6048e5,fe[f]=(Be-Xe)/864e5,fe[l]=Be/e,fe[o]=Be/r,fe[s]=Be/i,fe)[Ie]||Be,ne?Qe:j.a(Qe)},he.daysInMonth=function(){return this.endOf(v).$D},he.$locale=function(){return te[this.$L]},he.locale=function(le,pe){if(!le)return this.$L;var ne=this.clone(),fe=q(le,pe,!0);return fe&&(ne.$L=fe),ne},he.clone=function(){return j.w(this.$d,this)},he.toDate=function(){return new Date(this.valueOf())},he.toJSON=function(){return this.isValid()?this.toISOString():null},he.toISOString=function(){return this.$d.toISOString()},he.toString=function(){return this.$d.toUTCString()},se}(),re=oe.prototype;return X.prototype=re,[["$ms",n],["$s",s],["$m",o],["$H",l],["$W",f],["$M",v],["$y",E],["$D",I]].forEach(function(se){re[se[1]]=function(he){return this.$g(he,se[0],se[1])}}),X.extend=function(se,he){return se.$i||(se(he,oe,X),se.$i=!0),X},X.locale=q,X.isDayjs=z,X.unix=function(se){return X(1e3*se)},X.en=te[W],X.Ls=te,X.p={},X})})(YI);class JI{now(t="YYYY-MM-DD HH:mm:ss"){return Yp().format(t)}delay(t=1){return new Promise(i=>{setTimeout(()=>{i()},t*1e3)})}getFileExtension(t){return t?t.name.split(".").pop():null}validateFile(t,i={}){if(!t)return!1;const r=t.name.split(".").pop()||"";if(Array.isArray(i.allowFileTypeList)){for(const e of i.allowFileTypeList)if(new RegExp(e,"g").test(t.type))return!0}if(Array.isArray(i.allowExtensionList)){for(const e of i.allowExtensionList)if(new RegExp(e,"g").test(r))return!0}return!1}getYoutubeUid(t){if(typeof t!="string")return null;const i=/(https:\/\/youtu\.be\/)(.*)/;if(t.match(i)){let n=t.replace(i,"$2");return new RegExp(/\?/).test(n)&&(n=n.split("?")[0]),n}const r=t.split("v=");return typeof r[1]!="string"?null:r[1].split("&")[0]}}const ZI=new JI;var Wo=(a=>(a[a.UNSTARTED=-1]="UNSTARTED",a[a.ENDED=0]="ENDED",a[a.PLAYING=1]="PLAYING",a[a.PAUSED=2]="PAUSED",a[a.BUFFERING=3]="BUFFERING",a[a.CUED=5]="CUED",a))(Wo||{});const oy=bl({emits:{videoFirstPlay:null,videoPlay:null,videoPause:null,videoEnd:null},props:{disabled:{type:Boolean,default:!1},debug:{type:Boolean,default:!1},width:{type:Number},height:{type:Number},autoplay:{type:Boolean},startTime:{type:String,default:null}},methods:{videoFirstPlay(){this.$emit("videoFirstPlay")},videoPlay(){this.$emit("videoPlay")},videoPause(){this.$emit("videoPause")},videoEnd(){this.$emit("videoEnd")}},computed:{shouldAutoplay(){return this.disabled?!1:this.autoplay}}}),eP=bl({mixins:[oy],props:{source:{type:Object}},data:()=>({hasPlay:!1,player:null,getCurrentTimeCallback:null}),mounted(){this.init()},methods:{async init(){var i;if(this.debug&&console.warn("[DEBUG] start init youtube player"),await this.$nextTick(),window.YT){await Vo(),this.onYouTubeIframeAPIReady();return}const a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";const t=document.getElementsByTagName("script")[0];(i=t.parentNode)==null||i.insertBefore(a,t),await Vo(),this.onYouTubeIframeAPIReady()},onYouTubeIframeAPIReady(){if(!window.YT){setTimeout(()=>{this.onYouTubeIframeAPIReady()},500);return}window.YT.ready(()=>{const a=this.$refs.player;this.player=new window.YT.Player(a,{height:this.height,width:this.width,videoId:this.youtubeUid,playerVars:{autoplay:this.shouldAutoplay?1:0,start:this.startTime?this.startTime:void 0},events:{onStateChange:this.onPlayerStateChange}})})},onPlayerStateChange(a){this.setupGetCurrentTimeCallback(a),a.data==Wo.PLAYING?this.hasPlay?(this.hasPlay=!0,this.videoPlay()):(this.hasPlay=!0,this.videoFirstPlay()):a.data==Wo.BUFFERING||a.data==Wo.CUED||(a.data==Wo.ENDED?this.videoEnd():a.data==Wo.PAUSED&&this.videoPause())},setupGetCurrentTimeCallback(a){this.getCurrentTimeCallback=()=>a.target.getCurrentTime()}},computed:{elementId(){return KI()},youtubeUid(){var a;return ZI.getYoutubeUid((a=this.source)==null?void 0:a.url)}}}),Jp=(a,t)=>{const i=a.__vccOpts||a;for(const[r,e]of t)i[r]=e;return i},tP=["disabled"],iP=["id"];function rP(a,t,i,r,e,n){return Cl(),Up("div",{"micro-media-player":"youtube",disabled:a.disabled},[Yf("div",{id:a.elementId,ref:"player"},null,8,iP)],8,tP)}const nP=Jp(eP,[["render",rP]]);var Gs=(a=>(a.STATIC_VIDEO="static-video",a.M3U8="m3u8",a.YOUTUBE="youtube",a))(Gs||{}),Dl;typeof window<"u"?Dl=window:typeof Nn<"u"?Dl=Nn:typeof self<"u"?Dl=self:Dl={};var F=Dl;const aP=sy(Object.freeze(Object.defineProperty({__proto__:null,default:{}},Symbol.toStringTag,{value:"Module"})));var uy=typeof Nn<"u"?Nn:typeof window<"u"?window:{},sP=aP,Ll;typeof document<"u"?Ll=document:(Ll=uy["__GLOBAL_DOCUMENT_CACHE@4"],Ll||(Ll=uy["__GLOBAL_DOCUMENT_CACHE@4"]=sP));var Se=Ll;function Di(){return Di=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(a[r]=i[r])}return a},Di.apply(this,arguments)}const oP=Object.freeze(Object.defineProperty({__proto__:null,default:Di},Symbol.toStringTag,{value:"Module"}));var ic={},uP={get exports(){return ic},set exports(a){ic=a}};(function(a,t){function i(l){if(l&&typeof l=="object"){var f=l.which||l.keyCode||l.charCode;f&&(l=f)}if(typeof l=="number")return s[l];var m=String(l),v=r[m.toLowerCase()];if(v)return v;var v=e[m.toLowerCase()];if(v)return v;if(m.length===1)return m.charCodeAt(0)}i.isEventKey=function(f,m){if(f&&typeof f=="object"){var v=f.which||f.keyCode||f.charCode;if(v==null)return!1;if(typeof m=="string"){var y=r[m.toLowerCase()];if(y)return y===v;var y=e[m.toLowerCase()];if(y)return y===v}else if(typeof m=="number")return m===v;return!1}},t=a.exports=i;var r=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},e=t.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(n=97;n<123;n++)r[String.fromCharCode(n)]=n-32;for(var n=48;n<58;n++)r[n-48]=n;for(n=1;n<13;n++)r["f"+n]=n+111;for(n=0;n<10;n++)r["numpad "+n]=n+96;var s=t.names=t.title={};for(n in r)s[r[n]]=n;for(var o in e)r[o]=e[o]})(uP,ic);const et=ic;function Ue(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function qo(a,t){return qo=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,e){return r.__proto__=e,r},qo(a,t)}function Ae(a,t){a.prototype=Object.create(t.prototype),a.prototype.constructor=a,qo(a,t)}var lP=dP;function dP(a,t){var i,r=null;try{i=JSON.parse(a,t)}catch(e){r=e}return[r,i]}var kl={},fP={get exports(){return kl},set exports(a){kl=a}};const cP=sy(oP);var hP=mP,pP=Object.prototype.toString;function mP(a){if(!a)return!1;var t=pP.call(a);return t==="[object Function]"||typeof a=="function"&&t!=="[object RegExp]"||typeof window<"u"&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}var gP=F,vP=function(t,i){return i===void 0&&(i=!1),function(r,e,n){if(r){t(r);return}if(e.statusCode>=400&&e.statusCode<=599){var s=n;if(i)if(gP.TextDecoder){var o=_P(e.headers&&e.headers["content-type"]);try{s=new TextDecoder(o).decode(n)}catch{}}else s=String.fromCharCode.apply(null,new Uint8Array(n));t({cause:s});return}t(null,n)}};function _P(a){return a===void 0&&(a=""),a.toLowerCase().split(";").reduce(function(t,i){var r=i.split("="),e=r[0],n=r[1];return e.trim()==="charset"?n.trim():t},"utf-8")}var yP=vP,ly=F,TP=cP,bP=hP;Un.httpHandler=yP;var xP=function(t){var i={};return t&&t.trim().split(`
`).forEach(function(r){var e=r.indexOf(":"),n=r.slice(0,e).trim().toLowerCase(),s=r.slice(e+1).trim();typeof i[n]>"u"?i[n]=s:Array.isArray(i[n])?i[n].push(s):i[n]=[i[n],s]}),i};fP.exports=Un,kl.default=Un,Un.XMLHttpRequest=ly.XMLHttpRequest||CP,Un.XDomainRequest="withCredentials"in new Un.XMLHttpRequest?Un.XMLHttpRequest:ly.XDomainRequest,SP(["get","put","post","patch","head","delete"],function(a){Un[a==="delete"?"del":a]=function(t,i,r){return i=dy(t,i,r),i.method=a.toUpperCase(),fy(i)}});function SP(a,t){for(var i=0;i<a.length;i++)t(a[i])}function EP(a){for(var t in a)if(a.hasOwnProperty(t))return!1;return!0}function dy(a,t,i){var r=a;return bP(t)?(i=t,typeof a=="string"&&(r={uri:a})):r=TP({},t,{uri:a}),r.callback=i,r}function Un(a,t,i){return t=dy(a,t,i),fy(t)}function fy(a){if(typeof a.callback>"u")throw new Error("callback argument missing");var t=!1,i=function(Z,V,W){t||(t=!0,a.callback(Z,V,W))};function r(){o.readyState===4&&setTimeout(s,0)}function e(){var H=void 0;if(o.response?H=o.response:H=o.responseText||wP(o),O)try{H=JSON.parse(H)}catch{}return H}function n(H){return clearTimeout(D),H instanceof Error||(H=new Error(""+(H||"Unknown XMLHttpRequest Error"))),H.statusCode=0,i(H,R)}function s(){if(!f){var H;clearTimeout(D),a.useXDR&&o.status===void 0?H=200:H=o.status===1223?204:o.status;var Z=R,V=null;return H!==0?(Z={body:e(),statusCode:H,method:v,headers:{},url:m,rawRequest:o},o.getAllResponseHeaders&&(Z.headers=xP(o.getAllResponseHeaders()))):V=new Error("Internal XMLHttpRequest Error"),i(V,Z,Z.body)}}var o=a.xhr||null;o||(a.cors||a.useXDR?o=new Un.XDomainRequest:o=new Un.XMLHttpRequest);var l,f,m=o.url=a.uri||a.url,v=o.method=a.method||"GET",y=a.body||a.data,E=o.headers=a.headers||{},I=!!a.sync,O=!1,D,R={body:void 0,headers:{},statusCode:0,method:v,url:m,rawRequest:o};if("json"in a&&a.json!==!1&&(O=!0,E.accept||E.Accept||(E.Accept="application/json"),v!=="GET"&&v!=="HEAD"&&(E["content-type"]||E["Content-Type"]||(E["Content-Type"]="application/json"),y=JSON.stringify(a.json===!0?y:a.json))),o.onreadystatechange=r,o.onload=s,o.onerror=n,o.onprogress=function(){},o.onabort=function(){f=!0},o.ontimeout=n,o.open(v,m,!I,a.username,a.password),I||(o.withCredentials=!!a.withCredentials),!I&&a.timeout>0&&(D=setTimeout(function(){if(!f){f=!0,o.abort("timeout");var H=new Error("XMLHttpRequest timeout");H.code="ETIMEDOUT",n(H)}},a.timeout)),o.setRequestHeader)for(l in E)E.hasOwnProperty(l)&&o.setRequestHeader(l,E[l]);else if(a.headers&&!EP(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(o.responseType=a.responseType),"beforeSend"in a&&typeof a.beforeSend=="function"&&a.beforeSend(o),o.send(y||null),o}function wP(a){try{if(a.responseType==="document")return a.responseXML;var t=a.responseXML&&a.responseXML.documentElement.nodeName==="parsererror";if(a.responseType===""&&!t)return a.responseXML}catch{}return null}function CP(){}var rc={},AP={get exports(){return rc},set exports(a){rc=a}},cy=Se,Zp=Object.create||function(){function a(){}return function(t){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return a.prototype=t,new a}}();function Tr(a,t){this.name="ParsingError",this.code=a.code,this.message=t||a.message}Tr.prototype=Zp(Error.prototype),Tr.prototype.constructor=Tr,Tr.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function em(a){function t(r,e,n,s){return(r|0)*3600+(e|0)*60+(n|0)+(s|0)/1e3}var i=a.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function Rl(){this.values=Zp(null)}Rl.prototype={set:function(a,t){!this.get(a)&&t!==""&&(this.values[a]=t)},get:function(a,t,i){return i?this.has(a)?this.values[a]:t[i]:this.has(a)?this.values[a]:t},has:function(a){return a in this.values},alt:function(a,t,i){for(var r=0;r<i.length;++r)if(t===i[r]){this.set(a,t);break}},integer:function(a,t){/^-?\d+$/.test(t)&&this.set(a,parseInt(t,10))},percent:function(a,t){return t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t),t>=0&&t<=100)?(this.set(a,t),!0):!1}};function Ml(a,t,i,r){var e=r?a.split(r):[a];for(var n in e)if(typeof e[n]=="string"){var s=e[n].split(i);if(s.length===2){var o=s[0].trim(),l=s[1].trim();t(o,l)}}}function IP(a,t,i){var r=a;function e(){var o=em(a);if(o===null)throw new Tr(Tr.Errors.BadTimeStamp,"Malformed timestamp: "+r);return a=a.replace(/^[^\sa-zA-Z-]+/,""),o}function n(o,l){var f=new Rl;Ml(o,function(m,v){switch(m){case"region":for(var y=i.length-1;y>=0;y--)if(i[y].id===v){f.set(m,i[y].region);break}break;case"vertical":f.alt(m,v,["rl","lr"]);break;case"line":var E=v.split(","),I=E[0];f.integer(m,I),f.percent(m,I)&&f.set("snapToLines",!1),f.alt(m,I,["auto"]),E.length===2&&f.alt("lineAlign",E[1],["start","center","end"]);break;case"position":E=v.split(","),f.percent(m,E[0]),E.length===2&&f.alt("positionAlign",E[1],["start","center","end"]);break;case"size":f.percent(m,v);break;case"align":f.alt(m,v,["start","center","end","left","right"]);break}},/:/,/\s/),l.region=f.get("region",null),l.vertical=f.get("vertical","");try{l.line=f.get("line","auto")}catch{}l.lineAlign=f.get("lineAlign","start"),l.snapToLines=f.get("snapToLines",!0),l.size=f.get("size",100);try{l.align=f.get("align","center")}catch{l.align=f.get("align","middle")}try{l.position=f.get("position","auto")}catch{l.position=f.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=f.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)}function s(){a=a.replace(/^\s+/,"")}if(s(),t.startTime=e(),s(),a.substr(0,3)!=="--\x3e")throw new Tr(Tr.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);a=a.substr(3),s(),t.endTime=e(),s(),n(a,t)}var tm=cy.createElement&&cy.createElement("textarea"),PP={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},hy={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},OP={v:"title",lang:"lang"},py={rt:"ruby"};function my(a,t){function i(){if(!t)return null;function I(D){return t=t.substr(D.length),D}var O=t.match(/^([^<]*)(<[^>]*>?)?/);return I(O[1]?O[1]:O[2])}function r(I){return tm.innerHTML=I,I=tm.textContent,tm.textContent="",I}function e(I,O){return!py[O.localName]||py[O.localName]===I.localName}function n(I,O){var D=PP[I];if(!D)return null;var R=a.document.createElement(D),H=OP[I];return H&&O&&(R[H]=O.trim()),R}for(var s=a.document.createElement("div"),o=s,l,f=[];(l=i())!==null;){if(l[0]==="<"){if(l[1]==="/"){f.length&&f[f.length-1]===l.substr(2).replace(">","")&&(f.pop(),o=o.parentNode);continue}var m=em(l.substr(1,l.length-2)),v;if(m){v=a.document.createProcessingInstruction("timestamp",m),o.appendChild(v);continue}var y=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y||(v=n(y[1],y[3]),!v)||!e(o,v))continue;if(y[2]){var E=y[2].split(".");E.forEach(function(I){var O=/^bg_/.test(I),D=O?I.slice(3):I;if(hy.hasOwnProperty(D)){var R=O?"background-color":"color",H=hy[D];v.style[R]=H}}),v.className=E.join(" ")}f.push(y[1]),o.appendChild(v),o=v;continue}o.appendChild(a.document.createTextNode(r(l)))}return s}var gy=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function DP(a){for(var t=0;t<gy.length;t++){var i=gy[t];if(a>=i[0]&&a<=i[1])return!0}return!1}function LP(a){var t=[],i="",r;if(!a||!a.childNodes)return"ltr";function e(o,l){for(var f=l.childNodes.length-1;f>=0;f--)o.push(l.childNodes[f])}function n(o){if(!o||!o.length)return null;var l=o.pop(),f=l.textContent||l.innerText;if(f){var m=f.match(/^.*(\n|\r)/);return m?(o.length=0,m[0]):f}if(l.tagName==="ruby")return n(o);if(l.childNodes)return e(o,l),n(o)}for(e(t,a);i=n(t);)for(var s=0;s<i.length;s++)if(r=i.charCodeAt(s),DP(r))return"rtl";return"ltr"}function kP(a){if(typeof a.line=="number"&&(a.snapToLines||a.line>=0&&a.line<=100))return a.line;if(!a.track||!a.track.textTrackList||!a.track.textTrackList.mediaElement)return-1;for(var t=a.track,i=t.textTrackList,r=0,e=0;e<i.length&&i[e]!==t;e++)i[e].mode==="showing"&&r++;return++r*-1}function nc(){}nc.prototype.applyStyles=function(a,t){t=t||this.div;for(var i in a)a.hasOwnProperty(i)&&(t.style[i]=a[i])},nc.prototype.formatStyle=function(a,t){return a===0?0:a+t};function ac(a,t,i){nc.call(this),this.cue=t,this.cueDiv=my(a,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=a.document.createElement("div"),r={direction:LP(this.cueDiv),writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:t.align==="middle"?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var e=0;switch(t.positionAlign){case"start":e=t.position;break;case"center":e=t.position-t.size/2;break;case"end":e=t.position-t.size;break}t.vertical===""?this.applyStyles({left:this.formatStyle(e,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(e,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(n){this.applyStyles({top:this.formatStyle(n.top,"px"),bottom:this.formatStyle(n.bottom,"px"),left:this.formatStyle(n.left,"px"),right:this.formatStyle(n.right,"px"),height:this.formatStyle(n.height,"px"),width:this.formatStyle(n.width,"px")})}}ac.prototype=Zp(nc.prototype),ac.prototype.constructor=ac;function $i(a){var t,i,r,e;if(a.div){i=a.div.offsetHeight,r=a.div.offsetWidth,e=a.div.offsetTop;var n=(n=a.div.childNodes)&&(n=n[0])&&n.getClientRects&&n.getClientRects();a=a.div.getBoundingClientRect(),t=n?Math.max(n[0]&&n[0].height||0,a.height/n.length):0}this.left=a.left,this.right=a.right,this.top=a.top||e,this.height=a.height||i,this.bottom=a.bottom||e+(a.height||i),this.width=a.width||r,this.lineHeight=t!==void 0?t:a.lineHeight}$i.prototype.move=function(a,t){switch(t=t!==void 0?t:this.lineHeight,a){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t;break}},$i.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top},$i.prototype.overlapsAny=function(a){for(var t=0;t<a.length;t++)if(this.overlaps(a[t]))return!0;return!1},$i.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=a.left&&this.right<=a.right},$i.prototype.overlapsOppositeAxis=function(a,t){switch(t){case"+x":return this.left<a.left;case"-x":return this.right>a.right;case"+y":return this.top<a.top;case"-y":return this.bottom>a.bottom}},$i.prototype.intersectPercentage=function(a){var t=Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left)),i=Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top)),r=t*i;return r/(this.height*this.width)},$i.prototype.toCSSCompatValues=function(a){return{top:this.top-a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}},$i.getSimpleBoxPosition=function(a){var t=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,i=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,r=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a;var e={left:a.left,right:a.right,top:a.top||r,height:a.height||t,bottom:a.bottom||r+(a.height||t),width:a.width||i};return e};function RP(a,t,i,r){function e(D,R){for(var H,Z=new $i(D),V=1,W=0;W<R.length;W++){for(;D.overlapsOppositeAxis(i,R[W])||D.within(i)&&D.overlapsAny(r);)D.move(R[W]);if(D.within(i))return D;var te=D.intersectPercentage(i);V>te&&(H=new $i(D),V=te),D=new $i(Z)}return H||Z}var n=new $i(t),s=t.cue,o=kP(s),l=[];if(s.snapToLines){var f;switch(s.vertical){case"":l=["+y","-y"],f="height";break;case"rl":l=["+x","-x"],f="width";break;case"lr":l=["-x","+x"],f="width";break}var m=n.lineHeight,v=m*Math.round(o),y=i[f]+m,E=l[0];Math.abs(v)>y&&(v=v<0?-1:1,v*=Math.ceil(y/m)*m),o<0&&(v+=s.vertical===""?i.height:i.width,l=l.reverse()),n.move(E,v)}else{var I=n.lineHeight/i.height*100;switch(s.lineAlign){case"center":o-=I/2;break;case"end":o-=I;break}switch(s.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")});break}l=["+y","-x","+x","-y"],n=new $i(t)}var O=e(n,l);t.move(O.toCSSCompatValues(i))}function Go(){}Go.StringDecoder=function(){return{decode:function(a){if(!a)return"";if(typeof a!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}},Go.convertCueToDOMTree=function(a,t){return!a||!t?null:my(a,t)};var MP=.05,FP="sans-serif",NP="1.5%";Go.processCues=function(a,t,i){if(!a||!t||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var r=a.document.createElement("div");r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin=NP,i.appendChild(r);function e(m){for(var v=0;v<m.length;v++)if(m[v].hasBeenReset||!m[v].displayState)return!0;return!1}if(!e(t)){for(var n=0;n<t.length;n++)r.appendChild(t[n].displayState);return}var s=[],o=$i.getSimpleBoxPosition(r),l=Math.round(o.height*MP*100)/100,f={font:l+"px "+FP};(function(){for(var m,v,y=0;y<t.length;y++)v=t[y],m=new ac(a,v,f),r.appendChild(m.div),RP(a,m,o,s),v.displayState=m.div,s.push($i.getSimpleBoxPosition(m))})()},Go.Parser=function(a,t,i){i||(i=t,t={}),t||(t={}),this.window=a,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]},Go.Parser.prototype={reportOrThrowError:function(a){if(a instanceof Tr)this.onparsingerror&&this.onparsingerror(a);else throw a},parse:function(a){var t=this;a&&(t.buffer+=t.decoder.decode(a,{stream:!0}));function i(){for(var m=t.buffer,v=0;v<m.length&&m[v]!=="\r"&&m[v]!==`
`;)++v;var y=m.substr(0,v);return m[v]==="\r"&&++v,m[v]===`
`&&++v,t.buffer=m.substr(v),y}function r(m){var v=new Rl;if(Ml(m,function(E,I){switch(E){case"id":v.set(E,I);break;case"width":v.percent(E,I);break;case"lines":v.integer(E,I);break;case"regionanchor":case"viewportanchor":var O=I.split(",");if(O.length!==2)break;var D=new Rl;if(D.percent("x",O[0]),D.percent("y",O[1]),!D.has("x")||!D.has("y"))break;v.set(E+"X",D.get("x")),v.set(E+"Y",D.get("y"));break;case"scroll":v.alt(E,I,["up"]);break}},/=/,/\s/),v.has("id")){var y=new(t.vttjs.VTTRegion||t.window.VTTRegion);y.width=v.get("width",100),y.lines=v.get("lines",3),y.regionAnchorX=v.get("regionanchorX",0),y.regionAnchorY=v.get("regionanchorY",100),y.viewportAnchorX=v.get("viewportanchorX",0),y.viewportAnchorY=v.get("viewportanchorY",100),y.scroll=v.get("scroll",""),t.onregion&&t.onregion(y),t.regionList.push({id:v.get("id"),region:y})}}function e(m){var v=new Rl;Ml(m,function(y,E){switch(y){case"MPEGT":v.integer(y+"S",E);break;case"LOCA":v.set(y+"L",em(E));break}},/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:v.get("MPEGTS"),LOCAL:v.get("LOCAL")})}function n(m){m.match(/X-TIMESTAMP-MAP/)?Ml(m,function(v,y){switch(v){case"X-TIMESTAMP-MAP":e(y);break}},/=/):Ml(m,function(v,y){switch(v){case"Region":r(y);break}},/:/)}try{var s;if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;s=i();var o=s.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Tr(Tr.Errors.BadSignature);t.state="HEADER"}for(var l=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(l?l=!1:s=i(),t.state){case"HEADER":/:/.test(s)?n(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch{t.cue.align="middle"}if(t.state="CUE",s.indexOf("--\x3e")===-1){t.cue.id=s;continue}case"CUE":try{IP(s,t.cue,t.regionList)}catch(m){t.reportOrThrowError(m),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var f=s.indexOf("--\x3e")!==-1;if(!s||f&&(l=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+=`
`),t.cue.text+=s.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":s||(t.state="ID");continue}}}catch(m){t.reportOrThrowError(m),t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var a=this;try{if(a.buffer+=a.decoder.decode(),(a.cue||a.state==="HEADER")&&(a.buffer+=`

`,a.parse()),a.state==="INITIAL")throw new Tr(Tr.Errors.BadSignature)}catch(t){a.reportOrThrowError(t)}return a.onflush&&a.onflush(),this}};var UP=Go,BP="auto",jP={"":1,lr:1,rl:1},VP={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function HP(a){if(typeof a!="string")return!1;var t=jP[a.toLowerCase()];return t?a.toLowerCase():!1}function im(a){if(typeof a!="string")return!1;var t=VP[a.toLowerCase()];return t?a.toLowerCase():!1}function vy(a,t,i){this.hasBeenReset=!1;var r="",e=!1,n=a,s=t,o=i,l=null,f="",m=!0,v="auto",y="start",E="auto",I="auto",O=100,D="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(R){r=""+R}},pauseOnExit:{enumerable:!0,get:function(){return e},set:function(R){e=!!R}},startTime:{enumerable:!0,get:function(){return n},set:function(R){if(typeof R!="number")throw new TypeError("Start time must be set to a number.");n=R,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(R){if(typeof R!="number")throw new TypeError("End time must be set to a number.");s=R,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(R){o=""+R,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(R){l=R,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return f},set:function(R){var H=HP(R);if(H===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");f=H,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return m},set:function(R){m=!!R,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return v},set:function(R){if(typeof R!="number"&&R!==BP)throw new SyntaxError("Line: an invalid number or illegal string was specified.");v=R,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return y},set:function(R){var H=im(R);H?(y=H,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return E},set:function(R){if(R<0||R>100)throw new Error("Position must be between 0 and 100.");E=R,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return I},set:function(R){var H=im(R);H?(I=H,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return O},set:function(R){if(R<0||R>100)throw new Error("Size must be between 0 and 100.");O=R,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return D},set:function(R){var H=im(R);if(!H)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");D=H,this.hasBeenReset=!0}}}),this.displayState=void 0}vy.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var $P=vy,WP={"":!0,up:!0};function qP(a){if(typeof a!="string")return!1;var t=WP[a.toLowerCase()];return t?a.toLowerCase():!1}function Fl(a){return typeof a=="number"&&a>=0&&a<=100}function GP(){var a=100,t=3,i=0,r=100,e=0,n=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(o){if(!Fl(o))throw new Error("Width must be between 0 and 100.");a=o}},lines:{enumerable:!0,get:function(){return t},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");t=o}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(o){if(!Fl(o))throw new Error("RegionAnchorX must be between 0 and 100.");r=o}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(o){if(!Fl(o))throw new Error("RegionAnchorY must be between 0 and 100.");i=o}},viewportAnchorY:{enumerable:!0,get:function(){return n},set:function(o){if(!Fl(o))throw new Error("ViewportAnchorY must be between 0 and 100.");n=o}},viewportAnchorX:{enumerable:!0,get:function(){return e},set:function(o){if(!Fl(o))throw new Error("ViewportAnchorX must be between 0 and 100.");e=o}},scroll:{enumerable:!0,get:function(){return s},set:function(o){var l=qP(o);l===!1?console.warn("Scroll: an invalid or illegal string was specified."):s=l}}})}var zP=GP,ha=F,zs=AP.exports={WebVTT:UP,VTTCue:$P,VTTRegion:zP};ha.vttjs=zs,ha.WebVTT=zs.WebVTT;var KP=zs.VTTCue,XP=zs.VTTRegion,QP=ha.VTTCue,YP=ha.VTTRegion;zs.shim=function(){ha.VTTCue=KP,ha.VTTRegion=XP},zs.restore=function(){ha.VTTCue=QP,ha.VTTRegion=YP},ha.VTTCue||zs.shim();function JP(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Nl(a,t,i){return JP()?Nl=Reflect.construct.bind():Nl=function(e,n,s){var o=[null];o.push.apply(o,n);var l=Function.bind.apply(e,o),f=new l;return s&&qo(f,s.prototype),f},Nl.apply(null,arguments)}function ZP(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&qo(a,t)}var rm={},eO={get exports(){return rm},set exports(a){rm=a}};(function(a,t){(function(i){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,e=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,f,m){if(m=m||{},l=l.trim(),f=f.trim(),!f){if(!m.alwaysNormalize)return l;var v=o.parseURL(l);if(!v)throw new Error("Error trying to parse base URL.");return v.path=o.normalizePath(v.path),o.buildURLFromParts(v)}var y=o.parseURL(f);if(!y)throw new Error("Error trying to parse relative URL.");if(y.scheme)return m.alwaysNormalize?(y.path=o.normalizePath(y.path),o.buildURLFromParts(y)):f;var E=o.parseURL(l);if(!E)throw new Error("Error trying to parse base URL.");if(!E.netLoc&&E.path&&E.path[0]!=="/"){var I=e.exec(E.path);E.netLoc=I[1],E.path=I[2]}E.netLoc&&!E.path&&(E.path="/");var O={scheme:E.scheme,netLoc:y.netLoc,path:null,params:y.params,query:y.query,fragment:y.fragment};if(!y.netLoc&&(O.netLoc=E.netLoc,y.path[0]!=="/"))if(!y.path)O.path=E.path,y.params||(O.params=E.params,y.query||(O.query=E.query));else{var D=E.path,R=D.substring(0,D.lastIndexOf("/")+1)+y.path;O.path=o.normalizePath(R)}return O.path===null&&(O.path=m.alwaysNormalize?o.normalizePath(y.path):y.path),o.buildURLFromParts(O)},parseURL:function(l){var f=r.exec(l);return f?{scheme:f[1]||"",netLoc:f[2]||"",path:f[3]||"",params:f[4]||"",query:f[5]||"",fragment:f[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(n,"");l.length!==(l=l.replace(s,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};a.exports=o})()})(eO);const _y=rm;var yy="http://example.com",Ul=function(t,i){if(/^[a-z]+:/i.test(i))return i;/^data:/.test(t)&&(t=F.location&&F.location.href||"");var r=typeof F.URL=="function",e=/^\/\//.test(t),n=!F.location&&!/\/\//i.test(t);if(r?t=new F.URL(t,F.location||yy):/\/\//i.test(t)||(t=_y.buildAbsoluteURL(F.location&&F.location.href||"",t)),r){var s=new URL(i,t);return n?s.href.slice(yy.length):e?s.href.slice(s.protocol.length):s.href}return _y.buildAbsoluteURL(t,i)},nm=function(){function a(){this.listeners={}}var t=a.prototype;return t.on=function(r,e){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(e)},t.off=function(r,e){if(!this.listeners[r])return!1;var n=this.listeners[r].indexOf(e);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(n,1),n>-1},t.trigger=function(r){var e=this.listeners[r];if(e)if(arguments.length===2)for(var n=e.length,s=0;s<n;++s)e[s].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=e.length,f=0;f<l;++f)e[f].apply(this,o)},t.dispose=function(){this.listeners={}},t.pipe=function(r){this.on("data",function(e){r.push(e)})},a}(),tO=function(t){return F.atob?F.atob(t):Buffer.from(t,"base64").toString("binary")};function Ty(a){for(var t=tO(a),i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}var iO=function(a){Ae(t,a);function t(){var r;return r=a.call(this)||this,r.buffer="",r}var i=t.prototype;return i.push=function(e){var n;for(this.buffer+=e,n=this.buffer.indexOf(`
`);n>-1;n=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,n)),this.buffer=this.buffer.substring(n+1)},t}(nm),rO=String.fromCharCode(9),am=function(t){var i=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),r={};return i[1]&&(r.length=parseInt(i[1],10)),i[2]&&(r.offset=parseInt(i[2],10)),r},nO=function(){var t="[^=]*",i='"[^"]*"|[^,]*',r="(?:"+t+")=(?:"+i+")";return new RegExp("(?:^|,)("+r+")")},sn=function(t){for(var i=t.split(nO()),r={},e=i.length,n;e--;)i[e]!==""&&(n=/([^=]*)=(.*)/.exec(i[e]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),r[n[0]]=n[1]);return r},aO=function(a){Ae(t,a);function t(){var r;return r=a.call(this)||this,r.customParsers=[],r.tagMappers=[],r}var i=t.prototype;return i.push=function(e){var n=this,s,o;if(e=e.trim(),e.length!==0){if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}var l=this.tagMappers.reduce(function(f,m){var v=m(e);return v===e?f:f.concat([v])},[e]);l.forEach(function(f){for(var m=0;m<n.customParsers.length;m++)if(n.customParsers[m].call(n,f))return;if(f.indexOf("#EXT")!==0){n.trigger("data",{type:"comment",text:f.slice(1)});return}if(f=f.replace("\r",""),s=/^#EXTM3U/.exec(f),s){n.trigger("data",{type:"tag",tagType:"m3u"});return}if(s=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(f),s){o={type:"tag",tagType:"inf"},s[1]&&(o.duration=parseFloat(s[1])),s[2]&&(o.title=s[2]),n.trigger("data",o);return}if(s=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(f),s){o={type:"tag",tagType:"targetduration"},s[1]&&(o.duration=parseInt(s[1],10)),n.trigger("data",o);return}if(s=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(f),s){o={type:"tag",tagType:"version"},s[1]&&(o.version=parseInt(s[1],10)),n.trigger("data",o);return}if(s=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(f),s){o={type:"tag",tagType:"media-sequence"},s[1]&&(o.number=parseInt(s[1],10)),n.trigger("data",o);return}if(s=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(f),s){o={type:"tag",tagType:"discontinuity-sequence"},s[1]&&(o.number=parseInt(s[1],10)),n.trigger("data",o);return}if(s=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(f),s){o={type:"tag",tagType:"playlist-type"},s[1]&&(o.playlistType=s[1]),n.trigger("data",o);return}if(s=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(f),s){o=Di(am(s[1]),{type:"tag",tagType:"byterange"}),n.trigger("data",o);return}if(s=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(f),s){o={type:"tag",tagType:"allow-cache"},s[1]&&(o.allowed=!/NO/.test(s[1])),n.trigger("data",o);return}if(s=/^#EXT-X-MAP:?(.*)$/.exec(f),s){if(o={type:"tag",tagType:"map"},s[1]){var v=sn(s[1]);v.URI&&(o.uri=v.URI),v.BYTERANGE&&(o.byterange=am(v.BYTERANGE))}n.trigger("data",o);return}if(s=/^#EXT-X-STREAM-INF:?(.*)$/.exec(f),s){if(o={type:"tag",tagType:"stream-inf"},s[1]){if(o.attributes=sn(s[1]),o.attributes.RESOLUTION){var y=o.attributes.RESOLUTION.split("x"),E={};y[0]&&(E.width=parseInt(y[0],10)),y[1]&&(E.height=parseInt(y[1],10)),o.attributes.RESOLUTION=E}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["FRAME-RATE"]&&(o.attributes["FRAME-RATE"]=parseFloat(o.attributes["FRAME-RATE"])),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}n.trigger("data",o);return}if(s=/^#EXT-X-MEDIA:?(.*)$/.exec(f),s){o={type:"tag",tagType:"media"},s[1]&&(o.attributes=sn(s[1])),n.trigger("data",o);return}if(s=/^#EXT-X-ENDLIST/.exec(f),s){n.trigger("data",{type:"tag",tagType:"endlist"});return}if(s=/^#EXT-X-DISCONTINUITY/.exec(f),s){n.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(s=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(f),s){o={type:"tag",tagType:"program-date-time"},s[1]&&(o.dateTimeString=s[1],o.dateTimeObject=new Date(s[1])),n.trigger("data",o);return}if(s=/^#EXT-X-KEY:?(.*)$/.exec(f),s){o={type:"tag",tagType:"key"},s[1]&&(o.attributes=sn(s[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),n.trigger("data",o);return}if(s=/^#EXT-X-START:?(.*)$/.exec(f),s){o={type:"tag",tagType:"start"},s[1]&&(o.attributes=sn(s[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),n.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(f),s){o={type:"tag",tagType:"cue-out-cont"},s[1]?o.data=s[1]:o.data="",n.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(f),s){o={type:"tag",tagType:"cue-out"},s[1]?o.data=s[1]:o.data="",n.trigger("data",o);return}if(s=/^#EXT-X-CUE-IN:?(.*)?$/.exec(f),s){o={type:"tag",tagType:"cue-in"},s[1]?o.data=s[1]:o.data="",n.trigger("data",o);return}if(s=/^#EXT-X-SKIP:(.*)$/.exec(f),s&&s[1]){o={type:"tag",tagType:"skip"},o.attributes=sn(s[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split(rO)),n.trigger("data",o);return}if(s=/^#EXT-X-PART:(.*)$/.exec(f),s&&s[1]){o={type:"tag",tagType:"part"},o.attributes=sn(s[1]),["DURATION"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=parseFloat(o.attributes[I]))}),["INDEPENDENT","GAP"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=/YES/.test(o.attributes[I]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=am(o.attributes.BYTERANGE)),n.trigger("data",o);return}if(s=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(f),s&&s[1]){o={type:"tag",tagType:"server-control"},o.attributes=sn(s[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=parseFloat(o.attributes[I]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=/YES/.test(o.attributes[I]))}),n.trigger("data",o);return}if(s=/^#EXT-X-PART-INF:(.*)$/.exec(f),s&&s[1]){o={type:"tag",tagType:"part-inf"},o.attributes=sn(s[1]),["PART-TARGET"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=parseFloat(o.attributes[I]))}),n.trigger("data",o);return}if(s=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(f),s&&s[1]){o={type:"tag",tagType:"preload-hint"},o.attributes=sn(s[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(I){if(o.attributes.hasOwnProperty(I)){o.attributes[I]=parseInt(o.attributes[I],10);var O=I==="BYTERANGE-LENGTH"?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[O]=o.attributes[I],delete o.attributes[I]}}),n.trigger("data",o);return}if(s=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(f),s&&s[1]){o={type:"tag",tagType:"rendition-report"},o.attributes=sn(s[1]),["LAST-MSN","LAST-PART"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=parseInt(o.attributes[I],10))}),n.trigger("data",o);return}n.trigger("data",{type:"tag",data:f.slice(4)})})}},i.addParser=function(e){var n=this,s=e.expression,o=e.customType,l=e.dataParser,f=e.segment;typeof l!="function"&&(l=function(v){return v}),this.customParsers.push(function(m){var v=s.exec(m);if(v)return n.trigger("data",{type:"custom",data:l(m),customType:o,segment:f}),!0})},i.addTagMapper=function(e){var n=e.expression,s=e.map,o=function(f){return n.test(f)?s(f):f};this.tagMappers.push(o)},t}(nm),sO=function(t){return t.toLowerCase().replace(/-(\w)/g,function(i){return i[1].toUpperCase()})},zo=function(t){var i={};return Object.keys(t).forEach(function(r){i[sO(r)]=t[r]}),i},sm=function(t){var i=t.serverControl,r=t.targetDuration,e=t.partTargetDuration;if(i){var n="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",l=r&&r*3,f=e&&e*2;r&&!i.hasOwnProperty(s)&&(i[s]=l,this.trigger("info",{message:n+" defaulting HOLD-BACK to targetDuration * 3 ("+l+")."})),l&&i[s]<l&&(this.trigger("warn",{message:n+" clamping HOLD-BACK ("+i[s]+") to targetDuration * 3 ("+l+")"}),i[s]=l),e&&!i.hasOwnProperty(o)&&(i[o]=e*3,this.trigger("info",{message:n+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+i[o]+")."})),e&&i[o]<f&&(this.trigger("warn",{message:n+" clamping PART-HOLD-BACK ("+i[o]+") to partTargetDuration * 2 ("+f+")."}),i[o]=f)}},by=function(a){Ae(t,a);function t(){var r;r=a.call(this)||this,r.lineStream=new iO,r.parseStream=new aO,r.lineStream.pipe(r.parseStream);var e=Ue(r),n=[],s={},o,l,f=!1,m=function(){},v={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},y="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",E=0;r.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var I=0,O=0;return r.on("end",function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&o&&(s.map=o),!s.key&&l&&(s.key=l),!s.timeline&&typeof E=="number"&&(s.timeline=E),r.manifest.preloadSegment=s)}),r.parseStream.on("data",function(D){var R,H;({tag:function(){({version:function(){D.version&&(this.manifest.version=D.version)},"allow-cache":function(){this.manifest.allowCache=D.allowed,"allowed"in D||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var W={};"length"in D&&(s.byterange=W,W.length=D.length,"offset"in D||(D.offset=I)),"offset"in D&&(s.byterange=W,W.offset=D.offset),I=W.offset+W.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),D.duration>0&&(s.duration=D.duration),D.duration===0&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key:function(){if(!D.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(D.attributes.METHOD==="NONE"){l=null;return}if(!D.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(D.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:D.attributes};return}if(D.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:D.attributes.URI};return}if(D.attributes.KEYFORMAT===y){var W=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(W.indexOf(D.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(D.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),D.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(D.attributes.KEYID&&D.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:D.attributes.KEYFORMAT,keyId:D.attributes.KEYID.substring(2)},pssh:Ty(D.attributes.URI.split(",")[1])};return}D.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:D.attributes.METHOD||"AES-128",uri:D.attributes.URI},typeof D.attributes.IV<"u"&&(l.iv=D.attributes.IV)},"media-sequence":function(){if(!isFinite(D.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+D.number});return}this.manifest.mediaSequence=D.number},"discontinuity-sequence":function(){if(!isFinite(D.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+D.number});return}this.manifest.discontinuitySequence=D.number,E=D.number},"playlist-type":function(){if(!/VOD|EVENT/.test(D.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+D.playlist});return}this.manifest.playlistType=D.playlistType},map:function(){o={},D.uri&&(o.uri=D.uri),D.byterange&&(o.byterange=D.byterange),l&&(o.key=l)},"stream-inf":function(){if(this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||v,!D.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}s.attributes||(s.attributes={}),Di(s.attributes,D.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||v,!(D.attributes&&D.attributes.TYPE&&D.attributes["GROUP-ID"]&&D.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var W=this.manifest.mediaGroups[D.attributes.TYPE];W[D.attributes["GROUP-ID"]]=W[D.attributes["GROUP-ID"]]||{},R=W[D.attributes["GROUP-ID"]],H={default:/yes/i.test(D.attributes.DEFAULT)},H.default?H.autoselect=!0:H.autoselect=/yes/i.test(D.attributes.AUTOSELECT),D.attributes.LANGUAGE&&(H.language=D.attributes.LANGUAGE),D.attributes.URI&&(H.uri=D.attributes.URI),D.attributes["INSTREAM-ID"]&&(H.instreamId=D.attributes["INSTREAM-ID"]),D.attributes.CHARACTERISTICS&&(H.characteristics=D.attributes.CHARACTERISTICS),D.attributes.FORCED&&(H.forced=/yes/i.test(D.attributes.FORCED)),R[D.attributes.NAME]=H},discontinuity:function(){E+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=D.dateTimeString,this.manifest.dateTimeObject=D.dateTimeObject),s.dateTimeString=D.dateTimeString,s.dateTimeObject=D.dateTimeObject},targetduration:function(){if(!isFinite(D.duration)||D.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+D.duration});return}this.manifest.targetDuration=D.duration,sm.call(this,this.manifest)},start:function(){if(!D.attributes||isNaN(D.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:D.attributes["TIME-OFFSET"],precise:D.attributes.PRECISE}},"cue-out":function(){s.cueOut=D.data},"cue-out-cont":function(){s.cueOutCont=D.data},"cue-in":function(){s.cueIn=D.data},skip:function(){this.manifest.skip=zo(D.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",D.attributes,["SKIPPED-SEGMENTS"])},part:function(){var W=this;f=!0;var te=this.manifest.segments.length,z=zo(D.attributes);s.parts=s.parts||[],s.parts.push(z),z.byterange&&(z.byterange.hasOwnProperty("offset")||(z.byterange.offset=O),O=z.byterange.offset+z.byterange.length);var q=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+q+" for segment #"+te,D.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(X,j){X.hasOwnProperty("lastPart")||W.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+j+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var W=this.manifest.serverControl=zo(D.attributes);W.hasOwnProperty("canBlockReload")||(W.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),sm.call(this,this.manifest),W.canSkipDateranges&&!W.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var W=this.manifest.segments.length,te=zo(D.attributes),z=te.type&&te.type==="PART";s.preloadHints=s.preloadHints||[],s.preloadHints.push(te),te.byterange&&(te.byterange.hasOwnProperty("offset")||(te.byterange.offset=z?O:0,z&&(O=te.byterange.offset+te.byterange.length)));var q=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+q+" for segment #"+W,D.attributes,["TYPE","URI"]),!!te.type)for(var X=0;X<s.preloadHints.length-1;X++){var j=s.preloadHints[X];j.type&&j.type===te.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+q+" for segment #"+W+" has the same TYPE "+te.type+" as preload hint #"+X})}},"rendition-report":function(){var W=zo(D.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(W);var te=this.manifest.renditionReports.length-1,z=["LAST-MSN","URI"];f&&z.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+te,D.attributes,z)},"part-inf":function(){this.manifest.partInf=zo(D.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",D.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),sm.call(this,this.manifest)}}[D.tagType]||m).call(e)},uri:function(){s.uri=D.uri,n.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),l&&(s.key=l),s.timeline=E,o&&(s.map=o),O=0,s={}},comment:function(){},custom:function(){D.segment?(s.custom=s.custom||{},s.custom[D.customType]=D.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[D.customType]=D.data)}})[D.type].call(e)}),r}var i=t.prototype;return i.warnOnMissingAttributes_=function(e,n,s){var o=[];s.forEach(function(l){n.hasOwnProperty(l)||o.push(l)}),o.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+o.join(", ")})},i.push=function(e){this.lineStream.push(e)},i.end=function(){this.lineStream.push(`
`),this.trigger("end")},i.addParser=function(e){this.parseStream.addParser(e)},i.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(nm),Ks={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},oO=["video","audio","text"],xy=["Video","Audio","Text"],om=function(t){return t&&t.replace(/avc1\.(\d+)\.(\d+)/i,function(i,r,e){var n=("00"+Number(r).toString(16)).slice(-2),s=("00"+Number(e).toString(16)).slice(-2);return"avc1."+n+"00"+s})},oi=function(t){t===void 0&&(t="");var i=t.split(","),r=[];return i.forEach(function(e){e=e.trim();var n;oO.forEach(function(s){var o=Ks[s].exec(e.toLowerCase());if(!(!o||o.length<=1)){n=s;var l=e.substring(0,o[1].length),f=e.replace(l,"");r.push({type:l,details:f,mediaType:s})}}),n||r.push({type:e,details:"",mediaType:"unknown"})}),r},Sy=function(t,i){if(!t.mediaGroups.AUDIO||!i)return null;var r=t.mediaGroups.AUDIO[i];if(!r)return null;for(var e in r){var n=r[e];if(n.default&&n.playlists)return oi(n.playlists[0].attributes.CODECS)}return null},um=function(t){return t===void 0&&(t=""),Ks.audio.test(t.trim().toLowerCase())},uO=function(t){return t===void 0&&(t=""),Ks.text.test(t.trim().toLowerCase())},pa=function(t){if(!(!t||typeof t!="string")){var i=t.toLowerCase().split(",").map(function(n){return om(n.trim())}),r="video";i.length===1&&um(i[0])?r="audio":i.length===1&&uO(i[0])&&(r="application");var e="mp4";return i.every(function(n){return Ks.mp4.test(n)})?e="mp4":i.every(function(n){return Ks.webm.test(n)})?e="webm":i.every(function(n){return Ks.ogg.test(n)})&&(e="ogg"),r+"/"+e+';codecs="'+t+'"'}},ts=function(t){return t===void 0&&(t=""),F.MediaSource&&F.MediaSource.isTypeSupported&&F.MediaSource.isTypeSupported(pa(t))||!1},Ko=function(t){return t===void 0&&(t=""),t.toLowerCase().split(",").every(function(i){i=i.trim();for(var r=0;r<xy.length;r++){var e=xy[r];if(Ks["muxer"+e].test(i))return!0}return!1})},sc="mp4a.40.2",Ey="avc1.4d400d",lO=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,dO=/^application\/dash\+xml/i,oc=function(t){return lO.test(t)?"hls":dO.test(t)?"dash":t==="application/vnd.videojs.vhs+json"?"vhs-json":null},fO=function(t){return t.toString(2).length},cO=function(t){return Math.ceil(fO(t)/8)},lm=function(t){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer},hO=function(t){return lm(t)},$e=function(t){return t instanceof Uint8Array?t:(!Array.isArray(t)&&!hO(t)&&!(t instanceof ArrayBuffer)&&(typeof t!="number"||typeof t=="number"&&t!==t?t=0:t=[t]),new Uint8Array(t&&t.buffer||t,t&&t.byteOffset||0,t&&t.byteLength||0))},bi=F.BigInt||Number,dm=[bi("0x1"),bi("0x100"),bi("0x10000"),bi("0x1000000"),bi("0x100000000"),bi("0x10000000000"),bi("0x1000000000000"),bi("0x100000000000000"),bi("0x10000000000000000")];(function(){var a=new Uint16Array([65484]),t=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);return t[0]===255?"big":t[0]===204?"little":"unknown"})();var pO=function(t,i){var r=i===void 0?{}:i,e=r.signed,n=e===void 0?!1:e,s=r.le,o=s===void 0?!1:s;t=$e(t);var l=o?"reduce":"reduceRight",f=t[l]?t[l]:Array.prototype[l],m=f.call(t,function(y,E,I){var O=o?I:Math.abs(I+1-t.length);return y+bi(E)*dm[O]},bi(0));if(n){var v=dm[t.length]/bi(2)-bi(1);m=bi(m),m>v&&(m-=v,m-=v,m-=bi(2))}return Number(m)},mO=function(t,i){var r=i===void 0?{}:i,e=r.le,n=e===void 0?!1:e;(typeof t!="bigint"&&typeof t!="number"||typeof t=="number"&&t!==t)&&(t=0),t=bi(t);for(var s=cO(t),o=new Uint8Array(new ArrayBuffer(s)),l=0;l<s;l++){var f=n?l:Math.abs(l+1-o.length);o[f]=Number(t/dm[l]&bi(255)),t<0&&(o[f]=Math.abs(~o[f]),o[f]-=l===0?1:2)}return o},fm=function(t,i){if(typeof t!="string"&&t&&typeof t.toString=="function"&&(t=t.toString()),typeof t!="string")return new Uint8Array;i||(t=unescape(encodeURIComponent(t)));for(var r=new Uint8Array(t.length),e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r},wy=function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];if(i=i.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),i.length<=1)return $e(i[0]);var e=i.reduce(function(o,l,f){return o+(l.byteLength||l.length)},0),n=new Uint8Array(e),s=0;return i.forEach(function(o){o=$e(o),n.set(o,s),s+=o.byteLength}),n},Bt=function(t,i,r){var e=r===void 0?{}:r,n=e.offset,s=n===void 0?0:n,o=e.mask,l=o===void 0?[]:o;t=$e(t),i=$e(i);var f=i.every?i.every:Array.prototype.every;return i.length&&t.length-s>=i.length&&f.call(i,function(m,v){var y=l[v]?l[v]&t[s+v]:t[s+v];return m===y})},gO=function(t,i,r){i.forEach(function(e){for(var n in t.mediaGroups[e])for(var s in t.mediaGroups[e][n]){var o=t.mediaGroups[e][n][s];r(o,e,n,s)}})},is={},ma={};function vO(a,t,i){if(i===void 0&&(i=Array.prototype),a&&typeof i.find=="function")return i.find.call(a,t);for(var r=0;r<a.length;r++)if(Object.prototype.hasOwnProperty.call(a,r)){var e=a[r];if(t.call(void 0,e,r,a))return e}}function cm(a,t){return t===void 0&&(t=Object),t&&typeof t.freeze=="function"?t.freeze(a):a}function _O(a,t){if(a===null||typeof a!="object")throw new TypeError("target is not an object");for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}var Cy=cm({HTML:"text/html",isHTML:function(a){return a===Cy.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Ay=cm({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===Ay.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});ma.assign=_O,ma.find=vO,ma.freeze=cm,ma.MIME_TYPE=Cy,ma.NAMESPACE=Ay;var Iy=ma,Bn=Iy.find,Bl=Iy.NAMESPACE;function yO(a){return a!==""}function TO(a){return a?a.split(/[\t\n\f\r ]+/).filter(yO):[]}function bO(a,t){return a.hasOwnProperty(t)||(a[t]=!0),a}function Py(a){if(!a)return[];var t=TO(a);return Object.keys(t.reduce(bO,{}))}function xO(a){return function(t){return a&&a.indexOf(t)!==-1}}function jl(a,t){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}function rr(a,t){var i=a.prototype;if(!(i instanceof t)){let r=function(){};r.prototype=t.prototype,r=new r,jl(i,r),a.prototype=i=r}i.constructor!=a&&(typeof a!="function"&&console.error("unknown Class:"+a),i.constructor=a)}var nr={},on=nr.ELEMENT_NODE=1,Xo=nr.ATTRIBUTE_NODE=2,uc=nr.TEXT_NODE=3,Oy=nr.CDATA_SECTION_NODE=4,Dy=nr.ENTITY_REFERENCE_NODE=5,SO=nr.ENTITY_NODE=6,Ly=nr.PROCESSING_INSTRUCTION_NODE=7,ky=nr.COMMENT_NODE=8,Ry=nr.DOCUMENT_NODE=9,My=nr.DOCUMENT_TYPE_NODE=10,ga=nr.DOCUMENT_FRAGMENT_NODE=11,EO=nr.NOTATION_NODE=12,Li={},fi={};Li.INDEX_SIZE_ERR=(fi[1]="Index size error",1),Li.DOMSTRING_SIZE_ERR=(fi[2]="DOMString size error",2);var ar=Li.HIERARCHY_REQUEST_ERR=(fi[3]="Hierarchy request error",3);Li.WRONG_DOCUMENT_ERR=(fi[4]="Wrong document",4),Li.INVALID_CHARACTER_ERR=(fi[5]="Invalid character",5),Li.NO_DATA_ALLOWED_ERR=(fi[6]="No data allowed",6),Li.NO_MODIFICATION_ALLOWED_ERR=(fi[7]="No modification allowed",7);var Fy=Li.NOT_FOUND_ERR=(fi[8]="Not found",8);Li.NOT_SUPPORTED_ERR=(fi[9]="Not supported",9);var Ny=Li.INUSE_ATTRIBUTE_ERR=(fi[10]="Attribute in use",10);Li.INVALID_STATE_ERR=(fi[11]="Invalid state",11),Li.SYNTAX_ERR=(fi[12]="Syntax error",12),Li.INVALID_MODIFICATION_ERR=(fi[13]="Invalid modification",13),Li.NAMESPACE_ERR=(fi[14]="Invalid namespace",14),Li.INVALID_ACCESS_ERR=(fi[15]="Invalid access",15);function Kt(a,t){if(t instanceof Error)var i=t;else i=this,Error.call(this,fi[a]),this.message=fi[a],Error.captureStackTrace&&Error.captureStackTrace(this,Kt);return i.code=a,t&&(this.message=this.message+": "+t),i}Kt.prototype=Error.prototype,jl(Li,Kt);function va(){}va.prototype={length:0,item:function(a){return this[a]||null},toString:function(a,t){for(var i=[],r=0;r<this.length;r++)Yo(this[r],i,a,t);return i.join("")},filter:function(a){return Array.prototype.filter.call(this,a)},indexOf:function(a){return Array.prototype.indexOf.call(this,a)}};function Qo(a,t){this._node=a,this._refresh=t,hm(this)}function hm(a){var t=a._node._inc||a._node.ownerDocument._inc;if(a._inc!=t){var i=a._refresh(a._node);eT(a,"length",i.length),jl(i,a),a._inc=t}}Qo.prototype.item=function(a){return hm(this),this[a]},rr(Qo,va);function lc(){}function Uy(a,t){for(var i=a.length;i--;)if(a[i]===t)return i}function By(a,t,i,r){if(r?t[Uy(t,r)]=i:t[t.length++]=i,a){i.ownerElement=a;var e=a.ownerDocument;e&&(r&&$y(e,a,r),wO(e,a,i))}}function jy(a,t,i){var r=Uy(t,i);if(r>=0){for(var e=t.length-1;r<e;)t[r]=t[++r];if(t.length=e,a){var n=a.ownerDocument;n&&($y(n,a,i),i.ownerElement=null)}}else throw new Kt(Fy,new Error(a.tagName+"@"+i))}lc.prototype={length:0,item:va.prototype.item,getNamedItem:function(a){for(var t=this.length;t--;){var i=this[t];if(i.nodeName==a)return i}},setNamedItem:function(a){var t=a.ownerElement;if(t&&t!=this._ownerElement)throw new Kt(Ny);var i=this.getNamedItem(a.nodeName);return By(this._ownerElement,this,a,i),i},setNamedItemNS:function(a){var t=a.ownerElement,i;if(t&&t!=this._ownerElement)throw new Kt(Ny);return i=this.getNamedItemNS(a.namespaceURI,a.localName),By(this._ownerElement,this,a,i),i},removeNamedItem:function(a){var t=this.getNamedItem(a);return jy(this._ownerElement,this,t),t},removeNamedItemNS:function(a,t){var i=this.getNamedItemNS(a,t);return jy(this._ownerElement,this,i),i},getNamedItemNS:function(a,t){for(var i=this.length;i--;){var r=this[i];if(r.localName==t&&r.namespaceURI==a)return r}return null}};function Vy(){}Vy.prototype={hasFeature:function(a,t){return!0},createDocument:function(a,t,i){var r=new Hl;if(r.implementation=this,r.childNodes=new va,r.doctype=i||null,i&&r.appendChild(i),t){var e=r.createElementNS(a,t);r.appendChild(e)}return r},createDocumentType:function(a,t,i){var r=new cc;return r.name=a,r.nodeName=a,r.publicId=t||"",r.systemId=i||"",r}};function Pt(){}Pt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(a,t){return dc(this,a,t)},replaceChild:function(a,t){dc(this,a,t,zy),t&&this.removeChild(t)},removeChild:function(a){return Wy(this,a)},appendChild:function(a){return this.insertBefore(a,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(a){return xm(this.ownerDocument||this,this,a)},normalize:function(){for(var a=this.firstChild;a;){var t=a.nextSibling;t&&t.nodeType==uc&&a.nodeType==uc?(this.removeChild(t),a.appendData(t.data)):(a.normalize(),a=t)}},isSupported:function(a,t){return this.ownerDocument.implementation.hasFeature(a,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(a){for(var t=this;t;){var i=t._nsMap;if(i){for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)&&i[r]===a)return r}t=t.nodeType==Xo?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(a){for(var t=this;t;){var i=t._nsMap;if(i&&Object.prototype.hasOwnProperty.call(i,a))return i[a];t=t.nodeType==Xo?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(a){var t=this.lookupPrefix(a);return t==null}};function Hy(a){return a=="<"&&"&lt;"||a==">"&&"&gt;"||a=="&"&&"&amp;"||a=='"'&&"&quot;"||"&#"+a.charCodeAt()+";"}jl(nr,Pt),jl(nr,Pt.prototype);function Vl(a,t){if(t(a))return!0;if(a=a.firstChild)do{if(Vl(a,t))return!0}while(a=a.nextSibling)}function Hl(){this.ownerDocument=this}function wO(a,t,i){a&&a._inc++;var r=i.namespaceURI;r===Bl.XMLNS&&(t._nsMap[i.prefix?i.localName:""]=i.value)}function $y(a,t,i,r){a&&a._inc++;var e=i.namespaceURI;e===Bl.XMLNS&&delete t._nsMap[i.prefix?i.localName:""]}function pm(a,t,i){if(a&&a._inc){a._inc++;var r=t.childNodes;if(i)r[r.length++]=i;else{for(var e=t.firstChild,n=0;e;)r[n++]=e,e=e.nextSibling;r.length=n,delete r[r.length]}}}function Wy(a,t){var i=t.previousSibling,r=t.nextSibling;return i?i.nextSibling=r:a.firstChild=r,r?r.previousSibling=i:a.lastChild=i,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,pm(a.ownerDocument,a),t}function CO(a){return a&&(a.nodeType===Pt.DOCUMENT_NODE||a.nodeType===Pt.DOCUMENT_FRAGMENT_NODE||a.nodeType===Pt.ELEMENT_NODE)}function AO(a){return a&&(jn(a)||mm(a)||_a(a)||a.nodeType===Pt.DOCUMENT_FRAGMENT_NODE||a.nodeType===Pt.COMMENT_NODE||a.nodeType===Pt.PROCESSING_INSTRUCTION_NODE)}function _a(a){return a&&a.nodeType===Pt.DOCUMENT_TYPE_NODE}function jn(a){return a&&a.nodeType===Pt.ELEMENT_NODE}function mm(a){return a&&a.nodeType===Pt.TEXT_NODE}function qy(a,t){var i=a.childNodes||[];if(Bn(i,jn)||_a(t))return!1;var r=Bn(i,_a);return!(t&&r&&i.indexOf(r)>i.indexOf(t))}function Gy(a,t){var i=a.childNodes||[];function r(n){return jn(n)&&n!==t}if(Bn(i,r))return!1;var e=Bn(i,_a);return!(t&&e&&i.indexOf(e)>i.indexOf(t))}function IO(a,t,i){if(!CO(a))throw new Kt(ar,"Unexpected parent node type "+a.nodeType);if(i&&i.parentNode!==a)throw new Kt(Fy,"child not in parent");if(!AO(t)||_a(t)&&a.nodeType!==Pt.DOCUMENT_NODE)throw new Kt(ar,"Unexpected node type "+t.nodeType+" for parent node type "+a.nodeType)}function PO(a,t,i){var r=a.childNodes||[],e=t.childNodes||[];if(t.nodeType===Pt.DOCUMENT_FRAGMENT_NODE){var n=e.filter(jn);if(n.length>1||Bn(e,mm))throw new Kt(ar,"More than one element or text in fragment");if(n.length===1&&!qy(a,i))throw new Kt(ar,"Element in fragment can not be inserted before doctype")}if(jn(t)&&!qy(a,i))throw new Kt(ar,"Only one element can be added and only after doctype");if(_a(t)){if(Bn(r,_a))throw new Kt(ar,"Only one doctype is allowed");var s=Bn(r,jn);if(i&&r.indexOf(s)<r.indexOf(i))throw new Kt(ar,"Doctype can only be inserted before an element");if(!i&&s)throw new Kt(ar,"Doctype can not be appended since element is present")}}function zy(a,t,i){var r=a.childNodes||[],e=t.childNodes||[];if(t.nodeType===Pt.DOCUMENT_FRAGMENT_NODE){var n=e.filter(jn);if(n.length>1||Bn(e,mm))throw new Kt(ar,"More than one element or text in fragment");if(n.length===1&&!Gy(a,i))throw new Kt(ar,"Element in fragment can not be inserted before doctype")}if(jn(t)&&!Gy(a,i))throw new Kt(ar,"Only one element can be added and only after doctype");if(_a(t)){if(Bn(r,function(l){return _a(l)&&l!==i}))throw new Kt(ar,"Only one doctype is allowed");var s=Bn(r,jn);if(i&&r.indexOf(s)<r.indexOf(i))throw new Kt(ar,"Doctype can only be inserted before an element")}}function dc(a,t,i,r){IO(a,t,i),a.nodeType===Pt.DOCUMENT_NODE&&(r||PO)(a,t,i);var e=t.parentNode;if(e&&e.removeChild(t),t.nodeType===ga){var n=t.firstChild;if(n==null)return t;var s=t.lastChild}else n=s=t;var o=i?i.previousSibling:a.lastChild;n.previousSibling=o,s.nextSibling=i,o?o.nextSibling=n:a.firstChild=n,i==null?a.lastChild=s:i.previousSibling=s;do{n.parentNode=a}while(n!==s&&(n=n.nextSibling));return pm(a.ownerDocument||a,a),t.nodeType==ga&&(t.firstChild=t.lastChild=null),t}function OO(a,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=a,t.previousSibling=a.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:a.firstChild=t,a.lastChild=t,pm(a.ownerDocument,a,t),t}Hl.prototype={nodeName:"#document",nodeType:Ry,doctype:null,documentElement:null,_inc:1,insertBefore:function(a,t){if(a.nodeType==ga){for(var i=a.firstChild;i;){var r=i.nextSibling;this.insertBefore(i,t),i=r}return a}return dc(this,a,t),a.ownerDocument=this,this.documentElement===null&&a.nodeType===on&&(this.documentElement=a),a},removeChild:function(a){return this.documentElement==a&&(this.documentElement=null),Wy(this,a)},replaceChild:function(a,t){dc(this,a,t,zy),a.ownerDocument=this,t&&this.removeChild(t),jn(a)&&(this.documentElement=a)},importNode:function(a,t){return Zy(this,a,t)},getElementById:function(a){var t=null;return Vl(this.documentElement,function(i){if(i.nodeType==on&&i.getAttribute("id")==a)return t=i,!0}),t},getElementsByClassName:function(a){var t=Py(a);return new Qo(this,function(i){var r=[];return t.length>0&&Vl(i.documentElement,function(e){if(e!==i&&e.nodeType===on){var n=e.getAttribute("class");if(n){var s=a===n;if(!s){var o=Py(n);s=t.every(xO(o))}s&&r.push(e)}}}),r})},createElement:function(a){var t=new Xs;t.ownerDocument=this,t.nodeName=a,t.tagName=a,t.localName=a,t.childNodes=new va;var i=t.attributes=new lc;return i._ownerElement=t,t},createDocumentFragment:function(){var a=new hc;return a.ownerDocument=this,a.childNodes=new va,a},createTextNode:function(a){var t=new gm;return t.ownerDocument=this,t.appendData(a),t},createComment:function(a){var t=new vm;return t.ownerDocument=this,t.appendData(a),t},createCDATASection:function(a){var t=new _m;return t.ownerDocument=this,t.appendData(a),t},createProcessingInstruction:function(a,t){var i=new Tm;return i.ownerDocument=this,i.tagName=i.target=a,i.nodeValue=i.data=t,i},createAttribute:function(a){var t=new fc;return t.ownerDocument=this,t.name=a,t.nodeName=a,t.localName=a,t.specified=!0,t},createEntityReference:function(a){var t=new ym;return t.ownerDocument=this,t.nodeName=a,t},createElementNS:function(a,t){var i=new Xs,r=t.split(":"),e=i.attributes=new lc;return i.childNodes=new va,i.ownerDocument=this,i.nodeName=t,i.tagName=t,i.namespaceURI=a,r.length==2?(i.prefix=r[0],i.localName=r[1]):i.localName=t,e._ownerElement=i,i},createAttributeNS:function(a,t){var i=new fc,r=t.split(":");return i.ownerDocument=this,i.nodeName=t,i.name=t,i.namespaceURI=a,i.specified=!0,r.length==2?(i.prefix=r[0],i.localName=r[1]):i.localName=t,i}},rr(Hl,Pt);function Xs(){this._nsMap={}}Xs.prototype={nodeType:on,hasAttribute:function(a){return this.getAttributeNode(a)!=null},getAttribute:function(a){var t=this.getAttributeNode(a);return t&&t.value||""},getAttributeNode:function(a){return this.attributes.getNamedItem(a)},setAttribute:function(a,t){var i=this.ownerDocument.createAttribute(a);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},removeAttribute:function(a){var t=this.getAttributeNode(a);t&&this.removeAttributeNode(t)},appendChild:function(a){return a.nodeType===ga?this.insertBefore(a,null):OO(this,a)},setAttributeNode:function(a){return this.attributes.setNamedItem(a)},setAttributeNodeNS:function(a){return this.attributes.setNamedItemNS(a)},removeAttributeNode:function(a){return this.attributes.removeNamedItem(a.nodeName)},removeAttributeNS:function(a,t){var i=this.getAttributeNodeNS(a,t);i&&this.removeAttributeNode(i)},hasAttributeNS:function(a,t){return this.getAttributeNodeNS(a,t)!=null},getAttributeNS:function(a,t){var i=this.getAttributeNodeNS(a,t);return i&&i.value||""},setAttributeNS:function(a,t,i){var r=this.ownerDocument.createAttributeNS(a,t);r.value=r.nodeValue=""+i,this.setAttributeNode(r)},getAttributeNodeNS:function(a,t){return this.attributes.getNamedItemNS(a,t)},getElementsByTagName:function(a){return new Qo(this,function(t){var i=[];return Vl(t,function(r){r!==t&&r.nodeType==on&&(a==="*"||r.tagName==a)&&i.push(r)}),i})},getElementsByTagNameNS:function(a,t){return new Qo(this,function(i){var r=[];return Vl(i,function(e){e!==i&&e.nodeType===on&&(a==="*"||e.namespaceURI===a)&&(t==="*"||e.localName==t)&&r.push(e)}),r})}},Hl.prototype.getElementsByTagName=Xs.prototype.getElementsByTagName,Hl.prototype.getElementsByTagNameNS=Xs.prototype.getElementsByTagNameNS,rr(Xs,Pt);function fc(){}fc.prototype.nodeType=Xo,rr(fc,Pt);function $l(){}$l.prototype={data:"",substringData:function(a,t){return this.data.substring(a,a+t)},appendData:function(a){a=this.data+a,this.nodeValue=this.data=a,this.length=a.length},insertData:function(a,t){this.replaceData(a,0,t)},appendChild:function(a){throw new Error(fi[ar])},deleteData:function(a,t){this.replaceData(a,t,"")},replaceData:function(a,t,i){var r=this.data.substring(0,a),e=this.data.substring(a+t);i=r+i+e,this.nodeValue=this.data=i,this.length=i.length}},rr($l,Pt);function gm(){}gm.prototype={nodeName:"#text",nodeType:uc,splitText:function(a){var t=this.data,i=t.substring(a);t=t.substring(0,a),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}},rr(gm,$l);function vm(){}vm.prototype={nodeName:"#comment",nodeType:ky},rr(vm,$l);function _m(){}_m.prototype={nodeName:"#cdata-section",nodeType:Oy},rr(_m,$l);function cc(){}cc.prototype.nodeType=My,rr(cc,Pt);function Ky(){}Ky.prototype.nodeType=EO,rr(Ky,Pt);function Xy(){}Xy.prototype.nodeType=SO,rr(Xy,Pt);function ym(){}ym.prototype.nodeType=Dy,rr(ym,Pt);function hc(){}hc.prototype.nodeName="#document-fragment",hc.prototype.nodeType=ga,rr(hc,Pt);function Tm(){}Tm.prototype.nodeType=Ly,rr(Tm,Pt);function Qy(){}Qy.prototype.serializeToString=function(a,t,i){return Yy.call(a,t,i)},Pt.prototype.toString=Yy;function Yy(a,t){var i=[],r=this.nodeType==9&&this.documentElement||this,e=r.prefix,n=r.namespaceURI;if(n&&e==null){var e=r.lookupPrefix(n);if(e==null)var s=[{namespace:n,prefix:null}]}return Yo(this,i,a,t,s),i.join("")}function Jy(a,t,i){var r=a.prefix||"",e=a.namespaceURI;if(!e||r==="xml"&&e===Bl.XML||e===Bl.XMLNS)return!1;for(var n=i.length;n--;){var s=i[n];if(s.prefix===r)return s.namespace!==e}return!0}function bm(a,t,i){a.push(" ",t,'="',i.replace(/[<>&"\t\n\r]/g,Hy),'"')}function Yo(a,t,i,r,e){if(e||(e=[]),r)if(a=r(a),a){if(typeof a=="string"){t.push(a);return}}else return;switch(a.nodeType){case on:var n=a.attributes,s=n.length,R=a.firstChild,o=a.tagName;i=Bl.isHTML(a.namespaceURI)||i;var l=o;if(!i&&!a.prefix&&a.namespaceURI){for(var f,m=0;m<n.length;m++)if(n.item(m).name==="xmlns"){f=n.item(m).value;break}if(!f)for(var v=e.length-1;v>=0;v--){var y=e[v];if(y.prefix===""&&y.namespace===a.namespaceURI){f=y.namespace;break}}if(f!==a.namespaceURI)for(var v=e.length-1;v>=0;v--){var y=e[v];if(y.namespace===a.namespaceURI){y.prefix&&(l=y.prefix+":"+o);break}}}t.push("<",l);for(var E=0;E<s;E++){var I=n.item(E);I.prefix=="xmlns"?e.push({prefix:I.localName,namespace:I.value}):I.nodeName=="xmlns"&&e.push({prefix:"",namespace:I.value})}for(var E=0;E<s;E++){var I=n.item(E);if(Jy(I,i,e)){var O=I.prefix||"",D=I.namespaceURI;bm(t,O?"xmlns:"+O:"xmlns",D),e.push({prefix:O,namespace:D})}Yo(I,t,i,r,e)}if(o===l&&Jy(a,i,e)){var O=a.prefix||"",D=a.namespaceURI;bm(t,O?"xmlns:"+O:"xmlns",D),e.push({prefix:O,namespace:D})}if(R||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(t.push(">"),i&&/^script$/i.test(o))for(;R;)R.data?t.push(R.data):Yo(R,t,i,r,e.slice()),R=R.nextSibling;else for(;R;)Yo(R,t,i,r,e.slice()),R=R.nextSibling;t.push("</",l,">")}else t.push("/>");return;case Ry:case ga:for(var R=a.firstChild;R;)Yo(R,t,i,r,e.slice()),R=R.nextSibling;return;case Xo:return bm(t,a.name,a.value);case uc:return t.push(a.data.replace(/[<&>]/g,Hy));case Oy:return t.push("<![CDATA[",a.data,"]]>");case ky:return t.push("\x3c!--",a.data,"--\x3e");case My:var H=a.publicId,Z=a.systemId;if(t.push("<!DOCTYPE ",a.name),H)t.push(" PUBLIC ",H),Z&&Z!="."&&t.push(" ",Z),t.push(">");else if(Z&&Z!=".")t.push(" SYSTEM ",Z,">");else{var V=a.internalSubset;V&&t.push(" [",V,"]"),t.push(">")}return;case Ly:return t.push("<?",a.target," ",a.data,"?>");case Dy:return t.push("&",a.nodeName,";");default:t.push("??",a.nodeName)}}function Zy(a,t,i){var r;switch(t.nodeType){case on:r=t.cloneNode(!1),r.ownerDocument=a;case ga:break;case Xo:i=!0;break}if(r||(r=t.cloneNode(!1)),r.ownerDocument=a,r.parentNode=null,i)for(var e=t.firstChild;e;)r.appendChild(Zy(a,e,i)),e=e.nextSibling;return r}function xm(a,t,i){var r=new t.constructor;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e];typeof n!="object"&&n!=r[e]&&(r[e]=n)}switch(t.childNodes&&(r.childNodes=new va),r.ownerDocument=a,r.nodeType){case on:var s=t.attributes,o=r.attributes=new lc,l=s.length;o._ownerElement=r;for(var f=0;f<l;f++)r.setAttributeNode(xm(a,s.item(f),!0));break;case Xo:i=!0}if(i)for(var m=t.firstChild;m;)r.appendChild(xm(a,m,i)),m=m.nextSibling;return r}function eT(a,t,i){a[t]=i}try{if(Object.defineProperty){let a=function(t){switch(t.nodeType){case on:case ga:var i=[];for(t=t.firstChild;t;)t.nodeType!==7&&t.nodeType!==8&&i.push(a(t)),t=t.nextSibling;return i.join("");default:return t.nodeValue}};Object.defineProperty(Qo.prototype,"length",{get:function(){return hm(this),this.$$length}}),Object.defineProperty(Pt.prototype,"textContent",{get:function(){return a(this)},set:function(t){switch(this.nodeType){case on:case ga:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),eT=function(t,i,r){t["$$"+i]=r}}}catch{}is.DocumentType=cc,is.DOMException=Kt,is.DOMImplementation=Vy,is.Element=Xs,is.Node=Pt,is.NodeList=va,is.XMLSerializer=Qy;var pc={},tT={};(function(a){var t=ma.freeze;a.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),a.HTML_ENTITIES=t({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",times:"",divide:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",euro:"",trade:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:""}),a.entityMap=a.HTML_ENTITIES})(tT);var Sm={},Wl=ma.NAMESPACE,Em=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,iT=new RegExp("[\\-\\.0-9"+Em.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),rT=new RegExp("^"+Em.source+iT.source+"*(?::"+Em.source+iT.source+"*)?$"),ql=0,rs=1,Jo=2,Gl=3,Zo=4,eu=5,zl=6,mc=7;function tu(a,t){this.message=a,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,tu)}tu.prototype=new Error,tu.prototype.name=tu.name;function nT(){}nT.prototype={parse:function(a,t,i){var r=this.domBuilder;r.startDocument(),oT(t,t={}),DO(a,t,i,r,this.errorHandler),r.endDocument()}};function DO(a,t,i,r,e){function n(pe){if(pe>65535){pe-=65536;var ne=55296+(pe>>10),fe=56320+(pe&1023);return String.fromCharCode(ne,fe)}else return String.fromCharCode(pe)}function s(pe){var ne=pe.slice(1,-1);return Object.hasOwnProperty.call(i,ne)?i[ne]:ne.charAt(0)==="#"?n(parseInt(ne.substr(1).replace("x","0x"))):(e.error("entity not found:"+pe),pe)}function o(pe){if(pe>O){var ne=a.substring(O,pe).replace(/&#?\w+;/g,s);y&&l(O),r.characters(ne,0,pe-O),O=pe}}function l(pe,ne){for(;pe>=m&&(ne=v.exec(a));)f=ne.index,m=f+ne[0].length,y.lineNumber++;y.columnNumber=pe-f+1}for(var f=0,m=0,v=/.*(?:\r\n?|\n)|.*$/g,y=r.locator,E=[{currentNSMap:t}],I={},O=0;;){try{var D=a.indexOf("<",O);if(D<0){if(!a.substr(O).match(/^\s*$/)){var R=r.doc,H=R.createTextNode(a.substr(O));R.appendChild(H),r.currentElement=H}return}switch(D>O&&o(D),a.charAt(D+1)){case"/":var oe=a.indexOf(">",D+3),Z=a.substring(D+2,oe).replace(/[ \t\n\r]+$/g,""),V=E.pop();oe<0?(Z=a.substring(D+2).replace(/[\s<].*/,""),e.error("end tag name: "+Z+" is not complete:"+V.tagName),oe=D+1+Z.length):Z.match(/\s</)&&(Z=Z.replace(/[\s<].*/,""),e.error("end tag name: "+Z+" maybe not complete"),oe=D+1+Z.length);var W=V.localNSMap,te=V.tagName==Z,z=te||V.tagName&&V.tagName.toLowerCase()==Z.toLowerCase();if(z){if(r.endElement(V.uri,V.localName,Z),W)for(var q in W)Object.prototype.hasOwnProperty.call(W,q)&&r.endPrefixMapping(q);te||e.fatalError("end tag name: "+Z+" is not match the current start tagName:"+V.tagName)}else E.push(V);oe++;break;case"?":y&&l(D),oe=FO(a,D,r);break;case"!":y&&l(D),oe=MO(a,D,r,e);break;default:y&&l(D);var X=new uT,j=E[E.length-1].currentNSMap,oe=LO(a,D,X,j,s,e),re=X.length;if(!X.closed&&RO(a,oe,X.tagName,I)&&(X.closed=!0,i.nbsp||e.warning("unclosed xml attribute")),y&&re){for(var se=aT(y,{}),he=0;he<re;he++){var le=X[he];l(le.offset),le.locator=aT(y,{})}r.locator=se,sT(X,r,j)&&E.push(X),r.locator=y}else sT(X,r,j)&&E.push(X);Wl.isHTML(X.uri)&&!X.closed?oe=kO(a,oe,X.tagName,s,r):oe++}}catch(pe){if(pe instanceof tu)throw pe;e.error("element parse error: "+pe),oe=-1}oe>O?O=oe:o(Math.max(D,O)+1)}}function aT(a,t){return t.lineNumber=a.lineNumber,t.columnNumber=a.columnNumber,t}function LO(a,t,i,r,e,n){function s(y,E,I){i.attributeNames.hasOwnProperty(y)&&n.fatalError("Attribute "+y+" redefined"),i.addValue(y,E.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,e),I)}for(var o,l,f=++t,m=ql;;){var v=a.charAt(f);switch(v){case"=":if(m===rs)o=a.slice(t,f),m=Gl;else if(m===Jo)m=Gl;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(m===Gl||m===rs)if(m===rs&&(n.warning('attribute value must after "="'),o=a.slice(t,f)),t=f+1,f=a.indexOf(v,t),f>0)l=a.slice(t,f),s(o,l,t-1),m=eu;else throw new Error("attribute value no end '"+v+"' match");else if(m==Zo)l=a.slice(t,f),s(o,l,t),n.warning('attribute "'+o+'" missed start quot('+v+")!!"),t=f+1,m=eu;else throw new Error('attribute value must after "="');break;case"/":switch(m){case ql:i.setTagName(a.slice(t,f));case eu:case zl:case mc:m=mc,i.closed=!0;case Zo:case rs:case Jo:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return n.error("unexpected end of input"),m==ql&&i.setTagName(a.slice(t,f)),f;case">":switch(m){case ql:i.setTagName(a.slice(t,f));case eu:case zl:case mc:break;case Zo:case rs:l=a.slice(t,f),l.slice(-1)==="/"&&(i.closed=!0,l=l.slice(0,-1));case Jo:m===Jo&&(l=o),m==Zo?(n.warning('attribute "'+l+'" missed quot(")!'),s(o,l,t)):((!Wl.isHTML(r[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&n.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),s(l,l,t));break;case Gl:throw new Error("attribute value missed!!")}return f;case"":v=" ";default:if(v<=" ")switch(m){case ql:i.setTagName(a.slice(t,f)),m=zl;break;case rs:o=a.slice(t,f),m=Jo;break;case Zo:var l=a.slice(t,f);n.warning('attribute "'+l+'" missed quot(")!!'),s(o,l,t);case eu:m=zl;break}else switch(m){case Jo:i.tagName,(!Wl.isHTML(r[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&n.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),s(o,o,t),t=f,m=rs;break;case eu:n.warning('attribute space is required"'+o+'"!!');case zl:m=rs,t=f;break;case Gl:m=Zo,t=f;break;case mc:throw new Error("elements closed character '/' and '>' must be connected to")}}f++}}function sT(a,t,i){for(var r=a.tagName,e=null,v=a.length;v--;){var n=a[v],s=n.qName,o=n.value,y=s.indexOf(":");if(y>0)var l=n.prefix=s.slice(0,y),f=s.slice(y+1),m=l==="xmlns"&&f;else f=s,l=null,m=s==="xmlns"&&"";n.localName=f,m!==!1&&(e==null&&(e={},oT(i,i={})),i[m]=e[m]=o,n.uri=Wl.XMLNS,t.startPrefixMapping(m,o))}for(var v=a.length;v--;){n=a[v];var l=n.prefix;l&&(l==="xml"&&(n.uri=Wl.XML),l!=="xmlns"&&(n.uri=i[l||""]))}var y=r.indexOf(":");y>0?(l=a.prefix=r.slice(0,y),f=a.localName=r.slice(y+1)):(l=null,f=a.localName=r);var E=a.uri=i[l||""];if(t.startElement(E,f,r,a),a.closed){if(t.endElement(E,f,r),e)for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.endPrefixMapping(l)}else return a.currentNSMap=i,a.localNSMap=e,!0}function kO(a,t,i,r,e){if(/^(?:script|textarea)$/i.test(i)){var n=a.indexOf("</"+i+">",t),s=a.substring(t+1,n);if(/[&<]/.test(s))return/^script$/i.test(i)?(e.characters(s,0,s.length),n):(s=s.replace(/&#?\w+;/g,r),e.characters(s,0,s.length),n)}return t+1}function RO(a,t,i,r){var e=r[i];return e==null&&(e=a.lastIndexOf("</"+i+">"),e<t&&(e=a.lastIndexOf("</"+i)),r[i]=e),e<t}function oT(a,t){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}function MO(a,t,i,r){var e=a.charAt(t+2);switch(e){case"-":if(a.charAt(t+3)==="-"){var n=a.indexOf("--\x3e",t+4);return n>t?(i.comment(a,t+4,n-t-4),n+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(a.substr(t+3,6)=="CDATA["){var n=a.indexOf("]]>",t+9);return i.startCDATA(),i.characters(a,t+9,n-t-9),i.endCDATA(),n+3}var s=NO(a,t),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var l=s[1][0],f=!1,m=!1;o>3&&(/^public$/i.test(s[2][0])?(f=s[3][0],m=o>4&&s[4][0]):/^system$/i.test(s[2][0])&&(m=s[3][0]));var v=s[o-1];return i.startDTD(l,f,m),i.endDTD(),v.index+v[0].length}}return-1}function FO(a,t,i){var r=a.indexOf("?>",t);if(r){var e=a.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return e?(e[0].length,i.processingInstruction(e[1],e[2]),r+2):-1}return-1}function uT(){this.attributeNames={}}uT.prototype={setTagName:function(a){if(!rT.test(a))throw new Error("invalid tagName:"+a);this.tagName=a},addValue:function(a,t,i){if(!rT.test(a))throw new Error("invalid attribute:"+a);this.attributeNames[a]=this.length,this[this.length++]={qName:a,value:t,offset:i}},length:0,getLocalName:function(a){return this[a].localName},getLocator:function(a){return this[a].locator},getQName:function(a){return this[a].qName},getURI:function(a){return this[a].uri},getValue:function(a){return this[a].value}};function NO(a,t){var i,r=[],e=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(e.lastIndex=t,e.exec(a);i=e.exec(a);)if(r.push(i),i[1])return r}Sm.XMLReader=nT,Sm.ParseError=tu;var UO=ma,BO=is,lT=tT,dT=Sm,jO=BO.DOMImplementation,fT=UO.NAMESPACE,VO=dT.ParseError,HO=dT.XMLReader;function cT(a){return a.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function hT(a){this.options=a||{locator:{}}}hT.prototype.parseFromString=function(a,t){var i=this.options,r=new HO,e=i.domBuilder||new Kl,n=i.errorHandler,s=i.locator,o=i.xmlns||{},l=/\/x?html?$/.test(t),f=l?lT.HTML_ENTITIES:lT.XML_ENTITIES;s&&e.setDocumentLocator(s),r.errorHandler=$O(n,e,s),r.domBuilder=i.domBuilder||e,l&&(o[""]=fT.HTML),o.xml=o.xml||fT.XML;var m=i.normalizeLineEndings||cT;return a&&typeof a=="string"?r.parse(m(a),o,f):r.errorHandler.error("invalid doc source"),e.doc};function $O(a,t,i){if(!a){if(t instanceof Kl)return t;a=t}var r={},e=a instanceof Function;i=i||{};function n(s){var o=a[s];!o&&e&&(o=a.length==2?function(l){a(s,l)}:a),r[s]=o&&function(l){o("[xmldom "+s+"]\t"+l+wm(i))}||function(){}}return n("warning"),n("error"),n("fatalError"),r}function Kl(){this.cdata=!1}function iu(a,t){t.lineNumber=a.lineNumber,t.columnNumber=a.columnNumber}Kl.prototype={startDocument:function(){this.doc=(new jO).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(a,t,i,r){var e=this.doc,n=e.createElementNS(a,i||t),s=r.length;gc(this,n),this.currentElement=n,this.locator&&iu(this.locator,n);for(var o=0;o<s;o++){var a=r.getURI(o),l=r.getValue(o),i=r.getQName(o),f=e.createAttributeNS(a,i);this.locator&&iu(r.getLocator(o),f),f.value=f.nodeValue=l,n.setAttributeNode(f)}},endElement:function(a,t,i){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(a,t){},endPrefixMapping:function(a){},processingInstruction:function(a,t){var i=this.doc.createProcessingInstruction(a,t);this.locator&&iu(this.locator,i),gc(this,i)},ignorableWhitespace:function(a,t,i){},characters:function(a,t,i){if(a=pT.apply(this,arguments),a){if(this.cdata)var r=this.doc.createCDATASection(a);else var r=this.doc.createTextNode(a);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(a)&&this.doc.appendChild(r),this.locator&&iu(this.locator,r)}},skippedEntity:function(a){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(a){(this.locator=a)&&(a.lineNumber=0)},comment:function(a,t,i){a=pT.apply(this,arguments);var r=this.doc.createComment(a);this.locator&&iu(this.locator,r),gc(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(a,t,i){var r=this.doc.implementation;if(r&&r.createDocumentType){var e=r.createDocumentType(a,t,i);this.locator&&iu(this.locator,e),gc(this,e),this.doc.doctype=e}},warning:function(a){console.warn("[xmldom warning]\t"+a,wm(this.locator))},error:function(a){console.error("[xmldom error]\t"+a,wm(this.locator))},fatalError:function(a){throw new VO(a,this.locator)}};function wm(a){if(a)return`
@`+(a.systemId||"")+"#[line:"+a.lineNumber+",col:"+a.columnNumber+"]"}function pT(a,t,i){return typeof a=="string"?a.substr(t,i):a.length>=t+i||t?new java.lang.String(a,t,i)+"":a}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(a){Kl.prototype[a]=function(){return null}});function gc(a,t){a.currentElement?a.currentElement.appendChild(t):a.doc.appendChild(t)}pc.__DOMHandler=Kl,pc.normalizeLineEndings=cT,pc.DOMParser=hT;var WO=pc.DOMParser;var mT=function(t){return!!t&&typeof t=="object"},Wi=function a(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return i.reduce(function(e,n){return typeof n!="object"||Object.keys(n).forEach(function(s){Array.isArray(e[s])&&Array.isArray(n[s])?e[s]=e[s].concat(n[s]):mT(e[s])&&mT(n[s])?e[s]=a(e[s],n[s]):e[s]=n[s]}),e},{})},gT=function(t){return Object.keys(t).map(function(i){return t[i]})},qO=function(t,i){for(var r=[],e=t;e<i;e++)r.push(e);return r},vc=function(t){return t.reduce(function(i,r){return i.concat(r)},[])},vT=function(t){if(!t.length)return[];for(var i=[],r=0;r<t.length;r++)i.push(t[r]);return i},GO=function(t,i){return t.reduce(function(r,e,n){return e[i]&&r.push(n),r},[])},Cm=function(t,i){for(var r=0;r<t.length;r++)if(i(t[r]))return r;return-1},zO=function(t,i){return gT(t.reduce(function(r,e){return e.forEach(function(n){r[i(n)]=n}),r},{}))},ru={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},Xl=function(t){var i=t.baseUrl,r=i===void 0?"":i,e=t.source,n=e===void 0?"":e,s=t.range,o=s===void 0?"":s,l=t.indexRange,f=l===void 0?"":l,m={uri:n,resolvedUri:Ul(r||"",n)};if(o||f){var v=o||f,y=v.split("-"),E=F.BigInt?F.BigInt(y[0]):parseInt(y[0],10),I=F.BigInt?F.BigInt(y[1]):parseInt(y[1],10);E<Number.MAX_SAFE_INTEGER&&typeof E=="bigint"&&(E=Number(E)),I<Number.MAX_SAFE_INTEGER&&typeof I=="bigint"&&(I=Number(I));var O;typeof I=="bigint"||typeof E=="bigint"?O=F.BigInt(I)-F.BigInt(E)+F.BigInt(1):O=I-E+1,typeof O=="bigint"&&O<Number.MAX_SAFE_INTEGER&&(O=Number(O)),m.byterange={length:O,offset:E}}return m},KO=function(t){var i;return typeof t.offset=="bigint"||typeof t.length=="bigint"?i=F.BigInt(t.offset)+F.BigInt(t.length)-F.BigInt(1):i=t.offset+t.length-1,t.offset+"-"+i},_T=function(t){return t&&typeof t!="number"&&(t=parseInt(t,10)),isNaN(t)?null:t},XO={static:function(t){var i=t.duration,r=t.timescale,e=r===void 0?1:r,n=t.sourceDuration,s=t.periodDuration,o=_T(t.endNumber),l=i/e;return typeof o=="number"?{start:0,end:o}:typeof s=="number"?{start:0,end:s/l}:{start:0,end:n/l}},dynamic:function(t){var i=t.NOW,r=t.clientOffset,e=t.availabilityStartTime,n=t.timescale,s=n===void 0?1:n,o=t.duration,l=t.periodStart,f=l===void 0?0:l,m=t.minimumUpdatePeriod,v=m===void 0?0:m,y=t.timeShiftBufferDepth,E=y===void 0?1/0:y,I=_T(t.endNumber),O=(i+r)/1e3,D=e+f,R=O+v,H=R-D,Z=Math.ceil(H*s/o),V=Math.floor((O-D-E)*s/o),W=Math.floor((O-D)*s/o);return{start:Math.max(0,V),end:typeof I=="number"?I:Math.min(Z,W)}}},QO=function(t){return function(i){var r=t.duration,e=t.timescale,n=e===void 0?1:e,s=t.periodStart,o=t.startNumber,l=o===void 0?1:o;return{number:l+i,duration:r/n,timeline:s,time:i*r}}},Am=function(t){var i=t.type,r=t.duration,e=t.timescale,n=e===void 0?1:e,s=t.periodDuration,o=t.sourceDuration,l=XO[i](t),f=l.start,m=l.end,v=qO(f,m).map(QO(t));if(i==="static"){var y=v.length-1,E=typeof s=="number"?s:o;v[y].duration=E-r/n*y}return v},yT=function(t){var i=t.baseUrl,r=t.initialization,e=r===void 0?{}:r,n=t.sourceDuration,s=t.indexRange,o=s===void 0?"":s,l=t.periodStart,f=t.presentationTime,m=t.number,v=m===void 0?0:m,y=t.duration;if(!i)throw new Error(ru.NO_BASE_URL);var E=Xl({baseUrl:i,source:e.sourceURL,range:e.range}),I=Xl({baseUrl:i,source:i,indexRange:o});if(I.map=E,y){var O=Am(t);O.length&&(I.duration=O[0].duration,I.timeline=O[0].timeline)}else n&&(I.duration=n,I.timeline=l);return I.presentationTime=f||l,I.number=v,[I]},Ql=function(t,i,r){var e=t.sidx.map?t.sidx.map:null,n=t.sidx.duration,s=t.timeline||0,o=t.sidx.byterange,l=o.offset+o.length,f=i.timescale,m=i.references.filter(function(X){return X.referenceType!==1}),v=[],y=t.endList?"static":"dynamic",E=t.sidx.timeline,I=E,O=t.mediaSequence||0,D;typeof i.firstOffset=="bigint"?D=F.BigInt(l)+i.firstOffset:D=l+i.firstOffset;for(var R=0;R<m.length;R++){var H=i.references[R],Z=H.referencedSize,V=H.subsegmentDuration,W=void 0;typeof D=="bigint"?W=D+F.BigInt(Z)-F.BigInt(1):W=D+Z-1;var te=D+"-"+W,z={baseUrl:r,timescale:f,timeline:s,periodStart:E,presentationTime:I,number:O,duration:V,sourceDuration:n,indexRange:te,type:y},q=yT(z)[0];e&&(q.map=e),v.push(q),typeof D=="bigint"?D+=F.BigInt(Z):D+=Z,I+=V/f,O++}return t.segments=v,t},YO=["AUDIO","SUBTITLES"],JO=1/60,TT=function(t){return zO(t,function(i){var r=i.timeline;return r}).sort(function(i,r){return i.timeline>r.timeline?1:-1})},ZO=function(t,i){for(var r=0;r<t.length;r++)if(t[r].attributes.NAME===i)return t[r];return null},bT=function(t){var i=[];return gO(t,YO,function(r,e,n,s){i=i.concat(r.playlists||[])}),i},xT=function(t){var i=t.playlist,r=t.mediaSequence;i.mediaSequence=r,i.segments.forEach(function(e,n){e.number=i.mediaSequence+n})},eD=function(t){var i=t.oldPlaylists,r=t.newPlaylists,e=t.timelineStarts;r.forEach(function(n){n.discontinuitySequence=Cm(e,function(m){var v=m.timeline;return v===n.timeline});var s=ZO(i,n.attributes.NAME);if(s&&!n.sidx){var o=n.segments[0],l=Cm(s.segments,function(m){return Math.abs(m.presentationTime-o.presentationTime)<JO});if(l===-1){xT({playlist:n,mediaSequence:s.mediaSequence+s.segments.length}),n.segments[0].discontinuity=!0,n.discontinuityStarts.unshift(0),(!s.segments.length&&n.timeline>s.timeline||s.segments.length&&n.timeline>s.segments[s.segments.length-1].timeline)&&n.discontinuitySequence--;return}var f=s.segments[l];f.discontinuity&&!o.discontinuity&&(o.discontinuity=!0,n.discontinuityStarts.unshift(0),n.discontinuitySequence--),xT({playlist:n,mediaSequence:s.segments[l].number})}})},tD=function(t){var i=t.oldManifest,r=t.newManifest,e=i.playlists.concat(bT(i)),n=r.playlists.concat(bT(r));return r.timelineStarts=TT([i.timelineStarts,r.timelineStarts]),eD({oldPlaylists:e,newPlaylists:n,timelineStarts:r.timelineStarts}),r},Qs=function(t){return t&&t.uri+"-"+KO(t.byterange)},Im=function(t){var i=gT(t.reduce(function(r,e){var n=e.attributes.id+(e.attributes.lang||"");if(!r[n])r[n]=e,r[n].attributes.timelineStarts=[];else{if(e.segments){var s;e.segments[0]&&(e.segments[0].discontinuity=!0),(s=r[n].segments).push.apply(s,e.segments)}e.attributes.contentProtection&&(r[n].attributes.contentProtection=e.attributes.contentProtection)}return r[n].attributes.timelineStarts.push({start:e.attributes.periodStart,timeline:e.attributes.periodStart}),r},{}));return i.map(function(r){return r.discontinuityStarts=GO(r.segments||[],"discontinuity"),r})},Pm=function(t,i){var r=Qs(t.sidx),e=r&&i[r]&&i[r].sidx;return e&&Ql(t,e,t.sidx.resolvedUri),t},iD=function(t,i){if(i===void 0&&(i={}),!Object.keys(i).length)return t;for(var r in t)t[r]=Pm(t[r],i);return t},rD=function(t,i){var r,e=t.attributes,n=t.segments,s=t.sidx,o=t.mediaSequence,l=t.discontinuitySequence,f=t.discontinuityStarts,m={attributes:(r={NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs},r["PROGRAM-ID"]=1,r),uri:"",endList:e.type==="static",timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuitySequence:l,discontinuityStarts:f,timelineStarts:e.timelineStarts,mediaSequence:o,segments:n};return e.contentProtection&&(m.contentProtection=e.contentProtection),s&&(m.sidx=s),i&&(m.attributes.AUDIO="audio",m.attributes.SUBTITLES="subs"),m},nD=function(t){var i,r=t.attributes,e=t.segments,n=t.mediaSequence,s=t.discontinuityStarts,o=t.discontinuitySequence;typeof e>"u"&&(e=[{uri:r.baseUrl,timeline:r.periodStart,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration);var l=(i={NAME:r.id,BANDWIDTH:r.bandwidth},i["PROGRAM-ID"]=1,i);return r.codecs&&(l.CODECS=r.codecs),{attributes:l,uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,timelineStarts:r.timelineStarts,discontinuityStarts:s,discontinuitySequence:o,mediaSequence:n,segments:e}},aD=function(t,i,r){i===void 0&&(i={}),r===void 0&&(r=!1);var e,n=t.reduce(function(o,l){var f=l.attributes.role&&l.attributes.role.value||"",m=l.attributes.lang||"",v=l.attributes.label||"main";if(m&&!l.attributes.label){var y=f?" ("+f+")":"";v=""+l.attributes.lang+y}o[v]||(o[v]={language:m,autoselect:!0,default:f==="main",playlists:[],uri:""});var E=Pm(rD(l,r),i);return o[v].playlists.push(E),typeof e>"u"&&f==="main"&&(e=l,e.default=!0),o},{});if(!e){var s=Object.keys(n)[0];n[s].default=!0}return n},sD=function(t,i){return i===void 0&&(i={}),t.reduce(function(r,e){var n=e.attributes.lang||"text";return r[n]||(r[n]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),r[n].playlists.push(Pm(nD(e),i)),r},{})},oD=function(t){return t.reduce(function(i,r){return r&&r.forEach(function(e){var n=e.channel,s=e.language;i[s]={autoselect:!1,default:!1,instreamId:n,language:s},e.hasOwnProperty("aspectRatio")&&(i[s].aspectRatio=e.aspectRatio),e.hasOwnProperty("easyReader")&&(i[s].easyReader=e.easyReader),e.hasOwnProperty("3D")&&(i[s]["3D"]=e["3D"])}),i},{})},uD=function(t){var i,r=t.attributes,e=t.segments,n=t.sidx,s=t.discontinuityStarts,o={attributes:(i={NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:"",targetDuration:r.duration,discontinuityStarts:s,timelineStarts:r.timelineStarts,segments:e};return r.frameRate&&(o.attributes["FRAME-RATE"]=r.frameRate),r.contentProtection&&(o.contentProtection=r.contentProtection),n&&(o.sidx=n),o},lD=function(t){var i=t.attributes;return i.mimeType==="video/mp4"||i.mimeType==="video/webm"||i.contentType==="video"},dD=function(t){var i=t.attributes;return i.mimeType==="audio/mp4"||i.mimeType==="audio/webm"||i.contentType==="audio"},fD=function(t){var i=t.attributes;return i.mimeType==="text/vtt"||i.contentType==="text"},cD=function(t,i){t.forEach(function(r){r.mediaSequence=0,r.discontinuitySequence=Cm(i,function(e){var n=e.timeline;return n===r.timeline}),r.segments&&r.segments.forEach(function(e,n){e.number=n})})},ST=function(t){return t?Object.keys(t).reduce(function(i,r){var e=t[r];return i.concat(e.playlists)},[]):[]},hD=function(t){var i,r=t.dashPlaylists,e=t.locations,n=t.sidxMapping,s=n===void 0?{}:n,o=t.previousManifest;if(!r.length)return{};var l=r[0].attributes,f=l.sourceDuration,m=l.type,v=l.suggestedPresentationDelay,y=l.minimumUpdatePeriod,E=Im(r.filter(lD)).map(uD),I=Im(r.filter(dD)),O=Im(r.filter(fD)),D=r.map(function(z){return z.attributes.captionServices}).filter(Boolean),R={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(i={AUDIO:{},VIDEO:{}},i["CLOSED-CAPTIONS"]={},i.SUBTITLES={},i),uri:"",duration:f,playlists:iD(E,s)};y>=0&&(R.minimumUpdatePeriod=y*1e3),e&&(R.locations=e),m==="dynamic"&&(R.suggestedPresentationDelay=v);var H=R.playlists.length===0,Z=I.length?aD(I,s,H):null,V=O.length?sD(O,s):null,W=E.concat(ST(Z),ST(V)),te=W.map(function(z){var q=z.timelineStarts;return q});return R.timelineStarts=TT(te),cD(W,R.timelineStarts),Z&&(R.mediaGroups.AUDIO.audio=Z),V&&(R.mediaGroups.SUBTITLES.subs=V),D.length&&(R.mediaGroups["CLOSED-CAPTIONS"].cc=oD(D)),o?tD({oldManifest:o,newManifest:R}):R},pD=function(t,i,r){var e=t.NOW,n=t.clientOffset,s=t.availabilityStartTime,o=t.timescale,l=o===void 0?1:o,f=t.periodStart,m=f===void 0?0:f,v=t.minimumUpdatePeriod,y=v===void 0?0:v,E=(e+n)/1e3,I=s+m,O=E+y,D=O-I;return Math.ceil((D*l-i)/r)},ET=function(t,i){for(var r=t.type,e=t.minimumUpdatePeriod,n=e===void 0?0:e,s=t.media,o=s===void 0?"":s,l=t.sourceDuration,f=t.timescale,m=f===void 0?1:f,v=t.startNumber,y=v===void 0?1:v,E=t.periodStart,I=[],O=-1,D=0;D<i.length;D++){var R=i[D],H=R.d,Z=R.r||0,V=R.t||0;O<0&&(O=V),V&&V>O&&(O=V);var W=void 0;if(Z<0){var te=D+1;te===i.length?r==="dynamic"&&n>0&&o.indexOf("$Number$")>0?W=pD(t,O,H):W=(l*m-O)/H:W=(i[te].t-O)/H}else W=Z+1;for(var z=y+I.length+W,q=y+I.length;q<z;)I.push({number:q,duration:H/m,time:O,timeline:E}),O+=H,q++}return I},mD=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,gD=function(t){return function(i,r,e,n){if(i==="$$")return"$";if(typeof t[r]>"u")return i;var s=""+t[r];return r==="RepresentationID"||(e?n=parseInt(n,10):n=1,s.length>=n)?s:""+new Array(n-s.length+1).join("0")+s}},wT=function(t,i){return t.replace(mD,gD(i))},vD=function(t,i){return!t.duration&&!i?[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]:t.duration?Am(t):ET(t,i)},_D=function(t,i){var r={RepresentationID:t.id,Bandwidth:t.bandwidth||0},e=t.initialization,n=e===void 0?{sourceURL:"",range:""}:e,s=Xl({baseUrl:t.baseUrl,source:wT(n.sourceURL,r),range:n.range}),o=vD(t,i);return o.map(function(l){r.Number=l.number,r.Time=l.time;var f=wT(t.media||"",r),m=t.timescale||1,v=t.presentationTimeOffset||0,y=t.periodStart+(l.time-v)/m,E={uri:f,timeline:l.timeline,duration:l.duration,resolvedUri:Ul(t.baseUrl||"",f),map:s,number:l.number,presentationTime:y};return E})},yD=function(t,i){var r=t.baseUrl,e=t.initialization,n=e===void 0?{}:e,s=Xl({baseUrl:r,source:n.sourceURL,range:n.range}),o=Xl({baseUrl:r,source:i.media,range:i.mediaRange});return o.map=s,o},TD=function(t,i){var r=t.duration,e=t.segmentUrls,n=e===void 0?[]:e,s=t.periodStart;if(!r&&!i||r&&i)throw new Error(ru.SEGMENT_TIME_UNSPECIFIED);var o=n.map(function(m){return yD(t,m)}),l;r&&(l=Am(t)),i&&(l=ET(t,i));var f=l.map(function(m,v){if(o[v]){var y=o[v],E=t.timescale||1,I=t.presentationTimeOffset||0;return y.timeline=m.timeline,y.duration=m.duration,y.number=m.number,y.presentationTime=s+(m.time-I)/E,y}}).filter(function(m){return m});return f},bD=function(t){var i=t.attributes,r=t.segmentInfo,e,n;r.template?(n=_D,e=Wi(i,r.template)):r.base?(n=yT,e=Wi(i,r.base)):r.list&&(n=TD,e=Wi(i,r.list));var s={attributes:i};if(!n)return s;var o=n(e,r.segmentTimeline);if(e.duration){var l=e,f=l.duration,m=l.timescale,v=m===void 0?1:m;e.duration=f/v}else o.length?e.duration=o.reduce(function(y,E){return Math.max(y,Math.ceil(E.duration))},0):e.duration=0;return s.attributes=e,s.segments=o,r.base&&e.indexRange&&(s.sidx=o[0],s.segments=[]),s},xD=function(t){return t.map(bD)},Xt=function(t,i){return vT(t.childNodes).filter(function(r){var e=r.tagName;return e===i})},Om=function(t){return t.textContent.trim()},SD=function(t){return parseFloat(t.split("/").reduce(function(i,r){return i/r}))},nu=function(t){var i=31536e3,r=30*24*60*60,e=24*60*60,n=60*60,s=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,l=o.exec(t);if(!l)return 0;var f=l.slice(1),m=f[0],v=f[1],y=f[2],E=f[3],I=f[4],O=f[5];return parseFloat(m||0)*i+parseFloat(v||0)*r+parseFloat(y||0)*e+parseFloat(E||0)*n+parseFloat(I||0)*s+parseFloat(O||0)},ED=function(t){var i=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return i.test(t)&&(t+="Z"),Date.parse(t)},CT={mediaPresentationDuration:function(t){return nu(t)},availabilityStartTime:function(t){return ED(t)/1e3},minimumUpdatePeriod:function(t){return nu(t)},suggestedPresentationDelay:function(t){return nu(t)},type:function(t){return t},timeShiftBufferDepth:function(t){return nu(t)},start:function(t){return nu(t)},width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},frameRate:function(t){return SD(t)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},presentationTimeOffset:function(t){return parseInt(t,10)},duration:function(t){var i=parseInt(t,10);return isNaN(i)?nu(t):i},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}},ki=function(t){return t&&t.attributes?vT(t.attributes).reduce(function(i,r){var e=CT[r.name]||CT.DEFAULT;return i[r.name]=e(r.value),i},{}):{}},wD={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},_c=function(t,i){return i.length?vc(t.map(function(r){return i.map(function(e){return Ul(r,Om(e))})})):t},Dm=function(t){var i=Xt(t,"SegmentTemplate")[0],r=Xt(t,"SegmentList")[0],e=r&&Xt(r,"SegmentURL").map(function(y){return Wi({tag:"SegmentURL"},ki(y))}),n=Xt(t,"SegmentBase")[0],s=r||i,o=s&&Xt(s,"SegmentTimeline")[0],l=r||n||i,f=l&&Xt(l,"Initialization")[0],m=i&&ki(i);m&&f?m.initialization=f&&ki(f):m&&m.initialization&&(m.initialization={sourceURL:m.initialization});var v={template:m,segmentTimeline:o&&Xt(o,"S").map(function(y){return ki(y)}),list:r&&Wi(ki(r),{segmentUrls:e,initialization:ki(f)}),base:n&&Wi(ki(n),{initialization:ki(f)})};return Object.keys(v).forEach(function(y){v[y]||delete v[y]}),v},CD=function(t,i,r){return function(e){var n=Xt(e,"BaseURL"),s=_c(i,n),o=Wi(t,ki(e)),l=Dm(e);return s.map(function(f){return{segmentInfo:Wi(r,l),attributes:Wi(o,{baseUrl:f})}})}},AD=function(t){return t.reduce(function(i,r){var e=ki(r);e.schemeIdUri&&(e.schemeIdUri=e.schemeIdUri.toLowerCase());var n=wD[e.schemeIdUri];if(n){i[n]={attributes:e};var s=Xt(r,"cenc:pssh")[0];if(s){var o=Om(s);i[n].pssh=o&&Ty(o)}}return i},{})},ID=function(t){if(t.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var i=typeof t.value!="string"?[]:t.value.split(";");return i.map(function(e){var n,s;if(s=e,/^CC\d=/.test(e)){var o=e.split("=");n=o[0],s=o[1]}else/^CC\d$/.test(e)&&(n=e);return{channel:n,language:s}})}else if(t.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var r=typeof t.value!="string"?[]:t.value.split(";");return r.map(function(e){var n={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var s=e.split("="),o=s[0],l=s[1],f=l===void 0?"":l;n.channel=o,n.language=e,f.split(",").forEach(function(m){var v=m.split(":"),y=v[0],E=v[1];y==="lang"?n.language=E:y==="er"?n.easyReader=Number(E):y==="war"?n.aspectRatio=Number(E):y==="3D"&&(n["3D"]=Number(E))})}else n.language=e;return n.channel&&(n.channel="SERVICE"+n.channel),n})}},PD=function(t,i,r){return function(e){var n=ki(e),s=_c(i,Xt(e,"BaseURL")),o=Xt(e,"Role")[0],l={role:ki(o)},f=Wi(t,n,l),m=Xt(e,"Accessibility")[0],v=ID(ki(m));v&&(f=Wi(f,{captionServices:v}));var y=Xt(e,"Label")[0];if(y&&y.childNodes.length){var E=y.childNodes[0].nodeValue.trim();f=Wi(f,{label:E})}var I=AD(Xt(e,"ContentProtection"));Object.keys(I).length&&(f=Wi(f,{contentProtection:I}));var O=Dm(e),D=Xt(e,"Representation"),R=Wi(r,O);return vc(D.map(CD(f,s,R)))}},OD=function(t,i){return function(r,e){var n=_c(i,Xt(r.node,"BaseURL")),s=Wi(t,{periodStart:r.attributes.start});typeof r.attributes.duration=="number"&&(s.periodDuration=r.attributes.duration);var o=Xt(r.node,"AdaptationSet"),l=Dm(r.node);return vc(o.map(PD(s,n,l)))}},DD=function(t){var i=t.attributes,r=t.priorPeriodAttributes,e=t.mpdType;return typeof i.start=="number"?i.start:r&&typeof r.start=="number"&&typeof r.duration=="number"?r.start+r.duration:!r&&e==="static"?0:null},LD=function(t,i){i===void 0&&(i={});var r=i,e=r.manifestUri,n=e===void 0?"":e,s=r.NOW,o=s===void 0?Date.now():s,l=r.clientOffset,f=l===void 0?0:l,m=Xt(t,"Period");if(!m.length)throw new Error(ru.INVALID_NUMBER_OF_PERIOD);var v=Xt(t,"Location"),y=ki(t),E=_c([n],Xt(t,"BaseURL"));y.type=y.type||"static",y.sourceDuration=y.mediaPresentationDuration||0,y.NOW=o,y.clientOffset=f,v.length&&(y.locations=v.map(Om));var I=[];return m.forEach(function(O,D){var R=ki(O),H=I[D-1];R.start=DD({attributes:R,priorPeriodAttributes:H?H.attributes:null,mpdType:y.type}),I.push({node:O,attributes:R})}),{locations:y.locations,representationInfo:vc(I.map(OD(y,E)))}},AT=function(t){if(t==="")throw new Error(ru.DASH_EMPTY_MANIFEST);var i=new WO,r,e;try{r=i.parseFromString(t,"application/xml"),e=r&&r.documentElement.tagName==="MPD"?r.documentElement:null}catch{}if(!e||e&&e.getElementsByTagName("parsererror").length>0)throw new Error(ru.DASH_INVALID_XML);return e},kD=function(t){var i=Xt(t,"UTCTiming")[0];if(!i)return null;var r=ki(i);switch(r.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":r.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":r.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":r.method="DIRECT",r.value=Date.parse(r.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error(ru.UNSUPPORTED_UTC_TIMING_SCHEME)}return r},IT=function(t,i){i===void 0&&(i={});var r=LD(AT(t),i),e=xD(r.representationInfo);return hD({dashPlaylists:e,locations:r.locations,sidxMapping:i.sidxMapping,previousManifest:i.previousManifest})},PT=function(t){return kD(AT(t))},OT=Math.pow(2,32),RD=function(a){var t=new DataView(a.buffer,a.byteOffset,a.byteLength),i;return t.getBigUint64?(i=t.getBigUint64(0),i<Number.MAX_SAFE_INTEGER?Number(i):i):t.getUint32(0)*OT+t.getUint32(4)},MD={getUint64:RD,MAX_UINT32:OT},DT=MD.getUint64,FD=function(a){var t=new DataView(a.buffer,a.byteOffset,a.byteLength),i={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},r=12;i.version===0?(i.earliestPresentationTime=t.getUint32(r),i.firstOffset=t.getUint32(r+4),r+=8):(i.earliestPresentationTime=DT(a.subarray(r)),i.firstOffset=DT(a.subarray(r+8)),r+=16),r+=2;var e=t.getUint16(r);for(r+=2;e>0;r+=12,e--)i.references.push({referenceType:(a[r]&128)>>>7,referencedSize:t.getUint32(r)&2147483647,subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(a[r+8]&128),sapType:(a[r+8]&112)>>>4,sapDeltaTime:t.getUint32(r+8)&268435455});return i},LT=FD,ND=$e([73,68,51]),UD=function(t,i){i===void 0&&(i=0),t=$e(t);var r=t[i+5],e=t[i+6]<<21|t[i+7]<<14|t[i+8]<<7|t[i+9],n=(r&16)>>4;return n?e+20:e+10},au=function a(t,i){return i===void 0&&(i=0),t=$e(t),t.length-i<10||!Bt(t,ND,{offset:i})?i:(i+=UD(t,i),a(t,i))},kT=function(t){return typeof t=="string"?fm(t):t},BD=function(t){return Array.isArray(t)?t.map(function(i){return kT(i)}):[kT(t)]},jD=function a(t,i,r){r===void 0&&(r=!1),i=BD(i),t=$e(t);var e=[];if(!i.length)return e;for(var n=0;n<t.length;){var s=(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3])>>>0,o=t.subarray(n+4,n+8);if(s===0)break;var l=n+s;if(l>t.length){if(r)break;l=t.length}var f=t.subarray(n+8,l);Bt(o,i[0])&&(i.length===1?e.push(f):e.push.apply(e,a(f,i.slice(1),r))),n=l}return e},yc={EBML:$e([26,69,223,163]),DocType:$e([66,130]),Segment:$e([24,83,128,103]),SegmentInfo:$e([21,73,169,102]),Tracks:$e([22,84,174,107]),Track:$e([174]),TrackNumber:$e([215]),DefaultDuration:$e([35,227,131]),TrackEntry:$e([174]),TrackType:$e([131]),FlagDefault:$e([136]),CodecID:$e([134]),CodecPrivate:$e([99,162]),VideoTrack:$e([224]),AudioTrack:$e([225]),Cluster:$e([31,67,182,117]),Timestamp:$e([231]),TimestampScale:$e([42,215,177]),BlockGroup:$e([160]),BlockDuration:$e([155]),Block:$e([161]),SimpleBlock:$e([163])},Lm=[128,64,32,16,8,4,2,1],VD=function(t){for(var i=1,r=0;r<Lm.length&&!(t&Lm[r]);r++)i++;return i},Tc=function(t,i,r,e){r===void 0&&(r=!0),e===void 0&&(e=!1);var n=VD(t[i]),s=t.subarray(i,i+n);return r&&(s=Array.prototype.slice.call(t,i,i+n),s[0]^=Lm[n-1]),{length:n,value:pO(s,{signed:e}),bytes:s}},RT=function a(t){return typeof t=="string"?t.match(/.{1,2}/g).map(function(i){return a(i)}):typeof t=="number"?mO(t):t},HD=function(t){return Array.isArray(t)?t.map(function(i){return RT(i)}):[RT(t)]},$D=function a(t,i,r){if(r>=i.length)return i.length;var e=Tc(i,r,!1);if(Bt(t.bytes,e.bytes))return r;var n=Tc(i,r+e.length);return a(t,i,r+n.length+n.value+e.length)},MT=function a(t,i){i=HD(i),t=$e(t);var r=[];if(!i.length)return r;for(var e=0;e<t.length;){var n=Tc(t,e,!1),s=Tc(t,e+n.length),o=e+n.length+s.length;s.value===127&&(s.value=$D(n,t,o),s.value!==t.length&&(s.value-=o));var l=o+s.value>t.length?t.length:o+s.value,f=t.subarray(o,l);Bt(i[0],n.bytes)&&(i.length===1?r.push(f):r=r.concat(a(f,i.slice(1))));var m=n.length+s.length+f.length;e+=m}return r},WD=$e([0,0,0,1]),qD=$e([0,0,1]),GD=$e([0,0,3]),zD=function(t){for(var i=[],r=1;r<t.length-2;)Bt(t.subarray(r,r+3),GD)&&(i.push(r+2),r++),r++;if(i.length===0)return t;var e=t.length-i.length,n=new Uint8Array(e),s=0;for(r=0;r<e;s++,r++)s===i[0]&&(s++,i.shift()),n[r]=t[s];return n},FT=function(t,i,r,e){e===void 0&&(e=1/0),t=$e(t),r=[].concat(r);for(var n=0,s,o=0;n<t.length&&(o<e||s);){var l=void 0;if(Bt(t.subarray(n),WD)?l=4:Bt(t.subarray(n),qD)&&(l=3),!l){n++;continue}if(o++,s)return zD(t.subarray(s,n));var f=void 0;i==="h264"?f=t[n+l]&31:i==="h265"&&(f=t[n+l]>>1&63),r.indexOf(f)!==-1&&(s=n+l),n+=l+(i==="h264"?1:2)}return t.subarray(0,0)},KD=function(t,i,r){return FT(t,"h264",i,r)},XD=function(t,i,r){return FT(t,"h265",i,r)},qi={webm:$e([119,101,98,109]),matroska:$e([109,97,116,114,111,115,107,97]),flac:$e([102,76,97,67]),ogg:$e([79,103,103,83]),ac3:$e([11,119]),riff:$e([82,73,70,70]),avi:$e([65,86,73]),wav:$e([87,65,86,69]),"3gp":$e([102,116,121,112,51,103]),mp4:$e([102,116,121,112]),fmp4:$e([115,116,121,112]),mov:$e([102,116,121,112,113,116]),moov:$e([109,111,111,118]),moof:$e([109,111,111,102])},su={aac:function(t){var i=au(t);return Bt(t,[255,16],{offset:i,mask:[255,22]})},mp3:function(t){var i=au(t);return Bt(t,[255,2],{offset:i,mask:[255,6]})},webm:function(t){var i=MT(t,[yc.EBML,yc.DocType])[0];return Bt(i,qi.webm)},mkv:function(t){var i=MT(t,[yc.EBML,yc.DocType])[0];return Bt(i,qi.matroska)},mp4:function(t){if(su["3gp"](t)||su.mov(t))return!1;if(Bt(t,qi.mp4,{offset:4})||Bt(t,qi.fmp4,{offset:4})||Bt(t,qi.moof,{offset:4})||Bt(t,qi.moov,{offset:4}))return!0},mov:function(t){return Bt(t,qi.mov,{offset:4})},"3gp":function(t){return Bt(t,qi["3gp"],{offset:4})},ac3:function(t){var i=au(t);return Bt(t,qi.ac3,{offset:i})},ts:function(t){if(t.length<189&&t.length>=1)return t[0]===71;for(var i=0;i+188<t.length&&i<188;){if(t[i]===71&&t[i+188]===71)return!0;i+=1}return!1},flac:function(t){var i=au(t);return Bt(t,qi.flac,{offset:i})},ogg:function(t){return Bt(t,qi.ogg)},avi:function(t){return Bt(t,qi.riff)&&Bt(t,qi.avi,{offset:8})},wav:function(t){return Bt(t,qi.riff)&&Bt(t,qi.wav,{offset:8})},h264:function(t){return KD(t,7,3).length},h265:function(t){return XD(t,[32,33],3).length}},km=Object.keys(su).filter(function(a){return a!=="ts"&&a!=="h264"&&a!=="h265"}).concat(["ts","h264","h265"]);km.forEach(function(a){var t=su[a];su[a]=function(i){return t($e(i))}});var QD=su,ou=function(t){t=$e(t);for(var i=0;i<km.length;i++){var r=km[i];if(QD[r](t))return r}return""},NT=function(t){return jD(t,["moof"]).length>0},Rm=9e4,Mm,Fm,bc,Nm,UT,BT,jT;Mm=function(a){return a*Rm},Fm=function(a,t){return a*t},bc=function(a){return a/Rm},Nm=function(a,t){return a/t},UT=function(a,t){return Mm(Nm(a,t))},BT=function(a,t){return Fm(bc(a),t)},jT=function(a,t,i){return bc(i?a:a-t)};var ns={ONE_SECOND_IN_TS:Rm,secondsToVideoTs:Mm,secondsToAudioTs:Fm,videoTsToSeconds:bc,audioTsToSeconds:Nm,audioTsToVideoTs:UT,videoTsToAudioTs:BT,metadataTsToSeconds:jT};function Um(a){return Um=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},Um(a)}function YD(a){return Function.toString.call(a).indexOf("[native code]")!==-1}function xc(a){var t=typeof Map=="function"?new Map:void 0;return xc=function(r){if(r===null||!YD(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,e)}function e(){return Nl(r,arguments,Um(this).constructor)}return e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),qo(e,r)},xc(a)}for(var VT="7.21.3",ya={},as=function(t,i){return ya[t]=ya[t]||[],i&&(ya[t]=ya[t].concat(i)),ya[t]},JD=function(t,i){as(t,i)},HT=function(t,i){var r=as(t).indexOf(i);return r<=-1?!1:(ya[t]=ya[t].slice(),ya[t].splice(r,1),!0)},ZD=function(t,i){as(t,[].concat(i).map(function(r){var e=function n(){return HT(t,n),r.apply(void 0,arguments)};return e}))},Sc={prefixed:!0},Ec=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],$T=Ec[0],Yl,wc=0;wc<Ec.length;wc++)if(Ec[wc][1]in Se){Yl=Ec[wc];break}if(Yl){for(var Cc=0;Cc<Yl.length;Cc++)Sc[$T[Cc]]=Yl[Cc];Sc.prefixed=Yl[0]!==$T[0]}var sr=[],eL=function(t,i){return function(r,e,n){var s=i.levels[e],o=new RegExp("^("+s+")$");if(r!=="log"&&n.unshift(r.toUpperCase()+":"),n.unshift(t+":"),sr){sr.push([].concat(n));var l=sr.length-1e3;sr.splice(0,l>0?l:0)}if(F.console){var f=F.console[r];!f&&r==="debug"&&(f=F.console.info||F.console.log),!(!f||!s||!o.test(r))&&f[Array.isArray(n)?"apply":"call"](F.console,n)}}};function WT(a){var t="info",i,r=function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];i("log",t,s)};return i=eL(a,r),r.createLogger=function(e){return WT(a+": "+e)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:t},r.level=function(e){if(typeof e=="string"){if(!r.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');t=e}return t},r.history=function(){return sr?[].concat(sr):[]},r.history.filter=function(e){return(sr||[]).filter(function(n){return new RegExp(".*"+e+".*").test(n[0])})},r.history.clear=function(){sr&&(sr.length=0)},r.history.disable=function(){sr!==null&&(sr.length=0,sr=null)},r.history.enable=function(){sr===null&&(sr=[])},r.error=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i("error",t,n)},r.warn=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i("warn",t,n)},r.debug=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i("debug",t,n)},r}var ot=WT("VIDEOJS"),qT=ot.createLogger,tL=Object.prototype.toString,GT=function(t){return Ta(t)?Object.keys(t):[]};function uu(a,t){GT(a).forEach(function(i){return t(a[i],i)})}function iL(a,t,i){return i===void 0&&(i=0),GT(a).reduce(function(r,e){return t(r,a[e],e)},i)}function Wt(a){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return Object.assign?Di.apply(void 0,[a].concat(i)):(i.forEach(function(e){e&&uu(e,function(n,s){a[s]=n})}),a)}function Ta(a){return!!a&&typeof a=="object"}function Jl(a){return Ta(a)&&tL.call(a)==="[object Object]"&&a.constructor===Object}function Zl(a,t){if(!a||!t)return"";if(typeof F.getComputedStyle=="function"){var i;try{i=F.getComputedStyle(a)}catch{return""}return i?i.getPropertyValue(t)||i[t]:""}return""}var ci=F.navigator&&F.navigator.userAgent||"",zT=/AppleWebKit\/([\d.]+)/i.exec(ci),rL=zT?parseFloat(zT.pop()):null,KT=/iPod/i.test(ci),nL=function(){var a=ci.match(/OS (\d+)_/i);return a&&a[1]?a[1]:null}(),ba=/Android/i.test(ci),Bm=function(){var a=ci.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;var t=a[1]&&parseFloat(a[1]),i=a[2]&&parseFloat(a[2]);return t&&i?parseFloat(a[1]+"."+a[2]):t||null}(),XT=ba&&Bm<5&&rL<537,QT=/Firefox/i.test(ci),ed=/Edg/i.test(ci),xa=!ed&&(/Chrome/i.test(ci)||/CriOS/i.test(ci)),YT=function(){var a=ci.match(/(Chrome|CriOS)\/(\d+)/);return a&&a[2]?parseFloat(a[2]):null}(),td=function(){var a=/MSIE\s(\d+)\.\d/.exec(ci),t=a&&parseFloat(a[1]);return!t&&/Trident\/7.0/i.test(ci)&&/rv:11.0/.test(ci)&&(t=11),t}(),jm=/Safari/i.test(ci)&&!xa&&!ba&&!ed,JT=/Windows/i.test(ci),lu=Boolean(du()&&("ontouchstart"in F||F.navigator.maxTouchPoints||F.DocumentTouch&&F.document instanceof F.DocumentTouch)),Vm=/iPad/i.test(ci)||jm&&lu&&!/iPhone/i.test(ci),Hm=/iPhone/i.test(ci)&&!Vm,Gi=Hm||Vm||KT,Ac=(jm||Gi)&&!xa,aL=Object.freeze({__proto__:null,IS_IPOD:KT,IOS_VERSION:nL,IS_ANDROID:ba,ANDROID_VERSION:Bm,IS_NATIVE_ANDROID:XT,IS_FIREFOX:QT,IS_EDGE:ed,IS_CHROME:xa,CHROME_VERSION:YT,IE_VERSION:td,IS_SAFARI:jm,IS_WINDOWS:JT,TOUCH_ENABLED:lu,IS_IPAD:Vm,IS_IPHONE:Hm,IS_IOS:Gi,IS_ANY_SAFARI:Ac});function ZT(a){return typeof a=="string"&&Boolean(a.trim())}function eb(a){if(a.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function sL(a){return new RegExp("(^|\\s)"+a+"($|\\s)")}function du(){return Se===F.document}function fu(a){return Ta(a)&&a.nodeType===1}function tb(){try{return F.parent!==F.self}catch{return!0}}function ib(a){return function(t,i){if(!ZT(t))return Se[a](null);ZT(i)&&(i=Se.querySelector(i));var r=fu(i)?i:Se;return r[a]&&r[a](t)}}function Tt(a,t,i,r){a===void 0&&(a="div"),t===void 0&&(t={}),i===void 0&&(i={});var e=Se.createElement(a);return Object.getOwnPropertyNames(t).forEach(function(n){var s=t[n];n.indexOf("aria-")!==-1||n==="role"||n==="type"?(ot.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+n+" to "+s+".")),e.setAttribute(n,s)):n==="textContent"?Ys(e,s):(e[n]!==s||n==="tabIndex")&&(e[n]=s)}),Object.getOwnPropertyNames(i).forEach(function(n){e.setAttribute(n,i[n])}),r&&qm(e,r),e}function Ys(a,t){return typeof a.textContent>"u"?a.innerText=t:a.textContent=t,a}function $m(a,t){t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a)}function Js(a,t){return eb(t),a.classList?a.classList.contains(t):sL(t).test(a.className)}function Sa(a,t){return a.classList?a.classList.add(t):Js(a,t)||(a.className=(a.className+" "+t).trim()),a}function id(a,t){return a?(a.classList?a.classList.remove(t):(eb(t),a.className=a.className.split(/\s+/).filter(function(i){return i!==t}).join(" ")),a):(ot.warn("removeClass was called with an element that doesn't exist"),null)}function rb(a,t,i){var r=Js(a,t);if(typeof i=="function"&&(i=i(a,t)),typeof i!="boolean"&&(i=!r),i!==r)return i?Sa(a,t):id(a,t),a}function nb(a,t){Object.getOwnPropertyNames(t).forEach(function(i){var r=t[i];r===null||typeof r>"u"||r===!1?a.removeAttribute(i):a.setAttribute(i,r===!0?"":r)})}function Ea(a){var t={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(a&&a.attributes&&a.attributes.length>0)for(var r=a.attributes,e=r.length-1;e>=0;e--){var n=r[e].name,s=r[e].value;(typeof a[n]=="boolean"||i.indexOf(","+n+",")!==-1)&&(s=s!==null),t[n]=s}return t}function ab(a,t){return a.getAttribute(t)}function cu(a,t,i){a.setAttribute(t,i)}function Ic(a,t){a.removeAttribute(t)}function sb(){Se.body.focus(),Se.onselectstart=function(){return!1}}function ob(){Se.onselectstart=function(){return!0}}function hu(a){if(a&&a.getBoundingClientRect&&a.parentNode){var t=a.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(r){t[r]!==void 0&&(i[r]=t[r])}),i.height||(i.height=parseFloat(Zl(a,"height"))),i.width||(i.width=parseFloat(Zl(a,"width"))),i}}function rd(a){if(!a||a&&!a.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=a.offsetWidth,i=a.offsetHeight,r=0,e=0;a.offsetParent&&a!==Se[Sc.fullscreenElement];)r+=a.offsetLeft,e+=a.offsetTop,a=a.offsetParent;return{left:r,top:e,width:t,height:i}}function Pc(a,t){var i={x:0,y:0};if(Gi)for(var r=a;r&&r.nodeName.toLowerCase()!=="html";){var e=Zl(r,"transform");if(/^matrix/.test(e)){var n=e.slice(7,-1).split(/,\s/).map(Number);i.x+=n[4],i.y+=n[5]}else if(/^matrix3d/.test(e)){var s=e.slice(9,-1).split(/,\s/).map(Number);i.x+=s[12],i.y+=s[13]}r=r.parentNode}var o={},l=rd(t.target),f=rd(a),m=f.width,v=f.height,y=t.offsetY-(f.top-l.top),E=t.offsetX-(f.left-l.left);return t.changedTouches&&(E=t.changedTouches[0].pageX-f.left,y=t.changedTouches[0].pageY+f.top,Gi&&(E-=i.x,y-=i.y)),o.y=1-Math.max(0,Math.min(1,y/v)),o.x=Math.max(0,Math.min(1,E/m)),o}function ub(a){return Ta(a)&&a.nodeType===3}function Wm(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function lb(a){return typeof a=="function"&&(a=a()),(Array.isArray(a)?a:[a]).map(function(t){if(typeof t=="function"&&(t=t()),fu(t)||ub(t))return t;if(typeof t=="string"&&/\S/.test(t))return Se.createTextNode(t)}).filter(function(t){return t})}function qm(a,t){return lb(t).forEach(function(i){return a.appendChild(i)}),a}function db(a,t){return qm(Wm(a),t)}function nd(a){return a.button===void 0&&a.buttons===void 0||a.button===0&&a.buttons===void 0||a.type==="mouseup"&&a.button===0&&a.buttons===0?!0:!(a.button!==0||a.buttons!==1)}var ss=ib("querySelector"),fb=ib("querySelectorAll"),cb=Object.freeze({__proto__:null,isReal:du,isEl:fu,isInFrame:tb,createEl:Tt,textContent:Ys,prependTo:$m,hasClass:Js,addClass:Sa,removeClass:id,toggleClass:rb,setAttributes:nb,getAttributes:Ea,getAttribute:ab,setAttribute:cu,removeAttribute:Ic,blockTextSelection:sb,unblockTextSelection:ob,getBoundingClientRect:hu,findPosition:rd,getPointerPosition:Pc,isTextNode:ub,emptyEl:Wm,normalizeContent:lb,appendContent:qm,insertContent:db,isSingleLeftClick:nd,$:ss,$$:fb}),hb=!1,Gm,oL=function(){if(Gm.options.autoSetup!==!1){var t=Array.prototype.slice.call(Se.getElementsByTagName("video")),i=Array.prototype.slice.call(Se.getElementsByTagName("audio")),r=Array.prototype.slice.call(Se.getElementsByTagName("video-js")),e=t.concat(i,r);if(e&&e.length>0)for(var n=0,s=e.length;n<s;n++){var o=e[n];if(o&&o.getAttribute){if(o.player===void 0){var l=o.getAttribute("data-setup");l!==null&&Gm(o)}}else{zm(1);break}}else hb||zm(1)}};function zm(a,t){du()&&(t&&(Gm=t),F.setTimeout(oL,a))}function Km(){hb=!0,F.removeEventListener("load",Km)}du()&&(Se.readyState==="complete"?Km():F.addEventListener("load",Km));var pb=function(t){var i=Se.createElement("style");return i.className=t,i},mb=function(t,i){t.styleSheet?t.styleSheet.cssText=i:t.textContent=i},uL=3,lL=uL;function wa(){return lL++}var gb;F.WeakMap||(gb=function(){function a(){this.vdata="vdata"+Math.floor(F.performance&&F.performance.now()||Date.now()),this.data={}}var t=a.prototype;return t.set=function(r,e){var n=r[this.vdata]||wa();return r[this.vdata]||(r[this.vdata]=n),this.data[n]=e,this},t.get=function(r){var e=r[this.vdata];if(e)return this.data[e];ot("We have no data for this element",r)},t.has=function(r){var e=r[this.vdata];return e in this.data},t.delete=function(r){var e=r[this.vdata];e&&(delete this.data[e],delete r[this.vdata])},a}());var zi=F.WeakMap?new WeakMap:new gb;function vb(a,t){if(zi.has(a)){var i=zi.get(a);i.handlers[t].length===0&&(delete i.handlers[t],a.removeEventListener?a.removeEventListener(t,i.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),Object.getOwnPropertyNames(i).length===0&&zi.delete(a)}}function Xm(a,t,i,r){i.forEach(function(e){a(t,e,r)})}function Oc(a){if(a.fixed_)return a;function t(){return!0}function i(){return!1}if(!a||!a.isPropagationStopped||!a.isImmediatePropagationStopped){var r=a||F.event;a={};for(var e in r)e!=="layerX"&&e!=="layerY"&&e!=="keyLocation"&&e!=="webkitMovementX"&&e!=="webkitMovementY"&&e!=="path"&&(e==="returnValue"&&r.preventDefault||(a[e]=r[e]));if(a.target||(a.target=a.srcElement||Se),a.relatedTarget||(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement),a.preventDefault=function(){r.preventDefault&&r.preventDefault(),a.returnValue=!1,r.returnValue=!1,a.defaultPrevented=!0},a.defaultPrevented=!1,a.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),a.cancelBubble=!0,r.cancelBubble=!0,a.isPropagationStopped=t},a.isPropagationStopped=i,a.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),a.isImmediatePropagationStopped=t,a.stopPropagation()},a.isImmediatePropagationStopped=i,a.clientX!==null&&a.clientX!==void 0){var n=Se.documentElement,s=Se.body;a.pageX=a.clientX+(n&&n.scrollLeft||s&&s.scrollLeft||0)-(n&&n.clientLeft||s&&s.clientLeft||0),a.pageY=a.clientY+(n&&n.scrollTop||s&&s.scrollTop||0)-(n&&n.clientTop||s&&s.clientTop||0)}a.which=a.charCode||a.keyCode,a.button!==null&&a.button!==void 0&&(a.button=a.button&1?0:a.button&4?1:a.button&2?2:0)}return a.fixed_=!0,a}var Dc,dL=function(){if(typeof Dc!="boolean"){Dc=!1;try{var t=Object.defineProperty({},"passive",{get:function(){Dc=!0}});F.addEventListener("test",null,t),F.removeEventListener("test",null,t)}catch{}}return Dc},fL=["touchstart","touchmove"];function br(a,t,i){if(Array.isArray(t))return Xm(br,a,t,i);zi.has(a)||zi.set(a,{});var r=zi.get(a);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),i.guid||(i.guid=wa()),r.handlers[t].push(i),r.dispatcher||(r.disabled=!1,r.dispatcher=function(n,s){if(!r.disabled){n=Oc(n);var o=r.handlers[n.type];if(o)for(var l=o.slice(0),f=0,m=l.length;f<m&&!n.isImmediatePropagationStopped();f++)try{l[f].call(a,n,s)}catch(v){ot.error(v)}}}),r.handlers[t].length===1)if(a.addEventListener){var e=!1;dL()&&fL.indexOf(t)>-1&&(e={passive:!0}),a.addEventListener(t,r.dispatcher,e)}else a.attachEvent&&a.attachEvent("on"+t,r.dispatcher)}function Ri(a,t,i){if(zi.has(a)){var r=zi.get(a);if(r.handlers){if(Array.isArray(t))return Xm(Ri,a,t,i);var e=function(f,m){r.handlers[m]=[],vb(f,m)};if(t===void 0){for(var n in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},n)&&e(a,n);return}var s=r.handlers[t];if(s){if(!i){e(a,t);return}if(i.guid)for(var o=0;o<s.length;o++)s[o].guid===i.guid&&s.splice(o--,1);vb(a,t)}}}}function pu(a,t,i){var r=zi.has(a)?zi.get(a):{},e=a.parentNode||a.ownerDocument;if(typeof t=="string"?t={type:t,target:a}:t.target||(t.target=a),t=Oc(t),r.dispatcher&&r.dispatcher.call(a,t,i),e&&!t.isPropagationStopped()&&t.bubbles===!0)pu.call(null,e,t,i);else if(!e&&!t.defaultPrevented&&t.target&&t.target[t.type]){zi.has(t.target)||zi.set(t.target,{});var n=zi.get(t.target);t.target[t.type]&&(n.disabled=!0,typeof t.target[t.type]=="function"&&t.target[t.type](),n.disabled=!1)}return!t.defaultPrevented}function Lc(a,t,i){if(Array.isArray(t))return Xm(Lc,a,t,i);var r=function e(){Ri(a,t,e),i.apply(this,arguments)};r.guid=i.guid=i.guid||wa(),br(a,t,r)}function _b(a,t,i){var r=function e(){Ri(a,t,e),i.apply(this,arguments)};r.guid=i.guid=i.guid||wa(),br(a,t,r)}var cL=Object.freeze({__proto__:null,fixEvent:Oc,on:br,off:Ri,trigger:pu,one:Lc,any:_b}),un=30,Nt=function(t,i,r){i.guid||(i.guid=wa());var e=i.bind(t);return e.guid=r?r+"_"+i.guid:i.guid,e},Ca=function(t,i){var r=F.performance.now(),e=function(){var s=F.performance.now();s-r>=i&&(t.apply(void 0,arguments),r=s)};return e},hL=function(t,i,r,e){e===void 0&&(e=F);var n,s=function(){e.clearTimeout(n),n=null},o=function(){var f=this,m=arguments,v=function(){n=null,v=null,r||t.apply(f,m)};!n&&r&&t.apply(f,m),e.clearTimeout(n),n=e.setTimeout(v,i)};return o.cancel=s,o},hi=function(){};hi.prototype.allowedEvents_={},hi.prototype.on=function(a,t){var i=this.addEventListener;this.addEventListener=function(){},br(this,a,t),this.addEventListener=i},hi.prototype.addEventListener=hi.prototype.on,hi.prototype.off=function(a,t){Ri(this,a,t)},hi.prototype.removeEventListener=hi.prototype.off,hi.prototype.one=function(a,t){var i=this.addEventListener;this.addEventListener=function(){},Lc(this,a,t),this.addEventListener=i},hi.prototype.any=function(a,t){var i=this.addEventListener;this.addEventListener=function(){},_b(this,a,t),this.addEventListener=i},hi.prototype.trigger=function(a){var t=a.type||a;typeof a=="string"&&(a={type:t}),a=Oc(a),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](a),pu(this,a)},hi.prototype.dispatchEvent=hi.prototype.trigger;var ad;hi.prototype.queueTrigger=function(a){var t=this;ad||(ad=new Map);var i=a.type||a,r=ad.get(this);r||(r=new Map,ad.set(this,r));var e=r.get(i);r.delete(i),F.clearTimeout(e);var n=F.setTimeout(function(){r.delete(i),r.size===0&&(r=null,ad.delete(t)),t.trigger(a)},0);r.set(i,n)};var kc=function(t){return typeof t.name=="function"?t.name():typeof t.name=="string"?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t},Aa=function(t){return t instanceof hi||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(i){return typeof t[i]=="function"})},pL=function(t,i){Aa(t)?i():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(i))},Qm=function(t){return typeof t=="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length},Rc=function(t,i,r){if(!t||!t.nodeName&&!Aa(t))throw new Error("Invalid target for "+kc(i)+"#"+r+"; must be a DOM node or evented object.")},yb=function(t,i,r){if(!Qm(t))throw new Error("Invalid event type for "+kc(i)+"#"+r+"; must be a non-empty string or array.")},Tb=function(t,i,r){if(typeof t!="function")throw new Error("Invalid listener for "+kc(i)+"#"+r+"; must be a function.")},Ym=function(t,i,r){var e=i.length<3||i[0]===t||i[0]===t.eventBusEl_,n,s,o;return e?(n=t.eventBusEl_,i.length>=3&&i.shift(),s=i[0],o=i[1]):(n=i[0],s=i[1],o=i[2]),Rc(n,t,r),yb(s,t,r),Tb(o,t,r),o=Nt(t,o),{isTargetingSelf:e,target:n,type:s,listener:o}},Zs=function(t,i,r,e){Rc(t,t,i),t.nodeName?cL[i](t,r,e):t[i](r,e)},mL={on:function(){for(var t=this,i=arguments.length,r=new Array(i),e=0;e<i;e++)r[e]=arguments[e];var n=Ym(this,r,"on"),s=n.isTargetingSelf,o=n.target,l=n.type,f=n.listener;if(Zs(o,"on",l,f),!s){var m=function(){return t.off(o,l,f)};m.guid=f.guid;var v=function(){return t.off("dispose",m)};v.guid=f.guid,Zs(this,"on","dispose",m),Zs(o,"on","dispose",v)}},one:function(){for(var t=this,i=arguments.length,r=new Array(i),e=0;e<i;e++)r[e]=arguments[e];var n=Ym(this,r,"one"),s=n.isTargetingSelf,o=n.target,l=n.type,f=n.listener;if(s)Zs(o,"one",l,f);else{var m=function v(){t.off(o,l,v);for(var y=arguments.length,E=new Array(y),I=0;I<y;I++)E[I]=arguments[I];f.apply(null,E)};m.guid=f.guid,Zs(o,"one",l,m)}},any:function(){for(var t=this,i=arguments.length,r=new Array(i),e=0;e<i;e++)r[e]=arguments[e];var n=Ym(this,r,"any"),s=n.isTargetingSelf,o=n.target,l=n.type,f=n.listener;if(s)Zs(o,"any",l,f);else{var m=function v(){t.off(o,l,v);for(var y=arguments.length,E=new Array(y),I=0;I<y;I++)E[I]=arguments[I];f.apply(null,E)};m.guid=f.guid,Zs(o,"any",l,m)}},off:function(t,i,r){if(!t||Qm(t))Ri(this.eventBusEl_,t,i);else{var e=t,n=i;Rc(e,this,"off"),yb(n,this,"off"),Tb(r,this,"off"),r=Nt(this,r),this.off("dispose",r),e.nodeName?(Ri(e,n,r),Ri(e,"dispose",r)):Aa(e)&&(e.off(n,r),e.off("dispose",r))}},trigger:function(t,i){Rc(this.eventBusEl_,this,"trigger");var r=t&&typeof t!="string"?t.type:t;if(!Qm(r)){var e="Invalid event type for "+kc(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(t)(this.log||ot).error(e);else throw new Error(e)}return pu(this.eventBusEl_,t,i)}};function Jm(a,t){t===void 0&&(t={});var i=t,r=i.eventBusKey;if(r){if(!a[r].nodeName)throw new Error('The eventBusKey "'+r+'" does not refer to an element.');a.eventBusEl_=a[r]}else a.eventBusEl_=Tt("span",{className:"vjs-event-bus"});return Wt(a,mL),a.eventedCallbacks&&a.eventedCallbacks.forEach(function(e){e()}),a.on("dispose",function(){a.off(),[a,a.el_,a.eventBusEl_].forEach(function(e){e&&zi.has(e)&&zi.delete(e)}),F.setTimeout(function(){a.eventBusEl_=null},0)}),a}var gL={state:{},setState:function(t){var i=this;typeof t=="function"&&(t=t());var r;return uu(t,function(e,n){i.state[n]!==e&&(r=r||{},r[n]={from:i.state[n],to:e}),i.state[n]=e}),r&&Aa(this)&&this.trigger({changes:r,type:"statechanged"}),r}};function bb(a,t){return Wt(a,gL),a.state=Wt({},a.state,t),typeof a.handleStateChanged=="function"&&Aa(a)&&a.on("statechanged",a.handleStateChanged),a}var Mc=function(t){return typeof t!="string"?t:t.replace(/./,function(i){return i.toLowerCase()})},Qt=function(t){return typeof t!="string"?t:t.replace(/./,function(i){return i.toUpperCase()})},vL=function(t,i){return Qt(t)===Qt(i)};function Ut(){for(var a={},t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return i.forEach(function(e){e&&uu(e,function(n,s){if(!Jl(n)){a[s]=n;return}Jl(a[s])||(a[s]={}),a[s]=Ut(a[s],n)})}),a}var _L=function(){function a(){this.map_={}}var t=a.prototype;return t.has=function(r){return r in this.map_},t.delete=function(r){var e=this.has(r);return delete this.map_[r],e},t.set=function(r,e){return this.map_[r]=e,this},t.forEach=function(r,e){for(var n in this.map_)r.call(e,this.map_[n],n,this)},a}(),yL=F.Map?F.Map:_L,TL=function(){function a(){this.set_={}}var t=a.prototype;return t.has=function(r){return r in this.set_},t.delete=function(r){var e=this.has(r);return delete this.set_[r],e},t.add=function(r){return this.set_[r]=1,this},t.forEach=function(r,e){for(var n in this.set_)r.call(e,n,n,this)},a}(),Zm=F.Set?F.Set:TL,Te=function(){function a(i,r,e){var n=this;if(!i&&this.play?this.player_=i=this:this.player_=i,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Ut({},this.options_),r=this.options_=Ut(this.options_,r),this.id_=r.id||r.el&&r.el.id,!this.id_){var s=i&&i.id&&i.id()||"no_player";this.id_=s+"_component_"+wa()}this.name_=r.name||null,r.el?this.el_=r.el:r.createEl!==!1&&(this.el_=this.createEl()),r.className&&this.el_&&r.className.split(" ").forEach(function(o){return n.addClass(o)}),r.evented!==!1&&(Jm(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),bb(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new Zm,this.setIntervalIds_=new Zm,this.rafIds_=new Zm,this.namedRafs_=new yL,this.clearingTimersOnDispose_=!1,r.initChildren!==!1&&this.initChildren(),this.ready(e),r.reportTouchActivity!==!1&&this.enableTouchActivity()}var t=a.prototype;return t.dispose=function(r){if(r===void 0&&(r={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(r.restoreEl?this.el_.parentNode.replaceChild(r.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(r){return r?(this.options_=Ut(this.options_,r),this.options_):this.options_},t.el=function(){return this.el_},t.createEl=function(r,e,n){return Tt(r,e,n)},t.localize=function(r,e,n){n===void 0&&(n=r);var s=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),l=o&&o[s],f=s&&s.split("-")[0],m=o&&o[f],v=n;return l&&l[r]?v=l[r]:m&&m[r]&&(v=m[r]),e&&(v=v.replace(/\{(\d+)\}/g,function(y,E){var I=e[E-1],O=I;return typeof I>"u"&&(O=y),O})),v},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(r){return this.childIndex_[r]},t.getChild=function(r){if(r)return this.childNameIndex_[r]},t.getDescendant=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];e=e.reduce(function(l,f){return l.concat(f)},[]);for(var s=this,o=0;o<e.length;o++)if(s=s.getChild(e[o]),!s||!s.getChild)return;return s},t.addChild=function(r,e,n){e===void 0&&(e={}),n===void 0&&(n=this.children_.length);var s,o;if(typeof r=="string"){o=Qt(r);var l=e.componentClass||o;e.name=o;var f=a.getComponent(l);if(!f)throw new Error("Component "+l+" does not exist");if(typeof f!="function")return null;s=new f(this.player_||this,e)}else s=r;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(n,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),o=o||s.name&&Qt(s.name()),o&&(this.childNameIndex_[o]=s,this.childNameIndex_[Mc(o)]=s),typeof s.el=="function"&&s.el()){var m=null;this.children_[n+1]&&(this.children_[n+1].el_?m=this.children_[n+1].el_:fu(this.children_[n+1])&&(m=this.children_[n+1])),this.contentEl().insertBefore(s.el(),m)}return s},t.removeChild=function(r){if(typeof r=="string"&&(r=this.getChild(r)),!(!r||!this.children_)){for(var e=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===r){e=!0,this.children_.splice(n,1);break}if(e){r.parentComponent_=null,this.childIndex_[r.id()]=null,this.childNameIndex_[Qt(r.name())]=null,this.childNameIndex_[Mc(r.name())]=null;var s=r.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(r.el())}}},t.initChildren=function(){var r=this,e=this.options_.children;if(e){var n=this.options_,s=function(m){var v=m.name,y=m.opts;if(n[v]!==void 0&&(y=n[v]),y!==!1){y===!0&&(y={}),y.playerOptions=r.options_.playerOptions;var E=r.addChild(v,y);E&&(r[v]=E)}},o,l=a.getComponent("Tech");Array.isArray(e)?o=e:o=Object.keys(e),o.concat(Object.keys(this.options_).filter(function(f){return!o.some(function(m){return typeof m=="string"?f===m:f===m.name})})).map(function(f){var m,v;return typeof f=="string"?(m=f,v=e[m]||r.options_[m]||{}):(m=f.name,v=f),{name:m,opts:v}}).filter(function(f){var m=a.getComponent(f.opts.componentClass||Qt(f.name));return m&&!l.isTech(m)}).forEach(s)}},t.buildCSSClass=function(){return""},t.ready=function(r,e){if(e===void 0&&(e=!1),!!r){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(r);return}e?r.call(this):this.setTimeout(r,1)}},t.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var r=this.readyQueue_;this.readyQueue_=[],r&&r.length>0&&r.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},t.$=function(r,e){return ss(r,e||this.contentEl())},t.$$=function(r,e){return fb(r,e||this.contentEl())},t.hasClass=function(r){return Js(this.el_,r)},t.addClass=function(r){Sa(this.el_,r)},t.removeClass=function(r){id(this.el_,r)},t.toggleClass=function(r,e){rb(this.el_,r,e)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(r){return ab(this.el_,r)},t.setAttribute=function(r,e){cu(this.el_,r,e)},t.removeAttribute=function(r){Ic(this.el_,r)},t.width=function(r,e){return this.dimension("width",r,e)},t.height=function(r,e){return this.dimension("height",r,e)},t.dimensions=function(r,e){this.width(r,!0),this.height(e)},t.dimension=function(r,e,n){if(e!==void 0){(e===null||e!==e)&&(e=0),(""+e).indexOf("%")!==-1||(""+e).indexOf("px")!==-1?this.el_.style[r]=e:e==="auto"?this.el_.style[r]="":this.el_.style[r]=e+"px",n||this.trigger("componentresize");return}if(!this.el_)return 0;var s=this.el_.style[r],o=s.indexOf("px");return parseInt(o!==-1?s.slice(0,o):this.el_["offset"+Qt(r)],10)},t.currentDimension=function(r){var e=0;if(r!=="width"&&r!=="height")throw new Error("currentDimension only accepts width or height value");if(e=Zl(this.el_,r),e=parseFloat(e),e===0||isNaN(e)){var n="offset"+Qt(r);e=this.el_[n]}return e},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(r){this.player_&&(et.isEventKey(r,"Tab")||r.stopPropagation(),this.player_.handleKeyDown(r))},t.handleKeyPress=function(r){this.handleKeyDown(r)},t.emitTapEvents=function(){var r=0,e=null,n=10,s=200,o;this.on("touchstart",function(f){f.touches.length===1&&(e={pageX:f.touches[0].pageX,pageY:f.touches[0].pageY},r=F.performance.now(),o=!0)}),this.on("touchmove",function(f){if(f.touches.length>1)o=!1;else if(e){var m=f.touches[0].pageX-e.pageX,v=f.touches[0].pageY-e.pageY,y=Math.sqrt(m*m+v*v);y>n&&(o=!1)}});var l=function(){o=!1};this.on("touchleave",l),this.on("touchcancel",l),this.on("touchend",function(f){if(e=null,o===!0){var m=F.performance.now()-r;m<s&&(f.preventDefault(),this.trigger("tap"))}})},t.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var r=Nt(this.player(),this.player().reportUserActivity),e;this.on("touchstart",function(){r(),this.clearInterval(e),e=this.setInterval(r,250)});var n=function(o){r(),this.clearInterval(e)};this.on("touchmove",r),this.on("touchend",n),this.on("touchcancel",n)}},t.setTimeout=function(r,e){var n=this,s;return r=Nt(this,r),this.clearTimersOnDispose_(),s=F.setTimeout(function(){n.setTimeoutIds_.has(s)&&n.setTimeoutIds_.delete(s),r()},e),this.setTimeoutIds_.add(s),s},t.clearTimeout=function(r){return this.setTimeoutIds_.has(r)&&(this.setTimeoutIds_.delete(r),F.clearTimeout(r)),r},t.setInterval=function(r,e){r=Nt(this,r),this.clearTimersOnDispose_();var n=F.setInterval(r,e);return this.setIntervalIds_.add(n),n},t.clearInterval=function(r){return this.setIntervalIds_.has(r)&&(this.setIntervalIds_.delete(r),F.clearInterval(r)),r},t.requestAnimationFrame=function(r){var e=this;if(!this.supportsRaf_)return this.setTimeout(r,1e3/60);this.clearTimersOnDispose_();var n;return r=Nt(this,r),n=F.requestAnimationFrame(function(){e.rafIds_.has(n)&&e.rafIds_.delete(n),r()}),this.rafIds_.add(n),n},t.requestNamedAnimationFrame=function(r,e){var n=this;if(!this.namedRafs_.has(r)){this.clearTimersOnDispose_(),e=Nt(this,e);var s=this.requestAnimationFrame(function(){e(),n.namedRafs_.has(r)&&n.namedRafs_.delete(r)});return this.namedRafs_.set(r,s),r}},t.cancelNamedAnimationFrame=function(r){this.namedRafs_.has(r)&&(this.cancelAnimationFrame(this.namedRafs_.get(r)),this.namedRafs_.delete(r))},t.cancelAnimationFrame=function(r){return this.supportsRaf_?(this.rafIds_.has(r)&&(this.rafIds_.delete(r),F.cancelAnimationFrame(r)),r):this.clearTimeout(r)},t.clearTimersOnDispose_=function(){var r=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var n=e[0],s=e[1];r[n].forEach(function(o,l){return r[s](l)})}),r.clearingTimersOnDispose_=!1}))},a.registerComponent=function(r,e){if(typeof r!="string"||!r)throw new Error('Illegal component name, "'+r+'"; must be a non-empty string.');var n=a.getComponent("Tech"),s=n&&n.isTech(e),o=a===e||a.prototype.isPrototypeOf(e.prototype);if(s||!o){var l;throw s?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error('Illegal component, "'+r+'"; '+l+".")}r=Qt(r),a.components_||(a.components_={});var f=a.getComponent("Player");if(r==="Player"&&f&&f.players){var m=f.players,v=Object.keys(m);if(m&&v.length>0&&v.map(function(y){return m[y]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return a.components_[r]=e,a.components_[Mc(r)]=e,e},a.getComponent=function(r){if(!(!r||!a.components_))return a.components_[r]},a}();Te.prototype.supportsRaf_=typeof F.requestAnimationFrame=="function"&&typeof F.cancelAnimationFrame=="function",Te.registerComponent("Component",Te);function bL(a,t,i){if(typeof t!="number"||t<0||t>i)throw new Error("Failed to execute '"+a+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").")}function xb(a,t,i,r){return bL(a,r,i.length-1),i[r][t]}function eg(a){var t;return a===void 0||a.length===0?t={length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:t={length:a.length,start:xb.bind(null,"start",0,a),end:xb.bind(null,"end",1,a)},F.Symbol&&F.Symbol.iterator&&(t[F.Symbol.iterator]=function(){return(a||[]).values()}),t}function eo(a,t){return Array.isArray(a)?eg(a):a===void 0||t===void 0?eg():eg([[a,t]])}function Sb(a,t){var i=0,r,e;if(!t)return 0;(!a||!a.length)&&(a=eo(0,0));for(var n=0;n<a.length;n++)r=a.start(n),e=a.end(n),e>t&&(e=t),i+=e-r;return i/t}function Ki(a){if(a instanceof Ki)return a;typeof a=="number"?this.code=a:typeof a=="string"?this.message=a:Ta(a)&&(typeof a.code=="number"&&(this.code=a.code),Wt(this,a)),this.message||(this.message=Ki.defaultMessages[this.code]||"")}Ki.prototype.code=0,Ki.prototype.message="",Ki.prototype.status=null,Ki.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"],Ki.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var mu=0;mu<Ki.errorTypes.length;mu++)Ki[Ki.errorTypes[mu]]=mu,Ki.prototype[Ki.errorTypes[mu]]=mu;function sd(a){return a!=null&&typeof a.then=="function"}function Vn(a){sd(a)&&a.then(null,function(t){})}var tg=function(t){var i=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(r,e,n){return t[e]&&(r[e]=t[e]),r},{cues:t.cues&&Array.prototype.map.call(t.cues,function(r){return{startTime:r.startTime,endTime:r.endTime,text:r.text,id:r.id}})});return i},xL=function(t){var i=t.$$("track"),r=Array.prototype.map.call(i,function(n){return n.track}),e=Array.prototype.map.call(i,function(n){var s=tg(n.track);return n.src&&(s.src=n.src),s});return e.concat(Array.prototype.filter.call(t.textTracks(),function(n){return r.indexOf(n)===-1}).map(tg))},SL=function(t,i){return t.forEach(function(r){var e=i.addRemoteTextTrack(r).track;!r.src&&r.cues&&r.cues.forEach(function(n){return e.addCue(n)})}),i.textTracks()},Eb={textTracksToJson:xL,jsonToTextTracks:SL,trackToJson_:tg},ig="vjs-modal-dialog",gu=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.handleKeyDown_=function(s){return n.handleKeyDown(s)},n.close_=function(s){return n.close(s)},n.opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=Tt("div",{className:ig+"-content"},{role:"document"}),n.descEl_=Tt("p",{className:ig+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),Ys(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},i.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,a.prototype.dispose.call(this)},i.buildCSSClass=function(){return ig+" vjs-hidden "+a.prototype.buildCSSClass.call(this)},i.label=function(){return this.localize(this.options_.label||"Modal Window")},i.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},i.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},i.opened=function(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_},i.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},i.closeable=function(e){if(typeof e=="boolean"){var n=this.closeable_=!!e,s=this.getChild("closeButton");if(n&&!s){var o=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(s,"close",this.close_)}!n&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_},i.fill=function(){this.fillWith(this.content())},i.fillWith=function(e){var n=this.contentEl(),s=n.parentNode,o=n.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(n),this.empty(),db(n,e),this.trigger("modalfill"),o?s.insertBefore(n,o):s.appendChild(n);var l=this.getChild("closeButton");l&&s.appendChild(l.el_)},i.empty=function(){this.trigger("beforemodalempty"),Wm(this.contentEl()),this.trigger("modalempty")},i.content=function(e){return typeof e<"u"&&(this.content_=e),this.content_},i.conditionalFocus_=function(){var e=Se.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(e)||n===e)&&(this.previouslyActiveEl_=e,this.focus())},i.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},i.handleKeyDown=function(e){if(e.stopPropagation(),et.isEventKey(e,"Escape")&&this.closeable()){e.preventDefault(),this.close();return}if(et.isEventKey(e,"Tab")){for(var n=this.focusableEls_(),s=this.el_.querySelector(":focus"),o,l=0;l<n.length;l++)if(s===n[l]){o=l;break}Se.activeElement===this.el_&&(o=0),e.shiftKey&&o===0?(n[n.length-1].focus(),e.preventDefault()):!e.shiftKey&&o===n.length-1&&(n[0].focus(),e.preventDefault())}},i.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(n){return(n instanceof F.HTMLAnchorElement||n instanceof F.HTMLAreaElement)&&n.hasAttribute("href")||(n instanceof F.HTMLInputElement||n instanceof F.HTMLSelectElement||n instanceof F.HTMLTextAreaElement||n instanceof F.HTMLButtonElement)&&!n.hasAttribute("disabled")||n instanceof F.HTMLIFrameElement||n instanceof F.HTMLObjectElement||n instanceof F.HTMLEmbedElement||n.hasAttribute("tabindex")&&n.getAttribute("tabindex")!==-1||n.hasAttribute("contenteditable")})},t}(Te);gu.prototype.options_={pauseOnOpen:!0,temporary:!0},Te.registerComponent("ModalDialog",gu);var vu=function(a){Ae(t,a);function t(r){var e;r===void 0&&(r=[]),e=a.call(this)||this,e.tracks_=[],Object.defineProperty(Ue(e),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<r.length;n++)e.addTrack(r[n]);return e}var i=t.prototype;return i.addTrack=function(e){var n=this,s=this.tracks_.length;""+s in this||Object.defineProperty(this,s,{get:function(){return this.tracks_[s]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){n.trigger({track:e,type:"labelchange",target:n})},Aa(e)&&e.addEventListener("labelchange",e.labelchange_)},i.removeTrack=function(e){for(var n,s=0,o=this.length;s<o;s++)if(this[s]===e){n=this[s],n.off&&n.off(),this.tracks_.splice(s,1);break}n&&this.trigger({track:n,type:"removetrack",target:this})},i.getTrackById=function(e){for(var n=null,s=0,o=this.length;s<o;s++){var l=this[s];if(l.id===e){n=l;break}}return n},t}(hi);vu.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var EL in vu.prototype.allowedEvents_)vu.prototype["on"+EL]=null;var rg=function(t,i){for(var r=0;r<t.length;r++)!Object.keys(t[r]).length||i.id===t[r].id||(t[r].enabled=!1)},wL=function(a){Ae(t,a);function t(r){var e;r===void 0&&(r=[]);for(var n=r.length-1;n>=0;n--)if(r[n].enabled){rg(r,r[n]);break}return e=a.call(this,r)||this,e.changing_=!1,e}var i=t.prototype;return i.addTrack=function(e){var n=this;e.enabled&&rg(this,e),a.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){n.changing_||(n.changing_=!0,rg(n,e),n.changing_=!1,n.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},i.removeTrack=function(e){a.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)},t}(vu),ng=function(t,i){for(var r=0;r<t.length;r++)!Object.keys(t[r]).length||i.id===t[r].id||(t[r].selected=!1)},CL=function(a){Ae(t,a);function t(r){var e;r===void 0&&(r=[]);for(var n=r.length-1;n>=0;n--)if(r[n].selected){ng(r,r[n]);break}return e=a.call(this,r)||this,e.changing_=!1,Object.defineProperty(Ue(e),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),e}var i=t.prototype;return i.addTrack=function(e){var n=this;e.selected&&ng(this,e),a.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){n.changing_||(n.changing_=!0,ng(n,e),n.changing_=!1,n.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},i.removeTrack=function(e){a.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},t}(vu),wb=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.addTrack=function(e){var n=this;a.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_);var s=["metadata","chapters"];s.indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},i.removeTrack=function(e){a.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(vu),AL=function(){function a(i){i===void 0&&(i=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var r=0,e=i.length;r<e;r++)this.addTrackElement_(i[r])}var t=a.prototype;return t.addTrackElement_=function(r){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),this.trackElements_.indexOf(r)===-1&&this.trackElements_.push(r)},t.getTrackElementByTrack_=function(r){for(var e,n=0,s=this.trackElements_.length;n<s;n++)if(r===this.trackElements_[n].track){e=this.trackElements_[n];break}return e},t.removeTrackElement_=function(r){for(var e=0,n=this.trackElements_.length;e<n;e++)if(r===this.trackElements_[e]){this.trackElements_[e].track&&typeof this.trackElements_[e].track.off=="function"&&this.trackElements_[e].track.off(),typeof this.trackElements_[e].off=="function"&&this.trackElements_[e].off(),this.trackElements_.splice(e,1);break}},a}(),Cb=function(){function a(i){a.prototype.setCues_.call(this,i),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=a.prototype;return t.setCues_=function(r){var e=this.length||0,n=0,s=r.length;this.cues_=r,this.length_=r.length;var o=function(f){""+f in this||Object.defineProperty(this,""+f,{get:function(){return this.cues_[f]}})};if(e<s)for(n=e;n<s;n++)o.call(this,n)},t.getCueById=function(r){for(var e=null,n=0,s=this.length;n<s;n++){var o=this[n];if(o.id===r){e=o;break}}return e},a}(),IL={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},PL={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},OL={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},Ab={disabled:"disabled",hidden:"hidden",showing:"showing"},ag=function(a){Ae(t,a);function t(i){var r;i===void 0&&(i={}),r=a.call(this)||this;var e={id:i.id||"vjs_track_"+wa(),kind:i.kind||"",language:i.language||""},n=i.label||"",s=function(f){Object.defineProperty(Ue(r),f,{get:function(){return e[f]},set:function(){}})};for(var o in e)s(o);return Object.defineProperty(Ue(r),"label",{get:function(){return n},set:function(f){f!==n&&(n=f,this.trigger("labelchange"))}}),r}return t}(hi),sg=function(t){var i=["protocol","hostname","port","pathname","search","hash","host"],r=Se.createElement("a");r.href=t;for(var e={},n=0;n<i.length;n++)e[i[n]]=r[i[n]];return e.protocol==="http:"&&(e.host=e.host.replace(/:80$/,"")),e.protocol==="https:"&&(e.host=e.host.replace(/:443$/,"")),e.protocol||(e.protocol=F.location.protocol),e.host||(e.host=F.location.host),e},Ib=function(t){if(!t.match(/^https?:\/\//)){var i=Se.createElement("a");i.href=t,t=i.href}return t},og=function(t){if(typeof t=="string"){var i=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,r=i.exec(t);if(r)return r.pop().toLowerCase()}return""},Fc=function(t,i){i===void 0&&(i=F.location);var r=sg(t),e=r.protocol===":"?i.protocol:r.protocol,n=e+r.host!==i.protocol+i.host;return n},DL=Object.freeze({__proto__:null,parseUrl:sg,getAbsoluteURL:Ib,getFileExtension:og,isCrossOrigin:Fc}),Pb=function(t,i){var r=new F.WebVTT.Parser(F,F.vttjs,F.WebVTT.StringDecoder()),e=[];r.oncue=function(n){i.addCue(n)},r.onparsingerror=function(n){e.push(n)},r.onflush=function(){i.trigger({type:"loadeddata",target:i})},r.parse(t),e.length>0&&(F.console&&F.console.groupCollapsed&&F.console.groupCollapsed("Text Track parsing errors for "+i.src),e.forEach(function(n){return ot.error(n)}),F.console&&F.console.groupEnd&&F.console.groupEnd()),r.flush()},Ob=function(t,i){var r={uri:t},e=Fc(t);e&&(r.cors=e);var n=i.tech_.crossOrigin()==="use-credentials";n&&(r.withCredentials=n),kl(r,Nt(this,function(s,o,l){if(s)return ot.error(s,o);i.loaded_=!0,typeof F.WebVTT!="function"?i.tech_&&i.tech_.any(["vttjsloaded","vttjserror"],function(f){if(f.type==="vttjserror"){ot.error("vttjs failed to load, stopping trying to process "+i.src);return}return Pb(l,i)}):Pb(l,i)}))},od=function(a){Ae(t,a);function t(r){var e;if(r===void 0&&(r={}),!r.tech)throw new Error("A tech was not provided.");var n=Ut(r,{kind:OL[r.kind]||"subtitles",language:r.language||r.srclang||""}),s=Ab[n.mode]||"disabled",o=n.default;(n.kind==="metadata"||n.kind==="chapters")&&(s="hidden"),e=a.call(this,n)||this,e.tech_=n.tech,e.cues_=[],e.activeCues_=[],e.preload_=e.tech_.preloadTextTracks!==!1;var l=new Cb(e.cues_),f=new Cb(e.activeCues_),m=!1;e.timeupdateHandler=Nt(Ue(e),function(y){if(y===void 0&&(y={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_){y.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,m&&(this.trigger("cuechange"),m=!1),y.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});var v=function(){e.stopTracking()};return e.tech_.one("dispose",v),s!=="disabled"&&e.startTracking(),Object.defineProperties(Ue(e),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return s},set:function(E){Ab[E]&&s!==E&&(s=E,!this.preload_&&s!=="disabled"&&this.cues.length===0&&Ob(this.src,this),this.stopTracking(),s!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?l:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return f;for(var E=this.tech_.currentTime(),I=[],O=0,D=this.cues.length;O<D;O++){var R=this.cues[O];(R.startTime<=E&&R.endTime>=E||R.startTime===R.endTime&&R.startTime<=E&&R.startTime+.5>=E)&&I.push(R)}if(m=!1,I.length!==this.activeCues_.length)m=!0;else for(var H=0;H<I.length;H++)this.activeCues_.indexOf(I[H])===-1&&(m=!0);return this.activeCues_=I,f.setCues_(this.activeCues_),f},set:function(){}}}),n.src?(e.src=n.src,e.preload_||(e.loaded_=!0),(e.preload_||n.kind!=="subtitles"&&n.kind!=="captions")&&Ob(e.src,Ue(e))):e.loaded_=!0,e}var i=t.prototype;return i.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},i.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},i.addCue=function(e){var n=e;if(F.vttjs&&!(e instanceof F.vttjs.VTTCue)){n=new F.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(var s in e)s in n||(n[s]=e[s]);n.id=e.id,n.originalCue_=e}for(var o=this.tech_.textTracks(),l=0;l<o.length;l++)o[l]!==this&&o[l].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)},i.removeCue=function(e){for(var n=this.cues_.length;n--;){var s=this.cues_[n];if(s===e||s.originalCue_&&s.originalCue_===e){this.cues_.splice(n,1),this.cues.setCues_(this.cues_);break}}},t}(ag);od.prototype.allowedEvents_={cuechange:"cuechange"};var Db=function(a){Ae(t,a);function t(i){var r;i===void 0&&(i={});var e=Ut(i,{kind:PL[i.kind]||""});r=a.call(this,e)||this;var n=!1;return Object.defineProperty(Ue(r),"enabled",{get:function(){return n},set:function(o){typeof o!="boolean"||o===n||(n=o,this.trigger("enabledchange"))}}),e.enabled&&(r.enabled=e.enabled),r.loaded_=!0,r}return t}(ag),Lb=function(a){Ae(t,a);function t(i){var r;i===void 0&&(i={});var e=Ut(i,{kind:IL[i.kind]||""});r=a.call(this,e)||this;var n=!1;return Object.defineProperty(Ue(r),"selected",{get:function(){return n},set:function(o){typeof o!="boolean"||o===n||(n=o,this.trigger("selectedchange"))}}),e.selected&&(r.selected=e.selected),r}return t}(ag),kb=0,LL=1,Rb=2,kL=3,_u=function(a){Ae(t,a);function t(i){var r;i===void 0&&(i={}),r=a.call(this)||this;var e,n=new od(i);return r.kind=n.kind,r.src=n.src,r.srclang=n.language,r.label=n.label,r.default=n.default,Object.defineProperties(Ue(r),{readyState:{get:function(){return e}},track:{get:function(){return n}}}),e=kb,n.addEventListener("loadeddata",function(){e=Rb,r.trigger({type:"load",target:Ue(r)})}),r}return t}(hi);_u.prototype.allowedEvents_={load:"load"},_u.NONE=kb,_u.LOADING=LL,_u.LOADED=Rb,_u.ERROR=kL;var Br={audio:{ListClass:wL,TrackClass:Db,capitalName:"Audio"},video:{ListClass:CL,TrackClass:Lb,capitalName:"Video"},text:{ListClass:wb,TrackClass:od,capitalName:"Text"}};Object.keys(Br).forEach(function(a){Br[a].getterName=a+"Tracks",Br[a].privateName=a+"Tracks_"});var yu={remoteText:{ListClass:wb,TrackClass:od,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:AL,TrackClass:_u,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Xi=Di({},Br,yu);yu.names=Object.keys(yu),Br.names=Object.keys(Br),Xi.names=[].concat(yu.names).concat(Br.names);function RL(a,t,i,r,e){e===void 0&&(e={});var n=a.textTracks();e.kind=t,i&&(e.label=i),r&&(e.language=r),e.tech=a;var s=new Xi.text.TrackClass(e);return n.addTrack(s),s}var Rt=function(a){Ae(t,a);function t(r,e){var n;return r===void 0&&(r={}),e===void 0&&(e=function(){}),r.reportTouchActivity=!1,n=a.call(this,null,r,e)||this,n.onDurationChange_=function(s){return n.onDurationChange(s)},n.trackProgress_=function(s){return n.trackProgress(s)},n.trackCurrentTime_=function(s){return n.trackCurrentTime(s)},n.stopTrackingCurrentTime_=function(s){return n.stopTrackingCurrentTime(s)},n.disposeSourceHandler_=function(s){return n.disposeSourceHandler(s)},n.queuedHanders_=new Set,n.hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),Xi.names.forEach(function(s){var o=Xi[s];r&&r[o.getterName]&&(n[o.privateName]=r[o.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(s){r["native"+s+"Tracks"]===!1&&(n["featuresNative"+s+"Tracks"]=!1)}),r.nativeCaptions===!1||r.nativeTextTracks===!1?n.featuresNativeTextTracks=!1:(r.nativeCaptions===!0||r.nativeTextTracks===!0)&&(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.preloadTextTracks=r.preloadTextTracks!==!1,n.autoRemoteTextTracks_=new Xi.text.ListClass,n.initTrackListeners(),r.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}var i=t.prototype;return i.triggerSourceset=function(e){var n=this;this.isReady_||this.one("ready",function(){return n.setTimeout(function(){return n.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},i.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},i.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},i.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Nt(this,function(){var n=this.bufferedPercent();this.bufferedPercent_!==n&&this.trigger("progress"),this.bufferedPercent_=n,n===1&&this.stopTrackingProgress()}),500)},i.onDurationChange=function(e){this.duration_=this.duration()},i.buffered=function(){return eo(0,0)},i.bufferedPercent=function(){return Sb(this.buffered(),this.duration_)},i.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},i.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},i.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},i.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},i.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.dispose=function(){this.clearTracks(Br.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),a.prototype.dispose.call(this)},i.clearTracks=function(e){var n=this;e=[].concat(e),e.forEach(function(s){for(var o=n[s+"Tracks"]()||[],l=o.length;l--;){var f=o[l];s==="text"&&n.removeRemoteTextTrack(f),o.removeTrack(f)}})},i.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],n=e.length;n--;){var s=e[n];this.removeRemoteTextTrack(s)}},i.reset=function(){},i.crossOrigin=function(){},i.setCrossOrigin=function(){},i.error=function(e){return e!==void 0&&(this.error_=new Ki(e),this.trigger("error")),this.error_},i.played=function(){return this.hasStarted_?eo(0,0):eo()},i.play=function(){},i.setScrubbing=function(){},i.scrubbing=function(){},i.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.initTrackListeners=function(){var e=this;Br.names.forEach(function(n){var s=Br[n],o=function(){e.trigger(n+"trackchange")},l=e[s.getterName]();l.addEventListener("removetrack",o),l.addEventListener("addtrack",o),e.on("dispose",function(){l.removeEventListener("removetrack",o),l.removeEventListener("addtrack",o)})})},i.addWebVttScript_=function(){var e=this;if(!F.WebVTT)if(Se.body.contains(this.el())){if(!this.options_["vtt.js"]&&Jl(rc)&&Object.keys(rc).length>0){this.trigger("vttjsloaded");return}var n=Se.createElement("script");n.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",n.onload=function(){e.trigger("vttjsloaded")},n.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){n.onload=null,n.onerror=null}),F.WebVTT=!0,this.el().parentNode.appendChild(n)}else this.ready(this.addWebVttScript_)},i.emulateTextTracks=function(){var e=this,n=this.textTracks(),s=this.remoteTextTracks(),o=function(y){return n.addTrack(y.track)},l=function(y){return n.removeTrack(y.track)};s.on("addtrack",o),s.on("removetrack",l),this.addWebVttScript_();var f=function(){return e.trigger("texttrackchange")},m=function(){f();for(var y=0;y<n.length;y++){var E=n[y];E.removeEventListener("cuechange",f),E.mode==="showing"&&E.addEventListener("cuechange",f)}};m(),n.addEventListener("change",m),n.addEventListener("addtrack",m),n.addEventListener("removetrack",m),this.on("dispose",function(){s.off("addtrack",o),s.off("removetrack",l),n.removeEventListener("change",m),n.removeEventListener("addtrack",m),n.removeEventListener("removetrack",m);for(var v=0;v<n.length;v++){var y=n[v];y.removeEventListener("cuechange",f)}})},i.addTextTrack=function(e,n,s){if(!e)throw new Error("TextTrack kind is required but was not provided");return RL(this,e,n,s)},i.createRemoteTextTrack=function(e){var n=Ut(e,{tech:this});return new yu.remoteTextEl.TrackClass(n)},i.addRemoteTextTrack=function(e,n){var s=this;e===void 0&&(e={});var o=this.createRemoteTextTrack(e);return n!==!0&&n!==!1&&(ot.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),n=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),n!==!0&&this.ready(function(){return s.autoRemoteTextTracks_.addTrack(o.track)}),o},i.removeRemoteTextTrack=function(e){var n=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(n),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},i.getVideoPlaybackQuality=function(){return{}},i.requestPictureInPicture=function(){var e=this.options_.Promise||F.Promise;if(e)return e.reject()},i.disablePictureInPicture=function(){return!0},i.setDisablePictureInPicture=function(){},i.requestVideoFrameCallback=function(e){var n=this,s=wa();return!this.isReady_||this.paused()?(this.queuedHanders_.add(s),this.one("playing",function(){n.queuedHanders_.has(s)&&(n.queuedHanders_.delete(s),e())})):this.requestNamedAnimationFrame(s,e),s},i.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},i.setPoster=function(){},i.playsinline=function(){},i.setPlaysinline=function(){},i.overrideNativeAudioTracks=function(){},i.overrideNativeVideoTracks=function(){},i.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,n){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Qt(e),t.techs_[e]=n,t.techs_[Mc(e)]=n,e!=="Tech"&&t.defaultTechOrder_.push(e),n},t.getTech=function(e){if(e){if(t.techs_&&t.techs_[e])return t.techs_[e];if(e=Qt(e),F&&F.videojs&&F.videojs[e])return ot.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),F.videojs[e]}},t}(Te);Xi.names.forEach(function(a){var t=Xi[a];Rt.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}}),Rt.prototype.featuresVolumeControl=!0,Rt.prototype.featuresMuteControl=!0,Rt.prototype.featuresFullscreenResize=!1,Rt.prototype.featuresPlaybackRate=!1,Rt.prototype.featuresProgressEvents=!1,Rt.prototype.featuresSourceset=!1,Rt.prototype.featuresTimeupdateEvents=!1,Rt.prototype.featuresNativeTextTracks=!1,Rt.prototype.featuresVideoFrameCallback=!1,Rt.withSourceHandlers=function(a){a.registerSourceHandler=function(i,r){var e=a.sourceHandlers;e||(e=a.sourceHandlers=[]),r===void 0&&(r=e.length),e.splice(r,0,i)},a.canPlayType=function(i){for(var r=a.sourceHandlers||[],e,n=0;n<r.length;n++)if(e=r[n].canPlayType(i),e)return e;return""},a.selectSourceHandler=function(i,r){for(var e=a.sourceHandlers||[],n,s=0;s<e.length;s++)if(n=e[s].canHandleSource(i,r),n)return e[s];return null},a.canPlaySource=function(i,r){var e=a.selectSourceHandler(i,r);return e?e.canHandleSource(i,r):""};var t=["seekable","seeking","duration"];t.forEach(function(i){var r=this[i];typeof r=="function"&&(this[i]=function(){return this.sourceHandler_&&this.sourceHandler_[i]?this.sourceHandler_[i].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},a.prototype),a.prototype.setSource=function(i){var r=a.selectSourceHandler(i,this.options_);r||(a.nativeSourceHandler?r=a.nativeSourceHandler:ot.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==a.nativeSourceHandler&&(this.currentSource_=i),this.sourceHandler_=r.handleSource(i,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}},Te.registerComponent("Tech",Rt),Rt.registerTech("Tech",Rt),Rt.defaultTechOrder_=[];var to={},ug={},Nc={};function ML(a,t){to[a]=to[a]||[],to[a].push(t)}function FL(a,t,i){a.setTimeout(function(){return io(t,to[t.type],i,a)},1)}function NL(a,t){a.forEach(function(i){return i.setTech&&i.setTech(t)})}function UL(a,t,i){return a.reduceRight(lg(i),t[i]())}function BL(a,t,i,r){return t[i](a.reduce(lg(i),r))}function Mb(a,t,i,r){r===void 0&&(r=null);var e="call"+Qt(i),n=a.reduce(lg(e),r),s=n===Nc,o=s?null:t[i](n);return HL(a,i,o,s),o}var jL={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},VL={setCurrentTime:1,setMuted:1,setVolume:1},Fb={play:1,pause:1};function lg(a){return function(t,i){return t===Nc?Nc:i[a]?i[a](t):t}}function HL(a,t,i,r){for(var e=a.length-1;e>=0;e--){var n=a[e];n[t]&&n[t](r,i)}}function $L(a){ug[a.id()]=null}function WL(a,t){var i=ug[a.id()],r=null;if(i==null)return r=t(a),ug[a.id()]=[[t,r]],r;for(var e=0;e<i.length;e++){var n=i[e],s=n[0],o=n[1];s===t&&(r=o)}return r===null&&(r=t(a),i.push([t,r])),r}function io(a,t,i,r,e,n){a===void 0&&(a={}),t===void 0&&(t=[]),e===void 0&&(e=[]),n===void 0&&(n=!1);var s=t,o=s[0],l=s.slice(1);if(typeof o=="string")io(a,to[o],i,r,e,n);else if(o){var f=WL(r,o);if(!f.setSource)return e.push(f),io(a,l,i,r,e,n);f.setSource(Wt({},a),function(m,v){if(m)return io(a,l,i,r,e,n);e.push(f),io(v,a.type===v.type?l:to[v.type],i,r,e,n)})}else l.length?io(a,l,i,r,e,n):n?i(a,e):io(a,to["*"],i,r,e,!0)}var qL={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Uc=function(t){t===void 0&&(t="");var i=og(t),r=qL[i.toLowerCase()];return r||""},GL=function(t,i){if(!i)return"";if(t.cache_.source.src===i&&t.cache_.source.type)return t.cache_.source.type;var r=t.cache_.sources.filter(function(o){return o.src===i});if(r.length)return r[0].type;for(var e=t.$$("source"),n=0;n<e.length;n++){var s=e[n];if(s.type&&s.src&&s.src===i)return s.type}return Uc(i)},zL=function a(t){if(Array.isArray(t)){var i=[];t.forEach(function(r){r=a(r),Array.isArray(r)?i=i.concat(r):Ta(r)&&i.push(r)}),t=i}else typeof t=="string"&&t.trim()?t=[Nb({src:t})]:Ta(t)&&typeof t.src=="string"&&t.src&&t.src.trim()?t=[Nb(t)]:t=[];return t};function Nb(a){if(!a.type){var t=Uc(a.src);t&&(a.type=t)}return a}var KL=function(a){Ae(t,a);function t(i,r,e){var n,s=Ut({createEl:!1},r);if(n=a.call(this,i,s,e)||this,!r.playerOptions.sources||r.playerOptions.sources.length===0)for(var o=0,l=r.playerOptions.techOrder;o<l.length;o++){var f=Qt(l[o]),m=Rt.getTech(f);if(f||(m=Te.getComponent(f)),m&&m.isSupported()){i.loadTech_(f);break}}else i.src(r.playerOptions.sources);return n}return t}(Te);Te.registerComponent("MediaLoader",KL);var Bc=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.options_.controlText&&n.controlText(n.options_.controlText),n.handleMouseOver_=function(s){return n.handleMouseOver(s)},n.handleMouseOut_=function(s){return n.handleMouseOut(s)},n.handleClick_=function(s){return n.handleClick(s)},n.handleKeyDown_=function(s){return n.handleKeyDown(s)},n.emitTapEvents(),n.enable(),n}var i=t.prototype;return i.createEl=function(e,n,s){e===void 0&&(e="div"),n===void 0&&(n={}),s===void 0&&(s={}),n=Wt({className:this.buildCSSClass(),tabIndex:0},n),e==="button"&&ot.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),s=Wt({role:"button"},s),this.tabIndex_=n.tabIndex;var o=Tt(e,n,s);return o.appendChild(Tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},i.dispose=function(){this.controlTextEl_=null,a.prototype.dispose.call(this)},i.createControlTextEl=function(e){return this.controlTextEl_=Tt("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},i.controlText=function(e,n){if(n===void 0&&(n=this.el()),e===void 0)return this.controlText_||"Need Text";var s=this.localize(e);this.controlText_=e,Ys(this.controlTextEl_,s),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&n.setAttribute("title",s)},i.buildCSSClass=function(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)},i.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},i.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},i.handleLanguagechange=function(){this.controlText(this.controlText_)},i.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},i.handleKeyDown=function(e){et.isEventKey(e,"Space")||et.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,e)},t}(Te);Te.registerComponent("ClickableComponent",Bc);var XL=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.update(),n.update_=function(s){return n.update(s)},r.on("posterchange",n.update_),n}var i=t.prototype;return i.dispose=function(){this.player().off("posterchange",this.update_),a.prototype.dispose.call(this)},i.createEl=function(){var e=Tt("div",{className:"vjs-poster",tabIndex:-1});return e},i.update=function(e){var n=this.player().poster();this.setSrc(n),n?this.show():this.hide()},i.setSrc=function(e){var n="";e&&(n='url("'+e+'")'),this.el_.style.backgroundImage=n},i.handleClick=function(e){if(this.player_.controls()){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((td||ed)&&n)&&this.player_.tech(!0).focus(),this.player_.paused()?Vn(this.player_.play()):this.player_.pause()}},t}(Bc);Te.registerComponent("PosterImage",XL);var jr="#222",Ub="#ccc",QL={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function dg(a,t){var i;if(a.length===4)i=a[1]+a[1]+a[2]+a[2]+a[3]+a[3];else if(a.length===7)i=a.slice(1);else throw new Error("Invalid color code provided, "+a+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function fg(a,t,i){try{a.style[t]=i}catch{return}}var YL=function(a){Ae(t,a);function t(r,e,n){var s;s=a.call(this,r,e,n)||this;var o=function(f){return s.updateDisplay(f)};return r.on("loadstart",function(l){return s.toggleDisplay(l)}),r.on("texttrackchange",o),r.on("loadedmetadata",function(l){return s.preselectTrack(l)}),r.ready(Nt(Ue(s),function(){if(r.tech_&&r.tech_.featuresNativeTextTracks){this.hide();return}r.on("fullscreenchange",o),r.on("playerresize",o),F.addEventListener("orientationchange",o),r.on("dispose",function(){return F.removeEventListener("orientationchange",o)});for(var l=this.options_.playerOptions.tracks||[],f=0;f<l.length;f++)this.player_.addRemoteTextTrack(l[f],!0);this.preselectTrack()})),s}var i=t.prototype;return i.preselectTrack=function(){for(var e={captions:1,subtitles:1},n=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,o,l,f,m=0;m<n.length;m++){var v=n[m];s&&s.enabled&&s.language&&s.language===v.language&&v.kind in e?v.kind===s.kind?f=v:f||(f=v):s&&!s.enabled?(f=null,o=null,l=null):v.default&&(v.kind==="descriptions"&&!o?o=v:v.kind in e&&!l&&(l=v))}f?f.mode="showing":l?l.mode="showing":o&&(o.mode="showing")},i.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},i.clearDisplay=function(){typeof F.WebVTT=="function"&&F.WebVTT.processCues(F,[],this.el_)},i.updateDisplay=function(){var e=this.player_.textTracks(),n=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),n){for(var s=[],o=0;o<e.length;++o){var l=e[o];l.mode==="showing"&&s.push(l)}this.updateForTrack(s);return}for(var f=null,m=null,v=e.length;v--;){var y=e[v];y.mode==="showing"&&(y.kind==="descriptions"?f=y:m=y)}m?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(m)):f&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(f))},i.updateDisplayState=function(e){for(var n=this.player_.textTrackSettings.getValues(),s=e.activeCues,o=s.length;o--;){var l=s[o];if(l){var f=l.displayState;if(n.color&&(f.firstChild.style.color=n.color),n.textOpacity&&fg(f.firstChild,"color",dg(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(f.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&fg(f.firstChild,"backgroundColor",dg(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?fg(f,"backgroundColor",dg(n.windowColor,n.windowOpacity)):f.style.backgroundColor=n.windowColor),n.edgeStyle&&(n.edgeStyle==="dropshadow"?f.firstChild.style.textShadow="2px 2px 3px "+jr+", 2px 2px 4px "+jr+", 2px 2px 5px "+jr:n.edgeStyle==="raised"?f.firstChild.style.textShadow="1px 1px "+jr+", 2px 2px "+jr+", 3px 3px "+jr:n.edgeStyle==="depressed"?f.firstChild.style.textShadow="1px 1px "+Ub+", 0 1px "+Ub+", -1px -1px "+jr+", 0 -1px "+jr:n.edgeStyle==="uniform"&&(f.firstChild.style.textShadow="0 0 4px "+jr+", 0 0 4px "+jr+", 0 0 4px "+jr+", 0 0 4px "+jr)),n.fontPercent&&n.fontPercent!==1){var m=F.parseFloat(f.style.fontSize);f.style.fontSize=m*n.fontPercent+"px",f.style.height="auto",f.style.top="auto"}n.fontFamily&&n.fontFamily!=="default"&&(n.fontFamily==="small-caps"?f.firstChild.style.fontVariant="small-caps":f.firstChild.style.fontFamily=QL[n.fontFamily])}}},i.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),!(typeof F.WebVTT!="function"||e.every(function(E){return!E.activeCues}))){for(var n=[],s=0;s<e.length;++s)for(var o=e[s],l=0;l<o.activeCues.length;++l)n.push(o.activeCues[l]);F.WebVTT.processCues(F,n,this.el_);for(var f=0;f<e.length;++f){for(var m=e[f],v=0;v<m.activeCues.length;++v){var y=m.activeCues[v].displayState;Sa(y,"vjs-text-track-cue"),Sa(y,"vjs-text-track-cue-"+(m.language?m.language:f)),m.language&&cu(y,"lang",m.language)}this.player_.textTrackSettings&&this.updateDisplayState(m)}}},t}(Te);Te.registerComponent("TextTrackDisplay",YL);var JL=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.createEl=function(){var e=this.player_.isAudio(),n=this.localize(e?"Audio Player":"Video Player"),s=Tt("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),o=a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(s),o},t}(Te);Te.registerComponent("LoadingSpinner",JL);var ln=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.createEl=function(e,n,s){n===void 0&&(n={}),s===void 0&&(s={}),e="button",n=Wt({className:this.buildCSSClass()},n),s=Wt({type:"button"},s);var o=Tt(e,n,s);return o.appendChild(Tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},i.addChild=function(e,n){n===void 0&&(n={});var s=this.constructor.name;return ot.warn("Adding an actionable (user controllable) child to a Button ("+s+") is not supported; use a ClickableComponent instead."),Te.prototype.addChild.call(this,e,n)},i.enable=function(){a.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){a.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(e){if(et.isEventKey(e,"Space")||et.isEventKey(e,"Enter")){e.stopPropagation();return}a.prototype.handleKeyDown.call(this,e)},t}(Bc);Te.registerComponent("Button",ln);var Bb=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.mouseused_=!1,n.on("mousedown",function(s){return n.handleMouseDown(s)}),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-big-play-button"},i.handleClick=function(e){var n=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;Vn(n),this.player_.tech(!0)&&!((td||ed)&&s)&&this.player_.tech(!0).focus();return}var o=this.player_.getChild("controlBar"),l=o&&o.getChild("playToggle");if(!l){this.player_.tech(!0).focus();return}var f=function(){return l.focus()};sd(n)?n.then(f,function(){}):this.setTimeout(f,1)},i.handleKeyDown=function(e){this.mouseused_=!1,a.prototype.handleKeyDown.call(this,e)},i.handleMouseDown=function(e){this.mouseused_=!0},t}(ln);Bb.prototype.controlText_="Play Video",Te.registerComponent("BigPlayButton",Bb);var ZL=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.controlText(e&&e.controlText||n.localize("Close")),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)},i.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},i.handleKeyDown=function(e){et.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,e)},t}(ln);Te.registerComponent("CloseButton",ZL);var jb=function(a){Ae(t,a);function t(r,e){var n;return e===void 0&&(e={}),n=a.call(this,r,e)||this,e.replay=e.replay===void 0||e.replay,n.on(r,"play",function(s){return n.handlePlay(s)}),n.on(r,"pause",function(s){return n.handlePause(s)}),e.replay&&n.on(r,"ended",function(s){return n.handleEnded(s)}),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-play-control "+a.prototype.buildCSSClass.call(this)},i.handleClick=function(e){this.player_.paused()?Vn(this.player_.play()):this.player_.pause()},i.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},i.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},i.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},i.handleEnded=function(e){var n=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(s){return n.handleSeeked(s)})},t}(ln);jb.prototype.controlText_="Play",Te.registerComponent("PlayToggle",jb);var Vb=function(t,i){t=t<0?0:t;var r=Math.floor(t%60),e=Math.floor(t/60%60),n=Math.floor(t/3600),s=Math.floor(i/60%60),o=Math.floor(i/3600);return(isNaN(t)||t===1/0)&&(n=e=r="-"),n=n>0||o>0?n+":":"",e=((n||s>=10)&&e<10?"0"+e:e)+":",r=r<10?"0"+r:r,n+e+r},cg=Vb;function ek(a){cg=a}function tk(){cg=Vb}function Tu(a,t){return t===void 0&&(t=a),cg(a,t)}var bu=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.on(r,["timeupdate","ended"],function(s){return n.updateContent(s)}),n.updateTextNode_(),n}var i=t.prototype;return i.createEl=function(){var e=this.buildCSSClass(),n=a.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control"}),s=Tt("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+""},{role:"presentation"});return n.appendChild(s),this.contentEl_=Tt("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},i.dispose=function(){this.contentEl_=null,this.textNode_=null,a.prototype.dispose.call(this)},i.updateTextNode_=function(e){var n=this;e===void 0&&(e=0),e=Tu(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(n.contentEl_){var s=n.textNode_;s&&n.contentEl_.firstChild!==s&&(s=null,ot.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),n.textNode_=Se.createTextNode(n.formattedTime_),n.textNode_&&(s?n.contentEl_.replaceChild(n.textNode_,s):n.contentEl_.appendChild(n.textNode_))}}))},i.updateContent=function(e){},t}(Te);bu.prototype.labelText_="Time",bu.prototype.controlText_="Time",Te.registerComponent("TimeDisplay",bu);var hg=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-current-time"},i.updateContent=function(e){var n;this.player_.ended()?n=this.player_.duration():n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(n)},t}(bu);hg.prototype.labelText_="Current Time",hg.prototype.controlText_="Current Time",Te.registerComponent("CurrentTimeDisplay",hg);var pg=function(a){Ae(t,a);function t(r,e){var n;n=a.call(this,r,e)||this;var s=function(l){return n.updateContent(l)};return n.on(r,"durationchange",s),n.on(r,"loadstart",s),n.on(r,"loadedmetadata",s),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-duration"},i.updateContent=function(e){var n=this.player_.duration();this.updateTextNode_(n)},t}(bu);pg.prototype.labelText_="Duration",pg.prototype.controlText_="Duration",Te.registerComponent("DurationDisplay",pg);var ik=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.createEl=function(){var e=a.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=a.prototype.createEl.call(this,"div"),s=a.prototype.createEl.call(this,"span",{textContent:"/"});return n.appendChild(s),e.appendChild(n),e},t}(Te);Te.registerComponent("TimeDivider",ik);var mg=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.on(r,"durationchange",function(s){return n.updateContent(s)}),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-remaining-time"},i.createEl=function(){var e=a.prototype.createEl.call(this);return this.options_.displayNegative!==!1&&e.insertBefore(Tt("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},i.updateContent=function(e){if(typeof this.player_.duration()=="number"){var n;this.player_.ended()?n=0:this.player_.remainingTimeDisplay?n=this.player_.remainingTimeDisplay():n=this.player_.remainingTime(),this.updateTextNode_(n)}},t}(bu);mg.prototype.labelText_="Remaining Time",mg.prototype.controlText_="Remaining Time",Te.registerComponent("RemainingTimeDisplay",mg);var rk=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.updateShowing(),n.on(n.player(),"durationchange",function(s){return n.updateShowing(s)}),n}var i=t.prototype;return i.createEl=function(){var e=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=Tt("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(Tt("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+""})),this.contentEl_.appendChild(Se.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e},i.dispose=function(){this.contentEl_=null,a.prototype.dispose.call(this)},i.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Te);Te.registerComponent("LiveDisplay",rk);var Hb=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.updateLiveEdgeStatus(),n.player_.liveTracker&&(n.updateLiveEdgeStatusHandler_=function(s){return n.updateLiveEdgeStatus(s)},n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatusHandler_)),n}var i=t.prototype;return i.createEl=function(){var e=a.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=Tt("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},i.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},i.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},i.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,a.prototype.dispose.call(this)},t}(ln);Hb.prototype.controlText_="Seek to live, currently playing live",Te.registerComponent("SeekToLive",Hb);var jc=function(t,i,r){return t=Number(t),Math.min(r,Math.max(i,isNaN(t)?i:t))},gg=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.handleMouseDown_=function(s){return n.handleMouseDown(s)},n.handleMouseUp_=function(s){return n.handleMouseUp(s)},n.handleKeyDown_=function(s){return n.handleKeyDown(s)},n.handleClick_=function(s){return n.handleClick(s)},n.handleMouseMove_=function(s){return n.handleMouseMove(s)},n.update_=function(s){return n.update(s)},n.bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}var i=t.prototype;return i.enabled=function(){return this.enabled_},i.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},i.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},i.createEl=function(e,n,s){return n===void 0&&(n={}),s===void 0&&(s={}),n.className=n.className+" vjs-slider",n=Wt({tabIndex:0},n),s=Wt({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},s),a.prototype.createEl.call(this,e,n,s)},i.handleMouseDown=function(e){var n=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!xa&&e.preventDefault(),sb(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(n,"mousemove",this.handleMouseMove_),this.on(n,"mouseup",this.handleMouseUp_),this.on(n,"touchmove",this.handleMouseMove_),this.on(n,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},i.handleMouseMove=function(e){},i.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;ob(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},i.update=function(){var e=this;if(!(!this.el_||!this.bar)){var n=this.getProgress();return n===this.progress_||(this.progress_=n,this.requestNamedAnimationFrame("Slider#update",function(){var s=e.vertical()?"height":"width";e.bar.el().style[s]=(n*100).toFixed(2)+"%"})),n}},i.getProgress=function(){return Number(jc(this.getPercent(),0,1).toFixed(4))},i.calculateDistance=function(e){var n=Pc(this.el_,e);return this.vertical()?n.y:n.x},i.handleKeyDown=function(e){et.isEventKey(e,"Left")||et.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):et.isEventKey(e,"Right")||et.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):a.prototype.handleKeyDown.call(this,e)},i.handleClick=function(e){e.stopPropagation(),e.preventDefault()},i.vertical=function(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(Te);Te.registerComponent("Slider",gg);var vg=function(t,i){return jc(t/i*100,0,100).toFixed(2)+"%"},nk=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.partEls_=[],n.on(r,"progress",function(s){return n.update(s)}),n}var i=t.prototype;return i.createEl=function(){var e=a.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),n=Tt("span",{className:"vjs-control-text"}),s=Tt("span",{textContent:this.localize("Loaded")}),o=Se.createTextNode(": ");return this.percentageEl_=Tt("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(n),n.appendChild(s),n.appendChild(o),n.appendChild(this.percentageEl_),e},i.dispose=function(){this.partEls_=null,this.percentageEl_=null,a.prototype.dispose.call(this)},i.update=function(e){var n=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var s=n.player_.liveTracker,o=n.player_.buffered(),l=s&&s.isLive()?s.seekableEnd():n.player_.duration(),f=n.player_.bufferedEnd(),m=n.partEls_,v=vg(f,l);n.percent_!==v&&(n.el_.style.width=v,Ys(n.percentageEl_,v),n.percent_=v);for(var y=0;y<o.length;y++){var E=o.start(y),I=o.end(y),O=m[y];O||(O=n.el_.appendChild(Tt()),m[y]=O),!(O.dataset.start===E&&O.dataset.end===I)&&(O.dataset.start=E,O.dataset.end=I,O.style.left=vg(E,f),O.style.width=vg(I-E,f))}for(var D=m.length;D>o.length;D--)n.el_.removeChild(m[D-1]);m.length=o.length})},t}(Te);Te.registerComponent("LoadProgressBar",nk);var ak=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.update=Ca(Nt(Ue(n),n.update),un),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},i.update=function(e,n,s){var o=rd(this.el_),l=hu(this.player_.el()),f=e.width*n;if(!(!l||!o)){var m=e.left-l.left+f,v=e.width-f+(l.right-e.right),y=o.width/2;m<y?y+=y-m:v<y&&(y=v),y<0?y=0:y>o.width&&(y=o.width),y=Math.round(y),this.el_.style.right="-"+y+"px",this.write(s)}},i.write=function(e){Ys(this.el_,e)},i.updateTime=function(e,n,s,o){var l=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var f,m=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var v=l.player_.liveTracker.liveWindow(),y=v-n*v;f=(y<1?"":"-")+Tu(y,v)}else f=Tu(s,m);l.update(e,n,f),o&&o()})},t}(Te);Te.registerComponent("TimeTooltip",ak);var _g=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.update=Ca(Nt(Ue(n),n.update),un),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},i.update=function(e,n){var s=this.getChild("timeTooltip");if(s){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(e,n,o)}},t}(Te);_g.prototype.options_={children:[]},!Gi&&!ba&&_g.prototype.options_.children.push("timeTooltip"),Te.registerComponent("PlayProgressBar",_g);var $b=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.update=Ca(Nt(Ue(n),n.update),un),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(e,n){var s=this,o=n*this.player_.duration();this.getChild("timeTooltip").updateTime(e,n,o,function(){s.el_.style.left=e.width*n+"px"})},t}(Te);$b.prototype.options_={children:["timeTooltip"]},Te.registerComponent("MouseTimeDisplay",$b);var Vc=5,Wb=12,yg=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.setEventHandlers_(),n}var i=t.prototype;return i.setEventHandlers_=function(){var e=this;this.update_=Nt(this,this.update),this.update=Ca(this.update_,un),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(n){return e.enableInterval_(n)},this.disableIntervalHandler_=function(n){return e.disableInterval_(n)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Se&&"visibilityState"in Se&&this.on(Se,"visibilitychange",this.toggleVisibility_)},i.toggleVisibility_=function(e){Se.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},i.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,un))},i.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},i.update=function(e){var n=this;if(Se.visibilityState!=="hidden"){var s=a.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),l=n.player_.liveTracker,f=n.player_.duration();l&&l.isLive()&&(f=n.player_.liveTracker.liveCurrentTime()),n.percent_!==s&&(n.el_.setAttribute("aria-valuenow",(s*100).toFixed(2)),n.percent_=s),(n.currentTime_!==o||n.duration_!==f)&&(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[Tu(o,f),Tu(f,f)],"{1} of {2}")),n.currentTime_=o,n.duration_=f),n.bar&&n.bar.update(hu(n.el()),n.getProgress())}),s}},i.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},i.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},i.getPercent=function(){var e=this.getCurrentTime_(),n,s=this.player_.liveTracker;return s&&s.isLive()?(n=(e-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(n=1)):n=e/this.player_.duration(),n},i.handleMouseDown=function(e){nd(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,e))},i.handleMouseMove=function(e,n){if(n===void 0&&(n=!1),!!nd(e)){!n&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var s,o=this.calculateDistance(e),l=this.player_.liveTracker;if(!l||!l.isLive())s=o*this.player_.duration(),s===this.player_.duration()&&(s=s-.1);else{if(o>=.99){l.seekToLiveEdge();return}var f=l.seekableStart(),m=l.liveCurrentTime();if(s=f+o*l.liveWindow(),s>=m&&(s=m),s<=f&&(s=f+.1),s===1/0)return}this.userSeek_(s)}},i.enable=function(){a.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},i.disable=function(){a.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},i.handleMouseUp=function(e){a.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Vn(this.player_.play()):this.update_()},i.stepForward=function(){this.userSeek_(this.player_.currentTime()+Vc)},i.stepBack=function(){this.userSeek_(this.player_.currentTime()-Vc)},i.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleKeyDown=function(e){var n=this.player_.liveTracker;if(et.isEventKey(e,"Space")||et.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(et.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(et.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(et(e))){e.preventDefault(),e.stopPropagation();var s=(et.codes[et(e)]-et.codes[0])*10/100;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else et.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-Vc*Wb)):et.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+Vc*Wb)):a.prototype.handleKeyDown.call(this,e)},i.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Se&&"visibilityState"in Se&&this.off(Se,"visibilitychange",this.toggleVisibility_),a.prototype.dispose.call(this)},t}(gg);yg.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"},!Gi&&!ba&&yg.prototype.options_.children.splice(1,0,"mouseTimeDisplay"),Te.registerComponent("SeekBar",yg);var qb=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.handleMouseMove=Ca(Nt(Ue(n),n.handleMouseMove),un),n.throttledHandleMouseSeek=Ca(Nt(Ue(n),n.handleMouseSeek),un),n.handleMouseUpHandler_=function(s){return n.handleMouseUp(s)},n.handleMouseDownHandler_=function(s){return n.handleMouseDown(s)},n.enable(),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},i.handleMouseMove=function(e){var n=this.getChild("seekBar");if(n){var s=n.getChild("playProgressBar"),o=n.getChild("mouseTimeDisplay");if(!(!s&&!o)){var l=n.el(),f=rd(l),m=Pc(l,e).x;m=jc(m,0,1),o&&o.update(f,m),s&&s.update(f,n.getProgress())}}},i.handleMouseSeek=function(e){var n=this.getChild("seekBar");n&&n.handleMouseMove(e)},i.enabled=function(){return this.enabled_},i.disable=function(){if(this.children().forEach(function(n){return n.disable&&n.disable()}),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Vn(this.player_.play())}},i.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},i.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},i.handleMouseDown=function(e){var n=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(e),this.on(n,"mousemove",this.throttledHandleMouseSeek),this.on(n,"touchmove",this.throttledHandleMouseSeek),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)},i.handleMouseUp=function(e){var n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},t}(Te);qb.prototype.options_={children:["seekBar"]},Te.registerComponent("ProgressControl",qb);var Gb=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.on(r,["enterpictureinpicture","leavepictureinpicture"],function(s){return n.handlePictureInPictureChange(s)}),n.on(r,["disablepictureinpicturechanged","loadedmetadata"],function(s){return n.handlePictureInPictureEnabledChange(s)}),n.on(r,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var s=r.currentType().substring(0,5)==="audio";s||r.audioPosterMode()||r.audioOnlyMode()?(r.isInPictureInPicture()&&r.exitPictureInPicture(),n.hide()):n.show()}),n.disable(),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-picture-in-picture-control "+a.prototype.buildCSSClass.call(this)},i.handlePictureInPictureEnabledChange=function(){Se.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},i.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},i.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(ln);Gb.prototype.controlText_="Picture-in-Picture",Te.registerComponent("PictureInPictureToggle",Gb);var zb=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.on(r,"fullscreenchange",function(s){return n.handleFullscreenChange(s)}),Se[r.fsApi_.fullscreenEnabled]===!1&&n.disable(),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)},i.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},i.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(ln);zb.prototype.controlText_="Fullscreen",Te.registerComponent("FullscreenToggle",zb);var sk=function(t,i){i.tech_&&!i.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(i,"loadstart",function(){i.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})},ok=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.createEl=function(){var e=a.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return e.appendChild(a.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),e},t}(Te);Te.registerComponent("VolumeLevel",ok);var uk=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.update=Ca(Nt(Ue(n),n.update),un),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},i.update=function(e,n,s,o){if(!s){var l=hu(this.el_),f=hu(this.player_.el()),m=e.width*n;if(!f||!l)return;var v=e.left-f.left+m,y=e.width-m+(f.right-e.right),E=l.width/2;v<E?E+=E-v:y<E&&(E=y),E<0?E=0:E>l.width&&(E=l.width),this.el_.style.right="-"+E+"px"}this.write(o+"%")},i.write=function(e){Ys(this.el_,e)},i.updateVolume=function(e,n,s,o,l){var f=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){f.update(e,n,s,o.toFixed(0)),l&&l()})},t}(Te);Te.registerComponent("VolumeLevelTooltip",uk);var Kb=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.update=Ca(Nt(Ue(n),n.update),un),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(e,n,s){var o=this,l=100*n;this.getChild("volumeLevelTooltip").updateVolume(e,n,s,l,function(){s?o.el_.style.bottom=e.height*n+"px":o.el_.style.left=e.width*n+"px"})},t}(Te);Kb.prototype.options_={children:["volumeLevelTooltip"]},Te.registerComponent("MouseVolumeLevelDisplay",Kb);var Hc=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.on("slideractive",function(s){return n.updateLastVolume_(s)}),n.on(r,"volumechange",function(s){return n.updateARIAAttributes(s)}),r.ready(function(){return n.updateARIAAttributes()}),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},i.handleMouseDown=function(e){nd(e)&&a.prototype.handleMouseDown.call(this,e)},i.handleMouseMove=function(e){var n=this.getChild("mouseVolumeLevelDisplay");if(n){var s=this.el(),o=hu(s),l=this.vertical(),f=Pc(s,e);f=l?f.y:f.x,f=jc(f,0,1),n.update(o,f,l)}nd(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},i.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},i.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},i.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},i.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},i.updateARIAAttributes=function(e){var n=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",n),this.el_.setAttribute("aria-valuetext",n+"%")},i.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},i.updateLastVolume_=function(){var e=this,n=this.player_.volume();this.one("sliderinactive",function(){e.player_.volume()===0&&e.player_.lastVolume_(n)})},t}(gg);Hc.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"},!Gi&&!ba&&Hc.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay"),Hc.prototype.playerEvent="volumechange",Te.registerComponent("VolumeBar",Hc);var Xb=function(a){Ae(t,a);function t(r,e){var n;return e===void 0&&(e={}),e.vertical=e.vertical||!1,(typeof e.volumeBar>"u"||Jl(e.volumeBar))&&(e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical),n=a.call(this,r,e)||this,sk(Ue(n),r),n.throttledHandleMouseMove=Ca(Nt(Ue(n),n.handleMouseMove),un),n.handleMouseUpHandler_=function(s){return n.handleMouseUp(s)},n.on("mousedown",function(s){return n.handleMouseDown(s)}),n.on("touchstart",function(s){return n.handleMouseDown(s)}),n.on("mousemove",function(s){return n.handleMouseMove(s)}),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}var i=t.prototype;return i.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},i.handleMouseDown=function(e){var n=this.el_.ownerDocument;this.on(n,"mousemove",this.throttledHandleMouseMove),this.on(n,"touchmove",this.throttledHandleMouseMove),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)},i.handleMouseUp=function(e){var n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseMove),this.off(n,"touchmove",this.throttledHandleMouseMove),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)},i.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Te);Xb.prototype.options_={children:["volumeBar"]},Te.registerComponent("VolumeControl",Xb);var lk=function(t,i){i.tech_&&!i.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(i,"loadstart",function(){i.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})},Qb=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,lk(Ue(n),r),n.on(r,["loadstart","volumechange"],function(s){return n.update(s)}),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)},i.handleClick=function(e){var n=this.player_.volume(),s=this.player_.lastVolume_();if(n===0){var o=s<.1?.1:s;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},i.update=function(e){this.updateIcon_(),this.updateControlText_()},i.updateIcon_=function(){var e=this.player_.volume(),n=3;Gi&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?n=0:e<.33?n=1:e<.67&&(n=2);for(var s=0;s<4;s++)id(this.el_,"vjs-vol-"+s);Sa(this.el_,"vjs-vol-"+n)},i.updateControlText_=function(){var e=this.player_.muted()||this.player_.volume()===0,n=e?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n)},t}(ln);Qb.prototype.controlText_="Mute",Te.registerComponent("MuteToggle",Qb);var Yb=function(a){Ae(t,a);function t(r,e){var n;return e===void 0&&(e={}),typeof e.inline<"u"?e.inline=e.inline:e.inline=!0,(typeof e.volumeControl>"u"||Jl(e.volumeControl))&&(e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline),n=a.call(this,r,e)||this,n.handleKeyPressHandler_=function(s){return n.handleKeyPress(s)},n.on(r,["loadstart"],function(s){return n.volumePanelState_(s)}),n.on(n.muteToggle,"keyup",function(s){return n.handleKeyPress(s)}),n.on(n.volumeControl,"keyup",function(s){return n.handleVolumeControlKeyUp(s)}),n.on("keydown",function(s){return n.handleKeyPress(s)}),n.on("mouseover",function(s){return n.handleMouseOver(s)}),n.on("mouseout",function(s){return n.handleMouseOut(s)}),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}var i=t.prototype;return i.sliderActive_=function(){this.addClass("vjs-slider-active")},i.sliderInactive_=function(){this.removeClass("vjs-slider-active")},i.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},i.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},i.dispose=function(){this.handleMouseOut(),a.prototype.dispose.call(this)},i.handleVolumeControlKeyUp=function(e){et.isEventKey(e,"Esc")&&this.muteToggle.focus()},i.handleMouseOver=function(e){this.addClass("vjs-hover"),br(Se,"keyup",this.handleKeyPressHandler_)},i.handleMouseOut=function(e){this.removeClass("vjs-hover"),Ri(Se,"keyup",this.handleKeyPressHandler_)},i.handleKeyPress=function(e){et.isEventKey(e,"Esc")&&this.handleMouseOut()},t}(Te);Yb.prototype.options_={children:["muteToggle","volumeControl"]},Te.registerComponent("VolumePanel",Yb);var Jb=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,e&&(n.menuButton_=e.menuButton),n.focusedChild_=-1,n.on("keydown",function(s){return n.handleKeyDown(s)}),n.boundHandleBlur_=function(s){return n.handleBlur(s)},n.boundHandleTapClick_=function(s){return n.handleTapClick(s)},n}var i=t.prototype;return i.addEventListenerForItem=function(e){e instanceof Te&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},i.removeEventListenerForItem=function(e){e instanceof Te&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},i.removeChild=function(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),a.prototype.removeChild.call(this,e)},i.addItem=function(e){var n=this.addChild(e);n&&this.addEventListenerForItem(n)},i.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=Tt(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),br(n,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),n},i.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,a.prototype.dispose.call(this)},i.handleBlur=function(e){var n=e.relatedTarget||Se.activeElement;if(!this.children().some(function(o){return o.el()===n})){var s=this.menuButton_;s&&s.buttonPressed_&&n!==s.el().firstChild&&s.unpressButton()}},i.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var n=this.children();if(!Array.isArray(n))return;var s=n.filter(function(o){return o.el()===e.target})[0];if(!s)return;s.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}},i.handleKeyDown=function(e){et.isEventKey(e,"Left")||et.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(et.isEventKey(e,"Right")||et.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},i.stepForward=function(){var e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)},i.stepBack=function(){var e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)},i.focus=function(e){e===void 0&&(e=0);var n=this.children().slice(),s=n.length&&n[0].hasClass("vjs-menu-title");s&&n.shift(),n.length>0&&(e<0?e=0:e>=n.length&&(e=n.length-1),this.focusedChild_=e,n[e].el_.focus())},t}(Te);Te.registerComponent("Menu",Jb);var Tg=function(a){Ae(t,a);function t(r,e){var n;e===void 0&&(e={}),n=a.call(this,r,e)||this,n.menuButton_=new ln(r,e),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var s=ln.prototype.buildCSSClass();n.menuButton_.el_.className=n.buildCSSClass()+" "+s,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0;var o=function(f){return n.handleClick(f)};return n.handleMenuKeyUp_=function(l){return n.handleMenuKeyUp(l)},n.on(n.menuButton_,"tap",o),n.on(n.menuButton_,"click",o),n.on(n.menuButton_,"keydown",function(l){return n.handleKeyDown(l)}),n.on(n.menuButton_,"mouseenter",function(){n.addClass("vjs-hover"),n.menu.show(),br(Se,"keyup",n.handleMenuKeyUp_)}),n.on("mouseleave",function(l){return n.handleMouseLeave(l)}),n.on("keydown",function(l){return n.handleSubmenuKeyDown(l)}),n}var i=t.prototype;return i.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},i.createMenu=function(){var e=new Jb(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var n=Tt("li",{className:"vjs-menu-title",textContent:Qt(this.options_.title),tabIndex:-1}),s=new Te(this.player_,{el:n});e.addItem(s)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)e.addItem(this.items[o]);return e},i.createItems=function(){},i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},i.buildWrapperCSSClass=function(){var e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";var n=ln.prototype.buildCSSClass();return"vjs-menu-button "+e+" "+n+" "+a.prototype.buildCSSClass.call(this)},i.buildCSSClass=function(){var e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+a.prototype.buildCSSClass.call(this)},i.controlText=function(e,n){return n===void 0&&(n=this.menuButton_.el()),this.menuButton_.controlText(e,n)},i.dispose=function(){this.handleMouseLeave(),a.prototype.dispose.call(this)},i.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},i.handleMouseLeave=function(e){this.removeClass("vjs-hover"),Ri(Se,"keyup",this.handleMenuKeyUp_)},i.focus=function(){this.menuButton_.focus()},i.blur=function(){this.menuButton_.blur()},i.handleKeyDown=function(e){et.isEventKey(e,"Esc")||et.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),et.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(et.isEventKey(e,"Up")||et.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},i.handleMenuKeyUp=function(e){(et.isEventKey(e,"Esc")||et.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},i.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},i.handleSubmenuKeyDown=function(e){(et.isEventKey(e,"Esc")||et.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),et.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},i.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),Gi&&tb())return;this.menu.focus()}},i.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},i.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},i.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(Te);Te.registerComponent("MenuButton",Tg);var bg=function(a){Ae(t,a);function t(i,r){var e,n=r.tracks;if(e=a.call(this,i,r)||this,e.items.length<=1&&e.hide(),!n)return Ue(e);var s=Nt(Ue(e),e.update);return n.addEventListener("removetrack",s),n.addEventListener("addtrack",s),n.addEventListener("labelchange",s),e.player_.on("ready",s),e.player_.on("dispose",function(){n.removeEventListener("removetrack",s),n.removeEventListener("addtrack",s),n.removeEventListener("labelchange",s)}),e}return t}(Tg);Te.registerComponent("TrackButton",bg);var dk=["Tab","Esc","Up","Down","Right","Left"],ud=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.selectable=e.selectable,n.isSelected_=e.selected||!1,n.multiSelectable=e.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}var i=t.prototype;return i.createEl=function(e,n,s){this.nonIconControl=!0;var o=a.prototype.createEl.call(this,"li",Wt({className:"vjs-menu-item",tabIndex:-1},n),s);return o.replaceChild(Tt("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},i.handleKeyDown=function(e){dk.some(function(n){return et.isEventKey(e,n)})||a.prototype.handleKeyDown.call(this,e)},i.handleClick=function(e){this.selected(!0)},i.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(Bc);Te.registerComponent("MenuItem",ud);var ld=function(a){Ae(t,a);function t(r,e){var n,s=e.track,o=r.textTracks();e.label=s.label||s.language||"Unknown",e.selected=s.mode==="showing",n=a.call(this,r,e)||this,n.track=s,n.kinds=(e.kinds||[e.kind||n.track.kind]).filter(Boolean);var l=function(){for(var y=arguments.length,E=new Array(y),I=0;I<y;I++)E[I]=arguments[I];n.handleTracksChange.apply(Ue(n),E)},f=function(){for(var y=arguments.length,E=new Array(y),I=0;I<y;I++)E[I]=arguments[I];n.handleSelectedLanguageChange.apply(Ue(n),E)};if(r.on(["loadstart","texttrackchange"],l),o.addEventListener("change",l),o.addEventListener("selectedlanguagechange",f),n.on("dispose",function(){r.off(["loadstart","texttrackchange"],l),o.removeEventListener("change",l),o.removeEventListener("selectedlanguagechange",f)}),o.onchange===void 0){var m;n.on(["tap","click"],function(){if(typeof F.Event!="object")try{m=new F.Event("change")}catch{}m||(m=Se.createEvent("Event"),m.initEvent("change",!0,!0)),o.dispatchEvent(m)})}return n.handleTracksChange(),n}var i=t.prototype;return i.handleClick=function(e){var n=this.track,s=this.player_.textTracks();if(a.prototype.handleClick.call(this,e),!!s)for(var o=0;o<s.length;o++){var l=s[o];this.kinds.indexOf(l.kind)!==-1&&(l===n?l.mode!=="showing"&&(l.mode="showing"):l.mode!=="disabled"&&(l.mode="disabled"))}},i.handleTracksChange=function(e){var n=this.track.mode==="showing";n!==this.isSelected_&&this.selected(n)},i.handleSelectedLanguageChange=function(e){if(this.track.mode==="showing"){var n=this.player_.cache_.selectedLanguage;if(n&&n.enabled&&n.language===this.track.language&&n.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},i.dispose=function(){this.track=null,a.prototype.dispose.call(this)},t}(ud);Te.registerComponent("TextTrackMenuItem",ld);var Zb=function(a){Ae(t,a);function t(r,e){return e.track={player:r,kind:e.kind,kinds:e.kinds,default:!1,mode:"disabled"},e.kinds||(e.kinds=[e.kind]),e.label?e.track.label=e.label:e.track.label=e.kinds.join(" and ")+" off",e.selectable=!0,e.multiSelectable=!1,a.call(this,r,e)||this}var i=t.prototype;return i.handleTracksChange=function(e){for(var n=this.player().textTracks(),s=!0,o=0,l=n.length;o<l;o++){var f=n[o];if(this.options_.kinds.indexOf(f.kind)>-1&&f.mode==="showing"){s=!1;break}}s!==this.isSelected_&&this.selected(s)},i.handleSelectedLanguageChange=function(e){for(var n=this.player().textTracks(),s=!0,o=0,l=n.length;o<l;o++){var f=n[o];if(["captions","descriptions","subtitles"].indexOf(f.kind)>-1&&f.mode==="showing"){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(ld);Te.registerComponent("OffTextTrackMenuItem",Zb);var xu=function(a){Ae(t,a);function t(r,e){return e===void 0&&(e={}),e.tracks=r.textTracks(),a.call(this,r,e)||this}var i=t.prototype;return i.createItems=function(e,n){e===void 0&&(e=[]),n===void 0&&(n=ld);var s;this.label_&&(s=this.label_+" off"),e.push(new Zb(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var l=0;l<o.length;l++){var f=o[l];if(this.kinds_.indexOf(f.kind)>-1){var m=new n(this.player_,{track:f,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});m.addClass("vjs-"+f.kind+"-menu-item"),e.push(m)}}return e},t}(bg);Te.registerComponent("TextTrackButton",xu);var ex=function(a){Ae(t,a);function t(r,e){var n,s=e.track,o=e.cue,l=r.currentTime();return e.selectable=!0,e.multiSelectable=!1,e.label=o.text,e.selected=o.startTime<=l&&l<o.endTime,n=a.call(this,r,e)||this,n.track=s,n.cue=o,n}var i=t.prototype;return i.handleClick=function(e){a.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},t}(ud);Te.registerComponent("ChaptersTrackMenuItem",ex);var xg=function(a){Ae(t,a);function t(r,e,n){var s;return s=a.call(this,r,e,n)||this,s.selectCurrentItem_=function(){s.items.forEach(function(o){o.selected(s.track_.activeCues[0]===o.cue)})},s}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildWrapperCSSClass.call(this)},i.update=function(e){if(!(e&&e.track&&e.track.kind!=="chapters")){var n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),a.prototype.update.call(this)):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&a.prototype.update.call(this)}},i.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},i.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],n=e.length-1;n>=0;n--){var s=e[n];if(s.kind===this.kind_)return s}},i.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Qt(this.kind_))},i.createMenu=function(){return this.options_.title=this.getMenuCaption(),a.prototype.createMenu.call(this)},i.createItems=function(){var e=[];if(!this.track_)return e;var n=this.track_.cues;if(!n)return e;for(var s=0,o=n.length;s<o;s++){var l=n[s],f=new ex(this.player_,{track:this.track_,cue:l});e.push(f)}return e},t}(xu);xg.prototype.kind_="chapters",xg.prototype.controlText_="Chapters",Te.registerComponent("ChaptersButton",xg);var Sg=function(a){Ae(t,a);function t(r,e,n){var s;s=a.call(this,r,e,n)||this;var o=r.textTracks(),l=Nt(Ue(s),s.handleTracksChange);return o.addEventListener("change",l),s.on("dispose",function(){o.removeEventListener("change",l)}),s}var i=t.prototype;return i.handleTracksChange=function(e){for(var n=this.player().textTracks(),s=!1,o=0,l=n.length;o<l;o++){var f=n[o];if(f.kind!==this.kind_&&f.mode==="showing"){s=!0;break}}s?this.disable():this.enable()},i.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)},t}(xu);Sg.prototype.kind_="descriptions",Sg.prototype.controlText_="Descriptions",Te.registerComponent("DescriptionsButton",Sg);var Eg=function(a){Ae(t,a);function t(r,e,n){return a.call(this,r,e,n)||this}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildWrapperCSSClass.call(this)},t}(xu);Eg.prototype.kind_="subtitles",Eg.prototype.controlText_="Subtitles",Te.registerComponent("SubtitlesButton",Eg);var wg=function(a){Ae(t,a);function t(r,e){var n;return e.track={player:r,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"},e.selectable=!1,e.name="CaptionSettingsMenuItem",n=a.call(this,r,e)||this,n.addClass("vjs-texttrack-settings"),n.controlText(", opens "+e.kind+" settings dialog"),n}var i=t.prototype;return i.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(ld);Te.registerComponent("CaptionSettingsMenuItem",wg);var Cg=function(a){Ae(t,a);function t(r,e,n){return a.call(this,r,e,n)||this}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-captions-button "+a.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new wg(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),a.prototype.createItems.call(this,e)},t}(xu);Cg.prototype.kind_="captions",Cg.prototype.controlText_="Captions",Te.registerComponent("CaptionsButton",Cg);var tx=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.createEl=function(e,n,s){var o=a.prototype.createEl.call(this,e,n,s),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(l.appendChild(Tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(Tt("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},t}(ld);Te.registerComponent("SubsCapsMenuItem",tx);var Ag=function(a){Ae(t,a);function t(r,e){var n;return e===void 0&&(e={}),n=a.call(this,r,e)||this,n.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1&&(n.label_="captions"),n.menuButton_.controlText(Qt(n.label_)),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new wg(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=a.prototype.createItems.call(this,e,tx),e},t}(xu);Ag.prototype.kinds_=["captions","subtitles"],Ag.prototype.controlText_="Subtitles",Te.registerComponent("SubsCapsButton",Ag);var ix=function(a){Ae(t,a);function t(r,e){var n,s=e.track,o=r.audioTracks();e.label=s.label||s.language||"Unknown",e.selected=s.enabled,n=a.call(this,r,e)||this,n.track=s,n.addClass("vjs-"+s.kind+"-menu-item");var l=function(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];n.handleTracksChange.apply(Ue(n),v)};return o.addEventListener("change",l),n.on("dispose",function(){o.removeEventListener("change",l)}),n}var i=t.prototype;return i.createEl=function(e,n,s){var o=a.prototype.createEl.call(this,e,n,s),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(l.appendChild(Tt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(Tt("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o},i.handleClick=function(e){if(a.prototype.handleClick.call(this,e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var n=this.player_.audioTracks(),s=0;s<n.length;s++){var o=n[s];o!==this.track&&(o.enabled=o===this.track)}},i.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(ud);Te.registerComponent("AudioTrackMenuItem",ix);var rx=function(a){Ae(t,a);function t(r,e){return e===void 0&&(e={}),e.tracks=r.audioTracks(),a.call(this,r,e)||this}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-audio-button "+a.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-audio-button "+a.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(e){e===void 0&&(e=[]),this.hideThreshold_=1;for(var n=this.player_.audioTracks(),s=0;s<n.length;s++){var o=n[s];e.push(new ix(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return e},t}(bg);rx.prototype.controlText_="Audio Track",Te.registerComponent("AudioTrackButton",rx);var Ig=function(a){Ae(t,a);function t(r,e){var n,s=e.rate,o=parseFloat(s,10);return e.label=s,e.selected=o===r.playbackRate(),e.selectable=!0,e.multiSelectable=!1,n=a.call(this,r,e)||this,n.label=s,n.rate=o,n.on(r,"ratechange",function(l){return n.update(l)}),n}var i=t.prototype;return i.handleClick=function(e){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},i.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(ud);Ig.prototype.contentElType="button",Te.registerComponent("PlaybackRateMenuItem",Ig);var nx=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.menuButton_.el_.setAttribute("aria-describedby",n.labelElId_),n.updateVisibility(),n.updateLabel(),n.on(r,"loadstart",function(s){return n.updateVisibility(s)}),n.on(r,"ratechange",function(s){return n.updateLabel(s)}),n.on(r,"playbackrateschange",function(s){return n.handlePlaybackRateschange(s)}),n}var i=t.prototype;return i.createEl=function(){var e=a.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=Tt("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e},i.dispose=function(){this.labelEl_=null,a.prototype.dispose.call(this)},i.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){for(var e=this.playbackRates(),n=[],s=e.length-1;s>=0;s--)n.push(new Ig(this.player(),{rate:e[s]+"x"}));return n},i.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},i.handleClick=function(e){var n=this.player().playbackRate(),s=this.playbackRates(),o=s.indexOf(n),l=(o+1)%s.length;this.player().playbackRate(s[l])},i.handlePlaybackRateschange=function(e){this.update()},i.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},i.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},i.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},i.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},t}(Tg);nx.prototype.controlText_="Playback Rate",Te.registerComponent("PlaybackRateMenuButton",nx);var ax=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-spacer "+a.prototype.buildCSSClass.call(this)},i.createEl=function(e,n,s){return e===void 0&&(e="div"),n===void 0&&(n={}),s===void 0&&(s={}),n.className||(n.className=this.buildCSSClass()),a.prototype.createEl.call(this,e,n,s)},t}(Te);Te.registerComponent("Spacer",ax);var fk=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-custom-control-spacer "+a.prototype.buildCSSClass.call(this)},i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:""})},t}(ax);Te.registerComponent("CustomControlSpacer",fk);var $c=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Te);$c.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]},"exitPictureInPicture"in Se&&$c.prototype.options_.children.splice($c.prototype.options_.children.length-1,0,"pictureInPictureToggle"),Te.registerComponent("ControlBar",$c);var sx=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.on(r,"error",function(s){return n.open(s)}),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)},i.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(gu);sx.prototype.options_=Di({},gu.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0}),Te.registerComponent("ErrorDisplay",sx);var Pg="vjs-text-track-settings",ox=["#000","Black"],ux=["#00F","Blue"],lx=["#0FF","Cyan"],dx=["#0F0","Green"],fx=["#F0F","Magenta"],cx=["#F00","Red"],hx=["#FFF","White"],px=["#FF0","Yellow"],Og=["1","Opaque"],Dg=["0.5","Semi-Transparent"],mx=["0","Transparent"],ro={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[ox,hx,cx,dx,ux,px,fx,lx]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[Og,Dg,mx]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[hx,ox,cx,dx,ux,px,fx,lx]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return t==="1.00"?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[Og,Dg]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[mx,Dg,Og]}};ro.windowColor.options=ro.backgroundColor.options;function gx(a,t){if(t&&(a=t(a)),a&&a!=="none")return a}function ck(a,t){var i=a.options[a.options.selectedIndex].value;return gx(i,t)}function hk(a,t,i){if(t){for(var r=0;r<a.options.length;r++)if(gx(a.options[r].value,i)===t){a.selectedIndex=r;break}}}var pk=function(a){Ae(t,a);function t(r,e){var n;return e.temporary=!1,n=a.call(this,r,e)||this,n.updateDisplay=n.updateDisplay.bind(Ue(n)),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=Tt("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),e.persistTextTrackSettings===void 0&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),uu(ro,function(s){n.on(n.$(s.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}var i=t.prototype;return i.dispose=function(){this.endDialog=null,a.prototype.dispose.call(this)},i.createElSelect_=function(e,n,s){var o=this;n===void 0&&(n=""),s===void 0&&(s="label");var l=ro[e],f=l.id.replace("%s",this.id_),m=[n,f].join(" ").trim();return["<"+s+' id="'+f+'" class="'+(s==="label"?"vjs-label":"")+'">',this.localize(l.label),"</"+s+">",'<select aria-labelledby="'+m+'">'].concat(l.options.map(function(v){var y=f+"-"+v[1].replace(/\W+/g,"");return['<option id="'+y+'" value="'+v[0]+'" ','aria-labelledby="'+m+" "+y+'">',o.localize(v[1]),"</option>"].join("")})).concat("</select>").join("")},i.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},i.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},i.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},i.createElColors_=function(){return Tt("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},i.createElFont_=function(){return Tt("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},i.createElControls_=function(){var e=this.localize("restore all settings to the default values");return Tt("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},i.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},i.label=function(){return this.localize("Caption Settings Dialog")},i.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},i.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},i.getValues=function(){var e=this;return iL(ro,function(n,s,o){var l=ck(e.$(s.selector),s.parser);return l!==void 0&&(n[o]=l),n},{})},i.setValues=function(e){var n=this;uu(ro,function(s,o){hk(n.$(s.selector),e[o],s.parser)})},i.setDefaults=function(){var e=this;uu(ro,function(n){var s=n.hasOwnProperty("default")?n.default:0;e.$(n.selector).selectedIndex=s})},i.restoreSettings=function(){var e;try{e=JSON.parse(F.localStorage.getItem(Pg))}catch(n){ot.warn(n)}e&&this.setValues(e)},i.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?F.localStorage.setItem(Pg,JSON.stringify(e)):F.localStorage.removeItem(Pg)}catch(n){ot.warn(n)}}},i.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},i.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,n=e&&e.subsCapsButton,s=e&&e.captionsButton;n?n.focus():s&&s.focus()},t}(gu);Te.registerComponent("TextTrackSettings",pk);var mk=function(a){Ae(t,a);function t(r,e){var n,s=e.ResizeObserver||F.ResizeObserver;e.ResizeObserver===null&&(s=!1);var o=Ut({createEl:!s,reportTouchActivity:!1},e);return n=a.call(this,r,o)||this,n.ResizeObserver=e.ResizeObserver||F.ResizeObserver,n.loadListener_=null,n.resizeObserver_=null,n.debouncedHandler_=hL(function(){n.resizeHandler()},100,!1,Ue(n)),s?(n.resizeObserver_=new n.ResizeObserver(n.debouncedHandler_),n.resizeObserver_.observe(r.el())):(n.loadListener_=function(){if(!(!n.el_||!n.el_.contentWindow)){var l=n.debouncedHandler_,f=n.unloadListener_=function(){Ri(this,"resize",l),Ri(this,"unload",f),f=null};br(n.el_.contentWindow,"unload",f),br(n.el_.contentWindow,"resize",l)}},n.one("load",n.loadListener_)),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},i.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},i.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,a.prototype.dispose.call(this)},t}(Te);Te.registerComponent("ResizeManager",mk);var gk={trackingThreshold:20,liveTolerance:15},vk=function(a){Ae(t,a);function t(r,e){var n,s=Ut(gk,e,{createEl:!1});return n=a.call(this,r,s)||this,n.handleVisibilityChange_=function(o){return n.handleVisibilityChange(o)},n.trackLiveHandler_=function(){return n.trackLive_()},n.handlePlay_=function(o){return n.handlePlay(o)},n.handleFirstTimeupdate_=function(o){return n.handleFirstTimeupdate(o)},n.handleSeeked_=function(o){return n.handleSeeked(o)},n.seekToLiveEdge_=function(o){return n.seekToLiveEdge(o)},n.reset_(),n.on(n.player_,"durationchange",function(o){return n.handleDurationchange(o)}),n.on(n.player_,"canplay",function(){return n.toggleTracking()}),td&&"hidden"in Se&&"visibilityState"in Se&&n.on(Se,"visibilitychange",n.handleVisibilityChange_),n}var i=t.prototype;return i.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Se.hidden?this.stopTracking():this.startTracking())},i.trackLive_=function(){var e=this.player_.seekable();if(!(!e||!e.length)){var n=Number(F.performance.now().toFixed(4)),s=this.lastTime_===-1?0:(n-this.lastTime_)/1e3;this.lastTime_=n,this.pastSeekEnd_=this.pastSeekEnd()+s;var o=this.liveCurrentTime(),l=this.player_.currentTime(),f=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-l)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(f=!1),f!==this.behindLiveEdge_&&(this.behindLiveEdge_=f,this.trigger("liveedgechange"))}},i.handleDurationchange=function(){this.toggleTracking()},i.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},i.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,un),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},i.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},i.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()},i.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},i.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},i.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},i.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},i.seekableEnd=function(){for(var e=this.player_.seekable(),n=[],s=e?e.length:0;s--;)n.push(e.end(s));return n.length?n.sort()[n.length-1]:1/0},i.seekableStart=function(){for(var e=this.player_.seekable(),n=[],s=e?e.length:0;s--;)n.push(e.start(s));return n.length?n.sort()[0]:0},i.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},i.isLive=function(){return this.isTracking()},i.atLiveEdge=function(){return!this.behindLiveEdge()},i.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},i.pastSeekEnd=function(){var e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},i.behindLiveEdge=function(){return this.behindLiveEdge_},i.isTracking=function(){return typeof this.trackingInterval_=="number"},i.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},i.dispose=function(){this.off(Se,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),a.prototype.dispose.call(this)},t}(Te);Te.registerComponent("LiveTracker",vk);var Lg=function(t){var i=t.el();if(i.hasAttribute("src"))return t.triggerSourceset(i.src),!0;var r=t.$$("source"),e=[],n="";if(!r.length)return!1;for(var s=0;s<r.length;s++){var o=r[s].src;o&&e.indexOf(o)===-1&&e.push(o)}return e.length?(e.length===1&&(n=e[0]),t.triggerSourceset(n),!0):!1},_k=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(t){var i=Se.createElement(this.nodeName.toLowerCase());i.innerHTML=t;for(var r=Se.createDocumentFragment();i.childNodes.length;)r.appendChild(i.childNodes[0]);return this.innerText="",F.Element.prototype.appendChild.call(this,r),this.innerHTML}}),vx=function(t,i){for(var r={},e=0;e<t.length&&(r=Object.getOwnPropertyDescriptor(t[e],i),!(r&&r.set&&r.get));e++);return r.enumerable=!0,r.configurable=!0,r},yk=function(t){return vx([t.el(),F.HTMLMediaElement.prototype,F.Element.prototype,_k],"innerHTML")},_x=function(t){var i=t.el();if(!i.resetSourceWatch_){var r={},e=yk(t),n=function(o){return function(){for(var l=arguments.length,f=new Array(l),m=0;m<l;m++)f[m]=arguments[m];var v=o.apply(i,f);return Lg(t),v}};["append","appendChild","insertAdjacentHTML"].forEach(function(s){i[s]&&(r[s]=i[s],i[s]=n(r[s]))}),Object.defineProperty(i,"innerHTML",Ut(e,{set:n(e.set)})),i.resetSourceWatch_=function(){i.resetSourceWatch_=null,Object.keys(r).forEach(function(s){i[s]=r[s]}),Object.defineProperty(i,"innerHTML",e)},t.one("sourceset",i.resetSourceWatch_)}},Tk=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?Ib(F.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return F.Element.prototype.setAttribute.call(this,"src",t),t}}),bk=function(t){return vx([t.el(),F.HTMLMediaElement.prototype,Tk],"src")},xk=function(t){if(t.featuresSourceset){var i=t.el();if(!i.resetSourceset_){var r=bk(t),e=i.setAttribute,n=i.load;Object.defineProperty(i,"src",Ut(r,{set:function(o){var l=r.set.call(i,o);return t.triggerSourceset(i.src),l}})),i.setAttribute=function(s,o){var l=e.call(i,s,o);return/src/i.test(s)&&t.triggerSourceset(i.src),l},i.load=function(){var s=n.call(i);return Lg(t)||(t.triggerSourceset(""),_x(t)),s},i.currentSrc?t.triggerSourceset(i.currentSrc):Lg(t)||_x(t),i.resetSourceset_=function(){i.resetSourceset_=null,i.load=n,i.setAttribute=e,Object.defineProperty(i,"src",r),i.resetSourceWatch_&&i.resetSourceWatch_()}}}},kg=function(t,i,r,e){e===void 0&&(e=!0);var n=function(l){return Object.defineProperty(t,i,{value:l,enumerable:!0,writable:!0})},s={configurable:!0,enumerable:!0,get:function(){var l=r();return n(l),l}};return e&&(s.set=n),Object.defineProperty(t,i,s)},De=function(a){Ae(t,a);function t(r,e){var n;n=a.call(this,r,e)||this;var s=r.source,o=!1;if(n.featuresVideoFrameCallback=n.featuresVideoFrameCallback&&n.el_.tagName==="VIDEO",s&&(n.el_.currentSrc!==s.src||r.tag&&r.tag.initNetworkState_===3)?n.setSource(s):n.handleLateInit_(n.el_),r.enableSourceset&&n.setupSourcesetHandling_(),n.isScrubbing_=!1,n.el_.hasChildNodes()){for(var l=n.el_.childNodes,f=l.length,m=[];f--;){var v=l[f],y=v.nodeName.toLowerCase();y==="track"&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(v),n.remoteTextTracks().addTrack(v.track),n.textTracks().addTrack(v.track),!o&&!n.el_.hasAttribute("crossorigin")&&Fc(v.src)&&(o=!0)):m.push(v))}for(var E=0;E<m.length;E++)n.el_.removeChild(m[E])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&o&&ot.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),n.restoreMetadataTracksInIOSNativePlayer_(),(lu||Hm||XT)&&r.nativeControlsForTouch===!0&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}var i=t.prototype;return i.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,a.prototype.dispose.call(this)},i.setupSourcesetHandling_=function(){xk(this)},i.restoreMetadataTracksInIOSNativePlayer_=function(){var e=this.textTracks(),n,s=function(){n=[];for(var f=0;f<e.length;f++){var m=e[f];m.kind==="metadata"&&n.push({track:m,storedMode:m.mode})}};s(),e.addEventListener("change",s),this.on("dispose",function(){return e.removeEventListener("change",s)});var o=function l(){for(var f=0;f<n.length;f++){var m=n[f];m.track.mode==="disabled"&&m.track.mode!==m.storedMode&&(m.track.mode=m.storedMode)}e.removeEventListener("change",l)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",s),e.removeEventListener("change",o),e.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){e.removeEventListener("change",s),e.addEventListener("change",s),e.removeEventListener("change",o)})},i.overrideNative_=function(e,n){var s=this;if(n===this["featuresNative"+e+"Tracks"]){var o=e.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(l){var f=s.el()[o+"Tracks"];f.removeEventListener(l,s[o+"TracksListeners_"][l])}),this["featuresNative"+e+"Tracks"]=!n,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},i.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},i.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},i.proxyNativeTracksForType_=function(e){var n=this,s=Br[e],o=this.el()[s.getterName],l=this[s.getterName]();if(!(!this["featuresNative"+s.capitalName+"Tracks"]||!o||!o.addEventListener)){var f={change:function(y){var E={type:"change",target:l,currentTarget:l,srcElement:l};l.trigger(E),e==="text"&&n[yu.remoteText.getterName]().trigger(E)},addtrack:function(y){l.addTrack(y.track)},removetrack:function(y){l.removeTrack(y.track)}},m=function(){for(var y=[],E=0;E<l.length;E++){for(var I=!1,O=0;O<o.length;O++)if(o[O]===l[E]){I=!0;break}I||y.push(l[E])}for(;y.length;)l.removeTrack(y.shift())};this[s.getterName+"Listeners_"]=f,Object.keys(f).forEach(function(v){var y=f[v];o.addEventListener(v,y),n.on("dispose",function(E){return o.removeEventListener(v,y)})}),this.on("loadstart",m),this.on("dispose",function(v){return n.off("loadstart",m)})}},i.proxyNativeTracks_=function(){var e=this;Br.names.forEach(function(n){e.proxyNativeTracksForType_(n)})},i.createEl=function(){var e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=Se.createElement("video");var s=this.options_.tag&&Ea(this.options_.tag),o=Ut({},s);(!lu||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,nb(e,Wt(o,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&cu(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var l=["loop","muted","playsinline","autoplay"],f=0;f<l.length;f++){var m=l[f],v=this.options_[m];typeof v<"u"&&(v?cu(e,m,m):Ic(e,m),e[m]=v)}return e},i.handleLateInit_=function(e){if(!(e.networkState===0||e.networkState===3)){if(e.readyState===0){var n=!1,s=function(){n=!0};this.on("loadstart",s);var o=function(){n||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",o),n||this.trigger("loadstart")});return}var l=["loadstart"];l.push("loadedmetadata"),e.readyState>=2&&l.push("loadeddata"),e.readyState>=3&&l.push("canplay"),e.readyState>=4&&l.push("canplaythrough"),this.ready(function(){l.forEach(function(f){this.trigger(f)},this)})}},i.setScrubbing=function(e){this.isScrubbing_=e},i.scrubbing=function(){return this.isScrubbing_},i.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&Ac?this.el_.fastSeek(e):this.el_.currentTime=e}catch(n){ot(n,"Video is not ready. (Video.js)")}},i.duration=function(){var e=this;if(this.el_.duration===1/0&&ba&&xa&&this.el_.currentTime===0){var n=function s(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",s))};return this.on("timeupdate",n),NaN}return this.el_.duration||NaN},i.width=function(){return this.el_.offsetWidth},i.height=function(){return this.el_.offsetHeight},i.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var n=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},s=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",n),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",s),this.on("dispose",function(){e.off("webkitbeginfullscreen",s),e.off("webkitendfullscreen",n)})}},i.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var e=F.navigator&&F.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},i.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Vn(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},0);else try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},i.exitFullScreen=function(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()},i.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},i.requestVideoFrameCallback=function(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):a.prototype.requestVideoFrameCallback.call(this,e)},i.cancelVideoFrameCallback=function(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):a.prototype.cancelVideoFrameCallback.call(this,e)},i.src=function(e){if(e===void 0)return this.el_.src;this.setSrc(e)},i.reset=function(){t.resetMediaElement(this.el_)},i.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},i.setControls=function(e){this.el_.controls=!!e},i.addTextTrack=function(e,n,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,n,s):a.prototype.addTextTrack.call(this,e,n,s)},i.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return a.prototype.createRemoteTextTrack.call(this,e);var n=Se.createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n},i.addRemoteTextTrack=function(e,n){var s=a.prototype.addRemoteTextTrack.call(this,e,n);return this.featuresNativeTextTracks&&this.el().appendChild(s),s},i.removeRemoteTextTrack=function(e){if(a.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var n=this.$$("track"),s=n.length;s--;)(e===n[s]||e===n[s].track)&&this.el().removeChild(n[s])},i.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),F.performance&&typeof F.performance.now=="function"?e.creationTime=F.performance.now():F.performance&&F.performance.timing&&typeof F.performance.timing.navigationStart=="number"&&(e.creationTime=F.Date.now()-F.performance.timing.navigationStart),e},t}(Rt);kg(De,"TEST_VID",function(){if(du()){var a=Se.createElement("video"),t=Se.createElement("track");return t.kind="captions",t.srclang="en",t.label="English",a.appendChild(t),a}}),De.isSupported=function(){try{De.TEST_VID.volume=.5}catch{return!1}return!!(De.TEST_VID&&De.TEST_VID.canPlayType)},De.canPlayType=function(a){return De.TEST_VID.canPlayType(a)},De.canPlaySource=function(a,t){return De.canPlayType(a.type)},De.canControlVolume=function(){try{var a=De.TEST_VID.volume;De.TEST_VID.volume=a/2+.1;var t=a!==De.TEST_VID.volume;return t&&Gi?(F.setTimeout(function(){De&&De.prototype&&(De.prototype.featuresVolumeControl=a!==De.TEST_VID.volume)}),!1):t}catch{return!1}},De.canMuteVolume=function(){try{var a=De.TEST_VID.muted;return De.TEST_VID.muted=!a,De.TEST_VID.muted?cu(De.TEST_VID,"muted","muted"):Ic(De.TEST_VID,"muted","muted"),a!==De.TEST_VID.muted}catch{return!1}},De.canControlPlaybackRate=function(){if(ba&&xa&&YT<58)return!1;try{var a=De.TEST_VID.playbackRate;return De.TEST_VID.playbackRate=a/2+.1,a!==De.TEST_VID.playbackRate}catch{return!1}},De.canOverrideAttributes=function(){try{var a=function(){};Object.defineProperty(Se.createElement("video"),"src",{get:a,set:a}),Object.defineProperty(Se.createElement("audio"),"src",{get:a,set:a}),Object.defineProperty(Se.createElement("video"),"innerHTML",{get:a,set:a}),Object.defineProperty(Se.createElement("audio"),"innerHTML",{get:a,set:a})}catch{return!1}return!0},De.supportsNativeTextTracks=function(){return Ac||Gi&&xa},De.supportsNativeVideoTracks=function(){return!!(De.TEST_VID&&De.TEST_VID.videoTracks)},De.supportsNativeAudioTracks=function(){return!!(De.TEST_VID&&De.TEST_VID.audioTracks)},De.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"],[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(a){var t=a[0],i=a[1];kg(De.prototype,t,function(){return De[i]()},!0)}),De.prototype.featuresVolumeControl=De.canControlVolume(),De.prototype.movingMediaElementInDOM=!Gi,De.prototype.featuresFullscreenResize=!0,De.prototype.featuresProgressEvents=!0,De.prototype.featuresTimeupdateEvents=!0,De.prototype.featuresVideoFrameCallback=!!(De.TEST_VID&&De.TEST_VID.requestVideoFrameCallback);var Wc;De.patchCanPlayType=function(){Bm>=4&&!QT&&!xa&&(Wc=De.TEST_VID&&De.TEST_VID.constructor.prototype.canPlayType,De.TEST_VID.constructor.prototype.canPlayType=function(a){var t=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return a&&t.test(a)?"maybe":Wc.call(this,a)})},De.unpatchCanPlayType=function(){var a=De.TEST_VID.constructor.prototype.canPlayType;return Wc&&(De.TEST_VID.constructor.prototype.canPlayType=Wc),a},De.patchCanPlayType(),De.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src"),typeof a.load=="function"&&function(){try{a.load()}catch{}}()}},De.resetMediaElement=function(a){if(a){for(var t=a.querySelectorAll("source"),i=t.length;i--;)a.removeChild(t[i]);a.removeAttribute("src"),typeof a.load=="function"&&function(){try{a.load()}catch{}}()}},["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(a){De.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}}),["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){De.prototype["set"+Qt(a)]=function(t){this.el_[a]=t,t?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}}),["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(a){De.prototype[a]=function(){return this.el_[a]}}),["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(a){De.prototype["set"+Qt(a)]=function(t){this.el_[a]=t}}),["pause","load","play"].forEach(function(a){De.prototype[a]=function(){return this.el_[a]()}}),Rt.withSourceHandlers(De),De.nativeSourceHandler={},De.nativeSourceHandler.canPlayType=function(a){try{return De.TEST_VID.canPlayType(a)}catch{return""}},De.nativeSourceHandler.canHandleSource=function(a,t){if(a.type)return De.nativeSourceHandler.canPlayType(a.type);if(a.src){var i=og(a.src);return De.nativeSourceHandler.canPlayType("video/"+i)}return""},De.nativeSourceHandler.handleSource=function(a,t,i){t.setSrc(a.src)},De.nativeSourceHandler.dispose=function(){},De.registerSourceHandler(De.nativeSourceHandler),Rt.registerTech("Html5",De);var yx=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],Rg={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},Mg=["tiny","xsmall","small","medium","large","xlarge","huge"],qc={};Mg.forEach(function(a){var t=a.charAt(0)==="x"?"x-"+a.substring(1):a;qc[a]="vjs-layout-"+t});var Sk={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},ri=function(a){Ae(t,a);function t(r,e,n){var s;if(r.id=r.id||e.id||"vjs_video_"+wa(),e=Wt(t.getTagSettings(r),e),e.initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language)if(typeof r.closest=="function"){var o=r.closest("[lang]");o&&o.getAttribute&&(e.language=o.getAttribute("lang"))}else for(var l=r;l&&l.nodeType===1;){if(Ea(l).hasOwnProperty("lang")){e.language=l.getAttribute("lang");break}l=l.parentNode}if(s=a.call(this,null,e,n)||this,s.boundDocumentFullscreenChange_=function(y){return s.documentFullscreenChange_(y)},s.boundFullWindowOnEscKey_=function(y){return s.fullWindowOnEscKey(y)},s.boundUpdateStyleEl_=function(y){return s.updateStyleEl_(y)},s.boundApplyInitTime_=function(y){return s.applyInitTime_(y)},s.boundUpdateCurrentBreakpoint_=function(y){return s.updateCurrentBreakpoint_(y)},s.boundHandleTechClick_=function(y){return s.handleTechClick_(y)},s.boundHandleTechDoubleClick_=function(y){return s.handleTechDoubleClick_(y)},s.boundHandleTechTouchStart_=function(y){return s.handleTechTouchStart_(y)},s.boundHandleTechTouchMove_=function(y){return s.handleTechTouchMove_(y)},s.boundHandleTechTouchEnd_=function(y){return s.handleTechTouchEnd_(y)},s.boundHandleTechTap_=function(y){return s.handleTechTap_(y)},s.isFullscreen_=!1,s.log=qT(s.id_),s.fsApi_=Sc,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,s.audioOnlyMode_=!1,s.audioPosterMode_=!1,s.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=r,s.tagAttributes=r&&Ea(r),s.language(s.options_.language),e.languages){var f={};Object.getOwnPropertyNames(e.languages).forEach(function(y){f[y.toLowerCase()]=e.languages[y]}),s.languages_=f}else s.languages_=t.prototype.options_.languages;s.resetCache_(),s.poster_=e.poster||"",s.controls_=!!e.controls,r.controls=!1,r.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],r.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),e.plugins&&Object.keys(e.plugins).forEach(function(y){if(typeof s[y]!="function")throw new Error('plugin "'+y+'" does not exist')}),s.scrubbing_=!1,s.el_=s.createEl(),Jm(Ue(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(br(Se,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.boundUpdateStyleEl_);var m=Ut(s.options_);e.plugins&&Object.keys(e.plugins).forEach(function(y){s[y](e.plugins[y])}),e.debug&&s.debug(!0),s.options_.playerOptions=m,s.middleware_=[],s.playbackRates(e.playbackRates),s.initChildren(),s.isAudio(r.nodeName.toLowerCase()==="audio"),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),lu&&s.addClass("vjs-touch-enabled"),Gi||s.addClass("vjs-workinghover"),t.players[s.id_]=Ue(s);var v=VT.split(".")[0];return s.addClass("vjs-v"+v),s.userActive(!0),s.reportUserActivity(),s.one("play",function(y){return s.listenForUserActivity_(y)}),s.on("stageclick",function(y){return s.handleStageClick_(y)}),s.on("keydown",function(y){return s.handleKeyDown(y)}),s.on("languagechange",function(y){return s.handleLanguagechange(y)}),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.on("ready",function(){s.audioPosterMode(s.options_.audioPosterMode),s.audioOnlyMode(s.options_.audioOnlyMode)}),s}var i=t.prototype;return i.dispose=function(){var e=this;this.trigger("dispose"),this.off("dispose"),Ri(Se,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Ri(Se,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),$L(this),Xi.names.forEach(function(n){var s=Xi[n],o=e[s.getterName]();o&&o.off&&o.off()}),a.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},i.createEl=function(){var e=this.tag,n,s=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js";s?n=this.el_=e.parentNode:o||(n=this.el_=a.prototype.createEl.call(this,"div"));var l=Ea(e);if(o){for(n=this.el_=e,e=this.tag=Se.createElement("video");n.children.length;)e.appendChild(n.firstChild);Js(n,"video-js")||Sa(n,"video-js"),n.appendChild(e),s=this.playerElIngest_=n,Object.keys(n).forEach(function(I){try{e[I]=n[I]}catch{}})}if(e.setAttribute("tabindex","-1"),l.tabindex="-1",(td||xa&&JT)&&(e.setAttribute("role","application"),l.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in l&&delete l.width,"height"in l&&delete l.height,Object.getOwnPropertyNames(l).forEach(function(I){o&&I==="class"||n.setAttribute(I,l[I]),o&&e.setAttribute(I,l[I])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=n.player=this,this.addClass("vjs-paused"),F.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=pb("vjs-styles-dimensions");var f=ss(".vjs-styles-defaults"),m=ss("head");m.insertBefore(this.styleEl_,f?f.nextSibling:m.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var v=e.getElementsByTagName("a"),y=0;y<v.length;y++){var E=v.item(y);Sa(E,"vjs-hidden"),E.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!s&&e.parentNode.insertBefore(n,e),$m(e,n),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=n,n},i.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");if(e!=="anonymous"&&e!=="use-credentials"){ot.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"');return}this.techCall_("setCrossOrigin",e)},i.width=function(e){return this.dimension("width",e)},i.height=function(e){return this.dimension("height",e)},i.dimension=function(e,n){var s=e+"_";if(n===void 0)return this[s]||0;if(n===""||n==="auto"){this[s]=void 0,this.updateStyleEl_();return}var o=parseFloat(n);if(isNaN(o)){ot.error('Improper value "'+n+'" supplied for for '+e);return}this[s]=o,this.updateStyleEl_()},i.fluid=function(e){var n=this;if(e===void 0)return!!this.fluid_;this.fluid_=!!e,Aa(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),pL(this,function(){n.on(["playerreset","resize"],n.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},i.fill=function(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},i.aspectRatio=function(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},i.updateStyleEl_=function(){if(F.VIDEOJS_NO_DYNAMIC_STYLE===!0){var e=typeof this.width_=="number"?this.width_:this.options_.width,n=typeof this.height_=="number"?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(e>=0&&(s.width=e),n>=0&&(s.height=n));return}var o,l,f,m;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?f=this.aspectRatio_:this.videoWidth()>0?f=this.videoWidth()+":"+this.videoHeight():f="16:9";var v=f.split(":"),y=v[1]/v[0];this.width_!==void 0?o=this.width_:this.height_!==void 0?o=this.height_/y:o=this.videoWidth()||300,this.height_!==void 0?l=this.height_:l=o*y,/^[^a-zA-Z]/.test(this.id())?m="dimensions-"+this.id():m=this.id()+"-dimensions",this.addClass(m),mb(this.styleEl_,`
      .`+m+` {
        width: `+o+`px;
        height: `+l+`px;
      }

      .`+m+`.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: `+y*100+`%;
      }
    `)},i.loadTech_=function(e,n){var s=this;this.tech_&&this.unloadTech_();var o=Qt(e),l=e.charAt(0).toLowerCase()+e.slice(1);o!=="Html5"&&this.tag&&(Rt.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var f=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(f=!1);var m={source:n,autoplay:f,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+l+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Xi.names.forEach(function(y){var E=Xi[y];m[E.getterName]=s[E.privateName]}),Wt(m,this.options_[o]),Wt(m,this.options_[l]),Wt(m,this.options_[e.toLowerCase()]),this.tag&&(m.tag=this.tag),n&&n.src===this.cache_.src&&this.cache_.currentTime>0&&(m.startTime=this.cache_.currentTime);var v=Rt.getTech(e);if(!v)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new v(m),this.tech_.ready(Nt(this,this.handleTechReady_),!0),Eb.jsonToTextTracks(this.textTracksJson_||[],this.tech_),yx.forEach(function(y){s.on(s.tech_,y,function(E){return s["handleTech"+Qt(y)+"_"](E)})}),Object.keys(Rg).forEach(function(y){s.on(s.tech_,y,function(E){if(s.tech_.playbackRate()===0&&s.tech_.seeking()){s.queuedCallbacks_.push({callback:s["handleTech"+Rg[y]+"_"].bind(s),event:E});return}s["handleTech"+Rg[y]+"_"](E)})}),this.on(this.tech_,"loadstart",function(y){return s.handleTechLoadStart_(y)}),this.on(this.tech_,"sourceset",function(y){return s.handleTechSourceset_(y)}),this.on(this.tech_,"waiting",function(y){return s.handleTechWaiting_(y)}),this.on(this.tech_,"ended",function(y){return s.handleTechEnded_(y)}),this.on(this.tech_,"seeking",function(y){return s.handleTechSeeking_(y)}),this.on(this.tech_,"play",function(y){return s.handleTechPlay_(y)}),this.on(this.tech_,"firstplay",function(y){return s.handleTechFirstPlay_(y)}),this.on(this.tech_,"pause",function(y){return s.handleTechPause_(y)}),this.on(this.tech_,"durationchange",function(y){return s.handleTechDurationChange_(y)}),this.on(this.tech_,"fullscreenchange",function(y,E){return s.handleTechFullscreenChange_(y,E)}),this.on(this.tech_,"fullscreenerror",function(y,E){return s.handleTechFullscreenError_(y,E)}),this.on(this.tech_,"enterpictureinpicture",function(y){return s.handleTechEnterPictureInPicture_(y)}),this.on(this.tech_,"leavepictureinpicture",function(y){return s.handleTechLeavePictureInPicture_(y)}),this.on(this.tech_,"error",function(y){return s.handleTechError_(y)}),this.on(this.tech_,"posterchange",function(y){return s.handleTechPosterChange_(y)}),this.on(this.tech_,"textdata",function(y){return s.handleTechTextData_(y)}),this.on(this.tech_,"ratechange",function(y){return s.handleTechRateChange_(y)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(o!=="Html5"||!this.tag)&&$m(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},i.unloadTech_=function(){var e=this;Xi.names.forEach(function(n){var s=Xi[n];e[s.privateName]=e[s.getterName]()}),this.textTracksJson_=Eb.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},i.tech=function(e){return e===void 0&&ot.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},i.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},i.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},i.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},i.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},i.manualAutoplay_=function(e){var n=this;if(!(!this.tech_||typeof e!="string")){var s=function(){var f=n.muted();n.muted(!0);var m=function(){n.muted(f)};n.playTerminatedQueue_.push(m);var v=n.play();if(sd(v))return v.catch(function(y){throw m(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(y||""))})},o;if(e==="any"&&!this.muted()?(o=this.play(),sd(o)&&(o=o.catch(s))):e==="muted"&&!this.muted()?o=s():o=this.play(),!!sd(o))return o.then(function(){n.trigger({type:"autoplay-success",autoplay:e})}).catch(function(){n.trigger({type:"autoplay-failure",autoplay:e})})}},i.updateSourceCaches_=function(e){e===void 0&&(e="");var n=e,s="";typeof n!="string"&&(n=e.src,s=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],n&&!s&&(s=GL(this,n)),this.cache_.source=Ut({},e,{src:n,type:s});for(var o=this.cache_.sources.filter(function(E){return E.src&&E.src===n}),l=[],f=this.$$("source"),m=[],v=0;v<f.length;v++){var y=Ea(f[v]);l.push(y),y.src&&y.src===n&&m.push(y.src)}m.length&&!o.length?this.cache_.sources=l:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=n},i.handleTechSourceset_=function(e){var n=this;if(!this.changingSrc_){var s=function(m){return n.updateSourceCaches_(m)},o=this.currentSource().src,l=e.src;o&&!/^blob:/.test(o)&&/^blob:/.test(l)&&(!this.lastSource_||this.lastSource_.tech!==l&&this.lastSource_.player!==o)&&(s=function(){}),s(l),e.src||this.tech_.any(["sourceset","loadstart"],function(f){if(f.type!=="sourceset"){var m=n.techGet("currentSrc");n.lastSource_.tech=m,n.updateSourceCaches_(m)}})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},i.hasStarted=function(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},i.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},i.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},i.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var n=this.currentTime(),s=function o(){n!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",o))};this.on("timeupdate",s)},i.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},i.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},i.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},i.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},i.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},i.handleTechFirstPlay_=function(){this.options_.starttime&&(ot.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},i.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},i.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},i.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},i.handleTechClick_=function(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?Vn(this.play()):this.pause())},i.handleTechDoubleClick_=function(e){if(this.controls_){var n=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(s){return s.contains(e.target)});n||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},i.handleTechTap_=function(){this.userActive(!this.userActive())},i.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},i.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},i.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},i.handleStageClick_=function(){this.reportUserActivity()},i.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},i.documentFullscreenChange_=function(e){var n=e.target.player;if(!(n&&n!==this)){var s=this.el(),o=Se[this.fsApi_.fullscreenElement]===s;!o&&s.matches?o=s.matches(":"+this.fsApi_.fullscreen):!o&&s.msMatchesSelector&&(o=s.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},i.handleTechFullscreenChange_=function(e,n){var s=this;n&&(n.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){s.removeClass("vjs-ios-native-fs")})),this.isFullscreen(n.isFullscreen))},i.handleTechFullscreenError_=function(e,n){this.trigger("fullscreenerror",n)},i.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},i.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},i.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},i.handleTechError_=function(){var e=this.tech_.error();this.error(e)},i.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},i.getCache=function(){return this.cache_},i.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},i.techCall_=function(e,n){this.ready(function(){if(e in VL)return BL(this.middleware_,this.tech_,e,n);if(e in Fb)return Mb(this.middleware_,this.tech_,e,n);try{this.tech_&&this.tech_[e](n)}catch(s){throw ot(s),s}},!0)},i.techGet_=function(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in jL)return UL(this.middleware_,this.tech_,e);if(e in Fb)return Mb(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(n){throw this.tech_[e]===void 0?(ot("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",n),n):n.name==="TypeError"?(ot("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",n),this.tech_.isReady_=!1,n):(ot(n),n)}}},i.play=function(){var e=this,n=this.options_.Promise||F.Promise;return n?new n(function(s){e.play_(s)}):this.play_()},i.play_=function(e){var n=this;e===void 0&&(e=Vn),this.playCallbacks_.push(e);var s=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!s){this.waitToPlay_=function(l){n.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!s&&(Ac||Gi)&&this.load();return}var o=this.techGet_("play");o===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(o)},i.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(n){n()})},i.runPlayCallbacks_=function(e){var n=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],n.forEach(function(s){s(e)})},i.pause=function(){this.techCall_("pause")},i.paused=function(){return this.techGet_("paused")!==!1},i.played=function(){return this.techGet_("played")||eo(0,0)},i.scrubbing=function(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},i.currentTime=function(e){if(typeof e<"u"){if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},i.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},i.duration=function(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},i.remainingTime=function(){return this.duration()-this.currentTime()},i.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},i.buffered=function(){var e=this.techGet_("buffered");return(!e||!e.length)&&(e=eo(0,0)),e},i.bufferedPercent=function(){return Sb(this.buffered(),this.duration())},i.bufferedEnd=function(){var e=this.buffered(),n=this.duration(),s=e.end(e.length-1);return s>n&&(s=n),s},i.volume=function(e){var n;if(e!==void 0){n=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=n,this.techCall_("setVolume",n),n>0&&this.lastVolume_(n);return}return n=parseFloat(this.techGet_("volume")),isNaN(n)?1:n},i.muted=function(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1},i.defaultMuted=function(e){return e!==void 0?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},i.lastVolume_=function(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume},i.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},i.isFullscreen=function(e){if(e!==void 0){var n=this.isFullscreen_;this.isFullscreen_=Boolean(e),this.isFullscreen_!==n&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_},i.requestFullscreen=function(e){var n=this.options_.Promise||F.Promise;if(n){var s=this;return new n(function(o,l){function f(){s.off("fullscreenerror",v),s.off("fullscreenchange",m)}function m(){f(),o()}function v(E,I){f(),l(I)}s.one("fullscreenchange",m),s.one("fullscreenerror",v);var y=s.requestFullscreenHelper_(e);y&&(y.then(f,f),y.then(o,l))})}return this.requestFullscreenHelper_()},i.requestFullscreenHelper_=function(e){var n=this,s;if(this.fsApi_.prefixed||(s=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(s=e)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](s);return o&&o.then(function(){return n.isFullscreen(!0)},function(){return n.isFullscreen(!1)}),o}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},i.exitFullscreen=function(){var e=this.options_.Promise||F.Promise;if(e){var n=this;return new e(function(s,o){function l(){n.off("fullscreenerror",m),n.off("fullscreenchange",f)}function f(){l(),s()}function m(y,E){l(),o(E)}n.one("fullscreenchange",f),n.one("fullscreenerror",m);var v=n.exitFullscreenHelper_();v&&(v.then(l,l),v.then(s,o))})}return this.exitFullscreenHelper_()},i.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var n=Se[this.fsApi_.exitFullscreen]();return n&&Vn(n.then(function(){return e.isFullscreen(!1)})),n}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},i.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Se.documentElement.style.overflow,br(Se,"keydown",this.boundFullWindowOnEscKey_),Se.documentElement.style.overflow="hidden",Sa(Se.body,"vjs-full-window"),this.trigger("enterFullWindow")},i.fullWindowOnEscKey=function(e){et.isEventKey(e,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},i.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Ri(Se,"keydown",this.boundFullWindowOnEscKey_),Se.documentElement.style.overflow=this.docOrigOverflow,id(Se.body,"vjs-full-window"),this.trigger("exitFullWindow")},i.disablePictureInPicture=function(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},i.isInPictureInPicture=function(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_},i.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Se&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},i.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Se)return Se.exitPictureInPicture()},i.handleKeyDown=function(e){var n=this.options_.userActions;if(!(!n||!n.hotkeys)){var s=function(l){var f=l.tagName.toLowerCase();if(l.isContentEditable)return!0;var m=["button","checkbox","hidden","radio","reset","submit"];if(f==="input")return m.indexOf(l.type)===-1;var v=["textarea"];return v.indexOf(f)!==-1};s(this.el_.ownerDocument.activeElement)||(typeof n.hotkeys=="function"?n.hotkeys.call(this,e):this.handleHotkeys(e))}},i.handleHotkeys=function(e){var n=this.options_.userActions?this.options_.userActions.hotkeys:{},s=n.fullscreenKey,o=s===void 0?function(O){return et.isEventKey(O,"f")}:s,l=n.muteKey,f=l===void 0?function(O){return et.isEventKey(O,"m")}:l,m=n.playPauseKey,v=m===void 0?function(O){return et.isEventKey(O,"k")||et.isEventKey(O,"Space")}:m;if(o.call(this,e)){e.preventDefault(),e.stopPropagation();var y=Te.getComponent("FullscreenToggle");Se[this.fsApi_.fullscreenEnabled]!==!1&&y.prototype.handleClick.call(this,e)}else if(f.call(this,e)){e.preventDefault(),e.stopPropagation();var E=Te.getComponent("MuteToggle");E.prototype.handleClick.call(this,e)}else if(v.call(this,e)){e.preventDefault(),e.stopPropagation();var I=Te.getComponent("PlayToggle");I.prototype.handleClick.call(this,e)}},i.canPlayType=function(e){for(var n,s=0,o=this.options_.techOrder;s<o.length;s++){var l=o[s],f=Rt.getTech(l);if(f||(f=Te.getComponent(l)),!f){ot.error('The "'+l+'" tech is undefined. Skipped browser support check for that tech.');continue}if(f.isSupported()&&(n=f.canPlayType(e),n))return n}return""},i.selectSource=function(e){var n=this,s=this.options_.techOrder.map(function(v){return[v,Rt.getTech(v)]}).filter(function(v){var y=v[0],E=v[1];return E?E.isSupported():(ot.error('The "'+y+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(y,E,I){var O;return y.some(function(D){return E.some(function(R){if(O=I(D,R),O)return!0})}),O},l,f=function(y){return function(E,I){return y(I,E)}},m=function(y,E){var I=y[0],O=y[1];if(O.canPlaySource(E,n.options_[I.toLowerCase()]))return{source:E,tech:I}};return this.options_.sourceOrder?l=o(e,s,f(m)):l=o(s,e,m),l||!1},i.handleSrc_=function(e,n){var s=this;if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=zL(e);if(!o.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,n||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),FL(this,o[0],function(m,v){s.middleware_=v,n||(s.cache_.sources=o),s.updateSourceCaches_(m);var y=s.src_(m);if(y){if(o.length>1)return s.handleSrc_(o.slice(1));s.changingSrc_=!1,s.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),s.triggerReady();return}NL(v,s.tech_)}),this.options_.retryOnError&&o.length>1){var l=function(){s.error(null),s.handleSrc_(o.slice(1),!0)},f=function(){s.off("error",l)};this.one("error",l),this.one("playing",f),this.resetRetryOnError_=function(){s.off("error",l),s.off("playing",f)}}},i.src=function(e){return this.handleSrc_(e,!1)},i.src_=function(e){var n=this,s=this.selectSource([e]);return s?vL(s.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(function(){n.changingSrc_=!1}),!1):!0},i.load=function(){this.techCall_("load")},i.reset=function(){var e=this,n=this.options_.Promise||F.Promise;if(this.paused()||!n)this.doReset_();else{var s=this.play();Vn(s.then(function(){return e.doReset_()}))}},i.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),Aa(this)&&this.trigger("playerreset")},i.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},i.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar||{},n=e.durationDisplay,s=e.remainingTimeDisplay;n&&n.updateContent(),s&&s.updateContent()},i.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},i.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},i.currentSources=function(){var e=this.currentSource(),n=[];return Object.keys(e).length!==0&&n.push(e),this.cache_.sources||n},i.currentSource=function(){return this.cache_.source||{}},i.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},i.currentType=function(){return this.currentSource()&&this.currentSource().type||""},i.preload=function(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")},i.autoplay=function(e){if(e===void 0)return this.options_.autoplay||!1;var n;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),n=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,n=typeof n>"u"?this.options_.autoplay:n,this.tech_&&this.techCall_("setAutoplay",n)},i.playsinline=function(e){return e!==void 0?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},i.loop=function(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")},i.poster=function(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},i.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},i.controls=function(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},i.usingNativeControls=function(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},i.error=function(e){var n=this;if(e===void 0)return this.error_||null;if(as("beforeerror").forEach(function(o){var l=o(n,e);if(!(Ta(l)&&!Array.isArray(l)||typeof l=="string"||typeof l=="number"||l===null)){n.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=l}),this.options_.suppressNotSupportedError&&e&&e.code===4){var s=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),this.one("loadstart",function(){this.off(["click","touchstart"],s)});return}if(e===null){this.error_=e,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Ki(e),this.addClass("vjs-error"),ot.error("(CODE:"+this.error_.code+" "+Ki.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),as("error").forEach(function(o){return o(n,n.error_)})},i.reportUserActivity=function(e){this.userActivity_=!0},i.userActive=function(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(n){n.stopPropagation(),n.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},i.listenForUserActivity_=function(){var e,n,s,o=Nt(this,this.reportUserActivity),l=function(I){(I.screenX!==n||I.screenY!==s)&&(n=I.screenX,s=I.screenY,o())},f=function(){o(),this.clearInterval(e),e=this.setInterval(o,250)},m=function(I){o(),this.clearInterval(e)};this.on("mousedown",f),this.on("mousemove",l),this.on("mouseup",m),this.on("mouseleave",m);var v=this.getChild("controlBar");v&&!Gi&&!ba&&(v.on("mouseenter",function(E){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),v.on("mouseleave",function(E){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);var y;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(y);var E=this.options_.inactivityTimeout;E<=0||(y=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},E))}},250)},i.playbackRate=function(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},i.defaultPlaybackRate=function(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},i.isAudio=function(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_},i.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var n=this.children(),s=this.getChild("ControlBar"),o=s&&s.currentHeight();n.forEach(function(l){l!==s&&l.el_&&!l.hasClass("vjs-hidden")&&(l.hide(),e.audioOnlyCache_.hiddenChildren.push(l))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},i.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(e){return e.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},i.audioOnlyMode=function(e){var n=this;if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var s=this.options_.Promise||F.Promise;if(s){if(e){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),s.all(o).then(function(){return n.enableAudioOnlyUI_()})}return s.resolve().then(function(){return n.disableAudioOnlyUI_()})}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},i.enablePosterModeUI_=function(){var e=this.tech_&&this.tech_;e.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},i.disablePosterModeUI_=function(){var e=this.tech_&&this.tech_;e.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},i.audioPosterMode=function(e){var n=this;if(typeof e!="boolean"||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var s=this.options_.Promise||F.Promise;if(s){if(e){if(this.audioOnlyMode()){var o=this.audioOnlyMode(!1);return o.then(function(){n.enablePosterModeUI_()})}return s.resolve().then(function(){n.enablePosterModeUI_()})}return s.resolve().then(function(){n.disablePosterModeUI_()})}if(e){this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_();return}this.disablePosterModeUI_()},i.addTextTrack=function(e,n,s){if(this.tech_)return this.tech_.addTextTrack(e,n,s)},i.addRemoteTextTrack=function(e,n){if(this.tech_)return this.tech_.addRemoteTextTrack(e,n)},i.removeRemoteTextTrack=function(e){e===void 0&&(e={});var n=e,s=n.track;if(s||(s=e),this.tech_)return this.tech_.removeRemoteTextTrack(s)},i.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},i.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},i.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},i.language=function(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),Aa(this)&&this.trigger("languagechange"))},i.languages=function(){return Ut(t.prototype.options_.languages,this.languages_)},i.toJSON=function(){var e=Ut(this.options_),n=e.tracks;e.tracks=[];for(var s=0;s<n.length;s++){var o=n[s];o=Ut(o),o.player=void 0,e.tracks[s]=o}return e},i.createModal=function(e,n){var s=this;n=n||{},n.content=e||"";var o=new gu(this,n);return this.addChild(o),o.on("dispose",function(){s.removeChild(o)}),o.open(),o},i.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),n=this.currentWidth(),s=0;s<Mg.length;s++){var o=Mg[s],l=this.breakpoints_[o];if(n<=l){if(e===o)return;e&&this.removeClass(qc[e]),this.addClass(qc[o]),this.breakpoint_=o;break}}},i.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},i.breakpoints=function(e){return e===void 0?Wt(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Wt({},Sk,e),this.updateCurrentBreakpoint_(),Wt(this.breakpoints_))},i.responsive=function(e){if(e===void 0)return this.responsive_;e=Boolean(e);var n=this.responsive_;if(e!==n)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e},i.currentBreakpoint=function(){return this.breakpoint_},i.currentBreakpointClass=function(){return qc[this.breakpoint_]||""},i.loadMedia=function(e,n){var s=this;if(!(!e||typeof e!="object")){this.reset(),this.cache_.media=Ut(e);var o=this.cache_.media,l=o.artwork,f=o.poster,m=o.src,v=o.textTracks;!l&&f&&(this.cache_.media.artwork=[{src:f,type:Uc(f)}]),m&&this.src(m),f&&this.poster(f),Array.isArray(v)&&v.forEach(function(y){return s.addRemoteTextTrack(y,!1)}),this.ready(n)}},i.getMedia=function(){if(!this.cache_.media){var e=this.poster(),n=this.currentSources(),s=Array.prototype.map.call(this.remoteTextTracks(),function(l){return{kind:l.kind,label:l.label,language:l.language,src:l.src}}),o={src:n,textTracks:s};return e&&(o.poster=e,o.artwork=[{src:o.poster,type:Uc(o.poster)}]),o}return Ut(this.cache_.media)},t.getTagSettings=function(e){var n={sources:[],tracks:[]},s=Ea(e),o=s["data-setup"];if(Js(e,"vjs-fill")&&(s.fill=!0),Js(e,"vjs-fluid")&&(s.fluid=!0),o!==null){var l=lP(o||"{}"),f=l[0],m=l[1];f&&ot.error(f),Wt(s,m)}if(Wt(n,s),e.hasChildNodes())for(var v=e.childNodes,y=0,E=v.length;y<E;y++){var I=v[y],O=I.nodeName.toLowerCase();O==="source"?n.sources.push(Ea(I)):O==="track"&&n.tracks.push(Ea(I))}return n},i.flexNotSupported_=function(){var e=Se.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},i.debug=function(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},i.playbackRates=function(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(function(n){return typeof n=="number"})&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},t}(Te);Xi.names.forEach(function(a){var t=Xi[a];ri.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}}),ri.prototype.crossorigin=ri.prototype.crossOrigin,ri.players={};var dd=F.navigator;ri.prototype.options_={techOrder:Rt.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:dd&&(dd.languages&&dd.languages[0]||dd.userLanguage||dd.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1},["ended","seeking","seekable","networkState","readyState"].forEach(function(a){ri.prototype[a]=function(){return this.techGet_(a)}}),yx.forEach(function(a){ri.prototype["handleTech"+Qt(a)+"_"]=function(){return this.trigger(a)}}),Te.registerComponent("Player",ri);var Gc="plugin",Su="activePlugins_",Eu={},zc=function(t){return Eu.hasOwnProperty(t)},Kc=function(t){return zc(t)?Eu[t]:void 0},Tx=function(t,i){t[Su]=t[Su]||{},t[Su][i]=!0},Xc=function(t,i,r){var e=(r?"before":"")+"pluginsetup";t.trigger(e,i),t.trigger(e+":"+i.name,i)},Ek=function(t,i){var r=function(){Xc(this,{name:t,plugin:i,instance:null},!0);var n=i.apply(this,arguments);return Tx(this,t),Xc(this,{name:t,plugin:i,instance:n}),n};return Object.keys(i).forEach(function(e){r[e]=i[e]}),r},bx=function(t,i){return i.prototype.name=t,function(){Xc(this,{name:t,plugin:i,instance:null},!0);for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];var s=Nl(i,[this].concat(e));return this[t]=function(){return s},Xc(this,s.getEventHash()),s}},Hn=function(){function a(i){if(this.constructor===a)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=i,this.log||(this.log=this.player.log.createLogger(this.name)),Jm(this),delete this.trigger,bb(this,this.constructor.defaultState),Tx(i,this.name),this.dispose=this.dispose.bind(this),i.on("dispose",this.dispose)}var t=a.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(r){return r===void 0&&(r={}),r.name=this.name,r.plugin=this.constructor,r.instance=this,r},t.trigger=function(r,e){return e===void 0&&(e={}),pu(this.eventBusEl_,r,this.getEventHash(e))},t.handleStateChanged=function(r){},t.dispose=function(){var r=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[Su][r]=!1,this.player=this.state=null,e[r]=bx(r,Eu[r])},a.isBasic=function(r){var e=typeof r=="string"?Kc(r):r;return typeof e=="function"&&!a.prototype.isPrototypeOf(e.prototype)},a.registerPlugin=function(r,e){if(typeof r!="string")throw new Error('Illegal plugin name, "'+r+'", must be a string, was '+typeof r+".");if(zc(r))ot.warn('A plugin named "'+r+'" already exists. You may want to avoid re-registering plugins!');else if(ri.prototype.hasOwnProperty(r))throw new Error('Illegal plugin name, "'+r+'", cannot share a name with an existing player method!');if(typeof e!="function")throw new Error('Illegal plugin for "'+r+'", must be a function, was '+typeof e+".");return Eu[r]=e,r!==Gc&&(a.isBasic(e)?ri.prototype[r]=Ek(r,e):ri.prototype[r]=bx(r,e)),e},a.deregisterPlugin=function(r){if(r===Gc)throw new Error("Cannot de-register base plugin.");zc(r)&&(delete Eu[r],delete ri.prototype[r])},a.getPlugins=function(r){r===void 0&&(r=Object.keys(Eu));var e;return r.forEach(function(n){var s=Kc(n);s&&(e=e||{},e[n]=s)}),e},a.getPluginVersion=function(r){var e=Kc(r);return e&&e.VERSION||""},a}();Hn.getPlugin=Kc,Hn.BASE_PLUGIN_NAME=Gc,Hn.registerPlugin(Gc,Hn),ri.prototype.usingPlugin=function(a){return!!this[Su]&&this[Su][a]===!0},ri.prototype.hasPlugin=function(a){return!!zc(a)};var xx=!1,wk=function(t,i){i===void 0&&(i={}),xx||(ot.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),xx=!0);var r=function(){t.apply(this,arguments)},e={};typeof i=="object"?(i.constructor!==Object.prototype.constructor&&(r=i.constructor),e=i):typeof i=="function"&&(r=i),ZP(r,t),t&&(r.super_=t);for(var n in e)e.hasOwnProperty(n)&&(r.prototype[n]=e[n]);return r},Sx=function(t){return t.indexOf("#")===0?t.slice(1):t};function N(a,t,i){var r=N.getPlayer(a);if(r)return t&&ot.warn('Player "'+a+'" is already initialised. Options will not be applied.'),i&&r.ready(i),r;var e=typeof a=="string"?ss("#"+Sx(a)):a;if(!fu(e))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!e.ownerDocument.defaultView||!e.ownerDocument.body.contains(e))&&ot.warn("The element supplied is not included in the DOM"),t=t||{},t.restoreEl===!0&&(t.restoreEl=(e.parentNode&&e.parentNode.hasAttribute("data-vjs-player")?e.parentNode:e).cloneNode(!0)),as("beforesetup").forEach(function(s){var o=s(e,Ut(t));if(!Ta(o)||Array.isArray(o)){ot.error("please return an object in beforesetup hooks");return}t=Ut(t,o)});var n=Te.getComponent("Player");return r=new n(e,t,i),as("setup").forEach(function(s){return s(r)}),r}if(N.hooks_=ya,N.hooks=as,N.hook=JD,N.hookOnce=ZD,N.removeHook=HT,F.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&du()){var Qc=ss(".vjs-styles-defaults");if(!Qc){Qc=pb("vjs-styles-defaults");var Fg=ss("head");Fg&&Fg.insertBefore(Qc,Fg.firstChild),mb(Qc,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}zm(1,N),N.VERSION=VT,N.options=ri.prototype.options_,N.getPlayers=function(){return ri.players},N.getPlayer=function(a){var t=ri.players,i;if(typeof a=="string"){var r=Sx(a),e=t[r];if(e)return e;i=ss("#"+r)}else i=a;if(fu(i)){var n=i,s=n.player,o=n.playerId;if(s||t[o])return s||t[o]}},N.getAllPlayers=function(){return Object.keys(ri.players).map(function(a){return ri.players[a]}).filter(Boolean)},N.players=ri.players,N.getComponent=Te.getComponent,N.registerComponent=function(a,t){Rt.isTech(t)&&ot.warn("The "+a+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Te.registerComponent.call(Te,a,t)},N.getTech=Rt.getTech,N.registerTech=Rt.registerTech,N.use=ML,Object.defineProperty(N,"middleware",{value:{},writeable:!1,enumerable:!0}),Object.defineProperty(N.middleware,"TERMINATOR",{value:Nc,writeable:!1,enumerable:!0}),N.browser=aL,N.TOUCH_ENABLED=lu,N.extend=wk,N.mergeOptions=Ut,N.bind=Nt,N.registerPlugin=Hn.registerPlugin,N.deregisterPlugin=Hn.deregisterPlugin,N.plugin=function(a,t){return ot.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),Hn.registerPlugin(a,t)},N.getPlugins=Hn.getPlugins,N.getPlugin=Hn.getPlugin,N.getPluginVersion=Hn.getPluginVersion,N.addLanguage=function(a,t){var i;return a=(""+a).toLowerCase(),N.options.languages=Ut(N.options.languages,(i={},i[a]=t,i)),N.options.languages[a]},N.log=ot,N.createLogger=qT,N.createTimeRange=N.createTimeRanges=eo,N.formatTime=Tu,N.setFormatTime=ek,N.resetFormatTime=tk,N.parseUrl=sg,N.isCrossOrigin=Fc,N.EventTarget=hi,N.on=br,N.one=Lc,N.off=Ri,N.trigger=pu,N.xhr=kl,N.TextTrack=od,N.AudioTrack=Db,N.VideoTrack=Lb,["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(a){N[a]=function(){return ot.warn("videojs."+a+"() is deprecated; use videojs.dom."+a+"() instead"),cb[a].apply(null,arguments)}}),N.computedStyle=Zl,N.dom=cb,N.url=DL,N.defineLazyProperty=kg,N.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var dn=Ul,Yc=function(t,i,r){return t&&r&&r.responseURL&&i!==r.responseURL?r.responseURL:i},fn=function(t){return N.log.debug?N.log.debug.bind(N,"VHS:",t+" >"):function(){}},os=1/30,$n=os*3,Ex=function(t,i){var r=[],e;if(t&&t.length)for(e=0;e<t.length;e++)i(t.start(e),t.end(e))&&r.push([t.start(e),t.end(e)]);return N.createTimeRanges(r)},wu=function(t,i){return Ex(t,function(r,e){return r-$n<=i&&e+$n>=i})},Jc=function(t,i){return Ex(t,function(r){return r-os>=i})},Ck=function(t){if(t.length<2)return N.createTimeRanges();for(var i=[],r=1;r<t.length;r++){var e=t.end(r-1),n=t.start(r);i.push([e,n])}return N.createTimeRanges(i)},Ak=function(t,i){var r=null,e=null,n=0,s=[],o=[];if(!t||!t.length||!i||!i.length)return N.createTimeRange();for(var l=t.length;l--;)s.push({time:t.start(l),type:"start"}),s.push({time:t.end(l),type:"end"});for(l=i.length;l--;)s.push({time:i.start(l),type:"start"}),s.push({time:i.end(l),type:"end"});for(s.sort(function(f,m){return f.time-m.time}),l=0;l<s.length;l++)s[l].type==="start"?(n++,n===2&&(r=s[l].time)):s[l].type==="end"&&(n--,n===1&&(e=s[l].time)),r!==null&&e!==null&&(o.push([r,e]),r=null,e=null);return N.createTimeRanges(o)},wx=function(t){var i=[];if(!t||!t.length)return"";for(var r=0;r<t.length;r++)i.push(t.start(r)+" => "+t.end(r));return i.join(", ")},Ik=function(t,i,r){r===void 0&&(r=1);var e=t.length?t.end(t.length-1):0;return(e-i)/r},no=function(t){for(var i=[],r=0;r<t.length;r++)i.push({start:t.start(r),end:t.end(r)});return i},Pk=function(t,i){if(t===i)return!1;if(!t&&i||!i&&t||t.length!==i.length)return!0;for(var r=0;r<t.length;r++)if(t.start(r)!==i.start(r)||t.end(r)!==i.end(r))return!0;return!1},Cx=function(t){if(!(!t||!t.length||!t.end))return t.end(t.length-1)},Ng=function(t,i){var r=0;if(!t||!t.length)return r;for(var e=0;e<t.length;e++){var n=t.start(e),s=t.end(e);if(!(i>s)){if(i>n&&i<=s){r+=s-i;continue}r+=s-n}}return r},Ax=N.createTimeRange,Ug=function(t,i){if(!i.preload)return i.duration;var r=0;return(i.parts||[]).forEach(function(e){r+=e.duration}),(i.preloadHints||[]).forEach(function(e){e.type==="PART"&&(r+=t.partTargetDuration)}),r},Bg=function(t){return(t.segments||[]).reduce(function(i,r,e){return r.parts?r.parts.forEach(function(n,s){i.push({duration:n.duration,segmentIndex:e,partIndex:s,part:n,segment:r})}):i.push({duration:r.duration,segmentIndex:e,partIndex:null,segment:r,part:null}),i},[])},Ix=function(t){var i=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return i&&i.parts||[]},Px=function(t){var i=t.preloadSegment;if(i){var r=i.parts,e=i.preloadHints,n=(e||[]).reduce(function(s,o){return s+(o.type==="PART"?1:0)},0);return n+=r&&r.length?r.length:0,n}},Ox=function(t,i){if(i.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;var r=Ix(i).length>0;return r&&i.serverControl&&i.serverControl.partHoldBack?i.serverControl.partHoldBack:r&&i.partTargetDuration?i.partTargetDuration*3:i.serverControl&&i.serverControl.holdBack?i.serverControl.holdBack:i.targetDuration?i.targetDuration*3:0},Ok=function(t,i){var r=0,e=i-t.mediaSequence,n=t.segments[e];if(n){if(typeof n.start<"u")return{result:n.start,precise:!0};if(typeof n.end<"u")return{result:n.end-n.duration,precise:!0}}for(;e--;){if(n=t.segments[e],typeof n.end<"u")return{result:r+n.end,precise:!0};if(r+=Ug(t,n),typeof n.start<"u")return{result:r+n.start,precise:!0}}return{result:r,precise:!1}},Dk=function(t,i){for(var r=0,e,n=i-t.mediaSequence;n<t.segments.length;n++){if(e=t.segments[n],typeof e.start<"u")return{result:e.start-r,precise:!0};if(r+=Ug(t,e),typeof e.end<"u")return{result:e.end-r,precise:!0}}return{result:-1,precise:!1}},Dx=function(t,i,r){if(typeof i>"u"&&(i=t.mediaSequence+t.segments.length),i<t.mediaSequence)return 0;var e=Ok(t,i);if(e.precise)return e.result;var n=Dk(t,i);return n.precise?n.result:e.result+r},Lx=function(t,i,r){if(!t)return 0;if(typeof r!="number"&&(r=0),typeof i>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return F.Infinity}return Dx(t,i,r)},fd=function(t){var i=t.defaultDuration,r=t.durationList,e=t.startIndex,n=t.endIndex,s=0;if(e>n){var o=[n,e];e=o[0],n=o[1]}if(e<0){for(var l=e;l<Math.min(0,n);l++)s+=i;e=0}for(var f=e;f<n;f++)s+=r[f].duration;return s},kx=function(t,i,r,e){if(!t||!t.segments)return null;if(t.endList)return Lx(t);if(i===null)return null;i=i||0;var n=Dx(t,t.mediaSequence+t.segments.length,i);return r&&(e=typeof e=="number"?e:Ox(null,t),n-=e),Math.max(0,n)},Lk=function(t,i,r){var e=!0,n=i||0,s=kx(t,i,e,r);return s===null?Ax():Ax(n,s)},kk=function(t){for(var i=t.playlist,r=t.currentTime,e=t.startingSegmentIndex,n=t.startingPartIndex,s=t.startTime,o=t.experimentalExactManifestTimings,l=r-s,f=Bg(i),m=0,v=0;v<f.length;v++){var y=f[v];if(e===y.segmentIndex&&!(typeof n=="number"&&typeof y.partIndex=="number"&&n!==y.partIndex)){m=v;break}}if(l<0){if(m>0)for(var E=m-1;E>=0;E--){var I=f[E];if(l+=I.duration,o){if(l<0)continue}else if(l+os<=0)continue;return{partIndex:I.partIndex,segmentIndex:I.segmentIndex,startTime:s-fd({defaultDuration:i.targetDuration,durationList:f,startIndex:m,endIndex:E})}}return{partIndex:f[0]&&f[0].partIndex||null,segmentIndex:f[0]&&f[0].segmentIndex||0,startTime:r}}if(m<0){for(var O=m;O<0;O++)if(l-=i.targetDuration,l<0)return{partIndex:f[0]&&f[0].partIndex||null,segmentIndex:f[0]&&f[0].segmentIndex||0,startTime:r};m=0}for(var D=m;D<f.length;D++){var R=f[D];if(l-=R.duration,o){if(l>0)continue}else if(l-os>=0)continue;return{partIndex:R.partIndex,segmentIndex:R.segmentIndex,startTime:s+fd({defaultDuration:i.targetDuration,durationList:f,startIndex:m,endIndex:D})}}return{segmentIndex:f[f.length-1].segmentIndex,partIndex:f[f.length-1].partIndex,startTime:r}},Rx=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},jg=function(t){return t.excludeUntil&&t.excludeUntil===1/0},Zc=function(t){var i=Rx(t);return!t.disabled&&!i},Rk=function(t){return t.disabled},Mk=function(t){for(var i=0;i<t.segments.length;i++)if(t.segments[i].key)return!0;return!1},Mx=function(t,i){return i.attributes&&i.attributes[t]},Fk=function(t,i,r,e){if(e===void 0&&(e=0),!Mx("BANDWIDTH",r))return NaN;var n=t*r.attributes.BANDWIDTH;return(n-e*8)/i},Vg=function(t,i){if(t.playlists.length===1)return!0;var r=i.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(function(e){return Zc(e)?(e.attributes.BANDWIDTH||0)<r:!1}).length===0},Hg=function(t,i){return!t&&!i||!t&&i||t&&!i?!1:!!(t===i||t.id&&i.id&&t.id===i.id||t.resolvedUri&&i.resolvedUri&&t.resolvedUri===i.resolvedUri||t.uri&&i.uri&&t.uri===i.uri)},Fx=function(t,i){var r=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{},e=!1;for(var n in r){for(var s in r[n])if(e=i(r[n][s]),e)break;if(e)break}return!!e},cd=function(t){if(!t||!t.playlists||!t.playlists.length){var i=Fx(t,function(s){return s.playlists&&s.playlists.length||s.uri});return i}for(var r=function(o){var l=t.playlists[o],f=l.attributes&&l.attributes.CODECS;if(f&&f.split(",").every(function(v){return um(v)}))return"continue";var m=Fx(t,function(v){return Hg(l,v)});return m?"continue":{v:!1}},e=0;e<t.playlists.length;e++){var n=r(e);if(n!=="continue"&&typeof n=="object")return n.v}return!0},or={liveEdgeDelay:Ox,duration:Lx,seekable:Lk,getMediaInfoForTime:kk,isEnabled:Zc,isDisabled:Rk,isBlacklisted:Rx,isIncompatible:jg,playlistEnd:kx,isAes:Mk,hasAttribute:Mx,estimateSegmentRequestTime:Fk,isLowestEnabledRendition:Vg,isAudioOnly:cd,playlistMatch:Hg,segmentDurationWithParts:Ug},Nx=N.log,$g=function(t,i){return t+"-"+i},Nk=function(t,i,r){return"placeholder-uri-"+t+"-"+i+"-"+r},Uk=function(t){var i=t.onwarn,r=t.oninfo,e=t.manifestString,n=t.customTagParsers,s=n===void 0?[]:n,o=t.customTagMappers,l=o===void 0?[]:o,f=t.experimentalLLHLS,m=new by;i&&m.on("warn",i),r&&m.on("info",r),s.forEach(function(O){return m.addParser(O)}),l.forEach(function(O){return m.addTagMapper(O)}),m.push(e),m.end();var v=m.manifest;if(f||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(O){v.hasOwnProperty(O)&&delete v[O]}),v.segments&&v.segments.forEach(function(O){["parts","preloadHints"].forEach(function(D){O.hasOwnProperty(D)&&delete O[D]})})),!v.targetDuration){var y=10;v.segments&&v.segments.length&&(y=v.segments.reduce(function(O,D){return Math.max(O,D.duration)},0)),i&&i("manifest has no targetDuration defaulting to "+y),v.targetDuration=y}var E=Ix(v);if(E.length&&!v.partTargetDuration){var I=E.reduce(function(O,D){return Math.max(O,D.duration)},0);i&&(i("manifest has no partTargetDuration defaulting to "+I),Nx.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),v.partTargetDuration=I}return v},Cu=function(t,i){t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(r){if(t.mediaGroups[r])for(var e in t.mediaGroups[r])for(var n in t.mediaGroups[r][e]){var s=t.mediaGroups[r][e][n];i(s,r,e,n)}})},Ux=function(t){var i=t.playlist,r=t.uri,e=t.id;i.id=e,i.playlistErrors_=0,r&&(i.uri=r),i.attributes=i.attributes||{}},Bk=function(t){for(var i=t.playlists.length;i--;){var r=t.playlists[i];Ux({playlist:r,id:$g(i,r.uri)}),r.resolvedUri=dn(t.uri,r.uri),t.playlists[r.id]=r,t.playlists[r.uri]=r,r.attributes.BANDWIDTH||Nx.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},jk=function(t){Cu(t,function(i){i.uri&&(i.resolvedUri=dn(t.uri,i.uri))})},Vk=function(t,i){var r=$g(0,i),e={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:F.location.href,resolvedUri:F.location.href,playlists:[{uri:i,id:r,resolvedUri:i,attributes:{}}]};return e.playlists[r]=e.playlists[0],e.playlists[i]=e.playlists[0],e},Bx=function(t,i,r){r===void 0&&(r=Nk),t.uri=i;for(var e=0;e<t.playlists.length;e++)if(!t.playlists[e].uri){var n="placeholder-uri-"+e;t.playlists[e].uri=n}var s=cd(t);Cu(t,function(o,l,f,m){if(!o.playlists||!o.playlists.length){if(s&&l==="AUDIO"&&!o.uri)for(var v=0;v<t.playlists.length;v++){var y=t.playlists[v];if(y.attributes&&y.attributes.AUDIO&&y.attributes.AUDIO===f)return}o.playlists=[Di({},o)]}o.playlists.forEach(function(E,I){var O=r(l,f,m,E),D=$g(I,O);E.uri?E.resolvedUri=E.resolvedUri||dn(t.uri,E.uri):(E.uri=I===0?O:D,E.resolvedUri=E.uri),E.id=E.id||D,E.attributes=E.attributes||{},t.playlists[E.id]=E,t.playlists[E.uri]=E})}),Bk(t),jk(t)},eh=N.mergeOptions,Hk=N.EventTarget,$k=function(t,i){if(i.endList||!i.serverControl)return t;var r={};if(i.serverControl.canBlockReload){var e=i.preloadSegment,n=i.mediaSequence+i.segments.length;if(e){var s=e.parts||[],o=Px(i)-1;o>-1&&o!==s.length-1&&(r._HLS_part=o),(o>-1||s.length)&&n--}r._HLS_msn=n}if(i.serverControl&&i.serverControl.canSkipUntil&&(r._HLS_skip=i.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(r).length){var l=new F.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(f){r.hasOwnProperty(f)&&l.searchParams.set(f,r[f])}),t=l.toString()}return t},Wk=function(t,i){if(!t)return i;var r=eh(t,i);if(t.preloadHints&&!i.preloadHints&&delete r.preloadHints,t.parts&&!i.parts)delete r.parts;else if(t.parts&&i.parts)for(var e=0;e<i.parts.length;e++)t.parts&&t.parts[e]&&(r.parts[e]=eh(t.parts[e],i.parts[e]));return!t.skipped&&i.skipped&&(r.skipped=!1),t.preload&&!i.preload&&(r.preload=!1),r},qk=function(t,i,r){var e=t.slice(),n=i.slice();r=r||0;for(var s=[],o,l=0;l<n.length;l++){var f=e[l+r],m=n[l];f?(o=f.map||o,s.push(Wk(f,m))):(o&&!m.map&&(m.map=o),s.push(m))}return s},jx=function(t,i){!t.resolvedUri&&t.uri&&(t.resolvedUri=dn(i,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=dn(i,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=dn(i,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=dn(i,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(function(r){r.resolvedUri||(r.resolvedUri=dn(i,r.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(function(r){r.resolvedUri||(r.resolvedUri=dn(i,r.uri))})},Vx=function(t){var i=t.segments||[],r=t.preloadSegment;if(r&&r.parts&&r.parts.length){if(r.preloadHints){for(var e=0;e<r.preloadHints.length;e++)if(r.preloadHints[e].type==="MAP")return i}r.duration=t.targetDuration,r.preload=!0,i.push(r)}return i},Hx=function(t,i){return t===i||t.segments&&i.segments&&t.segments.length===i.segments.length&&t.endList===i.endList&&t.mediaSequence===i.mediaSequence&&t.preloadSegment===i.preloadSegment},Wg=function(t,i,r){r===void 0&&(r=Hx);var e=eh(t,{}),n=e.playlists[i.id];if(!n||r(n,i))return null;i.segments=Vx(i);var s=eh(n,i);if(s.preloadSegment&&!i.preloadSegment&&delete s.preloadSegment,n.segments){if(i.skip){i.segments=i.segments||[];for(var o=0;o<i.skip.skippedSegments;o++)i.segments.unshift({skipped:!0})}s.segments=qk(n.segments,i.segments,i.mediaSequence-n.mediaSequence)}s.segments.forEach(function(f){jx(f,s.resolvedUri)});for(var l=0;l<e.playlists.length;l++)e.playlists[l].id===i.id&&(e.playlists[l]=s);return e.playlists[i.id]=s,e.playlists[i.uri]=s,Cu(t,function(f,m,v,y){if(f.playlists)for(var E=0;E<f.playlists.length;E++)i.id===f.playlists[E].id&&(f.playlists[E]=s)}),e},qg=function(t,i){var r=t.segments||[],e=r[r.length-1],n=e&&e.parts&&e.parts[e.parts.length-1],s=n&&n.duration||e&&e.duration;return i&&s?s*1e3:(t.partTargetDuration||t.targetDuration||10)*500},Au=function(a){Ae(t,a);function t(r,e,n){var s;if(n===void 0&&(n={}),s=a.call(this)||this,!r)throw new Error("A non-empty playlist URL or object is required");s.logger_=fn("PlaylistLoader");var o=n,l=o.withCredentials,f=l===void 0?!1:l,m=o.handleManifestRedirects,v=m===void 0?!1:m;s.src=r,s.vhs_=e,s.withCredentials=f,s.handleManifestRedirects=v;var y=e.options_;return s.customTagParsers=y&&y.customTagParsers||[],s.customTagMappers=y&&y.customTagMappers||[],s.experimentalLLHLS=y&&y.experimentalLLHLS||!1,N.browser.IE_VERSION&&(s.experimentalLLHLS=!1),s.state="HAVE_NOTHING",s.handleMediaupdatetimeout_=s.handleMediaupdatetimeout_.bind(Ue(s)),s.on("mediaupdatetimeout",s.handleMediaupdatetimeout_),s}var i=t.prototype;return i.handleMediaupdatetimeout_=function(){var e=this;if(this.state==="HAVE_METADATA"){var n=this.media(),s=dn(this.master.uri,n.uri);this.experimentalLLHLS&&(s=$k(s,n)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials},function(o,l){if(e.request){if(o)return e.playlistRequestError(e.request,e.media(),"HAVE_METADATA");e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}})}},i.playlistRequestError=function(e,n,s){var o=n.uri,l=n.id;this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[l],status:e.status,message:"HLS playlist request error at URL: "+o+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},i.parseManifest_=function(e){var n=this,s=e.url,o=e.manifestString;return Uk({onwarn:function(f){var m=f.message;return n.logger_("m3u8-parser warn for "+s+": "+m)},oninfo:function(f){var m=f.message;return n.logger_("m3u8-parser info for "+s+": "+m)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},i.haveMetadata=function(e){var n=e.playlistString,s=e.playlistObject,o=e.url,l=e.id;this.request=null,this.state="HAVE_METADATA";var f=s||this.parseManifest_({url:o,manifestString:n});f.lastRequest=Date.now(),Ux({playlist:f,uri:o,id:l});var m=Wg(this.master,f);this.targetDuration=f.partTargetDuration||f.targetDuration,this.pendingMedia_=null,m?(this.master=m,this.media_=this.master.playlists[l]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(qg(this.media(),!!m)),this.trigger("loadedplaylist")},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),F.clearTimeout(this.mediaUpdateTimeout),F.clearTimeout(this.finalRenditionTimeout),this.off()},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e,n){var s=this;if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(F.clearTimeout(this.finalRenditionTimeout),n){var o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=F.setTimeout(this.media.bind(this,e,!1),o);return}var l=this.state,f=!this.media_||e.id!==this.media_.id,m=this.master.playlists[e.id];if(m&&m.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,f&&(this.trigger("mediachanging"),l==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(qg(e,!0)),!!f){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},function(v,y){if(s.request){if(e.lastRequest=Date.now(),e.resolvedUri=Yc(s.handleManifestRedirects,e.resolvedUri,y),v)return s.playlistRequestError(s.request,e,l);s.haveMetadata({playlistString:y.responseText,url:e.uri,id:e.id}),l==="HAVE_MASTER"?s.trigger("loadedmetadata"):s.trigger("mediachange")}})}},i.pause=function(){this.mediaUpdateTimeout&&(F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},i.load=function(e){var n=this;this.mediaUpdateTimeout&&(F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var s=this.media();if(e){var o=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=F.setTimeout(function(){n.mediaUpdateTimeout=null,n.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},i.updateMediaUpdateTimeout_=function(e){var n=this;this.mediaUpdateTimeout&&(F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=F.setTimeout(function(){n.mediaUpdateTimeout=null,n.trigger("mediaupdatetimeout"),n.updateMediaUpdateTimeout_(e)},e))},i.start=function(){var e=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=F.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){e.setupInitialPlaylist(e.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(n,s){if(e.request){if(e.request=null,n)return e.error={status:s.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:s.responseText,code:2},e.state==="HAVE_NOTHING"&&(e.started=!1),e.trigger("error");e.src=Yc(e.handleManifestRedirects,e.src,s);var o=e.parseManifest_({manifestString:s.responseText,url:e.src});e.setupInitialPlaylist(o)}})},i.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},i.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists){this.master=e,Bx(this.master,this.srcUri()),e.playlists.forEach(function(s){s.segments=Vx(s),s.segments.forEach(function(o){jx(o,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var n=this.srcUri()||F.location.href;this.master=Vk(e,n),this.haveMetadata({playlistObject:e,url:n,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(Hk),Gk=N.xhr,zk=N.mergeOptions,Gg=function(t,i,r,e){var n=t.responseType==="arraybuffer"?t.response:t.responseText;!i&&n&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=n.byteLength||n.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),r.headers&&(t.responseHeaders=r.headers),i&&i.code==="ETIMEDOUT"&&(t.timedout=!0),!i&&!t.aborted&&r.statusCode!==200&&r.statusCode!==206&&r.statusCode!==0&&(i=new Error("XHR Failed with a response of: "+(t&&(n||t.responseText)))),e(i,t)},$x=function(){var t=function i(r,e){r=zk({timeout:45e3},r);var n=i.beforeRequest||N.Vhs.xhr.beforeRequest;if(n&&typeof n=="function"){var s=n(r);s&&(r=s)}var o=N.Vhs.xhr.original===!0?Gk:N.Vhs.xhr,l=o(r,function(m,v){return Gg(l,m,v,e)}),f=l.abort;return l.abort=function(){return l.aborted=!0,f.apply(l,arguments)},l.uri=r.uri,l.requestTime=Date.now(),l};return t.original=!0,t},Kk=function(t){var i,r=t.offset;return typeof t.offset=="bigint"||typeof t.length=="bigint"?i=F.BigInt(t.offset)+F.BigInt(t.length)-F.BigInt(1):i=t.offset+t.length-1,"bytes="+r+"-"+i},zg=function(t){var i={};return t.byterange&&(i.Range=Kk(t.byterange)),i},Xk=function(t,i){return t.start(i)+"-"+t.end(i)},Qk=function(t,i){var r=t.toString(16);return"00".substring(0,2-r.length)+r+(i%2?" ":"")},Yk=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},Wx=function(t){var i={};return Object.keys(t).forEach(function(r){var e=t[r];lm(e)?i[r]={bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:i[r]=e}),i},th=function(t){var i=t.byterange||{length:1/0,offset:0};return[i.length,i.offset,t.resolvedUri].join(",")},qx=function(t){return t.resolvedUri},Gx=function(t){for(var i=Array.prototype.slice.call(t),r=16,e="",n,s,o=0;o<i.length/r;o++)n=i.slice(o*r,o*r+r).map(Qk).join(""),s=i.slice(o*r,o*r+r).map(Yk).join(""),e+=n+" "+s+`
`;return e},Jk=function(t){var i=t.bytes;return Gx(i)},Zk=function(t){var i="",r;for(r=0;r<t.length;r++)i+=Xk(t,r)+" ";return i},eR=Object.freeze({__proto__:null,createTransferableMessage:Wx,initSegmentId:th,segmentKeyId:qx,hexDump:Gx,tagDump:Jk,textRanges:Zk}),zx=.25,tR=function(t,i){if(!i.dateTimeObject)return null;var r=i.videoTimingInfo.transmuxerPrependedSeconds,e=i.videoTimingInfo.transmuxedPresentationStart,n=e+r,s=t-n;return new Date(i.dateTimeObject.getTime()+s*1e3)},iR=function(t){return t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds},rR=function(t,i){var r;try{r=new Date(t)}catch{return null}if(!i||!i.segments||i.segments.length===0)return null;var e=i.segments[0];if(r<e.dateTimeObject)return null;for(var n=0;n<i.segments.length-1;n++){e=i.segments[n];var s=i.segments[n+1].dateTimeObject;if(r<s)break}var o=i.segments[i.segments.length-1],l=o.dateTimeObject,f=o.videoTimingInfo?iR(o.videoTimingInfo):o.duration+o.duration*zx,m=new Date(l.getTime()+f*1e3);return r>m?null:(r>l&&(e=o),{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:or.duration(i,i.mediaSequence+i.segments.indexOf(e)),type:e.videoTimingInfo?"accurate":"estimate"})},nR=function(t,i){if(!i||!i.segments||i.segments.length===0)return null;for(var r=0,e,n=0;n<i.segments.length&&(e=i.segments[n],r=e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationEnd:r+e.duration,!(t<=r));n++);var s=i.segments[i.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>r){if(t>r+s.duration*zx)return null;e=s}return{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:r-e.duration,type:e.videoTimingInfo?"accurate":"estimate"}},aR=function(t,i){var r,e;try{r=new Date(t),e=new Date(i)}catch{}var n=r.getTime(),s=e.getTime();return(s-n)/1e3},sR=function(t){if(!t.segments||t.segments.length===0)return!1;for(var i=0;i<t.segments.length;i++){var r=t.segments[i];if(!r.dateTimeObject)return!1}return!0},oR=function(t){var i=t.playlist,r=t.time,e=r===void 0?void 0:r,n=t.callback;if(!n)throw new Error("getProgramTime: callback must be provided");if(!i||e===void 0)return n({message:"getProgramTime: playlist and time must be provided"});var s=nR(e,i);if(!s)return n({message:"valid programTime was not found"});if(s.type==="estimate")return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var o={mediaSeconds:e},l=tR(e,s.segment);return l&&(o.programDateTime=l.toISOString()),n(null,o)},uR=function a(t){var i=t.programTime,r=t.playlist,e=t.retryCount,n=e===void 0?2:e,s=t.seekTo,o=t.pauseAfterSeek,l=o===void 0?!0:o,f=t.tech,m=t.callback;if(!m)throw new Error("seekToProgramTime: callback must be provided");if(typeof i>"u"||!r||!s)return m({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!f.hasStarted_)return m({message:"player must be playing a live stream to start buffering"});if(!sR(r))return m({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});var v=rR(i,r);if(!v)return m({message:i+" was not found in the stream"});var y=v.segment,E=aR(y.dateTimeObject,i);if(v.type==="estimate"){if(n===0)return m({message:i+" is not buffered yet. Try again"});s(v.estimatedStart+E),f.one("seeked",function(){a({programTime:i,playlist:r,retryCount:n-1,seekTo:s,pauseAfterSeek:l,tech:f,callback:m})});return}var I=y.start+E,O=function(){return m(null,f.currentTime())};f.one("seeked",O),l&&f.pause(),s(I)},Kg=function(t,i){if(t.readyState===4)return i()},lR=function(t,i,r){var e=[],n,s=!1,o=function(y,E,I,O){return E.abort(),s=!0,r(y,E,I,O)},l=function(y,E){if(!s){if(y)return o(y,E,"",e);var I=E.responseText.substring(e&&e.byteLength||0,E.responseText.length);if(e=wy(e,fm(I,!0)),n=n||au(e),e.length<10||n&&e.length<n+2)return Kg(E,function(){return o(y,E,"",e)});var O=ou(e);return O==="ts"&&e.length<188?Kg(E,function(){return o(y,E,"",e)}):!O&&e.length<376?Kg(E,function(){return o(y,E,"",e)}):o(null,E,O,e)}},f={uri:t,beforeSend:function(y){y.overrideMimeType("text/plain; charset=x-user-defined"),y.addEventListener("progress",function(E){return E.total,E.loaded,Gg(y,null,{statusCode:y.status},l)})}},m=i(f,function(v,y){return Gg(m,v,y,l)});return m},dR=N.EventTarget,Kx=N.mergeOptions,Xx=function(t,i){if(!Hx(t,i)||t.sidx&&i.sidx&&(t.sidx.offset!==i.sidx.offset||t.sidx.length!==i.sidx.length))return!1;if(!t.sidx&&i.sidx||t.sidx&&!i.sidx||t.segments&&!i.segments||!t.segments&&i.segments)return!1;if(!t.segments&&!i.segments)return!0;for(var r=0;r<t.segments.length;r++){var e=t.segments[r],n=i.segments[r];if(e.uri!==n.uri)return!1;if(!(!e.byterange&&!n.byterange)){var s=e.byterange,o=n.byterange;if(s&&!o||!s&&o||s.offset!==o.offset||s.length!==o.length)return!1}}return!0},fR=function(t,i,r,e){var n=e.attributes.NAME||r;return"placeholder-uri-"+t+"-"+i+"-"+n},cR=function(t){var i=t.masterXml,r=t.srcUrl,e=t.clientOffset,n=t.sidxMapping,s=t.previousManifest,o=IT(i,{manifestUri:r,clientOffset:e,sidxMapping:n,previousManifest:s});return Bx(o,r,fR),o},hR=function(t,i){Cu(t,function(r,e,n,s){s in i.mediaGroups[e][n]||delete t.mediaGroups[e][n][s]})},pR=function(t,i,r){for(var e=!0,n=Kx(t,{duration:i.duration,minimumUpdatePeriod:i.minimumUpdatePeriod,timelineStarts:i.timelineStarts}),s=0;s<i.playlists.length;s++){var o=i.playlists[s];if(o.sidx){var l=Qs(o.sidx);r&&r[l]&&r[l].sidx&&Ql(o,r[l].sidx,o.sidx.resolvedUri)}var f=Wg(n,o,Xx);f&&(n=f,e=!1)}return Cu(i,function(m,v,y,E){if(m.playlists&&m.playlists.length){var I=m.playlists[0].id,O=Wg(n,m.playlists[0],Xx);O&&(n=O,E in n.mediaGroups[v][y]||(n.mediaGroups[v][y][E]=m),n.mediaGroups[v][y][E].playlists[0]=n.playlists[I],e=!1)}}),hR(n,i),i.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(e=!1),e?null:n},mR=function(t,i){var r=Boolean(!t.map&&!i.map),e=r||Boolean(t.map&&i.map&&t.map.byterange.offset===i.map.byterange.offset&&t.map.byterange.length===i.map.byterange.length);return e&&t.uri===i.uri&&t.byterange.offset===i.byterange.offset&&t.byterange.length===i.byterange.length},Qx=function(t,i){var r={};for(var e in t){var n=t[e],s=n.sidx;if(s){var o=Qs(s);if(!i[o])break;var l=i[o].sidxInfo;mR(l,s)&&(r[o]=i[o])}}return r},gR=function(t,i){var r=Qx(t.playlists,i),e=r;return Cu(t,function(n,s,o,l){if(n.playlists&&n.playlists.length){var f=n.playlists;e=Kx(e,Qx(f,i))}}),e},Xg=function(a){Ae(t,a);function t(r,e,n,s){var o;n===void 0&&(n={}),o=a.call(this)||this,o.masterPlaylistLoader_=s||Ue(o),s||(o.isMaster_=!0);var l=n,f=l.withCredentials,m=f===void 0?!1:f,v=l.handleManifestRedirects,y=v===void 0?!1:v;if(o.vhs_=e,o.withCredentials=m,o.handleManifestRedirects=y,!r)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=fn("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=r,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=r,o}var i=t.prototype;return i.requestErrored_=function(e,n,s){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:n.status,message:"DASH request error at URL: "+n.uri,response:n.response,code:2},s&&(this.state=s),this.trigger("error"),!0},i.addSidxSegments_=function(e,n,s){var o=this,l=e.sidx&&Qs(e.sidx);if(!e.sidx||!l||this.masterPlaylistLoader_.sidxMapping_[l]){this.mediaRequest_=F.setTimeout(function(){return s(!1)},0);return}var f=Yc(this.handleManifestRedirects,e.sidx.resolvedUri),m=function(y,E){if(!o.requestErrored_(y,E,n)){var I=o.masterPlaylistLoader_.sidxMapping_,O;try{O=LT($e(E.response).subarray(8))}catch(D){o.requestErrored_(D,E,n);return}return I[l]={sidxInfo:e.sidx,sidx:O},Ql(e,O,e.sidx.resolvedUri),s(!0)}};this.request=lR(f,this.vhs_.xhr,function(v,y,E,I){if(v)return m(v,y);if(!E||E!=="mp4")return m({status:y.status,message:"Unsupported "+(E||"unknown")+" container type for sidx segment at URL: "+f,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},y);var O=e.sidx.byterange,D=O.offset,R=O.length;if(I.length>=R+D)return m(v,{response:I.subarray(D,D+R),status:y.status,uri:y.uri});o.request=o.vhs_.xhr({uri:f,responseType:"arraybuffer",headers:zg({byterange:e.sidx.byterange})},m)})},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},F.clearTimeout(this.minimumUpdatePeriodTimeout_),F.clearTimeout(this.mediaRequest_),F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},i.hasPendingRequest=function(){return this.request||this.mediaRequest_},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e){var n=this;if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if(typeof e=="string"){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var o=!this.media_||e.id!==this.media_.id;if(o&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}o&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,s,function(l){n.haveMetadata({startingState:s,playlist:e})}))},i.haveMetadata=function(e){var n=e.startingState,s=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),n==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},i.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(F.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},i.load=function(e){var n=this;F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var s=this.media();if(e){var o=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=F.setTimeout(function(){return n.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},i.start=function(){var e=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=F.setTimeout(function(){return e.haveMaster_()},0);return}this.requestMaster_(function(n,s){e.haveMaster_(),!e.hasPendingRequest()&&!e.media_&&e.media(e.masterPlaylistLoader_.master.playlists[0])})},i.requestMaster_=function(e){var n=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(s,o){if(n.requestErrored_(s,o)){n.state==="HAVE_NOTHING"&&(n.started=!1);return}var l=o.responseText!==n.masterPlaylistLoader_.masterXml_;if(n.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?n.masterLoaded_=Date.parse(o.responseHeaders.date):n.masterLoaded_=Date.now(),n.masterPlaylistLoader_.srcUrl=Yc(n.handleManifestRedirects,n.masterPlaylistLoader_.srcUrl,o),l){n.handleMaster_(),n.syncClientServerClock_(function(){return e(o,l)});return}return e(o,l)})},i.syncClientServerClock_=function(e){var n=this,s=PT(this.masterPlaylistLoader_.masterXml_);if(s===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e();if(s.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=s.value-Date.now(),e();this.request=this.vhs_.xhr({uri:dn(this.masterPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(o,l){if(n.request){if(o)return n.masterPlaylistLoader_.clientOffset_=n.masterLoaded_-Date.now(),e();var f;s.method==="HEAD"?!l.responseHeaders||!l.responseHeaders.date?f=n.masterLoaded_:f=Date.parse(l.responseHeaders.date):f=Date.parse(l.responseText),n.masterPlaylistLoader_.clientOffset_=f-Date.now(),e()}})},i.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},i.handleMaster_=function(){this.mediaRequest_=null;var e=this.masterPlaylistLoader_.master,n=cR({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(n=pR(e,n,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=n||e;var s=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return s&&s!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=s),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(n)},i.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(F.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var n=e.master&&e.master.minimumUpdatePeriod;if(n===0&&(e.media()?n=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof n!="number"||n<=0){n<0&&this.logger_("found invalid minimumUpdatePeriod of "+n+", not setting a timeout");return}this.createMUPTimeout_(n)},i.createMUPTimeout_=function(e){var n=this.masterPlaylistLoader_;n.minimumUpdatePeriodTimeout_=F.setTimeout(function(){n.minimumUpdatePeriodTimeout_=null,n.trigger("minimumUpdatePeriod"),n.createMUPTimeout_(e)},e)},i.refreshXml_=function(){var e=this;this.requestMaster_(function(n,s){s&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=gR(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.sidxMapping_),e.addSidxSegments_(e.media(),e.state,function(o){e.refreshMedia_(e.media().id)}))})},i.refreshMedia_=function(e){var n=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var s=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==s[e];if(o?this.media_=s[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var l=function f(){n.media().endList||(n.mediaUpdateTimeout=F.setTimeout(function(){n.trigger("mediaupdatetimeout"),f()},qg(n.media(),Boolean(o))))};l()}this.trigger("loadedplaylist")},t}(dR),pi={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},vR=function(t){for(var i=new Uint8Array(new ArrayBuffer(t.length)),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i.buffer},Yx=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},_R=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{var i=new BlobBuilder;return i.append(t),URL.createObjectURL(i.getBlob())}},Jx=function(t){return function(){var i=_R(t),r=Yx(new Worker(i));r.objURL=i;var e=r.terminate;return r.on=r.addEventListener,r.off=r.removeEventListener,r.terminate=function(){return URL.revokeObjectURL(i),e.call(this)},r}},Zx=function(t){return"var browserWorkerPolyFill = "+Yx.toString()+`;
browserWorkerPolyFill(self);
`+t},eS=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},yR=Zx(eS(function(){var a=function(){this.init=function(){var d={};this.on=function(p,h){d[p]||(d[p]=[]),d[p]=d[p].concat(h)},this.off=function(p,h){var g;return d[p]?(g=d[p].indexOf(h),d[p]=d[p].slice(),d[p].splice(g,1),g>-1):!1},this.trigger=function(p){var h,g,_,T;if(h=d[p],!!h)if(arguments.length===2)for(_=h.length,g=0;g<_;++g)h[g].call(this,arguments[1]);else{for(T=[],g=arguments.length,g=1;g<arguments.length;++g)T.push(arguments[g]);for(_=h.length,g=0;g<_;++g)h[g].apply(this,T)}},this.dispose=function(){d={}}}};a.prototype.pipe=function(x){return this.on("data",function(d){x.push(d)}),this.on("done",function(d){x.flush(d)}),this.on("partialdone",function(d){x.partialFlush(d)}),this.on("endedtimeline",function(d){x.endTimeline(d)}),this.on("reset",function(d){x.reset(d)}),x},a.prototype.push=function(x){this.trigger("data",x)},a.prototype.flush=function(x){this.trigger("done",x)},a.prototype.partialFlush=function(x){this.trigger("partialdone",x)},a.prototype.endTimeline=function(x){this.trigger("endedtimeline",x)},a.prototype.reset=function(x){this.trigger("reset",x)};var t=a,i=Math.pow(2,32),r=function(d){var p=new DataView(d.buffer,d.byteOffset,d.byteLength),h;return p.getBigUint64?(h=p.getBigUint64(0),h<Number.MAX_SAFE_INTEGER?Number(h):h):p.getUint32(0)*i+p.getUint32(4)},e={getUint64:r,MAX_UINT32:i},n=e.MAX_UINT32,s,o,l,f,m,v,y,E,I,O,D,R,H,Z,V,W,te,z,q,X,j,oe,re,se,he,le,pe,ne,fe,Ie,Ce,Xe,Be,Qe,Et,bt;(function(){var x;if(re={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(x in re)re.hasOwnProperty(x)&&(re[x]=[x.charCodeAt(0),x.charCodeAt(1),x.charCodeAt(2),x.charCodeAt(3)]);se=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),le=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),he=new Uint8Array([0,0,0,1]),pe=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ne=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),fe={video:pe,audio:ne},Xe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Ce=new Uint8Array([0,0,0,0,0,0,0,0]),Be=new Uint8Array([0,0,0,0,0,0,0,0]),Qe=Be,Et=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),bt=Be,Ie=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),s=function(d){var p=[],h=0,g,_,T;for(g=1;g<arguments.length;g++)p.push(arguments[g]);for(g=p.length;g--;)h+=p[g].byteLength;for(_=new Uint8Array(h+8),T=new DataView(_.buffer,_.byteOffset,_.byteLength),T.setUint32(0,_.byteLength),_.set(d,4),g=0,h=8;g<p.length;g++)_.set(p[g],h),h+=p[g].byteLength;return _},o=function(){return s(re.dinf,s(re.dref,Xe))},l=function(d){return s(re.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,d.audioobjecttype<<3|d.samplingfrequencyindex>>>1,d.samplingfrequencyindex<<7|d.channelcount<<3,6,1,2]))},f=function(){return s(re.ftyp,se,he,se,le)},W=function(d){return s(re.hdlr,fe[d])},m=function(d){return s(re.mdat,d)},V=function(d){var p=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,d.duration>>>24&255,d.duration>>>16&255,d.duration>>>8&255,d.duration&255,85,196,0,0]);return d.samplerate&&(p[12]=d.samplerate>>>24&255,p[13]=d.samplerate>>>16&255,p[14]=d.samplerate>>>8&255,p[15]=d.samplerate&255),s(re.mdhd,p)},Z=function(d){return s(re.mdia,V(d),W(d.type),y(d))},v=function(d){return s(re.mfhd,new Uint8Array([0,0,0,0,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255]))},y=function(d){return s(re.minf,d.type==="video"?s(re.vmhd,Ie):s(re.smhd,Ce),o(),z(d))},E=function(d,p){for(var h=[],g=p.length;g--;)h[g]=X(p[g]);return s.apply(null,[re.moof,v(d)].concat(h))},I=function(d){for(var p=d.length,h=[];p--;)h[p]=R(d[p]);return s.apply(null,[re.moov,D(4294967295)].concat(h).concat(O(d)))},O=function(d){for(var p=d.length,h=[];p--;)h[p]=j(d[p]);return s.apply(null,[re.mvex].concat(h))},D=function(d){var p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(re.mvhd,p)},te=function(d){var p=d.samples||[],h=new Uint8Array(4+p.length),g,_;for(_=0;_<p.length;_++)g=p[_].flags,h[_+4]=g.dependsOn<<4|g.isDependedOn<<2|g.hasRedundancy;return s(re.sdtp,h)},z=function(d){return s(re.stbl,q(d),s(re.stts,bt),s(re.stsc,Qe),s(re.stsz,Et),s(re.stco,Be))},function(){var x,d;q=function(h){return s(re.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),h.type==="video"?x(h):d(h))},x=function(h){var g=h.sps||[],_=h.pps||[],T=[],w=[],S,P;for(S=0;S<g.length;S++)T.push((g[S].byteLength&65280)>>>8),T.push(g[S].byteLength&255),T=T.concat(Array.prototype.slice.call(g[S]));for(S=0;S<_.length;S++)w.push((_[S].byteLength&65280)>>>8),w.push(_[S].byteLength&255),w=w.concat(Array.prototype.slice.call(_[S]));if(P=[re.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(h.width&65280)>>8,h.width&255,(h.height&65280)>>8,h.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(re.avcC,new Uint8Array([1,h.profileIdc,h.profileCompatibility,h.levelIdc,255].concat([g.length],T,[_.length],w))),s(re.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],h.sarRatio){var C=h.sarRatio[0],L=h.sarRatio[1];P.push(s(re.pasp,new Uint8Array([(C&4278190080)>>24,(C&16711680)>>16,(C&65280)>>8,C&255,(L&4278190080)>>24,(L&16711680)>>16,(L&65280)>>8,L&255])))}return s.apply(null,P)},d=function(h){return s(re.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(h.channelcount&65280)>>8,h.channelcount&255,(h.samplesize&65280)>>8,h.samplesize&255,0,0,0,0,(h.samplerate&65280)>>8,h.samplerate&255,0,0]),l(h))}}(),H=function(d){var p=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,0,(d.duration&4278190080)>>24,(d.duration&16711680)>>16,(d.duration&65280)>>8,d.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(d.width&65280)>>8,d.width&255,0,0,(d.height&65280)>>8,d.height&255,0,0]);return s(re.tkhd,p)},X=function(d){var p,h,g,_,T,w,S;return p=s(re.tfhd,new Uint8Array([0,0,0,58,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),w=Math.floor(d.baseMediaDecodeTime/n),S=Math.floor(d.baseMediaDecodeTime%n),h=s(re.tfdt,new Uint8Array([1,0,0,0,w>>>24&255,w>>>16&255,w>>>8&255,w&255,S>>>24&255,S>>>16&255,S>>>8&255,S&255])),T=32+20+8+16+8+8,d.type==="audio"?(g=oe(d,T),s(re.traf,p,h,g)):(_=te(d),g=oe(d,_.length+T),s(re.traf,p,h,g,_))},R=function(d){return d.duration=d.duration||4294967295,s(re.trak,H(d),Z(d))},j=function(d){var p=new Uint8Array([0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return d.type!=="video"&&(p[p.length-1]=0),s(re.trex,p)},function(){var x,d,p;p=function(g,_){var T=0,w=0,S=0,P=0;return g.length&&(g[0].duration!==void 0&&(T=1),g[0].size!==void 0&&(w=2),g[0].flags!==void 0&&(S=4),g[0].compositionTimeOffset!==void 0&&(P=8)),[0,0,T|w|S|P,1,(g.length&4278190080)>>>24,(g.length&16711680)>>>16,(g.length&65280)>>>8,g.length&255,(_&4278190080)>>>24,(_&16711680)>>>16,(_&65280)>>>8,_&255]},d=function(g,_){var T,w,S,P,C,L;for(P=g.samples||[],_+=8+12+16*P.length,S=p(P,_),w=new Uint8Array(S.length+P.length*16),w.set(S),T=S.length,L=0;L<P.length;L++)C=P[L],w[T++]=(C.duration&4278190080)>>>24,w[T++]=(C.duration&16711680)>>>16,w[T++]=(C.duration&65280)>>>8,w[T++]=C.duration&255,w[T++]=(C.size&4278190080)>>>24,w[T++]=(C.size&16711680)>>>16,w[T++]=(C.size&65280)>>>8,w[T++]=C.size&255,w[T++]=C.flags.isLeading<<2|C.flags.dependsOn,w[T++]=C.flags.isDependedOn<<6|C.flags.hasRedundancy<<4|C.flags.paddingValue<<1|C.flags.isNonSyncSample,w[T++]=C.flags.degradationPriority&240<<8,w[T++]=C.flags.degradationPriority&15,w[T++]=(C.compositionTimeOffset&4278190080)>>>24,w[T++]=(C.compositionTimeOffset&16711680)>>>16,w[T++]=(C.compositionTimeOffset&65280)>>>8,w[T++]=C.compositionTimeOffset&255;return s(re.trun,w)},x=function(g,_){var T,w,S,P,C,L;for(P=g.samples||[],_+=8+12+8*P.length,S=p(P,_),T=new Uint8Array(S.length+P.length*8),T.set(S),w=S.length,L=0;L<P.length;L++)C=P[L],T[w++]=(C.duration&4278190080)>>>24,T[w++]=(C.duration&16711680)>>>16,T[w++]=(C.duration&65280)>>>8,T[w++]=C.duration&255,T[w++]=(C.size&4278190080)>>>24,T[w++]=(C.size&16711680)>>>16,T[w++]=(C.size&65280)>>>8,T[w++]=C.size&255;return s(re.trun,T)},oe=function(g,_){return g.type==="audio"?x(g,_):d(g,_)}}();var xt={ftyp:f,mdat:m,moof:E,moov:I,initSegment:function(d){var p=f(),h=I(d),g;return g=new Uint8Array(p.byteLength+h.byteLength),g.set(p),g.set(h,p.byteLength),g}},wt=function(d){var p,h,g=[],_=[];for(_.byteLength=0,_.nalCount=0,_.duration=0,g.byteLength=0,p=0;p<d.length;p++)h=d[p],h.nalUnitType==="access_unit_delimiter_rbsp"?(g.length&&(g.duration=h.dts-g.dts,_.byteLength+=g.byteLength,_.nalCount+=g.length,_.duration+=g.duration,_.push(g)),g=[h],g.byteLength=h.data.byteLength,g.pts=h.pts,g.dts=h.dts):(h.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(g.keyFrame=!0),g.duration=h.dts-g.dts,g.byteLength+=h.data.byteLength,g.push(h));return _.length&&(!g.duration||g.duration<=0)&&(g.duration=_[_.length-1].duration),_.byteLength+=g.byteLength,_.nalCount+=g.length,_.duration+=g.duration,_.push(g),_},Ct=function(d){var p,h,g=[],_=[];for(g.byteLength=0,g.nalCount=0,g.duration=0,g.pts=d[0].pts,g.dts=d[0].dts,_.byteLength=0,_.nalCount=0,_.duration=0,_.pts=d[0].pts,_.dts=d[0].dts,p=0;p<d.length;p++)h=d[p],h.keyFrame?(g.length&&(_.push(g),_.byteLength+=g.byteLength,_.nalCount+=g.nalCount,_.duration+=g.duration),g=[h],g.nalCount=h.length,g.byteLength=h.byteLength,g.pts=h.pts,g.dts=h.dts,g.duration=h.duration):(g.duration+=h.duration,g.nalCount+=h.length,g.byteLength+=h.byteLength,g.push(h));return _.length&&g.duration<=0&&(g.duration=_[_.length-1].duration),_.byteLength+=g.byteLength,_.nalCount+=g.nalCount,_.duration+=g.duration,_.push(g),_},ht=function(d){var p;return!d[0][0].keyFrame&&d.length>1&&(p=d.shift(),d.byteLength-=p.byteLength,d.nalCount-=p.nalCount,d[0][0].dts=p.dts,d[0][0].pts=p.pts,d[0][0].duration+=p.duration),d},Yt=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},gi=function(d,p){var h=Yt();return h.dataOffset=p,h.compositionTimeOffset=d.pts-d.dts,h.duration=d.duration,h.size=4*d.length,h.size+=d.byteLength,d.keyFrame&&(h.flags.dependsOn=2,h.flags.isNonSyncSample=0),h},Ei=function(d,p){var h,g,_,T,w,S=p||0,P=[];for(h=0;h<d.length;h++)for(T=d[h],g=0;g<T.length;g++)w=T[g],_=gi(w,S),S+=_.size,P.push(_);return P},G=function(d){var p,h,g,_,T,w,S=0,P=d.byteLength,C=d.nalCount,L=P+4*C,B=new Uint8Array(L),ee=new DataView(B.buffer);for(p=0;p<d.length;p++)for(_=d[p],h=0;h<_.length;h++)for(T=_[h],g=0;g<T.length;g++)w=T[g],ee.setUint32(S,w.data.byteLength),S+=4,B.set(w.data,S),S+=w.data.byteLength;return B},J=function(d,p){var h,g=p||0,_=[];return h=gi(d,g),_.push(h),_},de=function(d){var p,h,g=0,_=d.byteLength,T=d.length,w=_+4*T,S=new Uint8Array(w),P=new DataView(S.buffer);for(p=0;p<d.length;p++)h=d[p],P.setUint32(g,h.data.byteLength),g+=4,S.set(h.data,g),g+=h.data.byteLength;return S},me={groupNalsIntoFrames:wt,groupFramesIntoGops:Ct,extendFirstKeyFrame:ht,generateSampleTable:Ei,concatenateNalData:G,generateSampleTableForFrame:J,concatenateNalDataForFrame:de},ce=[33,16,5,32,164,27],we=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ue=function(d){for(var p=[];d--;)p.push(0);return p},Ee=function(d){return Object.keys(d).reduce(function(p,h){return p[h]=new Uint8Array(d[h].reduce(function(g,_){return g.concat(_)},[])),p},{})},be,_e=function(){if(!be){var d={96e3:[ce,[227,64],ue(154),[56]],88200:[ce,[231],ue(170),[56]],64e3:[ce,[248,192],ue(240),[56]],48e3:[ce,[255,192],ue(268),[55,148,128],ue(54),[112]],44100:[ce,[255,192],ue(268),[55,163,128],ue(84),[112]],32e3:[ce,[255,192],ue(268),[55,234],ue(226),[112]],24e3:[ce,[255,192],ue(268),[55,255,128],ue(268),[111,112],ue(126),[224]],16e3:[ce,[255,192],ue(268),[55,255,128],ue(268),[111,255],ue(269),[223,108],ue(195),[1,192]],12e3:[we,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,253,128],ue(259),[56]],11025:[we,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,255,192],ue(268),[55,175,128],ue(108),[112]],8e3:[we,ue(268),[3,121,16],ue(47),[7]]};be=Ee(d)}return be},Re=9e4,ke,Me,je,qe,ut,ft,At;ke=function(d){return d*Re},Me=function(d,p){return d*p},je=function(d){return d/Re},qe=function(d,p){return d/p},ut=function(d,p){return ke(qe(d,p))},ft=function(d,p){return Me(je(d),p)},At=function(d,p,h){return je(h?d:d-p)};var Oe={ONE_SECOND_IN_TS:Re,secondsToVideoTs:ke,secondsToAudioTs:Me,videoTsToSeconds:je,audioTsToSeconds:qe,audioTsToVideoTs:ut,videoTsToAudioTs:ft,metadataTsToSeconds:At},lr=function(d){var p,h,g=0;for(p=0;p<d.length;p++)h=d[p],g+=h.data.byteLength;return g},Xn=function(d,p,h,g){var _,T=0,w=0,S=0,P=0,C,L,B;if(p.length&&(_=Oe.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),T=Math.ceil(Oe.ONE_SECOND_IN_TS/(d.samplerate/1024)),h&&g&&(w=_-Math.max(h,g),S=Math.floor(w/T),P=S*T),!(S<1||P>Oe.ONE_SECOND_IN_TS/2))){for(C=_e()[d.samplerate],C||(C=p[0].data),L=0;L<S;L++)B=p[0],p.splice(0,0,{data:C,dts:B.dts-T,pts:B.pts-T});return d.baseMediaDecodeTime-=Math.floor(Oe.videoTsToAudioTs(P,d.samplerate)),P}},Cr=function(d,p,h){return p.minSegmentDts>=h?d:(p.minSegmentDts=1/0,d.filter(function(g){return g.dts>=h?(p.minSegmentDts=Math.min(p.minSegmentDts,g.dts),p.minSegmentPts=p.minSegmentDts,!0):!1}))},Qn=function(d){var p,h,g=[];for(p=0;p<d.length;p++)h=d[p],g.push({size:h.data.byteLength,duration:1024});return g},Vt=function(d){var p,h,g=0,_=new Uint8Array(lr(d));for(p=0;p<d.length;p++)h=d[p],_.set(h.data,g),g+=h.data.byteLength;return _},jt={prefixWithSilence:Xn,trimAdtsFramesByEarliestDts:Cr,generateSampleTable:Qn,concatenateFrameData:Vt},ls=Oe.ONE_SECOND_IN_TS,Sd=function(d,p){typeof p.pts=="number"&&(d.timelineStartInfo.pts===void 0&&(d.timelineStartInfo.pts=p.pts),d.minSegmentPts===void 0?d.minSegmentPts=p.pts:d.minSegmentPts=Math.min(d.minSegmentPts,p.pts),d.maxSegmentPts===void 0?d.maxSegmentPts=p.pts:d.maxSegmentPts=Math.max(d.maxSegmentPts,p.pts)),typeof p.dts=="number"&&(d.timelineStartInfo.dts===void 0&&(d.timelineStartInfo.dts=p.dts),d.minSegmentDts===void 0?d.minSegmentDts=p.dts:d.minSegmentDts=Math.min(d.minSegmentDts,p.dts),d.maxSegmentDts===void 0?d.maxSegmentDts=p.dts:d.maxSegmentDts=Math.max(d.maxSegmentDts,p.dts))},Ed=function(d){delete d.minSegmentDts,delete d.maxSegmentDts,delete d.minSegmentPts,delete d.maxSegmentPts},Mu=function(d,p){var h,g,_=d.minSegmentDts;return p||(_-=d.timelineStartInfo.dts),h=d.timelineStartInfo.baseMediaDecodeTime,h+=_,h=Math.max(0,h),d.type==="audio"&&(g=d.samplerate/ls,h*=g,h=Math.floor(h)),h},Mt={clearDtsInfo:Ed,calculateTrackBaseMediaDecodeTime:Mu,collectDtsInfo:Sd},so=4,wd=128,Cd=function(d){for(var p=0,h={payloadType:-1,payloadSize:0},g=0,_=0;p<d.byteLength&&d[p]!==wd;){for(;d[p]===255;)g+=255,p++;for(g+=d[p++];d[p]===255;)_+=255,p++;if(_+=d[p++],!h.payload&&g===so){var T=String.fromCharCode(d[p+3],d[p+4],d[p+5],d[p+6]);if(T==="GA94"){h.payloadType=g,h.payloadSize=_,h.payload=d.subarray(p,p+_);break}else h.payload=void 0}p+=_,g=0,_=0}return h},Ad=function(d){return d.payload[0]!==181||(d.payload[1]<<8|d.payload[2])!==49||String.fromCharCode(d.payload[3],d.payload[4],d.payload[5],d.payload[6])!=="GA94"||d.payload[7]!==3?null:d.payload.subarray(8,d.payload.length-1)},Fu=function(d,p){var h=[],g,_,T,w;if(!(p[0]&64))return h;for(_=p[0]&31,g=0;g<_;g++)T=g*3,w={type:p[T+2]&3,pts:d},p[T+2]&4&&(w.ccData=p[T+3]<<8|p[T+4],h.push(w));return h},Id=function(d){for(var p=d.byteLength,h=[],g=1,_,T;g<p-2;)d[g]===0&&d[g+1]===0&&d[g+2]===3?(h.push(g+2),g+=2):g++;if(h.length===0)return d;_=p-h.length,T=new Uint8Array(_);var w=0;for(g=0;g<_;w++,g++)w===h[0]&&(w++,h.shift()),T[g]=d[w];return T},Ar={parseSei:Cd,parseUserData:Ad,parseCaptionPackets:Fu,discardEmulationPreventionBytes:Id,USER_DATA_REGISTERED_ITU_T_T35:so},Ot=function x(d){d=d||{},x.prototype.init.call(this),this.parse708captions_=typeof d.parse708captions=="boolean"?d.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Ge(0,0),new Ge(0,1),new Ge(1,0),new Ge(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ve({captionServices:d.captionServices})),this.reset(),this.ccStreams_.forEach(function(p){p.on("data",this.trigger.bind(this,"data")),p.on("partialdone",this.trigger.bind(this,"partialdone")),p.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Ot.prototype=new t,Ot.prototype.push=function(x){var d,p,h;if(x.nalUnitType==="sei_rbsp"&&(d=Ar.parseSei(x.escapedRBSP),!!d.payload&&d.payloadType===Ar.USER_DATA_REGISTERED_ITU_T_T35&&(p=Ar.parseUserData(d),!!p))){if(x.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(x.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}h=Ar.parseCaptionPackets(x.pts,p),this.captionPackets_=this.captionPackets_.concat(h),this.latestDts_!==x.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=x.dts}},Ot.prototype.flushCCStreams=function(x){this.ccStreams_.forEach(function(d){return x==="flush"?d.flush():d.partialFlush()},this)},Ot.prototype.flushStream=function(x){if(!this.captionPackets_.length){this.flushCCStreams(x);return}this.captionPackets_.forEach(function(d,p){d.presortIndex=p}),this.captionPackets_.sort(function(d,p){return d.pts===p.pts?d.presortIndex-p.presortIndex:d.pts-p.pts}),this.captionPackets_.forEach(function(d){d.type<2?this.dispatchCea608Packet(d):this.dispatchCea708Packet(d)},this),this.captionPackets_.length=0,this.flushCCStreams(x)},Ot.prototype.flush=function(){return this.flushStream("flush")},Ot.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ot.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(x){x.reset()})},Ot.prototype.dispatchCea608Packet=function(x){this.setsTextOrXDSActive(x)?this.activeCea608Channel_[x.type]=null:this.setsChannel1Active(x)?this.activeCea608Channel_[x.type]=0:this.setsChannel2Active(x)&&(this.activeCea608Channel_[x.type]=1),this.activeCea608Channel_[x.type]!==null&&this.ccStreams_[(x.type<<1)+this.activeCea608Channel_[x.type]].push(x)},Ot.prototype.setsChannel1Active=function(x){return(x.ccData&30720)===4096},Ot.prototype.setsChannel2Active=function(x){return(x.ccData&30720)===6144},Ot.prototype.setsTextOrXDSActive=function(x){return(x.ccData&28928)===256||(x.ccData&30974)===4138||(x.ccData&30974)===6186},Ot.prototype.dispatchCea708Packet=function(x){this.parse708captions_&&this.cc708Stream_.push(x)};var oo={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Pd=function(d){var p=oo[d]||d;return d&4096&&d===p?"":String.fromCharCode(p)},Ir=function(d){return 32<=d&&d<=127||160<=d&&d<=255},Jt=function(d){this.windowNum=d,this.reset()};Jt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Jt.prototype.getText=function(){return this.rows.join(`
`)},Jt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Jt.prototype.newLine=function(x){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(x),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Jt.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Jt.prototype.addText=function(x){this.rows[this.rowIdx]+=x},Jt.prototype.backspace=function(){if(!this.isEmpty()){var x=this.rows[this.rowIdx];this.rows[this.rowIdx]=x.substr(0,x.length-1)}};var pn=function(d,p,h){this.serviceNum=d,this.text="",this.currentWindow=new Jt(-1),this.windows=[],this.stream=h,typeof p=="string"&&this.createTextDecoder(p)};pn.prototype.init=function(x,d){this.startPts=x;for(var p=0;p<8;p++)this.windows[p]=new Jt(p),typeof d=="function"&&(this.windows[p].beforeRowOverflow=d)},pn.prototype.setCurrentWindow=function(x){this.currentWindow=this.windows[x]},pn.prototype.createTextDecoder=function(x){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(x)}catch(d){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+x+" encoding. "+d})}};var Ve=function x(d){d=d||{},x.prototype.init.call(this);var p=this,h=d.captionServices||{},g={},_;Object.keys(h).forEach(function(T){_=h[T],/^SERVICE/.test(T)&&(g[T]=_.encoding)}),this.serviceEncodings=g,this.current708Packet=null,this.services={},this.push=function(T){T.type===3?(p.new708Packet(),p.add708Bytes(T)):(p.current708Packet===null&&p.new708Packet(),p.add708Bytes(T))}};Ve.prototype=new t,Ve.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ve.prototype.add708Bytes=function(x){var d=x.ccData,p=d>>>8,h=d&255;this.current708Packet.ptsVals.push(x.pts),this.current708Packet.data.push(p),this.current708Packet.data.push(h)},Ve.prototype.push708Packet=function(){var x=this.current708Packet,d=x.data,p=null,h=null,g=0,_=d[g++];for(x.seq=_>>6,x.sizeCode=_&63;g<d.length;g++)_=d[g++],p=_>>5,h=_&31,p===7&&h>0&&(_=d[g++],p=_),this.pushServiceBlock(p,g,h),h>0&&(g+=h-1)},Ve.prototype.pushServiceBlock=function(x,d,p){var h,g=d,_=this.current708Packet.data,T=this.services[x];for(T||(T=this.initService(x,g));g<d+p&&g<_.length;g++)h=_[g],Ir(h)?g=this.handleText(g,T):h===24?g=this.multiByteCharacter(g,T):h===16?g=this.extendedCommands(g,T):128<=h&&h<=135?g=this.setCurrentWindow(g,T):152<=h&&h<=159?g=this.defineWindow(g,T):h===136?g=this.clearWindows(g,T):h===140?g=this.deleteWindows(g,T):h===137?g=this.displayWindows(g,T):h===138?g=this.hideWindows(g,T):h===139?g=this.toggleWindows(g,T):h===151?g=this.setWindowAttributes(g,T):h===144?g=this.setPenAttributes(g,T):h===145?g=this.setPenColor(g,T):h===146?g=this.setPenLocation(g,T):h===143?T=this.reset(g,T):h===8?T.currentWindow.backspace():h===12?T.currentWindow.clearText():h===13?T.currentWindow.pendingNewLine=!0:h===14?T.currentWindow.clearText():h===141&&g++},Ve.prototype.extendedCommands=function(x,d){var p=this.current708Packet.data,h=p[++x];return Ir(h)&&(x=this.handleText(x,d,{isExtended:!0})),x},Ve.prototype.getPts=function(x){return this.current708Packet.ptsVals[Math.floor(x/2)]},Ve.prototype.initService=function(x,d){var h="SERVICE"+x,p=this,h,g;return h in this.serviceEncodings&&(g=this.serviceEncodings[h]),this.services[x]=new pn(x,g,p),this.services[x].init(this.getPts(d),function(_){p.flushDisplayed(_,p.services[x])}),this.services[x]},Ve.prototype.handleText=function(x,d,p){var h=p&&p.isExtended,g=p&&p.isMultiByte,_=this.current708Packet.data,T=h?4096:0,w=_[x],S=_[x+1],P=d.currentWindow,C,L;return d.textDecoder_&&!h?(g?(L=[w,S],x++):L=[w],C=d.textDecoder_.decode(new Uint8Array(L))):C=Pd(T|w),P.pendingNewLine&&!P.isEmpty()&&P.newLine(this.getPts(x)),P.pendingNewLine=!1,P.addText(C),x},Ve.prototype.multiByteCharacter=function(x,d){var p=this.current708Packet.data,h=p[x+1],g=p[x+2];return Ir(h)&&Ir(g)&&(x=this.handleText(++x,d,{isMultiByte:!0})),x},Ve.prototype.setCurrentWindow=function(x,d){var p=this.current708Packet.data,h=p[x],g=h&7;return d.setCurrentWindow(g),x},Ve.prototype.defineWindow=function(x,d){var p=this.current708Packet.data,h=p[x],g=h&7;d.setCurrentWindow(g);var _=d.currentWindow;return h=p[++x],_.visible=(h&32)>>5,_.rowLock=(h&16)>>4,_.columnLock=(h&8)>>3,_.priority=h&7,h=p[++x],_.relativePositioning=(h&128)>>7,_.anchorVertical=h&127,h=p[++x],_.anchorHorizontal=h,h=p[++x],_.anchorPoint=(h&240)>>4,_.rowCount=h&15,h=p[++x],_.columnCount=h&63,h=p[++x],_.windowStyle=(h&56)>>3,_.penStyle=h&7,_.virtualRowCount=_.rowCount+1,x},Ve.prototype.setWindowAttributes=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.winAttr;return h=p[++x],g.fillOpacity=(h&192)>>6,g.fillRed=(h&48)>>4,g.fillGreen=(h&12)>>2,g.fillBlue=h&3,h=p[++x],g.borderType=(h&192)>>6,g.borderRed=(h&48)>>4,g.borderGreen=(h&12)>>2,g.borderBlue=h&3,h=p[++x],g.borderType+=(h&128)>>5,g.wordWrap=(h&64)>>6,g.printDirection=(h&48)>>4,g.scrollDirection=(h&12)>>2,g.justify=h&3,h=p[++x],g.effectSpeed=(h&240)>>4,g.effectDirection=(h&12)>>2,g.displayEffect=h&3,x},Ve.prototype.flushDisplayed=function(x,d){for(var p=[],h=0;h<8;h++)d.windows[h].visible&&!d.windows[h].isEmpty()&&p.push(d.windows[h].getText());d.endPts=x,d.text=p.join(`

`),this.pushCaption(d),d.startPts=x},Ve.prototype.pushCaption=function(x){x.text!==""&&(this.trigger("data",{startPts:x.startPts,endPts:x.endPts,text:x.text,stream:"cc708_"+x.serviceNum}),x.text="",x.startPts=x.endPts)},Ve.prototype.displayWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&(d.windows[_].visible=1);return x},Ve.prototype.hideWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&(d.windows[_].visible=0);return x},Ve.prototype.toggleWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&(d.windows[_].visible^=1);return x},Ve.prototype.clearWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&d.windows[_].clearText();return x},Ve.prototype.deleteWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&d.windows[_].reset();return x},Ve.prototype.setPenAttributes=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.penAttr;return h=p[++x],g.textTag=(h&240)>>4,g.offset=(h&12)>>2,g.penSize=h&3,h=p[++x],g.italics=(h&128)>>7,g.underline=(h&64)>>6,g.edgeType=(h&56)>>3,g.fontStyle=h&7,x},Ve.prototype.setPenColor=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.penColor;return h=p[++x],g.fgOpacity=(h&192)>>6,g.fgRed=(h&48)>>4,g.fgGreen=(h&12)>>2,g.fgBlue=h&3,h=p[++x],g.bgOpacity=(h&192)>>6,g.bgRed=(h&48)>>4,g.bgGreen=(h&12)>>2,g.bgBlue=h&3,h=p[++x],g.edgeRed=(h&48)>>4,g.edgeGreen=(h&12)>>2,g.edgeBlue=h&3,x},Ve.prototype.setPenLocation=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.penLoc;return d.currentWindow.pendingNewLine=!0,h=p[++x],g.row=h&15,h=p[++x],g.column=h&63,x},Ve.prototype.reset=function(x,d){var p=this.getPts(x);return this.flushDisplayed(p,d),this.initService(d.serviceNum,x)};var Od={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},mn=function(d){return d===null?"":(d=Od[d]||d,String.fromCharCode(d))},gn=14,Dd=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],wi=function(){for(var d=[],p=gn+1;p--;)d.push("");return d},Ge=function x(d,p){x.prototype.init.call(this),this.field_=d||0,this.dataChannel_=p||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(h){var g,_,T,w,S;if(g=h.ccData&32639,g===this.lastControlCode_){this.lastControlCode_=null;return}if((g&61440)===4096?this.lastControlCode_=g:g!==this.PADDING_&&(this.lastControlCode_=null),T=g>>>8,w=g&255,g!==this.PADDING_)if(g===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(g===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(h.pts),this.flushDisplayed(h.pts),_=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=_,this.startPts_=h.pts;else if(g===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(h.pts);else if(g===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(h.pts);else if(g===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(h.pts);else if(g===this.CARRIAGE_RETURN_)this.clearFormatting(h.pts),this.flushDisplayed(h.pts),this.shiftRowsUp_(),this.startPts_=h.pts;else if(g===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(g===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(h.pts),this.displayed_=wi();else if(g===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=wi();else if(g===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(h.pts),this.displayed_=wi()),this.mode_="paintOn",this.startPts_=h.pts;else if(this.isSpecialCharacter(T,w))T=(T&3)<<8,S=mn(T|w),this[this.mode_](h.pts,S),this.column_++;else if(this.isExtCharacter(T,w))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),T=(T&3)<<8,S=mn(T|w),this[this.mode_](h.pts,S),this.column_++;else if(this.isMidRowCode(T,w))this.clearFormatting(h.pts),this[this.mode_](h.pts," "),this.column_++,(w&14)===14&&this.addFormatting(h.pts,["i"]),(w&1)===1&&this.addFormatting(h.pts,["u"]);else if(this.isOffsetControlCode(T,w))this.column_+=w&3;else if(this.isPAC(T,w)){var P=Dd.indexOf(g&7968);this.mode_==="rollUp"&&(P-this.rollUpRows_+1<0&&(P=this.rollUpRows_-1),this.setRollUp(h.pts,P)),P!==this.row_&&(this.clearFormatting(h.pts),this.row_=P),w&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(h.pts,["u"]),(g&16)===16&&(this.column_=((g&14)>>1)*4),this.isColorPAC(w)&&(w&14)===14&&this.addFormatting(h.pts,["i"])}else this.isNormalChar(T)&&(w===0&&(w=null),S=mn(T),S+=mn(w),this[this.mode_](h.pts,S),this.column_+=S.length)}};Ge.prototype=new t,Ge.prototype.flushDisplayed=function(x){var d=this.displayed_.map(function(p,h){try{return p.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+h+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");d.length&&this.trigger("data",{startPts:this.startPts_,endPts:x,text:d,stream:this.name_})},Ge.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=wi(),this.nonDisplayed_=wi(),this.lastControlCode_=null,this.column_=0,this.row_=gn,this.rollUpRows_=2,this.formatting_=[]},Ge.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Ge.prototype.isSpecialCharacter=function(x,d){return x===this.EXT_&&d>=48&&d<=63},Ge.prototype.isExtCharacter=function(x,d){return(x===this.EXT_+1||x===this.EXT_+2)&&d>=32&&d<=63},Ge.prototype.isMidRowCode=function(x,d){return x===this.EXT_&&d>=32&&d<=47},Ge.prototype.isOffsetControlCode=function(x,d){return x===this.OFFSET_&&d>=33&&d<=35},Ge.prototype.isPAC=function(x,d){return x>=this.BASE_&&x<this.BASE_+8&&d>=64&&d<=127},Ge.prototype.isColorPAC=function(x){return x>=64&&x<=79||x>=96&&x<=127},Ge.prototype.isNormalChar=function(x){return x>=32&&x<=127},Ge.prototype.setRollUp=function(x,d){if(this.mode_!=="rollUp"&&(this.row_=gn,this.mode_="rollUp",this.flushDisplayed(x),this.nonDisplayed_=wi(),this.displayed_=wi()),d!==void 0&&d!==this.row_)for(var p=0;p<this.rollUpRows_;p++)this.displayed_[d-p]=this.displayed_[this.row_-p],this.displayed_[this.row_-p]="";d===void 0&&(d=this.row_),this.topRow_=d-this.rollUpRows_+1},Ge.prototype.addFormatting=function(x,d){this.formatting_=this.formatting_.concat(d);var p=d.reduce(function(h,g){return h+"<"+g+">"},"");this[this.mode_](x,p)},Ge.prototype.clearFormatting=function(x){if(this.formatting_.length){var d=this.formatting_.reverse().reduce(function(p,h){return p+"</"+h+">"},"");this.formatting_=[],this[this.mode_](x,d)}},Ge.prototype.popOn=function(x,d){var p=this.nonDisplayed_[this.row_];p+=d,this.nonDisplayed_[this.row_]=p},Ge.prototype.rollUp=function(x,d){var p=this.displayed_[this.row_];p+=d,this.displayed_[this.row_]=p},Ge.prototype.shiftRowsUp_=function(){var x;for(x=0;x<this.topRow_;x++)this.displayed_[x]="";for(x=this.row_+1;x<gn+1;x++)this.displayed_[x]="";for(x=this.topRow_;x<this.row_;x++)this.displayed_[x]=this.displayed_[x+1];this.displayed_[this.row_]=""},Ge.prototype.paintOn=function(x,d){var p=this.displayed_[this.row_];p+=d,this.displayed_[this.row_]=p};var vn={CaptionStream:Ot,Cea608Stream:Ge,Cea708Stream:Ve},pt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ld=8589934592,kd=4294967296,uo="shared",La=function(d,p){var h=1;for(d>p&&(h=-1);Math.abs(p-d)>kd;)d+=h*Ld;return d},Yn=function x(d){var p,h;x.prototype.init.call(this),this.type_=d||uo,this.push=function(g){this.type_!==uo&&g.type!==this.type_||(h===void 0&&(h=g.dts),g.dts=La(g.dts,h),g.pts=La(g.pts,h),p=g.dts,this.trigger("data",g))},this.flush=function(){h=p,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){h=void 0,p=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Yn.prototype=new t;var lo={TimestampRolloverStream:Yn,handleRollover:La},Jn=function(d,p,h){var g,_="";for(g=p;g<h;g++)_+="%"+("00"+d[g].toString(16)).slice(-2);return _},_n=function(d,p,h){return decodeURIComponent(Jn(d,p,h))},Rd=function(d,p,h){return unescape(Jn(d,p,h))},yn=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},ds={TXXX:function(d){var p;if(d.data[0]===3){for(p=1;p<d.data.length;p++)if(d.data[p]===0){d.description=_n(d.data,1,p),d.value=_n(d.data,p+1,d.data.length).replace(/\0*$/,"");break}d.data=d.value}},WXXX:function(d){var p;if(d.data[0]===3){for(p=1;p<d.data.length;p++)if(d.data[p]===0){d.description=_n(d.data,1,p),d.url=_n(d.data,p+1,d.data.length);break}}},PRIV:function(d){var p;for(p=0;p<d.data.length;p++)if(d.data[p]===0){d.owner=Rd(d.data,0,p);break}d.privateData=d.data.subarray(p+1),d.data=d.privateData}},Vr;Vr=function(d){var p={descriptor:d&&d.descriptor},h=0,g=[],_=0,T;if(Vr.prototype.init.call(this),this.dispatchType=pt.METADATA_STREAM_TYPE.toString(16),p.descriptor)for(T=0;T<p.descriptor.length;T++)this.dispatchType+=("00"+p.descriptor[T].toString(16)).slice(-2);this.push=function(w){var S,P,C,L,B,ee;if(w.type==="timed-metadata"){if(w.dataAlignmentIndicator&&(_=0,g.length=0),g.length===0&&(w.data.length<10||w.data[0]!=="I".charCodeAt(0)||w.data[1]!=="D".charCodeAt(0)||w.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(g.push(w),_+=w.data.byteLength,g.length===1&&(h=yn(w.data.subarray(6,10)),h+=10),!(_<h)){for(S={data:new Uint8Array(h),frames:[],pts:g[0].pts,dts:g[0].dts},B=0;B<h;)S.data.set(g[0].data.subarray(0,h-B),B),B+=g[0].data.byteLength,_-=g[0].data.byteLength,g.shift();P=10,S.data[5]&64&&(P+=4,P+=yn(S.data.subarray(10,14)),h-=yn(S.data.subarray(16,20)));do{if(C=yn(S.data.subarray(P+4,P+8)),C<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(ee=String.fromCharCode(S.data[P],S.data[P+1],S.data[P+2],S.data[P+3]),L={id:ee,data:S.data.subarray(P+10,P+C+10)},L.key=L.id,ds[L.id]&&(ds[L.id](L),L.owner==="com.apple.streaming.transportStreamTimestamp")){var ae=L.data,Q=(ae[3]&1)<<30|ae[4]<<22|ae[5]<<14|ae[6]<<6|ae[7]>>>2;Q*=4,Q+=ae[7]&3,L.timeStamp=Q,S.pts===void 0&&S.dts===void 0&&(S.pts=L.timeStamp,S.dts=L.timeStamp),this.trigger("timestamp",L)}S.frames.push(L),P+=10,P+=C}while(P<h);this.trigger("data",S)}}}},Vr.prototype=new t;var Nu=Vr,Md=lo.TimestampRolloverStream,Tn,Pr,bn,Mi=188,Zn=71;Tn=function(){var d=new Uint8Array(Mi),p=0;Tn.prototype.init.call(this),this.push=function(h){var g=0,_=Mi,T;for(p?(T=new Uint8Array(h.byteLength+p),T.set(d.subarray(0,p)),T.set(h,p),p=0):T=h;_<T.byteLength;){if(T[g]===Zn&&T[_]===Zn){this.trigger("data",T.subarray(g,_)),g+=Mi,_+=Mi;continue}g++,_++}g<T.byteLength&&(d.set(T.subarray(g),0),p=T.byteLength-g)},this.flush=function(){p===Mi&&d[0]===Zn&&(this.trigger("data",d),p=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){p=0,this.trigger("reset")}},Tn.prototype=new t,Pr=function(){var d,p,h,g;Pr.prototype.init.call(this),g=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,d=function(T,w){var S=0;w.payloadUnitStartIndicator&&(S+=T[S]+1),w.type==="pat"?p(T.subarray(S),w):h(T.subarray(S),w)},p=function(T,w){w.section_number=T[7],w.last_section_number=T[8],g.pmtPid=(T[10]&31)<<8|T[11],w.pmtPid=g.pmtPid},h=function(T,w){var S,P,C,L;if(T[5]&1){for(g.programMapTable={video:null,audio:null,"timed-metadata":{}},S=(T[1]&15)<<8|T[2],P=3+S-4,C=(T[10]&15)<<8|T[11],L=12+C;L<P;){var B=T[L],ee=(T[L+1]&31)<<8|T[L+2];B===pt.H264_STREAM_TYPE&&g.programMapTable.video===null?g.programMapTable.video=ee:B===pt.ADTS_STREAM_TYPE&&g.programMapTable.audio===null?g.programMapTable.audio=ee:B===pt.METADATA_STREAM_TYPE&&(g.programMapTable["timed-metadata"][ee]=B),L+=((T[L+3]&15)<<8|T[L+4])+5}w.programMapTable=g.programMapTable}},this.push=function(_){var T={},w=4;if(T.payloadUnitStartIndicator=!!(_[1]&64),T.pid=_[1]&31,T.pid<<=8,T.pid|=_[2],(_[3]&48)>>>4>1&&(w+=_[w]+1),T.pid===0)T.type="pat",d(_.subarray(w),T),this.trigger("data",T);else if(T.pid===this.pmtPid)for(T.type="pmt",d(_.subarray(w),T),this.trigger("data",T);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([_,w,T]):this.processPes_(_,w,T)},this.processPes_=function(_,T,w){w.pid===this.programMapTable.video?w.streamType=pt.H264_STREAM_TYPE:w.pid===this.programMapTable.audio?w.streamType=pt.ADTS_STREAM_TYPE:w.streamType=this.programMapTable["timed-metadata"][w.pid],w.type="pes",w.data=_.subarray(T),this.trigger("data",w)}},Pr.prototype=new t,Pr.STREAM_TYPES={h264:27,adts:15},bn=function(){var d=this,p=!1,h={data:[],size:0},g={data:[],size:0},_={data:[],size:0},T,w=function(C,L){var B,ee=C[0]<<16|C[1]<<8|C[2];L.data=new Uint8Array,ee===1&&(L.packetLength=6+(C[4]<<8|C[5]),L.dataAlignmentIndicator=(C[6]&4)!==0,B=C[7],B&192&&(L.pts=(C[9]&14)<<27|(C[10]&255)<<20|(C[11]&254)<<12|(C[12]&255)<<5|(C[13]&254)>>>3,L.pts*=4,L.pts+=(C[13]&6)>>>1,L.dts=L.pts,B&64&&(L.dts=(C[14]&14)<<27|(C[15]&255)<<20|(C[16]&254)<<12|(C[17]&255)<<5|(C[18]&254)>>>3,L.dts*=4,L.dts+=(C[18]&6)>>>1)),L.data=C.subarray(9+C[8]))},S=function(C,L,B){var ee=new Uint8Array(C.size),ae={type:L},Q=0,ye=0,at=!1,tt;if(!(!C.data.length||C.size<9)){for(ae.trackId=C.data[0].pid,Q=0;Q<C.data.length;Q++)tt=C.data[Q],ee.set(tt.data,ye),ye+=tt.data.byteLength;w(ee,ae),at=L==="video"||ae.packetLength<=C.size,(B||at)&&(C.size=0,C.data.length=0),at&&d.trigger("data",ae)}};bn.prototype.init.call(this),this.push=function(P){({pat:function(){},pes:function(){var L,B;switch(P.streamType){case pt.H264_STREAM_TYPE:L=h,B="video";break;case pt.ADTS_STREAM_TYPE:L=g,B="audio";break;case pt.METADATA_STREAM_TYPE:L=_,B="timed-metadata";break;default:return}P.payloadUnitStartIndicator&&S(L,B,!0),L.data.push(P),L.size+=P.data.byteLength},pmt:function(){var L={type:"metadata",tracks:[]};T=P.programMapTable,T.video!==null&&L.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.video,codec:"avc",type:"video"}),T.audio!==null&&L.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.audio,codec:"adts",type:"audio"}),p=!0,d.trigger("data",L)}})[P.type]()},this.reset=function(){h.size=0,h.data.length=0,g.size=0,g.data.length=0,this.trigger("reset")},this.flushStreams_=function(){S(h,"video"),S(g,"audio"),S(_,"timed-metadata")},this.flush=function(){if(!p&&T){var P={type:"metadata",tracks:[]};T.video!==null&&P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.video,codec:"avc",type:"video"}),T.audio!==null&&P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.audio,codec:"adts",type:"audio"}),d.trigger("data",P)}p=!1,this.flushStreams_(),this.trigger("done")}},bn.prototype=new t;var fs={PAT_PID:0,MP2T_PACKET_LENGTH:Mi,TransportPacketStream:Tn,TransportParseStream:Pr,ElementaryStream:bn,TimestampRolloverStream:Md,CaptionStream:vn.CaptionStream,Cea608Stream:vn.Cea608Stream,Cea708Stream:vn.Cea708Stream,MetadataStream:Nu};for(var xn in pt)pt.hasOwnProperty(xn)&&(fs[xn]=pt[xn]);var Zt=fs,Uu=Oe.ONE_SECOND_IN_TS,dr,cs=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];dr=function(d){var p,h=0;dr.prototype.init.call(this),this.skipWarn_=function(g,_){this.trigger("log",{level:"warn",message:"adts skiping bytes "+g+" to "+_+" in frame "+h+" outside syncword"})},this.push=function(g){var _=0,T,w,S,P,C;if(d||(h=0),g.type==="audio"){p&&p.length?(S=p,p=new Uint8Array(S.byteLength+g.data.byteLength),p.set(S),p.set(g.data,S.byteLength)):p=g.data;for(var L;_+7<p.length;){if(p[_]!==255||(p[_+1]&246)!==240){typeof L!="number"&&(L=_),_++;continue}if(typeof L=="number"&&(this.skipWarn_(L,_),L=null),w=(~p[_+1]&1)*2,T=(p[_+3]&3)<<11|p[_+4]<<3|(p[_+5]&224)>>5,P=((p[_+6]&3)+1)*1024,C=P*Uu/cs[(p[_+2]&60)>>>2],p.byteLength-_<T)break;this.trigger("data",{pts:g.pts+h*C,dts:g.dts+h*C,sampleCount:P,audioobjecttype:(p[_+2]>>>6&3)+1,channelcount:(p[_+2]&1)<<2|(p[_+3]&192)>>>6,samplerate:cs[(p[_+2]&60)>>>2],samplingfrequencyindex:(p[_+2]&60)>>>2,samplesize:16,data:p.subarray(_+7+w,_+T)}),h++,_+=T}typeof L=="number"&&(this.skipWarn_(L,_),L=null),p=p.subarray(_)}},this.flush=function(){h=0,this.trigger("done")},this.reset=function(){p=void 0,this.trigger("reset")},this.endTimeline=function(){p=void 0,this.trigger("endedtimeline")}},dr.prototype=new t;var fo=dr,hs;hs=function(d){var p=d.byteLength,h=0,g=0;this.length=function(){return 8*p},this.bitsAvailable=function(){return 8*p+g},this.loadWord=function(){var _=d.byteLength-p,T=new Uint8Array(4),w=Math.min(4,p);if(w===0)throw new Error("no bytes available");T.set(d.subarray(_,_+w)),h=new DataView(T.buffer).getUint32(0),g=w*8,p-=w},this.skipBits=function(_){var T;g>_?(h<<=_,g-=_):(_-=g,T=Math.floor(_/8),_-=T*8,p-=T,this.loadWord(),h<<=_,g-=_)},this.readBits=function(_){var T=Math.min(g,_),w=h>>>32-T;return g-=T,g>0?h<<=T:p>0&&this.loadWord(),T=_-T,T>0?w<<T|this.readBits(T):w},this.skipLeadingZeros=function(){var _;for(_=0;_<g;++_)if(h&2147483648>>>_)return h<<=_,g-=_,_;return this.loadWord(),_+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var _=this.skipLeadingZeros();return this.readBits(_+1)-1},this.readExpGolomb=function(){var _=this.readUnsignedExpGolomb();return 1&_?1+_>>>1:-1*(_>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Bu=hs,Or,Dr,ps;Dr=function(){var d=0,p,h;Dr.prototype.init.call(this),this.push=function(g){var _;h?(_=new Uint8Array(h.byteLength+g.data.byteLength),_.set(h),_.set(g.data,h.byteLength),h=_):h=g.data;for(var T=h.byteLength;d<T-3;d++)if(h[d+2]===1){p=d+5;break}for(;p<T;)switch(h[p]){case 0:if(h[p-1]!==0){p+=2;break}else if(h[p-2]!==0){p++;break}d+3!==p-2&&this.trigger("data",h.subarray(d+3,p-2));do{p++}while(h[p]!==1&&p<T);d=p-2,p+=3;break;case 1:if(h[p-1]!==0||h[p-2]!==0){p+=3;break}this.trigger("data",h.subarray(d+3,p-2)),d=p-2,p+=3;break;default:p+=3;break}h=h.subarray(d),p-=d,d=0},this.reset=function(){h=null,d=0,this.trigger("reset")},this.flush=function(){h&&h.byteLength>3&&this.trigger("data",h.subarray(d+3)),h=null,d=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Dr.prototype=new t,ps={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Or=function(){var d=new Dr,p,h,g,_,T,w,S;Or.prototype.init.call(this),p=this,this.push=function(P){P.type==="video"&&(h=P.trackId,g=P.pts,_=P.dts,d.push(P))},d.on("data",function(P){var C={trackId:h,pts:g,dts:_,data:P,nalUnitTypeCode:P[0]&31};switch(C.nalUnitTypeCode){case 5:C.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:C.nalUnitType="sei_rbsp",C.escapedRBSP=T(P.subarray(1));break;case 7:C.nalUnitType="seq_parameter_set_rbsp",C.escapedRBSP=T(P.subarray(1)),C.config=w(C.escapedRBSP);break;case 8:C.nalUnitType="pic_parameter_set_rbsp";break;case 9:C.nalUnitType="access_unit_delimiter_rbsp";break}p.trigger("data",C)}),d.on("done",function(){p.trigger("done")}),d.on("partialdone",function(){p.trigger("partialdone")}),d.on("reset",function(){p.trigger("reset")}),d.on("endedtimeline",function(){p.trigger("endedtimeline")}),this.flush=function(){d.flush()},this.partialFlush=function(){d.partialFlush()},this.reset=function(){d.reset()},this.endTimeline=function(){d.endTimeline()},S=function(C,L){var B=8,ee=8,ae,Q;for(ae=0;ae<C;ae++)ee!==0&&(Q=L.readExpGolomb(),ee=(B+Q+256)%256),B=ee===0?B:ee},T=function(C){for(var L=C.byteLength,B=[],ee=1,ae,Q;ee<L-2;)C[ee]===0&&C[ee+1]===0&&C[ee+2]===3?(B.push(ee+2),ee+=2):ee++;if(B.length===0)return C;ae=L-B.length,Q=new Uint8Array(ae);var ye=0;for(ee=0;ee<ae;ye++,ee++)ye===B[0]&&(ye++,B.shift()),Q[ee]=C[ye];return Q},w=function(C){var L=0,B=0,ee=0,ae=0,Q,ye,at,tt,ai,Na,Kr,ta,ia,mt,Co,Je=[1,1],ra,Ii;if(Q=new Bu(C),ye=Q.readUnsignedByte(),tt=Q.readUnsignedByte(),at=Q.readUnsignedByte(),Q.skipUnsignedExpGolomb(),ps[ye]&&(ai=Q.readUnsignedExpGolomb(),ai===3&&Q.skipBits(1),Q.skipUnsignedExpGolomb(),Q.skipUnsignedExpGolomb(),Q.skipBits(1),Q.readBoolean()))for(Co=ai!==3?8:12,Ii=0;Ii<Co;Ii++)Q.readBoolean()&&(Ii<6?S(16,Q):S(64,Q));if(Q.skipUnsignedExpGolomb(),Na=Q.readUnsignedExpGolomb(),Na===0)Q.readUnsignedExpGolomb();else if(Na===1)for(Q.skipBits(1),Q.skipExpGolomb(),Q.skipExpGolomb(),Kr=Q.readUnsignedExpGolomb(),Ii=0;Ii<Kr;Ii++)Q.skipExpGolomb();if(Q.skipUnsignedExpGolomb(),Q.skipBits(1),ta=Q.readUnsignedExpGolomb(),ia=Q.readUnsignedExpGolomb(),mt=Q.readBits(1),mt===0&&Q.skipBits(1),Q.skipBits(1),Q.readBoolean()&&(L=Q.readUnsignedExpGolomb(),B=Q.readUnsignedExpGolomb(),ee=Q.readUnsignedExpGolomb(),ae=Q.readUnsignedExpGolomb()),Q.readBoolean()&&Q.readBoolean()){switch(ra=Q.readUnsignedByte(),ra){case 1:Je=[1,1];break;case 2:Je=[12,11];break;case 3:Je=[10,11];break;case 4:Je=[16,11];break;case 5:Je=[40,33];break;case 6:Je=[24,11];break;case 7:Je=[20,11];break;case 8:Je=[32,11];break;case 9:Je=[80,33];break;case 10:Je=[18,11];break;case 11:Je=[15,11];break;case 12:Je=[64,33];break;case 13:Je=[160,99];break;case 14:Je=[4,3];break;case 15:Je=[3,2];break;case 16:Je=[2,1];break;case 255:{Je=[Q.readUnsignedByte()<<8|Q.readUnsignedByte(),Q.readUnsignedByte()<<8|Q.readUnsignedByte()];break}}Je&&Je[0]/Je[1]}return{profileIdc:ye,levelIdc:at,profileCompatibility:tt,width:(ta+1)*16-L*2-B*2,height:(2-mt)*(ia+1)*16-ee*2-ae*2,sarRatio:Je}}},Or.prototype=new t;var co={H264Stream:Or,NalByteStream:Dr},ho=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Hr=function(d,p){var h=d[p+6]<<21|d[p+7]<<14|d[p+8]<<7|d[p+9],g=d[p+5],_=(g&16)>>4;return h=h>=0?h:0,_?h+20:h+10},ju=function x(d,p){return d.length-p<10||d[p]!=="I".charCodeAt(0)||d[p+1]!=="D".charCodeAt(0)||d[p+2]!=="3".charCodeAt(0)?p:(p+=Hr(d,p),x(d,p))},Vu=function(d){var p=ju(d,0);return d.length>=p+2&&(d[p]&255)===255&&(d[p+1]&240)===240&&(d[p+1]&22)===16},po=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},Hu=function(d,p,h){var g,_="";for(g=p;g<h;g++)_+="%"+("00"+d[g].toString(16)).slice(-2);return _},$u=function(d,p,h){return unescape(Hu(d,p,h))},Wu=function(d,p){var h=(d[p+5]&224)>>5,g=d[p+4]<<3,_=d[p+3]&3<<11;return _|g|h},qu=function(d,p){return d[p]==="I".charCodeAt(0)&&d[p+1]==="D".charCodeAt(0)&&d[p+2]==="3".charCodeAt(0)?"timed-metadata":d[p]&!0&&(d[p+1]&240)===240?"audio":null},Fd=function(d){for(var p=0;p+5<d.length;){if(d[p]!==255||(d[p+1]&246)!==240){p++;continue}return ho[(d[p+2]&60)>>>2]}return null},Nd=function(d){var p,h,g,_;p=10,d[5]&64&&(p+=4,p+=po(d.subarray(10,14)));do{if(h=po(d.subarray(p+4,p+8)),h<1)return null;if(_=String.fromCharCode(d[p],d[p+1],d[p+2],d[p+3]),_==="PRIV"){g=d.subarray(p+10,p+h+10);for(var T=0;T<g.byteLength;T++)if(g[T]===0){var w=$u(g,0,T);if(w==="com.apple.streaming.transportStreamTimestamp"){var S=g.subarray(T+1),P=(S[3]&1)<<30|S[4]<<22|S[5]<<14|S[6]<<6|S[7]>>>2;return P*=4,P+=S[7]&3,P}break}}p+=10,p+=h}while(p<d.byteLength);return null},Sn={isLikelyAacData:Vu,parseId3TagSize:Hr,parseAdtsSize:Wu,parseType:qu,parseSampleRate:Fd,parseAacTimestamp:Nd},$r;$r=function(){var d=new Uint8Array,p=0;$r.prototype.init.call(this),this.setTimestamp=function(h){p=h},this.push=function(h){var g=0,_=0,T,w,S,P;for(d.length?(P=d.length,d=new Uint8Array(h.byteLength+P),d.set(d.subarray(0,P)),d.set(h,P)):d=h;d.length-_>=3;){if(d[_]==="I".charCodeAt(0)&&d[_+1]==="D".charCodeAt(0)&&d[_+2]==="3".charCodeAt(0)){if(d.length-_<10||(g=Sn.parseId3TagSize(d,_),_+g>d.length))break;w={type:"timed-metadata",data:d.subarray(_,_+g)},this.trigger("data",w),_+=g;continue}else if((d[_]&255)===255&&(d[_+1]&240)===240){if(d.length-_<7||(g=Sn.parseAdtsSize(d,_),_+g>d.length))break;S={type:"audio",data:d.subarray(_,_+g),pts:p,dts:p},this.trigger("data",S),_+=g;continue}_++}T=d.length-_,T>0?d=d.subarray(_):d=new Uint8Array},this.reset=function(){d=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){d=new Uint8Array,this.trigger("endedtimeline")}},$r.prototype=new t;var Ud=$r,Bd=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],ka=Bd,jd=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],En=jd,Vd=co.H264Stream,Hd=Sn.isLikelyAacData,$d=Oe.ONE_SECOND_IN_TS,Lr,Yi,_t,rt,Wd=function(d,p){p.stream=d,this.trigger("log",p)},mo=function(d,p){for(var h=Object.keys(p),g=0;g<h.length;g++){var _=h[g];_==="headOfPipeline"||!p[_].on||p[_].on("log",Wd.bind(d,_))}},go=function(d,p){var h;if(d.length!==p.length)return!1;for(h=0;h<d.length;h++)if(d[h]!==p[h])return!1;return!0},Ra=function(d,p,h,g,_,T){var w=h-p,S=g-p,P=_-h;return{start:{dts:d,pts:d+w},end:{dts:d+S,pts:d+P},prependedContentDuration:T,baseMediaDecodeTime:d}};Yi=function(d,p){var h=[],g,_=0,T=0,w=1/0;p=p||{},g=p.firstSequenceNumber||0,Yi.prototype.init.call(this),this.push=function(S){Mt.collectDtsInfo(d,S),d&&ka.forEach(function(P){d[P]=S[P]}),h.push(S)},this.setEarliestDts=function(S){_=S},this.setVideoBaseMediaDecodeTime=function(S){w=S},this.setAudioAppendStart=function(S){T=S},this.flush=function(){var S,P,C,L,B,ee,ae;if(h.length===0){this.trigger("done","AudioSegmentStream");return}S=jt.trimAdtsFramesByEarliestDts(h,d,_),d.baseMediaDecodeTime=Mt.calculateTrackBaseMediaDecodeTime(d,p.keepOriginalTimestamps),ae=jt.prefixWithSilence(d,S,T,w),d.samples=jt.generateSampleTable(S),C=xt.mdat(jt.concatenateFrameData(S)),h=[],P=xt.moof(g,[d]),L=new Uint8Array(P.byteLength+C.byteLength),g++,L.set(P),L.set(C,P.byteLength),Mt.clearDtsInfo(d),B=Math.ceil($d*1024/d.samplerate),S.length&&(ee=S.length*B,this.trigger("segmentTimingInfo",Ra(Oe.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),S[0].dts,S[0].pts,S[0].dts+ee,S[0].pts+ee,ae||0)),this.trigger("timingInfo",{start:S[0].pts,end:S[0].pts+ee})),this.trigger("data",{track:d,boxes:L}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Mt.clearDtsInfo(d),h=[],this.trigger("reset")}},Yi.prototype=new t,Lr=function(d,p){var h,g=[],_=[],T,w;p=p||{},h=p.firstSequenceNumber||0,Lr.prototype.init.call(this),delete d.minPTS,this.gopCache_=[],this.push=function(S){Mt.collectDtsInfo(d,S),S.nalUnitType==="seq_parameter_set_rbsp"&&!T&&(T=S.config,d.sps=[S.data],En.forEach(function(P){d[P]=T[P]},this)),S.nalUnitType==="pic_parameter_set_rbsp"&&!w&&(w=S.data,d.pps=[S.data]),g.push(S)},this.flush=function(){for(var S,P,C,L,B,ee,ae=0,Q,ye;g.length&&g[0].nalUnitType!=="access_unit_delimiter_rbsp";)g.shift();if(g.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(S=me.groupNalsIntoFrames(g),C=me.groupFramesIntoGops(S),C[0][0].keyFrame||(P=this.getGopForFusion_(g[0],d),P?(ae=P.duration,C.unshift(P),C.byteLength+=P.byteLength,C.nalCount+=P.nalCount,C.pts=P.pts,C.dts=P.dts,C.duration+=P.duration):C=me.extendFirstKeyFrame(C)),_.length){var at;if(p.alignGopsAtEnd?at=this.alignGopsAtEnd_(C):at=this.alignGopsAtStart_(C),!at){this.gopCache_.unshift({gop:C.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Mt.clearDtsInfo(d),C=at}Mt.collectDtsInfo(d,C),d.samples=me.generateSampleTable(C),B=xt.mdat(me.concatenateNalData(C)),d.baseMediaDecodeTime=Mt.calculateTrackBaseMediaDecodeTime(d,p.keepOriginalTimestamps),this.trigger("processedGopsInfo",C.map(function(tt){return{pts:tt.pts,dts:tt.dts,byteLength:tt.byteLength}})),Q=C[0],ye=C[C.length-1],this.trigger("segmentTimingInfo",Ra(d.baseMediaDecodeTime,Q.dts,Q.pts,ye.dts+ye.duration,ye.pts+ye.duration,ae)),this.trigger("timingInfo",{start:C[0].pts,end:C[C.length-1].pts+C[C.length-1].duration}),this.gopCache_.unshift({gop:C.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.trigger("baseMediaDecodeTime",d.baseMediaDecodeTime),this.trigger("timelineStartInfo",d.timelineStartInfo),L=xt.moof(h,[d]),ee=new Uint8Array(L.byteLength+B.byteLength),h++,ee.set(L),ee.set(B,L.byteLength),this.trigger("data",{track:d,boxes:ee}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),g=[],this.gopCache_.length=0,_.length=0,this.trigger("reset")},this.resetStream_=function(){Mt.clearDtsInfo(d),T=void 0,w=void 0},this.getGopForFusion_=function(S){var P=45e3,C=1e4,L=1/0,B,ee,ae,Q,ye;for(ye=0;ye<this.gopCache_.length;ye++)Q=this.gopCache_[ye],ae=Q.gop,!(!(d.pps&&go(d.pps[0],Q.pps[0]))||!(d.sps&&go(d.sps[0],Q.sps[0])))&&(ae.dts<d.timelineStartInfo.dts||(B=S.dts-ae.dts-ae.duration,B>=-C&&B<=P&&(!ee||L>B)&&(ee=Q,L=B)));return ee?ee.gop:null},this.alignGopsAtStart_=function(S){var P,C,L,B,ee,ae,Q,ye;for(ee=S.byteLength,ae=S.nalCount,Q=S.duration,P=C=0;P<_.length&&C<S.length&&(L=_[P],B=S[C],L.pts!==B.pts);){if(B.pts>L.pts){P++;continue}C++,ee-=B.byteLength,ae-=B.nalCount,Q-=B.duration}return C===0?S:C===S.length?null:(ye=S.slice(C),ye.byteLength=ee,ye.duration=Q,ye.nalCount=ae,ye.pts=ye[0].pts,ye.dts=ye[0].dts,ye)},this.alignGopsAtEnd_=function(S){var P,C,L,B,ee,ae;for(P=_.length-1,C=S.length-1,ee=null,ae=!1;P>=0&&C>=0;){if(L=_[P],B=S[C],L.pts===B.pts){ae=!0;break}if(L.pts>B.pts){P--;continue}P===_.length-1&&(ee=C),C--}if(!ae&&ee===null)return null;var Q;if(ae?Q=C:Q=ee,Q===0)return S;var ye=S.slice(Q),at=ye.reduce(function(tt,ai){return tt.byteLength+=ai.byteLength,tt.duration+=ai.duration,tt.nalCount+=ai.nalCount,tt},{byteLength:0,duration:0,nalCount:0});return ye.byteLength=at.byteLength,ye.duration=at.duration,ye.nalCount=at.nalCount,ye.pts=ye[0].pts,ye.dts=ye[0].dts,ye},this.alignGopsWith=function(S){_=S}},Lr.prototype=new t,rt=function(d,p){this.numberOfTracks=0,this.metadataStream=p,d=d||{},typeof d.remux<"u"?this.remuxTracks=!!d.remux:this.remuxTracks=!0,typeof d.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=d.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,rt.prototype.init.call(this),this.push=function(h){if(h.text)return this.pendingCaptions.push(h);if(h.frames)return this.pendingMetadata.push(h);this.pendingTracks.push(h.track),this.pendingBytes+=h.boxes.byteLength,h.track.type==="video"&&(this.videoTrack=h.track,this.pendingBoxes.push(h.boxes)),h.track.type==="audio"&&(this.audioTrack=h.track,this.pendingBoxes.unshift(h.boxes))}},rt.prototype=new t,rt.prototype.flush=function(x){var d=0,p={captions:[],captionStreams:{},metadata:[],info:{}},h,g,_,T=0,w;if(this.pendingTracks.length<this.numberOfTracks){if(x!=="VideoSegmentStream"&&x!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(T=this.videoTrack.timelineStartInfo.pts,En.forEach(function(S){p.info[S]=this.videoTrack[S]},this)):this.audioTrack&&(T=this.audioTrack.timelineStartInfo.pts,ka.forEach(function(S){p.info[S]=this.audioTrack[S]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?p.type=this.pendingTracks[0].type:p.type="combined",this.emittedTracks+=this.pendingTracks.length,_=xt.initSegment(this.pendingTracks),p.initSegment=new Uint8Array(_.byteLength),p.initSegment.set(_),p.data=new Uint8Array(this.pendingBytes),w=0;w<this.pendingBoxes.length;w++)p.data.set(this.pendingBoxes[w],d),d+=this.pendingBoxes[w].byteLength;for(w=0;w<this.pendingCaptions.length;w++)h=this.pendingCaptions[w],h.startTime=Oe.metadataTsToSeconds(h.startPts,T,this.keepOriginalTimestamps),h.endTime=Oe.metadataTsToSeconds(h.endPts,T,this.keepOriginalTimestamps),p.captionStreams[h.stream]=!0,p.captions.push(h);for(w=0;w<this.pendingMetadata.length;w++)g=this.pendingMetadata[w],g.cueTime=Oe.metadataTsToSeconds(g.pts,T,this.keepOriginalTimestamps),p.metadata.push(g);for(p.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",p),w=0;w<p.captions.length;w++)h=p.captions[w],this.trigger("caption",h);for(w=0;w<p.metadata.length;w++)g=p.metadata[w],this.trigger("id3Frame",g)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},rt.prototype.setRemux=function(x){this.remuxTracks=x},_t=function(d){var p=this,h=!0,g,_;_t.prototype.init.call(this),d=d||{},this.baseMediaDecodeTime=d.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var T={};this.transmuxPipeline_=T,T.type="aac",T.metadataStream=new Zt.MetadataStream,T.aacStream=new Ud,T.audioTimestampRolloverStream=new Zt.TimestampRolloverStream("audio"),T.timedMetadataTimestampRolloverStream=new Zt.TimestampRolloverStream("timed-metadata"),T.adtsStream=new fo,T.coalesceStream=new rt(d,T.metadataStream),T.headOfPipeline=T.aacStream,T.aacStream.pipe(T.audioTimestampRolloverStream).pipe(T.adtsStream),T.aacStream.pipe(T.timedMetadataTimestampRolloverStream).pipe(T.metadataStream).pipe(T.coalesceStream),T.metadataStream.on("timestamp",function(w){T.aacStream.setTimestamp(w.timeStamp)}),T.aacStream.on("data",function(w){w.type!=="timed-metadata"&&w.type!=="audio"||T.audioSegmentStream||(_=_||{timelineStartInfo:{baseMediaDecodeTime:p.baseMediaDecodeTime},codec:"adts",type:"audio"},T.coalesceStream.numberOfTracks++,T.audioSegmentStream=new Yi(_,d),T.audioSegmentStream.on("log",p.getLogTrigger_("audioSegmentStream")),T.audioSegmentStream.on("timingInfo",p.trigger.bind(p,"audioTimingInfo")),T.adtsStream.pipe(T.audioSegmentStream).pipe(T.coalesceStream),p.trigger("trackinfo",{hasAudio:!!_,hasVideo:!!g}))}),T.coalesceStream.on("data",this.trigger.bind(this,"data")),T.coalesceStream.on("done",this.trigger.bind(this,"done")),mo(this,T)},this.setupTsPipeline=function(){var T={};this.transmuxPipeline_=T,T.type="ts",T.metadataStream=new Zt.MetadataStream,T.packetStream=new Zt.TransportPacketStream,T.parseStream=new Zt.TransportParseStream,T.elementaryStream=new Zt.ElementaryStream,T.timestampRolloverStream=new Zt.TimestampRolloverStream,T.adtsStream=new fo,T.h264Stream=new Vd,T.captionStream=new Zt.CaptionStream(d),T.coalesceStream=new rt(d,T.metadataStream),T.headOfPipeline=T.packetStream,T.packetStream.pipe(T.parseStream).pipe(T.elementaryStream).pipe(T.timestampRolloverStream),T.timestampRolloverStream.pipe(T.h264Stream),T.timestampRolloverStream.pipe(T.adtsStream),T.timestampRolloverStream.pipe(T.metadataStream).pipe(T.coalesceStream),T.h264Stream.pipe(T.captionStream).pipe(T.coalesceStream),T.elementaryStream.on("data",function(w){var S;if(w.type==="metadata"){for(S=w.tracks.length;S--;)!g&&w.tracks[S].type==="video"?(g=w.tracks[S],g.timelineStartInfo.baseMediaDecodeTime=p.baseMediaDecodeTime):!_&&w.tracks[S].type==="audio"&&(_=w.tracks[S],_.timelineStartInfo.baseMediaDecodeTime=p.baseMediaDecodeTime);g&&!T.videoSegmentStream&&(T.coalesceStream.numberOfTracks++,T.videoSegmentStream=new Lr(g,d),T.videoSegmentStream.on("log",p.getLogTrigger_("videoSegmentStream")),T.videoSegmentStream.on("timelineStartInfo",function(P){_&&!d.keepOriginalTimestamps&&(_.timelineStartInfo=P,T.audioSegmentStream.setEarliestDts(P.dts-p.baseMediaDecodeTime))}),T.videoSegmentStream.on("processedGopsInfo",p.trigger.bind(p,"gopInfo")),T.videoSegmentStream.on("segmentTimingInfo",p.trigger.bind(p,"videoSegmentTimingInfo")),T.videoSegmentStream.on("baseMediaDecodeTime",function(P){_&&T.audioSegmentStream.setVideoBaseMediaDecodeTime(P)}),T.videoSegmentStream.on("timingInfo",p.trigger.bind(p,"videoTimingInfo")),T.h264Stream.pipe(T.videoSegmentStream).pipe(T.coalesceStream)),_&&!T.audioSegmentStream&&(T.coalesceStream.numberOfTracks++,T.audioSegmentStream=new Yi(_,d),T.audioSegmentStream.on("log",p.getLogTrigger_("audioSegmentStream")),T.audioSegmentStream.on("timingInfo",p.trigger.bind(p,"audioTimingInfo")),T.audioSegmentStream.on("segmentTimingInfo",p.trigger.bind(p,"audioSegmentTimingInfo")),T.adtsStream.pipe(T.audioSegmentStream).pipe(T.coalesceStream)),p.trigger("trackinfo",{hasAudio:!!_,hasVideo:!!g})}}),T.coalesceStream.on("data",this.trigger.bind(this,"data")),T.coalesceStream.on("id3Frame",function(w){w.dispatchType=T.metadataStream.dispatchType,p.trigger("id3Frame",w)}),T.coalesceStream.on("caption",this.trigger.bind(this,"caption")),T.coalesceStream.on("done",this.trigger.bind(this,"done")),mo(this,T)},this.setBaseMediaDecodeTime=function(T){var w=this.transmuxPipeline_;d.keepOriginalTimestamps||(this.baseMediaDecodeTime=T),_&&(_.timelineStartInfo.dts=void 0,_.timelineStartInfo.pts=void 0,Mt.clearDtsInfo(_),w.audioTimestampRolloverStream&&w.audioTimestampRolloverStream.discontinuity()),g&&(w.videoSegmentStream&&(w.videoSegmentStream.gopCache_=[]),g.timelineStartInfo.dts=void 0,g.timelineStartInfo.pts=void 0,Mt.clearDtsInfo(g),w.captionStream.reset()),w.timestampRolloverStream&&w.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(T){_&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(T)},this.setRemux=function(T){var w=this.transmuxPipeline_;d.remux=T,w&&w.coalesceStream&&w.coalesceStream.setRemux(T)},this.alignGopsWith=function(T){g&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(T)},this.getLogTrigger_=function(T){var w=this;return function(S){S.stream=T,w.trigger("log",S)}},this.push=function(T){if(h){var w=Hd(T);w&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!w&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),h=!1}this.transmuxPipeline_.headOfPipeline.push(T)},this.flush=function(){h=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},_t.prototype=new t;var qd={Transmuxer:_t,VideoSegmentStream:Lr,AudioSegmentStream:Yi,AUDIO_PROPERTIES:ka,VIDEO_PROPERTIES:En,generateSegmentTimingInfo:Ra},Gd=function(d){return d>>>0},Gu=function(d){return("00"+d.toString(16)).slice(-2)},wn={toUnsigned:Gd,toHexString:Gu},ei=function(d){var p="";return p+=String.fromCharCode(d[0]),p+=String.fromCharCode(d[1]),p+=String.fromCharCode(d[2]),p+=String.fromCharCode(d[3]),p},ui=ei,Cn=wn.toUnsigned,zu=function x(d,p){var h=[],g,_,T,w,S;if(!p.length)return null;for(g=0;g<d.byteLength;)_=Cn(d[g]<<24|d[g+1]<<16|d[g+2]<<8|d[g+3]),T=ui(d.subarray(g+4,g+8)),w=_>1?g+_:d.byteLength,T===p[0]&&(p.length===1?h.push(d.subarray(g+8,w)):(S=x(d.subarray(g+8,w),p.slice(1)),S.length&&(h=h.concat(S)))),g=w;return h},He=zu,Fi=wn.toUnsigned,Ku=e.getUint64,Xu=function(d){var p={version:d[0],flags:new Uint8Array(d.subarray(1,4))};return p.version===1?p.baseMediaDecodeTime=Ku(d.subarray(4)):p.baseMediaDecodeTime=Fi(d[4]<<24|d[5]<<16|d[6]<<8|d[7]),p},ms=Xu,Qu=function(d){return{isLeading:(d[0]&12)>>>2,dependsOn:d[0]&3,isDependedOn:(d[1]&192)>>>6,hasRedundancy:(d[1]&48)>>>4,paddingValue:(d[1]&14)>>>1,isNonSyncSample:d[1]&1,degradationPriority:d[2]<<8|d[3]}},gs=Qu,Yu=function(d){var p={version:d[0],flags:new Uint8Array(d.subarray(1,4)),samples:[]},h=new DataView(d.buffer,d.byteOffset,d.byteLength),g=p.flags[2]&1,_=p.flags[2]&4,T=p.flags[1]&1,w=p.flags[1]&2,S=p.flags[1]&4,P=p.flags[1]&8,C=h.getUint32(4),L=8,B;for(g&&(p.dataOffset=h.getInt32(L),L+=4),_&&C&&(B={flags:gs(d.subarray(L,L+4))},L+=4,T&&(B.duration=h.getUint32(L),L+=4),w&&(B.size=h.getUint32(L),L+=4),P&&(p.version===1?B.compositionTimeOffset=h.getInt32(L):B.compositionTimeOffset=h.getUint32(L),L+=4),p.samples.push(B),C--);C--;)B={},T&&(B.duration=h.getUint32(L),L+=4),w&&(B.size=h.getUint32(L),L+=4),S&&(B.flags=gs(d.subarray(L,L+4)),L+=4),P&&(p.version===1?B.compositionTimeOffset=h.getInt32(L):B.compositionTimeOffset=h.getUint32(L),L+=4),p.samples.push(B);return p},li=Yu,zd=function(d){var p=new DataView(d.buffer,d.byteOffset,d.byteLength),h={version:d[0],flags:new Uint8Array(d.subarray(1,4)),trackId:p.getUint32(4)},g=h.flags[2]&1,_=h.flags[2]&2,T=h.flags[2]&8,w=h.flags[2]&16,S=h.flags[2]&32,P=h.flags[0]&65536,C=h.flags[0]&131072,L;return L=8,g&&(L+=4,h.baseDataOffset=p.getUint32(12),L+=4),_&&(h.sampleDescriptionIndex=p.getUint32(L),L+=4),T&&(h.defaultSampleDuration=p.getUint32(L),L+=4),w&&(h.defaultSampleSize=p.getUint32(L),L+=4),S&&(h.defaultSampleFlags=p.getUint32(L)),P&&(h.durationIsEmpty=!0),!g&&C&&(h.baseDataOffsetIsMoof=!0),h},vi=zd,vo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fr;typeof window<"u"?fr=window:typeof vo<"u"?fr=vo:typeof self<"u"?fr=self:fr={};var ni=fr,vs=Ar.discardEmulationPreventionBytes,_o=vn.CaptionStream,Lt=function(d,p){for(var h=d,g=0;g<p.length;g++){var _=p[g];if(h<_.size)return _;h-=_.size}return null},Wr=function(d,p,h){var g=new DataView(d.buffer,d.byteOffset,d.byteLength),_={logs:[],seiNals:[]},T,w,S,P;for(w=0;w+4<d.length;w+=S)if(S=g.getUint32(w),w+=4,!(S<=0))switch(d[w]&31){case 6:var C=d.subarray(w+1,w+1+S),L=Lt(w,p);if(T={nalUnitType:"sei_rbsp",size:S,data:C,escapedRBSP:vs(C),trackId:h},L)T.pts=L.pts,T.dts=L.dts,P=L;else if(P)T.pts=P.pts,T.dts=P.dts;else{_.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+w+" for trackId "+h+". See mux.js#223."});break}_.seiNals.push(T);break}return _},yo=function(d,p,h){var g=p,_=h.defaultSampleDuration||0,T=h.defaultSampleSize||0,w=h.trackId,S=[];return d.forEach(function(P){var C=li(P),L=C.samples;L.forEach(function(B){B.duration===void 0&&(B.duration=_),B.size===void 0&&(B.size=T),B.trackId=w,B.dts=g,B.compositionTimeOffset===void 0&&(B.compositionTimeOffset=0),typeof g=="bigint"?(B.pts=g+ni.BigInt(B.compositionTimeOffset),g+=ni.BigInt(B.duration)):(B.pts=g+B.compositionTimeOffset,g+=B.duration)}),S=S.concat(L)}),S},Kd=function(d,p){var h=He(d,["moof","traf"]),g=He(d,["mdat"]),_={},T=[];return g.forEach(function(w,S){var P=h[S];T.push({mdat:w,traf:P})}),T.forEach(function(w){var S=w.mdat,P=w.traf,C=He(P,["tfhd"]),L=vi(C[0]),B=L.trackId,ee=He(P,["tfdt"]),ae=ee.length>0?ms(ee[0]).baseMediaDecodeTime:0,Q=He(P,["trun"]),ye,at;p===B&&Q.length>0&&(ye=yo(Q,ae,L),at=Wr(S,ye,B),_[B]||(_[B]={seiNals:[],logs:[]}),_[B].seiNals=_[B].seiNals.concat(at.seiNals),_[B].logs=_[B].logs.concat(at.logs))}),_},To=function(d,p,h){var g;if(p===null)return null;g=Kd(d,p);var _=g[p]||{};return{seiNals:_.seiNals,logs:_.logs,timescale:h}},Xd=function(){var d=!1,p,h,g,_,T,w;this.isInitialized=function(){return d},this.init=function(S){p=new _o,d=!0,w=S?S.isPartial:!1,p.on("data",function(P){P.startTime=P.startPts/_,P.endTime=P.endPts/_,T.captions.push(P),T.captionStreams[P.stream]=!0}),p.on("log",function(P){T.logs.push(P)})},this.isNewInit=function(S,P){return S&&S.length===0||P&&typeof P=="object"&&Object.keys(P).length===0?!1:g!==S[0]||_!==P[g]},this.parse=function(S,P,C){var L;if(this.isInitialized()){if(!P||!C)return null;if(this.isNewInit(P,C))g=P[0],_=C[g];else if(g===null||!_)return h.push(S),null}else return null;for(;h.length>0;){var B=h.shift();this.parse(B,P,C)}return L=To(S,g,_),L&&L.logs&&(T.logs=T.logs.concat(L.logs)),L===null||!L.seiNals?T.logs.length?{logs:T.logs,captions:[],captionStreams:[]}:null:(this.pushNals(L.seiNals),this.flushStream(),T)},this.pushNals=function(S){if(!this.isInitialized()||!S||S.length===0)return null;S.forEach(function(P){p.push(P)})},this.flushStream=function(){if(!this.isInitialized())return null;w?p.partialFlush():p.flush()},this.clearParsedCaptions=function(){T.captions=[],T.captionStreams={},T.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;p.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){h=[],g=null,_=null,T?this.clearParsedCaptions():T={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Qd=Xd,An=wn.toUnsigned,cr=wn.toHexString,_s=e.getUint64,qr,bo,ys,Ts,Ma,In;qr=function(d){var p={},h=He(d,["moov","trak"]);return h.reduce(function(g,_){var T,w,S,P,C;return T=He(_,["tkhd"])[0],!T||(w=T[0],S=w===0?12:20,P=An(T[S]<<24|T[S+1]<<16|T[S+2]<<8|T[S+3]),C=He(_,["mdia","mdhd"])[0],!C)?null:(w=C[0],S=w===0?12:20,g[P]=An(C[S]<<24|C[S+1]<<16|C[S+2]<<8|C[S+3]),g)},p)},bo=function(d,p){var h;h=He(p,["moof","traf"]);var g=h.reduce(function(_,T){var w=He(T,["tfhd"])[0],S=An(w[4]<<24|w[5]<<16|w[6]<<8|w[7]),P=d[S]||9e4,C=He(T,["tfdt"])[0],L=new DataView(C.buffer,C.byteOffset,C.byteLength),B;C[0]===1?B=_s(C.subarray(4,12)):B=L.getUint32(4);var ee;return typeof B=="bigint"?ee=B/ni.BigInt(P):typeof B=="number"&&!isNaN(B)&&(ee=B/P),ee<Number.MAX_SAFE_INTEGER&&(ee=Number(ee)),ee<_&&(_=ee),_},1/0);return typeof g=="bigint"||isFinite(g)?g:0},ys=function(d,p){var h=He(p,["moof","traf"]),g=0,_=0,T;if(h&&h.length){var w=He(h[0],["tfhd"])[0],S=He(h[0],["trun"])[0],P=He(h[0],["tfdt"])[0];if(w){var C=vi(w);T=C.trackId}if(P){var L=ms(P);g=L.baseMediaDecodeTime}if(S){var B=li(S);B.samples&&B.samples.length&&(_=B.samples[0].compositionTimeOffset||0)}}var ee=d[T]||9e4;typeof g=="bigint"&&(_=ni.BigInt(_),ee=ni.BigInt(ee));var ae=(g+_)/ee;return typeof ae=="bigint"&&ae<Number.MAX_SAFE_INTEGER&&(ae=Number(ae)),ae},Ts=function(d){var p=He(d,["moov","trak"]),h=[];return p.forEach(function(g){var _=He(g,["mdia","hdlr"]),T=He(g,["tkhd"]);_.forEach(function(w,S){var P=ui(w.subarray(8,12)),C=T[S],L,B,ee;P==="vide"&&(L=new DataView(C.buffer,C.byteOffset,C.byteLength),B=L.getUint8(0),ee=B===0?L.getUint32(12):L.getUint32(20),h.push(ee))})}),h},In=function(d){var p=d[0],h=p===0?12:20;return An(d[h]<<24|d[h+1]<<16|d[h+2]<<8|d[h+3])},Ma=function(d){var p=He(d,["moov","trak"]),h=[];return p.forEach(function(g){var _={},T=He(g,["tkhd"])[0],w,S;T&&(w=new DataView(T.buffer,T.byteOffset,T.byteLength),S=w.getUint8(0),_.id=S===0?w.getUint32(12):w.getUint32(20));var P=He(g,["mdia","hdlr"])[0];if(P){var C=ui(P.subarray(8,12));C==="vide"?_.type="video":C==="soun"?_.type="audio":_.type=C}var L=He(g,["mdia","minf","stbl","stsd"])[0];if(L){var B=L.subarray(8);_.codec=ui(B.subarray(4,8));var ee=He(B,[_.codec])[0],ae,Q;ee&&(/^[asm]vc[1-9]$/i.test(_.codec)?(ae=ee.subarray(78),Q=ui(ae.subarray(4,8)),Q==="avcC"&&ae.length>11?(_.codec+=".",_.codec+=cr(ae[9]),_.codec+=cr(ae[10]),_.codec+=cr(ae[11])):_.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(_.codec)?(ae=ee.subarray(28),Q=ui(ae.subarray(4,8)),Q==="esds"&&ae.length>20&&ae[19]!==0?(_.codec+="."+cr(ae[19]),_.codec+="."+cr(ae[20]>>>2&63).replace(/^0/,"")):_.codec="mp4a.40.2"):_.codec=_.codec.toLowerCase())}var ye=He(g,["mdia","mdhd"])[0];ye&&(_.timescale=In(ye)),h.push(_)}),h};var bs={findBox:He,parseType:ui,timescale:qr,startTime:bo,compositionStartTime:ys,videoTrackIds:Ts,tracks:Ma,getTimescaleFromMediaHeader:In},xo=function(d){var p=d[1]&31;return p<<=8,p|=d[2],p},kr=function(d){return!!(d[1]&64)},Rr=function(d){var p=0;return(d[3]&48)>>>4>1&&(p+=d[4]+1),p},Yd=function(d,p){var h=xo(d);return h===0?"pat":h===p?"pmt":p?"pes":null},Ju=function(d){var p=kr(d),h=4+Rr(d);return p&&(h+=d[h]+1),(d[h+10]&31)<<8|d[h+11]},Ci=function(d){var p={},h=kr(d),g=4+Rr(d);if(h&&(g+=d[g]+1),!!(d[g+5]&1)){var _,T,w;_=(d[g+1]&15)<<8|d[g+2],T=3+_-4,w=(d[g+10]&15)<<8|d[g+11];for(var S=12+w;S<T;){var P=g+S;p[(d[P+1]&31)<<8|d[P+2]]=d[P],S+=((d[P+3]&15)<<8|d[P+4])+5}return p}},So=function(d,p){var h=xo(d),g=p[h];switch(g){case pt.H264_STREAM_TYPE:return"video";case pt.ADTS_STREAM_TYPE:return"audio";case pt.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Fa=function(d){var p=kr(d);if(!p)return null;var h=4+Rr(d);if(h>=d.byteLength)return null;var g=null,_;return _=d[h+7],_&192&&(g={},g.pts=(d[h+9]&14)<<27|(d[h+10]&255)<<20|(d[h+11]&254)<<12|(d[h+12]&255)<<5|(d[h+13]&254)>>>3,g.pts*=4,g.pts+=(d[h+13]&6)>>>1,g.dts=g.pts,_&64&&(g.dts=(d[h+14]&14)<<27|(d[h+15]&255)<<20|(d[h+16]&254)<<12|(d[h+17]&255)<<5|(d[h+18]&254)>>>3,g.dts*=4,g.dts+=(d[h+18]&6)>>>1)),g},ea=function(d){switch(d){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Zu=function(d){for(var p=4+Rr(d),h=d.subarray(p),g=0,_=0,T=!1,w;_<h.byteLength-3;_++)if(h[_+2]===1){g=_+5;break}for(;g<h.byteLength;)switch(h[g]){case 0:if(h[g-1]!==0){g+=2;break}else if(h[g-2]!==0){g++;break}_+3!==g-2&&(w=ea(h[_+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0));do{g++}while(h[g]!==1&&g<h.length);_=g-2,g+=3;break;case 1:if(h[g-1]!==0||h[g-2]!==0){g+=3;break}w=ea(h[_+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0),_=g-2,g+=3;break;default:g+=3;break}return h=h.subarray(_),g-=_,_=0,h&&h.byteLength>3&&(w=ea(h[_+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0)),T},Jd={parseType:Yd,parsePat:Ju,parsePmt:Ci,parsePayloadUnitStartIndicator:kr,parsePesType:So,parsePesTime:Fa,videoPacketContainsKeyFrame:Zu},Ji=lo.handleRollover,Fe={};Fe.ts=Jd,Fe.aac=Sn;var Ai=Oe.ONE_SECOND_IN_TS,St=188,kt=71,Zd=function(d,p){for(var h=0,g=St,_,T;g<d.byteLength;){if(d[h]===kt&&d[g]===kt){switch(_=d.subarray(h,g),T=Fe.ts.parseType(_,p.pid),T){case"pat":p.pid=Fe.ts.parsePat(_);break;case"pmt":var w=Fe.ts.parsePmt(_);p.table=p.table||{},Object.keys(w).forEach(function(S){p.table[S]=w[S]});break}h+=St,g+=St;continue}h++,g++}},Eo=function(d,p,h){for(var g=0,_=St,T,w,S,P,C,L=!1;_<=d.byteLength;){if(d[g]===kt&&(d[_]===kt||_===d.byteLength)){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="audio"&&P&&(C=Fe.ts.parsePesTime(T),C&&(C.type="audio",h.audio.push(C),L=!0));break}if(L)break;g+=St,_+=St;continue}g++,_++}for(_=d.byteLength,g=_-St,L=!1;g>=0;){if(d[g]===kt&&(d[_]===kt||_===d.byteLength)){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="audio"&&P&&(C=Fe.ts.parsePesTime(T),C&&(C.type="audio",h.audio.push(C),L=!0));break}if(L)break;g-=St,_-=St;continue}g--,_--}},wo=function(d,p,h){for(var g=0,_=St,T,w,S,P,C,L,B,ee,ae=!1,Q={data:[],size:0};_<d.byteLength;){if(d[g]===kt&&d[_]===kt){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":if(S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="video"&&(P&&!ae&&(C=Fe.ts.parsePesTime(T),C&&(C.type="video",h.video.push(C),ae=!0)),!h.firstKeyFrame)){if(P&&Q.size!==0){for(L=new Uint8Array(Q.size),B=0;Q.data.length;)ee=Q.data.shift(),L.set(ee,B),B+=ee.byteLength;if(Fe.ts.videoPacketContainsKeyFrame(L)){var ye=Fe.ts.parsePesTime(L);ye?(h.firstKeyFrame=ye,h.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Q.size=0}Q.data.push(T),Q.size+=T.byteLength}break}if(ae&&h.firstKeyFrame)break;g+=St,_+=St;continue}g++,_++}for(_=d.byteLength,g=_-St,ae=!1;g>=0;){if(d[g]===kt&&d[_]===kt){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="video"&&P&&(C=Fe.ts.parsePesTime(T),C&&(C.type="video",h.video.push(C),ae=!0));break}if(ae)break;g-=St,_-=St;continue}g--,_--}},el=function(d,p){if(d.audio&&d.audio.length){var h=p;(typeof h>"u"||isNaN(h))&&(h=d.audio[0].dts),d.audio.forEach(function(T){T.dts=Ji(T.dts,h),T.pts=Ji(T.pts,h),T.dtsTime=T.dts/Ai,T.ptsTime=T.pts/Ai})}if(d.video&&d.video.length){var g=p;if((typeof g>"u"||isNaN(g))&&(g=d.video[0].dts),d.video.forEach(function(T){T.dts=Ji(T.dts,g),T.pts=Ji(T.pts,g),T.dtsTime=T.dts/Ai,T.ptsTime=T.pts/Ai}),d.firstKeyFrame){var _=d.firstKeyFrame;_.dts=Ji(_.dts,g),_.pts=Ji(_.pts,g),_.dtsTime=_.dts/Ai,_.ptsTime=_.pts/Ai}}},Gr=function(d){for(var p=!1,h=0,g=null,_=null,T=0,w=0,S;d.length-w>=3;){var P=Fe.aac.parseType(d,w);switch(P){case"timed-metadata":if(d.length-w<10){p=!0;break}if(T=Fe.aac.parseId3TagSize(d,w),T>d.length){p=!0;break}_===null&&(S=d.subarray(w,w+T),_=Fe.aac.parseAacTimestamp(S)),w+=T;break;case"audio":if(d.length-w<7){p=!0;break}if(T=Fe.aac.parseAdtsSize(d,w),T>d.length){p=!0;break}g===null&&(S=d.subarray(w,w+T),g=Fe.aac.parseSampleRate(S)),h++,w+=T;break;default:w++;break}if(p)return null}if(g===null||_===null)return null;var C=Ai/g,L={audio:[{type:"audio",dts:_,pts:_},{type:"audio",dts:_+h*1024*C,pts:_+h*1024*C}]};return L},xs=function(d){var p={pid:null,table:null},h={};Zd(d,p);for(var g in p.table)if(p.table.hasOwnProperty(g)){var _=p.table[g];switch(_){case pt.H264_STREAM_TYPE:h.video=[],wo(d,p,h),h.video.length===0&&delete h.video;break;case pt.ADTS_STREAM_TYPE:h.audio=[],Eo(d,p,h),h.audio.length===0&&delete h.audio;break}}return h},ef=function(d,p){var h=Fe.aac.isLikelyAacData(d),g;return h?g=Gr(d):g=xs(d),!g||!g.audio&&!g.video?null:(el(g,p),g)},tf={inspect:ef,parseAudioPes_:Eo},rf=function(d,p){p.on("data",function(h){var g=h.initSegment;h.initSegment={data:g.buffer,byteOffset:g.byteOffset,byteLength:g.byteLength};var _=h.data;h.data=_.buffer,d.postMessage({action:"data",segment:h,byteOffset:_.byteOffset,byteLength:_.byteLength},[h.data])}),p.on("done",function(h){d.postMessage({action:"done"})}),p.on("gopInfo",function(h){d.postMessage({action:"gopInfo",gopInfo:h})}),p.on("videoSegmentTimingInfo",function(h){var g={start:{decode:Oe.videoTsToSeconds(h.start.dts),presentation:Oe.videoTsToSeconds(h.start.pts)},end:{decode:Oe.videoTsToSeconds(h.end.dts),presentation:Oe.videoTsToSeconds(h.end.pts)},baseMediaDecodeTime:Oe.videoTsToSeconds(h.baseMediaDecodeTime)};h.prependedContentDuration&&(g.prependedContentDuration=Oe.videoTsToSeconds(h.prependedContentDuration)),d.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:g})}),p.on("audioSegmentTimingInfo",function(h){var g={start:{decode:Oe.videoTsToSeconds(h.start.dts),presentation:Oe.videoTsToSeconds(h.start.pts)},end:{decode:Oe.videoTsToSeconds(h.end.dts),presentation:Oe.videoTsToSeconds(h.end.pts)},baseMediaDecodeTime:Oe.videoTsToSeconds(h.baseMediaDecodeTime)};h.prependedContentDuration&&(g.prependedContentDuration=Oe.videoTsToSeconds(h.prependedContentDuration)),d.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:g})}),p.on("id3Frame",function(h){d.postMessage({action:"id3Frame",id3Frame:h})}),p.on("caption",function(h){d.postMessage({action:"caption",caption:h})}),p.on("trackinfo",function(h){d.postMessage({action:"trackinfo",trackInfo:h})}),p.on("audioTimingInfo",function(h){d.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Oe.videoTsToSeconds(h.start),end:Oe.videoTsToSeconds(h.end)}})}),p.on("videoTimingInfo",function(h){d.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Oe.videoTsToSeconds(h.start),end:Oe.videoTsToSeconds(h.end)}})}),p.on("log",function(h){d.postMessage({action:"log",log:h})})},zr=function(){function x(p,h){this.options=h||{},this.self=p,this.init()}var d=x.prototype;return d.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new qd.Transmuxer(this.options),rf(this.self,this.transmuxer)},d.pushMp4Captions=function(h){this.captionParser||(this.captionParser=new Qd,this.captionParser.init());var g=new Uint8Array(h.data,h.byteOffset,h.byteLength),_=this.captionParser.parse(g,h.trackIds,h.timescales);this.self.postMessage({action:"mp4Captions",captions:_&&_.captions||[],logs:_&&_.logs||[],data:g.buffer},[g.buffer])},d.probeMp4StartTime=function(h){var g=h.timescales,_=h.data,T=bs.startTime(g,_);this.self.postMessage({action:"probeMp4StartTime",startTime:T,data:_},[_.buffer])},d.probeMp4Tracks=function(h){var g=h.data,_=bs.tracks(g);this.self.postMessage({action:"probeMp4Tracks",tracks:_,data:g},[g.buffer])},d.probeTs=function(h){var g=h.data,_=h.baseStartTime,T=typeof _=="number"&&!isNaN(_)?_*Oe.ONE_SECOND_IN_TS:void 0,w=tf.inspect(g,T),S=null;w&&(S={hasVideo:w.video&&w.video.length===2||!1,hasAudio:w.audio&&w.audio.length===2||!1},S.hasVideo&&(S.videoStart=w.video[0].ptsTime),S.hasAudio&&(S.audioStart=w.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:S,data:g},[g.buffer])},d.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},d.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},d.push=function(h){var g=new Uint8Array(h.data,h.byteOffset,h.byteLength);this.transmuxer.push(g)},d.reset=function(){this.transmuxer.reset()},d.setTimestampOffset=function(h){var g=h.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Oe.secondsToVideoTs(g)))},d.setAudioAppendStart=function(h){this.transmuxer.setAudioAppendStart(Math.ceil(Oe.secondsToVideoTs(h.appendStart)))},d.setRemux=function(h){this.transmuxer.setRemux(h.remux)},d.flush=function(h){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},d.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},d.alignGopsWith=function(h){this.transmuxer.alignGopsWith(h.gopsToAlignWith.slice())},x}();self.onmessage=function(x){if(x.data.action==="init"&&x.data.options){this.messageHandlers=new zr(self,x.data.options);return}this.messageHandlers||(this.messageHandlers=new zr(self)),x.data&&x.data.action&&x.data.action!=="init"&&this.messageHandlers[x.data.action]&&this.messageHandlers[x.data.action](x.data)}})),TR=Jx(yR),bR=function(t,i,r){var e=t.data.segment,n=e.type,s=e.initSegment,o=e.captions,l=e.captionStreams,f=e.metadata,m=e.videoFrameDtsTime,v=e.videoFramePtsTime;i.buffer.push({captions:o,captionStreams:l,metadata:f});var y=t.data.segment.boxes||{data:t.data.segment.data},E={type:n,data:new Uint8Array(y.data,y.data.byteOffset,y.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof m<"u"&&(E.videoFrameDtsTime=m),typeof v<"u"&&(E.videoFramePtsTime=v),r(E)},xR=function(t){var i=t.transmuxedData,r=t.callback;i.buffer=[],r(i)},SR=function(t,i){i.gopInfo=t.data.gopInfo},tS=function(t){var i=t.transmuxer,r=t.bytes,e=t.audioAppendStart,n=t.gopsToAlignWith,s=t.remux,o=t.onData,l=t.onTrackInfo,f=t.onAudioTimingInfo,m=t.onVideoTimingInfo,v=t.onVideoSegmentTimingInfo,y=t.onAudioSegmentTimingInfo,E=t.onId3,I=t.onCaptions,O=t.onDone,D=t.onEndedTimeline,R=t.onTransmuxerLog,H=t.isEndOfTimeline,Z={buffer:[]},V=H,W=function(X){i.currentTransmux===t&&(X.data.action==="data"&&bR(X,Z,o),X.data.action==="trackinfo"&&l(X.data.trackInfo),X.data.action==="gopInfo"&&SR(X,Z),X.data.action==="audioTimingInfo"&&f(X.data.audioTimingInfo),X.data.action==="videoTimingInfo"&&m(X.data.videoTimingInfo),X.data.action==="videoSegmentTimingInfo"&&v(X.data.videoSegmentTimingInfo),X.data.action==="audioSegmentTimingInfo"&&y(X.data.audioSegmentTimingInfo),X.data.action==="id3Frame"&&E([X.data.id3Frame],X.data.id3Frame.dispatchType),X.data.action==="caption"&&I(X.data.caption),X.data.action==="endedtimeline"&&(V=!1,D()),X.data.action==="log"&&R(X.data.log),X.data.type==="transmuxed"&&(V||(i.onmessage=null,xR({transmuxedData:Z,callback:O}),iS(i))))};if(i.onmessage=W,e&&i.postMessage({action:"setAudioAppendStart",appendStart:e}),Array.isArray(n)&&i.postMessage({action:"alignGopsWith",gopsToAlignWith:n}),typeof s<"u"&&i.postMessage({action:"setRemux",remux:s}),r.byteLength){var te=r instanceof ArrayBuffer?r:r.buffer,z=r instanceof ArrayBuffer?0:r.byteOffset;i.postMessage({action:"push",data:te,byteOffset:z,byteLength:r.byteLength},[te])}H&&i.postMessage({action:"endTimeline"}),i.postMessage({action:"flush"})},iS=function(t){t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),typeof t.currentTransmux=="function"?t.currentTransmux():tS(t.currentTransmux))},rS=function(t,i){t.postMessage({action:i}),iS(t)},nS=function(t,i){if(!i.currentTransmux){i.currentTransmux=t,rS(i,t);return}i.transmuxQueue.push(rS.bind(null,i,t))},ER=function(t){nS("reset",t)},wR=function(t){nS("endTimeline",t)},aS=function(t){if(!t.transmuxer.currentTransmux){t.transmuxer.currentTransmux=t,tS(t);return}t.transmuxer.transmuxQueue.push(t)},CR=function(t){var i=new TR;i.currentTransmux=null,i.transmuxQueue=[];var r=i.terminate;return i.terminate=function(){return i.currentTransmux=null,i.transmuxQueue.length=0,r.call(i)},i.postMessage({action:"init",options:t}),i},Qg={reset:ER,endTimeline:wR,transmux:aS,createTransmuxer:CR},ih=function(t){var i=t.transmuxer,r=t.endAction||t.action,e=t.callback,n=Di({},t,{endAction:null,transmuxer:null,callback:null}),s=function f(m){m.data.action===r&&(i.removeEventListener("message",f),m.data.data&&(m.data.data=new Uint8Array(m.data.data,t.byteOffset||0,t.byteLength||m.data.data.byteLength),t.data&&(t.data=m.data.data)),e(m.data))};if(i.addEventListener("message",s),t.data){var o=t.data instanceof ArrayBuffer;n.byteOffset=o?0:t.data.byteOffset,n.byteLength=t.data.byteLength;var l=[o?t.data:t.data.buffer];i.postMessage(n,l)}else i.postMessage(n)},Wn={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Yg=function(t){t.forEach(function(i){i.abort()})},AR=function(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}},IR=function(t){var i=t.target,r=Date.now()-i.requestTime,e={bandwidth:1/0,bytesReceived:0,roundTripTime:r||0};return e.bytesReceived=t.loaded,e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3),e},Jg=function(t,i){return i.timedout?{status:i.status,message:"HLS request timed-out at URL: "+i.uri,code:Wn.TIMEOUT,xhr:i}:i.aborted?{status:i.status,message:"HLS request aborted at URL: "+i.uri,code:Wn.ABORTED,xhr:i}:t?{status:i.status,message:"HLS request errored at URL: "+i.uri,code:Wn.FAILURE,xhr:i}:i.responseType==="arraybuffer"&&i.response.byteLength===0?{status:i.status,message:"Empty HLS response at URL: "+i.uri,code:Wn.FAILURE,xhr:i}:null},sS=function(t,i,r){return function(e,n){var s=n.response,o=Jg(e,n);if(o)return r(o,t);if(s.byteLength!==16)return r({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:Wn.FAILURE,xhr:n},t);for(var l=new DataView(s),f=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]),m=0;m<i.length;m++)i[m].bytes=f;return r(null,t)}},oS=function(t,i){var r=ou(t.map.bytes);if(r!=="mp4"){var e=t.map.resolvedUri||t.map.uri;return i({internal:!0,message:"Found unsupported "+(r||"unknown")+" container for initialization segment at URL: "+e,code:Wn.FAILURE})}ih({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:function(s){var o=s.tracks,l=s.data;return t.map.bytes=l,o.forEach(function(f){t.map.tracks=t.map.tracks||{},!t.map.tracks[f.type]&&(t.map.tracks[f.type]=f,typeof f.id=="number"&&f.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[f.id]=f.timescale))}),i(null)}})},PR=function(t){var i=t.segment,r=t.finishProcessingFn;return function(e,n){var s=Jg(e,n);if(s)return r(s,i);var o=new Uint8Array(n.response);if(i.map.key)return i.map.encryptedBytes=o,r(null,i);i.map.bytes=o,oS(i,function(l){if(l)return l.xhr=n,l.status=n.status,r(l,i);r(null,i)})}},OR=function(t){var i=t.segment,r=t.finishProcessingFn,e=t.responseType;return function(n,s){var o=Jg(n,s);if(o)return r(o,i);var l=e==="arraybuffer"||!s.responseText?s.response:vR(s.responseText.substring(i.lastReachedChar||0));return i.stats=AR(s),i.key?i.encryptedBytes=new Uint8Array(l):i.bytes=new Uint8Array(l),r(null,i)}},DR=function(t){var i=t.segment,r=t.bytes,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog,O=i.map&&i.map.tracks||{},D=Boolean(O.audio&&O.video),R=n.bind(null,i,"audio","start"),H=n.bind(null,i,"audio","end"),Z=n.bind(null,i,"video","start"),V=n.bind(null,i,"video","end"),W=function(){return aS({bytes:r,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,remux:D,onData:function(q){q.type=q.type==="combined"?"video":q.type,y(i,q)},onTrackInfo:function(q){e&&(D&&(q.isMuxed=!0),e(i,q))},onAudioTimingInfo:function(q){R&&typeof q.start<"u"&&(R(q.start),R=null),H&&typeof q.end<"u"&&H(q.end)},onVideoTimingInfo:function(q){Z&&typeof q.start<"u"&&(Z(q.start),Z=null),V&&typeof q.end<"u"&&V(q.end)},onVideoSegmentTimingInfo:function(q){s(q)},onAudioSegmentTimingInfo:function(q){o(q)},onId3:function(q,X){l(i,q,X)},onCaptions:function(q){f(i,[q])},isEndOfTimeline:m,onEndedTimeline:function(){v()},onTransmuxerLog:I,onDone:function(q){E&&(q.type=q.type==="combined"?"video":q.type,E(null,i,q))}})};ih({action:"probeTs",transmuxer:i.transmuxer,data:r,baseStartTime:i.baseStartTime,callback:function(z){i.bytes=r=z.data;var q=z.result;q&&(e(i,{hasAudio:q.hasAudio,hasVideo:q.hasVideo,isMuxed:D}),e=null,q.hasAudio&&!D&&R(q.audioStart),q.hasVideo&&Z(q.videoStart),R=null,Z=null),W()}})},uS=function(t){var i=t.segment,r=t.bytes,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog,O=new Uint8Array(r);if(NT(O)){i.isFmp4=!0;var D=i.map.tracks,R={isFmp4:!0,hasVideo:!!D.video,hasAudio:!!D.audio};D.audio&&D.audio.codec&&D.audio.codec!=="enca"&&(R.audioCodec=D.audio.codec),D.video&&D.video.codec&&D.video.codec!=="encv"&&(R.videoCodec=D.video.codec),D.video&&D.audio&&(R.isMuxed=!0),e(i,R);var H=function(V){y(i,{data:O,type:R.hasAudio&&!R.isMuxed?"audio":"video"}),V&&V.length&&f(i,V),E(null,i,{})};ih({action:"probeMp4StartTime",timescales:i.map.timescales,data:O,transmuxer:i.transmuxer,callback:function(V){var W=V.data,te=V.startTime;if(r=W.buffer,i.bytes=O=W,R.hasAudio&&!R.isMuxed&&n(i,"audio","start",te),R.hasVideo&&n(i,"video","start",te),!D.video||!W.byteLength||!i.transmuxer){H();return}ih({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:i.transmuxer,data:O,timescales:i.map.timescales,trackIds:[D.video.id],callback:function(q){r=q.data.buffer,i.bytes=O=q.data,q.logs.forEach(function(X){I(N.mergeOptions(X,{stream:"mp4CaptionParser"}))}),H(q.captions)}})}});return}if(!i.transmuxer){E(null,i,{});return}if(typeof i.container>"u"&&(i.container=ou(O)),i.container!=="ts"&&i.container!=="aac"){e(i,{hasAudio:!1,hasVideo:!1}),E(null,i,{});return}DR({segment:i,bytes:r,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I})},lS=function(t,i){var r=t.id,e=t.key,n=t.encryptedBytes,s=t.decryptionWorker,o=function f(m){if(m.data.source===r){s.removeEventListener("message",f);var v=m.data.decrypted;i(new Uint8Array(v.bytes,v.byteOffset,v.byteLength))}};s.addEventListener("message",o);var l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),s.postMessage(Wx({source:r,encrypted:n,key:l,iv:e.iv}),[n.buffer,l.buffer])},LR=function(t){var i=t.decryptionWorker,r=t.segment,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog;lS({id:r.requestId,key:r.key,encryptedBytes:r.encryptedBytes,decryptionWorker:i},function(O){r.bytes=O,uS({segment:r,bytes:r.bytes,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I})})},kR=function(t){var i=t.activeXhrs,r=t.decryptionWorker,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog,O=0,D=!1;return function(R,H){if(!D){if(R)return D=!0,Yg(i),E(R,H);if(O+=1,O===i.length){var Z=function(){if(H.encryptedBytes)return LR({decryptionWorker:r,segment:H,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I});uS({segment:H,bytes:H.bytes,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I})};if(H.endOfAllRequests=Date.now(),H.map&&H.map.encryptedBytes&&!H.map.bytes)return lS({decryptionWorker:r,id:H.requestId+"-init",encryptedBytes:H.map.encryptedBytes,key:H.map.key},function(V){H.map.bytes=V,oS(H,function(W){if(W)return Yg(i),E(W,H);Z()})});Z()}}}},RR=function(t){var i=t.loadendState,r=t.abortFn;return function(e){var n=e.target;n.aborted&&r&&!i.calledAbortFn&&(r(),i.calledAbortFn=!0)}},MR=function(t){var i=t.segment,r=t.progressFn;return t.trackInfoFn,t.timingInfoFn,t.videoSegmentTimingInfoFn,t.audioSegmentTimingInfoFn,t.id3Fn,t.captionsFn,t.isEndOfTimeline,t.endedTimelineFn,t.dataFn,function(e){var n=e.target;if(!n.aborted)return i.stats=N.mergeOptions(i.stats,IR(e)),!i.stats.firstBytesReceivedAt&&i.stats.bytesReceived&&(i.stats.firstBytesReceivedAt=Date.now()),r(e,i)}},FR=function(t){var i=t.xhr,r=t.xhrOptions,e=t.decryptionWorker,n=t.segment,s=t.abortFn,o=t.progressFn,l=t.trackInfoFn,f=t.timingInfoFn,m=t.videoSegmentTimingInfoFn,v=t.audioSegmentTimingInfoFn,y=t.id3Fn,E=t.captionsFn,I=t.isEndOfTimeline,O=t.endedTimelineFn,D=t.dataFn,R=t.doneFn,H=t.onTransmuxerLog,Z=[],V=kR({activeXhrs:Z,decryptionWorker:e,trackInfoFn:l,timingInfoFn:f,videoSegmentTimingInfoFn:m,audioSegmentTimingInfoFn:v,id3Fn:y,captionsFn:E,isEndOfTimeline:I,endedTimelineFn:O,dataFn:D,doneFn:R,onTransmuxerLog:H});if(n.key&&!n.key.bytes){var W=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&W.push(n.map.key);var te=N.mergeOptions(r,{uri:n.key.resolvedUri,responseType:"arraybuffer"}),z=sS(n,W,V),q=i(te,z);Z.push(q)}if(n.map&&!n.map.bytes){var X=n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri);if(X){var j=N.mergeOptions(r,{uri:n.map.key.resolvedUri,responseType:"arraybuffer"}),oe=sS(n,[n.map.key],V),re=i(j,oe);Z.push(re)}var se=N.mergeOptions(r,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:zg(n.map)}),he=PR({segment:n,finishProcessingFn:V}),le=i(se,he);Z.push(le)}var pe=N.mergeOptions(r,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:zg(n)}),ne=OR({segment:n,finishProcessingFn:V,responseType:pe.responseType}),fe=i(pe,ne);fe.addEventListener("progress",MR({segment:n,progressFn:o,trackInfoFn:l,timingInfoFn:f,videoSegmentTimingInfoFn:m,audioSegmentTimingInfoFn:v,id3Fn:y,captionsFn:E,isEndOfTimeline:I,endedTimelineFn:O,dataFn:D})),Z.push(fe);var Ie={};return Z.forEach(function(Ce){Ce.addEventListener("loadend",RR({loadendState:Ie,abortFn:s}))}),function(){return Yg(Z)}},NR=fn("CodecUtils"),UR=function(t){var i=t.attributes||{};if(i.CODECS)return oi(i.CODECS)},dS=function(t,i){var r=i.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&r.AUDIO&&t.mediaGroups.AUDIO[r.AUDIO]},BR=function(t,i){if(!dS(t,i))return!0;var r=i.attributes||{},e=t.mediaGroups.AUDIO[r.AUDIO];for(var n in e)if(!e[n].uri&&!e[n].playlists)return!0;return!1},rh=function(t){var i={};return t.forEach(function(r){var e=r.mediaType,n=r.type,s=r.details;i[e]=i[e]||[],i[e].push(om(""+n+s))}),Object.keys(i).forEach(function(r){if(i[r].length>1){NR("multiple "+r+" codecs found as attributes: "+i[r].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),i[r]=null;return}i[r]=i[r][0]}),i},fS=function(t){var i=0;return t.audio&&i++,t.video&&i++,i},hd=function(t,i){var r=i.attributes||{},e=rh(UR(i)||[]);if(dS(t,i)&&!e.audio&&!BR(t,i)){var n=rh(Sy(t,r.AUDIO)||[]);n.audio&&(e.audio=n.audio)}return e},nh=fn("PlaylistSelector"),cS=function(t){if(!(!t||!t.playlist)){var i=t.playlist;return JSON.stringify({id:i.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:i.attributes&&i.attributes.CODECS||""})}},ah=function(t,i){if(!t)return"";var r=F.getComputedStyle(t);return r?r[i]:""},Iu=function(t,i){var r=t.slice();t.sort(function(e,n){var s=i(e,n);return s===0?r.indexOf(e)-r.indexOf(n):s})},Zg=function(t,i){var r,e;return t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||F.Number.MAX_VALUE,i.attributes.BANDWIDTH&&(e=i.attributes.BANDWIDTH),e=e||F.Number.MAX_VALUE,r-e},jR=function(t,i){var r,e;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||F.Number.MAX_VALUE,i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(e=i.attributes.RESOLUTION.width),e=e||F.Number.MAX_VALUE,r===e&&t.attributes.BANDWIDTH&&i.attributes.BANDWIDTH?t.attributes.BANDWIDTH-i.attributes.BANDWIDTH:r-e},hS=function(t,i,r,e,n,s){if(t){var o={bandwidth:i,width:r,height:e,limitRenditionByPlayerDimensions:n},l=t.playlists;or.isAudioOnly(t)&&(l=s.getAudioTrackPlaylists_(),o.audioOnly=!0);var f=l.map(function(j){var oe,re=j.attributes&&j.attributes.RESOLUTION&&j.attributes.RESOLUTION.width,se=j.attributes&&j.attributes.RESOLUTION&&j.attributes.RESOLUTION.height;return oe=j.attributes&&j.attributes.BANDWIDTH,oe=oe||F.Number.MAX_VALUE,{bandwidth:oe,width:re,height:se,playlist:j}});Iu(f,function(j,oe){return j.bandwidth-oe.bandwidth}),f=f.filter(function(j){return!or.isIncompatible(j.playlist)});var m=f.filter(function(j){return or.isEnabled(j.playlist)});m.length||(m=f.filter(function(j){return!or.isDisabled(j.playlist)}));var v=m.filter(function(j){return j.bandwidth*pi.BANDWIDTH_VARIANCE<i}),y=v[v.length-1],E=v.filter(function(j){return j.bandwidth===y.bandwidth})[0];if(n===!1){var I=E||m[0]||f[0];if(I&&I.playlist){var O="sortedPlaylistReps";return E&&(O="bandwidthBestRep"),m[0]&&(O="enabledPlaylistReps"),nh("choosing "+cS(I)+" using "+O+" with options",o),I.playlist}return nh("could not choose a playlist with options",o),null}var D=v.filter(function(j){return j.width&&j.height});Iu(D,function(j,oe){return j.width-oe.width});var R=D.filter(function(j){return j.width===r&&j.height===e});y=R[R.length-1];var H=R.filter(function(j){return j.bandwidth===y.bandwidth})[0],Z,V,W;H||(Z=D.filter(function(j){return j.width>r||j.height>e}),V=Z.filter(function(j){return j.width===Z[0].width&&j.height===Z[0].height}),y=V[V.length-1],W=V.filter(function(j){return j.bandwidth===y.bandwidth})[0]);var te;if(s.experimentalLeastPixelDiffSelector){var z=D.map(function(j){return j.pixelDiff=Math.abs(j.width-r)+Math.abs(j.height-e),j});Iu(z,function(j,oe){return j.pixelDiff===oe.pixelDiff?oe.bandwidth-j.bandwidth:j.pixelDiff-oe.pixelDiff}),te=z[0]}var q=te||W||H||E||m[0]||f[0];if(q&&q.playlist){var X="sortedPlaylistReps";return te?X="leastPixelDiffRep":W?X="resolutionPlusOneRep":H?X="resolutionBestRep":E?X="bandwidthBestRep":m[0]&&(X="enabledPlaylistReps"),nh("choosing "+cS(q)+" using "+X+" with options",o),q.playlist}return nh("could not choose a playlist with options",o),null}},pS=function(){var t=this.useDevicePixelRatio&&F.devicePixelRatio||1;return hS(this.playlists.master,this.systemBandwidth,parseInt(ah(this.tech_.el(),"width"),10)*t,parseInt(ah(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},VR=function(t){var i=-1,r=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var e=this.useDevicePixelRatio&&F.devicePixelRatio||1;return i<0&&(i=this.systemBandwidth,r=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==r&&(i=t*this.systemBandwidth+(1-t)*i,r=this.systemBandwidth),hS(this.playlists.master,i,parseInt(ah(this.tech_.el(),"width"),10)*e,parseInt(ah(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},HR=function(t){var i=t.master,r=t.currentTime,e=t.bandwidth,n=t.duration,s=t.segmentDuration,o=t.timeUntilRebuffer,l=t.currentTimeline,f=t.syncController,m=i.playlists.filter(function(O){return!or.isIncompatible(O)}),v=m.filter(or.isEnabled);v.length||(v=m.filter(function(O){return!or.isDisabled(O)}));var y=v.filter(or.hasAttribute.bind(null,"BANDWIDTH")),E=y.map(function(O){var D=f.getSyncPoint(O,n,l,r),R=D?1:2,H=or.estimateSegmentRequestTime(s,e,O),Z=H*R-o;return{playlist:O,rebufferingImpact:Z}}),I=E.filter(function(O){return O.rebufferingImpact<=0});return Iu(I,function(O,D){return Zg(D.playlist,O.playlist)}),I.length?I[0]:(Iu(E,function(O,D){return O.rebufferingImpact-D.rebufferingImpact}),E[0]||null)},$R=function(){var t=this,i=this.playlists.master.playlists.filter(or.isEnabled);Iu(i,function(e,n){return Zg(e,n)});var r=i.filter(function(e){return!!hd(t.playlists.master,e).video});return r[0]||null},WR=function(t){var i=0,r;return t.bytes&&(r=new Uint8Array(t.bytes),t.segments.forEach(function(e){r.set(e,i),i+=e.byteLength})),r},qR=function(t,i,r){if(!t[r]){i.trigger({type:"usage",name:"vhs-608"}),i.trigger({type:"usage",name:"hls-608"});var e=r;/^cc708_/.test(r)&&(e="SERVICE"+r.split("_")[1]);var n=i.textTracks().getTrackById(e);if(n)t[r]=n;else{var s=i.options_.vhs&&i.options_.vhs.captionServices||{},o=r,l=r,f=!1,m=s[e];m&&(o=m.label,l=m.language,f=m.default),t[r]=i.addRemoteTextTrack({kind:"captions",id:e,default:f,label:o,language:l},!1).track}}},GR=function(t){var i=t.inbandTextTracks,r=t.captionArray,e=t.timestampOffset;if(r){var n=F.WebKitDataCue||F.VTTCue;r.forEach(function(s){var o=s.stream;i[o].addCue(new n(s.startTime+e,s.endTime+e,s.text))})}},zR=function(t){Object.defineProperties(t.frame,{id:{get:function(){return N.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return N.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return N.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},KR=function(t){var i=t.inbandTextTracks,r=t.metadataArray,e=t.timestampOffset,n=t.videoDuration;if(r){var s=F.WebKitDataCue||F.VTTCue,o=i.metadataTrack_;if(o&&(r.forEach(function(E){var I=E.cueTime+e;typeof I!="number"||F.isNaN(I)||I<0||!(I<1/0)||E.frames.forEach(function(O){var D=new s(I,I,O.value||O.url||O.data||"");D.frame=O,D.value=O,zR(D),o.addCue(D)})}),!(!o.cues||!o.cues.length))){for(var l=o.cues,f=[],m=0;m<l.length;m++)l[m]&&f.push(l[m]);var v=f.reduce(function(E,I){var O=E[I.startTime]||[];return O.push(I),E[I.startTime]=O,E},{}),y=Object.keys(v).sort(function(E,I){return Number(E)-Number(I)});y.forEach(function(E,I){var O=v[E],D=Number(y[I+1])||n;O.forEach(function(R){R.endTime=D})})}}},XR=function(t,i,r){t.metadataTrack_||(t.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=i)},pd=function(t,i,r){var e,n;if(r&&r.cues)for(e=r.cues.length;e--;)n=r.cues[e],n.startTime>=t&&n.endTime<=i&&r.removeCue(n)},QR=function(t){var i=t.cues;if(i)for(var r=0;r<i.length;r++){for(var e=[],n=0,s=0;s<i.length;s++)i[r].startTime===i[s].startTime&&i[r].endTime===i[s].endTime&&i[r].text===i[s].text&&(n++,n>1&&e.push(i[s]));e.length&&e.forEach(function(o){return t.removeCue(o)})}},YR=function(t,i,r){if(typeof i>"u"||i===null||!t.length)return[];var e=Math.ceil((i-r+3)*ns.ONE_SECOND_IN_TS),n;for(n=0;n<t.length&&!(t[n].pts>e);n++);return t.slice(n)},JR=function(t,i,r){if(!i.length)return t;if(r)return i.slice();var e=i[0].pts,n=0;for(n;n<t.length&&!(t[n].pts>=e);n++);return t.slice(0,n).concat(i)},ZR=function(t,i,r,e){for(var n=Math.ceil((i-e)*ns.ONE_SECOND_IN_TS),s=Math.ceil((r-e)*ns.ONE_SECOND_IN_TS),o=t.slice(),l=t.length;l--&&!(t[l].pts<=s););if(l===-1)return o;for(var f=l+1;f--&&!(t[f].pts<=n););return f=Math.max(f,0),o.splice(f,l-f+1),o},eM=function(t,i){if(!t&&!i||!t&&i||t&&!i)return!1;if(t===i)return!0;var r=Object.keys(t).sort(),e=Object.keys(i).sort();if(r.length!==e.length)return!1;for(var n=0;n<r.length;n++){var s=r[n];if(s!==e[n]||t[s]!==i[s])return!1}return!0},mS=22,tM=function(t,i,r){i=i||[];for(var e=[],n=0,s=0;s<i.length;s++){var o=i[s];if(t===o.timeline&&(e.push(s),n+=o.duration,n>r))return s}return e.length===0?0:e[e.length-1]},md=1,iM=500,gS=function(t){return typeof t=="number"&&isFinite(t)},sh=1/60,rM=function(t,i,r){return t!=="main"||!i||!r?null:!r.hasAudio&&!r.hasVideo?"Neither audio nor video found in segment.":i.hasVideo&&!r.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!i.hasVideo&&r.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},nM=function(t,i,r){var e=i-pi.BACK_BUFFER_LENGTH;t.length&&(e=Math.max(e,t.start(0)));var n=i-r;return Math.min(n,e)},Pu=function(t){var i=t.startOfSegment,r=t.duration,e=t.segment,n=t.part,s=t.playlist,o=s.mediaSequence,l=s.id,f=s.segments,m=f===void 0?[]:f,v=t.mediaIndex,y=t.partIndex,E=t.timeline,I=m.length-1,O="mediaIndex/partIndex increment";t.getMediaInfoForTime?O="getMediaInfoForTime ("+t.getMediaInfoForTime+")":t.isSyncRequest&&(O="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(O+=" with independent "+t.independent);var D=typeof y=="number",R=t.segment.uri?"segment":"pre-segment",H=D?Px({preloadSegment:e})-1:0;return R+" ["+(o+v)+"/"+(o+I)+"]"+(D?" part ["+y+"/"+H+"]":"")+(" segment start/end ["+e.start+" => "+e.end+"]")+(D?" part start/end ["+n.start+" => "+n.end+"]":"")+(" startOfSegment ["+i+"]")+(" duration ["+r+"]")+(" timeline ["+E+"]")+(" selected by ["+O+"]")+(" playlist ["+l+"]")},vS=function(t){return t+"TimingInfo"},aM=function(t){var i=t.segmentTimeline,r=t.currentTimeline,e=t.startOfSegment,n=t.buffered,s=t.overrideCheck;return!s&&i===r?null:i<r?e:n.length?n.end(n.length-1):e},_S=function(t){var i=t.timelineChangeController,r=t.currentTimeline,e=t.segmentTimeline,n=t.loaderType,s=t.audioDisabled;if(r===e)return!1;if(n==="audio"){var o=i.lastTimelineChange({type:"main"});return!o||o.to!==e}if(n==="main"&&s){var l=i.pendingTimelineChange({type:"audio"});return!(l&&l.to===e)}return!1},sM=function(t){var i=0;return["video","audio"].forEach(function(r){var e=t[r+"TimingInfo"];if(e){var n=e.start,s=e.end,o;typeof n=="bigint"||typeof s=="bigint"?o=F.BigInt(s)-F.BigInt(n):typeof n=="number"&&typeof s=="number"&&(o=s-n),typeof o<"u"&&o>i&&(i=o)}}),typeof i=="bigint"&&i<Number.MAX_SAFE_INTEGER&&(i=Number(i)),i},yS=function(t){var i=t.segmentDuration,r=t.maxDuration;return i?Math.round(i)>r+os:!1},oM=function(t,i){if(i!=="hls")return null;var r=sM({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!r)return null;var e=t.playlist.targetDuration,n=yS({segmentDuration:r,maxDuration:e*2}),s=yS({segmentDuration:r,maxDuration:e}),o="Segment with index "+t.mediaIndex+" "+("from playlist "+t.playlist.id+" ")+("has a duration of "+r+" ")+("when the reported duration is "+t.duration+" ")+("and the target duration is "+e+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return n||s?{severity:n?"warn":"info",message:o}:null},ev=function(a){Ae(t,a);function t(r,e){var n;if(n=a.call(this)||this,!r)throw new TypeError("Initialization settings are required");if(typeof r.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!r.mediaSource)throw new TypeError("No MediaSource specified");return n.bandwidth=r.bandwidth,n.throughput={rate:0,count:0},n.roundTrip=NaN,n.resetStats_(),n.mediaIndex=null,n.partIndex=null,n.hasPlayed_=r.hasPlayed,n.currentTime_=r.currentTime,n.seekable_=r.seekable,n.seeking_=r.seeking,n.duration_=r.duration,n.mediaSource_=r.mediaSource,n.vhs_=r.vhs,n.loaderType_=r.loaderType,n.currentMediaInfo_=void 0,n.startingMediaInfo_=void 0,n.segmentMetadataTrack_=r.segmentMetadataTrack,n.goalBufferLength_=r.goalBufferLength,n.sourceType_=r.sourceType,n.sourceUpdater_=r.sourceUpdater,n.inbandTextTracks_=r.inbandTextTracks,n.state_="INIT",n.timelineChangeController_=r.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!0,n.parse708captions_=r.parse708captions,n.useDtsForTimestampOffset_=r.useDtsForTimestampOffset,n.captionServices_=r.captionServices,n.experimentalExactManifestTimings=r.experimentalExactManifestTimings,n.checkBufferTimeout_=null,n.error_=void 0,n.currentTimeline_=-1,n.pendingSegment_=null,n.xhrOptions_=null,n.pendingSegments_=[],n.audioDisabled_=!1,n.isPendingTimestampOffset_=!1,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=N.browser.IE_VERSION>=11,n.appendInitSegment_={audio:!0,video:!0},n.playlistOfLastInitSegment_={audio:null,video:null},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={id3:[],caption:[]},n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=null,n.activeInitSegmentId_=null,n.initSegments_={},n.cacheEncryptionKeys_=r.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=r.decrypter,n.syncController_=r.syncController,n.syncPoint_={segmentIndex:0,time:0},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=function(){return n.trigger("syncinfoupdate")},n.syncController_.on("syncinfoupdate",n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener("sourceopen",function(){n.isEndOfStream_()||(n.ended_=!1)}),n.fetchAtBuffer_=!1,n.logger_=fn("SegmentLoader["+n.loaderType_+"]"),Object.defineProperty(Ue(n),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),n.sourceUpdater_.on("ready",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n.loaderType_==="main"&&n.timelineChangeController_.on("pendingtimelinechange",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n.loaderType_==="audio"&&n.timelineChangeController_.on("timelinechange",function(){n.hasEnoughInfoToLoad_()&&n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n}var i=t.prototype;return i.createTransmuxer_=function(){return Qg.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},i.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},i.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&F.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},i.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},i.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},i.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,F.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},i.checkForAbort_=function(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e},i.error=function(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},i.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Qg.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},i.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return N.createTimeRanges();if(this.loaderType_==="main"){var n=e.hasAudio,s=e.hasVideo,o=e.isMuxed;if(s&&n&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},i.initSegmentForMap=function(e,n){if(n===void 0&&(n=!1),!e)return null;var s=th(e),o=this.initSegments_[s];return n&&!o&&e.bytes&&(this.initSegments_[s]=o={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),o||e},i.segmentKey=function(e,n){if(n===void 0&&(n=!1),!e)return null;var s=qx(e),o=this.keyCache_[s];this.cacheEncryptionKeys_&&n&&!o&&e.bytes&&(this.keyCache_[s]=o={resolvedUri:e.resolvedUri,bytes:e.bytes});var l={resolvedUri:(o||e).resolvedUri};return o&&(l.bytes=o.bytes),l},i.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},i.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.playlist=function(e,n){if(n===void 0&&(n={}),!!e){var s=this.playlist_,o=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));var l=null;if(s&&(s.id?l=s.id:s.uri&&(l=s.uri)),this.logger_("playlist update ["+l+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==e.uri){this.mediaIndex!==null&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var f=e.mediaSequence-s.mediaSequence;if(this.logger_("live window shift ["+f+"]"),this.mediaIndex!==null)if(this.mediaIndex-=f,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var m=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!m.parts||!m.parts.length||!m.parts[this.partIndex])){var v=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=v}}o&&(o.mediaIndex-=f,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=e.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,e)}},i.pause=function(){this.checkBufferTimeout_&&(F.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},i.paused=function(){return this.checkBufferTimeout_===null},i.resetEverything=function(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},i.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},i.resyncLoader=function(){this.transmuxer_&&Qg.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},i.remove=function(e,n,s,o){if(s===void 0&&(s=function(){}),o===void 0&&(o=!1),n===1/0&&(n=this.duration_()),n<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var l=1,f=function(){l--,l===0&&s()};(o||!this.audioDisabled_)&&(l++,this.sourceUpdater_.removeAudio(e,n,f)),(o||this.loaderType_==="main")&&(this.gopBuffer_=ZR(this.gopBuffer_,e,n,this.timeMapping_),l++,this.sourceUpdater_.removeVideo(e,n,f));for(var m in this.inbandTextTracks_)pd(e,n,this.inbandTextTracks_[m]);pd(e,n,this.segmentMetadataTrack_),f()},i.monitorBuffer_=function(){this.checkBufferTimeout_&&F.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=F.setTimeout(this.monitorBufferTick_.bind(this),1)},i.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&F.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=F.setTimeout(this.monitorBufferTick_.bind(this),iM)},i.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&(typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},i.isEndOfStream_=function(e,n,s){if(e===void 0&&(e=this.mediaIndex),n===void 0&&(n=this.playlist_),s===void 0&&(s=this.partIndex),!n||!this.mediaSource_)return!1;var o=typeof e=="number"&&n.segments[e],l=e+1===n.segments.length,f=!o||!o.parts||s+1===o.parts.length;return n.endList&&this.mediaSource_.readyState==="open"&&l&&f},i.chooseNextRequest_=function(){var e=this.buffered_(),n=Cx(e)||0,s=Ng(e,this.currentTime_()),o=!this.hasPlayed_()&&s>=1,l=s>=this.goalBufferLength_(),f=this.playlist_.segments;if(!f.length||o||l)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var m={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(m.isSyncRequest)m.mediaIndex=tM(this.currentTimeline_,f,n);else if(this.mediaIndex!==null){var v=f[this.mediaIndex],y=typeof this.partIndex=="number"?this.partIndex:-1;m.startOfSegment=v.end?v.end:n,v.parts&&v.parts[y+1]?(m.mediaIndex=this.mediaIndex,m.partIndex=y+1):m.mediaIndex=this.mediaIndex+1}else{var E=or.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?n:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),I=E.segmentIndex,O=E.startTime,D=E.partIndex;m.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+n:"currentTime "+this.currentTime_(),m.mediaIndex=I,m.startOfSegment=O,m.partIndex=D}var R=f[m.mediaIndex],H=R&&typeof m.partIndex=="number"&&R.parts&&R.parts[m.partIndex];if(!R||typeof m.partIndex=="number"&&!H)return null;if(typeof m.partIndex!="number"&&R.parts&&(m.partIndex=0,H=R.parts[0]),!s&&H&&!H.independent)if(m.partIndex===0){var Z=f[m.mediaIndex-1],V=Z.parts&&Z.parts.length&&Z.parts[Z.parts.length-1];V&&V.independent&&(m.mediaIndex-=1,m.partIndex=Z.parts.length-1,m.independent="previous segment")}else R.parts[m.partIndex-1].independent&&(m.partIndex-=1,m.independent="previous part");var W=this.mediaSource_&&this.mediaSource_.readyState==="ended";return m.mediaIndex>=f.length-1&&W&&!this.seeking_()?null:this.generateSegmentInfo_(m)},i.generateSegmentInfo_=function(e){var n=e.independent,s=e.playlist,o=e.mediaIndex,l=e.startOfSegment,f=e.isSyncRequest,m=e.partIndex,v=e.forceTimestampOffset,y=e.getMediaInfoForTime,E=s.segments[o],I=typeof m=="number"&&E.parts[m],O={requestId:"segment-loader-"+Math.random(),uri:I&&I.resolvedUri||E.resolvedUri,mediaIndex:o,partIndex:I?m:null,isSyncRequest:f,startOfSegment:l,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:E.timeline,duration:I&&I.duration||E.duration,segment:E,part:I,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:y,independent:n},D=typeof v<"u"?v:this.isPendingTimestampOffset_;O.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:E.timeline,currentTimeline:this.currentTimeline_,startOfSegment:l,buffered:this.buffered_(),overrideCheck:D});var R=Cx(this.sourceUpdater_.audioBuffered());return typeof R=="number"&&(O.audioAppendStart=R-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(O.gopsToAlignWith=YR(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),O},i.timestampOffsetForSegment_=function(e){return aM(e)},i.earlyAbortWhenNeeded_=function(e){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var n=this.currentTime_(),s=e.bandwidth,o=this.pendingSegment_.duration,l=or.estimateSegmentRequestTime(o,s,this.playlist_,e.bytesReceived),f=Ik(this.buffered_(),n,this.vhs_.tech_.playbackRate())-1;if(!(l<=f)){var m=HR({master:this.vhs_.playlists.master,currentTime:n,bandwidth:s,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:f,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(m){var v=l-f,y=v-m.rebufferingImpact,E=.5;f<=os&&(E=1),!(!m.playlist||m.playlist.uri===this.playlist_.uri||y<E)&&(this.bandwidth=m.playlist.attributes.BANDWIDTH*pi.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},i.handleAbort_=function(e){this.logger_("Aborting "+Pu(e)),this.mediaRequestsAborted+=1},i.handleProgress_=function(e,n){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&this.trigger("progress")},i.handleTrackInfo_=function(e,n){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(n)||(n=n||{},eM(this.currentMediaInfo_,n)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=n,this.currentMediaInfo_=n,this.logger_("trackinfo update",n),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=n,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},i.handleTimingInfo_=function(e,n,s,o){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var l=this.pendingSegment_,f=vS(n);l[f]=l[f]||{},l[f][s]=o,this.logger_("timinginfo: "+n+" - "+s+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},i.handleCaptions_=function(e,n){var s=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(n.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,n));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),f={};n.forEach(function(m){f[m.stream]=f[m.stream]||{startTime:1/0,captions:[],endTime:0};var v=f[m.stream];v.startTime=Math.min(v.startTime,m.startTime+l),v.endTime=Math.max(v.endTime,m.endTime+l),v.captions.push(m)}),Object.keys(f).forEach(function(m){var v=f[m],y=v.startTime,E=v.endTime,I=v.captions,O=s.inbandTextTracks_;s.logger_("adding cues from "+y+" -> "+E+" for "+m),qR(O,s.vhs_.tech_,m),pd(y,E,O[m]),GR({captionArray:I,inbandTextTracks:O,timestampOffset:l})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},i.handleId3_=function(e,n,s){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,n,s));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();XR(this.inbandTextTracks_,s,this.vhs_.tech_),KR({inbandTextTracks:this.inbandTextTracks_,metadataArray:n,timestampOffset:l,videoDuration:this.duration_()})}},i.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(e){return e()}),this.metadataQueue_.caption.forEach(function(e){return e()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},i.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach(function(n){return n()})},i.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach(function(n){return n()})},i.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!_S({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},i.getCurrentMediaInfo_=function(e){return e===void 0&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},i.getMediaInfo_=function(e){return e===void 0&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},i.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},i.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,n=this.getCurrentMediaInfo_();if(!e||!n)return!1;var s=n.hasAudio,o=n.hasVideo,l=n.isMuxed;return!(o&&!e.videoTimingInfo||s&&!this.audioDisabled_&&!l&&!e.audioTimingInfo||_S({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.handleData_=function(e,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,e,n));return}var s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),s.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),s.isFmp4=e.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[vS(n.type)].start;else{var o=this.getCurrentMediaInfo_(),l=this.loaderType_==="main"&&o&&o.hasVideo,f;l&&(f=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:l,firstVideoFrameTimeForData:f,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,n.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});var m=this.chooseNextRequest_();if(m.mediaIndex!==s.mediaIndex||m.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,n)}}},i.updateAppendInitSegmentStatus=function(e,n){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[n]!==e.playlist&&(this.appendInitSegment_[n]=!0)},i.getInitSegmentAndUpdateState_=function(e){var n=e.type,s=e.initSegment,o=e.map,l=e.playlist;if(o){var f=th(o);if(this.activeInitSegmentId_===f)return null;s=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=f}return s&&this.appendInitSegment_[n]?(this.playlistOfLastInitSegment_[n]=l,this.appendInitSegment_[n]=!1,this.activeInitSegmentId_=null,s):null},i.handleQuotaExceededError_=function(e,n){var s=this,o=e.segmentInfo,l=e.type,f=e.bytes,m=this.sourceUpdater_.audioBuffered(),v=this.sourceUpdater_.videoBuffered();m.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+no(m).join(", ")),v.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+no(v).join(", "));var y=m.length?m.start(0):0,E=m.length?m.end(m.length-1):0,I=v.length?v.start(0):0,O=v.length?v.end(v.length-1):0;if(E-y<=md&&O-I<=md){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+f.byteLength+", ")+("audio buffer: "+no(m).join(", ")+", ")+("video buffer: "+no(v).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:l,bytes:f}));var D=this.currentTime_(),R=D-md;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+R),this.remove(0,R,function(){s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+md+"s"),s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=F.setTimeout(function(){s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),s.quotaExceededErrorRetryTimeout_=null,s.processCallQueue_()},md*1e3)},!0)},i.handleAppendError_=function(e,n){var s=e.segmentInfo,o=e.type,l=e.bytes;if(n){if(n.code===mS){this.handleQuotaExceededError_({segmentInfo:s,type:o,bytes:l});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error(o+" append of "+l.length+"b failed for segment "+("#"+s.mediaIndex+" in playlist "+s.playlist.id)),this.trigger("appenderror")}},i.appendToSourceBuffer_=function(e){var n=e.segmentInfo,s=e.type,o=e.initSegment,l=e.data,f=e.bytes;if(!f){var m=[l],v=l.byteLength;o&&(m.unshift(o),v+=o.byteLength),f=WR({bytes:v,segments:m})}this.sourceUpdater_.appendBuffer({segmentInfo:n,type:s,bytes:f},this.handleAppendError_.bind(this,{segmentInfo:n,type:s,bytes:f}))},i.handleSegmentTimingInfo_=function(e,n,s){if(!(!this.pendingSegment_||n!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,l=e+"TimingInfo";o[l]||(o[l]={}),o[l].transmuxerPrependedSeconds=s.prependedContentDuration||0,o[l].transmuxedPresentationStart=s.start.presentation,o[l].transmuxedDecodeStart=s.start.decode,o[l].transmuxedPresentationEnd=s.end.presentation,o[l].transmuxedDecodeEnd=s.end.decode,o[l].baseMediaDecodeTime=s.baseMediaDecodeTime}},i.appendData_=function(e,n){var s=n.type,o=n.data;if(!(!o||!o.byteLength)&&!(s==="audio"&&this.audioDisabled_)){var l=this.getInitSegmentAndUpdateState_({type:s,initSegment:n.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:s,initSegment:l,data:o})}},i.loadSegment_=function(e){var n=this;if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var s=Di({},e,{forceTimestampOffset:!0});Di(e,n.generateSegmentInfo_(s)),n.isPendingTimestampOffset_=!1,n.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)},i.updateTransmuxerAndRequestSegment_=function(e){var n=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var s=this.createSimplifiedSegmentObj_(e),o=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),l=this.mediaIndex!==null,f=e.timeline!==this.currentTimeline_&&e.timeline>0,m=o||l&&f;this.logger_("Requesting "+Pu(e)),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=FR({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:m,endedTimelineFn:function(){n.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(y){var E=y.message,I=y.level,O=y.stream;n.logger_(Pu(e)+" logged from transmuxer stream "+O+" as a "+I+": "+E)}})},i.trimBackBuffer_=function(e){var n=nM(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)},i.createSimplifiedSegmentObj_=function(e){var n=e.segment,s=e.part,o={resolvedUri:s?s.resolvedUri:n.resolvedUri,byterange:s?s.byterange:n.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},l=e.playlist.segments[e.mediaIndex-1];if(l&&l.timeline===n.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),n.key){var f=n.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);o.key=this.segmentKey(n.key),o.key.iv=f}return n.map&&(o.map=this.initSegmentForMap(n.map)),o},i.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},i.saveBandwidthRelatedStats_=function(e,n){if(this.pendingSegment_.byteLength=n.bytesReceived,e<sh){this.logger_("Ignoring segment's bandwidth because its duration of "+e+(" is less than the min to record "+sh));return}this.bandwidth=n.bandwidth,this.roundTrip=n.roundTripTime},i.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},i.segmentRequestFinished_=function(e,n,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,n,s));return}if(this.saveTransferStats_(n.stats),!!this.pendingSegment_&&n.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Wn.ABORTED)return;if(this.pause(),e.code===Wn.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,n.stats),o.endOfAllRequests=n.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=JR(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},i.setTimeMapping_=function(e){var n=this.syncController_.mappingForTimeline(e);n!==null&&(this.timeMapping_=n)},i.updateMediaSecondsLoaded_=function(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},i.shouldUpdateTransmuxerTimestampOffset_=function(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()},i.trueSegmentStart_=function(e){var n=e.currentStart,s=e.playlist,o=e.mediaIndex,l=e.firstVideoFrameTimeForData,f=e.currentVideoTimestampOffset,m=e.useVideoTimingInfo,v=e.videoTimingInfo,y=e.audioTimingInfo;if(typeof n<"u")return n;if(!m)return y.start;var E=s.segments[o-1];return o===0||!E||typeof E.start>"u"||E.end!==l+f?l:v.start},i.waitForAppendsToComplete_=function(e){var n=this.getCurrentMediaInfo_(e);if(!n){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var s=n.hasAudio,o=n.hasVideo,l=n.isMuxed,f=this.loaderType_==="main"&&o,m=!this.audioDisabled_&&s&&!l;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}f&&e.waitingOnAppends++,m&&e.waitingOnAppends++,f&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),m&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},i.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())},i.checkForIllegalMediaSwitch=function(e){var n=rM(this.loaderType_,this.getCurrentMediaInfo_(),e);return n?(this.error({message:n,blacklistDuration:1/0}),this.trigger("error"),!0):!1},i.updateSourceBufferTimestampOffset_=function(e){if(!(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")){var n=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),n=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),n=!0),n&&this.trigger("timestampoffset")}},i.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var n=e.videoTimingInfo,s=e.audioTimingInfo,o=e.timingInfo;return this.useDtsForTimestampOffset_?n&&typeof n.transmuxedDecodeStart=="number"?n.transmuxedDecodeStart:s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:o.start:o.start},i.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var n=this.getMediaInfo_(),s=this.loaderType_==="main"&&n&&n.hasVideo,o=s&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;o&&(e.timingInfo.end=typeof o.end=="number"?o.end:o.start+e.duration)},i.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});var n=oM(e,this.sourceType_);if(n&&(n.severity==="warn"?N.log.warn(n.message):this.logger_(n.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+Pu(e));return}this.logger_("Appended "+Pu(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var s=e.segment,o=e.part,l=s.end&&this.currentTime_()-s.end>e.playlist.targetDuration*3,f=o&&o.end&&this.currentTime_()-o.end>e.playlist.partTargetDuration*3;if(l||f){this.logger_("bad "+(l?"segment":"part")+" "+Pu(e)),this.resetEverything();return}var m=this.mediaIndex!==null;m&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},i.recordThroughput_=function(e){if(e.duration<sh){this.logger_("Ignoring segment's throughput because its duration of "+e.duration+(" is less than the min to record "+sh));return}var n=this.throughput.rate,s=Date.now()-e.endOfAllRequests+1,o=Math.floor(e.byteLength/s*8*1e3);this.throughput.rate+=(o-n)/++this.throughput.count},i.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var n=e.segment,s=n.start,o=n.end;if(!(!gS(s)||!gS(o))){pd(s,o,this.segmentMetadataTrack_);var l=F.WebKitDataCue||F.VTTCue,f={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:s,end:o},m=JSON.stringify(f),v=new l(s,o,m);v.value=f,this.segmentMetadataTrack_.addCue(v)}}},t}(N.EventTarget);function Ia(){}var TS=function(t){return typeof t!="string"?t:t.replace(/./,function(i){return i.toUpperCase()})},uM=["video","audio"],tv=function(t,i){var r=i[t+"Buffer"];return r&&r.updating||i.queuePending[t]},lM=function(t,i){for(var r=0;r<i.length;r++){var e=i[r];if(e.type==="mediaSource")return null;if(e.type===t)return r}return null},iv=function a(t,i){if(i.queue.length!==0){var r=0,e=i.queue[r];if(e.type==="mediaSource"){!i.updating()&&i.mediaSource.readyState!=="closed"&&(i.queue.shift(),e.action(i),e.doneFn&&e.doneFn(),a("audio",i),a("video",i));return}if(t!=="mediaSource"&&!(!i.ready()||i.mediaSource.readyState==="closed"||tv(t,i))){if(e.type!==t){if(r=lM(t,i.queue),r===null)return;e=i.queue[r]}if(i.queue.splice(r,1),i.queuePending[t]=e,e.action(t,i),!e.doneFn){i.queuePending[t]=null,a(t,i);return}}}},bS=function(t,i){var r=i[t+"Buffer"],e=TS(t);r&&(r.removeEventListener("updateend",i["on"+e+"UpdateEnd_"]),r.removeEventListener("error",i["on"+e+"Error_"]),i.codecs[t]=null,i[t+"Buffer"]=null)},qn=function(t,i){return t&&i&&Array.prototype.indexOf.call(t.sourceBuffers,i)!==-1},xr={appendBuffer:function(t,i,r){return function(e,n){var s=n[e+"Buffer"];if(qn(n.mediaSource,s)){n.logger_("Appending segment "+i.mediaIndex+"'s "+t.length+" bytes to "+e+"Buffer");try{s.appendBuffer(t)}catch(o){n.logger_("Error with code "+o.code+" "+(o.code===mS?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+i.mediaIndex+" to "+e+"Buffer")),n.queuePending[e]=null,r(o)}}}},remove:function(t,i){return function(r,e){var n=e[r+"Buffer"];if(qn(e.mediaSource,n)){e.logger_("Removing "+t+" to "+i+" from "+r+"Buffer");try{n.remove(t,i)}catch{e.logger_("Remove "+t+" to "+i+" from "+r+"Buffer failed")}}}},timestampOffset:function(t){return function(i,r){var e=r[i+"Buffer"];qn(r.mediaSource,e)&&(r.logger_("Setting "+i+"timestampOffset to "+t),e.timestampOffset=t)}},callback:function(t){return function(i,r){t()}},endOfStream:function(t){return function(i){if(i.mediaSource.readyState==="open"){i.logger_("Calling mediaSource endOfStream("+(t||"")+")");try{i.mediaSource.endOfStream(t)}catch(r){N.log.warn("Failed to call media source endOfStream",r)}}}},duration:function(t){return function(i){i.logger_("Setting mediaSource duration to "+t);try{i.mediaSource.duration=t}catch(r){N.log.warn("Failed to set media source duration",r)}}},abort:function(){return function(t,i){if(i.mediaSource.readyState==="open"){var r=i[t+"Buffer"];if(qn(i.mediaSource,r)){i.logger_("calling abort on "+t+"Buffer");try{r.abort()}catch(e){N.log.warn("Failed to abort on "+t+"Buffer",e)}}}}},addSourceBuffer:function(t,i){return function(r){var e=TS(t),n=pa(i);r.logger_("Adding "+t+"Buffer with codec "+i+" to mediaSource");var s=r.mediaSource.addSourceBuffer(n);s.addEventListener("updateend",r["on"+e+"UpdateEnd_"]),s.addEventListener("error",r["on"+e+"Error_"]),r.codecs[t]=i,r[t+"Buffer"]=s}},removeSourceBuffer:function(t){return function(i){var r=i[t+"Buffer"];if(bS(t,i),!!qn(i.mediaSource,r)){i.logger_("Removing "+t+"Buffer with codec "+i.codecs[t]+" from mediaSource");try{i.mediaSource.removeSourceBuffer(r)}catch(e){N.log.warn("Failed to removeSourceBuffer "+t+"Buffer",e)}}}},changeType:function(t){return function(i,r){var e=r[i+"Buffer"],n=pa(t);qn(r.mediaSource,e)&&r.codecs[i]!==t&&(r.logger_("changing "+i+"Buffer codec from "+r.codecs[i]+" to "+t),e.changeType(n),r.codecs[i]=t)}}},Sr=function(t){var i=t.type,r=t.sourceUpdater,e=t.action,n=t.doneFn,s=t.name;r.queue.push({type:i,action:e,doneFn:n,name:s}),iv(i,r)},xS=function(t,i){return function(r){if(i.queuePending[t]){var e=i.queuePending[t].doneFn;i.queuePending[t]=null,e&&e(i[t+"Error_"])}iv(t,i)}},SS=function(a){Ae(t,a);function t(r){var e;return e=a.call(this)||this,e.mediaSource=r,e.sourceopenListener_=function(){return iv("mediaSource",Ue(e))},e.mediaSource.addEventListener("sourceopen",e.sourceopenListener_),e.logger_=fn("SourceUpdater"),e.audioTimestampOffset_=0,e.videoTimestampOffset_=0,e.queue=[],e.queuePending={audio:null,video:null},e.delayedAudioAppendQueue_=[],e.videoAppendQueued_=!1,e.codecs={},e.onVideoUpdateEnd_=xS("video",Ue(e)),e.onAudioUpdateEnd_=xS("audio",Ue(e)),e.onVideoError_=function(n){e.videoError_=n},e.onAudioError_=function(n){e.audioError_=n},e.createdSourceBuffers_=!1,e.initializedEme_=!1,e.triggeredReady_=!1,e}var i=t.prototype;return i.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},i.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},i.hasInitializedAnyEme=function(){return this.initializedEme_},i.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},i.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},i.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},i.addSourceBuffer=function(e,n){Sr({type:"mediaSource",sourceUpdater:this,action:xr.addSourceBuffer(e,n),name:"addSourceBuffer"})},i.abort=function(e){Sr({type:e,sourceUpdater:this,action:xr.abort(e),name:"abort"})},i.removeSourceBuffer=function(e){if(!this.canRemoveSourceBuffer()){N.log.error("removeSourceBuffer is not supported!");return}Sr({type:"mediaSource",sourceUpdater:this,action:xr.removeSourceBuffer(e),name:"removeSourceBuffer"})},i.canRemoveSourceBuffer=function(){return!N.browser.IE_VERSION&&!N.browser.IS_FIREFOX&&F.MediaSource&&F.MediaSource.prototype&&typeof F.MediaSource.prototype.removeSourceBuffer=="function"},t.canChangeType=function(){return F.SourceBuffer&&F.SourceBuffer.prototype&&typeof F.SourceBuffer.prototype.changeType=="function"},i.canChangeType=function(){return this.constructor.canChangeType()},i.changeType=function(e,n){if(!this.canChangeType()){N.log.error("changeType is not supported!");return}Sr({type:e,sourceUpdater:this,action:xr.changeType(n),name:"changeType"})},i.addOrChangeSourceBuffers=function(e){var n=this;if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(function(s){var o=e[s];if(!n.hasCreatedSourceBuffers())return n.addSourceBuffer(s,o);n.canChangeType()&&n.changeType(s,o)})},i.appendBuffer=function(e,n){var s=this,o=e.segmentInfo,l=e.type,f=e.bytes;if(this.processedAppend_=!0,l==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,n]),this.logger_("delayed audio append of "+f.length+" until video append");return}var m=n;if(Sr({type:l,sourceUpdater:this,action:xr.appendBuffer(f,o||{mediaIndex:-1},m),doneFn:n,name:"appendBuffer"}),l==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var v=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+v.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,v.forEach(function(y){s.appendBuffer.apply(s,y)})}},i.audioBuffered=function(){return qn(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:N.createTimeRange()},i.videoBuffered=function(){return qn(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:N.createTimeRange()},i.buffered=function(){var e=qn(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,n=qn(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return n&&!e?this.audioBuffered():e&&!n?this.videoBuffered():Ak(this.audioBuffered(),this.videoBuffered())},i.setDuration=function(e,n){n===void 0&&(n=Ia),Sr({type:"mediaSource",sourceUpdater:this,action:xr.duration(e),name:"duration",doneFn:n})},i.endOfStream=function(e,n){e===void 0&&(e=null),n===void 0&&(n=Ia),typeof e!="string"&&(e=void 0),Sr({type:"mediaSource",sourceUpdater:this,action:xr.endOfStream(e),name:"endOfStream",doneFn:n})},i.removeAudio=function(e,n,s){if(s===void 0&&(s=Ia),!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}Sr({type:"audio",sourceUpdater:this,action:xr.remove(e,n),doneFn:s,name:"remove"})},i.removeVideo=function(e,n,s){if(s===void 0&&(s=Ia),!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}Sr({type:"video",sourceUpdater:this,action:xr.remove(e,n),doneFn:s,name:"remove"})},i.updating=function(){return!!(tv("audio",this)||tv("video",this))},i.audioTimestampOffset=function(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Sr({type:"audio",sourceUpdater:this,action:xr.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},i.videoTimestampOffset=function(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(Sr({type:"video",sourceUpdater:this,action:xr.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},i.audioQueueCallback=function(e){this.audioBuffer&&Sr({type:"audio",sourceUpdater:this,action:xr.callback(e),name:"callback"})},i.videoQueueCallback=function(e){this.videoBuffer&&Sr({type:"video",sourceUpdater:this,action:xr.callback(e),name:"callback"})},i.dispose=function(){var e=this;this.trigger("dispose"),uM.forEach(function(n){e.abort(n),e.canRemoveSourceBuffer()?e.removeSourceBuffer(n):e[n+"QueueCallback"](function(){return bS(n,e)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(N.EventTarget),ES=function(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))},wS=new Uint8Array(`

`.split("").map(function(a){return a.charCodeAt(0)})),dM=function(a){Ae(t,a);function t(){return a.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return t}(xc(Error)),fM=function(a){Ae(t,a);function t(r,e){var n;return e===void 0&&(e={}),n=a.call(this,r,e)||this,n.mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=r.featuresNativeTextTracks,n.loadVttJs=r.loadVttJs,n.shouldSaveSegmentTimingInfo_=!1,n}var i=t.prototype;return i.createTransmuxer_=function(){return null},i.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return N.createTimeRanges();var e=this.subtitlesTrack_.cues,n=e[0].startTime,s=e[e.length-1].startTime;return N.createTimeRanges([[n,s]])},i.initSegmentForMap=function(e,n){if(n===void 0&&(n=!1),!e)return null;var s=th(e),o=this.initSegments_[s];if(n&&!o&&e.bytes){var l=wS.byteLength+e.bytes.byteLength,f=new Uint8Array(l);f.set(e.bytes),f.set(wS,e.bytes.byteLength),this.initSegments_[s]=o={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:f}}return o||e},i.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.track=function(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},i.remove=function(e,n){pd(e,n,this.subtitlesTrack_)},i.fillBuffer_=function(){var e=this,n=this.chooseNextRequest_();if(n){if(this.syncController_.timestampOffsetForTimeline(n.timeline)===null){var s=function(){e.state="READY",e.paused()||e.monitorBuffer_()};this.syncController_.one("timestampoffset",s),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(n)}},i.timestampOffsetForSegment_=function(){return null},i.chooseNextRequest_=function(){return this.skipEmptySegments_(a.prototype.chooseNextRequest_.call(this))},i.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},i.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},i.segmentRequestFinished_=function(e,n,s){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===Wn.TIMEOUT&&this.handleTimeout_(),e.code===Wn.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,n.stats),n.key&&this.segmentKey(n.key,!0),this.state="APPENDING",this.trigger("appending");var f=l.segment;if(f.map&&(f.map.bytes=n.map.bytes),l.bytes=n.bytes,typeof F.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(function(){return o.segmentRequestFinished_(e,n,s)},function(){return o.stopForError({message:"Error loading vtt.js"})});return}f.requested=!0;try{this.parseVTTCues_(l)}catch(m){this.stopForError({message:m.message});return}if(this.updateTimeMapping_(l,this.syncController_.timelines[l.timeline],this.playlist_),l.cues.length?l.timingInfo={start:l.cues[0].startTime,end:l.cues[l.cues.length-1].endTime}:l.timingInfo={start:l.startOfSegment,end:l.startOfSegment+l.duration},l.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}l.byteLength=l.bytes.byteLength,this.mediaSecondsLoaded+=f.duration,l.cues.forEach(function(m){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new F.VTTCue(m.startTime,m.endTime,m.text):m)}),QR(this.subtitlesTrack_),this.handleAppendsDone_()},i.handleData_=function(){},i.updateTimingInfoEnd_=function(){},i.parseVTTCues_=function(e){var n,s=!1;if(typeof F.WebVTT!="function")throw new dM;typeof F.TextDecoder=="function"?n=new F.TextDecoder("utf8"):(n=F.WebVTT.StringDecoder(),s=!0);var o=new F.WebVTT.Parser(F,F.vttjs,n);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=e.cues.push.bind(e.cues),o.ontimestampmap=function(m){e.timestampmap=m},o.onparsingerror=function(m){N.log.warn("Error encountered when parsing cues: "+m.message)},e.segment.map){var l=e.segment.map.bytes;s&&(l=ES(l)),o.parse(l)}var f=e.bytes;s&&(f=ES(f)),o.parse(f),o.flush()},i.updateTimeMapping_=function(e,n,s){var o=e.segment;if(n){if(!e.cues.length){o.empty=!0;return}var l=e.timestampmap,f=l.MPEGTS/ns.ONE_SECOND_IN_TS-l.LOCAL+n.mapping;if(e.cues.forEach(function(y){y.startTime+=f,y.endTime+=f}),!s.syncInfo){var m=e.cues[0].startTime,v=e.cues[e.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+e.mediaIndex,time:Math.min(m,v-o.duration)}}}},t}(ev),cM=function(t,i){for(var r=t.cues,e=0;e<r.length;e++){var n=r[e];if(i>=n.adStartTime&&i<=n.adEndTime)return n}return null},hM=function(t,i,r){if(r===void 0&&(r=0),!!t.segments)for(var e=r,n,s=0;s<t.segments.length;s++){var o=t.segments[s];if(n||(n=cM(i,e+o.duration/2)),n){if("cueIn"in o){n.endTime=e,n.adEndTime=e,e+=o.duration,n=null;continue}if(e<n.endTime){e+=o.duration;continue}n.endTime+=o.duration}else if("cueOut"in o&&(n=new F.VTTCue(e,e+o.duration,o.cueOut),n.adStartTime=e,n.adEndTime=e+parseFloat(o.cueOut),i.addCue(n)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),f=l[0],m=l[1];n=new F.VTTCue(e,e+o.duration,""),n.adStartTime=e-f,n.adEndTime=n.adStartTime+m,i.addCue(n)}e+=o.duration}},pM=86400,CS=[{name:"VOD",run:function(t,i,r,e,n){if(r!==1/0){var s={time:0,segmentIndex:0,partIndex:null};return s}return null}},{name:"ProgramDateTime",run:function(t,i,r,e,n){if(!Object.keys(t.timelineToDatetimeMappings).length)return null;var s=null,o=null,l=Bg(i);n=n||0;for(var f=0;f<l.length;f++){var m=i.endList||n===0?f:l.length-(f+1),v=l[m],y=v.segment,E=t.timelineToDatetimeMappings[y.timeline];if(!(!E||!y.dateTimeObject)){var I=y.dateTimeObject.getTime()/1e3,O=I+E;if(y.parts&&typeof v.partIndex=="number")for(var D=0;D<v.partIndex;D++)O+=y.parts[D].duration;var R=Math.abs(n-O);if(o!==null&&(R===0||o<R))break;o=R,s={time:O,segmentIndex:v.segmentIndex,partIndex:v.partIndex}}}return s}},{name:"Segment",run:function(t,i,r,e,n){var s=null,o=null;n=n||0;for(var l=Bg(i),f=0;f<l.length;f++){var m=i.endList||n===0?f:l.length-(f+1),v=l[m],y=v.segment,E=v.part&&v.part.start||y&&y.start;if(y.timeline===e&&typeof E<"u"){var I=Math.abs(n-E);if(o!==null&&o<I)break;(!s||o===null||o>=I)&&(o=I,s={time:E,segmentIndex:v.segmentIndex,partIndex:v.partIndex})}}return s}},{name:"Discontinuity",run:function(t,i,r,e,n){var s=null;if(n=n||0,i.discontinuityStarts&&i.discontinuityStarts.length)for(var o=null,l=0;l<i.discontinuityStarts.length;l++){var f=i.discontinuityStarts[l],m=i.discontinuitySequence+l+1,v=t.discontinuities[m];if(v){var y=Math.abs(n-v.time);if(o!==null&&o<y)break;(!s||o===null||o>=y)&&(o=y,s={time:v.time,segmentIndex:f,partIndex:null})}}return s}},{name:"Playlist",run:function(t,i,r,e,n){if(i.syncInfo){var s={time:i.syncInfo.time,segmentIndex:i.syncInfo.mediaSequence-i.mediaSequence,partIndex:null};return s}return null}}],mM=function(a){Ae(t,a);function t(r){var e;return e=a.call(this)||this,e.timelines=[],e.discontinuities=[],e.timelineToDatetimeMappings={},e.logger_=fn("SyncController"),e}var i=t.prototype;return i.getSyncPoint=function(e,n,s,o){var l=this.runStrategies_(e,n,s,o);return l.length?this.selectSyncPoint_(l,{key:"time",value:o}):null},i.getExpiredTime=function(e,n){if(!e||!e.segments)return null;var s=this.runStrategies_(e,n,e.discontinuitySequence,0);if(!s.length)return null;var o=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+fd({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:o.segmentIndex,endIndex:0}))},i.runStrategies_=function(e,n,s,o){for(var l=[],f=0;f<CS.length;f++){var m=CS[f],v=m.run(this,e,n,s,o);v&&(v.strategy=m.name,l.push({strategy:m.name,syncPoint:v}))}return l},i.selectSyncPoint_=function(e,n){for(var s=e[0].syncPoint,o=Math.abs(e[0].syncPoint[n.key]-n.value),l=e[0].strategy,f=1;f<e.length;f++){var m=Math.abs(e[f].syncPoint[n.key]-n.value);m<o&&(o=m,s=e[f].syncPoint,l=e[f].strategy)}return this.logger_("syncPoint for ["+n.key+": "+n.value+"] chosen with strategy"+(" ["+l+"]: [time:"+s.time+",")+(" segmentIndex:"+s.segmentIndex)+(typeof s.partIndex=="number"?",partIndex:"+s.partIndex:"")+"]"),s},i.saveExpiredSegmentInfo=function(e,n){var s=n.mediaSequence-e.mediaSequence;if(s>pM){N.log.warn("Not saving expired segment info. Media sequence gap "+s+" is too large.");return}for(var o=s-1;o>=0;o--){var l=e.segments[o];if(l&&typeof l.start<"u"){n.syncInfo={mediaSequence:e.mediaSequence+o,time:l.start},this.logger_("playlist refresh sync: [time:"+n.syncInfo.time+","+(" mediaSequence: "+n.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},i.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var n=e.segments[0],s=n.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[n.timeline]=-s}},i.saveSegmentTimingInfo=function(e){var n=e.segmentInfo,s=e.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(n,n.timingInfo,s),l=n.segment;o&&(this.saveDiscontinuitySyncInfo_(n),n.playlist.syncInfo||(n.playlist.syncInfo={mediaSequence:n.playlist.mediaSequence+n.mediaIndex,time:l.start}));var f=l.dateTimeObject;l.discontinuity&&s&&f&&(this.timelineToDatetimeMappings[l.timeline]=-(f.getTime()/1e3))},i.timestampOffsetForTimeline=function(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time},i.mappingForTimeline=function(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping},i.calculateSegmentTimeMapping_=function(e,n,s){var o=e.segment,l=e.part,f=this.timelines[e.timeline],m,v;if(typeof e.timestampOffset=="number")f={time:e.startOfSegment,mapping:e.startOfSegment-n.start},s&&(this.timelines[e.timeline]=f,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": "+("[time: "+f.time+"] [mapping: "+f.mapping+"]"))),m=e.startOfSegment,v=n.end+f.mapping;else if(f)m=n.start+f.mapping,v=n.end+f.mapping;else return!1;return l&&(l.start=m,l.end=v),(!o.start||m<o.start)&&(o.start=m),o.end=v,!0},i.saveDiscontinuitySyncInfo_=function(e){var n=e.playlist,s=e.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(n.discontinuityStarts&&n.discontinuityStarts.length)for(var o=0;o<n.discontinuityStarts.length;o++){var l=n.discontinuityStarts[o],f=n.discontinuitySequence+o+1,m=l-e.mediaIndex,v=Math.abs(m);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>v){var y=void 0;m<0?y=s.start-fd({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex,endIndex:l}):y=s.end+fd({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex+1,endIndex:l}),this.discontinuities[f]={time:y,accuracy:v}}}},i.dispose=function(){this.trigger("dispose"),this.off()},t}(N.EventTarget),gM=function(a){Ae(t,a);function t(){var r;return r=a.call(this)||this,r.pendingTimelineChanges_={},r.lastTimelineChanges_={},r}var i=t.prototype;return i.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},i.pendingTimelineChange=function(e){var n=e.type,s=e.from,o=e.to;return typeof s=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[n]={type:n,from:s,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[n]},i.lastTimelineChange=function(e){var n=e.type,s=e.from,o=e.to;return typeof s=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[n]={type:n,from:s,to:o},delete this.pendingTimelineChanges_[n],this.trigger("timelinechange")),this.lastTimelineChanges_[n]},i.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(N.EventTarget),vM=Zx(eS(function(){var a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function t(V,W,te){return te={path:W,exports:{},require:function(q,X){return i(q,X??te.path)}},V(te,te.exports),te.exports}function i(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var r=t(function(V){function W(z,q){for(var X=0;X<q.length;X++){var j=q[X];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(z,j.key,j)}}function te(z,q,X){return q&&W(z.prototype,q),X&&W(z,X),z}V.exports=te,V.exports.default=V.exports,V.exports.__esModule=!0}),e=t(function(V){function W(te,z){return V.exports=W=Object.setPrototypeOf||function(X,j){return X.__proto__=j,X},V.exports.default=V.exports,V.exports.__esModule=!0,W(te,z)}V.exports=W,V.exports.default=V.exports,V.exports.__esModule=!0}),n=t(function(V){function W(te,z){te.prototype=Object.create(z.prototype),te.prototype.constructor=te,e(te,z)}V.exports=W,V.exports.default=V.exports,V.exports.__esModule=!0}),s=function(){function V(){this.listeners={}}var W=V.prototype;return W.on=function(z,q){this.listeners[z]||(this.listeners[z]=[]),this.listeners[z].push(q)},W.off=function(z,q){if(!this.listeners[z])return!1;var X=this.listeners[z].indexOf(q);return this.listeners[z]=this.listeners[z].slice(0),this.listeners[z].splice(X,1),X>-1},W.trigger=function(z){var q=this.listeners[z];if(q)if(arguments.length===2)for(var X=q.length,j=0;j<X;++j)q[j].call(this,arguments[1]);else for(var oe=Array.prototype.slice.call(arguments,1),re=q.length,se=0;se<re;++se)q[se].apply(this,oe)},W.dispose=function(){this.listeners={}},W.pipe=function(z){this.on("data",function(q){z.push(q)})},V}();function o(V){return V.subarray(0,V.byteLength-V[V.byteLength-1])}var l=function(){var W=[[[],[],[],[],[]],[[],[],[],[],[]]],te=W[0],z=W[1],q=te[4],X=z[4],j,oe,re,se=[],he=[],le,pe,ne,fe,Ie,Ce;for(j=0;j<256;j++)he[(se[j]=j<<1^(j>>7)*283)^j]=j;for(oe=re=0;!q[oe];oe^=le||1,re=he[re]||1)for(fe=re^re<<1^re<<2^re<<3^re<<4,fe=fe>>8^fe&255^99,q[oe]=fe,X[fe]=oe,ne=se[pe=se[le=se[oe]]],Ce=ne*16843009^pe*65537^le*257^oe*16843008,Ie=se[fe]*257^fe*16843008,j=0;j<4;j++)te[j][oe]=Ie=Ie<<24^Ie>>>8,z[j][fe]=Ce=Ce<<24^Ce>>>8;for(j=0;j<5;j++)te[j]=te[j].slice(0),z[j]=z[j].slice(0);return W},f=null,m=function(){function V(te){f||(f=l()),this._tables=[[f[0][0].slice(),f[0][1].slice(),f[0][2].slice(),f[0][3].slice(),f[0][4].slice()],[f[1][0].slice(),f[1][1].slice(),f[1][2].slice(),f[1][3].slice(),f[1][4].slice()]];var z,q,X,j=this._tables[0][4],oe=this._tables[1],re=te.length,se=1;if(re!==4&&re!==6&&re!==8)throw new Error("Invalid aes key size");var he=te.slice(0),le=[];for(this._key=[he,le],z=re;z<4*re+28;z++)X=he[z-1],(z%re===0||re===8&&z%re===4)&&(X=j[X>>>24]<<24^j[X>>16&255]<<16^j[X>>8&255]<<8^j[X&255],z%re===0&&(X=X<<8^X>>>24^se<<24,se=se<<1^(se>>7)*283)),he[z]=he[z-re]^X;for(q=0;z;q++,z--)X=he[q&3?z:z-4],z<=4||q<4?le[q]=X:le[q]=oe[0][j[X>>>24]]^oe[1][j[X>>16&255]]^oe[2][j[X>>8&255]]^oe[3][j[X&255]]}var W=V.prototype;return W.decrypt=function(z,q,X,j,oe,re){var se=this._key[1],he=z^se[0],le=j^se[1],pe=X^se[2],ne=q^se[3],fe,Ie,Ce,Xe=se.length/4-2,Be,Qe=4,Et=this._tables[1],bt=Et[0],xt=Et[1],wt=Et[2],Ct=Et[3],ht=Et[4];for(Be=0;Be<Xe;Be++)fe=bt[he>>>24]^xt[le>>16&255]^wt[pe>>8&255]^Ct[ne&255]^se[Qe],Ie=bt[le>>>24]^xt[pe>>16&255]^wt[ne>>8&255]^Ct[he&255]^se[Qe+1],Ce=bt[pe>>>24]^xt[ne>>16&255]^wt[he>>8&255]^Ct[le&255]^se[Qe+2],ne=bt[ne>>>24]^xt[he>>16&255]^wt[le>>8&255]^Ct[pe&255]^se[Qe+3],Qe+=4,he=fe,le=Ie,pe=Ce;for(Be=0;Be<4;Be++)oe[(3&-Be)+re]=ht[he>>>24]<<24^ht[le>>16&255]<<16^ht[pe>>8&255]<<8^ht[ne&255]^se[Qe++],fe=he,he=le,le=pe,pe=ne,ne=fe},V}(),v=function(V){n(W,V);function W(){var z;return z=V.call(this,s)||this,z.jobs=[],z.delay=1,z.timeout_=null,z}var te=W.prototype;return te.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},te.push=function(q){this.jobs.push(q),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},W}(s),y=function(W){return W<<24|(W&65280)<<8|(W&16711680)>>8|W>>>24},E=function(W,te,z){var q=new Int32Array(W.buffer,W.byteOffset,W.byteLength>>2),X=new m(Array.prototype.slice.call(te)),j=new Uint8Array(W.byteLength),oe=new Int32Array(j.buffer),re,se,he,le,pe,ne,fe,Ie,Ce;for(re=z[0],se=z[1],he=z[2],le=z[3],Ce=0;Ce<q.length;Ce+=4)pe=y(q[Ce]),ne=y(q[Ce+1]),fe=y(q[Ce+2]),Ie=y(q[Ce+3]),X.decrypt(pe,ne,fe,Ie,oe,Ce),oe[Ce]=y(oe[Ce]^re),oe[Ce+1]=y(oe[Ce+1]^se),oe[Ce+2]=y(oe[Ce+2]^he),oe[Ce+3]=y(oe[Ce+3]^le),re=pe,se=ne,he=fe,le=Ie;return j},I=function(){function V(te,z,q,X){var j=V.STEP,oe=new Int32Array(te.buffer),re=new Uint8Array(te.byteLength),se=0;for(this.asyncStream_=new v,this.asyncStream_.push(this.decryptChunk_(oe.subarray(se,se+j),z,q,re)),se=j;se<oe.length;se+=j)q=new Uint32Array([y(oe[se-4]),y(oe[se-3]),y(oe[se-2]),y(oe[se-1])]),this.asyncStream_.push(this.decryptChunk_(oe.subarray(se,se+j),z,q,re));this.asyncStream_.push(function(){X(null,o(re))})}var W=V.prototype;return W.decryptChunk_=function(z,q,X,j){return function(){var oe=E(z,q,X);j.set(oe,z.byteOffset)}},r(V,null,[{key:"STEP",get:function(){return 32e3}}]),V}(),O;typeof window<"u"?O=window:typeof a<"u"?O=a:typeof self<"u"?O=self:O={};var D=O,R=function(W){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(W):W&&W.buffer instanceof ArrayBuffer},H=D.BigInt||Number;H("0x1"),H("0x100"),H("0x10000"),H("0x1000000"),H("0x100000000"),H("0x10000000000"),H("0x1000000000000"),H("0x100000000000000"),H("0x10000000000000000");var Z=function(W){var te={};return Object.keys(W).forEach(function(z){var q=W[z];R(q)?te[z]={bytes:q.buffer,byteOffset:q.byteOffset,byteLength:q.byteLength}:te[z]=q}),te};self.onmessage=function(V){var W=V.data,te=new Uint8Array(W.encrypted.bytes,W.encrypted.byteOffset,W.encrypted.byteLength),z=new Uint32Array(W.key.bytes,W.key.byteOffset,W.key.byteLength/4),q=new Uint32Array(W.iv.bytes,W.iv.byteOffset,W.iv.byteLength/4);new I(te,z,q,function(X,j){self.postMessage(Z({source:W.source,decrypted:j}),[j.buffer])})}})),_M=Jx(vM),yM=function(t){var i=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(i="main-desc"),i},oh=function(t,i){t.abort(),t.pause(),i&&i.activePlaylistLoader&&(i.activePlaylistLoader.pause(),i.activePlaylistLoader=null)},rv=function(t,i){i.activePlaylistLoader=t,t.load()},TM=function(t,i){return function(){var r=i.segmentLoaders,e=r[t],n=r.main,s=i.mediaTypes[t],o=s.activeTrack(),l=s.getActiveGroup(),f=s.activePlaylistLoader,m=s.lastGroup_;if(!(l&&m&&l.id===m.id)&&(s.lastGroup_=l,s.lastTrack_=o,oh(e,s),!(!l||l.isMasterPlaylist))){if(!l.playlistLoader){f&&n.resetEverything();return}e.resyncLoader(),rv(l.playlistLoader,s)}}},bM=function(t,i){return function(){var r=i.segmentLoaders[t],e=i.mediaTypes[t];e.lastGroup_=null,r.abort(),r.pause()}},xM=function(t,i){return function(){var r=i.masterPlaylistLoader,e=i.segmentLoaders,n=e[t],s=e.main,o=i.mediaTypes[t],l=o.activeTrack(),f=o.getActiveGroup(),m=o.activePlaylistLoader,v=o.lastTrack_;if(!(v&&l&&v.id===l.id)&&(o.lastGroup_=f,o.lastTrack_=l,oh(n,o),!!f)){if(f.isMasterPlaylist){if(!l||!v||l.id===v.id)return;var y=i.vhs.masterPlaylistController_,E=y.selectPlaylist();if(y.media()===E)return;o.logger_("track change. Switching master audio from "+v.id+" to "+l.id),r.pause(),s.resetEverything(),y.fastQualityChange_(E);return}if(t==="AUDIO"){if(!f.playlistLoader){s.setAudio(!0),s.resetEverything();return}n.setAudio(!0),s.setAudio(!1)}if(m===f.playlistLoader){rv(f.playlistLoader,o);return}n.track&&n.track(l),n.resetEverything(),rv(f.playlistLoader,o)}}},uh={AUDIO:function(t,i){return function(){var r=i.segmentLoaders[t],e=i.mediaTypes[t],n=i.blacklistCurrentPlaylist;oh(r,e);var s=e.activeTrack(),o=e.activeGroup(),l=(o.filter(function(v){return v.default})[0]||o[0]).id,f=e.tracks[l];if(s===f){n({message:"Problem encountered loading the default audio track."});return}N.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var m in e.tracks)e.tracks[m].enabled=e.tracks[m]===f;e.onTrackChanged()}},SUBTITLES:function(t,i){return function(){var r=i.segmentLoaders[t],e=i.mediaTypes[t];N.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),oh(r,e);var n=e.activeTrack();n&&(n.mode="disabled"),e.onTrackChanged()}}},AS={AUDIO:function(t,i,r){if(i){var e=r.tech,n=r.requestOptions,s=r.segmentLoaders[t];i.on("loadedmetadata",function(){var o=i.media();s.playlist(o,n),(!e.paused()||o.endList&&e.preload()!=="none")&&s.load()}),i.on("loadedplaylist",function(){s.playlist(i.media(),n),e.paused()||s.load()}),i.on("error",uh[t](t,r))}},SUBTITLES:function(t,i,r){var e=r.tech,n=r.requestOptions,s=r.segmentLoaders[t],o=r.mediaTypes[t];i.on("loadedmetadata",function(){var l=i.media();s.playlist(l,n),s.track(o.activeTrack()),(!e.paused()||l.endList&&e.preload()!=="none")&&s.load()}),i.on("loadedplaylist",function(){s.playlist(i.media(),n),e.paused()||s.load()}),i.on("error",uh[t](t,r))}},SM={AUDIO:function(t,i){var r=i.vhs,e=i.sourceType,n=i.segmentLoaders[t],s=i.requestOptions,o=i.master.mediaGroups,l=i.mediaTypes[t],f=l.groups,m=l.tracks,v=l.logger_,y=i.masterPlaylistLoader,E=cd(y.master);(!o[t]||Object.keys(o[t]).length===0)&&(o[t]={main:{default:{default:!0}}},E&&(o[t].main.default.playlists=y.master.playlists));for(var I in o[t]){f[I]||(f[I]=[]);for(var O in o[t][I]){var D=o[t][I][O],R=void 0;if(E?(v("AUDIO group '"+I+"' label '"+O+"' is a master playlist"),D.isMasterPlaylist=!0,R=null):e==="vhs-json"&&D.playlists?R=new Au(D.playlists[0],r,s):D.resolvedUri?R=new Au(D.resolvedUri,r,s):D.playlists&&e==="dash"?R=new Xg(D.playlists[0],r,s,y):R=null,D=N.mergeOptions({id:O,playlistLoader:R},D),AS[t](t,D.playlistLoader,i),f[I].push(D),typeof m[O]>"u"){var H=new N.AudioTrack({id:O,kind:yM(D),enabled:!1,language:D.language,default:D.default,label:O});m[O]=H}}}n.on("error",uh[t](t,i))},SUBTITLES:function(t,i){var r=i.tech,e=i.vhs,n=i.sourceType,s=i.segmentLoaders[t],o=i.requestOptions,l=i.master.mediaGroups,f=i.mediaTypes[t],m=f.groups,v=f.tracks,y=i.masterPlaylistLoader;for(var E in l[t]){m[E]||(m[E]=[]);for(var I in l[t][E])if(!l[t][E][I].forced){var O=l[t][E][I],D=void 0;if(n==="hls")D=new Au(O.resolvedUri,e,o);else if(n==="dash"){var R=O.playlists.filter(function(Z){return Z.excludeUntil!==1/0});if(!R.length)return;D=new Xg(O.playlists[0],e,o,y)}else n==="vhs-json"&&(D=new Au(O.playlists?O.playlists[0]:O.resolvedUri,e,o));if(O=N.mergeOptions({id:I,playlistLoader:D},O),AS[t](t,O.playlistLoader,i),m[E].push(O),typeof v[I]>"u"){var H=r.addRemoteTextTrack({id:I,kind:"subtitles",default:O.default&&O.autoselect,language:O.language,label:I},!1).track;v[I]=H}}}s.on("error",uh[t](t,i))},"CLOSED-CAPTIONS":function(t,i){var r=i.tech,e=i.master.mediaGroups,n=i.mediaTypes[t],s=n.groups,o=n.tracks;for(var l in e[t]){s[l]||(s[l]=[]);for(var f in e[t][l]){var m=e[t][l][f];if(/^(?:CC|SERVICE)/.test(m.instreamId)){var v=r.options_.vhs&&r.options_.vhs.captionServices||{},y={label:f,language:m.language,instreamId:m.instreamId,default:m.default&&m.autoselect};if(v[y.instreamId]&&(y=N.mergeOptions(y,v[y.instreamId])),y.default===void 0&&delete y.default,s[l].push(N.mergeOptions({id:f},m)),typeof o[f]>"u"){var E=r.addRemoteTextTrack({id:y.instreamId,kind:"captions",default:y.default,language:y.language,label:y.label},!1).track;o[f]=E}}}}}},EM=function a(t,i){for(var r=0;r<t.length;r++)if(Hg(i,t[r])||t[r].playlists&&a(t[r].playlists,i))return!0;return!1},wM=function(t,i){return function(r){var e=i.masterPlaylistLoader,n=i.mediaTypes[t].groups,s=e.media();if(!s)return null;var o=null;s.attributes[t]&&(o=n[s.attributes[t]]);var l=Object.keys(n);if(!o)if(t==="AUDIO"&&l.length>1&&cd(i.master))for(var f=0;f<l.length;f++){var m=n[l[f]];if(EM(m,s)){o=m;break}}else n.main?o=n.main:l.length===1&&(o=n[l[0]]);return typeof r>"u"?o:r===null||!o?null:o.filter(function(v){return v.id===r.id})[0]||null}},CM={AUDIO:function(t,i){return function(){var r=i.mediaTypes[t].tracks;for(var e in r)if(r[e].enabled)return r[e];return null}},SUBTITLES:function(t,i){return function(){var r=i.mediaTypes[t].tracks;for(var e in r)if(r[e].mode==="showing"||r[e].mode==="hidden")return r[e];return null}}},AM=function(t,i){var r=i.mediaTypes;return function(){var e=r[t].activeTrack();return e?r[t].activeGroup(e):null}},IM=function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(I){SM[I](I,t)});var i=t.mediaTypes,r=t.masterPlaylistLoader,e=t.tech,n=t.vhs,s=t.segmentLoaders,o=s.AUDIO,l=s.main;["AUDIO","SUBTITLES"].forEach(function(I){i[I].activeGroup=wM(I,t),i[I].activeTrack=CM[I](I,t),i[I].onGroupChanged=TM(I,t),i[I].onGroupChanging=bM(I,t),i[I].onTrackChanged=xM(I,t),i[I].getActiveGroup=AM(I,t)});var f=i.AUDIO.activeGroup();if(f){var m=(f.filter(function(I){return I.default})[0]||f[0]).id;i.AUDIO.tracks[m].enabled=!0,i.AUDIO.onGroupChanged(),i.AUDIO.onTrackChanged();var v=i.AUDIO.getActiveGroup();v.playlistLoader?(l.setAudio(!1),o.setAudio(!0)):l.setAudio(!0)}r.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(I){return i[I].onGroupChanged()})}),r.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(I){return i[I].onGroupChanging()})});var y=function(){i.AUDIO.onTrackChanged(),e.trigger({type:"usage",name:"vhs-audio-change"}),e.trigger({type:"usage",name:"hls-audio-change"})};e.audioTracks().addEventListener("change",y),e.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged),n.on("dispose",function(){e.audioTracks().removeEventListener("change",y),e.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)}),e.clearTracks("audio");for(var E in i.AUDIO.tracks)e.audioTracks().addTrack(i.AUDIO.tracks[E])},PM=function(){var t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(i){t[i]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Ia,activeTrack:Ia,getActiveGroup:Ia,onGroupChanged:Ia,onTrackChanged:Ia,lastTrack_:null,logger_:fn("MediaGroups["+i+"]")}}),t},OM=60*2,Pa,DM=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],LM=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},kM=function(t){var i=t.currentPlaylist,r=t.buffered,e=t.currentTime,n=t.nextPlaylist,s=t.bufferLowWaterLine,o=t.bufferHighWaterLine,l=t.duration,f=t.experimentalBufferBasedABR,m=t.log;if(!n)return N.log.warn("We received no playlist to switch to. Please check your stream."),!1;var v="allowing switch "+(i&&i.id||"null")+" -> "+n.id;if(!i)return m(v+" as current playlist is not set"),!0;if(n.id===i.id)return!1;var y=Boolean(wu(r,e).length);if(!i.endList)return!y&&typeof i.partTargetDuration=="number"?(m("not "+v+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(m(v+" as current playlist is live"),!0);var E=Ng(r,e),I=f?pi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:pi.MAX_BUFFER_LOW_WATER_LINE;if(l<I)return m(v+" as duration < max low water line ("+l+" < "+I+")"),!0;var O=n.attributes.BANDWIDTH,D=i.attributes.BANDWIDTH;if(O<D&&(!f||E<o)){var R=v+" as next bandwidth < current bandwidth ("+O+" < "+D+")";return f&&(R+=" and forwardBuffer < bufferHighWaterLine ("+E+" < "+o+")"),m(R),!0}if((!f||O>D)&&E>=s){var H=v+" as forwardBuffer >= bufferLowWaterLine ("+E+" >= "+s+")";return f&&(H+=" and next bandwidth > current bandwidth ("+O+" > "+D+")"),m(H),!0}return m("not "+v+" as no switching criteria met"),!1},RM=function(a){Ae(t,a);function t(r){var e;e=a.call(this)||this;var n=r.src,s=r.handleManifestRedirects,o=r.withCredentials,l=r.tech,f=r.bandwidth,m=r.externVhs,v=r.useCueTags,y=r.blacklistDuration,E=r.enableLowInitialPlaylist,I=r.sourceType,O=r.cacheEncryptionKeys,D=r.experimentalBufferBasedABR,R=r.experimentalLeastPixelDiffSelector,H=r.captionServices;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");var Z=r.maxPlaylistRetries;(Z===null||typeof Z>"u")&&(Z=1/0),Pa=m,e.experimentalBufferBasedABR=Boolean(D),e.experimentalLeastPixelDiffSelector=Boolean(R),e.withCredentials=o,e.tech_=l,e.vhs_=l.vhs,e.sourceType_=I,e.useCueTags_=v,e.blacklistDuration=y,e.maxPlaylistRetries=Z,e.enableLowInitialPlaylist=E,e.useCueTags_&&(e.cueTagsTrack_=e.tech_.addTextTrack("metadata","ad-cues"),e.cueTagsTrack_.inBandMetadataTrackDispatchType=""),e.requestOptions_={withCredentials:o,handleManifestRedirects:s,maxPlaylistRetries:Z,timeout:null},e.on("error",e.pauseLoading),e.mediaTypes_=PM(),e.mediaSource=new F.MediaSource,e.handleDurationChange_=e.handleDurationChange_.bind(Ue(e)),e.handleSourceOpen_=e.handleSourceOpen_.bind(Ue(e)),e.handleSourceEnded_=e.handleSourceEnded_.bind(Ue(e)),e.mediaSource.addEventListener("durationchange",e.handleDurationChange_),e.mediaSource.addEventListener("sourceopen",e.handleSourceOpen_),e.mediaSource.addEventListener("sourceended",e.handleSourceEnded_),e.seekable_=N.createTimeRanges(),e.hasPlayed_=!1,e.syncController_=new mM(r),e.segmentMetadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,e.decrypter_=new _M,e.sourceUpdater_=new SS(e.mediaSource),e.inbandTextTracks_={},e.timelineChangeController_=new gM;var V={vhs:e.vhs_,parse708captions:r.parse708captions,useDtsForTimestampOffset:r.useDtsForTimestampOffset,captionServices:H,mediaSource:e.mediaSource,currentTime:e.tech_.currentTime.bind(e.tech_),seekable:function(){return e.seekable()},seeking:function(){return e.tech_.seeking()},duration:function(){return e.duration()},hasPlayed:function(){return e.hasPlayed_},goalBufferLength:function(){return e.goalBufferLength()},bandwidth:f,syncController:e.syncController_,decrypter:e.decrypter_,sourceType:e.sourceType_,inbandTextTracks:e.inbandTextTracks_,cacheEncryptionKeys:O,sourceUpdater:e.sourceUpdater_,timelineChangeController:e.timelineChangeController_,experimentalExactManifestTimings:r.experimentalExactManifestTimings};e.masterPlaylistLoader_=e.sourceType_==="dash"?new Xg(n,e.vhs_,e.requestOptions_):new Au(n,e.vhs_,e.requestOptions_),e.setupMasterPlaylistLoaderListeners_(),e.mainSegmentLoader_=new ev(N.mergeOptions(V,{segmentMetadataTrack:e.segmentMetadataTrack_,loaderType:"main"}),r),e.audioSegmentLoader_=new ev(N.mergeOptions(V,{loaderType:"audio"}),r),e.subtitleSegmentLoader_=new fM(N.mergeOptions(V,{loaderType:"vtt",featuresNativeTextTracks:e.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(z,q){function X(){l.off("vttjserror",j),z()}function j(){l.off("vttjsloaded",X),q()}l.one("vttjsloaded",X),l.one("vttjserror",j),l.addWebVttScript_()})}}),r),e.setupSegmentLoaderListeners_(),e.experimentalBufferBasedABR&&(e.masterPlaylistLoader_.one("loadedplaylist",function(){return e.startABRTimer_()}),e.tech_.on("pause",function(){return e.stopABRTimer_()}),e.tech_.on("play",function(){return e.startABRTimer_()})),DM.forEach(function(te){e[te+"_"]=LM.bind(Ue(e),te)}),e.logger_=fn("MPC"),e.triggeredFmp4Usage=!1,e.tech_.preload()==="none"?(e.loadOnPlay_=function(){e.loadOnPlay_=null,e.masterPlaylistLoader_.load()},e.tech_.one("play",e.loadOnPlay_)):e.masterPlaylistLoader_.load(),e.timeToLoadedData__=-1,e.mainAppendsToLoadedData__=-1,e.audioAppendsToLoadedData__=-1;var W=e.tech_.preload()==="none"?"play":"loadstart";return e.tech_.one(W,function(){var te=Date.now();e.tech_.one("loadeddata",function(){e.timeToLoadedData__=Date.now()-te,e.mainAppendsToLoadedData__=e.mainSegmentLoader_.mediaAppends,e.audioAppendsToLoadedData__=e.audioSegmentLoader_.mediaAppends})}),e}var i=t.prototype;return i.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},i.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},i.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),n=this.audioAppendsToLoadedData_();return e===-1||n===-1?-1:e+n},i.timeToLoadedData_=function(){return this.timeToLoadedData__},i.checkABR_=function(e){e===void 0&&(e="abr");var n=this.selectPlaylist();n&&this.shouldSwitchToMedia_(n)&&this.switchMedia_(n,e)},i.switchMedia_=function(e,n,s){var o=this.media(),l=o&&(o.id||o.uri),f=e.id||e.uri;l&&l!==f&&(this.logger_("switch media "+l+" -> "+f+" from "+n),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+n})),this.masterPlaylistLoader_.media(e,s)},i.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=F.setInterval(function(){return e.checkABR_()},250)},i.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(F.clearInterval(this.abrTimer_),this.abrTimer_=null)},i.getAudioTrackPlaylists_=function(){var e=this.master(),n=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return n;var s=e.mediaGroups.AUDIO,o=Object.keys(s),l;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)l=this.mediaTypes_.AUDIO.activeTrack();else{var f=s.main||o.length&&s[o[0]];for(var m in f)if(f[m].default){l={label:m};break}}if(!l)return n;var v=[];for(var y in s)if(s[y][l.label]){var E=s[y][l.label];if(E.playlists&&E.playlists.length)v.push.apply(v,E.playlists);else if(E.uri)v.push(E);else if(e.playlists.length)for(var I=0;I<e.playlists.length;I++){var O=e.playlists[I];O.attributes&&O.attributes.AUDIO&&O.attributes.AUDIO===y&&v.push(O)}}return v.length?v:n},i.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var n=e.masterPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;Vg(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=s,n.endList&&e.tech_.preload()!=="none"&&(e.mainSegmentLoader_.playlist(n,e.requestOptions_),e.mainSegmentLoader_.load()),IM({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),n),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){e.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var n=e.masterPlaylistLoader_.media();if(!n){e.excludeUnsupportedVariants_();var s;if(e.enableLowInitialPlaylist&&(s=e.selectInitialPlaylist()),s||(s=e.selectPlaylist()),!s||!e.shouldSwitchToMedia_(s))return;e.initialMedia_=s,e.switchMedia_(e.initialMedia_,"initial");var o=e.sourceType_==="vhs-json"&&e.initialMedia_.segments;if(!o)return;n=e.initialMedia_}e.handleUpdatedMediaPlaylist(n)}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var n=e.masterPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;Vg(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=s,e.masterPlaylistLoader_.load(),e.mainSegmentLoader_.playlist(n,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var n=e.masterPlaylistLoader_.media();if(n.lastExcludeReason_!=="playlist-unchanged"){var s=e.stuckAtPlaylistEnd_(n);s&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},i.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},i.triggerPresenceUsage_=function(e,n){var s=e.mediaGroups||{},o=!0,l=Object.keys(s.AUDIO);for(var f in s.AUDIO)for(var m in s.AUDIO[f]){var v=s.AUDIO[f][m];v.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(s.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Pa.Playlist.isAes(n)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),l.length&&Object.keys(s.AUDIO[l[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},i.shouldSwitchToMedia_=function(e){var n=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),o=this.bufferLowWaterLine(),l=this.bufferHighWaterLine(),f=this.tech_.buffered();return kM({buffered:f,currentTime:s,currentPlaylist:n,nextPlaylist:e,bufferLowWaterLine:o,bufferHighWaterLine:l,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},i.setupSegmentLoaderListeners_=function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){e.checkABR_("bandwidthupdate"),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){e.experimentalBufferBasedABR&&e.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){e.logger_("main segment loader ended"),e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(s){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},OM))});var n=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var o=e.getCodecsOrExclude_();o&&e.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",n),this.audioSegmentLoader_.on("trackinfo",n),this.mainSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()})},i.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},i.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},i.smoothQualityChange_=function(e){e===void 0&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},i.fastQualityChange_=function(e){var n=this;if(e===void 0&&(e=this.selectPlaylist()),e===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){N.browser.IE_VERSION||N.browser.IS_EDGE?n.tech_.setCurrentTime(n.tech_.currentTime()+.04):n.tech_.setCurrentTime(n.tech_.currentTime())})},i.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}},i.setupFirstPlay=function(){var e=this,n=this.masterPlaylistLoader_.media();if(!n||this.tech_.paused()||this.hasPlayed_)return!1;if(!n.endList){var s=this.seekable();if(!s.length)return!1;if(N.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(s.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=!0,this.load(),!0},i.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,function(n){})}this.trigger("sourceopen")},i.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(!(!e||!e.length)){var n=this.duration();e[e.length-1].endTime=isNaN(n)||Math.abs(n)===1/0?Number.MAX_VALUE:n}}},i.handleDurationChange_=function(){this.tech_.trigger("durationchange")},i.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var n=this.mainSegmentLoader_.getCurrentMediaInfo_();!n||n.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=function(e){var n=this.seekable();if(!n.length)return!1;var s=this.syncController_.getExpiredTime(e,this.duration());if(s===null)return!1;var o=Pa.Playlist.playlistEnd(e,s),l=this.tech_.currentTime(),f=this.tech_.buffered();if(!f.length)return o-l<=$n;var m=f.end(f.length-1);return m-l<=$n&&o-m<=$n},i.blacklistCurrentPlaylist=function(e,n){e===void 0&&(e={});var s=e.playlist||this.masterPlaylistLoader_.media();if(n=n||e.blacklistDuration||this.blacklistDuration,!s){this.error=e,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}s.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,l=o.filter(Zc),f=l.length===1&&l[0]===s;if(o.length===1&&n!==1/0)return N.log.warn("Problem encountered with playlist "+s.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(f);if(f){var m=!1;o.forEach(function(R){if(R!==s){var H=R.excludeUntil;typeof H<"u"&&H!==1/0&&(m=!0,delete R.excludeUntil)}}),m&&(N.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var v;s.playlistErrors_>this.maxPlaylistRetries?v=1/0:v=Date.now()+n*1e3,s.excludeUntil=v,e.reason&&(s.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var y=this.selectPlaylist();if(!y){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var E=e.internal?this.logger_:N.log.warn,I=e.message?" "+e.message:"";E((e.internal?"Internal problem":"Problem")+" encountered with playlist "+s.id+"."+(I+" Switching to playlist "+y.id+".")),y.attributes.AUDIO!==s.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),y.attributes.SUBTITLES!==s.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var O=y.targetDuration/2*1e3||5*1e3,D=typeof y.lastRequest=="number"&&Date.now()-y.lastRequest<=O;return this.switchMedia_(y,"exclude",f||D)},i.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},i.delegateLoaders_=function(e,n){var s=this,o=[],l=e==="all";(l||e==="main")&&o.push(this.masterPlaylistLoader_);var f=[];(l||e==="audio")&&f.push("AUDIO"),(l||e==="subtitle")&&(f.push("CLOSED-CAPTIONS"),f.push("SUBTITLES")),f.forEach(function(m){var v=s.mediaTypes_[m]&&s.mediaTypes_[m].activePlaylistLoader;v&&o.push(v)}),["main","audio","subtitle"].forEach(function(m){var v=s[m+"SegmentLoader_"];v&&(e===m||e==="all")&&o.push(v)}),o.forEach(function(m){return n.forEach(function(v){typeof m[v]=="function"&&m[v]()})})},i.setCurrentTime=function(e){var n=wu(this.tech_.buffered(),e);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(n&&n.length)return e;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},i.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Pa.Playlist.duration(e):1/0:0},i.seekable=function(){return this.seekable_},i.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var s=this.syncController_.getExpiredTime(n,this.duration());if(s!==null){var o=this.masterPlaylistLoader_.master,l=Pa.Playlist.seekable(n,s,Pa.Playlist.liveEdgeDelay(o,n));if(l.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),s=this.syncController_.getExpiredTime(n,this.duration()),s===null||(e=Pa.Playlist.seekable(n,s,Pa.Playlist.liveEdgeDelay(o,n)),e.length===0)))){var f,m;this.seekable_&&this.seekable_.length&&(f=this.seekable_.end(0),m=this.seekable_.start(0)),e?e.start(0)>l.end(0)||l.start(0)>e.end(0)?this.seekable_=l:this.seekable_=N.createTimeRanges([[e.start(0)>l.start(0)?e.start(0):l.start(0),e.end(0)<l.end(0)?e.end(0):l.end(0)]]):this.seekable_=l,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===f&&this.seekable_.start(0)===m)&&(this.logger_("seekable updated ["+wx(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},i.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){var n=this.seekable();if(!n.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1));return}var s=this.tech_.buffered(),o=Pa.Playlist.duration(this.masterPlaylistLoader_.media());s.length>0&&(o=Math.max(o,s.end(s.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},i.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(n){var s=e.mediaTypes_[n].groups;for(var o in s)s[o].forEach(function(l){l.playlistLoader&&l.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},i.master=function(){return this.masterPlaylistLoader_.master},i.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},i.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,n=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!n||!s)},i.getCodecsOrExclude_=function(){var e=this,n={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},s=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();n.video=n.main;var o=hd(this.master(),s),l={},f=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(n.main.hasVideo&&(l.video=o.video||n.main.videoCodec||Ey),n.main.isMuxed&&(l.video+=","+(o.audio||n.main.audioCodec||sc)),(n.main.hasAudio&&!n.main.isMuxed||n.audio.hasAudio||f)&&(l.audio=o.audio||n.main.audioCodec||n.audio.audioCodec||sc,n.audio.isFmp4=n.main.hasAudio&&!n.main.isMuxed?n.main.isFmp4:n.audio.isFmp4),!l.audio&&!l.video){this.blacklistCurrentPlaylist({playlist:s,message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var m=function(R,H){return R?ts(H):Ko(H)},v={},y;if(["video","audio"].forEach(function(D){if(l.hasOwnProperty(D)&&!m(n[D].isFmp4,l[D])){var R=n[D].isFmp4?"browser":"muxer";v[R]=v[R]||[],v[R].push(l[D]),D==="audio"&&(y=R)}}),f&&y&&s.attributes.AUDIO){var E=s.attributes.AUDIO;this.master().playlists.forEach(function(D){var R=D.attributes&&D.attributes.AUDIO;R===E&&D!==s&&(D.excludeUntil=1/0)}),this.logger_("excluding audio group "+E+" as "+y+' does not support codec(s): "'+l.audio+'"')}if(Object.keys(v).length){var I=Object.keys(v).reduce(function(D,R){return D&&(D+=", "),D+=R+' does not support codec(s): "'+v[R].join(",")+'"',D},"")+".";this.blacklistCurrentPlaylist({playlist:s,internal:!0,message:I,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var O=[];if(["video","audio"].forEach(function(D){var R=(oi(e.sourceUpdater_.codecs[D]||"")[0]||{}).type,H=(oi(l[D]||"")[0]||{}).type;R&&H&&R.toLowerCase()!==H.toLowerCase()&&O.push('"'+e.sourceUpdater_.codecs[D]+'" -> "'+l[D]+'"')}),O.length){this.blacklistCurrentPlaylist({playlist:s,message:"Codec switching not supported: "+O.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return l},i.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var n=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(n)}}},i.excludeUnsupportedVariants_=function(){var e=this,n=this.master().playlists,s=[];Object.keys(n).forEach(function(o){var l=n[o];if(s.indexOf(l.id)===-1){s.push(l.id);var f=hd(e.master,l),m=[];f.audio&&!Ko(f.audio)&&!ts(f.audio)&&m.push("audio codec "+f.audio),f.video&&!Ko(f.video)&&!ts(f.video)&&m.push("video codec "+f.video),f.text&&f.text==="stpp.ttml.im1t"&&m.push("text codec "+f.text),m.length&&(l.excludeUntil=1/0,e.logger_("excluding "+l.id+" for unsupported: "+m.join(", ")))}})},i.excludeIncompatibleVariants_=function(e){var n=this,s=[],o=this.master().playlists,l=rh(oi(e)),f=fS(l),m=l.video&&oi(l.video)[0]||null,v=l.audio&&oi(l.audio)[0]||null;Object.keys(o).forEach(function(y){var E=o[y];if(!(s.indexOf(E.id)!==-1||E.excludeUntil===1/0)){s.push(E.id);var I=[],O=hd(n.masterPlaylistLoader_.master,E),D=fS(O);if(!(!O.audio&&!O.video)){if(D!==f&&I.push('codec count "'+D+'" !== "'+f+'"'),!n.sourceUpdater_.canChangeType()){var R=O.video&&oi(O.video)[0]||null,H=O.audio&&oi(O.audio)[0]||null;R&&m&&R.type.toLowerCase()!==m.type.toLowerCase()&&I.push('video codec "'+R.type+'" !== "'+m.type+'"'),H&&v&&H.type.toLowerCase()!==v.type.toLowerCase()&&I.push('audio codec "'+H.type+'" !== "'+v.type+'"')}I.length&&(E.excludeUntil=1/0,n.logger_("blacklisting "+E.id+": "+I.join(" && ")))}}})},i.updateAdCues_=function(e){var n=0,s=this.seekable();s.length&&(n=s.start(0)),hM(e,this.cueTagsTrack_,n)},i.goalBufferLength=function(){var e=this.tech_.currentTime(),n=pi.GOAL_BUFFER_LENGTH,s=pi.GOAL_BUFFER_LENGTH_RATE,o=Math.max(n,pi.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+e*s,o)},i.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),n=pi.BUFFER_LOW_WATER_LINE,s=pi.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(n,pi.MAX_BUFFER_LOW_WATER_LINE),l=Math.max(n,pi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+e*s,this.experimentalBufferBasedABR?l:o)},i.bufferHighWaterLine=function(){return pi.BUFFER_HIGH_WATER_LINE},t}(N.EventTarget),MM=function(t,i,r){return function(e){var n=t.master.playlists[i],s=jg(n),o=Zc(n);return typeof e>"u"?o:(e?delete n.disabled:n.disabled=!0,e!==o&&!s&&(r(),e?t.trigger("renditionenabled"):t.trigger("renditiondisabled")),e)}},FM=function(t,i,r){var e=t.masterPlaylistController_,n=t.options_.smoothQualityChange,s=n?"smooth":"fast",o=e[s+"QualityChange_"].bind(e);if(i.attributes){var l=i.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=i.attributes.BANDWIDTH,this.frameRate=i.attributes["FRAME-RATE"]}this.codecs=hd(e.master(),i),this.playlist=i,this.id=r,this.enabled=MM(t.playlists,i.id,o)},NM=function(t){t.representations=function(){var i=t.masterPlaylistController_.master(),r=cd(i)?t.masterPlaylistController_.getAudioTrackPlaylists_():i.playlists;return r?r.filter(function(e){return!jg(e)}).map(function(e,n){return new FM(t,e,e.id)}):[]}},IS=["seeking","seeked","pause","playing","error"],UM=function(){function a(i){var r=this;this.masterPlaylistController_=i.masterPlaylistController,this.tech_=i.tech,this.seekable=i.seekable,this.allowSeeksWithinUnsafeLiveWindow=i.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=i.liveRangeSafeTimeDelta,this.media=i.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=fn("PlaybackWatcher"),this.logger_("initialize");var e=function(){return r.monitorCurrentTime_()},n=function(){return r.monitorCurrentTime_()},s=function(){return r.techWaiting_()},o=function(){return r.cancelTimer_()},l=this.masterPlaylistController_,f=["main","subtitle","audio"],m={};f.forEach(function(y){m[y]={reset:function(){return r.resetSegmentDownloads_(y)},updateend:function(){return r.checkSegmentDownloads_(y)}},l[y+"SegmentLoader_"].on("appendsdone",m[y].updateend),l[y+"SegmentLoader_"].on("playlistupdate",m[y].reset),r.tech_.on(["seeked","seeking"],m[y].reset)});var v=function(E){["main","audio"].forEach(function(I){l[I+"SegmentLoader_"][E]("appended",r.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){r.fixesBadSeeks_()&&(r.consecutiveUpdates=0,r.lastRecordedTime=r.tech_.currentTime(),v("off"))},this.clearSeekingAppendCheck_=function(){return v("off")},this.watchForBadSeeking_=function(){r.clearSeekingAppendCheck_(),v("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(IS,o),this.tech_.on("canplay",n),this.tech_.one("play",e),this.dispose=function(){r.clearSeekingAppendCheck_(),r.logger_("dispose"),r.tech_.off("waiting",s),r.tech_.off(IS,o),r.tech_.off("canplay",n),r.tech_.off("play",e),r.tech_.off("seeking",r.watchForBadSeeking_),r.tech_.off("seeked",r.clearSeekingAppendCheck_),f.forEach(function(y){l[y+"SegmentLoader_"].off("appendsdone",m[y].updateend),l[y+"SegmentLoader_"].off("playlistupdate",m[y].reset),r.tech_.off(["seeked","seeking"],m[y].reset)}),r.checkCurrentTimeTimeout_&&F.clearTimeout(r.checkCurrentTimeTimeout_),r.cancelTimer_()}}var t=a.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&F.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=F.setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(r){var e=this.masterPlaylistController_[r+"SegmentLoader_"];this[r+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+r+" loader"),this[r+"StalledDownloads_"]=0,this[r+"Buffered_"]=e.buffered_()},t.checkSegmentDownloads_=function(r){var e=this.masterPlaylistController_,n=e[r+"SegmentLoader_"],s=n.buffered_(),o=Pk(this[r+"Buffered_"],s);if(this[r+"Buffered_"]=s,o){this.resetSegmentDownloads_(r);return}this[r+"StalledDownloads_"]++,this.logger_("found #"+this[r+"StalledDownloads_"]+" "+r+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:no(s)}),!(this[r+"StalledDownloads_"]<10)&&(this.logger_(r+" loader stalled download exclusion"),this.resetSegmentDownloads_(r),this.tech_.trigger({type:"usage",name:"vhs-"+r+"-download-exclusion"}),r!=="subtitle"&&e.blacklistCurrentPlaylist({message:"Excessive "+r+" segment downloading detected."},1/0))},t.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var r=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===r&&(!e.length||r+$n>=e.end(e.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&r===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):r===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=r)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){var r=this.tech_.seeking();if(!r)return!1;var e=this.seekable(),n=this.tech_.currentTime(),s=this.afterSeekableWindow_(e,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(s){var l=e.end(e.length-1);o=l}if(this.beforeSeekableWindow_(e,n)){var f=e.start(0);o=f+(f===e.end(0)?0:$n)}if(typeof o<"u")return this.logger_("Trying to seek outside of seekable at time "+n+" with "+("seekable range "+wx(e)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var m=this.masterPlaylistController_.sourceUpdater_,v=this.tech_.buffered(),y=m.audioBuffer?m.audioBuffered():null,E=m.videoBuffer?m.videoBuffered():null,I=this.media(),O=I.partTargetDuration?I.partTargetDuration:(I.targetDuration-os)*2,D=[y,E],R=0;R<D.length;R++)if(D[R]){var H=Ng(D[R],n);if(H<O)return!1}var Z=Jc(v,n);return Z.length===0?!1:(o=Z.start(0)+$n,this.logger_("Buffered region starts ("+Z.start(0)+") "+(" just beyond seek point ("+n+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},t.waiting_=function(){if(!this.techWaiting_()){var r=this.tech_.currentTime(),e=this.tech_.buffered(),n=wu(e,r);if(n.length&&r+3<=n.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(r),this.logger_("Stopped at "+r+" while inside a buffered region "+("["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},t.techWaiting_=function(){var r=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(r,e)){var n=r.end(r.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to "+("live point (seekable end) "+n)),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var s=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),l=this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:e});if(l)return this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var f=Jc(o,e);if(f.length>0){var m=f.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+m+", seeking "+("to "+f.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),m*1e3,e),!0}return!1},t.afterSeekableWindow_=function(r,e,n,s){if(s===void 0&&(s=!1),!r.length)return!1;var o=r.end(r.length-1)+$n,l=!n.endList;return l&&s&&(o=r.end(r.length-1)+n.targetDuration*3),e>o},t.beforeSeekableWindow_=function(r,e){return!!(r.length&&r.start(0)>0&&e<r.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(r){var e=r.videoBuffered,n=r.audioBuffered,s=r.currentTime;if(e){var o;if(e.length&&n.length){var l=wu(e,s-3),f=wu(e,s),m=wu(n,s);m.length&&!f.length&&l.length&&(o={start:l.end(0),end:m.end(0)})}else{var v=Jc(e,s);v.length||(o=this.gapFromVideoUnderflow_(e,s))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+s)),!0):!1}},t.skipTheGap_=function(r){var e=this.tech_.buffered(),n=this.tech_.currentTime(),s=Jc(e,n);this.cancelTimer_(),!(s.length===0||n!==r)&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",r,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+os),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(r,e){for(var n=Ck(r),s=0;s<n.length;s++){var o=n.start(s),l=n.end(s);if(e-o<4&&e-o>2)return{start:o,end:l}}return null},a}(),BM={errorInterval:30,getSource:function(t){var i=this.tech({IWillNotUseThisInPlugins:!0}),r=i.currentSource_||this.currentSource();return t(r)}},jM=function a(t,i){var r=0,e=0,n=N.mergeOptions(BM,i);t.ready(function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){e&&t.currentTime(e)},o=function(y){y!=null&&(e=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(y),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},l=function(){if(Date.now()-r<n.errorInterval*1e3){t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),t.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!n.getSource||typeof n.getSource!="function"){N.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return r=Date.now(),n.getSource.call(t,o)},f=function v(){t.off("loadedmetadata",s),t.off("error",l),t.off("dispose",v)},m=function(y){f(),a(t,y)};t.on("error",l),t.on("dispose",f),t.reloadSourceOnError=m},VM=function(t){jM(this,t)},PS="2.16.2",HM="6.0.1",$M="0.22.1",WM="4.8.0",qM="3.1.3",xi={PlaylistLoader:Au,Playlist:or,utils:eR,STANDARD_PLAYLIST_SELECTOR:pS,INITIAL_PLAYLIST_SELECTOR:$R,lastBandwidthSelector:pS,movingAverageBandwidthSelector:VR,comparePlaylistBandwidth:Zg,comparePlaylistResolution:jR,xhr:$x()};Object.keys(pi).forEach(function(a){Object.defineProperty(xi,a,{get:function(){return N.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),pi[a]},set:function(i){if(N.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),typeof i!="number"||i<0){N.log.warn("value of Vhs."+a+" must be greater than or equal to 0");return}pi[a]=i}})});var OS="videojs-vhs",DS=function(t,i){for(var r=i.media(),e=-1,n=0;n<t.length;n++)if(t[n].id===r.id){e=n;break}t.selectedIndex_=e,t.trigger({selectedIndex:e,type:"change"})},GM=function(t,i){i.representations().forEach(function(r){t.addQualityLevel(r)}),DS(t,i.playlists)};xi.canPlaySource=function(){return N.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var zM=function(t,i,r){if(!t)return t;var e={};i&&i.attributes&&i.attributes.CODECS&&(e=rh(oi(i.attributes.CODECS))),r&&r.attributes&&r.attributes.CODECS&&(e.audio=r.attributes.CODECS);var n=pa(e.video),s=pa(e.audio),o={};for(var l in t)o[l]={},s&&(o[l].audioContentType=s),n&&(o[l].videoContentType=n),i.contentProtection&&i.contentProtection[l]&&i.contentProtection[l].pssh&&(o[l].pssh=i.contentProtection[l].pssh),typeof t[l]=="string"&&(o[l].url=t[l]);return N.mergeOptions(t,o)},KM=function(t,i){return t.reduce(function(r,e){if(!e.contentProtection)return r;var n=i.reduce(function(s,o){var l=e.contentProtection[o];return l&&l.pssh&&(s[o]={pssh:l.pssh}),s},{});return Object.keys(n).length&&r.push(n),r},[])},XM=function(t){var i=t.player,r=t.sourceKeySystems,e=t.audioMedia,n=t.mainPlaylists;if(!i.eme.initializeMediaKeys)return Promise.resolve();var s=e?n.concat([e]):n,o=KM(s,Object.keys(r)),l=[],f=[];return o.forEach(function(m){f.push(new Promise(function(v,y){i.tech_.one("keysessioncreated",v)})),l.push(new Promise(function(v,y){i.eme.initializeMediaKeys({keySystems:m},function(E){if(E){y(E);return}v()})}))}),Promise.race([Promise.all(l),Promise.race(f)])},QM=function(t){var i=t.player,r=t.sourceKeySystems,e=t.media,n=t.audioMedia,s=zM(r,e,n);return s?(i.currentSource().keySystems=s,s&&!i.eme?(N.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},LS=function(){if(!F.localStorage)return null;var t=F.localStorage.getItem(OS);if(!t)return null;try{return JSON.parse(t)}catch{return null}},YM=function(t){if(!F.localStorage)return!1;var i=LS();i=i?N.mergeOptions(i,t):t;try{F.localStorage.setItem(OS,JSON.stringify(i))}catch{return!1}return i},JM=function(t){return t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(t.substring(t.indexOf(",")+1)):t};xi.supportsNativeHls=function(){if(!Se||!Se.createElement)return!1;var a=Se.createElement("video");if(!N.getTech("Html5").isSupported())return!1;var t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return t.some(function(i){return/maybe|probably/i.test(a.canPlayType(i))})}(),xi.supportsNativeDash=function(){return!Se||!Se.createElement||!N.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Se.createElement("video").canPlayType("application/dash+xml"))}(),xi.supportsTypeNatively=function(a){return a==="hls"?xi.supportsNativeHls:a==="dash"?xi.supportsNativeDash:!1},xi.isSupported=function(){return N.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var ZM=N.getComponent("Component"),nv=function(a){Ae(t,a);function t(r,e,n){var s;if(s=a.call(this,e,N.mergeOptions(n.hls,n.vhs))||this,n.hls&&Object.keys(n.hls).length&&N.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof n.initialBandwidth=="number"&&(s.options_.bandwidth=n.initialBandwidth),s.logger_=fn("VhsHandler"),e.options_&&e.options_.playerId){var o=N(e.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return N.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"hls-player-access"}),Ue(s)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return N.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"vhs-player-access"}),Ue(s)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return N.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Ue(s)},configurable:!0}),s.player_=o}if(s.tech_=e,s.source_=r,s.stats={},s.ignoreNextSeekingEvent_=!1,s.setOptions_(),s.options_.overrideNative&&e.overrideNativeAudioTracks&&e.overrideNativeVideoTracks)e.overrideNativeAudioTracks(!0),e.overrideNativeVideoTracks(!0);else if(s.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(Se,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(l){var f=Se.fullscreenElement||Se.webkitFullscreenElement||Se.mozFullScreenElement||Se.msFullscreenElement;f&&f.contains(s.tech_.el())?s.masterPlaylistController_.fastQualityChange_():s.masterPlaylistController_.checkABR_()}),s.on(s.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),s.on(s.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}var i=t.prototype;return i.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var n=LS();n&&n.bandwidth&&(this.options_.bandwidth=n.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),n&&n.throughput&&(this.options_.throughput=n.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=pi.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===pi.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(s){typeof e.source_[s]<"u"&&(e.options_[s]=e.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},i.src=function(e,n){var s=this;if(e){this.setOptions_(),this.options_.src=JM(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=xi,this.options_.sourceType=oc(n),this.options_.seekTo=function(f){s.tech_.setCurrentTime(f)},this.options_.smoothQualityChange&&N.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new RM(this.options_);var o=N.mergeOptions({liveRangeSafeTimeDelta:$n},this.options_,{seekable:function(){return s.seekable()},media:function(){return s.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new UM(o),this.masterPlaylistController_.on("error",function(){var f=N.players[s.tech_.options_.playerId],m=s.masterPlaylistController_.error;typeof m=="object"&&!m.code?m.code=3:typeof m=="string"&&(m={message:m,code:3}),f.error(m)});var l=this.options_.experimentalBufferBasedABR?xi.movingAverageBandwidthSelector(.55):xi.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):l.bind(this),this.masterPlaylistController_.selectInitialPlaylist=xi.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(m){this.masterPlaylistController_.selectPlaylist=m.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(m){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=m,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var m=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,v=F.navigator.connection||F.navigator.mozConnection||F.navigator.webkitConnection,y=1e7;if(this.options_.useNetworkInformationApi&&v){var E=v.downlink*1e3*1e3;E>=y&&m>=y?m=Math.max(m,E):m=E}return m},set:function(m){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=m,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var m=1/(this.bandwidth||1),v;this.throughput>0?v=1/this.throughput:v=0;var y=Math.floor(1/(m+v));return y},set:function(){N.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return s.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return s.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return s.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return s.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return s.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return s.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return no(s.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return s.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return s.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return s.tech_.name_},enumerable:!0},duration:{get:function(){return s.tech_.duration()},enumerable:!0},master:{get:function(){return s.playlists.master},enumerable:!0},playerDimensions:{get:function(){return s.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return no(s.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return s.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){s.options_.useBandwidthFromLocalStorage&&YM({bandwidth:s.bandwidth,throughput:Math.round(s.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){NM(s)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){s.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=F.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},i.createKeySessions_=function(){var e=this,n=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),XM({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:n&&n.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(s){e.logger_("error while creating EME key session",s),e.player_.error({message:"Failed to initialize media keys for EME",code:3})})},i.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},i.setupEme_=function(){var e=this,n=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=QM({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:n&&n.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var l=e.masterPlaylistController_.master();if(!(!l||!l.playlists)){var f=[];if(l.playlists.forEach(function(v){v&&v.attributes&&v.attributes.RESOLUTION&&v.attributes.RESOLUTION.height>=720&&(!v.excludeUntil||v.excludeUntil<1/0)&&(v.excludeUntil=1/0,f.push(v))}),f.length){var m;(m=N.log).warn.apply(m,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(f)),e.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),N.browser.IE_VERSION===11||!s){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},i.setupQualityLevels_=function(){var e=this,n=N.players[this.tech_.options_.playerId];!n||!n.qualityLevels||this.qualityLevels_||(this.qualityLevels_=n.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){GM(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){DS(e.qualityLevels_,e.playlists)}))},t.version=function(){return{"@videojs/http-streaming":PS,"mux.js":HM,"mpd-parser":$M,"m3u8-parser":WM,"aes-decrypter":qM}},i.version=function(){return this.constructor.version()},i.canChangeType=function(){return SS.canChangeType()},i.play=function(){this.masterPlaylistController_.play()},i.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},i.duration=function(){return this.masterPlaylistController_.duration()},i.seekable=function(){return this.masterPlaylistController_.seekable()},i.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&F.URL.revokeObjectURL&&(F.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),a.prototype.dispose.call(this)},i.convertToProgramTime=function(e,n){return oR({playlist:this.masterPlaylistController_.media(),time:e,callback:n})},i.seekToProgramTime=function(e,n,s,o){return s===void 0&&(s=!0),o===void 0&&(o=2),uR({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:n})},t}(ZM),gd={name:"videojs-http-streaming",VERSION:PS,canHandleSource:function(t,i){i===void 0&&(i={});var r=N.mergeOptions(N.options,i);return gd.canPlayType(t.type,r)},handleSource:function(t,i,r){r===void 0&&(r={});var e=N.mergeOptions(N.options,r);return i.vhs=new nv(t,i,e),N.hasOwnProperty("hls")||Object.defineProperty(i,"hls",{get:function(){return N.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),i.vhs},configurable:!0}),i.vhs.xhr=$x(),i.vhs.src(t.src,t.type),i.vhs},canPlayType:function(t,i){var r=oc(t);if(!r)return"";var e=gd.getOverrideNative(i),n=xi.supportsTypeNatively(r),s=!n||e;return s?"maybe":""},getOverrideNative:function(t){t===void 0&&(t={});var i=t,r=i.vhs,e=r===void 0?{}:r,n=i.hls,s=n===void 0?{}:n,o=!(N.browser.IS_ANY_SAFARI||N.browser.IS_IOS),l=e.overrideNative,f=l===void 0?o:l,m=s.overrideNative,v=m===void 0?!1:m;return v||f}},eF=function(){return ts("avc1.4d400d,mp4a.40.2")};if(eF()&&N.getTech("Html5").registerSourceHandler(gd,0),N.VhsHandler=nv,Object.defineProperty(N,"HlsHandler",{get:function(){return N.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),nv},configurable:!0}),N.VhsSourceHandler=gd,Object.defineProperty(N,"HlsSourceHandler",{get:function(){return N.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),gd},configurable:!0}),N.Vhs=xi,Object.defineProperty(N,"Hls",{get:function(){return N.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),xi},configurable:!0}),N.use||(N.registerComponent("Hls",xi),N.registerComponent("Vhs",xi)),N.options.vhs=N.options.vhs||{},N.options.hls=N.options.hls||{},!N.getPlugin||!N.getPlugin("reloadSourceOnError")){var tF=N.registerPlugin||N.plugin;tF("reloadSourceOnError",VM)}var cn=Ul,lh=function(t,i,r){return t&&r&&r.responseURL&&i!==r.responseURL?r.responseURL:i},hn=function(t){return N.log.debug?N.log.debug.bind(N,"VHS:",t+" >"):function(){}},us=1/30,Gn=us*3,kS=function(t,i){var r=[],e;if(t&&t.length)for(e=0;e<t.length;e++)i(t.start(e),t.end(e))&&r.push([t.start(e),t.end(e)]);return N.createTimeRanges(r)},Ou=function(t,i){return kS(t,function(r,e){return r-Gn<=i&&e+Gn>=i})},dh=function(t,i){return kS(t,function(r){return r-us>=i})},iF=function(t){if(t.length<2)return N.createTimeRanges();for(var i=[],r=1;r<t.length;r++){var e=t.end(r-1),n=t.start(r);i.push([e,n])}return N.createTimeRanges(i)},rF=function(t,i){var r=null,e=null,n=0,s=[],o=[];if(!t||!t.length||!i||!i.length)return N.createTimeRange();for(var l=t.length;l--;)s.push({time:t.start(l),type:"start"}),s.push({time:t.end(l),type:"end"});for(l=i.length;l--;)s.push({time:i.start(l),type:"start"}),s.push({time:i.end(l),type:"end"});for(s.sort(function(f,m){return f.time-m.time}),l=0;l<s.length;l++)s[l].type==="start"?(n++,n===2&&(r=s[l].time)):s[l].type==="end"&&(n--,n===1&&(e=s[l].time)),r!==null&&e!==null&&(o.push([r,e]),r=null,e=null);return N.createTimeRanges(o)},RS=function(t){var i=[];if(!t||!t.length)return"";for(var r=0;r<t.length;r++)i.push(t.start(r)+" => "+t.end(r));return i.join(", ")},nF=function(t,i,r){r===void 0&&(r=1);var e=t.length?t.end(t.length-1):0;return(e-i)/r},ao=function(t){for(var i=[],r=0;r<t.length;r++)i.push({start:t.start(r),end:t.end(r)});return i},aF=function(t,i){if(t===i)return!1;if(!t&&i||!i&&t||t.length!==i.length)return!0;for(var r=0;r<t.length;r++)if(t.start(r)!==i.start(r)||t.end(r)!==i.end(r))return!0;return!1},MS=function(t){if(!(!t||!t.length||!t.end))return t.end(t.length-1)},av=function(t,i){var r=0;if(!t||!t.length)return r;for(var e=0;e<t.length;e++){var n=t.start(e),s=t.end(e);if(!(i>s)){if(i>n&&i<=s){r+=s-i;continue}r+=s-n}}return r},FS=N.createTimeRange,sv=function(t,i){if(!i.preload)return i.duration;var r=0;return(i.parts||[]).forEach(function(e){r+=e.duration}),(i.preloadHints||[]).forEach(function(e){e.type==="PART"&&(r+=t.partTargetDuration)}),r},ov=function(t){return(t.segments||[]).reduce(function(i,r,e){return r.parts?r.parts.forEach(function(n,s){i.push({duration:n.duration,segmentIndex:e,partIndex:s,part:n,segment:r})}):i.push({duration:r.duration,segmentIndex:e,partIndex:null,segment:r,part:null}),i},[])},NS=function(t){var i=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return i&&i.parts||[]},US=function(t){var i=t.preloadSegment;if(i){var r=i.parts,e=i.preloadHints,n=(e||[]).reduce(function(s,o){return s+(o.type==="PART"?1:0)},0);return n+=r&&r.length?r.length:0,n}},BS=function(t,i){if(i.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;var r=NS(i).length>0;return r&&i.serverControl&&i.serverControl.partHoldBack?i.serverControl.partHoldBack:r&&i.partTargetDuration?i.partTargetDuration*3:i.serverControl&&i.serverControl.holdBack?i.serverControl.holdBack:i.targetDuration?i.targetDuration*3:0},sF=function(t,i){var r=0,e=i-t.mediaSequence,n=t.segments[e];if(n){if(typeof n.start<"u")return{result:n.start,precise:!0};if(typeof n.end<"u")return{result:n.end-n.duration,precise:!0}}for(;e--;){if(n=t.segments[e],typeof n.end<"u")return{result:r+n.end,precise:!0};if(r+=sv(t,n),typeof n.start<"u")return{result:r+n.start,precise:!0}}return{result:r,precise:!1}},oF=function(t,i){for(var r=0,e,n=i-t.mediaSequence;n<t.segments.length;n++){if(e=t.segments[n],typeof e.start<"u")return{result:e.start-r,precise:!0};if(r+=sv(t,e),typeof e.end<"u")return{result:e.end-r,precise:!0}}return{result:-1,precise:!1}},jS=function(t,i,r){if(typeof i>"u"&&(i=t.mediaSequence+t.segments.length),i<t.mediaSequence)return 0;var e=sF(t,i);if(e.precise)return e.result;var n=oF(t,i);return n.precise?n.result:e.result+r},VS=function(t,i,r){if(!t)return 0;if(typeof r!="number"&&(r=0),typeof i>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return F.Infinity}return jS(t,i,r)},vd=function(t){var i=t.defaultDuration,r=t.durationList,e=t.startIndex,n=t.endIndex,s=0;if(e>n){var o=[n,e];e=o[0],n=o[1]}if(e<0){for(var l=e;l<Math.min(0,n);l++)s+=i;e=0}for(var f=e;f<n;f++)s+=r[f].duration;return s},HS=function(t,i,r,e){if(!t||!t.segments)return null;if(t.endList)return VS(t);if(i===null)return null;i=i||0;var n=jS(t,t.mediaSequence+t.segments.length,i);return r&&(e=typeof e=="number"?e:BS(null,t),n-=e),Math.max(0,n)},uF=function(t,i,r){var e=!0,n=i||0,s=HS(t,i,e,r);return s===null?FS():FS(n,s)},lF=function(t){for(var i=t.playlist,r=t.currentTime,e=t.startingSegmentIndex,n=t.startingPartIndex,s=t.startTime,o=t.experimentalExactManifestTimings,l=r-s,f=ov(i),m=0,v=0;v<f.length;v++){var y=f[v];if(e===y.segmentIndex&&!(typeof n=="number"&&typeof y.partIndex=="number"&&n!==y.partIndex)){m=v;break}}if(l<0){if(m>0)for(var E=m-1;E>=0;E--){var I=f[E];if(l+=I.duration,o){if(l<0)continue}else if(l+us<=0)continue;return{partIndex:I.partIndex,segmentIndex:I.segmentIndex,startTime:s-vd({defaultDuration:i.targetDuration,durationList:f,startIndex:m,endIndex:E})}}return{partIndex:f[0]&&f[0].partIndex||null,segmentIndex:f[0]&&f[0].segmentIndex||0,startTime:r}}if(m<0){for(var O=m;O<0;O++)if(l-=i.targetDuration,l<0)return{partIndex:f[0]&&f[0].partIndex||null,segmentIndex:f[0]&&f[0].segmentIndex||0,startTime:r};m=0}for(var D=m;D<f.length;D++){var R=f[D];if(l-=R.duration,o){if(l>0)continue}else if(l-us>=0)continue;return{partIndex:R.partIndex,segmentIndex:R.segmentIndex,startTime:s+vd({defaultDuration:i.targetDuration,durationList:f,startIndex:m,endIndex:D})}}return{segmentIndex:f[f.length-1].segmentIndex,partIndex:f[f.length-1].partIndex,startTime:r}},$S=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},uv=function(t){return t.excludeUntil&&t.excludeUntil===1/0},fh=function(t){var i=$S(t);return!t.disabled&&!i},dF=function(t){return t.disabled},fF=function(t){for(var i=0;i<t.segments.length;i++)if(t.segments[i].key)return!0;return!1},WS=function(t,i){return i.attributes&&i.attributes[t]},cF=function(t,i,r,e){if(e===void 0&&(e=0),!WS("BANDWIDTH",r))return NaN;var n=t*r.attributes.BANDWIDTH;return(n-e*8)/i},lv=function(t,i){if(t.playlists.length===1)return!0;var r=i.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(function(e){return fh(e)?(e.attributes.BANDWIDTH||0)<r:!1}).length===0},dv=function(t,i){return!t&&!i||!t&&i||t&&!i?!1:!!(t===i||t.id&&i.id&&t.id===i.id||t.resolvedUri&&i.resolvedUri&&t.resolvedUri===i.resolvedUri||t.uri&&i.uri&&t.uri===i.uri)},qS=function(t,i){var r=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{},e=!1;for(var n in r){for(var s in r[n])if(e=i(r[n][s]),e)break;if(e)break}return!!e},_d=function(t){if(!t||!t.playlists||!t.playlists.length){var i=qS(t,function(s){return s.playlists&&s.playlists.length||s.uri});return i}for(var r=function(o){var l=t.playlists[o],f=l.attributes&&l.attributes.CODECS;if(f&&f.split(",").every(function(v){return um(v)}))return"continue";var m=qS(t,function(v){return dv(l,v)});return m?"continue":{v:!1}},e=0;e<t.playlists.length;e++){var n=r(e);if(n!=="continue"&&typeof n=="object")return n.v}return!0},ur={liveEdgeDelay:BS,duration:VS,seekable:uF,getMediaInfoForTime:lF,isEnabled:fh,isDisabled:dF,isBlacklisted:$S,isIncompatible:uv,playlistEnd:HS,isAes:fF,hasAttribute:WS,estimateSegmentRequestTime:cF,isLowestEnabledRendition:lv,isAudioOnly:_d,playlistMatch:dv,segmentDurationWithParts:sv},GS=N.log,fv=function(t,i){return t+"-"+i},hF=function(t,i,r){return"placeholder-uri-"+t+"-"+i+"-"+r},pF=function(t){var i=t.onwarn,r=t.oninfo,e=t.manifestString,n=t.customTagParsers,s=n===void 0?[]:n,o=t.customTagMappers,l=o===void 0?[]:o,f=t.experimentalLLHLS,m=new by;i&&m.on("warn",i),r&&m.on("info",r),s.forEach(function(O){return m.addParser(O)}),l.forEach(function(O){return m.addTagMapper(O)}),m.push(e),m.end();var v=m.manifest;if(f||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(O){v.hasOwnProperty(O)&&delete v[O]}),v.segments&&v.segments.forEach(function(O){["parts","preloadHints"].forEach(function(D){O.hasOwnProperty(D)&&delete O[D]})})),!v.targetDuration){var y=10;v.segments&&v.segments.length&&(y=v.segments.reduce(function(O,D){return Math.max(O,D.duration)},0)),i&&i("manifest has no targetDuration defaulting to "+y),v.targetDuration=y}var E=NS(v);if(E.length&&!v.partTargetDuration){var I=E.reduce(function(O,D){return Math.max(O,D.duration)},0);i&&(i("manifest has no partTargetDuration defaulting to "+I),GS.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),v.partTargetDuration=I}return v},Du=function(t,i){t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(r){if(t.mediaGroups[r])for(var e in t.mediaGroups[r])for(var n in t.mediaGroups[r][e]){var s=t.mediaGroups[r][e][n];i(s,r,e,n)}})},zS=function(t){var i=t.playlist,r=t.uri,e=t.id;i.id=e,i.playlistErrors_=0,r&&(i.uri=r),i.attributes=i.attributes||{}},mF=function(t){for(var i=t.playlists.length;i--;){var r=t.playlists[i];zS({playlist:r,id:fv(i,r.uri)}),r.resolvedUri=cn(t.uri,r.uri),t.playlists[r.id]=r,t.playlists[r.uri]=r,r.attributes.BANDWIDTH||GS.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},gF=function(t){Du(t,function(i){i.uri&&(i.resolvedUri=cn(t.uri,i.uri))})},vF=function(t,i){var r=fv(0,i),e={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:F.location.href,resolvedUri:F.location.href,playlists:[{uri:i,id:r,resolvedUri:i,attributes:{}}]};return e.playlists[r]=e.playlists[0],e.playlists[i]=e.playlists[0],e},KS=function(t,i,r){r===void 0&&(r=hF),t.uri=i;for(var e=0;e<t.playlists.length;e++)if(!t.playlists[e].uri){var n="placeholder-uri-"+e;t.playlists[e].uri=n}var s=_d(t);Du(t,function(o,l,f,m){if(!o.playlists||!o.playlists.length){if(s&&l==="AUDIO"&&!o.uri)for(var v=0;v<t.playlists.length;v++){var y=t.playlists[v];if(y.attributes&&y.attributes.AUDIO&&y.attributes.AUDIO===f)return}o.playlists=[Di({},o)]}o.playlists.forEach(function(E,I){var O=r(l,f,m,E),D=fv(I,O);E.uri?E.resolvedUri=E.resolvedUri||cn(t.uri,E.uri):(E.uri=I===0?O:D,E.resolvedUri=E.uri),E.id=E.id||D,E.attributes=E.attributes||{},t.playlists[E.id]=E,t.playlists[E.uri]=E})}),mF(t),gF(t)},ch=N.mergeOptions,_F=N.EventTarget,yF=function(t,i){if(i.endList||!i.serverControl)return t;var r={};if(i.serverControl.canBlockReload){var e=i.preloadSegment,n=i.mediaSequence+i.segments.length;if(e){var s=e.parts||[],o=US(i)-1;o>-1&&o!==s.length-1&&(r._HLS_part=o),(o>-1||s.length)&&n--}r._HLS_msn=n}if(i.serverControl&&i.serverControl.canSkipUntil&&(r._HLS_skip=i.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(r).length){var l=new F.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(f){r.hasOwnProperty(f)&&l.searchParams.set(f,r[f])}),t=l.toString()}return t},TF=function(t,i){if(!t)return i;var r=ch(t,i);if(t.preloadHints&&!i.preloadHints&&delete r.preloadHints,t.parts&&!i.parts)delete r.parts;else if(t.parts&&i.parts)for(var e=0;e<i.parts.length;e++)t.parts&&t.parts[e]&&(r.parts[e]=ch(t.parts[e],i.parts[e]));return!t.skipped&&i.skipped&&(r.skipped=!1),t.preload&&!i.preload&&(r.preload=!1),r},bF=function(t,i,r){var e=t.slice(),n=i.slice();r=r||0;for(var s=[],o,l=0;l<n.length;l++){var f=e[l+r],m=n[l];f?(o=f.map||o,s.push(TF(f,m))):(o&&!m.map&&(m.map=o),s.push(m))}return s},XS=function(t,i){!t.resolvedUri&&t.uri&&(t.resolvedUri=cn(i,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=cn(i,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=cn(i,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=cn(i,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(function(r){r.resolvedUri||(r.resolvedUri=cn(i,r.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(function(r){r.resolvedUri||(r.resolvedUri=cn(i,r.uri))})},QS=function(t){var i=t.segments||[],r=t.preloadSegment;if(r&&r.parts&&r.parts.length){if(r.preloadHints){for(var e=0;e<r.preloadHints.length;e++)if(r.preloadHints[e].type==="MAP")return i}r.duration=t.targetDuration,r.preload=!0,i.push(r)}return i},YS=function(t,i){return t===i||t.segments&&i.segments&&t.segments.length===i.segments.length&&t.endList===i.endList&&t.mediaSequence===i.mediaSequence&&t.preloadSegment===i.preloadSegment},cv=function(t,i,r){r===void 0&&(r=YS);var e=ch(t,{}),n=e.playlists[i.id];if(!n||r(n,i))return null;i.segments=QS(i);var s=ch(n,i);if(s.preloadSegment&&!i.preloadSegment&&delete s.preloadSegment,n.segments){if(i.skip){i.segments=i.segments||[];for(var o=0;o<i.skip.skippedSegments;o++)i.segments.unshift({skipped:!0})}s.segments=bF(n.segments,i.segments,i.mediaSequence-n.mediaSequence)}s.segments.forEach(function(f){XS(f,s.resolvedUri)});for(var l=0;l<e.playlists.length;l++)e.playlists[l].id===i.id&&(e.playlists[l]=s);return e.playlists[i.id]=s,e.playlists[i.uri]=s,Du(t,function(f,m,v,y){if(f.playlists)for(var E=0;E<f.playlists.length;E++)i.id===f.playlists[E].id&&(f.playlists[E]=s)}),e},hv=function(t,i){var r=t.segments||[],e=r[r.length-1],n=e&&e.parts&&e.parts[e.parts.length-1],s=n&&n.duration||e&&e.duration;return i&&s?s*1e3:(t.partTargetDuration||t.targetDuration||10)*500},Lu=function(a){Ae(t,a);function t(r,e,n){var s;if(n===void 0&&(n={}),s=a.call(this)||this,!r)throw new Error("A non-empty playlist URL or object is required");s.logger_=hn("PlaylistLoader");var o=n,l=o.withCredentials,f=l===void 0?!1:l,m=o.handleManifestRedirects,v=m===void 0?!1:m;s.src=r,s.vhs_=e,s.withCredentials=f,s.handleManifestRedirects=v;var y=e.options_;return s.customTagParsers=y&&y.customTagParsers||[],s.customTagMappers=y&&y.customTagMappers||[],s.experimentalLLHLS=y&&y.experimentalLLHLS||!1,N.browser.IE_VERSION&&(s.experimentalLLHLS=!1),s.state="HAVE_NOTHING",s.handleMediaupdatetimeout_=s.handleMediaupdatetimeout_.bind(Ue(s)),s.on("mediaupdatetimeout",s.handleMediaupdatetimeout_),s}var i=t.prototype;return i.handleMediaupdatetimeout_=function(){var e=this;if(this.state==="HAVE_METADATA"){var n=this.media(),s=cn(this.master.uri,n.uri);this.experimentalLLHLS&&(s=yF(s,n)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials},function(o,l){if(e.request){if(o)return e.playlistRequestError(e.request,e.media(),"HAVE_METADATA");e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}})}},i.playlistRequestError=function(e,n,s){var o=n.uri,l=n.id;this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[l],status:e.status,message:"HLS playlist request error at URL: "+o+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},i.parseManifest_=function(e){var n=this,s=e.url,o=e.manifestString;return pF({onwarn:function(f){var m=f.message;return n.logger_("m3u8-parser warn for "+s+": "+m)},oninfo:function(f){var m=f.message;return n.logger_("m3u8-parser info for "+s+": "+m)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},i.haveMetadata=function(e){var n=e.playlistString,s=e.playlistObject,o=e.url,l=e.id;this.request=null,this.state="HAVE_METADATA";var f=s||this.parseManifest_({url:o,manifestString:n});f.lastRequest=Date.now(),zS({playlist:f,uri:o,id:l});var m=cv(this.master,f);this.targetDuration=f.partTargetDuration||f.targetDuration,this.pendingMedia_=null,m?(this.master=m,this.media_=this.master.playlists[l]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(hv(this.media(),!!m)),this.trigger("loadedplaylist")},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),F.clearTimeout(this.mediaUpdateTimeout),F.clearTimeout(this.finalRenditionTimeout),this.off()},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e,n){var s=this;if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(F.clearTimeout(this.finalRenditionTimeout),n){var o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=F.setTimeout(this.media.bind(this,e,!1),o);return}var l=this.state,f=!this.media_||e.id!==this.media_.id,m=this.master.playlists[e.id];if(m&&m.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,f&&(this.trigger("mediachanging"),l==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(hv(e,!0)),!!f){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},function(v,y){if(s.request){if(e.lastRequest=Date.now(),e.resolvedUri=lh(s.handleManifestRedirects,e.resolvedUri,y),v)return s.playlistRequestError(s.request,e,l);s.haveMetadata({playlistString:y.responseText,url:e.uri,id:e.id}),l==="HAVE_MASTER"?s.trigger("loadedmetadata"):s.trigger("mediachange")}})}},i.pause=function(){this.mediaUpdateTimeout&&(F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},i.load=function(e){var n=this;this.mediaUpdateTimeout&&(F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var s=this.media();if(e){var o=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=F.setTimeout(function(){n.mediaUpdateTimeout=null,n.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},i.updateMediaUpdateTimeout_=function(e){var n=this;this.mediaUpdateTimeout&&(F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=F.setTimeout(function(){n.mediaUpdateTimeout=null,n.trigger("mediaupdatetimeout"),n.updateMediaUpdateTimeout_(e)},e))},i.start=function(){var e=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=F.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){e.setupInitialPlaylist(e.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(n,s){if(e.request){if(e.request=null,n)return e.error={status:s.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:s.responseText,code:2},e.state==="HAVE_NOTHING"&&(e.started=!1),e.trigger("error");e.src=lh(e.handleManifestRedirects,e.src,s);var o=e.parseManifest_({manifestString:s.responseText,url:e.src});e.setupInitialPlaylist(o)}})},i.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},i.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists){this.master=e,KS(this.master,this.srcUri()),e.playlists.forEach(function(s){s.segments=QS(s),s.segments.forEach(function(o){XS(o,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var n=this.srcUri()||F.location.href;this.master=vF(e,n),this.haveMetadata({playlistObject:e,url:n,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(_F),xF=N.xhr,SF=N.mergeOptions,pv=function(t,i,r,e){var n=t.responseType==="arraybuffer"?t.response:t.responseText;!i&&n&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=n.byteLength||n.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),r.headers&&(t.responseHeaders=r.headers),i&&i.code==="ETIMEDOUT"&&(t.timedout=!0),!i&&!t.aborted&&r.statusCode!==200&&r.statusCode!==206&&r.statusCode!==0&&(i=new Error("XHR Failed with a response of: "+(t&&(n||t.responseText)))),e(i,t)},JS=function(){var t=function i(r,e){r=SF({timeout:45e3},r);var n=i.beforeRequest||N.Vhs.xhr.beforeRequest;if(n&&typeof n=="function"){var s=n(r);s&&(r=s)}var o=N.Vhs.xhr.original===!0?xF:N.Vhs.xhr,l=o(r,function(m,v){return pv(l,m,v,e)}),f=l.abort;return l.abort=function(){return l.aborted=!0,f.apply(l,arguments)},l.uri=r.uri,l.requestTime=Date.now(),l};return t.original=!0,t},EF=function(t){var i,r=t.offset;return typeof t.offset=="bigint"||typeof t.length=="bigint"?i=F.BigInt(t.offset)+F.BigInt(t.length)-F.BigInt(1):i=t.offset+t.length-1,"bytes="+r+"-"+i},mv=function(t){var i={};return t.byterange&&(i.Range=EF(t.byterange)),i},wF=function(t,i){return t.start(i)+"-"+t.end(i)},CF=function(t,i){var r=t.toString(16);return"00".substring(0,2-r.length)+r+(i%2?" ":"")},AF=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},ZS=function(t){var i={};return Object.keys(t).forEach(function(r){var e=t[r];lm(e)?i[r]={bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:i[r]=e}),i},hh=function(t){var i=t.byterange||{length:1/0,offset:0};return[i.length,i.offset,t.resolvedUri].join(",")},eE=function(t){return t.resolvedUri},tE=function(t){for(var i=Array.prototype.slice.call(t),r=16,e="",n,s,o=0;o<i.length/r;o++)n=i.slice(o*r,o*r+r).map(CF).join(""),s=i.slice(o*r,o*r+r).map(AF).join(""),e+=n+" "+s+`
`;return e},IF=function(t){var i=t.bytes;return tE(i)},PF=function(t){var i="",r;for(r=0;r<t.length;r++)i+=wF(t,r)+" ";return i},OF=Object.freeze({__proto__:null,createTransferableMessage:ZS,initSegmentId:hh,segmentKeyId:eE,hexDump:tE,tagDump:IF,textRanges:PF}),iE=.25,DF=function(t,i){if(!i.dateTimeObject)return null;var r=i.videoTimingInfo.transmuxerPrependedSeconds,e=i.videoTimingInfo.transmuxedPresentationStart,n=e+r,s=t-n;return new Date(i.dateTimeObject.getTime()+s*1e3)},LF=function(t){return t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds},kF=function(t,i){var r;try{r=new Date(t)}catch{return null}if(!i||!i.segments||i.segments.length===0)return null;var e=i.segments[0];if(r<e.dateTimeObject)return null;for(var n=0;n<i.segments.length-1;n++){e=i.segments[n];var s=i.segments[n+1].dateTimeObject;if(r<s)break}var o=i.segments[i.segments.length-1],l=o.dateTimeObject,f=o.videoTimingInfo?LF(o.videoTimingInfo):o.duration+o.duration*iE,m=new Date(l.getTime()+f*1e3);return r>m?null:(r>l&&(e=o),{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:ur.duration(i,i.mediaSequence+i.segments.indexOf(e)),type:e.videoTimingInfo?"accurate":"estimate"})},RF=function(t,i){if(!i||!i.segments||i.segments.length===0)return null;for(var r=0,e,n=0;n<i.segments.length&&(e=i.segments[n],r=e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationEnd:r+e.duration,!(t<=r));n++);var s=i.segments[i.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>r){if(t>r+s.duration*iE)return null;e=s}return{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:r-e.duration,type:e.videoTimingInfo?"accurate":"estimate"}},MF=function(t,i){var r,e;try{r=new Date(t),e=new Date(i)}catch{}var n=r.getTime(),s=e.getTime();return(s-n)/1e3},FF=function(t){if(!t.segments||t.segments.length===0)return!1;for(var i=0;i<t.segments.length;i++){var r=t.segments[i];if(!r.dateTimeObject)return!1}return!0},NF=function(t){var i=t.playlist,r=t.time,e=r===void 0?void 0:r,n=t.callback;if(!n)throw new Error("getProgramTime: callback must be provided");if(!i||e===void 0)return n({message:"getProgramTime: playlist and time must be provided"});var s=RF(e,i);if(!s)return n({message:"valid programTime was not found"});if(s.type==="estimate")return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var o={mediaSeconds:e},l=DF(e,s.segment);return l&&(o.programDateTime=l.toISOString()),n(null,o)},UF=function a(t){var i=t.programTime,r=t.playlist,e=t.retryCount,n=e===void 0?2:e,s=t.seekTo,o=t.pauseAfterSeek,l=o===void 0?!0:o,f=t.tech,m=t.callback;if(!m)throw new Error("seekToProgramTime: callback must be provided");if(typeof i>"u"||!r||!s)return m({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!f.hasStarted_)return m({message:"player must be playing a live stream to start buffering"});if(!FF(r))return m({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});var v=kF(i,r);if(!v)return m({message:i+" was not found in the stream"});var y=v.segment,E=MF(y.dateTimeObject,i);if(v.type==="estimate"){if(n===0)return m({message:i+" is not buffered yet. Try again"});s(v.estimatedStart+E),f.one("seeked",function(){a({programTime:i,playlist:r,retryCount:n-1,seekTo:s,pauseAfterSeek:l,tech:f,callback:m})});return}var I=y.start+E,O=function(){return m(null,f.currentTime())};f.one("seeked",O),l&&f.pause(),s(I)},gv=function(t,i){if(t.readyState===4)return i()},BF=function(t,i,r){var e=[],n,s=!1,o=function(y,E,I,O){return E.abort(),s=!0,r(y,E,I,O)},l=function(y,E){if(!s){if(y)return o(y,E,"",e);var I=E.responseText.substring(e&&e.byteLength||0,E.responseText.length);if(e=wy(e,fm(I,!0)),n=n||au(e),e.length<10||n&&e.length<n+2)return gv(E,function(){return o(y,E,"",e)});var O=ou(e);return O==="ts"&&e.length<188?gv(E,function(){return o(y,E,"",e)}):!O&&e.length<376?gv(E,function(){return o(y,E,"",e)}):o(null,E,O,e)}},f={uri:t,beforeSend:function(y){y.overrideMimeType("text/plain; charset=x-user-defined"),y.addEventListener("progress",function(E){return E.total,E.loaded,pv(y,null,{statusCode:y.status},l)})}},m=i(f,function(v,y){return pv(m,v,y,l)});return m},jF=N.EventTarget,rE=N.mergeOptions,nE=function(t,i){if(!YS(t,i)||t.sidx&&i.sidx&&(t.sidx.offset!==i.sidx.offset||t.sidx.length!==i.sidx.length))return!1;if(!t.sidx&&i.sidx||t.sidx&&!i.sidx||t.segments&&!i.segments||!t.segments&&i.segments)return!1;if(!t.segments&&!i.segments)return!0;for(var r=0;r<t.segments.length;r++){var e=t.segments[r],n=i.segments[r];if(e.uri!==n.uri)return!1;if(!(!e.byterange&&!n.byterange)){var s=e.byterange,o=n.byterange;if(s&&!o||!s&&o||s.offset!==o.offset||s.length!==o.length)return!1}}return!0},VF=function(t,i,r,e){var n=e.attributes.NAME||r;return"placeholder-uri-"+t+"-"+i+"-"+n},HF=function(t){var i=t.masterXml,r=t.srcUrl,e=t.clientOffset,n=t.sidxMapping,s=t.previousManifest,o=IT(i,{manifestUri:r,clientOffset:e,sidxMapping:n,previousManifest:s});return KS(o,r,VF),o},$F=function(t,i){Du(t,function(r,e,n,s){s in i.mediaGroups[e][n]||delete t.mediaGroups[e][n][s]})},WF=function(t,i,r){for(var e=!0,n=rE(t,{duration:i.duration,minimumUpdatePeriod:i.minimumUpdatePeriod,timelineStarts:i.timelineStarts}),s=0;s<i.playlists.length;s++){var o=i.playlists[s];if(o.sidx){var l=Qs(o.sidx);r&&r[l]&&r[l].sidx&&Ql(o,r[l].sidx,o.sidx.resolvedUri)}var f=cv(n,o,nE);f&&(n=f,e=!1)}return Du(i,function(m,v,y,E){if(m.playlists&&m.playlists.length){var I=m.playlists[0].id,O=cv(n,m.playlists[0],nE);O&&(n=O,E in n.mediaGroups[v][y]||(n.mediaGroups[v][y][E]=m),n.mediaGroups[v][y][E].playlists[0]=n.playlists[I],e=!1)}}),$F(n,i),i.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(e=!1),e?null:n},qF=function(t,i){var r=Boolean(!t.map&&!i.map),e=r||Boolean(t.map&&i.map&&t.map.byterange.offset===i.map.byterange.offset&&t.map.byterange.length===i.map.byterange.length);return e&&t.uri===i.uri&&t.byterange.offset===i.byterange.offset&&t.byterange.length===i.byterange.length},aE=function(t,i){var r={};for(var e in t){var n=t[e],s=n.sidx;if(s){var o=Qs(s);if(!i[o])break;var l=i[o].sidxInfo;qF(l,s)&&(r[o]=i[o])}}return r},GF=function(t,i){var r=aE(t.playlists,i),e=r;return Du(t,function(n,s,o,l){if(n.playlists&&n.playlists.length){var f=n.playlists;e=rE(e,aE(f,i))}}),e},vv=function(a){Ae(t,a);function t(r,e,n,s){var o;n===void 0&&(n={}),o=a.call(this)||this,o.masterPlaylistLoader_=s||Ue(o),s||(o.isMaster_=!0);var l=n,f=l.withCredentials,m=f===void 0?!1:f,v=l.handleManifestRedirects,y=v===void 0?!1:v;if(o.vhs_=e,o.withCredentials=m,o.handleManifestRedirects=y,!r)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=hn("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=r,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=r,o}var i=t.prototype;return i.requestErrored_=function(e,n,s){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:n.status,message:"DASH request error at URL: "+n.uri,response:n.response,code:2},s&&(this.state=s),this.trigger("error"),!0},i.addSidxSegments_=function(e,n,s){var o=this,l=e.sidx&&Qs(e.sidx);if(!e.sidx||!l||this.masterPlaylistLoader_.sidxMapping_[l]){this.mediaRequest_=F.setTimeout(function(){return s(!1)},0);return}var f=lh(this.handleManifestRedirects,e.sidx.resolvedUri),m=function(y,E){if(!o.requestErrored_(y,E,n)){var I=o.masterPlaylistLoader_.sidxMapping_,O;try{O=LT($e(E.response).subarray(8))}catch(D){o.requestErrored_(D,E,n);return}return I[l]={sidxInfo:e.sidx,sidx:O},Ql(e,O,e.sidx.resolvedUri),s(!0)}};this.request=BF(f,this.vhs_.xhr,function(v,y,E,I){if(v)return m(v,y);if(!E||E!=="mp4")return m({status:y.status,message:"Unsupported "+(E||"unknown")+" container type for sidx segment at URL: "+f,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},y);var O=e.sidx.byterange,D=O.offset,R=O.length;if(I.length>=R+D)return m(v,{response:I.subarray(D,D+R),status:y.status,uri:y.uri});o.request=o.vhs_.xhr({uri:f,responseType:"arraybuffer",headers:mv({byterange:e.sidx.byterange})},m)})},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},F.clearTimeout(this.minimumUpdatePeriodTimeout_),F.clearTimeout(this.mediaRequest_),F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},i.hasPendingRequest=function(){return this.request||this.mediaRequest_},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e){var n=this;if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if(typeof e=="string"){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var o=!this.media_||e.id!==this.media_.id;if(o&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}o&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,s,function(l){n.haveMetadata({startingState:s,playlist:e})}))},i.haveMetadata=function(e){var n=e.startingState,s=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),n==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},i.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(F.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},i.load=function(e){var n=this;F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var s=this.media();if(e){var o=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=F.setTimeout(function(){return n.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},i.start=function(){var e=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=F.setTimeout(function(){return e.haveMaster_()},0);return}this.requestMaster_(function(n,s){e.haveMaster_(),!e.hasPendingRequest()&&!e.media_&&e.media(e.masterPlaylistLoader_.master.playlists[0])})},i.requestMaster_=function(e){var n=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(s,o){if(n.requestErrored_(s,o)){n.state==="HAVE_NOTHING"&&(n.started=!1);return}var l=o.responseText!==n.masterPlaylistLoader_.masterXml_;if(n.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?n.masterLoaded_=Date.parse(o.responseHeaders.date):n.masterLoaded_=Date.now(),n.masterPlaylistLoader_.srcUrl=lh(n.handleManifestRedirects,n.masterPlaylistLoader_.srcUrl,o),l){n.handleMaster_(),n.syncClientServerClock_(function(){return e(o,l)});return}return e(o,l)})},i.syncClientServerClock_=function(e){var n=this,s=PT(this.masterPlaylistLoader_.masterXml_);if(s===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e();if(s.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=s.value-Date.now(),e();this.request=this.vhs_.xhr({uri:cn(this.masterPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(o,l){if(n.request){if(o)return n.masterPlaylistLoader_.clientOffset_=n.masterLoaded_-Date.now(),e();var f;s.method==="HEAD"?!l.responseHeaders||!l.responseHeaders.date?f=n.masterLoaded_:f=Date.parse(l.responseHeaders.date):f=Date.parse(l.responseText),n.masterPlaylistLoader_.clientOffset_=f-Date.now(),e()}})},i.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},i.handleMaster_=function(){this.mediaRequest_=null;var e=this.masterPlaylistLoader_.master,n=HF({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(n=WF(e,n,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=n||e;var s=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return s&&s!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=s),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(n)},i.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(F.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var n=e.master&&e.master.minimumUpdatePeriod;if(n===0&&(e.media()?n=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof n!="number"||n<=0){n<0&&this.logger_("found invalid minimumUpdatePeriod of "+n+", not setting a timeout");return}this.createMUPTimeout_(n)},i.createMUPTimeout_=function(e){var n=this.masterPlaylistLoader_;n.minimumUpdatePeriodTimeout_=F.setTimeout(function(){n.minimumUpdatePeriodTimeout_=null,n.trigger("minimumUpdatePeriod"),n.createMUPTimeout_(e)},e)},i.refreshXml_=function(){var e=this;this.requestMaster_(function(n,s){s&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=GF(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.sidxMapping_),e.addSidxSegments_(e.media(),e.state,function(o){e.refreshMedia_(e.media().id)}))})},i.refreshMedia_=function(e){var n=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var s=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==s[e];if(o?this.media_=s[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var l=function f(){n.media().endList||(n.mediaUpdateTimeout=F.setTimeout(function(){n.trigger("mediaupdatetimeout"),f()},hv(n.media(),Boolean(o))))};l()}this.trigger("loadedplaylist")},t}(jF),mi={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},zF=function(t){for(var i=new Uint8Array(new ArrayBuffer(t.length)),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i.buffer},sE=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},KF=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{var i=new BlobBuilder;return i.append(t),URL.createObjectURL(i.getBlob())}},oE=function(t){return function(){var i=KF(t),r=sE(new Worker(i));r.objURL=i;var e=r.terminate;return r.on=r.addEventListener,r.off=r.removeEventListener,r.terminate=function(){return URL.revokeObjectURL(i),e.call(this)},r}},uE=function(t){return"var browserWorkerPolyFill = "+sE.toString()+`;
browserWorkerPolyFill(self);
`+t},lE=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},XF=uE(lE(function(){var a=function(){this.init=function(){var d={};this.on=function(p,h){d[p]||(d[p]=[]),d[p]=d[p].concat(h)},this.off=function(p,h){var g;return d[p]?(g=d[p].indexOf(h),d[p]=d[p].slice(),d[p].splice(g,1),g>-1):!1},this.trigger=function(p){var h,g,_,T;if(h=d[p],!!h)if(arguments.length===2)for(_=h.length,g=0;g<_;++g)h[g].call(this,arguments[1]);else{for(T=[],g=arguments.length,g=1;g<arguments.length;++g)T.push(arguments[g]);for(_=h.length,g=0;g<_;++g)h[g].apply(this,T)}},this.dispose=function(){d={}}}};a.prototype.pipe=function(x){return this.on("data",function(d){x.push(d)}),this.on("done",function(d){x.flush(d)}),this.on("partialdone",function(d){x.partialFlush(d)}),this.on("endedtimeline",function(d){x.endTimeline(d)}),this.on("reset",function(d){x.reset(d)}),x},a.prototype.push=function(x){this.trigger("data",x)},a.prototype.flush=function(x){this.trigger("done",x)},a.prototype.partialFlush=function(x){this.trigger("partialdone",x)},a.prototype.endTimeline=function(x){this.trigger("endedtimeline",x)},a.prototype.reset=function(x){this.trigger("reset",x)};var t=a,i=Math.pow(2,32),r=function(d){var p=new DataView(d.buffer,d.byteOffset,d.byteLength),h;return p.getBigUint64?(h=p.getBigUint64(0),h<Number.MAX_SAFE_INTEGER?Number(h):h):p.getUint32(0)*i+p.getUint32(4)},e={getUint64:r,MAX_UINT32:i},n=e.MAX_UINT32,s,o,l,f,m,v,y,E,I,O,D,R,H,Z,V,W,te,z,q,X,j,oe,re,se,he,le,pe,ne,fe,Ie,Ce,Xe,Be,Qe,Et,bt;(function(){var x;if(re={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(x in re)re.hasOwnProperty(x)&&(re[x]=[x.charCodeAt(0),x.charCodeAt(1),x.charCodeAt(2),x.charCodeAt(3)]);se=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),le=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),he=new Uint8Array([0,0,0,1]),pe=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ne=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),fe={video:pe,audio:ne},Xe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Ce=new Uint8Array([0,0,0,0,0,0,0,0]),Be=new Uint8Array([0,0,0,0,0,0,0,0]),Qe=Be,Et=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),bt=Be,Ie=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),s=function(d){var p=[],h=0,g,_,T;for(g=1;g<arguments.length;g++)p.push(arguments[g]);for(g=p.length;g--;)h+=p[g].byteLength;for(_=new Uint8Array(h+8),T=new DataView(_.buffer,_.byteOffset,_.byteLength),T.setUint32(0,_.byteLength),_.set(d,4),g=0,h=8;g<p.length;g++)_.set(p[g],h),h+=p[g].byteLength;return _},o=function(){return s(re.dinf,s(re.dref,Xe))},l=function(d){return s(re.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,d.audioobjecttype<<3|d.samplingfrequencyindex>>>1,d.samplingfrequencyindex<<7|d.channelcount<<3,6,1,2]))},f=function(){return s(re.ftyp,se,he,se,le)},W=function(d){return s(re.hdlr,fe[d])},m=function(d){return s(re.mdat,d)},V=function(d){var p=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,d.duration>>>24&255,d.duration>>>16&255,d.duration>>>8&255,d.duration&255,85,196,0,0]);return d.samplerate&&(p[12]=d.samplerate>>>24&255,p[13]=d.samplerate>>>16&255,p[14]=d.samplerate>>>8&255,p[15]=d.samplerate&255),s(re.mdhd,p)},Z=function(d){return s(re.mdia,V(d),W(d.type),y(d))},v=function(d){return s(re.mfhd,new Uint8Array([0,0,0,0,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255]))},y=function(d){return s(re.minf,d.type==="video"?s(re.vmhd,Ie):s(re.smhd,Ce),o(),z(d))},E=function(d,p){for(var h=[],g=p.length;g--;)h[g]=X(p[g]);return s.apply(null,[re.moof,v(d)].concat(h))},I=function(d){for(var p=d.length,h=[];p--;)h[p]=R(d[p]);return s.apply(null,[re.moov,D(4294967295)].concat(h).concat(O(d)))},O=function(d){for(var p=d.length,h=[];p--;)h[p]=j(d[p]);return s.apply(null,[re.mvex].concat(h))},D=function(d){var p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(re.mvhd,p)},te=function(d){var p=d.samples||[],h=new Uint8Array(4+p.length),g,_;for(_=0;_<p.length;_++)g=p[_].flags,h[_+4]=g.dependsOn<<4|g.isDependedOn<<2|g.hasRedundancy;return s(re.sdtp,h)},z=function(d){return s(re.stbl,q(d),s(re.stts,bt),s(re.stsc,Qe),s(re.stsz,Et),s(re.stco,Be))},function(){var x,d;q=function(h){return s(re.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),h.type==="video"?x(h):d(h))},x=function(h){var g=h.sps||[],_=h.pps||[],T=[],w=[],S,P;for(S=0;S<g.length;S++)T.push((g[S].byteLength&65280)>>>8),T.push(g[S].byteLength&255),T=T.concat(Array.prototype.slice.call(g[S]));for(S=0;S<_.length;S++)w.push((_[S].byteLength&65280)>>>8),w.push(_[S].byteLength&255),w=w.concat(Array.prototype.slice.call(_[S]));if(P=[re.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(h.width&65280)>>8,h.width&255,(h.height&65280)>>8,h.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(re.avcC,new Uint8Array([1,h.profileIdc,h.profileCompatibility,h.levelIdc,255].concat([g.length],T,[_.length],w))),s(re.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],h.sarRatio){var C=h.sarRatio[0],L=h.sarRatio[1];P.push(s(re.pasp,new Uint8Array([(C&4278190080)>>24,(C&16711680)>>16,(C&65280)>>8,C&255,(L&4278190080)>>24,(L&16711680)>>16,(L&65280)>>8,L&255])))}return s.apply(null,P)},d=function(h){return s(re.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(h.channelcount&65280)>>8,h.channelcount&255,(h.samplesize&65280)>>8,h.samplesize&255,0,0,0,0,(h.samplerate&65280)>>8,h.samplerate&255,0,0]),l(h))}}(),H=function(d){var p=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,0,(d.duration&4278190080)>>24,(d.duration&16711680)>>16,(d.duration&65280)>>8,d.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(d.width&65280)>>8,d.width&255,0,0,(d.height&65280)>>8,d.height&255,0,0]);return s(re.tkhd,p)},X=function(d){var p,h,g,_,T,w,S;return p=s(re.tfhd,new Uint8Array([0,0,0,58,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),w=Math.floor(d.baseMediaDecodeTime/n),S=Math.floor(d.baseMediaDecodeTime%n),h=s(re.tfdt,new Uint8Array([1,0,0,0,w>>>24&255,w>>>16&255,w>>>8&255,w&255,S>>>24&255,S>>>16&255,S>>>8&255,S&255])),T=32+20+8+16+8+8,d.type==="audio"?(g=oe(d,T),s(re.traf,p,h,g)):(_=te(d),g=oe(d,_.length+T),s(re.traf,p,h,g,_))},R=function(d){return d.duration=d.duration||4294967295,s(re.trak,H(d),Z(d))},j=function(d){var p=new Uint8Array([0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return d.type!=="video"&&(p[p.length-1]=0),s(re.trex,p)},function(){var x,d,p;p=function(g,_){var T=0,w=0,S=0,P=0;return g.length&&(g[0].duration!==void 0&&(T=1),g[0].size!==void 0&&(w=2),g[0].flags!==void 0&&(S=4),g[0].compositionTimeOffset!==void 0&&(P=8)),[0,0,T|w|S|P,1,(g.length&4278190080)>>>24,(g.length&16711680)>>>16,(g.length&65280)>>>8,g.length&255,(_&4278190080)>>>24,(_&16711680)>>>16,(_&65280)>>>8,_&255]},d=function(g,_){var T,w,S,P,C,L;for(P=g.samples||[],_+=8+12+16*P.length,S=p(P,_),w=new Uint8Array(S.length+P.length*16),w.set(S),T=S.length,L=0;L<P.length;L++)C=P[L],w[T++]=(C.duration&4278190080)>>>24,w[T++]=(C.duration&16711680)>>>16,w[T++]=(C.duration&65280)>>>8,w[T++]=C.duration&255,w[T++]=(C.size&4278190080)>>>24,w[T++]=(C.size&16711680)>>>16,w[T++]=(C.size&65280)>>>8,w[T++]=C.size&255,w[T++]=C.flags.isLeading<<2|C.flags.dependsOn,w[T++]=C.flags.isDependedOn<<6|C.flags.hasRedundancy<<4|C.flags.paddingValue<<1|C.flags.isNonSyncSample,w[T++]=C.flags.degradationPriority&240<<8,w[T++]=C.flags.degradationPriority&15,w[T++]=(C.compositionTimeOffset&4278190080)>>>24,w[T++]=(C.compositionTimeOffset&16711680)>>>16,w[T++]=(C.compositionTimeOffset&65280)>>>8,w[T++]=C.compositionTimeOffset&255;return s(re.trun,w)},x=function(g,_){var T,w,S,P,C,L;for(P=g.samples||[],_+=8+12+8*P.length,S=p(P,_),T=new Uint8Array(S.length+P.length*8),T.set(S),w=S.length,L=0;L<P.length;L++)C=P[L],T[w++]=(C.duration&4278190080)>>>24,T[w++]=(C.duration&16711680)>>>16,T[w++]=(C.duration&65280)>>>8,T[w++]=C.duration&255,T[w++]=(C.size&4278190080)>>>24,T[w++]=(C.size&16711680)>>>16,T[w++]=(C.size&65280)>>>8,T[w++]=C.size&255;return s(re.trun,T)},oe=function(g,_){return g.type==="audio"?x(g,_):d(g,_)}}();var xt={ftyp:f,mdat:m,moof:E,moov:I,initSegment:function(d){var p=f(),h=I(d),g;return g=new Uint8Array(p.byteLength+h.byteLength),g.set(p),g.set(h,p.byteLength),g}},wt=function(d){var p,h,g=[],_=[];for(_.byteLength=0,_.nalCount=0,_.duration=0,g.byteLength=0,p=0;p<d.length;p++)h=d[p],h.nalUnitType==="access_unit_delimiter_rbsp"?(g.length&&(g.duration=h.dts-g.dts,_.byteLength+=g.byteLength,_.nalCount+=g.length,_.duration+=g.duration,_.push(g)),g=[h],g.byteLength=h.data.byteLength,g.pts=h.pts,g.dts=h.dts):(h.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(g.keyFrame=!0),g.duration=h.dts-g.dts,g.byteLength+=h.data.byteLength,g.push(h));return _.length&&(!g.duration||g.duration<=0)&&(g.duration=_[_.length-1].duration),_.byteLength+=g.byteLength,_.nalCount+=g.length,_.duration+=g.duration,_.push(g),_},Ct=function(d){var p,h,g=[],_=[];for(g.byteLength=0,g.nalCount=0,g.duration=0,g.pts=d[0].pts,g.dts=d[0].dts,_.byteLength=0,_.nalCount=0,_.duration=0,_.pts=d[0].pts,_.dts=d[0].dts,p=0;p<d.length;p++)h=d[p],h.keyFrame?(g.length&&(_.push(g),_.byteLength+=g.byteLength,_.nalCount+=g.nalCount,_.duration+=g.duration),g=[h],g.nalCount=h.length,g.byteLength=h.byteLength,g.pts=h.pts,g.dts=h.dts,g.duration=h.duration):(g.duration+=h.duration,g.nalCount+=h.length,g.byteLength+=h.byteLength,g.push(h));return _.length&&g.duration<=0&&(g.duration=_[_.length-1].duration),_.byteLength+=g.byteLength,_.nalCount+=g.nalCount,_.duration+=g.duration,_.push(g),_},ht=function(d){var p;return!d[0][0].keyFrame&&d.length>1&&(p=d.shift(),d.byteLength-=p.byteLength,d.nalCount-=p.nalCount,d[0][0].dts=p.dts,d[0][0].pts=p.pts,d[0][0].duration+=p.duration),d},Yt=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},gi=function(d,p){var h=Yt();return h.dataOffset=p,h.compositionTimeOffset=d.pts-d.dts,h.duration=d.duration,h.size=4*d.length,h.size+=d.byteLength,d.keyFrame&&(h.flags.dependsOn=2,h.flags.isNonSyncSample=0),h},Ei=function(d,p){var h,g,_,T,w,S=p||0,P=[];for(h=0;h<d.length;h++)for(T=d[h],g=0;g<T.length;g++)w=T[g],_=gi(w,S),S+=_.size,P.push(_);return P},G=function(d){var p,h,g,_,T,w,S=0,P=d.byteLength,C=d.nalCount,L=P+4*C,B=new Uint8Array(L),ee=new DataView(B.buffer);for(p=0;p<d.length;p++)for(_=d[p],h=0;h<_.length;h++)for(T=_[h],g=0;g<T.length;g++)w=T[g],ee.setUint32(S,w.data.byteLength),S+=4,B.set(w.data,S),S+=w.data.byteLength;return B},J=function(d,p){var h,g=p||0,_=[];return h=gi(d,g),_.push(h),_},de=function(d){var p,h,g=0,_=d.byteLength,T=d.length,w=_+4*T,S=new Uint8Array(w),P=new DataView(S.buffer);for(p=0;p<d.length;p++)h=d[p],P.setUint32(g,h.data.byteLength),g+=4,S.set(h.data,g),g+=h.data.byteLength;return S},me={groupNalsIntoFrames:wt,groupFramesIntoGops:Ct,extendFirstKeyFrame:ht,generateSampleTable:Ei,concatenateNalData:G,generateSampleTableForFrame:J,concatenateNalDataForFrame:de},ce=[33,16,5,32,164,27],we=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ue=function(d){for(var p=[];d--;)p.push(0);return p},Ee=function(d){return Object.keys(d).reduce(function(p,h){return p[h]=new Uint8Array(d[h].reduce(function(g,_){return g.concat(_)},[])),p},{})},be,_e=function(){if(!be){var d={96e3:[ce,[227,64],ue(154),[56]],88200:[ce,[231],ue(170),[56]],64e3:[ce,[248,192],ue(240),[56]],48e3:[ce,[255,192],ue(268),[55,148,128],ue(54),[112]],44100:[ce,[255,192],ue(268),[55,163,128],ue(84),[112]],32e3:[ce,[255,192],ue(268),[55,234],ue(226),[112]],24e3:[ce,[255,192],ue(268),[55,255,128],ue(268),[111,112],ue(126),[224]],16e3:[ce,[255,192],ue(268),[55,255,128],ue(268),[111,255],ue(269),[223,108],ue(195),[1,192]],12e3:[we,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,253,128],ue(259),[56]],11025:[we,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,255,192],ue(268),[55,175,128],ue(108),[112]],8e3:[we,ue(268),[3,121,16],ue(47),[7]]};be=Ee(d)}return be},Re=9e4,ke,Me,je,qe,ut,ft,At;ke=function(d){return d*Re},Me=function(d,p){return d*p},je=function(d){return d/Re},qe=function(d,p){return d/p},ut=function(d,p){return ke(qe(d,p))},ft=function(d,p){return Me(je(d),p)},At=function(d,p,h){return je(h?d:d-p)};var Oe={ONE_SECOND_IN_TS:Re,secondsToVideoTs:ke,secondsToAudioTs:Me,videoTsToSeconds:je,audioTsToSeconds:qe,audioTsToVideoTs:ut,videoTsToAudioTs:ft,metadataTsToSeconds:At},lr=function(d){var p,h,g=0;for(p=0;p<d.length;p++)h=d[p],g+=h.data.byteLength;return g},Xn=function(d,p,h,g){var _,T=0,w=0,S=0,P=0,C,L,B;if(p.length&&(_=Oe.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),T=Math.ceil(Oe.ONE_SECOND_IN_TS/(d.samplerate/1024)),h&&g&&(w=_-Math.max(h,g),S=Math.floor(w/T),P=S*T),!(S<1||P>Oe.ONE_SECOND_IN_TS/2))){for(C=_e()[d.samplerate],C||(C=p[0].data),L=0;L<S;L++)B=p[0],p.splice(0,0,{data:C,dts:B.dts-T,pts:B.pts-T});return d.baseMediaDecodeTime-=Math.floor(Oe.videoTsToAudioTs(P,d.samplerate)),P}},Cr=function(d,p,h){return p.minSegmentDts>=h?d:(p.minSegmentDts=1/0,d.filter(function(g){return g.dts>=h?(p.minSegmentDts=Math.min(p.minSegmentDts,g.dts),p.minSegmentPts=p.minSegmentDts,!0):!1}))},Qn=function(d){var p,h,g=[];for(p=0;p<d.length;p++)h=d[p],g.push({size:h.data.byteLength,duration:1024});return g},Vt=function(d){var p,h,g=0,_=new Uint8Array(lr(d));for(p=0;p<d.length;p++)h=d[p],_.set(h.data,g),g+=h.data.byteLength;return _},jt={prefixWithSilence:Xn,trimAdtsFramesByEarliestDts:Cr,generateSampleTable:Qn,concatenateFrameData:Vt},ls=Oe.ONE_SECOND_IN_TS,Sd=function(d,p){typeof p.pts=="number"&&(d.timelineStartInfo.pts===void 0&&(d.timelineStartInfo.pts=p.pts),d.minSegmentPts===void 0?d.minSegmentPts=p.pts:d.minSegmentPts=Math.min(d.minSegmentPts,p.pts),d.maxSegmentPts===void 0?d.maxSegmentPts=p.pts:d.maxSegmentPts=Math.max(d.maxSegmentPts,p.pts)),typeof p.dts=="number"&&(d.timelineStartInfo.dts===void 0&&(d.timelineStartInfo.dts=p.dts),d.minSegmentDts===void 0?d.minSegmentDts=p.dts:d.minSegmentDts=Math.min(d.minSegmentDts,p.dts),d.maxSegmentDts===void 0?d.maxSegmentDts=p.dts:d.maxSegmentDts=Math.max(d.maxSegmentDts,p.dts))},Ed=function(d){delete d.minSegmentDts,delete d.maxSegmentDts,delete d.minSegmentPts,delete d.maxSegmentPts},Mu=function(d,p){var h,g,_=d.minSegmentDts;return p||(_-=d.timelineStartInfo.dts),h=d.timelineStartInfo.baseMediaDecodeTime,h+=_,h=Math.max(0,h),d.type==="audio"&&(g=d.samplerate/ls,h*=g,h=Math.floor(h)),h},Mt={clearDtsInfo:Ed,calculateTrackBaseMediaDecodeTime:Mu,collectDtsInfo:Sd},so=4,wd=128,Cd=function(d){for(var p=0,h={payloadType:-1,payloadSize:0},g=0,_=0;p<d.byteLength&&d[p]!==wd;){for(;d[p]===255;)g+=255,p++;for(g+=d[p++];d[p]===255;)_+=255,p++;if(_+=d[p++],!h.payload&&g===so){var T=String.fromCharCode(d[p+3],d[p+4],d[p+5],d[p+6]);if(T==="GA94"){h.payloadType=g,h.payloadSize=_,h.payload=d.subarray(p,p+_);break}else h.payload=void 0}p+=_,g=0,_=0}return h},Ad=function(d){return d.payload[0]!==181||(d.payload[1]<<8|d.payload[2])!==49||String.fromCharCode(d.payload[3],d.payload[4],d.payload[5],d.payload[6])!=="GA94"||d.payload[7]!==3?null:d.payload.subarray(8,d.payload.length-1)},Fu=function(d,p){var h=[],g,_,T,w;if(!(p[0]&64))return h;for(_=p[0]&31,g=0;g<_;g++)T=g*3,w={type:p[T+2]&3,pts:d},p[T+2]&4&&(w.ccData=p[T+3]<<8|p[T+4],h.push(w));return h},Id=function(d){for(var p=d.byteLength,h=[],g=1,_,T;g<p-2;)d[g]===0&&d[g+1]===0&&d[g+2]===3?(h.push(g+2),g+=2):g++;if(h.length===0)return d;_=p-h.length,T=new Uint8Array(_);var w=0;for(g=0;g<_;w++,g++)w===h[0]&&(w++,h.shift()),T[g]=d[w];return T},Ar={parseSei:Cd,parseUserData:Ad,parseCaptionPackets:Fu,discardEmulationPreventionBytes:Id,USER_DATA_REGISTERED_ITU_T_T35:so},Ot=function x(d){d=d||{},x.prototype.init.call(this),this.parse708captions_=typeof d.parse708captions=="boolean"?d.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Ge(0,0),new Ge(0,1),new Ge(1,0),new Ge(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ve({captionServices:d.captionServices})),this.reset(),this.ccStreams_.forEach(function(p){p.on("data",this.trigger.bind(this,"data")),p.on("partialdone",this.trigger.bind(this,"partialdone")),p.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Ot.prototype=new t,Ot.prototype.push=function(x){var d,p,h;if(x.nalUnitType==="sei_rbsp"&&(d=Ar.parseSei(x.escapedRBSP),!!d.payload&&d.payloadType===Ar.USER_DATA_REGISTERED_ITU_T_T35&&(p=Ar.parseUserData(d),!!p))){if(x.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(x.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}h=Ar.parseCaptionPackets(x.pts,p),this.captionPackets_=this.captionPackets_.concat(h),this.latestDts_!==x.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=x.dts}},Ot.prototype.flushCCStreams=function(x){this.ccStreams_.forEach(function(d){return x==="flush"?d.flush():d.partialFlush()},this)},Ot.prototype.flushStream=function(x){if(!this.captionPackets_.length){this.flushCCStreams(x);return}this.captionPackets_.forEach(function(d,p){d.presortIndex=p}),this.captionPackets_.sort(function(d,p){return d.pts===p.pts?d.presortIndex-p.presortIndex:d.pts-p.pts}),this.captionPackets_.forEach(function(d){d.type<2?this.dispatchCea608Packet(d):this.dispatchCea708Packet(d)},this),this.captionPackets_.length=0,this.flushCCStreams(x)},Ot.prototype.flush=function(){return this.flushStream("flush")},Ot.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ot.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(x){x.reset()})},Ot.prototype.dispatchCea608Packet=function(x){this.setsTextOrXDSActive(x)?this.activeCea608Channel_[x.type]=null:this.setsChannel1Active(x)?this.activeCea608Channel_[x.type]=0:this.setsChannel2Active(x)&&(this.activeCea608Channel_[x.type]=1),this.activeCea608Channel_[x.type]!==null&&this.ccStreams_[(x.type<<1)+this.activeCea608Channel_[x.type]].push(x)},Ot.prototype.setsChannel1Active=function(x){return(x.ccData&30720)===4096},Ot.prototype.setsChannel2Active=function(x){return(x.ccData&30720)===6144},Ot.prototype.setsTextOrXDSActive=function(x){return(x.ccData&28928)===256||(x.ccData&30974)===4138||(x.ccData&30974)===6186},Ot.prototype.dispatchCea708Packet=function(x){this.parse708captions_&&this.cc708Stream_.push(x)};var oo={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Pd=function(d){var p=oo[d]||d;return d&4096&&d===p?"":String.fromCharCode(p)},Ir=function(d){return 32<=d&&d<=127||160<=d&&d<=255},Jt=function(d){this.windowNum=d,this.reset()};Jt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},Jt.prototype.getText=function(){return this.rows.join(`
`)},Jt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},Jt.prototype.newLine=function(x){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(x),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},Jt.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},Jt.prototype.addText=function(x){this.rows[this.rowIdx]+=x},Jt.prototype.backspace=function(){if(!this.isEmpty()){var x=this.rows[this.rowIdx];this.rows[this.rowIdx]=x.substr(0,x.length-1)}};var pn=function(d,p,h){this.serviceNum=d,this.text="",this.currentWindow=new Jt(-1),this.windows=[],this.stream=h,typeof p=="string"&&this.createTextDecoder(p)};pn.prototype.init=function(x,d){this.startPts=x;for(var p=0;p<8;p++)this.windows[p]=new Jt(p),typeof d=="function"&&(this.windows[p].beforeRowOverflow=d)},pn.prototype.setCurrentWindow=function(x){this.currentWindow=this.windows[x]},pn.prototype.createTextDecoder=function(x){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(x)}catch(d){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+x+" encoding. "+d})}};var Ve=function x(d){d=d||{},x.prototype.init.call(this);var p=this,h=d.captionServices||{},g={},_;Object.keys(h).forEach(function(T){_=h[T],/^SERVICE/.test(T)&&(g[T]=_.encoding)}),this.serviceEncodings=g,this.current708Packet=null,this.services={},this.push=function(T){T.type===3?(p.new708Packet(),p.add708Bytes(T)):(p.current708Packet===null&&p.new708Packet(),p.add708Bytes(T))}};Ve.prototype=new t,Ve.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ve.prototype.add708Bytes=function(x){var d=x.ccData,p=d>>>8,h=d&255;this.current708Packet.ptsVals.push(x.pts),this.current708Packet.data.push(p),this.current708Packet.data.push(h)},Ve.prototype.push708Packet=function(){var x=this.current708Packet,d=x.data,p=null,h=null,g=0,_=d[g++];for(x.seq=_>>6,x.sizeCode=_&63;g<d.length;g++)_=d[g++],p=_>>5,h=_&31,p===7&&h>0&&(_=d[g++],p=_),this.pushServiceBlock(p,g,h),h>0&&(g+=h-1)},Ve.prototype.pushServiceBlock=function(x,d,p){var h,g=d,_=this.current708Packet.data,T=this.services[x];for(T||(T=this.initService(x,g));g<d+p&&g<_.length;g++)h=_[g],Ir(h)?g=this.handleText(g,T):h===24?g=this.multiByteCharacter(g,T):h===16?g=this.extendedCommands(g,T):128<=h&&h<=135?g=this.setCurrentWindow(g,T):152<=h&&h<=159?g=this.defineWindow(g,T):h===136?g=this.clearWindows(g,T):h===140?g=this.deleteWindows(g,T):h===137?g=this.displayWindows(g,T):h===138?g=this.hideWindows(g,T):h===139?g=this.toggleWindows(g,T):h===151?g=this.setWindowAttributes(g,T):h===144?g=this.setPenAttributes(g,T):h===145?g=this.setPenColor(g,T):h===146?g=this.setPenLocation(g,T):h===143?T=this.reset(g,T):h===8?T.currentWindow.backspace():h===12?T.currentWindow.clearText():h===13?T.currentWindow.pendingNewLine=!0:h===14?T.currentWindow.clearText():h===141&&g++},Ve.prototype.extendedCommands=function(x,d){var p=this.current708Packet.data,h=p[++x];return Ir(h)&&(x=this.handleText(x,d,{isExtended:!0})),x},Ve.prototype.getPts=function(x){return this.current708Packet.ptsVals[Math.floor(x/2)]},Ve.prototype.initService=function(x,d){var h="SERVICE"+x,p=this,h,g;return h in this.serviceEncodings&&(g=this.serviceEncodings[h]),this.services[x]=new pn(x,g,p),this.services[x].init(this.getPts(d),function(_){p.flushDisplayed(_,p.services[x])}),this.services[x]},Ve.prototype.handleText=function(x,d,p){var h=p&&p.isExtended,g=p&&p.isMultiByte,_=this.current708Packet.data,T=h?4096:0,w=_[x],S=_[x+1],P=d.currentWindow,C,L;return d.textDecoder_&&!h?(g?(L=[w,S],x++):L=[w],C=d.textDecoder_.decode(new Uint8Array(L))):C=Pd(T|w),P.pendingNewLine&&!P.isEmpty()&&P.newLine(this.getPts(x)),P.pendingNewLine=!1,P.addText(C),x},Ve.prototype.multiByteCharacter=function(x,d){var p=this.current708Packet.data,h=p[x+1],g=p[x+2];return Ir(h)&&Ir(g)&&(x=this.handleText(++x,d,{isMultiByte:!0})),x},Ve.prototype.setCurrentWindow=function(x,d){var p=this.current708Packet.data,h=p[x],g=h&7;return d.setCurrentWindow(g),x},Ve.prototype.defineWindow=function(x,d){var p=this.current708Packet.data,h=p[x],g=h&7;d.setCurrentWindow(g);var _=d.currentWindow;return h=p[++x],_.visible=(h&32)>>5,_.rowLock=(h&16)>>4,_.columnLock=(h&8)>>3,_.priority=h&7,h=p[++x],_.relativePositioning=(h&128)>>7,_.anchorVertical=h&127,h=p[++x],_.anchorHorizontal=h,h=p[++x],_.anchorPoint=(h&240)>>4,_.rowCount=h&15,h=p[++x],_.columnCount=h&63,h=p[++x],_.windowStyle=(h&56)>>3,_.penStyle=h&7,_.virtualRowCount=_.rowCount+1,x},Ve.prototype.setWindowAttributes=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.winAttr;return h=p[++x],g.fillOpacity=(h&192)>>6,g.fillRed=(h&48)>>4,g.fillGreen=(h&12)>>2,g.fillBlue=h&3,h=p[++x],g.borderType=(h&192)>>6,g.borderRed=(h&48)>>4,g.borderGreen=(h&12)>>2,g.borderBlue=h&3,h=p[++x],g.borderType+=(h&128)>>5,g.wordWrap=(h&64)>>6,g.printDirection=(h&48)>>4,g.scrollDirection=(h&12)>>2,g.justify=h&3,h=p[++x],g.effectSpeed=(h&240)>>4,g.effectDirection=(h&12)>>2,g.displayEffect=h&3,x},Ve.prototype.flushDisplayed=function(x,d){for(var p=[],h=0;h<8;h++)d.windows[h].visible&&!d.windows[h].isEmpty()&&p.push(d.windows[h].getText());d.endPts=x,d.text=p.join(`

`),this.pushCaption(d),d.startPts=x},Ve.prototype.pushCaption=function(x){x.text!==""&&(this.trigger("data",{startPts:x.startPts,endPts:x.endPts,text:x.text,stream:"cc708_"+x.serviceNum}),x.text="",x.startPts=x.endPts)},Ve.prototype.displayWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&(d.windows[_].visible=1);return x},Ve.prototype.hideWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&(d.windows[_].visible=0);return x},Ve.prototype.toggleWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&(d.windows[_].visible^=1);return x},Ve.prototype.clearWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&d.windows[_].clearText();return x},Ve.prototype.deleteWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&d.windows[_].reset();return x},Ve.prototype.setPenAttributes=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.penAttr;return h=p[++x],g.textTag=(h&240)>>4,g.offset=(h&12)>>2,g.penSize=h&3,h=p[++x],g.italics=(h&128)>>7,g.underline=(h&64)>>6,g.edgeType=(h&56)>>3,g.fontStyle=h&7,x},Ve.prototype.setPenColor=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.penColor;return h=p[++x],g.fgOpacity=(h&192)>>6,g.fgRed=(h&48)>>4,g.fgGreen=(h&12)>>2,g.fgBlue=h&3,h=p[++x],g.bgOpacity=(h&192)>>6,g.bgRed=(h&48)>>4,g.bgGreen=(h&12)>>2,g.bgBlue=h&3,h=p[++x],g.edgeRed=(h&48)>>4,g.edgeGreen=(h&12)>>2,g.edgeBlue=h&3,x},Ve.prototype.setPenLocation=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.penLoc;return d.currentWindow.pendingNewLine=!0,h=p[++x],g.row=h&15,h=p[++x],g.column=h&63,x},Ve.prototype.reset=function(x,d){var p=this.getPts(x);return this.flushDisplayed(p,d),this.initService(d.serviceNum,x)};var Od={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},mn=function(d){return d===null?"":(d=Od[d]||d,String.fromCharCode(d))},gn=14,Dd=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],wi=function(){for(var d=[],p=gn+1;p--;)d.push("");return d},Ge=function x(d,p){x.prototype.init.call(this),this.field_=d||0,this.dataChannel_=p||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(h){var g,_,T,w,S;if(g=h.ccData&32639,g===this.lastControlCode_){this.lastControlCode_=null;return}if((g&61440)===4096?this.lastControlCode_=g:g!==this.PADDING_&&(this.lastControlCode_=null),T=g>>>8,w=g&255,g!==this.PADDING_)if(g===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(g===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(h.pts),this.flushDisplayed(h.pts),_=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=_,this.startPts_=h.pts;else if(g===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(h.pts);else if(g===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(h.pts);else if(g===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(h.pts);else if(g===this.CARRIAGE_RETURN_)this.clearFormatting(h.pts),this.flushDisplayed(h.pts),this.shiftRowsUp_(),this.startPts_=h.pts;else if(g===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(g===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(h.pts),this.displayed_=wi();else if(g===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=wi();else if(g===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(h.pts),this.displayed_=wi()),this.mode_="paintOn",this.startPts_=h.pts;else if(this.isSpecialCharacter(T,w))T=(T&3)<<8,S=mn(T|w),this[this.mode_](h.pts,S),this.column_++;else if(this.isExtCharacter(T,w))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),T=(T&3)<<8,S=mn(T|w),this[this.mode_](h.pts,S),this.column_++;else if(this.isMidRowCode(T,w))this.clearFormatting(h.pts),this[this.mode_](h.pts," "),this.column_++,(w&14)===14&&this.addFormatting(h.pts,["i"]),(w&1)===1&&this.addFormatting(h.pts,["u"]);else if(this.isOffsetControlCode(T,w))this.column_+=w&3;else if(this.isPAC(T,w)){var P=Dd.indexOf(g&7968);this.mode_==="rollUp"&&(P-this.rollUpRows_+1<0&&(P=this.rollUpRows_-1),this.setRollUp(h.pts,P)),P!==this.row_&&(this.clearFormatting(h.pts),this.row_=P),w&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(h.pts,["u"]),(g&16)===16&&(this.column_=((g&14)>>1)*4),this.isColorPAC(w)&&(w&14)===14&&this.addFormatting(h.pts,["i"])}else this.isNormalChar(T)&&(w===0&&(w=null),S=mn(T),S+=mn(w),this[this.mode_](h.pts,S),this.column_+=S.length)}};Ge.prototype=new t,Ge.prototype.flushDisplayed=function(x){var d=this.displayed_.map(function(p,h){try{return p.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+h+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");d.length&&this.trigger("data",{startPts:this.startPts_,endPts:x,text:d,stream:this.name_})},Ge.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=wi(),this.nonDisplayed_=wi(),this.lastControlCode_=null,this.column_=0,this.row_=gn,this.rollUpRows_=2,this.formatting_=[]},Ge.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Ge.prototype.isSpecialCharacter=function(x,d){return x===this.EXT_&&d>=48&&d<=63},Ge.prototype.isExtCharacter=function(x,d){return(x===this.EXT_+1||x===this.EXT_+2)&&d>=32&&d<=63},Ge.prototype.isMidRowCode=function(x,d){return x===this.EXT_&&d>=32&&d<=47},Ge.prototype.isOffsetControlCode=function(x,d){return x===this.OFFSET_&&d>=33&&d<=35},Ge.prototype.isPAC=function(x,d){return x>=this.BASE_&&x<this.BASE_+8&&d>=64&&d<=127},Ge.prototype.isColorPAC=function(x){return x>=64&&x<=79||x>=96&&x<=127},Ge.prototype.isNormalChar=function(x){return x>=32&&x<=127},Ge.prototype.setRollUp=function(x,d){if(this.mode_!=="rollUp"&&(this.row_=gn,this.mode_="rollUp",this.flushDisplayed(x),this.nonDisplayed_=wi(),this.displayed_=wi()),d!==void 0&&d!==this.row_)for(var p=0;p<this.rollUpRows_;p++)this.displayed_[d-p]=this.displayed_[this.row_-p],this.displayed_[this.row_-p]="";d===void 0&&(d=this.row_),this.topRow_=d-this.rollUpRows_+1},Ge.prototype.addFormatting=function(x,d){this.formatting_=this.formatting_.concat(d);var p=d.reduce(function(h,g){return h+"<"+g+">"},"");this[this.mode_](x,p)},Ge.prototype.clearFormatting=function(x){if(this.formatting_.length){var d=this.formatting_.reverse().reduce(function(p,h){return p+"</"+h+">"},"");this.formatting_=[],this[this.mode_](x,d)}},Ge.prototype.popOn=function(x,d){var p=this.nonDisplayed_[this.row_];p+=d,this.nonDisplayed_[this.row_]=p},Ge.prototype.rollUp=function(x,d){var p=this.displayed_[this.row_];p+=d,this.displayed_[this.row_]=p},Ge.prototype.shiftRowsUp_=function(){var x;for(x=0;x<this.topRow_;x++)this.displayed_[x]="";for(x=this.row_+1;x<gn+1;x++)this.displayed_[x]="";for(x=this.topRow_;x<this.row_;x++)this.displayed_[x]=this.displayed_[x+1];this.displayed_[this.row_]=""},Ge.prototype.paintOn=function(x,d){var p=this.displayed_[this.row_];p+=d,this.displayed_[this.row_]=p};var vn={CaptionStream:Ot,Cea608Stream:Ge,Cea708Stream:Ve},pt={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Ld=8589934592,kd=4294967296,uo="shared",La=function(d,p){var h=1;for(d>p&&(h=-1);Math.abs(p-d)>kd;)d+=h*Ld;return d},Yn=function x(d){var p,h;x.prototype.init.call(this),this.type_=d||uo,this.push=function(g){this.type_!==uo&&g.type!==this.type_||(h===void 0&&(h=g.dts),g.dts=La(g.dts,h),g.pts=La(g.pts,h),p=g.dts,this.trigger("data",g))},this.flush=function(){h=p,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){h=void 0,p=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Yn.prototype=new t;var lo={TimestampRolloverStream:Yn,handleRollover:La},Jn=function(d,p,h){var g,_="";for(g=p;g<h;g++)_+="%"+("00"+d[g].toString(16)).slice(-2);return _},_n=function(d,p,h){return decodeURIComponent(Jn(d,p,h))},Rd=function(d,p,h){return unescape(Jn(d,p,h))},yn=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},ds={TXXX:function(d){var p;if(d.data[0]===3){for(p=1;p<d.data.length;p++)if(d.data[p]===0){d.description=_n(d.data,1,p),d.value=_n(d.data,p+1,d.data.length).replace(/\0*$/,"");break}d.data=d.value}},WXXX:function(d){var p;if(d.data[0]===3){for(p=1;p<d.data.length;p++)if(d.data[p]===0){d.description=_n(d.data,1,p),d.url=_n(d.data,p+1,d.data.length);break}}},PRIV:function(d){var p;for(p=0;p<d.data.length;p++)if(d.data[p]===0){d.owner=Rd(d.data,0,p);break}d.privateData=d.data.subarray(p+1),d.data=d.privateData}},Vr;Vr=function(d){var p={descriptor:d&&d.descriptor},h=0,g=[],_=0,T;if(Vr.prototype.init.call(this),this.dispatchType=pt.METADATA_STREAM_TYPE.toString(16),p.descriptor)for(T=0;T<p.descriptor.length;T++)this.dispatchType+=("00"+p.descriptor[T].toString(16)).slice(-2);this.push=function(w){var S,P,C,L,B,ee;if(w.type==="timed-metadata"){if(w.dataAlignmentIndicator&&(_=0,g.length=0),g.length===0&&(w.data.length<10||w.data[0]!=="I".charCodeAt(0)||w.data[1]!=="D".charCodeAt(0)||w.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(g.push(w),_+=w.data.byteLength,g.length===1&&(h=yn(w.data.subarray(6,10)),h+=10),!(_<h)){for(S={data:new Uint8Array(h),frames:[],pts:g[0].pts,dts:g[0].dts},B=0;B<h;)S.data.set(g[0].data.subarray(0,h-B),B),B+=g[0].data.byteLength,_-=g[0].data.byteLength,g.shift();P=10,S.data[5]&64&&(P+=4,P+=yn(S.data.subarray(10,14)),h-=yn(S.data.subarray(16,20)));do{if(C=yn(S.data.subarray(P+4,P+8)),C<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(ee=String.fromCharCode(S.data[P],S.data[P+1],S.data[P+2],S.data[P+3]),L={id:ee,data:S.data.subarray(P+10,P+C+10)},L.key=L.id,ds[L.id]&&(ds[L.id](L),L.owner==="com.apple.streaming.transportStreamTimestamp")){var ae=L.data,Q=(ae[3]&1)<<30|ae[4]<<22|ae[5]<<14|ae[6]<<6|ae[7]>>>2;Q*=4,Q+=ae[7]&3,L.timeStamp=Q,S.pts===void 0&&S.dts===void 0&&(S.pts=L.timeStamp,S.dts=L.timeStamp),this.trigger("timestamp",L)}S.frames.push(L),P+=10,P+=C}while(P<h);this.trigger("data",S)}}}},Vr.prototype=new t;var Nu=Vr,Md=lo.TimestampRolloverStream,Tn,Pr,bn,Mi=188,Zn=71;Tn=function(){var d=new Uint8Array(Mi),p=0;Tn.prototype.init.call(this),this.push=function(h){var g=0,_=Mi,T;for(p?(T=new Uint8Array(h.byteLength+p),T.set(d.subarray(0,p)),T.set(h,p),p=0):T=h;_<T.byteLength;){if(T[g]===Zn&&T[_]===Zn){this.trigger("data",T.subarray(g,_)),g+=Mi,_+=Mi;continue}g++,_++}g<T.byteLength&&(d.set(T.subarray(g),0),p=T.byteLength-g)},this.flush=function(){p===Mi&&d[0]===Zn&&(this.trigger("data",d),p=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){p=0,this.trigger("reset")}},Tn.prototype=new t,Pr=function(){var d,p,h,g;Pr.prototype.init.call(this),g=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,d=function(T,w){var S=0;w.payloadUnitStartIndicator&&(S+=T[S]+1),w.type==="pat"?p(T.subarray(S),w):h(T.subarray(S),w)},p=function(T,w){w.section_number=T[7],w.last_section_number=T[8],g.pmtPid=(T[10]&31)<<8|T[11],w.pmtPid=g.pmtPid},h=function(T,w){var S,P,C,L;if(T[5]&1){for(g.programMapTable={video:null,audio:null,"timed-metadata":{}},S=(T[1]&15)<<8|T[2],P=3+S-4,C=(T[10]&15)<<8|T[11],L=12+C;L<P;){var B=T[L],ee=(T[L+1]&31)<<8|T[L+2];B===pt.H264_STREAM_TYPE&&g.programMapTable.video===null?g.programMapTable.video=ee:B===pt.ADTS_STREAM_TYPE&&g.programMapTable.audio===null?g.programMapTable.audio=ee:B===pt.METADATA_STREAM_TYPE&&(g.programMapTable["timed-metadata"][ee]=B),L+=((T[L+3]&15)<<8|T[L+4])+5}w.programMapTable=g.programMapTable}},this.push=function(_){var T={},w=4;if(T.payloadUnitStartIndicator=!!(_[1]&64),T.pid=_[1]&31,T.pid<<=8,T.pid|=_[2],(_[3]&48)>>>4>1&&(w+=_[w]+1),T.pid===0)T.type="pat",d(_.subarray(w),T),this.trigger("data",T);else if(T.pid===this.pmtPid)for(T.type="pmt",d(_.subarray(w),T),this.trigger("data",T);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([_,w,T]):this.processPes_(_,w,T)},this.processPes_=function(_,T,w){w.pid===this.programMapTable.video?w.streamType=pt.H264_STREAM_TYPE:w.pid===this.programMapTable.audio?w.streamType=pt.ADTS_STREAM_TYPE:w.streamType=this.programMapTable["timed-metadata"][w.pid],w.type="pes",w.data=_.subarray(T),this.trigger("data",w)}},Pr.prototype=new t,Pr.STREAM_TYPES={h264:27,adts:15},bn=function(){var d=this,p=!1,h={data:[],size:0},g={data:[],size:0},_={data:[],size:0},T,w=function(C,L){var B,ee=C[0]<<16|C[1]<<8|C[2];L.data=new Uint8Array,ee===1&&(L.packetLength=6+(C[4]<<8|C[5]),L.dataAlignmentIndicator=(C[6]&4)!==0,B=C[7],B&192&&(L.pts=(C[9]&14)<<27|(C[10]&255)<<20|(C[11]&254)<<12|(C[12]&255)<<5|(C[13]&254)>>>3,L.pts*=4,L.pts+=(C[13]&6)>>>1,L.dts=L.pts,B&64&&(L.dts=(C[14]&14)<<27|(C[15]&255)<<20|(C[16]&254)<<12|(C[17]&255)<<5|(C[18]&254)>>>3,L.dts*=4,L.dts+=(C[18]&6)>>>1)),L.data=C.subarray(9+C[8]))},S=function(C,L,B){var ee=new Uint8Array(C.size),ae={type:L},Q=0,ye=0,at=!1,tt;if(!(!C.data.length||C.size<9)){for(ae.trackId=C.data[0].pid,Q=0;Q<C.data.length;Q++)tt=C.data[Q],ee.set(tt.data,ye),ye+=tt.data.byteLength;w(ee,ae),at=L==="video"||ae.packetLength<=C.size,(B||at)&&(C.size=0,C.data.length=0),at&&d.trigger("data",ae)}};bn.prototype.init.call(this),this.push=function(P){({pat:function(){},pes:function(){var L,B;switch(P.streamType){case pt.H264_STREAM_TYPE:L=h,B="video";break;case pt.ADTS_STREAM_TYPE:L=g,B="audio";break;case pt.METADATA_STREAM_TYPE:L=_,B="timed-metadata";break;default:return}P.payloadUnitStartIndicator&&S(L,B,!0),L.data.push(P),L.size+=P.data.byteLength},pmt:function(){var L={type:"metadata",tracks:[]};T=P.programMapTable,T.video!==null&&L.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.video,codec:"avc",type:"video"}),T.audio!==null&&L.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.audio,codec:"adts",type:"audio"}),p=!0,d.trigger("data",L)}})[P.type]()},this.reset=function(){h.size=0,h.data.length=0,g.size=0,g.data.length=0,this.trigger("reset")},this.flushStreams_=function(){S(h,"video"),S(g,"audio"),S(_,"timed-metadata")},this.flush=function(){if(!p&&T){var P={type:"metadata",tracks:[]};T.video!==null&&P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.video,codec:"avc",type:"video"}),T.audio!==null&&P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.audio,codec:"adts",type:"audio"}),d.trigger("data",P)}p=!1,this.flushStreams_(),this.trigger("done")}},bn.prototype=new t;var fs={PAT_PID:0,MP2T_PACKET_LENGTH:Mi,TransportPacketStream:Tn,TransportParseStream:Pr,ElementaryStream:bn,TimestampRolloverStream:Md,CaptionStream:vn.CaptionStream,Cea608Stream:vn.Cea608Stream,Cea708Stream:vn.Cea708Stream,MetadataStream:Nu};for(var xn in pt)pt.hasOwnProperty(xn)&&(fs[xn]=pt[xn]);var Zt=fs,Uu=Oe.ONE_SECOND_IN_TS,dr,cs=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];dr=function(d){var p,h=0;dr.prototype.init.call(this),this.skipWarn_=function(g,_){this.trigger("log",{level:"warn",message:"adts skiping bytes "+g+" to "+_+" in frame "+h+" outside syncword"})},this.push=function(g){var _=0,T,w,S,P,C;if(d||(h=0),g.type==="audio"){p&&p.length?(S=p,p=new Uint8Array(S.byteLength+g.data.byteLength),p.set(S),p.set(g.data,S.byteLength)):p=g.data;for(var L;_+7<p.length;){if(p[_]!==255||(p[_+1]&246)!==240){typeof L!="number"&&(L=_),_++;continue}if(typeof L=="number"&&(this.skipWarn_(L,_),L=null),w=(~p[_+1]&1)*2,T=(p[_+3]&3)<<11|p[_+4]<<3|(p[_+5]&224)>>5,P=((p[_+6]&3)+1)*1024,C=P*Uu/cs[(p[_+2]&60)>>>2],p.byteLength-_<T)break;this.trigger("data",{pts:g.pts+h*C,dts:g.dts+h*C,sampleCount:P,audioobjecttype:(p[_+2]>>>6&3)+1,channelcount:(p[_+2]&1)<<2|(p[_+3]&192)>>>6,samplerate:cs[(p[_+2]&60)>>>2],samplingfrequencyindex:(p[_+2]&60)>>>2,samplesize:16,data:p.subarray(_+7+w,_+T)}),h++,_+=T}typeof L=="number"&&(this.skipWarn_(L,_),L=null),p=p.subarray(_)}},this.flush=function(){h=0,this.trigger("done")},this.reset=function(){p=void 0,this.trigger("reset")},this.endTimeline=function(){p=void 0,this.trigger("endedtimeline")}},dr.prototype=new t;var fo=dr,hs;hs=function(d){var p=d.byteLength,h=0,g=0;this.length=function(){return 8*p},this.bitsAvailable=function(){return 8*p+g},this.loadWord=function(){var _=d.byteLength-p,T=new Uint8Array(4),w=Math.min(4,p);if(w===0)throw new Error("no bytes available");T.set(d.subarray(_,_+w)),h=new DataView(T.buffer).getUint32(0),g=w*8,p-=w},this.skipBits=function(_){var T;g>_?(h<<=_,g-=_):(_-=g,T=Math.floor(_/8),_-=T*8,p-=T,this.loadWord(),h<<=_,g-=_)},this.readBits=function(_){var T=Math.min(g,_),w=h>>>32-T;return g-=T,g>0?h<<=T:p>0&&this.loadWord(),T=_-T,T>0?w<<T|this.readBits(T):w},this.skipLeadingZeros=function(){var _;for(_=0;_<g;++_)if(h&2147483648>>>_)return h<<=_,g-=_,_;return this.loadWord(),_+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var _=this.skipLeadingZeros();return this.readBits(_+1)-1},this.readExpGolomb=function(){var _=this.readUnsignedExpGolomb();return 1&_?1+_>>>1:-1*(_>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Bu=hs,Or,Dr,ps;Dr=function(){var d=0,p,h;Dr.prototype.init.call(this),this.push=function(g){var _;h?(_=new Uint8Array(h.byteLength+g.data.byteLength),_.set(h),_.set(g.data,h.byteLength),h=_):h=g.data;for(var T=h.byteLength;d<T-3;d++)if(h[d+2]===1){p=d+5;break}for(;p<T;)switch(h[p]){case 0:if(h[p-1]!==0){p+=2;break}else if(h[p-2]!==0){p++;break}d+3!==p-2&&this.trigger("data",h.subarray(d+3,p-2));do{p++}while(h[p]!==1&&p<T);d=p-2,p+=3;break;case 1:if(h[p-1]!==0||h[p-2]!==0){p+=3;break}this.trigger("data",h.subarray(d+3,p-2)),d=p-2,p+=3;break;default:p+=3;break}h=h.subarray(d),p-=d,d=0},this.reset=function(){h=null,d=0,this.trigger("reset")},this.flush=function(){h&&h.byteLength>3&&this.trigger("data",h.subarray(d+3)),h=null,d=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},Dr.prototype=new t,ps={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},Or=function(){var d=new Dr,p,h,g,_,T,w,S;Or.prototype.init.call(this),p=this,this.push=function(P){P.type==="video"&&(h=P.trackId,g=P.pts,_=P.dts,d.push(P))},d.on("data",function(P){var C={trackId:h,pts:g,dts:_,data:P,nalUnitTypeCode:P[0]&31};switch(C.nalUnitTypeCode){case 5:C.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:C.nalUnitType="sei_rbsp",C.escapedRBSP=T(P.subarray(1));break;case 7:C.nalUnitType="seq_parameter_set_rbsp",C.escapedRBSP=T(P.subarray(1)),C.config=w(C.escapedRBSP);break;case 8:C.nalUnitType="pic_parameter_set_rbsp";break;case 9:C.nalUnitType="access_unit_delimiter_rbsp";break}p.trigger("data",C)}),d.on("done",function(){p.trigger("done")}),d.on("partialdone",function(){p.trigger("partialdone")}),d.on("reset",function(){p.trigger("reset")}),d.on("endedtimeline",function(){p.trigger("endedtimeline")}),this.flush=function(){d.flush()},this.partialFlush=function(){d.partialFlush()},this.reset=function(){d.reset()},this.endTimeline=function(){d.endTimeline()},S=function(C,L){var B=8,ee=8,ae,Q;for(ae=0;ae<C;ae++)ee!==0&&(Q=L.readExpGolomb(),ee=(B+Q+256)%256),B=ee===0?B:ee},T=function(C){for(var L=C.byteLength,B=[],ee=1,ae,Q;ee<L-2;)C[ee]===0&&C[ee+1]===0&&C[ee+2]===3?(B.push(ee+2),ee+=2):ee++;if(B.length===0)return C;ae=L-B.length,Q=new Uint8Array(ae);var ye=0;for(ee=0;ee<ae;ye++,ee++)ye===B[0]&&(ye++,B.shift()),Q[ee]=C[ye];return Q},w=function(C){var L=0,B=0,ee=0,ae=0,Q,ye,at,tt,ai,Na,Kr,ta,ia,mt,Co,Je=[1,1],ra,Ii;if(Q=new Bu(C),ye=Q.readUnsignedByte(),tt=Q.readUnsignedByte(),at=Q.readUnsignedByte(),Q.skipUnsignedExpGolomb(),ps[ye]&&(ai=Q.readUnsignedExpGolomb(),ai===3&&Q.skipBits(1),Q.skipUnsignedExpGolomb(),Q.skipUnsignedExpGolomb(),Q.skipBits(1),Q.readBoolean()))for(Co=ai!==3?8:12,Ii=0;Ii<Co;Ii++)Q.readBoolean()&&(Ii<6?S(16,Q):S(64,Q));if(Q.skipUnsignedExpGolomb(),Na=Q.readUnsignedExpGolomb(),Na===0)Q.readUnsignedExpGolomb();else if(Na===1)for(Q.skipBits(1),Q.skipExpGolomb(),Q.skipExpGolomb(),Kr=Q.readUnsignedExpGolomb(),Ii=0;Ii<Kr;Ii++)Q.skipExpGolomb();if(Q.skipUnsignedExpGolomb(),Q.skipBits(1),ta=Q.readUnsignedExpGolomb(),ia=Q.readUnsignedExpGolomb(),mt=Q.readBits(1),mt===0&&Q.skipBits(1),Q.skipBits(1),Q.readBoolean()&&(L=Q.readUnsignedExpGolomb(),B=Q.readUnsignedExpGolomb(),ee=Q.readUnsignedExpGolomb(),ae=Q.readUnsignedExpGolomb()),Q.readBoolean()&&Q.readBoolean()){switch(ra=Q.readUnsignedByte(),ra){case 1:Je=[1,1];break;case 2:Je=[12,11];break;case 3:Je=[10,11];break;case 4:Je=[16,11];break;case 5:Je=[40,33];break;case 6:Je=[24,11];break;case 7:Je=[20,11];break;case 8:Je=[32,11];break;case 9:Je=[80,33];break;case 10:Je=[18,11];break;case 11:Je=[15,11];break;case 12:Je=[64,33];break;case 13:Je=[160,99];break;case 14:Je=[4,3];break;case 15:Je=[3,2];break;case 16:Je=[2,1];break;case 255:{Je=[Q.readUnsignedByte()<<8|Q.readUnsignedByte(),Q.readUnsignedByte()<<8|Q.readUnsignedByte()];break}}Je&&Je[0]/Je[1]}return{profileIdc:ye,levelIdc:at,profileCompatibility:tt,width:(ta+1)*16-L*2-B*2,height:(2-mt)*(ia+1)*16-ee*2-ae*2,sarRatio:Je}}},Or.prototype=new t;var co={H264Stream:Or,NalByteStream:Dr},ho=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],Hr=function(d,p){var h=d[p+6]<<21|d[p+7]<<14|d[p+8]<<7|d[p+9],g=d[p+5],_=(g&16)>>4;return h=h>=0?h:0,_?h+20:h+10},ju=function x(d,p){return d.length-p<10||d[p]!=="I".charCodeAt(0)||d[p+1]!=="D".charCodeAt(0)||d[p+2]!=="3".charCodeAt(0)?p:(p+=Hr(d,p),x(d,p))},Vu=function(d){var p=ju(d,0);return d.length>=p+2&&(d[p]&255)===255&&(d[p+1]&240)===240&&(d[p+1]&22)===16},po=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},Hu=function(d,p,h){var g,_="";for(g=p;g<h;g++)_+="%"+("00"+d[g].toString(16)).slice(-2);return _},$u=function(d,p,h){return unescape(Hu(d,p,h))},Wu=function(d,p){var h=(d[p+5]&224)>>5,g=d[p+4]<<3,_=d[p+3]&3<<11;return _|g|h},qu=function(d,p){return d[p]==="I".charCodeAt(0)&&d[p+1]==="D".charCodeAt(0)&&d[p+2]==="3".charCodeAt(0)?"timed-metadata":d[p]&!0&&(d[p+1]&240)===240?"audio":null},Fd=function(d){for(var p=0;p+5<d.length;){if(d[p]!==255||(d[p+1]&246)!==240){p++;continue}return ho[(d[p+2]&60)>>>2]}return null},Nd=function(d){var p,h,g,_;p=10,d[5]&64&&(p+=4,p+=po(d.subarray(10,14)));do{if(h=po(d.subarray(p+4,p+8)),h<1)return null;if(_=String.fromCharCode(d[p],d[p+1],d[p+2],d[p+3]),_==="PRIV"){g=d.subarray(p+10,p+h+10);for(var T=0;T<g.byteLength;T++)if(g[T]===0){var w=$u(g,0,T);if(w==="com.apple.streaming.transportStreamTimestamp"){var S=g.subarray(T+1),P=(S[3]&1)<<30|S[4]<<22|S[5]<<14|S[6]<<6|S[7]>>>2;return P*=4,P+=S[7]&3,P}break}}p+=10,p+=h}while(p<d.byteLength);return null},Sn={isLikelyAacData:Vu,parseId3TagSize:Hr,parseAdtsSize:Wu,parseType:qu,parseSampleRate:Fd,parseAacTimestamp:Nd},$r;$r=function(){var d=new Uint8Array,p=0;$r.prototype.init.call(this),this.setTimestamp=function(h){p=h},this.push=function(h){var g=0,_=0,T,w,S,P;for(d.length?(P=d.length,d=new Uint8Array(h.byteLength+P),d.set(d.subarray(0,P)),d.set(h,P)):d=h;d.length-_>=3;){if(d[_]==="I".charCodeAt(0)&&d[_+1]==="D".charCodeAt(0)&&d[_+2]==="3".charCodeAt(0)){if(d.length-_<10||(g=Sn.parseId3TagSize(d,_),_+g>d.length))break;w={type:"timed-metadata",data:d.subarray(_,_+g)},this.trigger("data",w),_+=g;continue}else if((d[_]&255)===255&&(d[_+1]&240)===240){if(d.length-_<7||(g=Sn.parseAdtsSize(d,_),_+g>d.length))break;S={type:"audio",data:d.subarray(_,_+g),pts:p,dts:p},this.trigger("data",S),_+=g;continue}_++}T=d.length-_,T>0?d=d.subarray(_):d=new Uint8Array},this.reset=function(){d=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){d=new Uint8Array,this.trigger("endedtimeline")}},$r.prototype=new t;var Ud=$r,Bd=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],ka=Bd,jd=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],En=jd,Vd=co.H264Stream,Hd=Sn.isLikelyAacData,$d=Oe.ONE_SECOND_IN_TS,Lr,Yi,_t,rt,Wd=function(d,p){p.stream=d,this.trigger("log",p)},mo=function(d,p){for(var h=Object.keys(p),g=0;g<h.length;g++){var _=h[g];_==="headOfPipeline"||!p[_].on||p[_].on("log",Wd.bind(d,_))}},go=function(d,p){var h;if(d.length!==p.length)return!1;for(h=0;h<d.length;h++)if(d[h]!==p[h])return!1;return!0},Ra=function(d,p,h,g,_,T){var w=h-p,S=g-p,P=_-h;return{start:{dts:d,pts:d+w},end:{dts:d+S,pts:d+P},prependedContentDuration:T,baseMediaDecodeTime:d}};Yi=function(d,p){var h=[],g,_=0,T=0,w=1/0;p=p||{},g=p.firstSequenceNumber||0,Yi.prototype.init.call(this),this.push=function(S){Mt.collectDtsInfo(d,S),d&&ka.forEach(function(P){d[P]=S[P]}),h.push(S)},this.setEarliestDts=function(S){_=S},this.setVideoBaseMediaDecodeTime=function(S){w=S},this.setAudioAppendStart=function(S){T=S},this.flush=function(){var S,P,C,L,B,ee,ae;if(h.length===0){this.trigger("done","AudioSegmentStream");return}S=jt.trimAdtsFramesByEarliestDts(h,d,_),d.baseMediaDecodeTime=Mt.calculateTrackBaseMediaDecodeTime(d,p.keepOriginalTimestamps),ae=jt.prefixWithSilence(d,S,T,w),d.samples=jt.generateSampleTable(S),C=xt.mdat(jt.concatenateFrameData(S)),h=[],P=xt.moof(g,[d]),L=new Uint8Array(P.byteLength+C.byteLength),g++,L.set(P),L.set(C,P.byteLength),Mt.clearDtsInfo(d),B=Math.ceil($d*1024/d.samplerate),S.length&&(ee=S.length*B,this.trigger("segmentTimingInfo",Ra(Oe.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),S[0].dts,S[0].pts,S[0].dts+ee,S[0].pts+ee,ae||0)),this.trigger("timingInfo",{start:S[0].pts,end:S[0].pts+ee})),this.trigger("data",{track:d,boxes:L}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Mt.clearDtsInfo(d),h=[],this.trigger("reset")}},Yi.prototype=new t,Lr=function(d,p){var h,g=[],_=[],T,w;p=p||{},h=p.firstSequenceNumber||0,Lr.prototype.init.call(this),delete d.minPTS,this.gopCache_=[],this.push=function(S){Mt.collectDtsInfo(d,S),S.nalUnitType==="seq_parameter_set_rbsp"&&!T&&(T=S.config,d.sps=[S.data],En.forEach(function(P){d[P]=T[P]},this)),S.nalUnitType==="pic_parameter_set_rbsp"&&!w&&(w=S.data,d.pps=[S.data]),g.push(S)},this.flush=function(){for(var S,P,C,L,B,ee,ae=0,Q,ye;g.length&&g[0].nalUnitType!=="access_unit_delimiter_rbsp";)g.shift();if(g.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(S=me.groupNalsIntoFrames(g),C=me.groupFramesIntoGops(S),C[0][0].keyFrame||(P=this.getGopForFusion_(g[0],d),P?(ae=P.duration,C.unshift(P),C.byteLength+=P.byteLength,C.nalCount+=P.nalCount,C.pts=P.pts,C.dts=P.dts,C.duration+=P.duration):C=me.extendFirstKeyFrame(C)),_.length){var at;if(p.alignGopsAtEnd?at=this.alignGopsAtEnd_(C):at=this.alignGopsAtStart_(C),!at){this.gopCache_.unshift({gop:C.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Mt.clearDtsInfo(d),C=at}Mt.collectDtsInfo(d,C),d.samples=me.generateSampleTable(C),B=xt.mdat(me.concatenateNalData(C)),d.baseMediaDecodeTime=Mt.calculateTrackBaseMediaDecodeTime(d,p.keepOriginalTimestamps),this.trigger("processedGopsInfo",C.map(function(tt){return{pts:tt.pts,dts:tt.dts,byteLength:tt.byteLength}})),Q=C[0],ye=C[C.length-1],this.trigger("segmentTimingInfo",Ra(d.baseMediaDecodeTime,Q.dts,Q.pts,ye.dts+ye.duration,ye.pts+ye.duration,ae)),this.trigger("timingInfo",{start:C[0].pts,end:C[C.length-1].pts+C[C.length-1].duration}),this.gopCache_.unshift({gop:C.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.trigger("baseMediaDecodeTime",d.baseMediaDecodeTime),this.trigger("timelineStartInfo",d.timelineStartInfo),L=xt.moof(h,[d]),ee=new Uint8Array(L.byteLength+B.byteLength),h++,ee.set(L),ee.set(B,L.byteLength),this.trigger("data",{track:d,boxes:ee}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),g=[],this.gopCache_.length=0,_.length=0,this.trigger("reset")},this.resetStream_=function(){Mt.clearDtsInfo(d),T=void 0,w=void 0},this.getGopForFusion_=function(S){var P=45e3,C=1e4,L=1/0,B,ee,ae,Q,ye;for(ye=0;ye<this.gopCache_.length;ye++)Q=this.gopCache_[ye],ae=Q.gop,!(!(d.pps&&go(d.pps[0],Q.pps[0]))||!(d.sps&&go(d.sps[0],Q.sps[0])))&&(ae.dts<d.timelineStartInfo.dts||(B=S.dts-ae.dts-ae.duration,B>=-C&&B<=P&&(!ee||L>B)&&(ee=Q,L=B)));return ee?ee.gop:null},this.alignGopsAtStart_=function(S){var P,C,L,B,ee,ae,Q,ye;for(ee=S.byteLength,ae=S.nalCount,Q=S.duration,P=C=0;P<_.length&&C<S.length&&(L=_[P],B=S[C],L.pts!==B.pts);){if(B.pts>L.pts){P++;continue}C++,ee-=B.byteLength,ae-=B.nalCount,Q-=B.duration}return C===0?S:C===S.length?null:(ye=S.slice(C),ye.byteLength=ee,ye.duration=Q,ye.nalCount=ae,ye.pts=ye[0].pts,ye.dts=ye[0].dts,ye)},this.alignGopsAtEnd_=function(S){var P,C,L,B,ee,ae;for(P=_.length-1,C=S.length-1,ee=null,ae=!1;P>=0&&C>=0;){if(L=_[P],B=S[C],L.pts===B.pts){ae=!0;break}if(L.pts>B.pts){P--;continue}P===_.length-1&&(ee=C),C--}if(!ae&&ee===null)return null;var Q;if(ae?Q=C:Q=ee,Q===0)return S;var ye=S.slice(Q),at=ye.reduce(function(tt,ai){return tt.byteLength+=ai.byteLength,tt.duration+=ai.duration,tt.nalCount+=ai.nalCount,tt},{byteLength:0,duration:0,nalCount:0});return ye.byteLength=at.byteLength,ye.duration=at.duration,ye.nalCount=at.nalCount,ye.pts=ye[0].pts,ye.dts=ye[0].dts,ye},this.alignGopsWith=function(S){_=S}},Lr.prototype=new t,rt=function(d,p){this.numberOfTracks=0,this.metadataStream=p,d=d||{},typeof d.remux<"u"?this.remuxTracks=!!d.remux:this.remuxTracks=!0,typeof d.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=d.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,rt.prototype.init.call(this),this.push=function(h){if(h.text)return this.pendingCaptions.push(h);if(h.frames)return this.pendingMetadata.push(h);this.pendingTracks.push(h.track),this.pendingBytes+=h.boxes.byteLength,h.track.type==="video"&&(this.videoTrack=h.track,this.pendingBoxes.push(h.boxes)),h.track.type==="audio"&&(this.audioTrack=h.track,this.pendingBoxes.unshift(h.boxes))}},rt.prototype=new t,rt.prototype.flush=function(x){var d=0,p={captions:[],captionStreams:{},metadata:[],info:{}},h,g,_,T=0,w;if(this.pendingTracks.length<this.numberOfTracks){if(x!=="VideoSegmentStream"&&x!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(T=this.videoTrack.timelineStartInfo.pts,En.forEach(function(S){p.info[S]=this.videoTrack[S]},this)):this.audioTrack&&(T=this.audioTrack.timelineStartInfo.pts,ka.forEach(function(S){p.info[S]=this.audioTrack[S]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?p.type=this.pendingTracks[0].type:p.type="combined",this.emittedTracks+=this.pendingTracks.length,_=xt.initSegment(this.pendingTracks),p.initSegment=new Uint8Array(_.byteLength),p.initSegment.set(_),p.data=new Uint8Array(this.pendingBytes),w=0;w<this.pendingBoxes.length;w++)p.data.set(this.pendingBoxes[w],d),d+=this.pendingBoxes[w].byteLength;for(w=0;w<this.pendingCaptions.length;w++)h=this.pendingCaptions[w],h.startTime=Oe.metadataTsToSeconds(h.startPts,T,this.keepOriginalTimestamps),h.endTime=Oe.metadataTsToSeconds(h.endPts,T,this.keepOriginalTimestamps),p.captionStreams[h.stream]=!0,p.captions.push(h);for(w=0;w<this.pendingMetadata.length;w++)g=this.pendingMetadata[w],g.cueTime=Oe.metadataTsToSeconds(g.pts,T,this.keepOriginalTimestamps),p.metadata.push(g);for(p.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",p),w=0;w<p.captions.length;w++)h=p.captions[w],this.trigger("caption",h);for(w=0;w<p.metadata.length;w++)g=p.metadata[w],this.trigger("id3Frame",g)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},rt.prototype.setRemux=function(x){this.remuxTracks=x},_t=function(d){var p=this,h=!0,g,_;_t.prototype.init.call(this),d=d||{},this.baseMediaDecodeTime=d.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var T={};this.transmuxPipeline_=T,T.type="aac",T.metadataStream=new Zt.MetadataStream,T.aacStream=new Ud,T.audioTimestampRolloverStream=new Zt.TimestampRolloverStream("audio"),T.timedMetadataTimestampRolloverStream=new Zt.TimestampRolloverStream("timed-metadata"),T.adtsStream=new fo,T.coalesceStream=new rt(d,T.metadataStream),T.headOfPipeline=T.aacStream,T.aacStream.pipe(T.audioTimestampRolloverStream).pipe(T.adtsStream),T.aacStream.pipe(T.timedMetadataTimestampRolloverStream).pipe(T.metadataStream).pipe(T.coalesceStream),T.metadataStream.on("timestamp",function(w){T.aacStream.setTimestamp(w.timeStamp)}),T.aacStream.on("data",function(w){w.type!=="timed-metadata"&&w.type!=="audio"||T.audioSegmentStream||(_=_||{timelineStartInfo:{baseMediaDecodeTime:p.baseMediaDecodeTime},codec:"adts",type:"audio"},T.coalesceStream.numberOfTracks++,T.audioSegmentStream=new Yi(_,d),T.audioSegmentStream.on("log",p.getLogTrigger_("audioSegmentStream")),T.audioSegmentStream.on("timingInfo",p.trigger.bind(p,"audioTimingInfo")),T.adtsStream.pipe(T.audioSegmentStream).pipe(T.coalesceStream),p.trigger("trackinfo",{hasAudio:!!_,hasVideo:!!g}))}),T.coalesceStream.on("data",this.trigger.bind(this,"data")),T.coalesceStream.on("done",this.trigger.bind(this,"done")),mo(this,T)},this.setupTsPipeline=function(){var T={};this.transmuxPipeline_=T,T.type="ts",T.metadataStream=new Zt.MetadataStream,T.packetStream=new Zt.TransportPacketStream,T.parseStream=new Zt.TransportParseStream,T.elementaryStream=new Zt.ElementaryStream,T.timestampRolloverStream=new Zt.TimestampRolloverStream,T.adtsStream=new fo,T.h264Stream=new Vd,T.captionStream=new Zt.CaptionStream(d),T.coalesceStream=new rt(d,T.metadataStream),T.headOfPipeline=T.packetStream,T.packetStream.pipe(T.parseStream).pipe(T.elementaryStream).pipe(T.timestampRolloverStream),T.timestampRolloverStream.pipe(T.h264Stream),T.timestampRolloverStream.pipe(T.adtsStream),T.timestampRolloverStream.pipe(T.metadataStream).pipe(T.coalesceStream),T.h264Stream.pipe(T.captionStream).pipe(T.coalesceStream),T.elementaryStream.on("data",function(w){var S;if(w.type==="metadata"){for(S=w.tracks.length;S--;)!g&&w.tracks[S].type==="video"?(g=w.tracks[S],g.timelineStartInfo.baseMediaDecodeTime=p.baseMediaDecodeTime):!_&&w.tracks[S].type==="audio"&&(_=w.tracks[S],_.timelineStartInfo.baseMediaDecodeTime=p.baseMediaDecodeTime);g&&!T.videoSegmentStream&&(T.coalesceStream.numberOfTracks++,T.videoSegmentStream=new Lr(g,d),T.videoSegmentStream.on("log",p.getLogTrigger_("videoSegmentStream")),T.videoSegmentStream.on("timelineStartInfo",function(P){_&&!d.keepOriginalTimestamps&&(_.timelineStartInfo=P,T.audioSegmentStream.setEarliestDts(P.dts-p.baseMediaDecodeTime))}),T.videoSegmentStream.on("processedGopsInfo",p.trigger.bind(p,"gopInfo")),T.videoSegmentStream.on("segmentTimingInfo",p.trigger.bind(p,"videoSegmentTimingInfo")),T.videoSegmentStream.on("baseMediaDecodeTime",function(P){_&&T.audioSegmentStream.setVideoBaseMediaDecodeTime(P)}),T.videoSegmentStream.on("timingInfo",p.trigger.bind(p,"videoTimingInfo")),T.h264Stream.pipe(T.videoSegmentStream).pipe(T.coalesceStream)),_&&!T.audioSegmentStream&&(T.coalesceStream.numberOfTracks++,T.audioSegmentStream=new Yi(_,d),T.audioSegmentStream.on("log",p.getLogTrigger_("audioSegmentStream")),T.audioSegmentStream.on("timingInfo",p.trigger.bind(p,"audioTimingInfo")),T.audioSegmentStream.on("segmentTimingInfo",p.trigger.bind(p,"audioSegmentTimingInfo")),T.adtsStream.pipe(T.audioSegmentStream).pipe(T.coalesceStream)),p.trigger("trackinfo",{hasAudio:!!_,hasVideo:!!g})}}),T.coalesceStream.on("data",this.trigger.bind(this,"data")),T.coalesceStream.on("id3Frame",function(w){w.dispatchType=T.metadataStream.dispatchType,p.trigger("id3Frame",w)}),T.coalesceStream.on("caption",this.trigger.bind(this,"caption")),T.coalesceStream.on("done",this.trigger.bind(this,"done")),mo(this,T)},this.setBaseMediaDecodeTime=function(T){var w=this.transmuxPipeline_;d.keepOriginalTimestamps||(this.baseMediaDecodeTime=T),_&&(_.timelineStartInfo.dts=void 0,_.timelineStartInfo.pts=void 0,Mt.clearDtsInfo(_),w.audioTimestampRolloverStream&&w.audioTimestampRolloverStream.discontinuity()),g&&(w.videoSegmentStream&&(w.videoSegmentStream.gopCache_=[]),g.timelineStartInfo.dts=void 0,g.timelineStartInfo.pts=void 0,Mt.clearDtsInfo(g),w.captionStream.reset()),w.timestampRolloverStream&&w.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(T){_&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(T)},this.setRemux=function(T){var w=this.transmuxPipeline_;d.remux=T,w&&w.coalesceStream&&w.coalesceStream.setRemux(T)},this.alignGopsWith=function(T){g&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(T)},this.getLogTrigger_=function(T){var w=this;return function(S){S.stream=T,w.trigger("log",S)}},this.push=function(T){if(h){var w=Hd(T);w&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!w&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),h=!1}this.transmuxPipeline_.headOfPipeline.push(T)},this.flush=function(){h=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},_t.prototype=new t;var qd={Transmuxer:_t,VideoSegmentStream:Lr,AudioSegmentStream:Yi,AUDIO_PROPERTIES:ka,VIDEO_PROPERTIES:En,generateSegmentTimingInfo:Ra},Gd=function(d){return d>>>0},Gu=function(d){return("00"+d.toString(16)).slice(-2)},wn={toUnsigned:Gd,toHexString:Gu},ei=function(d){var p="";return p+=String.fromCharCode(d[0]),p+=String.fromCharCode(d[1]),p+=String.fromCharCode(d[2]),p+=String.fromCharCode(d[3]),p},ui=ei,Cn=wn.toUnsigned,zu=function x(d,p){var h=[],g,_,T,w,S;if(!p.length)return null;for(g=0;g<d.byteLength;)_=Cn(d[g]<<24|d[g+1]<<16|d[g+2]<<8|d[g+3]),T=ui(d.subarray(g+4,g+8)),w=_>1?g+_:d.byteLength,T===p[0]&&(p.length===1?h.push(d.subarray(g+8,w)):(S=x(d.subarray(g+8,w),p.slice(1)),S.length&&(h=h.concat(S)))),g=w;return h},He=zu,Fi=wn.toUnsigned,Ku=e.getUint64,Xu=function(d){var p={version:d[0],flags:new Uint8Array(d.subarray(1,4))};return p.version===1?p.baseMediaDecodeTime=Ku(d.subarray(4)):p.baseMediaDecodeTime=Fi(d[4]<<24|d[5]<<16|d[6]<<8|d[7]),p},ms=Xu,Qu=function(d){return{isLeading:(d[0]&12)>>>2,dependsOn:d[0]&3,isDependedOn:(d[1]&192)>>>6,hasRedundancy:(d[1]&48)>>>4,paddingValue:(d[1]&14)>>>1,isNonSyncSample:d[1]&1,degradationPriority:d[2]<<8|d[3]}},gs=Qu,Yu=function(d){var p={version:d[0],flags:new Uint8Array(d.subarray(1,4)),samples:[]},h=new DataView(d.buffer,d.byteOffset,d.byteLength),g=p.flags[2]&1,_=p.flags[2]&4,T=p.flags[1]&1,w=p.flags[1]&2,S=p.flags[1]&4,P=p.flags[1]&8,C=h.getUint32(4),L=8,B;for(g&&(p.dataOffset=h.getInt32(L),L+=4),_&&C&&(B={flags:gs(d.subarray(L,L+4))},L+=4,T&&(B.duration=h.getUint32(L),L+=4),w&&(B.size=h.getUint32(L),L+=4),P&&(p.version===1?B.compositionTimeOffset=h.getInt32(L):B.compositionTimeOffset=h.getUint32(L),L+=4),p.samples.push(B),C--);C--;)B={},T&&(B.duration=h.getUint32(L),L+=4),w&&(B.size=h.getUint32(L),L+=4),S&&(B.flags=gs(d.subarray(L,L+4)),L+=4),P&&(p.version===1?B.compositionTimeOffset=h.getInt32(L):B.compositionTimeOffset=h.getUint32(L),L+=4),p.samples.push(B);return p},li=Yu,zd=function(d){var p=new DataView(d.buffer,d.byteOffset,d.byteLength),h={version:d[0],flags:new Uint8Array(d.subarray(1,4)),trackId:p.getUint32(4)},g=h.flags[2]&1,_=h.flags[2]&2,T=h.flags[2]&8,w=h.flags[2]&16,S=h.flags[2]&32,P=h.flags[0]&65536,C=h.flags[0]&131072,L;return L=8,g&&(L+=4,h.baseDataOffset=p.getUint32(12),L+=4),_&&(h.sampleDescriptionIndex=p.getUint32(L),L+=4),T&&(h.defaultSampleDuration=p.getUint32(L),L+=4),w&&(h.defaultSampleSize=p.getUint32(L),L+=4),S&&(h.defaultSampleFlags=p.getUint32(L)),P&&(h.durationIsEmpty=!0),!g&&C&&(h.baseDataOffsetIsMoof=!0),h},vi=zd,vo=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},fr;typeof window<"u"?fr=window:typeof vo<"u"?fr=vo:typeof self<"u"?fr=self:fr={};var ni=fr,vs=Ar.discardEmulationPreventionBytes,_o=vn.CaptionStream,Lt=function(d,p){for(var h=d,g=0;g<p.length;g++){var _=p[g];if(h<_.size)return _;h-=_.size}return null},Wr=function(d,p,h){var g=new DataView(d.buffer,d.byteOffset,d.byteLength),_={logs:[],seiNals:[]},T,w,S,P;for(w=0;w+4<d.length;w+=S)if(S=g.getUint32(w),w+=4,!(S<=0))switch(d[w]&31){case 6:var C=d.subarray(w+1,w+1+S),L=Lt(w,p);if(T={nalUnitType:"sei_rbsp",size:S,data:C,escapedRBSP:vs(C),trackId:h},L)T.pts=L.pts,T.dts=L.dts,P=L;else if(P)T.pts=P.pts,T.dts=P.dts;else{_.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+w+" for trackId "+h+". See mux.js#223."});break}_.seiNals.push(T);break}return _},yo=function(d,p,h){var g=p,_=h.defaultSampleDuration||0,T=h.defaultSampleSize||0,w=h.trackId,S=[];return d.forEach(function(P){var C=li(P),L=C.samples;L.forEach(function(B){B.duration===void 0&&(B.duration=_),B.size===void 0&&(B.size=T),B.trackId=w,B.dts=g,B.compositionTimeOffset===void 0&&(B.compositionTimeOffset=0),typeof g=="bigint"?(B.pts=g+ni.BigInt(B.compositionTimeOffset),g+=ni.BigInt(B.duration)):(B.pts=g+B.compositionTimeOffset,g+=B.duration)}),S=S.concat(L)}),S},Kd=function(d,p){var h=He(d,["moof","traf"]),g=He(d,["mdat"]),_={},T=[];return g.forEach(function(w,S){var P=h[S];T.push({mdat:w,traf:P})}),T.forEach(function(w){var S=w.mdat,P=w.traf,C=He(P,["tfhd"]),L=vi(C[0]),B=L.trackId,ee=He(P,["tfdt"]),ae=ee.length>0?ms(ee[0]).baseMediaDecodeTime:0,Q=He(P,["trun"]),ye,at;p===B&&Q.length>0&&(ye=yo(Q,ae,L),at=Wr(S,ye,B),_[B]||(_[B]={seiNals:[],logs:[]}),_[B].seiNals=_[B].seiNals.concat(at.seiNals),_[B].logs=_[B].logs.concat(at.logs))}),_},To=function(d,p,h){var g;if(p===null)return null;g=Kd(d,p);var _=g[p]||{};return{seiNals:_.seiNals,logs:_.logs,timescale:h}},Xd=function(){var d=!1,p,h,g,_,T,w;this.isInitialized=function(){return d},this.init=function(S){p=new _o,d=!0,w=S?S.isPartial:!1,p.on("data",function(P){P.startTime=P.startPts/_,P.endTime=P.endPts/_,T.captions.push(P),T.captionStreams[P.stream]=!0}),p.on("log",function(P){T.logs.push(P)})},this.isNewInit=function(S,P){return S&&S.length===0||P&&typeof P=="object"&&Object.keys(P).length===0?!1:g!==S[0]||_!==P[g]},this.parse=function(S,P,C){var L;if(this.isInitialized()){if(!P||!C)return null;if(this.isNewInit(P,C))g=P[0],_=C[g];else if(g===null||!_)return h.push(S),null}else return null;for(;h.length>0;){var B=h.shift();this.parse(B,P,C)}return L=To(S,g,_),L&&L.logs&&(T.logs=T.logs.concat(L.logs)),L===null||!L.seiNals?T.logs.length?{logs:T.logs,captions:[],captionStreams:[]}:null:(this.pushNals(L.seiNals),this.flushStream(),T)},this.pushNals=function(S){if(!this.isInitialized()||!S||S.length===0)return null;S.forEach(function(P){p.push(P)})},this.flushStream=function(){if(!this.isInitialized())return null;w?p.partialFlush():p.flush()},this.clearParsedCaptions=function(){T.captions=[],T.captionStreams={},T.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;p.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){h=[],g=null,_=null,T?this.clearParsedCaptions():T={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Qd=Xd,An=wn.toUnsigned,cr=wn.toHexString,_s=e.getUint64,qr,bo,ys,Ts,Ma,In;qr=function(d){var p={},h=He(d,["moov","trak"]);return h.reduce(function(g,_){var T,w,S,P,C;return T=He(_,["tkhd"])[0],!T||(w=T[0],S=w===0?12:20,P=An(T[S]<<24|T[S+1]<<16|T[S+2]<<8|T[S+3]),C=He(_,["mdia","mdhd"])[0],!C)?null:(w=C[0],S=w===0?12:20,g[P]=An(C[S]<<24|C[S+1]<<16|C[S+2]<<8|C[S+3]),g)},p)},bo=function(d,p){var h;h=He(p,["moof","traf"]);var g=h.reduce(function(_,T){var w=He(T,["tfhd"])[0],S=An(w[4]<<24|w[5]<<16|w[6]<<8|w[7]),P=d[S]||9e4,C=He(T,["tfdt"])[0],L=new DataView(C.buffer,C.byteOffset,C.byteLength),B;C[0]===1?B=_s(C.subarray(4,12)):B=L.getUint32(4);var ee;return typeof B=="bigint"?ee=B/ni.BigInt(P):typeof B=="number"&&!isNaN(B)&&(ee=B/P),ee<Number.MAX_SAFE_INTEGER&&(ee=Number(ee)),ee<_&&(_=ee),_},1/0);return typeof g=="bigint"||isFinite(g)?g:0},ys=function(d,p){var h=He(p,["moof","traf"]),g=0,_=0,T;if(h&&h.length){var w=He(h[0],["tfhd"])[0],S=He(h[0],["trun"])[0],P=He(h[0],["tfdt"])[0];if(w){var C=vi(w);T=C.trackId}if(P){var L=ms(P);g=L.baseMediaDecodeTime}if(S){var B=li(S);B.samples&&B.samples.length&&(_=B.samples[0].compositionTimeOffset||0)}}var ee=d[T]||9e4;typeof g=="bigint"&&(_=ni.BigInt(_),ee=ni.BigInt(ee));var ae=(g+_)/ee;return typeof ae=="bigint"&&ae<Number.MAX_SAFE_INTEGER&&(ae=Number(ae)),ae},Ts=function(d){var p=He(d,["moov","trak"]),h=[];return p.forEach(function(g){var _=He(g,["mdia","hdlr"]),T=He(g,["tkhd"]);_.forEach(function(w,S){var P=ui(w.subarray(8,12)),C=T[S],L,B,ee;P==="vide"&&(L=new DataView(C.buffer,C.byteOffset,C.byteLength),B=L.getUint8(0),ee=B===0?L.getUint32(12):L.getUint32(20),h.push(ee))})}),h},In=function(d){var p=d[0],h=p===0?12:20;return An(d[h]<<24|d[h+1]<<16|d[h+2]<<8|d[h+3])},Ma=function(d){var p=He(d,["moov","trak"]),h=[];return p.forEach(function(g){var _={},T=He(g,["tkhd"])[0],w,S;T&&(w=new DataView(T.buffer,T.byteOffset,T.byteLength),S=w.getUint8(0),_.id=S===0?w.getUint32(12):w.getUint32(20));var P=He(g,["mdia","hdlr"])[0];if(P){var C=ui(P.subarray(8,12));C==="vide"?_.type="video":C==="soun"?_.type="audio":_.type=C}var L=He(g,["mdia","minf","stbl","stsd"])[0];if(L){var B=L.subarray(8);_.codec=ui(B.subarray(4,8));var ee=He(B,[_.codec])[0],ae,Q;ee&&(/^[asm]vc[1-9]$/i.test(_.codec)?(ae=ee.subarray(78),Q=ui(ae.subarray(4,8)),Q==="avcC"&&ae.length>11?(_.codec+=".",_.codec+=cr(ae[9]),_.codec+=cr(ae[10]),_.codec+=cr(ae[11])):_.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(_.codec)?(ae=ee.subarray(28),Q=ui(ae.subarray(4,8)),Q==="esds"&&ae.length>20&&ae[19]!==0?(_.codec+="."+cr(ae[19]),_.codec+="."+cr(ae[20]>>>2&63).replace(/^0/,"")):_.codec="mp4a.40.2"):_.codec=_.codec.toLowerCase())}var ye=He(g,["mdia","mdhd"])[0];ye&&(_.timescale=In(ye)),h.push(_)}),h};var bs={findBox:He,parseType:ui,timescale:qr,startTime:bo,compositionStartTime:ys,videoTrackIds:Ts,tracks:Ma,getTimescaleFromMediaHeader:In},xo=function(d){var p=d[1]&31;return p<<=8,p|=d[2],p},kr=function(d){return!!(d[1]&64)},Rr=function(d){var p=0;return(d[3]&48)>>>4>1&&(p+=d[4]+1),p},Yd=function(d,p){var h=xo(d);return h===0?"pat":h===p?"pmt":p?"pes":null},Ju=function(d){var p=kr(d),h=4+Rr(d);return p&&(h+=d[h]+1),(d[h+10]&31)<<8|d[h+11]},Ci=function(d){var p={},h=kr(d),g=4+Rr(d);if(h&&(g+=d[g]+1),!!(d[g+5]&1)){var _,T,w;_=(d[g+1]&15)<<8|d[g+2],T=3+_-4,w=(d[g+10]&15)<<8|d[g+11];for(var S=12+w;S<T;){var P=g+S;p[(d[P+1]&31)<<8|d[P+2]]=d[P],S+=((d[P+3]&15)<<8|d[P+4])+5}return p}},So=function(d,p){var h=xo(d),g=p[h];switch(g){case pt.H264_STREAM_TYPE:return"video";case pt.ADTS_STREAM_TYPE:return"audio";case pt.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},Fa=function(d){var p=kr(d);if(!p)return null;var h=4+Rr(d);if(h>=d.byteLength)return null;var g=null,_;return _=d[h+7],_&192&&(g={},g.pts=(d[h+9]&14)<<27|(d[h+10]&255)<<20|(d[h+11]&254)<<12|(d[h+12]&255)<<5|(d[h+13]&254)>>>3,g.pts*=4,g.pts+=(d[h+13]&6)>>>1,g.dts=g.pts,_&64&&(g.dts=(d[h+14]&14)<<27|(d[h+15]&255)<<20|(d[h+16]&254)<<12|(d[h+17]&255)<<5|(d[h+18]&254)>>>3,g.dts*=4,g.dts+=(d[h+18]&6)>>>1)),g},ea=function(d){switch(d){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Zu=function(d){for(var p=4+Rr(d),h=d.subarray(p),g=0,_=0,T=!1,w;_<h.byteLength-3;_++)if(h[_+2]===1){g=_+5;break}for(;g<h.byteLength;)switch(h[g]){case 0:if(h[g-1]!==0){g+=2;break}else if(h[g-2]!==0){g++;break}_+3!==g-2&&(w=ea(h[_+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0));do{g++}while(h[g]!==1&&g<h.length);_=g-2,g+=3;break;case 1:if(h[g-1]!==0||h[g-2]!==0){g+=3;break}w=ea(h[_+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0),_=g-2,g+=3;break;default:g+=3;break}return h=h.subarray(_),g-=_,_=0,h&&h.byteLength>3&&(w=ea(h[_+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0)),T},Jd={parseType:Yd,parsePat:Ju,parsePmt:Ci,parsePayloadUnitStartIndicator:kr,parsePesType:So,parsePesTime:Fa,videoPacketContainsKeyFrame:Zu},Ji=lo.handleRollover,Fe={};Fe.ts=Jd,Fe.aac=Sn;var Ai=Oe.ONE_SECOND_IN_TS,St=188,kt=71,Zd=function(d,p){for(var h=0,g=St,_,T;g<d.byteLength;){if(d[h]===kt&&d[g]===kt){switch(_=d.subarray(h,g),T=Fe.ts.parseType(_,p.pid),T){case"pat":p.pid=Fe.ts.parsePat(_);break;case"pmt":var w=Fe.ts.parsePmt(_);p.table=p.table||{},Object.keys(w).forEach(function(S){p.table[S]=w[S]});break}h+=St,g+=St;continue}h++,g++}},Eo=function(d,p,h){for(var g=0,_=St,T,w,S,P,C,L=!1;_<=d.byteLength;){if(d[g]===kt&&(d[_]===kt||_===d.byteLength)){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="audio"&&P&&(C=Fe.ts.parsePesTime(T),C&&(C.type="audio",h.audio.push(C),L=!0));break}if(L)break;g+=St,_+=St;continue}g++,_++}for(_=d.byteLength,g=_-St,L=!1;g>=0;){if(d[g]===kt&&(d[_]===kt||_===d.byteLength)){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="audio"&&P&&(C=Fe.ts.parsePesTime(T),C&&(C.type="audio",h.audio.push(C),L=!0));break}if(L)break;g-=St,_-=St;continue}g--,_--}},wo=function(d,p,h){for(var g=0,_=St,T,w,S,P,C,L,B,ee,ae=!1,Q={data:[],size:0};_<d.byteLength;){if(d[g]===kt&&d[_]===kt){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":if(S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="video"&&(P&&!ae&&(C=Fe.ts.parsePesTime(T),C&&(C.type="video",h.video.push(C),ae=!0)),!h.firstKeyFrame)){if(P&&Q.size!==0){for(L=new Uint8Array(Q.size),B=0;Q.data.length;)ee=Q.data.shift(),L.set(ee,B),B+=ee.byteLength;if(Fe.ts.videoPacketContainsKeyFrame(L)){var ye=Fe.ts.parsePesTime(L);ye?(h.firstKeyFrame=ye,h.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Q.size=0}Q.data.push(T),Q.size+=T.byteLength}break}if(ae&&h.firstKeyFrame)break;g+=St,_+=St;continue}g++,_++}for(_=d.byteLength,g=_-St,ae=!1;g>=0;){if(d[g]===kt&&d[_]===kt){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="video"&&P&&(C=Fe.ts.parsePesTime(T),C&&(C.type="video",h.video.push(C),ae=!0));break}if(ae)break;g-=St,_-=St;continue}g--,_--}},el=function(d,p){if(d.audio&&d.audio.length){var h=p;(typeof h>"u"||isNaN(h))&&(h=d.audio[0].dts),d.audio.forEach(function(T){T.dts=Ji(T.dts,h),T.pts=Ji(T.pts,h),T.dtsTime=T.dts/Ai,T.ptsTime=T.pts/Ai})}if(d.video&&d.video.length){var g=p;if((typeof g>"u"||isNaN(g))&&(g=d.video[0].dts),d.video.forEach(function(T){T.dts=Ji(T.dts,g),T.pts=Ji(T.pts,g),T.dtsTime=T.dts/Ai,T.ptsTime=T.pts/Ai}),d.firstKeyFrame){var _=d.firstKeyFrame;_.dts=Ji(_.dts,g),_.pts=Ji(_.pts,g),_.dtsTime=_.dts/Ai,_.ptsTime=_.pts/Ai}}},Gr=function(d){for(var p=!1,h=0,g=null,_=null,T=0,w=0,S;d.length-w>=3;){var P=Fe.aac.parseType(d,w);switch(P){case"timed-metadata":if(d.length-w<10){p=!0;break}if(T=Fe.aac.parseId3TagSize(d,w),T>d.length){p=!0;break}_===null&&(S=d.subarray(w,w+T),_=Fe.aac.parseAacTimestamp(S)),w+=T;break;case"audio":if(d.length-w<7){p=!0;break}if(T=Fe.aac.parseAdtsSize(d,w),T>d.length){p=!0;break}g===null&&(S=d.subarray(w,w+T),g=Fe.aac.parseSampleRate(S)),h++,w+=T;break;default:w++;break}if(p)return null}if(g===null||_===null)return null;var C=Ai/g,L={audio:[{type:"audio",dts:_,pts:_},{type:"audio",dts:_+h*1024*C,pts:_+h*1024*C}]};return L},xs=function(d){var p={pid:null,table:null},h={};Zd(d,p);for(var g in p.table)if(p.table.hasOwnProperty(g)){var _=p.table[g];switch(_){case pt.H264_STREAM_TYPE:h.video=[],wo(d,p,h),h.video.length===0&&delete h.video;break;case pt.ADTS_STREAM_TYPE:h.audio=[],Eo(d,p,h),h.audio.length===0&&delete h.audio;break}}return h},ef=function(d,p){var h=Fe.aac.isLikelyAacData(d),g;return h?g=Gr(d):g=xs(d),!g||!g.audio&&!g.video?null:(el(g,p),g)},tf={inspect:ef,parseAudioPes_:Eo},rf=function(d,p){p.on("data",function(h){var g=h.initSegment;h.initSegment={data:g.buffer,byteOffset:g.byteOffset,byteLength:g.byteLength};var _=h.data;h.data=_.buffer,d.postMessage({action:"data",segment:h,byteOffset:_.byteOffset,byteLength:_.byteLength},[h.data])}),p.on("done",function(h){d.postMessage({action:"done"})}),p.on("gopInfo",function(h){d.postMessage({action:"gopInfo",gopInfo:h})}),p.on("videoSegmentTimingInfo",function(h){var g={start:{decode:Oe.videoTsToSeconds(h.start.dts),presentation:Oe.videoTsToSeconds(h.start.pts)},end:{decode:Oe.videoTsToSeconds(h.end.dts),presentation:Oe.videoTsToSeconds(h.end.pts)},baseMediaDecodeTime:Oe.videoTsToSeconds(h.baseMediaDecodeTime)};h.prependedContentDuration&&(g.prependedContentDuration=Oe.videoTsToSeconds(h.prependedContentDuration)),d.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:g})}),p.on("audioSegmentTimingInfo",function(h){var g={start:{decode:Oe.videoTsToSeconds(h.start.dts),presentation:Oe.videoTsToSeconds(h.start.pts)},end:{decode:Oe.videoTsToSeconds(h.end.dts),presentation:Oe.videoTsToSeconds(h.end.pts)},baseMediaDecodeTime:Oe.videoTsToSeconds(h.baseMediaDecodeTime)};h.prependedContentDuration&&(g.prependedContentDuration=Oe.videoTsToSeconds(h.prependedContentDuration)),d.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:g})}),p.on("id3Frame",function(h){d.postMessage({action:"id3Frame",id3Frame:h})}),p.on("caption",function(h){d.postMessage({action:"caption",caption:h})}),p.on("trackinfo",function(h){d.postMessage({action:"trackinfo",trackInfo:h})}),p.on("audioTimingInfo",function(h){d.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Oe.videoTsToSeconds(h.start),end:Oe.videoTsToSeconds(h.end)}})}),p.on("videoTimingInfo",function(h){d.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Oe.videoTsToSeconds(h.start),end:Oe.videoTsToSeconds(h.end)}})}),p.on("log",function(h){d.postMessage({action:"log",log:h})})},zr=function(){function x(p,h){this.options=h||{},this.self=p,this.init()}var d=x.prototype;return d.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new qd.Transmuxer(this.options),rf(this.self,this.transmuxer)},d.pushMp4Captions=function(h){this.captionParser||(this.captionParser=new Qd,this.captionParser.init());var g=new Uint8Array(h.data,h.byteOffset,h.byteLength),_=this.captionParser.parse(g,h.trackIds,h.timescales);this.self.postMessage({action:"mp4Captions",captions:_&&_.captions||[],logs:_&&_.logs||[],data:g.buffer},[g.buffer])},d.probeMp4StartTime=function(h){var g=h.timescales,_=h.data,T=bs.startTime(g,_);this.self.postMessage({action:"probeMp4StartTime",startTime:T,data:_},[_.buffer])},d.probeMp4Tracks=function(h){var g=h.data,_=bs.tracks(g);this.self.postMessage({action:"probeMp4Tracks",tracks:_,data:g},[g.buffer])},d.probeTs=function(h){var g=h.data,_=h.baseStartTime,T=typeof _=="number"&&!isNaN(_)?_*Oe.ONE_SECOND_IN_TS:void 0,w=tf.inspect(g,T),S=null;w&&(S={hasVideo:w.video&&w.video.length===2||!1,hasAudio:w.audio&&w.audio.length===2||!1},S.hasVideo&&(S.videoStart=w.video[0].ptsTime),S.hasAudio&&(S.audioStart=w.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:S,data:g},[g.buffer])},d.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},d.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},d.push=function(h){var g=new Uint8Array(h.data,h.byteOffset,h.byteLength);this.transmuxer.push(g)},d.reset=function(){this.transmuxer.reset()},d.setTimestampOffset=function(h){var g=h.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Oe.secondsToVideoTs(g)))},d.setAudioAppendStart=function(h){this.transmuxer.setAudioAppendStart(Math.ceil(Oe.secondsToVideoTs(h.appendStart)))},d.setRemux=function(h){this.transmuxer.setRemux(h.remux)},d.flush=function(h){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},d.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},d.alignGopsWith=function(h){this.transmuxer.alignGopsWith(h.gopsToAlignWith.slice())},x}();self.onmessage=function(x){if(x.data.action==="init"&&x.data.options){this.messageHandlers=new zr(self,x.data.options);return}this.messageHandlers||(this.messageHandlers=new zr(self)),x.data&&x.data.action&&x.data.action!=="init"&&this.messageHandlers[x.data.action]&&this.messageHandlers[x.data.action](x.data)}})),QF=oE(XF),YF=function(t,i,r){var e=t.data.segment,n=e.type,s=e.initSegment,o=e.captions,l=e.captionStreams,f=e.metadata,m=e.videoFrameDtsTime,v=e.videoFramePtsTime;i.buffer.push({captions:o,captionStreams:l,metadata:f});var y=t.data.segment.boxes||{data:t.data.segment.data},E={type:n,data:new Uint8Array(y.data,y.data.byteOffset,y.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof m<"u"&&(E.videoFrameDtsTime=m),typeof v<"u"&&(E.videoFramePtsTime=v),r(E)},JF=function(t){var i=t.transmuxedData,r=t.callback;i.buffer=[],r(i)},ZF=function(t,i){i.gopInfo=t.data.gopInfo},dE=function(t){var i=t.transmuxer,r=t.bytes,e=t.audioAppendStart,n=t.gopsToAlignWith,s=t.remux,o=t.onData,l=t.onTrackInfo,f=t.onAudioTimingInfo,m=t.onVideoTimingInfo,v=t.onVideoSegmentTimingInfo,y=t.onAudioSegmentTimingInfo,E=t.onId3,I=t.onCaptions,O=t.onDone,D=t.onEndedTimeline,R=t.onTransmuxerLog,H=t.isEndOfTimeline,Z={buffer:[]},V=H,W=function(X){i.currentTransmux===t&&(X.data.action==="data"&&YF(X,Z,o),X.data.action==="trackinfo"&&l(X.data.trackInfo),X.data.action==="gopInfo"&&ZF(X,Z),X.data.action==="audioTimingInfo"&&f(X.data.audioTimingInfo),X.data.action==="videoTimingInfo"&&m(X.data.videoTimingInfo),X.data.action==="videoSegmentTimingInfo"&&v(X.data.videoSegmentTimingInfo),X.data.action==="audioSegmentTimingInfo"&&y(X.data.audioSegmentTimingInfo),X.data.action==="id3Frame"&&E([X.data.id3Frame],X.data.id3Frame.dispatchType),X.data.action==="caption"&&I(X.data.caption),X.data.action==="endedtimeline"&&(V=!1,D()),X.data.action==="log"&&R(X.data.log),X.data.type==="transmuxed"&&(V||(i.onmessage=null,JF({transmuxedData:Z,callback:O}),fE(i))))};if(i.onmessage=W,e&&i.postMessage({action:"setAudioAppendStart",appendStart:e}),Array.isArray(n)&&i.postMessage({action:"alignGopsWith",gopsToAlignWith:n}),typeof s<"u"&&i.postMessage({action:"setRemux",remux:s}),r.byteLength){var te=r instanceof ArrayBuffer?r:r.buffer,z=r instanceof ArrayBuffer?0:r.byteOffset;i.postMessage({action:"push",data:te,byteOffset:z,byteLength:r.byteLength},[te])}H&&i.postMessage({action:"endTimeline"}),i.postMessage({action:"flush"})},fE=function(t){t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),typeof t.currentTransmux=="function"?t.currentTransmux():dE(t.currentTransmux))},cE=function(t,i){t.postMessage({action:i}),fE(t)},hE=function(t,i){if(!i.currentTransmux){i.currentTransmux=t,cE(i,t);return}i.transmuxQueue.push(cE.bind(null,i,t))},eN=function(t){hE("reset",t)},tN=function(t){hE("endTimeline",t)},pE=function(t){if(!t.transmuxer.currentTransmux){t.transmuxer.currentTransmux=t,dE(t);return}t.transmuxer.transmuxQueue.push(t)},iN=function(t){var i=new QF;i.currentTransmux=null,i.transmuxQueue=[];var r=i.terminate;return i.terminate=function(){return i.currentTransmux=null,i.transmuxQueue.length=0,r.call(i)},i.postMessage({action:"init",options:t}),i},_v={reset:eN,endTimeline:tN,transmux:pE,createTransmuxer:iN},ph=function(t){var i=t.transmuxer,r=t.endAction||t.action,e=t.callback,n=Di({},t,{endAction:null,transmuxer:null,callback:null}),s=function f(m){m.data.action===r&&(i.removeEventListener("message",f),m.data.data&&(m.data.data=new Uint8Array(m.data.data,t.byteOffset||0,t.byteLength||m.data.data.byteLength),t.data&&(t.data=m.data.data)),e(m.data))};if(i.addEventListener("message",s),t.data){var o=t.data instanceof ArrayBuffer;n.byteOffset=o?0:t.data.byteOffset,n.byteLength=t.data.byteLength;var l=[o?t.data:t.data.buffer];i.postMessage(n,l)}else i.postMessage(n)},zn={FAILURE:2,TIMEOUT:-101,ABORTED:-102},yv=function(t){t.forEach(function(i){i.abort()})},rN=function(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}},nN=function(t){var i=t.target,r=Date.now()-i.requestTime,e={bandwidth:1/0,bytesReceived:0,roundTripTime:r||0};return e.bytesReceived=t.loaded,e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3),e},Tv=function(t,i){return i.timedout?{status:i.status,message:"HLS request timed-out at URL: "+i.uri,code:zn.TIMEOUT,xhr:i}:i.aborted?{status:i.status,message:"HLS request aborted at URL: "+i.uri,code:zn.ABORTED,xhr:i}:t?{status:i.status,message:"HLS request errored at URL: "+i.uri,code:zn.FAILURE,xhr:i}:i.responseType==="arraybuffer"&&i.response.byteLength===0?{status:i.status,message:"Empty HLS response at URL: "+i.uri,code:zn.FAILURE,xhr:i}:null},mE=function(t,i,r){return function(e,n){var s=n.response,o=Tv(e,n);if(o)return r(o,t);if(s.byteLength!==16)return r({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:zn.FAILURE,xhr:n},t);for(var l=new DataView(s),f=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]),m=0;m<i.length;m++)i[m].bytes=f;return r(null,t)}},gE=function(t,i){var r=ou(t.map.bytes);if(r!=="mp4"){var e=t.map.resolvedUri||t.map.uri;return i({internal:!0,message:"Found unsupported "+(r||"unknown")+" container for initialization segment at URL: "+e,code:zn.FAILURE})}ph({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:function(s){var o=s.tracks,l=s.data;return t.map.bytes=l,o.forEach(function(f){t.map.tracks=t.map.tracks||{},!t.map.tracks[f.type]&&(t.map.tracks[f.type]=f,typeof f.id=="number"&&f.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[f.id]=f.timescale))}),i(null)}})},aN=function(t){var i=t.segment,r=t.finishProcessingFn;return function(e,n){var s=Tv(e,n);if(s)return r(s,i);var o=new Uint8Array(n.response);if(i.map.key)return i.map.encryptedBytes=o,r(null,i);i.map.bytes=o,gE(i,function(l){if(l)return l.xhr=n,l.status=n.status,r(l,i);r(null,i)})}},sN=function(t){var i=t.segment,r=t.finishProcessingFn,e=t.responseType;return function(n,s){var o=Tv(n,s);if(o)return r(o,i);var l=e==="arraybuffer"||!s.responseText?s.response:zF(s.responseText.substring(i.lastReachedChar||0));return i.stats=rN(s),i.key?i.encryptedBytes=new Uint8Array(l):i.bytes=new Uint8Array(l),r(null,i)}},oN=function(t){var i=t.segment,r=t.bytes,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog,O=i.map&&i.map.tracks||{},D=Boolean(O.audio&&O.video),R=n.bind(null,i,"audio","start"),H=n.bind(null,i,"audio","end"),Z=n.bind(null,i,"video","start"),V=n.bind(null,i,"video","end"),W=function(){return pE({bytes:r,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,remux:D,onData:function(q){q.type=q.type==="combined"?"video":q.type,y(i,q)},onTrackInfo:function(q){e&&(D&&(q.isMuxed=!0),e(i,q))},onAudioTimingInfo:function(q){R&&typeof q.start<"u"&&(R(q.start),R=null),H&&typeof q.end<"u"&&H(q.end)},onVideoTimingInfo:function(q){Z&&typeof q.start<"u"&&(Z(q.start),Z=null),V&&typeof q.end<"u"&&V(q.end)},onVideoSegmentTimingInfo:function(q){s(q)},onAudioSegmentTimingInfo:function(q){o(q)},onId3:function(q,X){l(i,q,X)},onCaptions:function(q){f(i,[q])},isEndOfTimeline:m,onEndedTimeline:function(){v()},onTransmuxerLog:I,onDone:function(q){E&&(q.type=q.type==="combined"?"video":q.type,E(null,i,q))}})};ph({action:"probeTs",transmuxer:i.transmuxer,data:r,baseStartTime:i.baseStartTime,callback:function(z){i.bytes=r=z.data;var q=z.result;q&&(e(i,{hasAudio:q.hasAudio,hasVideo:q.hasVideo,isMuxed:D}),e=null,q.hasAudio&&!D&&R(q.audioStart),q.hasVideo&&Z(q.videoStart),R=null,Z=null),W()}})},vE=function(t){var i=t.segment,r=t.bytes,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog,O=new Uint8Array(r);if(NT(O)){i.isFmp4=!0;var D=i.map.tracks,R={isFmp4:!0,hasVideo:!!D.video,hasAudio:!!D.audio};D.audio&&D.audio.codec&&D.audio.codec!=="enca"&&(R.audioCodec=D.audio.codec),D.video&&D.video.codec&&D.video.codec!=="encv"&&(R.videoCodec=D.video.codec),D.video&&D.audio&&(R.isMuxed=!0),e(i,R);var H=function(V){y(i,{data:O,type:R.hasAudio&&!R.isMuxed?"audio":"video"}),V&&V.length&&f(i,V),E(null,i,{})};ph({action:"probeMp4StartTime",timescales:i.map.timescales,data:O,transmuxer:i.transmuxer,callback:function(V){var W=V.data,te=V.startTime;if(r=W.buffer,i.bytes=O=W,R.hasAudio&&!R.isMuxed&&n(i,"audio","start",te),R.hasVideo&&n(i,"video","start",te),!D.video||!W.byteLength||!i.transmuxer){H();return}ph({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:i.transmuxer,data:O,timescales:i.map.timescales,trackIds:[D.video.id],callback:function(q){r=q.data.buffer,i.bytes=O=q.data,q.logs.forEach(function(X){I(N.mergeOptions(X,{stream:"mp4CaptionParser"}))}),H(q.captions)}})}});return}if(!i.transmuxer){E(null,i,{});return}if(typeof i.container>"u"&&(i.container=ou(O)),i.container!=="ts"&&i.container!=="aac"){e(i,{hasAudio:!1,hasVideo:!1}),E(null,i,{});return}oN({segment:i,bytes:r,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I})},_E=function(t,i){var r=t.id,e=t.key,n=t.encryptedBytes,s=t.decryptionWorker,o=function f(m){if(m.data.source===r){s.removeEventListener("message",f);var v=m.data.decrypted;i(new Uint8Array(v.bytes,v.byteOffset,v.byteLength))}};s.addEventListener("message",o);var l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),s.postMessage(ZS({source:r,encrypted:n,key:l,iv:e.iv}),[n.buffer,l.buffer])},uN=function(t){var i=t.decryptionWorker,r=t.segment,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog;_E({id:r.requestId,key:r.key,encryptedBytes:r.encryptedBytes,decryptionWorker:i},function(O){r.bytes=O,vE({segment:r,bytes:r.bytes,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I})})},lN=function(t){var i=t.activeXhrs,r=t.decryptionWorker,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog,O=0,D=!1;return function(R,H){if(!D){if(R)return D=!0,yv(i),E(R,H);if(O+=1,O===i.length){var Z=function(){if(H.encryptedBytes)return uN({decryptionWorker:r,segment:H,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I});vE({segment:H,bytes:H.bytes,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I})};if(H.endOfAllRequests=Date.now(),H.map&&H.map.encryptedBytes&&!H.map.bytes)return _E({decryptionWorker:r,id:H.requestId+"-init",encryptedBytes:H.map.encryptedBytes,key:H.map.key},function(V){H.map.bytes=V,gE(H,function(W){if(W)return yv(i),E(W,H);Z()})});Z()}}}},dN=function(t){var i=t.loadendState,r=t.abortFn;return function(e){var n=e.target;n.aborted&&r&&!i.calledAbortFn&&(r(),i.calledAbortFn=!0)}},fN=function(t){var i=t.segment,r=t.progressFn;return t.trackInfoFn,t.timingInfoFn,t.videoSegmentTimingInfoFn,t.audioSegmentTimingInfoFn,t.id3Fn,t.captionsFn,t.isEndOfTimeline,t.endedTimelineFn,t.dataFn,function(e){var n=e.target;if(!n.aborted)return i.stats=N.mergeOptions(i.stats,nN(e)),!i.stats.firstBytesReceivedAt&&i.stats.bytesReceived&&(i.stats.firstBytesReceivedAt=Date.now()),r(e,i)}},cN=function(t){var i=t.xhr,r=t.xhrOptions,e=t.decryptionWorker,n=t.segment,s=t.abortFn,o=t.progressFn,l=t.trackInfoFn,f=t.timingInfoFn,m=t.videoSegmentTimingInfoFn,v=t.audioSegmentTimingInfoFn,y=t.id3Fn,E=t.captionsFn,I=t.isEndOfTimeline,O=t.endedTimelineFn,D=t.dataFn,R=t.doneFn,H=t.onTransmuxerLog,Z=[],V=lN({activeXhrs:Z,decryptionWorker:e,trackInfoFn:l,timingInfoFn:f,videoSegmentTimingInfoFn:m,audioSegmentTimingInfoFn:v,id3Fn:y,captionsFn:E,isEndOfTimeline:I,endedTimelineFn:O,dataFn:D,doneFn:R,onTransmuxerLog:H});if(n.key&&!n.key.bytes){var W=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&W.push(n.map.key);var te=N.mergeOptions(r,{uri:n.key.resolvedUri,responseType:"arraybuffer"}),z=mE(n,W,V),q=i(te,z);Z.push(q)}if(n.map&&!n.map.bytes){var X=n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri);if(X){var j=N.mergeOptions(r,{uri:n.map.key.resolvedUri,responseType:"arraybuffer"}),oe=mE(n,[n.map.key],V),re=i(j,oe);Z.push(re)}var se=N.mergeOptions(r,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:mv(n.map)}),he=aN({segment:n,finishProcessingFn:V}),le=i(se,he);Z.push(le)}var pe=N.mergeOptions(r,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:mv(n)}),ne=sN({segment:n,finishProcessingFn:V,responseType:pe.responseType}),fe=i(pe,ne);fe.addEventListener("progress",fN({segment:n,progressFn:o,trackInfoFn:l,timingInfoFn:f,videoSegmentTimingInfoFn:m,audioSegmentTimingInfoFn:v,id3Fn:y,captionsFn:E,isEndOfTimeline:I,endedTimelineFn:O,dataFn:D})),Z.push(fe);var Ie={};return Z.forEach(function(Ce){Ce.addEventListener("loadend",dN({loadendState:Ie,abortFn:s}))}),function(){return yv(Z)}},hN=hn("CodecUtils"),pN=function(t){var i=t.attributes||{};if(i.CODECS)return oi(i.CODECS)},yE=function(t,i){var r=i.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&r.AUDIO&&t.mediaGroups.AUDIO[r.AUDIO]},mN=function(t,i){if(!yE(t,i))return!0;var r=i.attributes||{},e=t.mediaGroups.AUDIO[r.AUDIO];for(var n in e)if(!e[n].uri&&!e[n].playlists)return!0;return!1},mh=function(t){var i={};return t.forEach(function(r){var e=r.mediaType,n=r.type,s=r.details;i[e]=i[e]||[],i[e].push(om(""+n+s))}),Object.keys(i).forEach(function(r){if(i[r].length>1){hN("multiple "+r+" codecs found as attributes: "+i[r].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),i[r]=null;return}i[r]=i[r][0]}),i},TE=function(t){var i=0;return t.audio&&i++,t.video&&i++,i},yd=function(t,i){var r=i.attributes||{},e=mh(pN(i)||[]);if(yE(t,i)&&!e.audio&&!mN(t,i)){var n=mh(Sy(t,r.AUDIO)||[]);n.audio&&(e.audio=n.audio)}return e},gh=hn("PlaylistSelector"),bE=function(t){if(!(!t||!t.playlist)){var i=t.playlist;return JSON.stringify({id:i.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:i.attributes&&i.attributes.CODECS||""})}},vh=function(t,i){if(!t)return"";var r=F.getComputedStyle(t);return r?r[i]:""},ku=function(t,i){var r=t.slice();t.sort(function(e,n){var s=i(e,n);return s===0?r.indexOf(e)-r.indexOf(n):s})},bv=function(t,i){var r,e;return t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||F.Number.MAX_VALUE,i.attributes.BANDWIDTH&&(e=i.attributes.BANDWIDTH),e=e||F.Number.MAX_VALUE,r-e},gN=function(t,i){var r,e;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||F.Number.MAX_VALUE,i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(e=i.attributes.RESOLUTION.width),e=e||F.Number.MAX_VALUE,r===e&&t.attributes.BANDWIDTH&&i.attributes.BANDWIDTH?t.attributes.BANDWIDTH-i.attributes.BANDWIDTH:r-e},xE=function(t,i,r,e,n,s){if(t){var o={bandwidth:i,width:r,height:e,limitRenditionByPlayerDimensions:n},l=t.playlists;ur.isAudioOnly(t)&&(l=s.getAudioTrackPlaylists_(),o.audioOnly=!0);var f=l.map(function(j){var oe,re=j.attributes&&j.attributes.RESOLUTION&&j.attributes.RESOLUTION.width,se=j.attributes&&j.attributes.RESOLUTION&&j.attributes.RESOLUTION.height;return oe=j.attributes&&j.attributes.BANDWIDTH,oe=oe||F.Number.MAX_VALUE,{bandwidth:oe,width:re,height:se,playlist:j}});ku(f,function(j,oe){return j.bandwidth-oe.bandwidth}),f=f.filter(function(j){return!ur.isIncompatible(j.playlist)});var m=f.filter(function(j){return ur.isEnabled(j.playlist)});m.length||(m=f.filter(function(j){return!ur.isDisabled(j.playlist)}));var v=m.filter(function(j){return j.bandwidth*mi.BANDWIDTH_VARIANCE<i}),y=v[v.length-1],E=v.filter(function(j){return j.bandwidth===y.bandwidth})[0];if(n===!1){var I=E||m[0]||f[0];if(I&&I.playlist){var O="sortedPlaylistReps";return E&&(O="bandwidthBestRep"),m[0]&&(O="enabledPlaylistReps"),gh("choosing "+bE(I)+" using "+O+" with options",o),I.playlist}return gh("could not choose a playlist with options",o),null}var D=v.filter(function(j){return j.width&&j.height});ku(D,function(j,oe){return j.width-oe.width});var R=D.filter(function(j){return j.width===r&&j.height===e});y=R[R.length-1];var H=R.filter(function(j){return j.bandwidth===y.bandwidth})[0],Z,V,W;H||(Z=D.filter(function(j){return j.width>r||j.height>e}),V=Z.filter(function(j){return j.width===Z[0].width&&j.height===Z[0].height}),y=V[V.length-1],W=V.filter(function(j){return j.bandwidth===y.bandwidth})[0]);var te;if(s.experimentalLeastPixelDiffSelector){var z=D.map(function(j){return j.pixelDiff=Math.abs(j.width-r)+Math.abs(j.height-e),j});ku(z,function(j,oe){return j.pixelDiff===oe.pixelDiff?oe.bandwidth-j.bandwidth:j.pixelDiff-oe.pixelDiff}),te=z[0]}var q=te||W||H||E||m[0]||f[0];if(q&&q.playlist){var X="sortedPlaylistReps";return te?X="leastPixelDiffRep":W?X="resolutionPlusOneRep":H?X="resolutionBestRep":E?X="bandwidthBestRep":m[0]&&(X="enabledPlaylistReps"),gh("choosing "+bE(q)+" using "+X+" with options",o),q.playlist}return gh("could not choose a playlist with options",o),null}},SE=function(){var t=this.useDevicePixelRatio&&F.devicePixelRatio||1;return xE(this.playlists.master,this.systemBandwidth,parseInt(vh(this.tech_.el(),"width"),10)*t,parseInt(vh(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},vN=function(t){var i=-1,r=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var e=this.useDevicePixelRatio&&F.devicePixelRatio||1;return i<0&&(i=this.systemBandwidth,r=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==r&&(i=t*this.systemBandwidth+(1-t)*i,r=this.systemBandwidth),xE(this.playlists.master,i,parseInt(vh(this.tech_.el(),"width"),10)*e,parseInt(vh(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},_N=function(t){var i=t.master,r=t.currentTime,e=t.bandwidth,n=t.duration,s=t.segmentDuration,o=t.timeUntilRebuffer,l=t.currentTimeline,f=t.syncController,m=i.playlists.filter(function(O){return!ur.isIncompatible(O)}),v=m.filter(ur.isEnabled);v.length||(v=m.filter(function(O){return!ur.isDisabled(O)}));var y=v.filter(ur.hasAttribute.bind(null,"BANDWIDTH")),E=y.map(function(O){var D=f.getSyncPoint(O,n,l,r),R=D?1:2,H=ur.estimateSegmentRequestTime(s,e,O),Z=H*R-o;return{playlist:O,rebufferingImpact:Z}}),I=E.filter(function(O){return O.rebufferingImpact<=0});return ku(I,function(O,D){return bv(D.playlist,O.playlist)}),I.length?I[0]:(ku(E,function(O,D){return O.rebufferingImpact-D.rebufferingImpact}),E[0]||null)},yN=function(){var t=this,i=this.playlists.master.playlists.filter(ur.isEnabled);ku(i,function(e,n){return bv(e,n)});var r=i.filter(function(e){return!!yd(t.playlists.master,e).video});return r[0]||null},TN=function(t){var i=0,r;return t.bytes&&(r=new Uint8Array(t.bytes),t.segments.forEach(function(e){r.set(e,i),i+=e.byteLength})),r},bN=function(t,i,r){if(!t[r]){i.trigger({type:"usage",name:"vhs-608"}),i.trigger({type:"usage",name:"hls-608"});var e=r;/^cc708_/.test(r)&&(e="SERVICE"+r.split("_")[1]);var n=i.textTracks().getTrackById(e);if(n)t[r]=n;else{var s=i.options_.vhs&&i.options_.vhs.captionServices||{},o=r,l=r,f=!1,m=s[e];m&&(o=m.label,l=m.language,f=m.default),t[r]=i.addRemoteTextTrack({kind:"captions",id:e,default:f,label:o,language:l},!1).track}}},xN=function(t){var i=t.inbandTextTracks,r=t.captionArray,e=t.timestampOffset;if(r){var n=F.WebKitDataCue||F.VTTCue;r.forEach(function(s){var o=s.stream;i[o].addCue(new n(s.startTime+e,s.endTime+e,s.text))})}},SN=function(t){Object.defineProperties(t.frame,{id:{get:function(){return N.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return N.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return N.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},EN=function(t){var i=t.inbandTextTracks,r=t.metadataArray,e=t.timestampOffset,n=t.videoDuration;if(r){var s=F.WebKitDataCue||F.VTTCue,o=i.metadataTrack_;if(o&&(r.forEach(function(E){var I=E.cueTime+e;typeof I!="number"||F.isNaN(I)||I<0||!(I<1/0)||E.frames.forEach(function(O){var D=new s(I,I,O.value||O.url||O.data||"");D.frame=O,D.value=O,SN(D),o.addCue(D)})}),!(!o.cues||!o.cues.length))){for(var l=o.cues,f=[],m=0;m<l.length;m++)l[m]&&f.push(l[m]);var v=f.reduce(function(E,I){var O=E[I.startTime]||[];return O.push(I),E[I.startTime]=O,E},{}),y=Object.keys(v).sort(function(E,I){return Number(E)-Number(I)});y.forEach(function(E,I){var O=v[E],D=Number(y[I+1])||n;O.forEach(function(R){R.endTime=D})})}}},wN=function(t,i,r){t.metadataTrack_||(t.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=i)},Td=function(t,i,r){var e,n;if(r&&r.cues)for(e=r.cues.length;e--;)n=r.cues[e],n.startTime>=t&&n.endTime<=i&&r.removeCue(n)},CN=function(t){var i=t.cues;if(i)for(var r=0;r<i.length;r++){for(var e=[],n=0,s=0;s<i.length;s++)i[r].startTime===i[s].startTime&&i[r].endTime===i[s].endTime&&i[r].text===i[s].text&&(n++,n>1&&e.push(i[s]));e.length&&e.forEach(function(o){return t.removeCue(o)})}},AN=function(t,i,r){if(typeof i>"u"||i===null||!t.length)return[];var e=Math.ceil((i-r+3)*ns.ONE_SECOND_IN_TS),n;for(n=0;n<t.length&&!(t[n].pts>e);n++);return t.slice(n)},IN=function(t,i,r){if(!i.length)return t;if(r)return i.slice();var e=i[0].pts,n=0;for(n;n<t.length&&!(t[n].pts>=e);n++);return t.slice(0,n).concat(i)},PN=function(t,i,r,e){for(var n=Math.ceil((i-e)*ns.ONE_SECOND_IN_TS),s=Math.ceil((r-e)*ns.ONE_SECOND_IN_TS),o=t.slice(),l=t.length;l--&&!(t[l].pts<=s););if(l===-1)return o;for(var f=l+1;f--&&!(t[f].pts<=n););return f=Math.max(f,0),o.splice(f,l-f+1),o},ON=function(t,i){if(!t&&!i||!t&&i||t&&!i)return!1;if(t===i)return!0;var r=Object.keys(t).sort(),e=Object.keys(i).sort();if(r.length!==e.length)return!1;for(var n=0;n<r.length;n++){var s=r[n];if(s!==e[n]||t[s]!==i[s])return!1}return!0},EE=22,DN=function(t,i,r){i=i||[];for(var e=[],n=0,s=0;s<i.length;s++){var o=i[s];if(t===o.timeline&&(e.push(s),n+=o.duration,n>r))return s}return e.length===0?0:e[e.length-1]},bd=1,LN=500,wE=function(t){return typeof t=="number"&&isFinite(t)},_h=1/60,kN=function(t,i,r){return t!=="main"||!i||!r?null:!r.hasAudio&&!r.hasVideo?"Neither audio nor video found in segment.":i.hasVideo&&!r.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!i.hasVideo&&r.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},RN=function(t,i,r){var e=i-mi.BACK_BUFFER_LENGTH;t.length&&(e=Math.max(e,t.start(0)));var n=i-r;return Math.min(n,e)},Ru=function(t){var i=t.startOfSegment,r=t.duration,e=t.segment,n=t.part,s=t.playlist,o=s.mediaSequence,l=s.id,f=s.segments,m=f===void 0?[]:f,v=t.mediaIndex,y=t.partIndex,E=t.timeline,I=m.length-1,O="mediaIndex/partIndex increment";t.getMediaInfoForTime?O="getMediaInfoForTime ("+t.getMediaInfoForTime+")":t.isSyncRequest&&(O="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(O+=" with independent "+t.independent);var D=typeof y=="number",R=t.segment.uri?"segment":"pre-segment",H=D?US({preloadSegment:e})-1:0;return R+" ["+(o+v)+"/"+(o+I)+"]"+(D?" part ["+y+"/"+H+"]":"")+(" segment start/end ["+e.start+" => "+e.end+"]")+(D?" part start/end ["+n.start+" => "+n.end+"]":"")+(" startOfSegment ["+i+"]")+(" duration ["+r+"]")+(" timeline ["+E+"]")+(" selected by ["+O+"]")+(" playlist ["+l+"]")},CE=function(t){return t+"TimingInfo"},MN=function(t){var i=t.segmentTimeline,r=t.currentTimeline,e=t.startOfSegment,n=t.buffered,s=t.overrideCheck;return!s&&i===r?null:i<r?e:n.length?n.end(n.length-1):e},AE=function(t){var i=t.timelineChangeController,r=t.currentTimeline,e=t.segmentTimeline,n=t.loaderType,s=t.audioDisabled;if(r===e)return!1;if(n==="audio"){var o=i.lastTimelineChange({type:"main"});return!o||o.to!==e}if(n==="main"&&s){var l=i.pendingTimelineChange({type:"audio"});return!(l&&l.to===e)}return!1},FN=function(t){var i=0;return["video","audio"].forEach(function(r){var e=t[r+"TimingInfo"];if(e){var n=e.start,s=e.end,o;typeof n=="bigint"||typeof s=="bigint"?o=F.BigInt(s)-F.BigInt(n):typeof n=="number"&&typeof s=="number"&&(o=s-n),typeof o<"u"&&o>i&&(i=o)}}),typeof i=="bigint"&&i<Number.MAX_SAFE_INTEGER&&(i=Number(i)),i},IE=function(t){var i=t.segmentDuration,r=t.maxDuration;return i?Math.round(i)>r+us:!1},NN=function(t,i){if(i!=="hls")return null;var r=FN({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!r)return null;var e=t.playlist.targetDuration,n=IE({segmentDuration:r,maxDuration:e*2}),s=IE({segmentDuration:r,maxDuration:e}),o="Segment with index "+t.mediaIndex+" "+("from playlist "+t.playlist.id+" ")+("has a duration of "+r+" ")+("when the reported duration is "+t.duration+" ")+("and the target duration is "+e+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return n||s?{severity:n?"warn":"info",message:o}:null},xv=function(a){Ae(t,a);function t(r,e){var n;if(n=a.call(this)||this,!r)throw new TypeError("Initialization settings are required");if(typeof r.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!r.mediaSource)throw new TypeError("No MediaSource specified");return n.bandwidth=r.bandwidth,n.throughput={rate:0,count:0},n.roundTrip=NaN,n.resetStats_(),n.mediaIndex=null,n.partIndex=null,n.hasPlayed_=r.hasPlayed,n.currentTime_=r.currentTime,n.seekable_=r.seekable,n.seeking_=r.seeking,n.duration_=r.duration,n.mediaSource_=r.mediaSource,n.vhs_=r.vhs,n.loaderType_=r.loaderType,n.currentMediaInfo_=void 0,n.startingMediaInfo_=void 0,n.segmentMetadataTrack_=r.segmentMetadataTrack,n.goalBufferLength_=r.goalBufferLength,n.sourceType_=r.sourceType,n.sourceUpdater_=r.sourceUpdater,n.inbandTextTracks_=r.inbandTextTracks,n.state_="INIT",n.timelineChangeController_=r.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!0,n.parse708captions_=r.parse708captions,n.useDtsForTimestampOffset_=r.useDtsForTimestampOffset,n.captionServices_=r.captionServices,n.experimentalExactManifestTimings=r.experimentalExactManifestTimings,n.checkBufferTimeout_=null,n.error_=void 0,n.currentTimeline_=-1,n.pendingSegment_=null,n.xhrOptions_=null,n.pendingSegments_=[],n.audioDisabled_=!1,n.isPendingTimestampOffset_=!1,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=N.browser.IE_VERSION>=11,n.appendInitSegment_={audio:!0,video:!0},n.playlistOfLastInitSegment_={audio:null,video:null},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={id3:[],caption:[]},n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=null,n.activeInitSegmentId_=null,n.initSegments_={},n.cacheEncryptionKeys_=r.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=r.decrypter,n.syncController_=r.syncController,n.syncPoint_={segmentIndex:0,time:0},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=function(){return n.trigger("syncinfoupdate")},n.syncController_.on("syncinfoupdate",n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener("sourceopen",function(){n.isEndOfStream_()||(n.ended_=!1)}),n.fetchAtBuffer_=!1,n.logger_=hn("SegmentLoader["+n.loaderType_+"]"),Object.defineProperty(Ue(n),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),n.sourceUpdater_.on("ready",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n.loaderType_==="main"&&n.timelineChangeController_.on("pendingtimelinechange",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n.loaderType_==="audio"&&n.timelineChangeController_.on("timelinechange",function(){n.hasEnoughInfoToLoad_()&&n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n}var i=t.prototype;return i.createTransmuxer_=function(){return _v.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},i.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},i.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&F.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},i.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},i.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},i.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,F.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},i.checkForAbort_=function(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e},i.error=function(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},i.endOfStream=function(){this.ended_=!0,this.transmuxer_&&_v.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},i.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return N.createTimeRanges();if(this.loaderType_==="main"){var n=e.hasAudio,s=e.hasVideo,o=e.isMuxed;if(s&&n&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},i.initSegmentForMap=function(e,n){if(n===void 0&&(n=!1),!e)return null;var s=hh(e),o=this.initSegments_[s];return n&&!o&&e.bytes&&(this.initSegments_[s]=o={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),o||e},i.segmentKey=function(e,n){if(n===void 0&&(n=!1),!e)return null;var s=eE(e),o=this.keyCache_[s];this.cacheEncryptionKeys_&&n&&!o&&e.bytes&&(this.keyCache_[s]=o={resolvedUri:e.resolvedUri,bytes:e.bytes});var l={resolvedUri:(o||e).resolvedUri};return o&&(l.bytes=o.bytes),l},i.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},i.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.playlist=function(e,n){if(n===void 0&&(n={}),!!e){var s=this.playlist_,o=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));var l=null;if(s&&(s.id?l=s.id:s.uri&&(l=s.uri)),this.logger_("playlist update ["+l+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==e.uri){this.mediaIndex!==null&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var f=e.mediaSequence-s.mediaSequence;if(this.logger_("live window shift ["+f+"]"),this.mediaIndex!==null)if(this.mediaIndex-=f,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var m=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!m.parts||!m.parts.length||!m.parts[this.partIndex])){var v=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=v}}o&&(o.mediaIndex-=f,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=e.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,e)}},i.pause=function(){this.checkBufferTimeout_&&(F.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},i.paused=function(){return this.checkBufferTimeout_===null},i.resetEverything=function(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},i.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},i.resyncLoader=function(){this.transmuxer_&&_v.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},i.remove=function(e,n,s,o){if(s===void 0&&(s=function(){}),o===void 0&&(o=!1),n===1/0&&(n=this.duration_()),n<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var l=1,f=function(){l--,l===0&&s()};(o||!this.audioDisabled_)&&(l++,this.sourceUpdater_.removeAudio(e,n,f)),(o||this.loaderType_==="main")&&(this.gopBuffer_=PN(this.gopBuffer_,e,n,this.timeMapping_),l++,this.sourceUpdater_.removeVideo(e,n,f));for(var m in this.inbandTextTracks_)Td(e,n,this.inbandTextTracks_[m]);Td(e,n,this.segmentMetadataTrack_),f()},i.monitorBuffer_=function(){this.checkBufferTimeout_&&F.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=F.setTimeout(this.monitorBufferTick_.bind(this),1)},i.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&F.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=F.setTimeout(this.monitorBufferTick_.bind(this),LN)},i.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&(typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},i.isEndOfStream_=function(e,n,s){if(e===void 0&&(e=this.mediaIndex),n===void 0&&(n=this.playlist_),s===void 0&&(s=this.partIndex),!n||!this.mediaSource_)return!1;var o=typeof e=="number"&&n.segments[e],l=e+1===n.segments.length,f=!o||!o.parts||s+1===o.parts.length;return n.endList&&this.mediaSource_.readyState==="open"&&l&&f},i.chooseNextRequest_=function(){var e=this.buffered_(),n=MS(e)||0,s=av(e,this.currentTime_()),o=!this.hasPlayed_()&&s>=1,l=s>=this.goalBufferLength_(),f=this.playlist_.segments;if(!f.length||o||l)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var m={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(m.isSyncRequest)m.mediaIndex=DN(this.currentTimeline_,f,n);else if(this.mediaIndex!==null){var v=f[this.mediaIndex],y=typeof this.partIndex=="number"?this.partIndex:-1;m.startOfSegment=v.end?v.end:n,v.parts&&v.parts[y+1]?(m.mediaIndex=this.mediaIndex,m.partIndex=y+1):m.mediaIndex=this.mediaIndex+1}else{var E=ur.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?n:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),I=E.segmentIndex,O=E.startTime,D=E.partIndex;m.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+n:"currentTime "+this.currentTime_(),m.mediaIndex=I,m.startOfSegment=O,m.partIndex=D}var R=f[m.mediaIndex],H=R&&typeof m.partIndex=="number"&&R.parts&&R.parts[m.partIndex];if(!R||typeof m.partIndex=="number"&&!H)return null;if(typeof m.partIndex!="number"&&R.parts&&(m.partIndex=0,H=R.parts[0]),!s&&H&&!H.independent)if(m.partIndex===0){var Z=f[m.mediaIndex-1],V=Z.parts&&Z.parts.length&&Z.parts[Z.parts.length-1];V&&V.independent&&(m.mediaIndex-=1,m.partIndex=Z.parts.length-1,m.independent="previous segment")}else R.parts[m.partIndex-1].independent&&(m.partIndex-=1,m.independent="previous part");var W=this.mediaSource_&&this.mediaSource_.readyState==="ended";return m.mediaIndex>=f.length-1&&W&&!this.seeking_()?null:this.generateSegmentInfo_(m)},i.generateSegmentInfo_=function(e){var n=e.independent,s=e.playlist,o=e.mediaIndex,l=e.startOfSegment,f=e.isSyncRequest,m=e.partIndex,v=e.forceTimestampOffset,y=e.getMediaInfoForTime,E=s.segments[o],I=typeof m=="number"&&E.parts[m],O={requestId:"segment-loader-"+Math.random(),uri:I&&I.resolvedUri||E.resolvedUri,mediaIndex:o,partIndex:I?m:null,isSyncRequest:f,startOfSegment:l,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:E.timeline,duration:I&&I.duration||E.duration,segment:E,part:I,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:y,independent:n},D=typeof v<"u"?v:this.isPendingTimestampOffset_;O.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:E.timeline,currentTimeline:this.currentTimeline_,startOfSegment:l,buffered:this.buffered_(),overrideCheck:D});var R=MS(this.sourceUpdater_.audioBuffered());return typeof R=="number"&&(O.audioAppendStart=R-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(O.gopsToAlignWith=AN(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),O},i.timestampOffsetForSegment_=function(e){return MN(e)},i.earlyAbortWhenNeeded_=function(e){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var n=this.currentTime_(),s=e.bandwidth,o=this.pendingSegment_.duration,l=ur.estimateSegmentRequestTime(o,s,this.playlist_,e.bytesReceived),f=nF(this.buffered_(),n,this.vhs_.tech_.playbackRate())-1;if(!(l<=f)){var m=_N({master:this.vhs_.playlists.master,currentTime:n,bandwidth:s,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:f,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(m){var v=l-f,y=v-m.rebufferingImpact,E=.5;f<=us&&(E=1),!(!m.playlist||m.playlist.uri===this.playlist_.uri||y<E)&&(this.bandwidth=m.playlist.attributes.BANDWIDTH*mi.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},i.handleAbort_=function(e){this.logger_("Aborting "+Ru(e)),this.mediaRequestsAborted+=1},i.handleProgress_=function(e,n){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&this.trigger("progress")},i.handleTrackInfo_=function(e,n){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(n)||(n=n||{},ON(this.currentMediaInfo_,n)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=n,this.currentMediaInfo_=n,this.logger_("trackinfo update",n),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=n,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},i.handleTimingInfo_=function(e,n,s,o){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var l=this.pendingSegment_,f=CE(n);l[f]=l[f]||{},l[f][s]=o,this.logger_("timinginfo: "+n+" - "+s+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},i.handleCaptions_=function(e,n){var s=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(n.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,n));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),f={};n.forEach(function(m){f[m.stream]=f[m.stream]||{startTime:1/0,captions:[],endTime:0};var v=f[m.stream];v.startTime=Math.min(v.startTime,m.startTime+l),v.endTime=Math.max(v.endTime,m.endTime+l),v.captions.push(m)}),Object.keys(f).forEach(function(m){var v=f[m],y=v.startTime,E=v.endTime,I=v.captions,O=s.inbandTextTracks_;s.logger_("adding cues from "+y+" -> "+E+" for "+m),bN(O,s.vhs_.tech_,m),Td(y,E,O[m]),xN({captionArray:I,inbandTextTracks:O,timestampOffset:l})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},i.handleId3_=function(e,n,s){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,n,s));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();wN(this.inbandTextTracks_,s,this.vhs_.tech_),EN({inbandTextTracks:this.inbandTextTracks_,metadataArray:n,timestampOffset:l,videoDuration:this.duration_()})}},i.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(e){return e()}),this.metadataQueue_.caption.forEach(function(e){return e()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},i.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach(function(n){return n()})},i.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach(function(n){return n()})},i.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!AE({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},i.getCurrentMediaInfo_=function(e){return e===void 0&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},i.getMediaInfo_=function(e){return e===void 0&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},i.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},i.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,n=this.getCurrentMediaInfo_();if(!e||!n)return!1;var s=n.hasAudio,o=n.hasVideo,l=n.isMuxed;return!(o&&!e.videoTimingInfo||s&&!this.audioDisabled_&&!l&&!e.audioTimingInfo||AE({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.handleData_=function(e,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,e,n));return}var s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),s.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),s.isFmp4=e.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[CE(n.type)].start;else{var o=this.getCurrentMediaInfo_(),l=this.loaderType_==="main"&&o&&o.hasVideo,f;l&&(f=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:l,firstVideoFrameTimeForData:f,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,n.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});var m=this.chooseNextRequest_();if(m.mediaIndex!==s.mediaIndex||m.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,n)}}},i.updateAppendInitSegmentStatus=function(e,n){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[n]!==e.playlist&&(this.appendInitSegment_[n]=!0)},i.getInitSegmentAndUpdateState_=function(e){var n=e.type,s=e.initSegment,o=e.map,l=e.playlist;if(o){var f=hh(o);if(this.activeInitSegmentId_===f)return null;s=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=f}return s&&this.appendInitSegment_[n]?(this.playlistOfLastInitSegment_[n]=l,this.appendInitSegment_[n]=!1,this.activeInitSegmentId_=null,s):null},i.handleQuotaExceededError_=function(e,n){var s=this,o=e.segmentInfo,l=e.type,f=e.bytes,m=this.sourceUpdater_.audioBuffered(),v=this.sourceUpdater_.videoBuffered();m.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+ao(m).join(", ")),v.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+ao(v).join(", "));var y=m.length?m.start(0):0,E=m.length?m.end(m.length-1):0,I=v.length?v.start(0):0,O=v.length?v.end(v.length-1):0;if(E-y<=bd&&O-I<=bd){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+f.byteLength+", ")+("audio buffer: "+ao(m).join(", ")+", ")+("video buffer: "+ao(v).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:l,bytes:f}));var D=this.currentTime_(),R=D-bd;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+R),this.remove(0,R,function(){s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+bd+"s"),s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=F.setTimeout(function(){s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),s.quotaExceededErrorRetryTimeout_=null,s.processCallQueue_()},bd*1e3)},!0)},i.handleAppendError_=function(e,n){var s=e.segmentInfo,o=e.type,l=e.bytes;if(n){if(n.code===EE){this.handleQuotaExceededError_({segmentInfo:s,type:o,bytes:l});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error(o+" append of "+l.length+"b failed for segment "+("#"+s.mediaIndex+" in playlist "+s.playlist.id)),this.trigger("appenderror")}},i.appendToSourceBuffer_=function(e){var n=e.segmentInfo,s=e.type,o=e.initSegment,l=e.data,f=e.bytes;if(!f){var m=[l],v=l.byteLength;o&&(m.unshift(o),v+=o.byteLength),f=TN({bytes:v,segments:m})}this.sourceUpdater_.appendBuffer({segmentInfo:n,type:s,bytes:f},this.handleAppendError_.bind(this,{segmentInfo:n,type:s,bytes:f}))},i.handleSegmentTimingInfo_=function(e,n,s){if(!(!this.pendingSegment_||n!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,l=e+"TimingInfo";o[l]||(o[l]={}),o[l].transmuxerPrependedSeconds=s.prependedContentDuration||0,o[l].transmuxedPresentationStart=s.start.presentation,o[l].transmuxedDecodeStart=s.start.decode,o[l].transmuxedPresentationEnd=s.end.presentation,o[l].transmuxedDecodeEnd=s.end.decode,o[l].baseMediaDecodeTime=s.baseMediaDecodeTime}},i.appendData_=function(e,n){var s=n.type,o=n.data;if(!(!o||!o.byteLength)&&!(s==="audio"&&this.audioDisabled_)){var l=this.getInitSegmentAndUpdateState_({type:s,initSegment:n.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:s,initSegment:l,data:o})}},i.loadSegment_=function(e){var n=this;if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var s=Di({},e,{forceTimestampOffset:!0});Di(e,n.generateSegmentInfo_(s)),n.isPendingTimestampOffset_=!1,n.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)},i.updateTransmuxerAndRequestSegment_=function(e){var n=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var s=this.createSimplifiedSegmentObj_(e),o=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),l=this.mediaIndex!==null,f=e.timeline!==this.currentTimeline_&&e.timeline>0,m=o||l&&f;this.logger_("Requesting "+Ru(e)),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=cN({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:m,endedTimelineFn:function(){n.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(y){var E=y.message,I=y.level,O=y.stream;n.logger_(Ru(e)+" logged from transmuxer stream "+O+" as a "+I+": "+E)}})},i.trimBackBuffer_=function(e){var n=RN(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)},i.createSimplifiedSegmentObj_=function(e){var n=e.segment,s=e.part,o={resolvedUri:s?s.resolvedUri:n.resolvedUri,byterange:s?s.byterange:n.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},l=e.playlist.segments[e.mediaIndex-1];if(l&&l.timeline===n.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),n.key){var f=n.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);o.key=this.segmentKey(n.key),o.key.iv=f}return n.map&&(o.map=this.initSegmentForMap(n.map)),o},i.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},i.saveBandwidthRelatedStats_=function(e,n){if(this.pendingSegment_.byteLength=n.bytesReceived,e<_h){this.logger_("Ignoring segment's bandwidth because its duration of "+e+(" is less than the min to record "+_h));return}this.bandwidth=n.bandwidth,this.roundTrip=n.roundTripTime},i.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},i.segmentRequestFinished_=function(e,n,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,n,s));return}if(this.saveTransferStats_(n.stats),!!this.pendingSegment_&&n.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===zn.ABORTED)return;if(this.pause(),e.code===zn.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,n.stats),o.endOfAllRequests=n.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=IN(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},i.setTimeMapping_=function(e){var n=this.syncController_.mappingForTimeline(e);n!==null&&(this.timeMapping_=n)},i.updateMediaSecondsLoaded_=function(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},i.shouldUpdateTransmuxerTimestampOffset_=function(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()},i.trueSegmentStart_=function(e){var n=e.currentStart,s=e.playlist,o=e.mediaIndex,l=e.firstVideoFrameTimeForData,f=e.currentVideoTimestampOffset,m=e.useVideoTimingInfo,v=e.videoTimingInfo,y=e.audioTimingInfo;if(typeof n<"u")return n;if(!m)return y.start;var E=s.segments[o-1];return o===0||!E||typeof E.start>"u"||E.end!==l+f?l:v.start},i.waitForAppendsToComplete_=function(e){var n=this.getCurrentMediaInfo_(e);if(!n){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var s=n.hasAudio,o=n.hasVideo,l=n.isMuxed,f=this.loaderType_==="main"&&o,m=!this.audioDisabled_&&s&&!l;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}f&&e.waitingOnAppends++,m&&e.waitingOnAppends++,f&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),m&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},i.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())},i.checkForIllegalMediaSwitch=function(e){var n=kN(this.loaderType_,this.getCurrentMediaInfo_(),e);return n?(this.error({message:n,blacklistDuration:1/0}),this.trigger("error"),!0):!1},i.updateSourceBufferTimestampOffset_=function(e){if(!(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")){var n=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),n=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),n=!0),n&&this.trigger("timestampoffset")}},i.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var n=e.videoTimingInfo,s=e.audioTimingInfo,o=e.timingInfo;return this.useDtsForTimestampOffset_?n&&typeof n.transmuxedDecodeStart=="number"?n.transmuxedDecodeStart:s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:o.start:o.start},i.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var n=this.getMediaInfo_(),s=this.loaderType_==="main"&&n&&n.hasVideo,o=s&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;o&&(e.timingInfo.end=typeof o.end=="number"?o.end:o.start+e.duration)},i.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});var n=NN(e,this.sourceType_);if(n&&(n.severity==="warn"?N.log.warn(n.message):this.logger_(n.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+Ru(e));return}this.logger_("Appended "+Ru(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var s=e.segment,o=e.part,l=s.end&&this.currentTime_()-s.end>e.playlist.targetDuration*3,f=o&&o.end&&this.currentTime_()-o.end>e.playlist.partTargetDuration*3;if(l||f){this.logger_("bad "+(l?"segment":"part")+" "+Ru(e)),this.resetEverything();return}var m=this.mediaIndex!==null;m&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},i.recordThroughput_=function(e){if(e.duration<_h){this.logger_("Ignoring segment's throughput because its duration of "+e.duration+(" is less than the min to record "+_h));return}var n=this.throughput.rate,s=Date.now()-e.endOfAllRequests+1,o=Math.floor(e.byteLength/s*8*1e3);this.throughput.rate+=(o-n)/++this.throughput.count},i.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var n=e.segment,s=n.start,o=n.end;if(!(!wE(s)||!wE(o))){Td(s,o,this.segmentMetadataTrack_);var l=F.WebKitDataCue||F.VTTCue,f={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:s,end:o},m=JSON.stringify(f),v=new l(s,o,m);v.value=f,this.segmentMetadataTrack_.addCue(v)}}},t}(N.EventTarget);function Oa(){}var PE=function(t){return typeof t!="string"?t:t.replace(/./,function(i){return i.toUpperCase()})},UN=["video","audio"],Sv=function(t,i){var r=i[t+"Buffer"];return r&&r.updating||i.queuePending[t]},BN=function(t,i){for(var r=0;r<i.length;r++){var e=i[r];if(e.type==="mediaSource")return null;if(e.type===t)return r}return null},Ev=function a(t,i){if(i.queue.length!==0){var r=0,e=i.queue[r];if(e.type==="mediaSource"){!i.updating()&&i.mediaSource.readyState!=="closed"&&(i.queue.shift(),e.action(i),e.doneFn&&e.doneFn(),a("audio",i),a("video",i));return}if(t!=="mediaSource"&&!(!i.ready()||i.mediaSource.readyState==="closed"||Sv(t,i))){if(e.type!==t){if(r=BN(t,i.queue),r===null)return;e=i.queue[r]}if(i.queue.splice(r,1),i.queuePending[t]=e,e.action(t,i),!e.doneFn){i.queuePending[t]=null,a(t,i);return}}}},OE=function(t,i){var r=i[t+"Buffer"],e=PE(t);r&&(r.removeEventListener("updateend",i["on"+e+"UpdateEnd_"]),r.removeEventListener("error",i["on"+e+"Error_"]),i.codecs[t]=null,i[t+"Buffer"]=null)},Kn=function(t,i){return t&&i&&Array.prototype.indexOf.call(t.sourceBuffers,i)!==-1},Er={appendBuffer:function(t,i,r){return function(e,n){var s=n[e+"Buffer"];if(Kn(n.mediaSource,s)){n.logger_("Appending segment "+i.mediaIndex+"'s "+t.length+" bytes to "+e+"Buffer");try{s.appendBuffer(t)}catch(o){n.logger_("Error with code "+o.code+" "+(o.code===EE?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+i.mediaIndex+" to "+e+"Buffer")),n.queuePending[e]=null,r(o)}}}},remove:function(t,i){return function(r,e){var n=e[r+"Buffer"];if(Kn(e.mediaSource,n)){e.logger_("Removing "+t+" to "+i+" from "+r+"Buffer");try{n.remove(t,i)}catch{e.logger_("Remove "+t+" to "+i+" from "+r+"Buffer failed")}}}},timestampOffset:function(t){return function(i,r){var e=r[i+"Buffer"];Kn(r.mediaSource,e)&&(r.logger_("Setting "+i+"timestampOffset to "+t),e.timestampOffset=t)}},callback:function(t){return function(i,r){t()}},endOfStream:function(t){return function(i){if(i.mediaSource.readyState==="open"){i.logger_("Calling mediaSource endOfStream("+(t||"")+")");try{i.mediaSource.endOfStream(t)}catch(r){N.log.warn("Failed to call media source endOfStream",r)}}}},duration:function(t){return function(i){i.logger_("Setting mediaSource duration to "+t);try{i.mediaSource.duration=t}catch(r){N.log.warn("Failed to set media source duration",r)}}},abort:function(){return function(t,i){if(i.mediaSource.readyState==="open"){var r=i[t+"Buffer"];if(Kn(i.mediaSource,r)){i.logger_("calling abort on "+t+"Buffer");try{r.abort()}catch(e){N.log.warn("Failed to abort on "+t+"Buffer",e)}}}}},addSourceBuffer:function(t,i){return function(r){var e=PE(t),n=pa(i);r.logger_("Adding "+t+"Buffer with codec "+i+" to mediaSource");var s=r.mediaSource.addSourceBuffer(n);s.addEventListener("updateend",r["on"+e+"UpdateEnd_"]),s.addEventListener("error",r["on"+e+"Error_"]),r.codecs[t]=i,r[t+"Buffer"]=s}},removeSourceBuffer:function(t){return function(i){var r=i[t+"Buffer"];if(OE(t,i),!!Kn(i.mediaSource,r)){i.logger_("Removing "+t+"Buffer with codec "+i.codecs[t]+" from mediaSource");try{i.mediaSource.removeSourceBuffer(r)}catch(e){N.log.warn("Failed to removeSourceBuffer "+t+"Buffer",e)}}}},changeType:function(t){return function(i,r){var e=r[i+"Buffer"],n=pa(t);Kn(r.mediaSource,e)&&r.codecs[i]!==t&&(r.logger_("changing "+i+"Buffer codec from "+r.codecs[i]+" to "+t),e.changeType(n),r.codecs[i]=t)}}},wr=function(t){var i=t.type,r=t.sourceUpdater,e=t.action,n=t.doneFn,s=t.name;r.queue.push({type:i,action:e,doneFn:n,name:s}),Ev(i,r)},DE=function(t,i){return function(r){if(i.queuePending[t]){var e=i.queuePending[t].doneFn;i.queuePending[t]=null,e&&e(i[t+"Error_"])}Ev(t,i)}},LE=function(a){Ae(t,a);function t(r){var e;return e=a.call(this)||this,e.mediaSource=r,e.sourceopenListener_=function(){return Ev("mediaSource",Ue(e))},e.mediaSource.addEventListener("sourceopen",e.sourceopenListener_),e.logger_=hn("SourceUpdater"),e.audioTimestampOffset_=0,e.videoTimestampOffset_=0,e.queue=[],e.queuePending={audio:null,video:null},e.delayedAudioAppendQueue_=[],e.videoAppendQueued_=!1,e.codecs={},e.onVideoUpdateEnd_=DE("video",Ue(e)),e.onAudioUpdateEnd_=DE("audio",Ue(e)),e.onVideoError_=function(n){e.videoError_=n},e.onAudioError_=function(n){e.audioError_=n},e.createdSourceBuffers_=!1,e.initializedEme_=!1,e.triggeredReady_=!1,e}var i=t.prototype;return i.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},i.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},i.hasInitializedAnyEme=function(){return this.initializedEme_},i.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},i.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},i.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},i.addSourceBuffer=function(e,n){wr({type:"mediaSource",sourceUpdater:this,action:Er.addSourceBuffer(e,n),name:"addSourceBuffer"})},i.abort=function(e){wr({type:e,sourceUpdater:this,action:Er.abort(e),name:"abort"})},i.removeSourceBuffer=function(e){if(!this.canRemoveSourceBuffer()){N.log.error("removeSourceBuffer is not supported!");return}wr({type:"mediaSource",sourceUpdater:this,action:Er.removeSourceBuffer(e),name:"removeSourceBuffer"})},i.canRemoveSourceBuffer=function(){return!N.browser.IE_VERSION&&!N.browser.IS_FIREFOX&&F.MediaSource&&F.MediaSource.prototype&&typeof F.MediaSource.prototype.removeSourceBuffer=="function"},t.canChangeType=function(){return F.SourceBuffer&&F.SourceBuffer.prototype&&typeof F.SourceBuffer.prototype.changeType=="function"},i.canChangeType=function(){return this.constructor.canChangeType()},i.changeType=function(e,n){if(!this.canChangeType()){N.log.error("changeType is not supported!");return}wr({type:e,sourceUpdater:this,action:Er.changeType(n),name:"changeType"})},i.addOrChangeSourceBuffers=function(e){var n=this;if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(function(s){var o=e[s];if(!n.hasCreatedSourceBuffers())return n.addSourceBuffer(s,o);n.canChangeType()&&n.changeType(s,o)})},i.appendBuffer=function(e,n){var s=this,o=e.segmentInfo,l=e.type,f=e.bytes;if(this.processedAppend_=!0,l==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,n]),this.logger_("delayed audio append of "+f.length+" until video append");return}var m=n;if(wr({type:l,sourceUpdater:this,action:Er.appendBuffer(f,o||{mediaIndex:-1},m),doneFn:n,name:"appendBuffer"}),l==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var v=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+v.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,v.forEach(function(y){s.appendBuffer.apply(s,y)})}},i.audioBuffered=function(){return Kn(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:N.createTimeRange()},i.videoBuffered=function(){return Kn(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:N.createTimeRange()},i.buffered=function(){var e=Kn(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,n=Kn(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return n&&!e?this.audioBuffered():e&&!n?this.videoBuffered():rF(this.audioBuffered(),this.videoBuffered())},i.setDuration=function(e,n){n===void 0&&(n=Oa),wr({type:"mediaSource",sourceUpdater:this,action:Er.duration(e),name:"duration",doneFn:n})},i.endOfStream=function(e,n){e===void 0&&(e=null),n===void 0&&(n=Oa),typeof e!="string"&&(e=void 0),wr({type:"mediaSource",sourceUpdater:this,action:Er.endOfStream(e),name:"endOfStream",doneFn:n})},i.removeAudio=function(e,n,s){if(s===void 0&&(s=Oa),!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}wr({type:"audio",sourceUpdater:this,action:Er.remove(e,n),doneFn:s,name:"remove"})},i.removeVideo=function(e,n,s){if(s===void 0&&(s=Oa),!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}wr({type:"video",sourceUpdater:this,action:Er.remove(e,n),doneFn:s,name:"remove"})},i.updating=function(){return!!(Sv("audio",this)||Sv("video",this))},i.audioTimestampOffset=function(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(wr({type:"audio",sourceUpdater:this,action:Er.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},i.videoTimestampOffset=function(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(wr({type:"video",sourceUpdater:this,action:Er.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},i.audioQueueCallback=function(e){this.audioBuffer&&wr({type:"audio",sourceUpdater:this,action:Er.callback(e),name:"callback"})},i.videoQueueCallback=function(e){this.videoBuffer&&wr({type:"video",sourceUpdater:this,action:Er.callback(e),name:"callback"})},i.dispose=function(){var e=this;this.trigger("dispose"),UN.forEach(function(n){e.abort(n),e.canRemoveSourceBuffer()?e.removeSourceBuffer(n):e[n+"QueueCallback"](function(){return OE(n,e)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(N.EventTarget),kE=function(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))},RE=new Uint8Array(`

`.split("").map(function(a){return a.charCodeAt(0)})),jN=function(a){Ae(t,a);function t(){return a.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return t}(xc(Error)),VN=function(a){Ae(t,a);function t(r,e){var n;return e===void 0&&(e={}),n=a.call(this,r,e)||this,n.mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=r.featuresNativeTextTracks,n.loadVttJs=r.loadVttJs,n.shouldSaveSegmentTimingInfo_=!1,n}var i=t.prototype;return i.createTransmuxer_=function(){return null},i.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return N.createTimeRanges();var e=this.subtitlesTrack_.cues,n=e[0].startTime,s=e[e.length-1].startTime;return N.createTimeRanges([[n,s]])},i.initSegmentForMap=function(e,n){if(n===void 0&&(n=!1),!e)return null;var s=hh(e),o=this.initSegments_[s];if(n&&!o&&e.bytes){var l=RE.byteLength+e.bytes.byteLength,f=new Uint8Array(l);f.set(e.bytes),f.set(RE,e.bytes.byteLength),this.initSegments_[s]=o={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:f}}return o||e},i.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.track=function(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},i.remove=function(e,n){Td(e,n,this.subtitlesTrack_)},i.fillBuffer_=function(){var e=this,n=this.chooseNextRequest_();if(n){if(this.syncController_.timestampOffsetForTimeline(n.timeline)===null){var s=function(){e.state="READY",e.paused()||e.monitorBuffer_()};this.syncController_.one("timestampoffset",s),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(n)}},i.timestampOffsetForSegment_=function(){return null},i.chooseNextRequest_=function(){return this.skipEmptySegments_(a.prototype.chooseNextRequest_.call(this))},i.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},i.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},i.segmentRequestFinished_=function(e,n,s){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===zn.TIMEOUT&&this.handleTimeout_(),e.code===zn.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,n.stats),n.key&&this.segmentKey(n.key,!0),this.state="APPENDING",this.trigger("appending");var f=l.segment;if(f.map&&(f.map.bytes=n.map.bytes),l.bytes=n.bytes,typeof F.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(function(){return o.segmentRequestFinished_(e,n,s)},function(){return o.stopForError({message:"Error loading vtt.js"})});return}f.requested=!0;try{this.parseVTTCues_(l)}catch(m){this.stopForError({message:m.message});return}if(this.updateTimeMapping_(l,this.syncController_.timelines[l.timeline],this.playlist_),l.cues.length?l.timingInfo={start:l.cues[0].startTime,end:l.cues[l.cues.length-1].endTime}:l.timingInfo={start:l.startOfSegment,end:l.startOfSegment+l.duration},l.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}l.byteLength=l.bytes.byteLength,this.mediaSecondsLoaded+=f.duration,l.cues.forEach(function(m){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new F.VTTCue(m.startTime,m.endTime,m.text):m)}),CN(this.subtitlesTrack_),this.handleAppendsDone_()},i.handleData_=function(){},i.updateTimingInfoEnd_=function(){},i.parseVTTCues_=function(e){var n,s=!1;if(typeof F.WebVTT!="function")throw new jN;typeof F.TextDecoder=="function"?n=new F.TextDecoder("utf8"):(n=F.WebVTT.StringDecoder(),s=!0);var o=new F.WebVTT.Parser(F,F.vttjs,n);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=e.cues.push.bind(e.cues),o.ontimestampmap=function(m){e.timestampmap=m},o.onparsingerror=function(m){N.log.warn("Error encountered when parsing cues: "+m.message)},e.segment.map){var l=e.segment.map.bytes;s&&(l=kE(l)),o.parse(l)}var f=e.bytes;s&&(f=kE(f)),o.parse(f),o.flush()},i.updateTimeMapping_=function(e,n,s){var o=e.segment;if(n){if(!e.cues.length){o.empty=!0;return}var l=e.timestampmap,f=l.MPEGTS/ns.ONE_SECOND_IN_TS-l.LOCAL+n.mapping;if(e.cues.forEach(function(y){y.startTime+=f,y.endTime+=f}),!s.syncInfo){var m=e.cues[0].startTime,v=e.cues[e.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+e.mediaIndex,time:Math.min(m,v-o.duration)}}}},t}(xv),HN=function(t,i){for(var r=t.cues,e=0;e<r.length;e++){var n=r[e];if(i>=n.adStartTime&&i<=n.adEndTime)return n}return null},$N=function(t,i,r){if(r===void 0&&(r=0),!!t.segments)for(var e=r,n,s=0;s<t.segments.length;s++){var o=t.segments[s];if(n||(n=HN(i,e+o.duration/2)),n){if("cueIn"in o){n.endTime=e,n.adEndTime=e,e+=o.duration,n=null;continue}if(e<n.endTime){e+=o.duration;continue}n.endTime+=o.duration}else if("cueOut"in o&&(n=new F.VTTCue(e,e+o.duration,o.cueOut),n.adStartTime=e,n.adEndTime=e+parseFloat(o.cueOut),i.addCue(n)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),f=l[0],m=l[1];n=new F.VTTCue(e,e+o.duration,""),n.adStartTime=e-f,n.adEndTime=n.adStartTime+m,i.addCue(n)}e+=o.duration}},WN=86400,ME=[{name:"VOD",run:function(t,i,r,e,n){if(r!==1/0){var s={time:0,segmentIndex:0,partIndex:null};return s}return null}},{name:"ProgramDateTime",run:function(t,i,r,e,n){if(!Object.keys(t.timelineToDatetimeMappings).length)return null;var s=null,o=null,l=ov(i);n=n||0;for(var f=0;f<l.length;f++){var m=i.endList||n===0?f:l.length-(f+1),v=l[m],y=v.segment,E=t.timelineToDatetimeMappings[y.timeline];if(!(!E||!y.dateTimeObject)){var I=y.dateTimeObject.getTime()/1e3,O=I+E;if(y.parts&&typeof v.partIndex=="number")for(var D=0;D<v.partIndex;D++)O+=y.parts[D].duration;var R=Math.abs(n-O);if(o!==null&&(R===0||o<R))break;o=R,s={time:O,segmentIndex:v.segmentIndex,partIndex:v.partIndex}}}return s}},{name:"Segment",run:function(t,i,r,e,n){var s=null,o=null;n=n||0;for(var l=ov(i),f=0;f<l.length;f++){var m=i.endList||n===0?f:l.length-(f+1),v=l[m],y=v.segment,E=v.part&&v.part.start||y&&y.start;if(y.timeline===e&&typeof E<"u"){var I=Math.abs(n-E);if(o!==null&&o<I)break;(!s||o===null||o>=I)&&(o=I,s={time:E,segmentIndex:v.segmentIndex,partIndex:v.partIndex})}}return s}},{name:"Discontinuity",run:function(t,i,r,e,n){var s=null;if(n=n||0,i.discontinuityStarts&&i.discontinuityStarts.length)for(var o=null,l=0;l<i.discontinuityStarts.length;l++){var f=i.discontinuityStarts[l],m=i.discontinuitySequence+l+1,v=t.discontinuities[m];if(v){var y=Math.abs(n-v.time);if(o!==null&&o<y)break;(!s||o===null||o>=y)&&(o=y,s={time:v.time,segmentIndex:f,partIndex:null})}}return s}},{name:"Playlist",run:function(t,i,r,e,n){if(i.syncInfo){var s={time:i.syncInfo.time,segmentIndex:i.syncInfo.mediaSequence-i.mediaSequence,partIndex:null};return s}return null}}],qN=function(a){Ae(t,a);function t(r){var e;return e=a.call(this)||this,e.timelines=[],e.discontinuities=[],e.timelineToDatetimeMappings={},e.logger_=hn("SyncController"),e}var i=t.prototype;return i.getSyncPoint=function(e,n,s,o){var l=this.runStrategies_(e,n,s,o);return l.length?this.selectSyncPoint_(l,{key:"time",value:o}):null},i.getExpiredTime=function(e,n){if(!e||!e.segments)return null;var s=this.runStrategies_(e,n,e.discontinuitySequence,0);if(!s.length)return null;var o=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+vd({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:o.segmentIndex,endIndex:0}))},i.runStrategies_=function(e,n,s,o){for(var l=[],f=0;f<ME.length;f++){var m=ME[f],v=m.run(this,e,n,s,o);v&&(v.strategy=m.name,l.push({strategy:m.name,syncPoint:v}))}return l},i.selectSyncPoint_=function(e,n){for(var s=e[0].syncPoint,o=Math.abs(e[0].syncPoint[n.key]-n.value),l=e[0].strategy,f=1;f<e.length;f++){var m=Math.abs(e[f].syncPoint[n.key]-n.value);m<o&&(o=m,s=e[f].syncPoint,l=e[f].strategy)}return this.logger_("syncPoint for ["+n.key+": "+n.value+"] chosen with strategy"+(" ["+l+"]: [time:"+s.time+",")+(" segmentIndex:"+s.segmentIndex)+(typeof s.partIndex=="number"?",partIndex:"+s.partIndex:"")+"]"),s},i.saveExpiredSegmentInfo=function(e,n){var s=n.mediaSequence-e.mediaSequence;if(s>WN){N.log.warn("Not saving expired segment info. Media sequence gap "+s+" is too large.");return}for(var o=s-1;o>=0;o--){var l=e.segments[o];if(l&&typeof l.start<"u"){n.syncInfo={mediaSequence:e.mediaSequence+o,time:l.start},this.logger_("playlist refresh sync: [time:"+n.syncInfo.time+","+(" mediaSequence: "+n.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},i.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var n=e.segments[0],s=n.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[n.timeline]=-s}},i.saveSegmentTimingInfo=function(e){var n=e.segmentInfo,s=e.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(n,n.timingInfo,s),l=n.segment;o&&(this.saveDiscontinuitySyncInfo_(n),n.playlist.syncInfo||(n.playlist.syncInfo={mediaSequence:n.playlist.mediaSequence+n.mediaIndex,time:l.start}));var f=l.dateTimeObject;l.discontinuity&&s&&f&&(this.timelineToDatetimeMappings[l.timeline]=-(f.getTime()/1e3))},i.timestampOffsetForTimeline=function(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time},i.mappingForTimeline=function(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping},i.calculateSegmentTimeMapping_=function(e,n,s){var o=e.segment,l=e.part,f=this.timelines[e.timeline],m,v;if(typeof e.timestampOffset=="number")f={time:e.startOfSegment,mapping:e.startOfSegment-n.start},s&&(this.timelines[e.timeline]=f,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": "+("[time: "+f.time+"] [mapping: "+f.mapping+"]"))),m=e.startOfSegment,v=n.end+f.mapping;else if(f)m=n.start+f.mapping,v=n.end+f.mapping;else return!1;return l&&(l.start=m,l.end=v),(!o.start||m<o.start)&&(o.start=m),o.end=v,!0},i.saveDiscontinuitySyncInfo_=function(e){var n=e.playlist,s=e.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(n.discontinuityStarts&&n.discontinuityStarts.length)for(var o=0;o<n.discontinuityStarts.length;o++){var l=n.discontinuityStarts[o],f=n.discontinuitySequence+o+1,m=l-e.mediaIndex,v=Math.abs(m);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>v){var y=void 0;m<0?y=s.start-vd({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex,endIndex:l}):y=s.end+vd({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex+1,endIndex:l}),this.discontinuities[f]={time:y,accuracy:v}}}},i.dispose=function(){this.trigger("dispose"),this.off()},t}(N.EventTarget),GN=function(a){Ae(t,a);function t(){var r;return r=a.call(this)||this,r.pendingTimelineChanges_={},r.lastTimelineChanges_={},r}var i=t.prototype;return i.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},i.pendingTimelineChange=function(e){var n=e.type,s=e.from,o=e.to;return typeof s=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[n]={type:n,from:s,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[n]},i.lastTimelineChange=function(e){var n=e.type,s=e.from,o=e.to;return typeof s=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[n]={type:n,from:s,to:o},delete this.pendingTimelineChanges_[n],this.trigger("timelinechange")),this.lastTimelineChanges_[n]},i.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(N.EventTarget),zN=uE(lE(function(){var a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function t(V,W,te){return te={path:W,exports:{},require:function(q,X){return i(q,X??te.path)}},V(te,te.exports),te.exports}function i(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var r=t(function(V){function W(z,q){for(var X=0;X<q.length;X++){var j=q[X];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(z,j.key,j)}}function te(z,q,X){return q&&W(z.prototype,q),X&&W(z,X),z}V.exports=te,V.exports.default=V.exports,V.exports.__esModule=!0}),e=t(function(V){function W(te,z){return V.exports=W=Object.setPrototypeOf||function(X,j){return X.__proto__=j,X},V.exports.default=V.exports,V.exports.__esModule=!0,W(te,z)}V.exports=W,V.exports.default=V.exports,V.exports.__esModule=!0}),n=t(function(V){function W(te,z){te.prototype=Object.create(z.prototype),te.prototype.constructor=te,e(te,z)}V.exports=W,V.exports.default=V.exports,V.exports.__esModule=!0}),s=function(){function V(){this.listeners={}}var W=V.prototype;return W.on=function(z,q){this.listeners[z]||(this.listeners[z]=[]),this.listeners[z].push(q)},W.off=function(z,q){if(!this.listeners[z])return!1;var X=this.listeners[z].indexOf(q);return this.listeners[z]=this.listeners[z].slice(0),this.listeners[z].splice(X,1),X>-1},W.trigger=function(z){var q=this.listeners[z];if(q)if(arguments.length===2)for(var X=q.length,j=0;j<X;++j)q[j].call(this,arguments[1]);else for(var oe=Array.prototype.slice.call(arguments,1),re=q.length,se=0;se<re;++se)q[se].apply(this,oe)},W.dispose=function(){this.listeners={}},W.pipe=function(z){this.on("data",function(q){z.push(q)})},V}();function o(V){return V.subarray(0,V.byteLength-V[V.byteLength-1])}var l=function(){var W=[[[],[],[],[],[]],[[],[],[],[],[]]],te=W[0],z=W[1],q=te[4],X=z[4],j,oe,re,se=[],he=[],le,pe,ne,fe,Ie,Ce;for(j=0;j<256;j++)he[(se[j]=j<<1^(j>>7)*283)^j]=j;for(oe=re=0;!q[oe];oe^=le||1,re=he[re]||1)for(fe=re^re<<1^re<<2^re<<3^re<<4,fe=fe>>8^fe&255^99,q[oe]=fe,X[fe]=oe,ne=se[pe=se[le=se[oe]]],Ce=ne*16843009^pe*65537^le*257^oe*16843008,Ie=se[fe]*257^fe*16843008,j=0;j<4;j++)te[j][oe]=Ie=Ie<<24^Ie>>>8,z[j][fe]=Ce=Ce<<24^Ce>>>8;for(j=0;j<5;j++)te[j]=te[j].slice(0),z[j]=z[j].slice(0);return W},f=null,m=function(){function V(te){f||(f=l()),this._tables=[[f[0][0].slice(),f[0][1].slice(),f[0][2].slice(),f[0][3].slice(),f[0][4].slice()],[f[1][0].slice(),f[1][1].slice(),f[1][2].slice(),f[1][3].slice(),f[1][4].slice()]];var z,q,X,j=this._tables[0][4],oe=this._tables[1],re=te.length,se=1;if(re!==4&&re!==6&&re!==8)throw new Error("Invalid aes key size");var he=te.slice(0),le=[];for(this._key=[he,le],z=re;z<4*re+28;z++)X=he[z-1],(z%re===0||re===8&&z%re===4)&&(X=j[X>>>24]<<24^j[X>>16&255]<<16^j[X>>8&255]<<8^j[X&255],z%re===0&&(X=X<<8^X>>>24^se<<24,se=se<<1^(se>>7)*283)),he[z]=he[z-re]^X;for(q=0;z;q++,z--)X=he[q&3?z:z-4],z<=4||q<4?le[q]=X:le[q]=oe[0][j[X>>>24]]^oe[1][j[X>>16&255]]^oe[2][j[X>>8&255]]^oe[3][j[X&255]]}var W=V.prototype;return W.decrypt=function(z,q,X,j,oe,re){var se=this._key[1],he=z^se[0],le=j^se[1],pe=X^se[2],ne=q^se[3],fe,Ie,Ce,Xe=se.length/4-2,Be,Qe=4,Et=this._tables[1],bt=Et[0],xt=Et[1],wt=Et[2],Ct=Et[3],ht=Et[4];for(Be=0;Be<Xe;Be++)fe=bt[he>>>24]^xt[le>>16&255]^wt[pe>>8&255]^Ct[ne&255]^se[Qe],Ie=bt[le>>>24]^xt[pe>>16&255]^wt[ne>>8&255]^Ct[he&255]^se[Qe+1],Ce=bt[pe>>>24]^xt[ne>>16&255]^wt[he>>8&255]^Ct[le&255]^se[Qe+2],ne=bt[ne>>>24]^xt[he>>16&255]^wt[le>>8&255]^Ct[pe&255]^se[Qe+3],Qe+=4,he=fe,le=Ie,pe=Ce;for(Be=0;Be<4;Be++)oe[(3&-Be)+re]=ht[he>>>24]<<24^ht[le>>16&255]<<16^ht[pe>>8&255]<<8^ht[ne&255]^se[Qe++],fe=he,he=le,le=pe,pe=ne,ne=fe},V}(),v=function(V){n(W,V);function W(){var z;return z=V.call(this,s)||this,z.jobs=[],z.delay=1,z.timeout_=null,z}var te=W.prototype;return te.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},te.push=function(q){this.jobs.push(q),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},W}(s),y=function(W){return W<<24|(W&65280)<<8|(W&16711680)>>8|W>>>24},E=function(W,te,z){var q=new Int32Array(W.buffer,W.byteOffset,W.byteLength>>2),X=new m(Array.prototype.slice.call(te)),j=new Uint8Array(W.byteLength),oe=new Int32Array(j.buffer),re,se,he,le,pe,ne,fe,Ie,Ce;for(re=z[0],se=z[1],he=z[2],le=z[3],Ce=0;Ce<q.length;Ce+=4)pe=y(q[Ce]),ne=y(q[Ce+1]),fe=y(q[Ce+2]),Ie=y(q[Ce+3]),X.decrypt(pe,ne,fe,Ie,oe,Ce),oe[Ce]=y(oe[Ce]^re),oe[Ce+1]=y(oe[Ce+1]^se),oe[Ce+2]=y(oe[Ce+2]^he),oe[Ce+3]=y(oe[Ce+3]^le),re=pe,se=ne,he=fe,le=Ie;return j},I=function(){function V(te,z,q,X){var j=V.STEP,oe=new Int32Array(te.buffer),re=new Uint8Array(te.byteLength),se=0;for(this.asyncStream_=new v,this.asyncStream_.push(this.decryptChunk_(oe.subarray(se,se+j),z,q,re)),se=j;se<oe.length;se+=j)q=new Uint32Array([y(oe[se-4]),y(oe[se-3]),y(oe[se-2]),y(oe[se-1])]),this.asyncStream_.push(this.decryptChunk_(oe.subarray(se,se+j),z,q,re));this.asyncStream_.push(function(){X(null,o(re))})}var W=V.prototype;return W.decryptChunk_=function(z,q,X,j){return function(){var oe=E(z,q,X);j.set(oe,z.byteOffset)}},r(V,null,[{key:"STEP",get:function(){return 32e3}}]),V}(),O;typeof window<"u"?O=window:typeof a<"u"?O=a:typeof self<"u"?O=self:O={};var D=O,R=function(W){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(W):W&&W.buffer instanceof ArrayBuffer},H=D.BigInt||Number;H("0x1"),H("0x100"),H("0x10000"),H("0x1000000"),H("0x100000000"),H("0x10000000000"),H("0x1000000000000"),H("0x100000000000000"),H("0x10000000000000000"),function(){var V=new Uint16Array([65484]),W=new Uint8Array(V.buffer,V.byteOffset,V.byteLength);return W[0]===255?"big":W[0]===204?"little":"unknown"}();var Z=function(W){var te={};return Object.keys(W).forEach(function(z){var q=W[z];R(q)?te[z]={bytes:q.buffer,byteOffset:q.byteOffset,byteLength:q.byteLength}:te[z]=q}),te};self.onmessage=function(V){var W=V.data,te=new Uint8Array(W.encrypted.bytes,W.encrypted.byteOffset,W.encrypted.byteLength),z=new Uint32Array(W.key.bytes,W.key.byteOffset,W.key.byteLength/4),q=new Uint32Array(W.iv.bytes,W.iv.byteOffset,W.iv.byteLength/4);new I(te,z,q,function(X,j){self.postMessage(Z({source:W.source,decrypted:j}),[j.buffer])})}})),KN=oE(zN),XN=function(t){var i=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(i="main-desc"),i},yh=function(t,i){t.abort(),t.pause(),i&&i.activePlaylistLoader&&(i.activePlaylistLoader.pause(),i.activePlaylistLoader=null)},wv=function(t,i){i.activePlaylistLoader=t,t.load()},QN=function(t,i){return function(){var r=i.segmentLoaders,e=r[t],n=r.main,s=i.mediaTypes[t],o=s.activeTrack(),l=s.getActiveGroup(),f=s.activePlaylistLoader,m=s.lastGroup_;if(!(l&&m&&l.id===m.id)&&(s.lastGroup_=l,s.lastTrack_=o,yh(e,s),!(!l||l.isMasterPlaylist))){if(!l.playlistLoader){f&&n.resetEverything();return}e.resyncLoader(),wv(l.playlistLoader,s)}}},YN=function(t,i){return function(){var r=i.segmentLoaders[t],e=i.mediaTypes[t];e.lastGroup_=null,r.abort(),r.pause()}},JN=function(t,i){return function(){var r=i.masterPlaylistLoader,e=i.segmentLoaders,n=e[t],s=e.main,o=i.mediaTypes[t],l=o.activeTrack(),f=o.getActiveGroup(),m=o.activePlaylistLoader,v=o.lastTrack_;if(!(v&&l&&v.id===l.id)&&(o.lastGroup_=f,o.lastTrack_=l,yh(n,o),!!f)){if(f.isMasterPlaylist){if(!l||!v||l.id===v.id)return;var y=i.vhs.masterPlaylistController_,E=y.selectPlaylist();if(y.media()===E)return;o.logger_("track change. Switching master audio from "+v.id+" to "+l.id),r.pause(),s.resetEverything(),y.fastQualityChange_(E);return}if(t==="AUDIO"){if(!f.playlistLoader){s.setAudio(!0),s.resetEverything();return}n.setAudio(!0),s.setAudio(!1)}if(m===f.playlistLoader){wv(f.playlistLoader,o);return}n.track&&n.track(l),n.resetEverything(),wv(f.playlistLoader,o)}}},Th={AUDIO:function(t,i){return function(){var r=i.segmentLoaders[t],e=i.mediaTypes[t],n=i.blacklistCurrentPlaylist;yh(r,e);var s=e.activeTrack(),o=e.activeGroup(),l=(o.filter(function(v){return v.default})[0]||o[0]).id,f=e.tracks[l];if(s===f){n({message:"Problem encountered loading the default audio track."});return}N.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var m in e.tracks)e.tracks[m].enabled=e.tracks[m]===f;e.onTrackChanged()}},SUBTITLES:function(t,i){return function(){var r=i.segmentLoaders[t],e=i.mediaTypes[t];N.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),yh(r,e);var n=e.activeTrack();n&&(n.mode="disabled"),e.onTrackChanged()}}},FE={AUDIO:function(t,i,r){if(i){var e=r.tech,n=r.requestOptions,s=r.segmentLoaders[t];i.on("loadedmetadata",function(){var o=i.media();s.playlist(o,n),(!e.paused()||o.endList&&e.preload()!=="none")&&s.load()}),i.on("loadedplaylist",function(){s.playlist(i.media(),n),e.paused()||s.load()}),i.on("error",Th[t](t,r))}},SUBTITLES:function(t,i,r){var e=r.tech,n=r.requestOptions,s=r.segmentLoaders[t],o=r.mediaTypes[t];i.on("loadedmetadata",function(){var l=i.media();s.playlist(l,n),s.track(o.activeTrack()),(!e.paused()||l.endList&&e.preload()!=="none")&&s.load()}),i.on("loadedplaylist",function(){s.playlist(i.media(),n),e.paused()||s.load()}),i.on("error",Th[t](t,r))}},ZN={AUDIO:function(t,i){var r=i.vhs,e=i.sourceType,n=i.segmentLoaders[t],s=i.requestOptions,o=i.master.mediaGroups,l=i.mediaTypes[t],f=l.groups,m=l.tracks,v=l.logger_,y=i.masterPlaylistLoader,E=_d(y.master);(!o[t]||Object.keys(o[t]).length===0)&&(o[t]={main:{default:{default:!0}}},E&&(o[t].main.default.playlists=y.master.playlists));for(var I in o[t]){f[I]||(f[I]=[]);for(var O in o[t][I]){var D=o[t][I][O],R=void 0;if(E?(v("AUDIO group '"+I+"' label '"+O+"' is a master playlist"),D.isMasterPlaylist=!0,R=null):e==="vhs-json"&&D.playlists?R=new Lu(D.playlists[0],r,s):D.resolvedUri?R=new Lu(D.resolvedUri,r,s):D.playlists&&e==="dash"?R=new vv(D.playlists[0],r,s,y):R=null,D=N.mergeOptions({id:O,playlistLoader:R},D),FE[t](t,D.playlistLoader,i),f[I].push(D),typeof m[O]>"u"){var H=new N.AudioTrack({id:O,kind:XN(D),enabled:!1,language:D.language,default:D.default,label:O});m[O]=H}}}n.on("error",Th[t](t,i))},SUBTITLES:function(t,i){var r=i.tech,e=i.vhs,n=i.sourceType,s=i.segmentLoaders[t],o=i.requestOptions,l=i.master.mediaGroups,f=i.mediaTypes[t],m=f.groups,v=f.tracks,y=i.masterPlaylistLoader;for(var E in l[t]){m[E]||(m[E]=[]);for(var I in l[t][E])if(!l[t][E][I].forced){var O=l[t][E][I],D=void 0;if(n==="hls")D=new Lu(O.resolvedUri,e,o);else if(n==="dash"){var R=O.playlists.filter(function(Z){return Z.excludeUntil!==1/0});if(!R.length)return;D=new vv(O.playlists[0],e,o,y)}else n==="vhs-json"&&(D=new Lu(O.playlists?O.playlists[0]:O.resolvedUri,e,o));if(O=N.mergeOptions({id:I,playlistLoader:D},O),FE[t](t,O.playlistLoader,i),m[E].push(O),typeof v[I]>"u"){var H=r.addRemoteTextTrack({id:I,kind:"subtitles",default:O.default&&O.autoselect,language:O.language,label:I},!1).track;v[I]=H}}}s.on("error",Th[t](t,i))},"CLOSED-CAPTIONS":function(t,i){var r=i.tech,e=i.master.mediaGroups,n=i.mediaTypes[t],s=n.groups,o=n.tracks;for(var l in e[t]){s[l]||(s[l]=[]);for(var f in e[t][l]){var m=e[t][l][f];if(/^(?:CC|SERVICE)/.test(m.instreamId)){var v=r.options_.vhs&&r.options_.vhs.captionServices||{},y={label:f,language:m.language,instreamId:m.instreamId,default:m.default&&m.autoselect};if(v[y.instreamId]&&(y=N.mergeOptions(y,v[y.instreamId])),y.default===void 0&&delete y.default,s[l].push(N.mergeOptions({id:f},m)),typeof o[f]>"u"){var E=r.addRemoteTextTrack({id:y.instreamId,kind:"captions",default:y.default,language:y.language,label:y.label},!1).track;o[f]=E}}}}}},eU=function a(t,i){for(var r=0;r<t.length;r++)if(dv(i,t[r])||t[r].playlists&&a(t[r].playlists,i))return!0;return!1},tU=function(t,i){return function(r){var e=i.masterPlaylistLoader,n=i.mediaTypes[t].groups,s=e.media();if(!s)return null;var o=null;s.attributes[t]&&(o=n[s.attributes[t]]);var l=Object.keys(n);if(!o)if(t==="AUDIO"&&l.length>1&&_d(i.master))for(var f=0;f<l.length;f++){var m=n[l[f]];if(eU(m,s)){o=m;break}}else n.main?o=n.main:l.length===1&&(o=n[l[0]]);return typeof r>"u"?o:r===null||!o?null:o.filter(function(v){return v.id===r.id})[0]||null}},iU={AUDIO:function(t,i){return function(){var r=i.mediaTypes[t].tracks;for(var e in r)if(r[e].enabled)return r[e];return null}},SUBTITLES:function(t,i){return function(){var r=i.mediaTypes[t].tracks;for(var e in r)if(r[e].mode==="showing"||r[e].mode==="hidden")return r[e];return null}}},rU=function(t,i){var r=i.mediaTypes;return function(){var e=r[t].activeTrack();return e?r[t].activeGroup(e):null}},nU=function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(I){ZN[I](I,t)});var i=t.mediaTypes,r=t.masterPlaylistLoader,e=t.tech,n=t.vhs,s=t.segmentLoaders,o=s.AUDIO,l=s.main;["AUDIO","SUBTITLES"].forEach(function(I){i[I].activeGroup=tU(I,t),i[I].activeTrack=iU[I](I,t),i[I].onGroupChanged=QN(I,t),i[I].onGroupChanging=YN(I,t),i[I].onTrackChanged=JN(I,t),i[I].getActiveGroup=rU(I,t)});var f=i.AUDIO.activeGroup();if(f){var m=(f.filter(function(I){return I.default})[0]||f[0]).id;i.AUDIO.tracks[m].enabled=!0,i.AUDIO.onGroupChanged(),i.AUDIO.onTrackChanged();var v=i.AUDIO.getActiveGroup();v.playlistLoader?(l.setAudio(!1),o.setAudio(!0)):l.setAudio(!0)}r.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(I){return i[I].onGroupChanged()})}),r.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(I){return i[I].onGroupChanging()})});var y=function(){i.AUDIO.onTrackChanged(),e.trigger({type:"usage",name:"vhs-audio-change"}),e.trigger({type:"usage",name:"hls-audio-change"})};e.audioTracks().addEventListener("change",y),e.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged),n.on("dispose",function(){e.audioTracks().removeEventListener("change",y),e.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)}),e.clearTracks("audio");for(var E in i.AUDIO.tracks)e.audioTracks().addTrack(i.AUDIO.tracks[E])},aU=function(){var t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(i){t[i]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Oa,activeTrack:Oa,getActiveGroup:Oa,onGroupChanged:Oa,onTrackChanged:Oa,lastTrack_:null,logger_:hn("MediaGroups["+i+"]")}}),t},sU=60*2,Da,oU=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],uU=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},lU=function(t){var i=t.currentPlaylist,r=t.buffered,e=t.currentTime,n=t.nextPlaylist,s=t.bufferLowWaterLine,o=t.bufferHighWaterLine,l=t.duration,f=t.experimentalBufferBasedABR,m=t.log;if(!n)return N.log.warn("We received no playlist to switch to. Please check your stream."),!1;var v="allowing switch "+(i&&i.id||"null")+" -> "+n.id;if(!i)return m(v+" as current playlist is not set"),!0;if(n.id===i.id)return!1;var y=Boolean(Ou(r,e).length);if(!i.endList)return!y&&typeof i.partTargetDuration=="number"?(m("not "+v+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(m(v+" as current playlist is live"),!0);var E=av(r,e),I=f?mi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:mi.MAX_BUFFER_LOW_WATER_LINE;if(l<I)return m(v+" as duration < max low water line ("+l+" < "+I+")"),!0;var O=n.attributes.BANDWIDTH,D=i.attributes.BANDWIDTH;if(O<D&&(!f||E<o)){var R=v+" as next bandwidth < current bandwidth ("+O+" < "+D+")";return f&&(R+=" and forwardBuffer < bufferHighWaterLine ("+E+" < "+o+")"),m(R),!0}if((!f||O>D)&&E>=s){var H=v+" as forwardBuffer >= bufferLowWaterLine ("+E+" >= "+s+")";return f&&(H+=" and next bandwidth > current bandwidth ("+O+" > "+D+")"),m(H),!0}return m("not "+v+" as no switching criteria met"),!1},dU=function(a){Ae(t,a);function t(r){var e;e=a.call(this)||this;var n=r.src,s=r.handleManifestRedirects,o=r.withCredentials,l=r.tech,f=r.bandwidth,m=r.externVhs,v=r.useCueTags,y=r.blacklistDuration,E=r.enableLowInitialPlaylist,I=r.sourceType,O=r.cacheEncryptionKeys,D=r.experimentalBufferBasedABR,R=r.experimentalLeastPixelDiffSelector,H=r.captionServices;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");var Z=r.maxPlaylistRetries;(Z===null||typeof Z>"u")&&(Z=1/0),Da=m,e.experimentalBufferBasedABR=Boolean(D),e.experimentalLeastPixelDiffSelector=Boolean(R),e.withCredentials=o,e.tech_=l,e.vhs_=l.vhs,e.sourceType_=I,e.useCueTags_=v,e.blacklistDuration=y,e.maxPlaylistRetries=Z,e.enableLowInitialPlaylist=E,e.useCueTags_&&(e.cueTagsTrack_=e.tech_.addTextTrack("metadata","ad-cues"),e.cueTagsTrack_.inBandMetadataTrackDispatchType=""),e.requestOptions_={withCredentials:o,handleManifestRedirects:s,maxPlaylistRetries:Z,timeout:null},e.on("error",e.pauseLoading),e.mediaTypes_=aU(),e.mediaSource=new F.MediaSource,e.handleDurationChange_=e.handleDurationChange_.bind(Ue(e)),e.handleSourceOpen_=e.handleSourceOpen_.bind(Ue(e)),e.handleSourceEnded_=e.handleSourceEnded_.bind(Ue(e)),e.mediaSource.addEventListener("durationchange",e.handleDurationChange_),e.mediaSource.addEventListener("sourceopen",e.handleSourceOpen_),e.mediaSource.addEventListener("sourceended",e.handleSourceEnded_),e.seekable_=N.createTimeRanges(),e.hasPlayed_=!1,e.syncController_=new qN(r),e.segmentMetadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,e.decrypter_=new KN,e.sourceUpdater_=new LE(e.mediaSource),e.inbandTextTracks_={},e.timelineChangeController_=new GN;var V={vhs:e.vhs_,parse708captions:r.parse708captions,useDtsForTimestampOffset:r.useDtsForTimestampOffset,captionServices:H,mediaSource:e.mediaSource,currentTime:e.tech_.currentTime.bind(e.tech_),seekable:function(){return e.seekable()},seeking:function(){return e.tech_.seeking()},duration:function(){return e.duration()},hasPlayed:function(){return e.hasPlayed_},goalBufferLength:function(){return e.goalBufferLength()},bandwidth:f,syncController:e.syncController_,decrypter:e.decrypter_,sourceType:e.sourceType_,inbandTextTracks:e.inbandTextTracks_,cacheEncryptionKeys:O,sourceUpdater:e.sourceUpdater_,timelineChangeController:e.timelineChangeController_,experimentalExactManifestTimings:r.experimentalExactManifestTimings};e.masterPlaylistLoader_=e.sourceType_==="dash"?new vv(n,e.vhs_,e.requestOptions_):new Lu(n,e.vhs_,e.requestOptions_),e.setupMasterPlaylistLoaderListeners_(),e.mainSegmentLoader_=new xv(N.mergeOptions(V,{segmentMetadataTrack:e.segmentMetadataTrack_,loaderType:"main"}),r),e.audioSegmentLoader_=new xv(N.mergeOptions(V,{loaderType:"audio"}),r),e.subtitleSegmentLoader_=new VN(N.mergeOptions(V,{loaderType:"vtt",featuresNativeTextTracks:e.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(z,q){function X(){l.off("vttjserror",j),z()}function j(){l.off("vttjsloaded",X),q()}l.one("vttjsloaded",X),l.one("vttjserror",j),l.addWebVttScript_()})}}),r),e.setupSegmentLoaderListeners_(),e.experimentalBufferBasedABR&&(e.masterPlaylistLoader_.one("loadedplaylist",function(){return e.startABRTimer_()}),e.tech_.on("pause",function(){return e.stopABRTimer_()}),e.tech_.on("play",function(){return e.startABRTimer_()})),oU.forEach(function(te){e[te+"_"]=uU.bind(Ue(e),te)}),e.logger_=hn("MPC"),e.triggeredFmp4Usage=!1,e.tech_.preload()==="none"?(e.loadOnPlay_=function(){e.loadOnPlay_=null,e.masterPlaylistLoader_.load()},e.tech_.one("play",e.loadOnPlay_)):e.masterPlaylistLoader_.load(),e.timeToLoadedData__=-1,e.mainAppendsToLoadedData__=-1,e.audioAppendsToLoadedData__=-1;var W=e.tech_.preload()==="none"?"play":"loadstart";return e.tech_.one(W,function(){var te=Date.now();e.tech_.one("loadeddata",function(){e.timeToLoadedData__=Date.now()-te,e.mainAppendsToLoadedData__=e.mainSegmentLoader_.mediaAppends,e.audioAppendsToLoadedData__=e.audioSegmentLoader_.mediaAppends})}),e}var i=t.prototype;return i.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},i.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},i.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),n=this.audioAppendsToLoadedData_();return e===-1||n===-1?-1:e+n},i.timeToLoadedData_=function(){return this.timeToLoadedData__},i.checkABR_=function(e){e===void 0&&(e="abr");var n=this.selectPlaylist();n&&this.shouldSwitchToMedia_(n)&&this.switchMedia_(n,e)},i.switchMedia_=function(e,n,s){var o=this.media(),l=o&&(o.id||o.uri),f=e.id||e.uri;l&&l!==f&&(this.logger_("switch media "+l+" -> "+f+" from "+n),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+n})),this.masterPlaylistLoader_.media(e,s)},i.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=F.setInterval(function(){return e.checkABR_()},250)},i.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(F.clearInterval(this.abrTimer_),this.abrTimer_=null)},i.getAudioTrackPlaylists_=function(){var e=this.master(),n=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return n;var s=e.mediaGroups.AUDIO,o=Object.keys(s),l;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)l=this.mediaTypes_.AUDIO.activeTrack();else{var f=s.main||o.length&&s[o[0]];for(var m in f)if(f[m].default){l={label:m};break}}if(!l)return n;var v=[];for(var y in s)if(s[y][l.label]){var E=s[y][l.label];if(E.playlists&&E.playlists.length)v.push.apply(v,E.playlists);else if(E.uri)v.push(E);else if(e.playlists.length)for(var I=0;I<e.playlists.length;I++){var O=e.playlists[I];O.attributes&&O.attributes.AUDIO&&O.attributes.AUDIO===y&&v.push(O)}}return v.length?v:n},i.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var n=e.masterPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;lv(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=s,n.endList&&e.tech_.preload()!=="none"&&(e.mainSegmentLoader_.playlist(n,e.requestOptions_),e.mainSegmentLoader_.load()),nU({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),n),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){e.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var n=e.masterPlaylistLoader_.media();if(!n){e.excludeUnsupportedVariants_();var s;if(e.enableLowInitialPlaylist&&(s=e.selectInitialPlaylist()),s||(s=e.selectPlaylist()),!s||!e.shouldSwitchToMedia_(s))return;e.initialMedia_=s,e.switchMedia_(e.initialMedia_,"initial");var o=e.sourceType_==="vhs-json"&&e.initialMedia_.segments;if(!o)return;n=e.initialMedia_}e.handleUpdatedMediaPlaylist(n)}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var n=e.masterPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;lv(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=s,e.masterPlaylistLoader_.load(),e.mainSegmentLoader_.playlist(n,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var n=e.masterPlaylistLoader_.media();if(n.lastExcludeReason_!=="playlist-unchanged"){var s=e.stuckAtPlaylistEnd_(n);s&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},i.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},i.triggerPresenceUsage_=function(e,n){var s=e.mediaGroups||{},o=!0,l=Object.keys(s.AUDIO);for(var f in s.AUDIO)for(var m in s.AUDIO[f]){var v=s.AUDIO[f][m];v.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(s.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Da.Playlist.isAes(n)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),l.length&&Object.keys(s.AUDIO[l[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},i.shouldSwitchToMedia_=function(e){var n=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),o=this.bufferLowWaterLine(),l=this.bufferHighWaterLine(),f=this.tech_.buffered();return lU({buffered:f,currentTime:s,currentPlaylist:n,nextPlaylist:e,bufferLowWaterLine:o,bufferHighWaterLine:l,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},i.setupSegmentLoaderListeners_=function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){e.checkABR_("bandwidthupdate"),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){e.experimentalBufferBasedABR&&e.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){e.logger_("main segment loader ended"),e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(s){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},sU))});var n=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var o=e.getCodecsOrExclude_();o&&e.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",n),this.audioSegmentLoader_.on("trackinfo",n),this.mainSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()})},i.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},i.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},i.smoothQualityChange_=function(e){e===void 0&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},i.fastQualityChange_=function(e){var n=this;if(e===void 0&&(e=this.selectPlaylist()),e===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){N.browser.IE_VERSION||N.browser.IS_EDGE?n.tech_.setCurrentTime(n.tech_.currentTime()+.04):n.tech_.setCurrentTime(n.tech_.currentTime())})},i.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}},i.setupFirstPlay=function(){var e=this,n=this.masterPlaylistLoader_.media();if(!n||this.tech_.paused()||this.hasPlayed_)return!1;if(!n.endList){var s=this.seekable();if(!s.length)return!1;if(N.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(s.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=!0,this.load(),!0},i.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,function(n){})}this.trigger("sourceopen")},i.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(!(!e||!e.length)){var n=this.duration();e[e.length-1].endTime=isNaN(n)||Math.abs(n)===1/0?Number.MAX_VALUE:n}}},i.handleDurationChange_=function(){this.tech_.trigger("durationchange")},i.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var n=this.mainSegmentLoader_.getCurrentMediaInfo_();!n||n.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=function(e){var n=this.seekable();if(!n.length)return!1;var s=this.syncController_.getExpiredTime(e,this.duration());if(s===null)return!1;var o=Da.Playlist.playlistEnd(e,s),l=this.tech_.currentTime(),f=this.tech_.buffered();if(!f.length)return o-l<=Gn;var m=f.end(f.length-1);return m-l<=Gn&&o-m<=Gn},i.blacklistCurrentPlaylist=function(e,n){e===void 0&&(e={});var s=e.playlist||this.masterPlaylistLoader_.media();if(n=n||e.blacklistDuration||this.blacklistDuration,!s){this.error=e,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}s.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,l=o.filter(fh),f=l.length===1&&l[0]===s;if(o.length===1&&n!==1/0)return N.log.warn("Problem encountered with playlist "+s.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(f);if(f){var m=!1;o.forEach(function(R){if(R!==s){var H=R.excludeUntil;typeof H<"u"&&H!==1/0&&(m=!0,delete R.excludeUntil)}}),m&&(N.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var v;s.playlistErrors_>this.maxPlaylistRetries?v=1/0:v=Date.now()+n*1e3,s.excludeUntil=v,e.reason&&(s.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var y=this.selectPlaylist();if(!y){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var E=e.internal?this.logger_:N.log.warn,I=e.message?" "+e.message:"";E((e.internal?"Internal problem":"Problem")+" encountered with playlist "+s.id+"."+(I+" Switching to playlist "+y.id+".")),y.attributes.AUDIO!==s.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),y.attributes.SUBTITLES!==s.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var O=y.targetDuration/2*1e3||5*1e3,D=typeof y.lastRequest=="number"&&Date.now()-y.lastRequest<=O;return this.switchMedia_(y,"exclude",f||D)},i.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},i.delegateLoaders_=function(e,n){var s=this,o=[],l=e==="all";(l||e==="main")&&o.push(this.masterPlaylistLoader_);var f=[];(l||e==="audio")&&f.push("AUDIO"),(l||e==="subtitle")&&(f.push("CLOSED-CAPTIONS"),f.push("SUBTITLES")),f.forEach(function(m){var v=s.mediaTypes_[m]&&s.mediaTypes_[m].activePlaylistLoader;v&&o.push(v)}),["main","audio","subtitle"].forEach(function(m){var v=s[m+"SegmentLoader_"];v&&(e===m||e==="all")&&o.push(v)}),o.forEach(function(m){return n.forEach(function(v){typeof m[v]=="function"&&m[v]()})})},i.setCurrentTime=function(e){var n=Ou(this.tech_.buffered(),e);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(n&&n.length)return e;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},i.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Da.Playlist.duration(e):1/0:0},i.seekable=function(){return this.seekable_},i.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var s=this.syncController_.getExpiredTime(n,this.duration());if(s!==null){var o=this.masterPlaylistLoader_.master,l=Da.Playlist.seekable(n,s,Da.Playlist.liveEdgeDelay(o,n));if(l.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),s=this.syncController_.getExpiredTime(n,this.duration()),s===null||(e=Da.Playlist.seekable(n,s,Da.Playlist.liveEdgeDelay(o,n)),e.length===0)))){var f,m;this.seekable_&&this.seekable_.length&&(f=this.seekable_.end(0),m=this.seekable_.start(0)),e?e.start(0)>l.end(0)||l.start(0)>e.end(0)?this.seekable_=l:this.seekable_=N.createTimeRanges([[e.start(0)>l.start(0)?e.start(0):l.start(0),e.end(0)<l.end(0)?e.end(0):l.end(0)]]):this.seekable_=l,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===f&&this.seekable_.start(0)===m)&&(this.logger_("seekable updated ["+RS(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},i.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){var n=this.seekable();if(!n.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1));return}var s=this.tech_.buffered(),o=Da.Playlist.duration(this.masterPlaylistLoader_.media());s.length>0&&(o=Math.max(o,s.end(s.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},i.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(n){var s=e.mediaTypes_[n].groups;for(var o in s)s[o].forEach(function(l){l.playlistLoader&&l.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},i.master=function(){return this.masterPlaylistLoader_.master},i.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},i.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,n=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!n||!s)},i.getCodecsOrExclude_=function(){var e=this,n={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},s=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();n.video=n.main;var o=yd(this.master(),s),l={},f=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(n.main.hasVideo&&(l.video=o.video||n.main.videoCodec||Ey),n.main.isMuxed&&(l.video+=","+(o.audio||n.main.audioCodec||sc)),(n.main.hasAudio&&!n.main.isMuxed||n.audio.hasAudio||f)&&(l.audio=o.audio||n.main.audioCodec||n.audio.audioCodec||sc,n.audio.isFmp4=n.main.hasAudio&&!n.main.isMuxed?n.main.isFmp4:n.audio.isFmp4),!l.audio&&!l.video){this.blacklistCurrentPlaylist({playlist:s,message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var m=function(R,H){return R?ts(H):Ko(H)},v={},y;if(["video","audio"].forEach(function(D){if(l.hasOwnProperty(D)&&!m(n[D].isFmp4,l[D])){var R=n[D].isFmp4?"browser":"muxer";v[R]=v[R]||[],v[R].push(l[D]),D==="audio"&&(y=R)}}),f&&y&&s.attributes.AUDIO){var E=s.attributes.AUDIO;this.master().playlists.forEach(function(D){var R=D.attributes&&D.attributes.AUDIO;R===E&&D!==s&&(D.excludeUntil=1/0)}),this.logger_("excluding audio group "+E+" as "+y+' does not support codec(s): "'+l.audio+'"')}if(Object.keys(v).length){var I=Object.keys(v).reduce(function(D,R){return D&&(D+=", "),D+=R+' does not support codec(s): "'+v[R].join(",")+'"',D},"")+".";this.blacklistCurrentPlaylist({playlist:s,internal:!0,message:I,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var O=[];if(["video","audio"].forEach(function(D){var R=(oi(e.sourceUpdater_.codecs[D]||"")[0]||{}).type,H=(oi(l[D]||"")[0]||{}).type;R&&H&&R.toLowerCase()!==H.toLowerCase()&&O.push('"'+e.sourceUpdater_.codecs[D]+'" -> "'+l[D]+'"')}),O.length){this.blacklistCurrentPlaylist({playlist:s,message:"Codec switching not supported: "+O.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return l},i.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var n=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(n)}}},i.excludeUnsupportedVariants_=function(){var e=this,n=this.master().playlists,s=[];Object.keys(n).forEach(function(o){var l=n[o];if(s.indexOf(l.id)===-1){s.push(l.id);var f=yd(e.master,l),m=[];f.audio&&!Ko(f.audio)&&!ts(f.audio)&&m.push("audio codec "+f.audio),f.video&&!Ko(f.video)&&!ts(f.video)&&m.push("video codec "+f.video),f.text&&f.text==="stpp.ttml.im1t"&&m.push("text codec "+f.text),m.length&&(l.excludeUntil=1/0,e.logger_("excluding "+l.id+" for unsupported: "+m.join(", ")))}})},i.excludeIncompatibleVariants_=function(e){var n=this,s=[],o=this.master().playlists,l=mh(oi(e)),f=TE(l),m=l.video&&oi(l.video)[0]||null,v=l.audio&&oi(l.audio)[0]||null;Object.keys(o).forEach(function(y){var E=o[y];if(!(s.indexOf(E.id)!==-1||E.excludeUntil===1/0)){s.push(E.id);var I=[],O=yd(n.masterPlaylistLoader_.master,E),D=TE(O);if(!(!O.audio&&!O.video)){if(D!==f&&I.push('codec count "'+D+'" !== "'+f+'"'),!n.sourceUpdater_.canChangeType()){var R=O.video&&oi(O.video)[0]||null,H=O.audio&&oi(O.audio)[0]||null;R&&m&&R.type.toLowerCase()!==m.type.toLowerCase()&&I.push('video codec "'+R.type+'" !== "'+m.type+'"'),H&&v&&H.type.toLowerCase()!==v.type.toLowerCase()&&I.push('audio codec "'+H.type+'" !== "'+v.type+'"')}I.length&&(E.excludeUntil=1/0,n.logger_("blacklisting "+E.id+": "+I.join(" && ")))}}})},i.updateAdCues_=function(e){var n=0,s=this.seekable();s.length&&(n=s.start(0)),$N(e,this.cueTagsTrack_,n)},i.goalBufferLength=function(){var e=this.tech_.currentTime(),n=mi.GOAL_BUFFER_LENGTH,s=mi.GOAL_BUFFER_LENGTH_RATE,o=Math.max(n,mi.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+e*s,o)},i.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),n=mi.BUFFER_LOW_WATER_LINE,s=mi.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(n,mi.MAX_BUFFER_LOW_WATER_LINE),l=Math.max(n,mi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+e*s,this.experimentalBufferBasedABR?l:o)},i.bufferHighWaterLine=function(){return mi.BUFFER_HIGH_WATER_LINE},t}(N.EventTarget),fU=function(t,i,r){return function(e){var n=t.master.playlists[i],s=uv(n),o=fh(n);return typeof e>"u"?o:(e?delete n.disabled:n.disabled=!0,e!==o&&!s&&(r(),e?t.trigger("renditionenabled"):t.trigger("renditiondisabled")),e)}},cU=function(t,i,r){var e=t.masterPlaylistController_,n=t.options_.smoothQualityChange,s=n?"smooth":"fast",o=e[s+"QualityChange_"].bind(e);if(i.attributes){var l=i.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=i.attributes.BANDWIDTH,this.frameRate=i.attributes["FRAME-RATE"]}this.codecs=yd(e.master(),i),this.playlist=i,this.id=r,this.enabled=fU(t.playlists,i.id,o)},hU=function(t){t.representations=function(){var i=t.masterPlaylistController_.master(),r=_d(i)?t.masterPlaylistController_.getAudioTrackPlaylists_():i.playlists;return r?r.filter(function(e){return!uv(e)}).map(function(e,n){return new cU(t,e,e.id)}):[]}},NE=["seeking","seeked","pause","playing","error"],pU=function(){function a(i){var r=this;this.masterPlaylistController_=i.masterPlaylistController,this.tech_=i.tech,this.seekable=i.seekable,this.allowSeeksWithinUnsafeLiveWindow=i.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=i.liveRangeSafeTimeDelta,this.media=i.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=hn("PlaybackWatcher"),this.logger_("initialize");var e=function(){return r.monitorCurrentTime_()},n=function(){return r.monitorCurrentTime_()},s=function(){return r.techWaiting_()},o=function(){return r.cancelTimer_()},l=this.masterPlaylistController_,f=["main","subtitle","audio"],m={};f.forEach(function(y){m[y]={reset:function(){return r.resetSegmentDownloads_(y)},updateend:function(){return r.checkSegmentDownloads_(y)}},l[y+"SegmentLoader_"].on("appendsdone",m[y].updateend),l[y+"SegmentLoader_"].on("playlistupdate",m[y].reset),r.tech_.on(["seeked","seeking"],m[y].reset)});var v=function(E){["main","audio"].forEach(function(I){l[I+"SegmentLoader_"][E]("appended",r.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){r.fixesBadSeeks_()&&(r.consecutiveUpdates=0,r.lastRecordedTime=r.tech_.currentTime(),v("off"))},this.clearSeekingAppendCheck_=function(){return v("off")},this.watchForBadSeeking_=function(){r.clearSeekingAppendCheck_(),v("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(NE,o),this.tech_.on("canplay",n),this.tech_.one("play",e),this.dispose=function(){r.clearSeekingAppendCheck_(),r.logger_("dispose"),r.tech_.off("waiting",s),r.tech_.off(NE,o),r.tech_.off("canplay",n),r.tech_.off("play",e),r.tech_.off("seeking",r.watchForBadSeeking_),r.tech_.off("seeked",r.clearSeekingAppendCheck_),f.forEach(function(y){l[y+"SegmentLoader_"].off("appendsdone",m[y].updateend),l[y+"SegmentLoader_"].off("playlistupdate",m[y].reset),r.tech_.off(["seeked","seeking"],m[y].reset)}),r.checkCurrentTimeTimeout_&&F.clearTimeout(r.checkCurrentTimeTimeout_),r.cancelTimer_()}}var t=a.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&F.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=F.setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(r){var e=this.masterPlaylistController_[r+"SegmentLoader_"];this[r+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+r+" loader"),this[r+"StalledDownloads_"]=0,this[r+"Buffered_"]=e.buffered_()},t.checkSegmentDownloads_=function(r){var e=this.masterPlaylistController_,n=e[r+"SegmentLoader_"],s=n.buffered_(),o=aF(this[r+"Buffered_"],s);if(this[r+"Buffered_"]=s,o){this.resetSegmentDownloads_(r);return}this[r+"StalledDownloads_"]++,this.logger_("found #"+this[r+"StalledDownloads_"]+" "+r+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:ao(s)}),!(this[r+"StalledDownloads_"]<10)&&(this.logger_(r+" loader stalled download exclusion"),this.resetSegmentDownloads_(r),this.tech_.trigger({type:"usage",name:"vhs-"+r+"-download-exclusion"}),r!=="subtitle"&&e.blacklistCurrentPlaylist({message:"Excessive "+r+" segment downloading detected."},1/0))},t.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var r=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===r&&(!e.length||r+Gn>=e.end(e.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&r===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):r===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=r)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){var r=this.tech_.seeking();if(!r)return!1;var e=this.seekable(),n=this.tech_.currentTime(),s=this.afterSeekableWindow_(e,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(s){var l=e.end(e.length-1);o=l}if(this.beforeSeekableWindow_(e,n)){var f=e.start(0);o=f+(f===e.end(0)?0:Gn)}if(typeof o<"u")return this.logger_("Trying to seek outside of seekable at time "+n+" with "+("seekable range "+RS(e)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var m=this.masterPlaylistController_.sourceUpdater_,v=this.tech_.buffered(),y=m.audioBuffer?m.audioBuffered():null,E=m.videoBuffer?m.videoBuffered():null,I=this.media(),O=I.partTargetDuration?I.partTargetDuration:(I.targetDuration-us)*2,D=[y,E],R=0;R<D.length;R++)if(D[R]){var H=av(D[R],n);if(H<O)return!1}var Z=dh(v,n);return Z.length===0?!1:(o=Z.start(0)+Gn,this.logger_("Buffered region starts ("+Z.start(0)+") "+(" just beyond seek point ("+n+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},t.waiting_=function(){if(!this.techWaiting_()){var r=this.tech_.currentTime(),e=this.tech_.buffered(),n=Ou(e,r);if(n.length&&r+3<=n.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(r),this.logger_("Stopped at "+r+" while inside a buffered region "+("["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},t.techWaiting_=function(){var r=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(r,e)){var n=r.end(r.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to "+("live point (seekable end) "+n)),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var s=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),l=this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:e});if(l)return this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var f=dh(o,e);if(f.length>0){var m=f.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+m+", seeking "+("to "+f.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),m*1e3,e),!0}return!1},t.afterSeekableWindow_=function(r,e,n,s){if(s===void 0&&(s=!1),!r.length)return!1;var o=r.end(r.length-1)+Gn,l=!n.endList;return l&&s&&(o=r.end(r.length-1)+n.targetDuration*3),e>o},t.beforeSeekableWindow_=function(r,e){return!!(r.length&&r.start(0)>0&&e<r.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(r){var e=r.videoBuffered,n=r.audioBuffered,s=r.currentTime;if(e){var o;if(e.length&&n.length){var l=Ou(e,s-3),f=Ou(e,s),m=Ou(n,s);m.length&&!f.length&&l.length&&(o={start:l.end(0),end:m.end(0)})}else{var v=dh(e,s);v.length||(o=this.gapFromVideoUnderflow_(e,s))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+s)),!0):!1}},t.skipTheGap_=function(r){var e=this.tech_.buffered(),n=this.tech_.currentTime(),s=dh(e,n);this.cancelTimer_(),!(s.length===0||n!==r)&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",r,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+us),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(r,e){for(var n=iF(r),s=0;s<n.length;s++){var o=n.start(s),l=n.end(s);if(e-o<4&&e-o>2)return{start:o,end:l}}return null},a}(),mU={errorInterval:30,getSource:function(t){var i=this.tech({IWillNotUseThisInPlugins:!0}),r=i.currentSource_||this.currentSource();return t(r)}},gU=function a(t,i){var r=0,e=0,n=N.mergeOptions(mU,i);t.ready(function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){e&&t.currentTime(e)},o=function(y){y!=null&&(e=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(y),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},l=function(){if(Date.now()-r<n.errorInterval*1e3){t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),t.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!n.getSource||typeof n.getSource!="function"){N.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return r=Date.now(),n.getSource.call(t,o)},f=function v(){t.off("loadedmetadata",s),t.off("error",l),t.off("dispose",v)},m=function(y){f(),a(t,y)};t.on("error",l),t.on("dispose",f),t.reloadSourceOnError=m},vU=function(t){gU(this,t)},UE="2.16.2",_U="6.0.1",yU="0.22.1",TU="4.8.0",bU="3.1.3",Si={PlaylistLoader:Lu,Playlist:ur,utils:OF,STANDARD_PLAYLIST_SELECTOR:SE,INITIAL_PLAYLIST_SELECTOR:yN,lastBandwidthSelector:SE,movingAverageBandwidthSelector:vN,comparePlaylistBandwidth:bv,comparePlaylistResolution:gN,xhr:JS()};Object.keys(mi).forEach(function(a){Object.defineProperty(Si,a,{get:function(){return N.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),mi[a]},set:function(i){if(N.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),typeof i!="number"||i<0){N.log.warn("value of Vhs."+a+" must be greater than or equal to 0");return}mi[a]=i}})});var BE="videojs-vhs",jE=function(t,i){for(var r=i.media(),e=-1,n=0;n<t.length;n++)if(t[n].id===r.id){e=n;break}t.selectedIndex_=e,t.trigger({selectedIndex:e,type:"change"})},xU=function(t,i){i.representations().forEach(function(r){t.addQualityLevel(r)}),jE(t,i.playlists)};Si.canPlaySource=function(){return N.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var SU=function(t,i,r){if(!t)return t;var e={};i&&i.attributes&&i.attributes.CODECS&&(e=mh(oi(i.attributes.CODECS))),r&&r.attributes&&r.attributes.CODECS&&(e.audio=r.attributes.CODECS);var n=pa(e.video),s=pa(e.audio),o={};for(var l in t)o[l]={},s&&(o[l].audioContentType=s),n&&(o[l].videoContentType=n),i.contentProtection&&i.contentProtection[l]&&i.contentProtection[l].pssh&&(o[l].pssh=i.contentProtection[l].pssh),typeof t[l]=="string"&&(o[l].url=t[l]);return N.mergeOptions(t,o)},EU=function(t,i){return t.reduce(function(r,e){if(!e.contentProtection)return r;var n=i.reduce(function(s,o){var l=e.contentProtection[o];return l&&l.pssh&&(s[o]={pssh:l.pssh}),s},{});return Object.keys(n).length&&r.push(n),r},[])},wU=function(t){var i=t.player,r=t.sourceKeySystems,e=t.audioMedia,n=t.mainPlaylists;if(!i.eme.initializeMediaKeys)return Promise.resolve();var s=e?n.concat([e]):n,o=EU(s,Object.keys(r)),l=[],f=[];return o.forEach(function(m){f.push(new Promise(function(v,y){i.tech_.one("keysessioncreated",v)})),l.push(new Promise(function(v,y){i.eme.initializeMediaKeys({keySystems:m},function(E){if(E){y(E);return}v()})}))}),Promise.race([Promise.all(l),Promise.race(f)])},CU=function(t){var i=t.player,r=t.sourceKeySystems,e=t.media,n=t.audioMedia,s=SU(r,e,n);return s?(i.currentSource().keySystems=s,s&&!i.eme?(N.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},VE=function(){if(!F.localStorage)return null;var t=F.localStorage.getItem(BE);if(!t)return null;try{return JSON.parse(t)}catch{return null}},AU=function(t){if(!F.localStorage)return!1;var i=VE();i=i?N.mergeOptions(i,t):t;try{F.localStorage.setItem(BE,JSON.stringify(i))}catch{return!1}return i},IU=function(t){return t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(t.substring(t.indexOf(",")+1)):t};Si.supportsNativeHls=function(){if(!Se||!Se.createElement)return!1;var a=Se.createElement("video");if(!N.getTech("Html5").isSupported())return!1;var t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return t.some(function(i){return/maybe|probably/i.test(a.canPlayType(i))})}(),Si.supportsNativeDash=function(){return!Se||!Se.createElement||!N.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Se.createElement("video").canPlayType("application/dash+xml"))}(),Si.supportsTypeNatively=function(a){return a==="hls"?Si.supportsNativeHls:a==="dash"?Si.supportsNativeDash:!1},Si.isSupported=function(){return N.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var PU=N.getComponent("Component"),Cv=function(a){Ae(t,a);function t(r,e,n){var s;if(s=a.call(this,e,N.mergeOptions(n.hls,n.vhs))||this,n.hls&&Object.keys(n.hls).length&&N.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof n.initialBandwidth=="number"&&(s.options_.bandwidth=n.initialBandwidth),s.logger_=hn("VhsHandler"),e.options_&&e.options_.playerId){var o=N(e.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return N.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"hls-player-access"}),Ue(s)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return N.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"vhs-player-access"}),Ue(s)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return N.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Ue(s)},configurable:!0}),s.player_=o}if(s.tech_=e,s.source_=r,s.stats={},s.ignoreNextSeekingEvent_=!1,s.setOptions_(),s.options_.overrideNative&&e.overrideNativeAudioTracks&&e.overrideNativeVideoTracks)e.overrideNativeAudioTracks(!0),e.overrideNativeVideoTracks(!0);else if(s.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(Se,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(l){var f=Se.fullscreenElement||Se.webkitFullscreenElement||Se.mozFullScreenElement||Se.msFullscreenElement;f&&f.contains(s.tech_.el())?s.masterPlaylistController_.fastQualityChange_():s.masterPlaylistController_.checkABR_()}),s.on(s.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),s.on(s.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}var i=t.prototype;return i.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var n=VE();n&&n.bandwidth&&(this.options_.bandwidth=n.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),n&&n.throughput&&(this.options_.throughput=n.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=mi.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===mi.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(s){typeof e.source_[s]<"u"&&(e.options_[s]=e.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},i.src=function(e,n){var s=this;if(e){this.setOptions_(),this.options_.src=IU(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Si,this.options_.sourceType=oc(n),this.options_.seekTo=function(f){s.tech_.setCurrentTime(f)},this.options_.smoothQualityChange&&N.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new dU(this.options_);var o=N.mergeOptions({liveRangeSafeTimeDelta:Gn},this.options_,{seekable:function(){return s.seekable()},media:function(){return s.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new pU(o),this.masterPlaylistController_.on("error",function(){var f=N.players[s.tech_.options_.playerId],m=s.masterPlaylistController_.error;typeof m=="object"&&!m.code?m.code=3:typeof m=="string"&&(m={message:m,code:3}),f.error(m)});var l=this.options_.experimentalBufferBasedABR?Si.movingAverageBandwidthSelector(.55):Si.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):l.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Si.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(m){this.masterPlaylistController_.selectPlaylist=m.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(m){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=m,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var m=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,v=F.navigator.connection||F.navigator.mozConnection||F.navigator.webkitConnection,y=1e7;if(this.options_.useNetworkInformationApi&&v){var E=v.downlink*1e3*1e3;E>=y&&m>=y?m=Math.max(m,E):m=E}return m},set:function(m){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=m,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var m=1/(this.bandwidth||1),v;this.throughput>0?v=1/this.throughput:v=0;var y=Math.floor(1/(m+v));return y},set:function(){N.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return s.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return s.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return s.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return s.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return s.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return s.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return ao(s.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return s.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return s.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return s.tech_.name_},enumerable:!0},duration:{get:function(){return s.tech_.duration()},enumerable:!0},master:{get:function(){return s.playlists.master},enumerable:!0},playerDimensions:{get:function(){return s.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return ao(s.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return s.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){s.options_.useBandwidthFromLocalStorage&&AU({bandwidth:s.bandwidth,throughput:Math.round(s.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){hU(s)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){s.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=F.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},i.createKeySessions_=function(){var e=this,n=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),wU({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:n&&n.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(s){e.logger_("error while creating EME key session",s),e.player_.error({message:"Failed to initialize media keys for EME",code:3})})},i.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},i.setupEme_=function(){var e=this,n=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=CU({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:n&&n.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var l=e.masterPlaylistController_.master();if(!(!l||!l.playlists)){var f=[];if(l.playlists.forEach(function(v){v&&v.attributes&&v.attributes.RESOLUTION&&v.attributes.RESOLUTION.height>=720&&(!v.excludeUntil||v.excludeUntil<1/0)&&(v.excludeUntil=1/0,f.push(v))}),f.length){var m;(m=N.log).warn.apply(m,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(f)),e.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),N.browser.IE_VERSION===11||!s){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},i.setupQualityLevels_=function(){var e=this,n=N.players[this.tech_.options_.playerId];!n||!n.qualityLevels||this.qualityLevels_||(this.qualityLevels_=n.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){xU(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){jE(e.qualityLevels_,e.playlists)}))},t.version=function(){return{"@videojs/http-streaming":UE,"mux.js":_U,"mpd-parser":yU,"m3u8-parser":TU,"aes-decrypter":bU}},i.version=function(){return this.constructor.version()},i.canChangeType=function(){return LE.canChangeType()},i.play=function(){this.masterPlaylistController_.play()},i.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},i.duration=function(){return this.masterPlaylistController_.duration()},i.seekable=function(){return this.masterPlaylistController_.seekable()},i.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&F.URL.revokeObjectURL&&(F.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),a.prototype.dispose.call(this)},i.convertToProgramTime=function(e,n){return NF({playlist:this.masterPlaylistController_.media(),time:e,callback:n})},i.seekToProgramTime=function(e,n,s,o){return s===void 0&&(s=!0),o===void 0&&(o=2),UF({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:n})},t}(PU),xd={name:"videojs-http-streaming",VERSION:UE,canHandleSource:function(t,i){i===void 0&&(i={});var r=N.mergeOptions(N.options,i);return xd.canPlayType(t.type,r)},handleSource:function(t,i,r){r===void 0&&(r={});var e=N.mergeOptions(N.options,r);return i.vhs=new Cv(t,i,e),N.hasOwnProperty("hls")||Object.defineProperty(i,"hls",{get:function(){return N.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),i.vhs},configurable:!0}),i.vhs.xhr=JS(),i.vhs.src(t.src,t.type),i.vhs},canPlayType:function(t,i){var r=oc(t);if(!r)return"";var e=xd.getOverrideNative(i),n=Si.supportsTypeNatively(r),s=!n||e;return s?"maybe":""},getOverrideNative:function(t){t===void 0&&(t={});var i=t,r=i.vhs,e=r===void 0?{}:r,n=i.hls,s=n===void 0?{}:n,o=!(N.browser.IS_ANY_SAFARI||N.browser.IS_IOS),l=e.overrideNative,f=l===void 0?o:l,m=s.overrideNative,v=m===void 0?!1:m;return v||f}},OU=function(){return ts("avc1.4d400d,mp4a.40.2")};if(OU()&&N.getTech("Html5").registerSourceHandler(xd,0),N.VhsHandler=Cv,Object.defineProperty(N,"HlsHandler",{get:function(){return N.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),Cv},configurable:!0}),N.VhsSourceHandler=xd,Object.defineProperty(N,"HlsSourceHandler",{get:function(){return N.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),xd},configurable:!0}),N.Vhs=Si,Object.defineProperty(N,"Hls",{get:function(){return N.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Si},configurable:!0}),N.use||(N.registerComponent("Hls",Si),N.registerComponent("Vhs",Si)),N.options.vhs=N.options.vhs||{},N.options.hls=N.options.hls||{},!N.getPlugin||!N.getPlugin("reloadSourceOnError")){var DU=N.registerPlugin||N.plugin;DU("reloadSourceOnError",vU)}function LU(a,t){a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.__proto__=t}function Av(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}var kU=function(t){var i=this;return i.id=t.id,i.label=i.id,i.width=t.width,i.height=t.height,i.bitrate=t.bandwidth,i.frameRate=t.frameRate,i.enabled_=t.enabled,Object.defineProperty(i,"enabled",{get:function(){return i.enabled_()},set:function(e){i.enabled_(e)}}),i},bh=function(a){LU(t,a);function t(){var r;r=a.call(this)||this;var e=Av(Av(r));return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get:function(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get:function(){return e.levels_.length}}),e||Av(r)}var i=t.prototype;return i.addQualityLevel=function(e){var n=this.getQualityLevelById(e.id);if(n)return n;var s=this.levels_.length;return n=new kU(e),""+s in this||Object.defineProperty(this,s,{get:function(){return this.levels_[s]}}),this.levels_.push(n),this.trigger({qualityLevel:n,type:"addqualitylevel"}),n},i.removeQualityLevel=function(e){for(var n=null,s=0,o=this.length;s<o;s++)if(this[s]===e){n=this.levels_.splice(s,1)[0],this.selectedIndex_===s?this.selectedIndex_=-1:this.selectedIndex_>s&&this.selectedIndex_--;break}return n&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),n},i.getQualityLevelById=function(e){for(var n=0,s=this.length;n<s;n++){var o=this[n];if(o.id===e)return o}return null},i.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},t}(N.EventTarget);bh.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(var RU in bh.prototype.allowedEvents_)bh.prototype["on"+RU]=null;var HE="2.2.1",MU=N.registerPlugin||N.plugin,FU=function(t,i){var r=t.qualityLevels,e=new bh,n=function s(){e.dispose(),t.qualityLevels=r,t.off("dispose",s)};return t.on("dispose",n),t.qualityLevels=function(){return e},t.qualityLevels.VERSION=HE,e},$E=function(t){return FU(this,N.mergeOptions({},t))};MU("qualityLevels",$E),$E.VERSION=HE;var NU="1.1.4",WE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},Iv=function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")},qE=function(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(a,t):a.__proto__=t)},GE=function(a,t){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:a},UU=N.getComponent("MenuButton"),BU=N.getComponent("Menu"),jU=N.getComponent("Component"),VU=N.dom;function HU(a){return typeof a!="string"?a:a.charAt(0).toUpperCase()+a.slice(1)}var $U=function(a){qE(t,a);function t(i){return Iv(this,t),GE(this,a.call(this,i,{title:i.localize("Quality"),name:"QualityButton"}))}return t.prototype.createItems=function(){return[]},t.prototype.createMenu=function(){var r=new BU(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var e=VU.createEl("li",{className:"vjs-menu-title",innerHTML:HU(this.options_.title),tabIndex:-1}),n=new jU(this.player_,{el:e});this.hideThreshold_+=1,r.addItem(n)}if(this.items=this.createItems(),this.items)for(var s=0;s<this.items.length;s++)r.addItem(this.items[s]);return r},t}(UU),WU=N.getComponent("MenuItem"),qU=function(a){qE(t,a);function t(i,r,e,n){Iv(this,t);var s=GE(this,a.call(this,i,{label:r.label,selectable:!0,selected:r.selected||!1}));return s.item=r,s.qualityButton=e,s.plugin=n,s}return t.prototype.handleClick=function(){for(var r=0;r<this.qualityButton.items.length;++r)this.qualityButton.items[r].selected(!1);this.plugin.setQuality(this.item.value),this.selected(!0)},t}(WU),GU={},zU=N.registerPlugin||N.plugin,KU=function(){function a(t,i){Iv(this,a),this.player=t,this.config=i,this.player.qualityLevels&&this.getHls()&&(this.createQualityButton(),this.bindPlayerEvents())}return a.prototype.getHls=function(){return this.player.tech({IWillNotUseThisInPlugins:!0}).hls},a.prototype.bindPlayerEvents=function(){this.player.qualityLevels().on("addqualitylevel",this.onAddQualityLevel.bind(this))},a.prototype.createQualityButton=function(){var i=this.player;this._qualityButton=new $U(i);var r=i.controlBar.children().length-2,e=i.controlBar.addChild(this._qualityButton,{componentClass:"qualitySelector"},this.config.placementIndex||r);if(e.addClass("vjs-quality-selector"),this.config.displayCurrentQuality)this.setButtonInnerText("auto");else{var n=" "+(this.config.vjsIconClass||"vjs-icon-hd");e.menuButton_.$(".vjs-icon-placeholder").className+=n}e.removeClass("vjs-hidden")},a.prototype.setButtonInnerText=function(i){this._qualityButton.menuButton_.$(".vjs-icon-placeholder").innerHTML=i},a.prototype.getQualityMenuItem=function(i){var r=this.player;return new qU(r,i,this._qualityButton,this)},a.prototype.onAddQualityLevel=function(){for(var i=this,r=this.player,e=r.qualityLevels(),n=e.levels_||[],s=[],o=function(m){if(!s.filter(function(y){return y.item&&y.item.value===n[m].height}).length){var v=i.getQualityMenuItem.call(i,{label:n[m].height+"p",value:n[m].height});s.push(v)}},l=0;l<n.length;++l)o(l);s.sort(function(f,m){return(typeof f>"u"?"undefined":WE(f))!=="object"||(typeof m>"u"?"undefined":WE(m))!=="object"||f.item.value<m.item.value?-1:f.item.value>m.item.value?1:0}),s.push(this.getQualityMenuItem.call(this,{label:r.localize("Auto"),value:"auto",selected:!0})),this._qualityButton&&(this._qualityButton.createItems=function(){return s},this._qualityButton.update())},a.prototype.setQuality=function(i){var r=this.player.qualityLevels();this._currentQuality=i,this.config.displayCurrentQuality&&this.setButtonInnerText(i==="auto"?i:i+"p");for(var e=0;e<r.length;++e){var n=r[e];n.enabled=n.height===i||i==="auto"}this._qualityButton.unpressButton()},a.prototype.getCurrentQuality=function(){return this._currentQuality||"auto"},a}(),XU=function(t,i){t.addClass("vjs-hls-quality-selector"),t.hlsQualitySelector=new KU(t,i)},Pv=function(t){var i=this;this.ready(function(){XU(i,N.mergeOptions(GU,t))})};zU("hlsQualitySelector",Pv),Pv.VERSION=NU;var QU="2.1.6",YU=N.getPlugin("plugin"),JU={image:void 0,url:void 0,position:"top-right",offsetH:0,offsetV:0,width:void 0,height:void 0,padding:5,fadeDelay:5e3,hideOnReady:!1,opacity:1},Ov=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r)||this,n.tid=null,n.div=null,n.options=N.mergeOptions(JU,e),n.player.ready(function(){return n._onPlayerReady()}),n}var i=t.prototype;return i._onPlayerReady=function(){this.player.addClass("vjs-logo"),this.options.image&&(this._setup(),this.options.hideOnReady||this.show())},i._setup=function(){var e=this,n=this.player.el(),s=document.createElement("div");s.classList.add("vjs-logo-content"),s.classList.add("vjs-logo-hide"),s.style.padding=this.options.padding+"px";var o=this.options,l=o.offsetH,f=o.offsetV;switch(this.options.position){case"top-left":s.style.top=f+"px",s.style.left=l+"px";break;case"top-right":s.style.top=f+"px",s.style.right=l+"px";break;case"bottom-left":s.style.bottom=f+"px",s.style.left=l+"px";break;case"bottom-right":s.style.bottom=f+"px",s.style.right=l+"px";break;default:s.style.top=f+"px",s.style.right=l+"px"}this.div=s;var m=document.createElement("img");m.src=this.options.image;var v=this.options,y=v.width,E=v.height,I=v.opacity;if(y&&(m.width=y),E&&(m.height=E),I&&(m.style.opacity=I),this.options.url){var O=document.createElement("a");O.href=this.options.url,O.onclick=function(D){D.preventDefault(),window.open(e.options.url)},O.appendChild(m),s.appendChild(O)}else s.appendChild(m);n.appendChild(s)},i.show=function(){var e=this;this.tid&&(clearTimeout(this.tid),this.tid=null),this.div&&this.div.classList.remove("vjs-logo-hide"),this.options.fadeDelay!==null&&(this.tid=setTimeout(function(){e.hide(),e.tid=null},this.options.fadeDelay))},i.hide=function(){this.div&&this.div.classList.add("vjs-logo-hide")},t}(YU);Ov.defaultState={},Ov.VERSION=QU,N.registerPlugin("logo",Ov);let Qi=null;const ZU=bl({mixins:[oy],props:{logo:{type:String,default:null},source:{type:Object}},data:()=>({withCredentials:!1}),mounted(){this.init()},beforeUnmount(){Qi&&Qi.dispose()},methods:{async init(){await this.$nextTick();const a=$(this.$el).find(".video-js")[0];await this.$nextTick(),Qi=N(a,{controls:!this.disabled,preload:"auto",width:this.width,height:this.height,html5:{vhs:{overrideNative:!0,withCredentials:this.withCredentials}}}),Qi.on("ready",()=>{this.onPlayerReady()})},async onPlayerReady(){this.logo&&Qi.logo({image:this.logo,width:60,height:60,hideOnReady:!1,fadeDelay:null,padding:10,opacity:.7}),await this.setupSource(),this.setupEventListeners()},async setupSource(){var a,t,i,r;((a=this.source)==null?void 0:a.type)==Gs.M3U8?Qi.src({type:"application/x-mpegURL",src:(t=this.source)==null?void 0:t.url,withCredentials:this.withCredentials}):Qi.src({src:(i=this.source)==null?void 0:i.url}),await this.$nextTick(),((r=this.source)==null?void 0:r.type)===Gs.M3U8&&(Qi.hlsQualitySelector=Pv,Qi.hlsQualitySelector({displayCurrentQuality:!0})),this.startTime&&Qi.currentTime(this.startTime),this.shouldAutoplay&&Qi.autoplay("muted")},setupEventListeners(){Qi.on("firstplay",()=>{this.videoFirstPlay()}),Qi.on("play",()=>{this.videoPlay()}),Qi.on("pause",()=>{this.videoPause()}),Qi.on("ended",()=>{this.videoEnd()})}},watch:{source:{deep:!0,handler(a,t){JSON.stringify(a)!=JSON.stringify(t)&&this.init()}},disabled:{handler(a,t){this.init()}}}}),eB={"micro-media-player":"video-js"},tB=[Yf("video",{class:"video-js",controls:""},null,-1)];function iB(a,t,i,r,e,n){return Cl(),Up("div",eB,tB)}const zE=Jp(ZU,[["render",iB]]),rB=["debug"],nB=Jp(bl({__name:"playerRoot.ce",props:{debug:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},setup(a,{expose:t}){const i=a;BI(H=>({"4f0eb53b":Bo(R).width,"78f8f852":Bo(R).height}));const r=Lf({width:0,height:0,ready:!1,initOptions:{},source:null,playerReady:!0,disabled:!1}),e=AC(null),n=()=>{if(e.value)r.width=r.initOptions.width||400,r.height=r.initOptions.height||300;else return},s=ec(()=>{var H,Z,V,W;return r.ready?((H=r.source)==null?void 0:H.type)===Gs.YOUTUBE?nP:((Z=r.source)==null?void 0:Z.type)===Gs.M3U8||((V=r.source)==null?void 0:V.type)===Gs.STATIC_VIDEO?zE:(i.debug&&console.warn("video source undefined: ",(W=r.source)==null?void 0:W.type),null):null}),o=H=>{var Z;r.width=H.width,r.height=H.height,((Z=r.source)==null?void 0:Z.type)==Gs.YOUTUBE&&D()},l=()=>{r.source=null},f=ec(()=>({width:`${r.width}px`,height:`${r.height}px`})),m=async H=>{r.initOptions=H,r.ready=!1,n(),await Vo(),r.ready=!0},v=H=>{r.source=H},y=()=>{typeof r.initOptions.eventOnFirstPlay=="function"&&r.initOptions.eventOnFirstPlay()},E=()=>{typeof r.initOptions.eventOnPlay=="function"&&r.initOptions.eventOnPlay()},I=()=>{typeof r.initOptions.eventOnPause=="function"&&r.initOptions.eventOnPause()},O=()=>{typeof r.initOptions.eventOnEnd=="function"&&r.initOptions.eventOnEnd()};t({init:m,setupSource:v,clearSource:l,setSize:o});const D=async()=>{r.playerReady=!1,await Vo(),r.playerReady=!0},R=ec(()=>({width:`${r.width}px`,height:`${r.height}px`}));return Tl(()=>r.source,(H,Z)=>{QI.isEqual(Z,H)||D()},{deep:!0}),Tl(()=>i.disabled,(H,Z)=>D()),(H,Z)=>{var V,W;return SA((Cl(),Up("div",{ce:"player-root",ref_key:"playerRoot",ref:e,debug:a.debug,style:_f(Bo(f))},[Bo(s)&&r.playerReady?(Cl(),V_(EA(Bo(s)),{key:0,onVideoFirstPlay:y,onVideoPlay:E,onVideoPause:I,onVideoEnd:O,source:r.source,width:r.width,height:r.height,logo:r.initOptions.logo,autoplay:((V=r.source)==null?void 0:V.autoplay)===!0,startTime:(W=r.source)==null?void 0:W.startTime,disabled:a.disabled==!0,debug:a.debug},null,40,["source","width","height","logo","autoplay","startTime","disabled","debug"])):rI("",!0)],12,rB)),[[jI,r.ready&&r.source]])}}}),[["styles",[`@charset "UTF-8";.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.vjs-modal-dialog .vjs-modal-dialog-content{position:absolute;top:0;left:0;width:100%;height:100%}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.vjs-button>.vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");font-weight:400;font-style:normal}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-play-control .vjs-icon-placeholder,.vjs-icon-play{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.vjs-icon-play:before{content:"\\f101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\\f102"}.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder,.vjs-icon-pause{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before,.vjs-icon-pause:before{content:"\\f103"}.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder,.vjs-icon-volume-mute{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before,.vjs-icon-volume-mute:before{content:"\\f104"}.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder,.vjs-icon-volume-low{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before,.vjs-icon-volume-low:before{content:"\\f105"}.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder,.vjs-icon-volume-mid{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before,.vjs-icon-volume-mid:before{content:"\\f106"}.video-js .vjs-mute-control .vjs-icon-placeholder,.vjs-icon-volume-high{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control .vjs-icon-placeholder:before,.vjs-icon-volume-high:before{content:"\\f107"}.video-js .vjs-fullscreen-control .vjs-icon-placeholder,.vjs-icon-fullscreen-enter{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-enter:before{content:"\\f108"}.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder,.vjs-icon-fullscreen-exit{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-exit:before{content:"\\f109"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\\f10a"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\\f10b"}.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.vjs-icon-subtitles{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.vjs-icon-subtitles:before{content:"\\f10c"}.video-js .vjs-captions-button .vjs-icon-placeholder,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.vjs-icon-captions{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-captions-button .vjs-icon-placeholder:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.vjs-icon-captions:before{content:"\\f10d"}.video-js .vjs-chapters-button .vjs-icon-placeholder,.vjs-icon-chapters{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-chapters-button .vjs-icon-placeholder:before,.vjs-icon-chapters:before{content:"\\f10e"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\\f10f"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\\f110"}.video-js .vjs-play-progress,.video-js .vjs-volume-level,.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-progress:before,.video-js .vjs-volume-level:before,.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before{content:"\\f111"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\\f112"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\f113"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\\f114"}.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder,.vjs-icon-cancel{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before,.vjs-icon-cancel:before{content:"\\f115"}.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder,.vjs-icon-replay{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before,.vjs-icon-replay:before{content:"\\f116"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\\f117"}.vjs-icon-gplus{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-gplus:before{content:"\\f118"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\\f119"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\\f11a"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\\f11b"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\\f11c"}.video-js .vjs-descriptions-button .vjs-icon-placeholder,.vjs-icon-audio-description{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-descriptions-button .vjs-icon-placeholder:before,.vjs-icon-audio-description:before{content:"\\f11d"}.video-js .vjs-audio-button .vjs-icon-placeholder,.vjs-icon-audio{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-audio-button .vjs-icon-placeholder:before,.vjs-icon-audio:before{content:"\\f11e"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\\f11f"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\\f120"}.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder,.vjs-icon-picture-in-picture-enter{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before,.vjs-icon-picture-in-picture-enter:before{content:"\\f121"}.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder,.vjs-icon-picture-in-picture-exit{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before,.vjs-icon-picture-in-picture-exit:before{content:"\\f122"}.video-js{display:block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:0}.video-js *,.video-js :after,.video-js :before{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-1-1,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-fluid{width:100%;max-width:100%}.video-js.vjs-1-1:not(.vjs-audio-only-mode),.video-js.vjs-16-9:not(.vjs-audio-only-mode),.video-js.vjs-4-3:not(.vjs-audio-only-mode),.video-js.vjs-9-16:not(.vjs-audio-only-mode),.video-js.vjs-fluid:not(.vjs-audio-only-mode){height:0}.video-js.vjs-16-9:not(.vjs-audio-only-mode){padding-top:56.25%}.video-js.vjs-4-3:not(.vjs-audio-only-mode){padding-top:75%}.video-js.vjs-9-16:not(.vjs-audio-only-mode){padding-top:177.7777777778%}.video-js.vjs-1-1:not(.vjs-audio-only-mode){padding-top:100%}.video-js.vjs-fill:not(.vjs-audio-only-mode){width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}.video-js.vjs-audio-only-mode .vjs-tech{display:none}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;left:0;top:0;bottom:0;right:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs){width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1!important;visibility:visible!important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:10px;left:10px;padding:0;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:#2b333fb3;border-radius:.3em;transition:all .4s}.vjs-big-play-centered .vjs-big-play-button{top:50%;left:50%;margin-top:-.81666em;margin-left:-1.5em}.video-js .vjs-big-play-button:focus,.video-js:hover .vjs-big-play-button{border-color:#fff;background-color:#73859f;background-color:#73859f80;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-error .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:0 0;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(255,255,255,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.js-focus-visible .vjs-menu li.vjs-menu-item:hover,.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:#73859f80}.js-focus-visible .vjs-menu li.vjs-selected:hover,.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.js-focus-visible .vjs-menu :not(.vjs-selected):focus:not(.focus-visible),.video-js .vjs-menu :not(.vjs-selected):focus:not(:focus-visible){background:0 0}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0;margin-bottom:1.5em;border-top-color:#2b333fb3}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:#2b333fb3;position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-menu-button-popup .vjs-menu.vjs-lock-showing,.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline:hover,.video-js.vjs-no-flex .vjs-menu-button-inline{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline.vjs-slider-active .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline:hover .vjs-menu{display:block;opacity:1}.vjs-no-flex .vjs-menu-button-inline .vjs-menu{display:block;opacity:1;position:relative;width:auto}.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu{width:auto}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:#2b333fb3}.vjs-audio-only-mode .vjs-control-bar,.vjs-has-started .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-error .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar{display:none!important}.vjs-audio-only-mode.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar,.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible;pointer-events:auto}.vjs-has-started.vjs-no-flex .vjs-control-bar{display:table}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.video-js .vjs-control.vjs-visible-text{width:auto;padding-left:1em;padding-right:1em}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus,.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before{text-shadow:0 0 1em #fff}.video-js :not(.vjs-visible-text)>.vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.vjs-no-flex .vjs-control{display:table-cell;vertical-align:middle}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.vjs-no-flex .vjs-progress-control{width:auto}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div,.video-js .vjs-progress-holder .vjs-play-progress{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;top:-.3333333333em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.vjs-no-flex .vjs-progress-control .vjs-mouse-display{z-index:0}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:#000c}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#73859f;background-color:#73859f80}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0 0 1em #fff;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;visibility:visible;opacity:1;position:relative;transition:none}.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{position:absolute;bottom:3em;left:.5em}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{top:-.3em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:#2b333fb3}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.vjs-no-flex .vjs-volume-control .vjs-mouse-display{z-index:0}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-volume-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:#000c}.vjs-poster{display:inline-block;vertical-align:middle;background-repeat:no-repeat;background-position:50% 50%;background-size:contain;background-color:#000;cursor:pointer;margin:0;padding:0;position:absolute;top:0;right:0;bottom:0;left:0;height:100%}.vjs-has-started .vjs-poster,.vjs-using-native-controls .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster,.vjs-has-started.vjs-audio-poster-mode .vjs-poster{display:block}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.vjs-no-flex .vjs-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-liveui .vjs-live-control,.video-js:not(.vjs-live) .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.vjs-no-flex .vjs-seek-to-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control,.video-js .vjs-current-time,.vjs-no-flex .vjs-current-time,.video-js .vjs-duration,.vjs-no-flex .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.vjs-live .vjs-time-divider{display:none}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;bottom:3em;left:0;right:0;top:0;pointer-events:none}.video-js.vjs-controls-disabled .vjs-text-track-display,.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-controls-disabled video::-webkit-media-text-track-display,.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-picture-in-picture-control{display:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-fullscreen-control{display:none}.vjs-playback-rate .vjs-playback-rate-value,.vjs-playback-rate>.vjs-menu-button{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;-webkit-animation:vjs-spinner-show 0s linear .3s forwards;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:after,.vjs-loading-spinner:before{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before{-webkit-animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite;animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;-webkit-animation-delay:.44s;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@-webkit-keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(360deg)}}@-webkit-keyframes vjs-spinner-spin{to{-webkit-transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}@-webkit-keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.video-js.vjs-audio-only-mode .vjs-captions-button{display:none}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js.vjs-audio-only-mode .vjs-descriptions-button{display:none}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\\f10d";font-size:1.5em;line-height:inherit}.video-js.vjs-audio-only-mode .vjs-subs-caps-button{display:none}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \\f11d";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-volume-control{display:none}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover{width:auto;width:initial}.video-js.vjs-layout-tiny .vjs-progress-control,.video-js.vjs-layout-x-small .vjs-progress-control{display:none}.video-js.vjs-layout-x-small .vjs-custom-control-spacer{flex:auto;display:block}.video-js.vjs-layout-x-small.vjs-no-flex .vjs-custom-control-spacer{width:auto}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:#2b333fbf;color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-controls,.vjs-text-track-settings .vjs-track-settings-font{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display:grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:active,.vjs-track-settings-controls button:focus{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f 100%)}.vjs-track-settings-controls button:hover{color:#2b333fbf}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}@media print{.video-js>:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js :focus:not(.focus-visible){outline:0}.video-js :focus:not(:focus-visible){outline:0}/*! @name videojs-logo @version 2.1.6 @license MIT */.video-js.vjs-logo{display:block}.video-js.vjs-logo .vjs-logo-content{position:absolute;opacity:1;transition:visibility 2s,opacity 2s}.video-js.vjs-logo .vjs-logo-content.vjs-logo-hide{visibility:hidden;opacity:0}*[ce=player-root][debug]{border:1px grey solid}.video-js{width:var(--4f0eb53b);height:var(--78f8f852)}.vjs-fluid:not(.vjs-audio-only-mode){padding-top:56.25%}div[micro-media-player=youtube][disabled=true]{opacity:.8;cursor:not-allowed}div[micro-media-player=youtube][disabled=true]>*{pointer-events:none}
`]]]);customElements.define(WI.webComponentNamePlayer,NI(nB))});