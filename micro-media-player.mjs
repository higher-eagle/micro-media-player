function Yu(a,t){const i=Object.create(null),r=a.split(",");for(let e=0;e<r.length;e++)i[r[e]]=!0;return t?e=>!!i[e.toLowerCase()]:e=>!!i[e]}function _h(a){if(Je(a)){const t={};for(let i=0;i<a.length;i++){const r=a[i],e=ii(r)?HD(r):_h(r);if(e)for(const n in e)t[n]=e[n]}return t}else{if(ii(a))return a;if(Ut(a))return a}}const BD=/;(?![^(]*\))/g,jD=/:([^]+)/,VD=/\/\*.*?\*\//gs;function HD(a){const t={};return a.replace(VD,"").split(BD).forEach(i=>{if(i){const r=i.split(jD);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function Lg(a){let t="";if(ii(a))t=a;else if(Je(a))for(let i=0;i<a.length;i++){const r=Lg(a[i]);r&&(t+=r+" ")}else if(Ut(a))for(const i in a)a[i]&&(t+=i+" ");return t.trim()}const $D="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",WD=Yu($D);function jb(a){return!!a||a===""}const kt={}.NODE_ENV!=="production"?Object.freeze({}):{},Pu={}.NODE_ENV!=="production"?Object.freeze([]):[],Ai=()=>{},Vb=()=>!1,qD=/^on[^a-z]/,Zd=a=>qD.test(a),Pc=a=>a.startsWith("onUpdate:"),ti=Object.assign,kg=(a,t)=>{const i=a.indexOf(t);i>-1&&a.splice(i,1)},GD=Object.prototype.hasOwnProperty,gt=(a,t)=>GD.call(a,t),Je=Array.isArray,Ou=a=>yh(a)==="[object Map]",zD=a=>yh(a)==="[object Set]",tt=a=>typeof a=="function",ii=a=>typeof a=="string",Rg=a=>typeof a=="symbol",Ut=a=>a!==null&&typeof a=="object",Mg=a=>Ut(a)&&tt(a.then)&&tt(a.catch),KD=Object.prototype.toString,yh=a=>KD.call(a),Fg=a=>yh(a).slice(8,-1),XD=a=>yh(a)==="[object Object]",Ng=a=>ii(a)&&a!=="NaN"&&a[0]!=="-"&&""+parseInt(a,10)===a,vc=Yu(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),QD=Yu("bind,cloak,else-if,else,for,html,if,model,on,once,pre,show,slot,text,memo"),Th=a=>{const t=Object.create(null);return i=>t[i]||(t[i]=a(i))},YD=/-(\w)/g,Fr=Th(a=>a.replace(YD,(t,i)=>i?i.toUpperCase():"")),JD=/\B([A-Z])/g,Rr=Th(a=>a.replace(JD,"-$1").toLowerCase()),Co=Th(a=>a.charAt(0).toUpperCase()+a.slice(1)),ao=Th(a=>a?`on${Co(a)}`:""),Rd=(a,t)=>!Object.is(a,t),rd=(a,t)=>{for(let i=0;i<a.length;i++)a[i](t)},Oc=(a,t,i)=>{Object.defineProperty(a,t,{configurable:!0,enumerable:!1,value:i})},ZD=a=>{const t=parseFloat(a);return isNaN(t)?a:t},cy=a=>{const t=ii(a)?Number(a):NaN;return isNaN(t)?a:t};let hy;const Hb=()=>hy||(hy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function Em(a,...t){console.warn(`[Vue warn] ${a}`,...t)}let Tn;class eL{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this.parent=Tn,!t&&Tn&&(this.index=(Tn.scopes||(Tn.scopes=[])).push(this)-1)}get active(){return this._active}run(t){if(this._active){const i=Tn;try{return Tn=this,t()}finally{Tn=i}}else({}).NODE_ENV!=="production"&&Em("cannot run an inactive effect scope.")}on(){Tn=this}off(){Tn=this.parent}stop(t){if(this._active){let i,r;for(i=0,r=this.effects.length;i<r;i++)this.effects[i].stop();for(i=0,r=this.cleanups.length;i<r;i++)this.cleanups[i]();if(this.scopes)for(i=0,r=this.scopes.length;i<r;i++)this.scopes[i].stop(!0);if(!this.detached&&this.parent&&!t){const e=this.parent.scopes.pop();e&&e!==this&&(this.parent.scopes[this.index]=e,e.index=this.index)}this.parent=void 0,this._active=!1}}}function tL(a,t=Tn){t&&t.active&&t.effects.push(a)}function iL(){return Tn}const Md=a=>{const t=new Set(a);return t.w=0,t.n=0,t},$b=a=>(a.w&ys)>0,Wb=a=>(a.n&ys)>0,rL=({deps:a})=>{if(a.length)for(let t=0;t<a.length;t++)a[t].w|=ys},nL=a=>{const{deps:t}=a;if(t.length){let i=0;for(let r=0;r<t.length;r++){const e=t[r];$b(e)&&!Wb(e)?e.delete(a):t[i++]=e,e.w&=~ys,e.n&=~ys}t.length=i}},wm=new WeakMap;let md=0,ys=1;const Cm=30;let zi;const go=Symbol({}.NODE_ENV!=="production"?"iterate":""),Am=Symbol({}.NODE_ENV!=="production"?"Map key iterate":"");class Ug{constructor(t,i=null,r){this.fn=t,this.scheduler=i,this.active=!0,this.deps=[],this.parent=void 0,tL(this,r)}run(){if(!this.active)return this.fn();let t=zi,i=vs;for(;t;){if(t===this)return;t=t.parent}try{return this.parent=zi,zi=this,vs=!0,ys=1<<++md,md<=Cm?rL(this):py(this),this.fn()}finally{md<=Cm&&nL(this),ys=1<<--md,zi=this.parent,vs=i,this.parent=void 0,this.deferStop&&this.stop()}}stop(){zi===this?this.deferStop=!0:this.active&&(py(this),this.onStop&&this.onStop(),this.active=!1)}}function py(a){const{deps:t}=a;if(t.length){for(let i=0;i<t.length;i++)t[i].delete(a);t.length=0}}let vs=!0;const qb=[];function Po(){qb.push(vs),vs=!1}function Oo(){const a=qb.pop();vs=a===void 0?!0:a}function tr(a,t,i){if(vs&&zi){let r=wm.get(a);r||wm.set(a,r=new Map);let e=r.get(i);e||r.set(i,e=Md());const n={}.NODE_ENV!=="production"?{effect:zi,target:a,type:t,key:i}:void 0;Im(e,n)}}function Im(a,t){let i=!1;md<=Cm?Wb(a)||(a.n|=ys,i=!$b(a)):i=!a.has(zi),i&&(a.add(zi),zi.deps.push(a),{}.NODE_ENV!=="production"&&zi.onTrack&&zi.onTrack(Object.assign({effect:zi},t)))}function Ra(a,t,i,r,e,n){const s=wm.get(a);if(!s)return;let o=[];if(t==="clear")o=[...s.values()];else if(i==="length"&&Je(a)){const f=Number(r);s.forEach((m,v)=>{(v==="length"||v>=f)&&o.push(m)})}else switch(i!==void 0&&o.push(s.get(i)),t){case"add":Je(a)?Ng(i)&&o.push(s.get("length")):(o.push(s.get(go)),Ou(a)&&o.push(s.get(Am)));break;case"delete":Je(a)||(o.push(s.get(go)),Ou(a)&&o.push(s.get(Am)));break;case"set":Ou(a)&&o.push(s.get(go));break}const l={}.NODE_ENV!=="production"?{target:a,type:t,key:i,newValue:r,oldValue:e,oldTarget:n}:void 0;if(o.length===1)o[0]&&({}.NODE_ENV!=="production"?Tu(o[0],l):Tu(o[0]));else{const f=[];for(const m of o)m&&f.push(...m);({}).NODE_ENV!=="production"?Tu(Md(f),l):Tu(Md(f))}}function Tu(a,t){const i=Je(a)?a:[...a];for(const r of i)r.computed&&my(r,t);for(const r of i)r.computed||my(r,t)}function my(a,t){(a!==zi||a.allowRecurse)&&({}.NODE_ENV!=="production"&&a.onTrigger&&a.onTrigger(ti({effect:a},t)),a.scheduler?a.scheduler():a.run())}const aL=Yu("__proto__,__v_isRef,__isVue"),Gb=new Set(Object.getOwnPropertyNames(Symbol).filter(a=>a!=="arguments"&&a!=="caller").map(a=>Symbol[a]).filter(Rg)),sL=bh(),oL=bh(!1,!0),uL=bh(!0),lL=bh(!0,!0),gy=dL();function dL(){const a={};return["includes","indexOf","lastIndexOf"].forEach(t=>{a[t]=function(...i){const r=st(this);for(let n=0,s=this.length;n<s;n++)tr(r,"get",n+"");const e=r[t](...i);return e===-1||e===!1?r[t](...i.map(st)):e}}),["push","pop","shift","unshift","splice"].forEach(t=>{a[t]=function(...i){Po();const r=st(this)[t].apply(this,i);return Oo(),r}}),a}function fL(a){const t=st(this);return tr(t,"has",a),t.hasOwnProperty(a)}function bh(a=!1,t=!1){return function(r,e,n){if(e==="__v_isReactive")return!a;if(e==="__v_isReadonly")return a;if(e==="__v_isShallow")return t;if(e==="__v_raw"&&n===(a?t?ex:Zb:t?Jb:Yb).get(r))return r;const s=Je(r);if(!a){if(s&&gt(gy,e))return Reflect.get(gy,e,n);if(e==="hasOwnProperty")return fL}const o=Reflect.get(r,e,n);return(Rg(e)?Gb.has(e):aL(e))||(a||tr(r,"get",e),t)?o:di(o)?s&&Ng(e)?o:o.value:Ut(o)?a?tx(o):Eh(o):o}}const cL=zb(),hL=zb(!0);function zb(a=!1){return function(i,r,e,n){let s=i[r];if(Ts(s)&&di(s)&&!di(e))return!1;if(!a&&(!Dc(e)&&!Ts(e)&&(s=st(s),e=st(e)),!Je(i)&&di(s)&&!di(e)))return s.value=e,!0;const o=Je(i)&&Ng(r)?Number(r)<i.length:gt(i,r),l=Reflect.set(i,r,e,n);return i===st(n)&&(o?Rd(e,s)&&Ra(i,"set",r,e,s):Ra(i,"add",r,e)),l}}function pL(a,t){const i=gt(a,t),r=a[t],e=Reflect.deleteProperty(a,t);return e&&i&&Ra(a,"delete",t,void 0,r),e}function mL(a,t){const i=Reflect.has(a,t);return(!Rg(t)||!Gb.has(t))&&tr(a,"has",t),i}function gL(a){return tr(a,"iterate",Je(a)?"length":go),Reflect.ownKeys(a)}const Kb={get:sL,set:cL,deleteProperty:pL,has:mL,ownKeys:gL},Xb={get:uL,set(a,t){return{}.NODE_ENV!=="production"&&Em(`Set operation on key "${String(t)}" failed: target is readonly.`,a),!0},deleteProperty(a,t){return{}.NODE_ENV!=="production"&&Em(`Delete operation on key "${String(t)}" failed: target is readonly.`,a),!0}},vL=ti({},Kb,{get:oL,set:hL}),_L=ti({},Xb,{get:lL}),Bg=a=>a,xh=a=>Reflect.getPrototypeOf(a);function Qf(a,t,i=!1,r=!1){a=a.__v_raw;const e=st(a),n=st(t);i||(t!==n&&tr(e,"get",t),tr(e,"get",n));const{has:s}=xh(e),o=r?Bg:i?jg:Fd;if(s.call(e,t))return o(a.get(t));if(s.call(e,n))return o(a.get(n));a!==e&&a.get(t)}function Yf(a,t=!1){const i=this.__v_raw,r=st(i),e=st(a);return t||(a!==e&&tr(r,"has",a),tr(r,"has",e)),a===e?i.has(a):i.has(a)||i.has(e)}function Jf(a,t=!1){return a=a.__v_raw,!t&&tr(st(a),"iterate",go),Reflect.get(a,"size",a)}function vy(a){a=st(a);const t=st(this);return xh(t).has.call(t,a)||(t.add(a),Ra(t,"add",a,a)),this}function _y(a,t){t=st(t);const i=st(this),{has:r,get:e}=xh(i);let n=r.call(i,a);n?{}.NODE_ENV!=="production"&&Qb(i,r,a):(a=st(a),n=r.call(i,a));const s=e.call(i,a);return i.set(a,t),n?Rd(t,s)&&Ra(i,"set",a,t,s):Ra(i,"add",a,t),this}function yy(a){const t=st(this),{has:i,get:r}=xh(t);let e=i.call(t,a);e?{}.NODE_ENV!=="production"&&Qb(t,i,a):(a=st(a),e=i.call(t,a));const n=r?r.call(t,a):void 0,s=t.delete(a);return e&&Ra(t,"delete",a,void 0,n),s}function Ty(){const a=st(this),t=a.size!==0,i={}.NODE_ENV!=="production"?Ou(a)?new Map(a):new Set(a):void 0,r=a.clear();return t&&Ra(a,"clear",void 0,void 0,i),r}function Zf(a,t){return function(r,e){const n=this,s=n.__v_raw,o=st(s),l=t?Bg:a?jg:Fd;return!a&&tr(o,"iterate",go),s.forEach((f,m)=>r.call(e,l(f),l(m),n))}}function ec(a,t,i){return function(...r){const e=this.__v_raw,n=st(e),s=Ou(n),o=a==="entries"||a===Symbol.iterator&&s,l=a==="keys"&&s,f=e[a](...r),m=i?Bg:t?jg:Fd;return!t&&tr(n,"iterate",l?Am:go),{next(){const{value:v,done:y}=f.next();return y?{value:v,done:y}:{value:o?[m(v[0]),m(v[1])]:m(v),done:y}},[Symbol.iterator](){return this}}}}function cs(a){return function(...t){if({}.NODE_ENV!=="production"){const i=t[0]?`on key "${t[0]}" `:"";console.warn(`${Co(a)} operation ${i}failed: target is readonly.`,st(this))}return a==="delete"?!1:this}}function yL(){const a={get(n){return Qf(this,n)},get size(){return Jf(this)},has:Yf,add:vy,set:_y,delete:yy,clear:Ty,forEach:Zf(!1,!1)},t={get(n){return Qf(this,n,!1,!0)},get size(){return Jf(this)},has:Yf,add:vy,set:_y,delete:yy,clear:Ty,forEach:Zf(!1,!0)},i={get(n){return Qf(this,n,!0)},get size(){return Jf(this,!0)},has(n){return Yf.call(this,n,!0)},add:cs("add"),set:cs("set"),delete:cs("delete"),clear:cs("clear"),forEach:Zf(!0,!1)},r={get(n){return Qf(this,n,!0,!0)},get size(){return Jf(this,!0)},has(n){return Yf.call(this,n,!0)},add:cs("add"),set:cs("set"),delete:cs("delete"),clear:cs("clear"),forEach:Zf(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(n=>{a[n]=ec(n,!1,!1),i[n]=ec(n,!0,!1),t[n]=ec(n,!1,!0),r[n]=ec(n,!0,!0)}),[a,i,t,r]}const[TL,bL,xL,SL]=yL();function Sh(a,t){const i=t?a?SL:xL:a?bL:TL;return(r,e,n)=>e==="__v_isReactive"?!a:e==="__v_isReadonly"?a:e==="__v_raw"?r:Reflect.get(gt(i,e)&&e in r?i:r,e,n)}const EL={get:Sh(!1,!1)},wL={get:Sh(!1,!0)},CL={get:Sh(!0,!1)},AL={get:Sh(!0,!0)};function Qb(a,t,i){const r=st(i);if(r!==i&&t.call(a,r)){const e=Fg(a);console.warn(`Reactive ${e} contains both the raw and reactive versions of the same object${e==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}const Yb=new WeakMap,Jb=new WeakMap,Zb=new WeakMap,ex=new WeakMap;function IL(a){switch(a){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function PL(a){return a.__v_skip||!Object.isExtensible(a)?0:IL(Fg(a))}function Eh(a){return Ts(a)?a:wh(a,!1,Kb,EL,Yb)}function OL(a){return wh(a,!1,vL,wL,Jb)}function tx(a){return wh(a,!0,Xb,CL,Zb)}function bu(a){return wh(a,!0,_L,AL,ex)}function wh(a,t,i,r,e){if(!Ut(a))return{}.NODE_ENV!=="production"&&console.warn(`value cannot be made reactive: ${String(a)}`),a;if(a.__v_raw&&!(t&&a.__v_isReactive))return a;const n=e.get(a);if(n)return n;const s=PL(a);if(s===0)return a;const o=new Proxy(a,s===2?r:i);return e.set(a,o),o}function vo(a){return Ts(a)?vo(a.__v_raw):!!(a&&a.__v_isReactive)}function Ts(a){return!!(a&&a.__v_isReadonly)}function Dc(a){return!!(a&&a.__v_isShallow)}function Pm(a){return vo(a)||Ts(a)}function st(a){const t=a&&a.__v_raw;return t?st(t):a}function ix(a){return Oc(a,"__v_skip",!0),a}const Fd=a=>Ut(a)?Eh(a):a,jg=a=>Ut(a)?tx(a):a;function rx(a){vs&&zi&&(a=st(a),{}.NODE_ENV!=="production"?Im(a.dep||(a.dep=Md()),{target:a,type:"get",key:"value"}):Im(a.dep||(a.dep=Md())))}function nx(a,t){a=st(a);const i=a.dep;i&&({}.NODE_ENV!=="production"?Tu(i,{target:a,type:"set",key:"value",newValue:t}):Tu(i))}function di(a){return!!(a&&a.__v_isRef===!0)}function DL(a){return LL(a,!1)}function LL(a,t){return di(a)?a:new kL(a,t)}class kL{constructor(t,i){this.__v_isShallow=i,this.dep=void 0,this.__v_isRef=!0,this._rawValue=i?t:st(t),this._value=i?t:Fd(t)}get value(){return rx(this),this._value}set value(t){const i=this.__v_isShallow||Dc(t)||Ts(t);t=i?t:st(t),Rd(t,this._rawValue)&&(this._rawValue=t,this._value=i?t:Fd(t),nx(this,t))}}function vu(a){return di(a)?a.value:a}const RL={get:(a,t,i)=>vu(Reflect.get(a,t,i)),set:(a,t,i,r)=>{const e=a[t];return di(e)&&!di(i)?(e.value=i,!0):Reflect.set(a,t,i,r)}};function ax(a){return vo(a)?a:new Proxy(a,RL)}var sx;class ML{constructor(t,i,r,e){this._setter=i,this.dep=void 0,this.__v_isRef=!0,this[sx]=!1,this._dirty=!0,this.effect=new Ug(t,()=>{this._dirty||(this._dirty=!0,nx(this))}),this.effect.computed=this,this.effect.active=this._cacheable=!e,this.__v_isReadonly=r}get value(){const t=st(this);return rx(t),(t._dirty||!t._cacheable)&&(t._dirty=!1,t._value=t.effect.run()),t._value}set value(t){this._setter(t)}}sx="__v_isReadonly";function FL(a,t,i=!1){let r,e;const n=tt(a);n?(r=a,e={}.NODE_ENV!=="production"?()=>{console.warn("Write operation failed: computed value is readonly")}:Ai):(r=a.get,e=a.set);const s=new ML(r,e,n||!e,i);return{}.NODE_ENV!=="production"&&t&&!i&&(s.effect.onTrack=t.onTrack,s.effect.onTrigger=t.onTrigger),s}const _o=[];function _c(a){_o.push(a)}function yc(){_o.pop()}function Pe(a,...t){if({}.NODE_ENV==="production")return;Po();const i=_o.length?_o[_o.length-1].component:null,r=i&&i.appContext.config.warnHandler,e=NL();if(r)Oa(r,i,11,[a+t.join(""),i&&i.proxy,e.map(({vnode:n})=>`at <${kh(i,n.type)}>`).join(`
`),e]);else{const n=[`[Vue warn]: ${a}`,...t];e.length&&n.push(`
`,...UL(e)),console.warn(...n)}Oo()}function NL(){let a=_o[_o.length-1];if(!a)return[];const t=[];for(;a;){const i=t[0];i&&i.vnode===a?i.recurseCount++:t.push({vnode:a,recurseCount:0});const r=a.component&&a.component.parent;a=r&&r.vnode}return t}function UL(a){const t=[];return a.forEach((i,r)=>{t.push(...r===0?[]:[`
`],...BL(i))}),t}function BL({vnode:a,recurseCount:t}){const i=t>0?`... (${t} recursive calls)`:"",r=a.component?a.component.parent==null:!1,e=` at <${kh(a.component,a.type,r)}`,n=">"+i;return a.props?[e,...jL(a.props),n]:[e+n]}function jL(a){const t=[],i=Object.keys(a);return i.slice(0,3).forEach(r=>{t.push(...ox(r,a[r]))}),i.length>3&&t.push(" ..."),t}function ox(a,t,i){return ii(t)?(t=JSON.stringify(t),i?t:[`${a}=${t}`]):typeof t=="number"||typeof t=="boolean"||t==null?i?t:[`${a}=${t}`]:di(t)?(t=ox(a,st(t.value),!0),i?t:[`${a}=Ref<`,t,">"]):tt(t)?[`${a}=fn${t.name?`<${t.name}>`:""}`]:(t=st(t),i?t:[`${a}=`,t])}const Vg={sp:"serverPrefetch hook",bc:"beforeCreate hook",c:"created hook",bm:"beforeMount hook",m:"mounted hook",bu:"beforeUpdate hook",u:"updated",bum:"beforeUnmount hook",um:"unmounted hook",a:"activated hook",da:"deactivated hook",ec:"errorCaptured hook",rtc:"renderTracked hook",rtg:"renderTriggered hook",[0]:"setup function",[1]:"render function",[2]:"watcher getter",[3]:"watcher callback",[4]:"watcher cleanup function",[5]:"native event handler",[6]:"component event handler",[7]:"vnode hook",[8]:"directive hook",[9]:"transition hook",[10]:"app errorHandler",[11]:"app warnHandler",[12]:"ref function",[13]:"async component loader",[14]:"scheduler flush. This is likely a Vue internals bug. Please open an issue at https://new-issue.vuejs.org/?repo=vuejs/core"};function Oa(a,t,i,r){let e;try{e=r?a(...r):a()}catch(n){Ch(n,t,i)}return e}function Cn(a,t,i,r){if(tt(a)){const n=Oa(a,t,i,r);return n&&Mg(n)&&n.catch(s=>{Ch(s,t,i)}),n}const e=[];for(let n=0;n<a.length;n++)e.push(Cn(a[n],t,i,r));return e}function Ch(a,t,i,r=!0){const e=t?t.vnode:null;if(t){let n=t.parent;const s=t.proxy,o={}.NODE_ENV!=="production"?Vg[i]:i;for(;n;){const f=n.ec;if(f){for(let m=0;m<f.length;m++)if(f[m](a,s,o)===!1)return}n=n.parent}const l=t.appContext.config.errorHandler;if(l){Oa(l,null,10,[a,s,o]);return}}VL(a,i,e,r)}function VL(a,t,i,r=!0){if({}.NODE_ENV!=="production"){const e=Vg[t];if(i&&_c(i),Pe(`Unhandled error${e?` during execution of ${e}`:""}`),i&&yc(),r)throw a;console.error(a)}else console.error(a)}let Nd=!1,Om=!1;const Mi=[];let Kn=0;const Du=[];let qn=null,ps=0;const ux=Promise.resolve();let Hg=null;const HL=100;function Nu(a){const t=Hg||ux;return a?t.then(this?a.bind(this):a):t}function $L(a){let t=Kn+1,i=Mi.length;for(;t<i;){const r=t+i>>>1;Ud(Mi[r])<a?t=r+1:i=r}return t}function Ah(a){(!Mi.length||!Mi.includes(a,Nd&&a.allowRecurse?Kn+1:Kn))&&(a.id==null?Mi.push(a):Mi.splice($L(a.id),0,a),lx())}function lx(){!Nd&&!Om&&(Om=!0,Hg=ux.then(cx))}function WL(a){const t=Mi.indexOf(a);t>Kn&&Mi.splice(t,1)}function dx(a){Je(a)?Du.push(...a):(!qn||!qn.includes(a,a.allowRecurse?ps+1:ps))&&Du.push(a),lx()}function by(a,t=Nd?Kn+1:0){for({}.NODE_ENV!=="production"&&(a=a||new Map);t<Mi.length;t++){const i=Mi[t];if(i&&i.pre){if({}.NODE_ENV!=="production"&&$g(a,i))continue;Mi.splice(t,1),t--,i()}}}function fx(a){if(Du.length){const t=[...new Set(Du)];if(Du.length=0,qn){qn.push(...t);return}for(qn=t,{}.NODE_ENV!=="production"&&(a=a||new Map),qn.sort((i,r)=>Ud(i)-Ud(r)),ps=0;ps<qn.length;ps++)({}).NODE_ENV!=="production"&&$g(a,qn[ps])||qn[ps]();qn=null,ps=0}}const Ud=a=>a.id==null?1/0:a.id,qL=(a,t)=>{const i=Ud(a)-Ud(t);if(i===0){if(a.pre&&!t.pre)return-1;if(t.pre&&!a.pre)return 1}return i};function cx(a){Om=!1,Nd=!0,{}.NODE_ENV!=="production"&&(a=a||new Map),Mi.sort(qL);const t={}.NODE_ENV!=="production"?i=>$g(a,i):Ai;try{for(Kn=0;Kn<Mi.length;Kn++){const i=Mi[Kn];if(i&&i.active!==!1){if({}.NODE_ENV!=="production"&&t(i))continue;Oa(i,null,14)}}}finally{Kn=0,Mi.length=0,fx(a),Nd=!1,Hg=null,(Mi.length||Du.length)&&cx(a)}}function $g(a,t){if(!a.has(t))a.set(t,1);else{const i=a.get(t);if(i>HL){const r=t.ownerInstance,e=r&&ev(r.type);return Pe(`Maximum recursive updates exceeded${e?` in component <${e}>`:""}. This means you have a reactive effect that is mutating its own dependencies and thus recursively triggering itself. Possible sources include component template, render function, updated hook or watcher source function.`),!0}else a.set(t,i+1)}}let yo=!1;const _u=new Set;({}).NODE_ENV!=="production"&&(Hb().__VUE_HMR_RUNTIME__={createRecord:zp(hx),rerender:zp(KL),reload:zp(XL)});const Ao=new Map;function GL(a){const t=a.type.__hmrId;let i=Ao.get(t);i||(hx(t,a.type),i=Ao.get(t)),i.instances.add(a)}function zL(a){Ao.get(a.type.__hmrId).instances.delete(a)}function hx(a,t){return Ao.has(a)?!1:(Ao.set(a,{initialDef:Sd(t),instances:new Set}),!0)}function Sd(a){return Vx(a)?a.__vccOpts:a}function KL(a,t){const i=Ao.get(a);i&&(i.initialDef.render=t,[...i.instances].forEach(r=>{t&&(r.render=t,Sd(r.type).render=t),r.renderCache=[],yo=!0,r.update(),yo=!1}))}function XL(a,t){const i=Ao.get(a);if(!i)return;t=Sd(t),xy(i.initialDef,t);const r=[...i.instances];for(const e of r){const n=Sd(e.type);_u.has(n)||(n!==i.initialDef&&xy(n,t),_u.add(n)),e.appContext.optionsCache.delete(e.type),e.ceReload?(_u.add(n),e.ceReload(t.styles),_u.delete(n)):e.parent?Ah(e.parent.update):e.appContext.reload?e.appContext.reload():typeof window<"u"?window.location.reload():console.warn("[HMR] Root or manually mounted instance modified. Full reload required.")}dx(()=>{for(const e of r)_u.delete(Sd(e.type))})}function xy(a,t){ti(a,t);for(const i in a)i!=="__file"&&!(i in t)&&delete a[i]}function zp(a){return(t,i)=>{try{return a(t,i)}catch(r){console.error(r),console.warn("[HMR] Something went wrong during Vue component hot-reload. Full reload required.")}}}let Xn,gd=[],Dm=!1;function ef(a,...t){Xn?Xn.emit(a,...t):Dm||gd.push({event:a,args:t})}function px(a,t){var i,r;Xn=a,Xn?(Xn.enabled=!0,gd.forEach(({event:e,args:n})=>Xn.emit(e,...n)),gd=[]):typeof window<"u"&&window.HTMLElement&&!(!((r=(i=window.navigator)===null||i===void 0?void 0:i.userAgent)===null||r===void 0)&&r.includes("jsdom"))?((t.__VUE_DEVTOOLS_HOOK_REPLAY__=t.__VUE_DEVTOOLS_HOOK_REPLAY__||[]).push(n=>{px(n,t)}),setTimeout(()=>{Xn||(t.__VUE_DEVTOOLS_HOOK_REPLAY__=null,Dm=!0,gd=[])},3e3)):(Dm=!0,gd=[])}function QL(a,t){ef("app:init",a,t,{Fragment:bn,Text:rf,Comment:Nr,Static:wd})}function YL(a){ef("app:unmount",a)}const JL=Wg("component:added"),mx=Wg("component:updated"),ZL=Wg("component:removed"),ek=a=>{Xn&&typeof Xn.cleanupBuffer=="function"&&!Xn.cleanupBuffer(a)&&ZL(a)};function Wg(a){return t=>{ef(a,t.appContext.app,t.uid,t.parent?t.parent.uid:void 0,t)}}const tk=gx("perf:start"),ik=gx("perf:end");function gx(a){return(t,i,r)=>{ef(a,t.appContext.app,t.uid,t,i,r)}}function rk(a,t,i){ef("component:emit",a.appContext.app,a,t,i)}function nk(a,t,...i){if(a.isUnmounted)return;const r=a.vnode.props||kt;if({}.NODE_ENV!=="production"){const{emitsOptions:m,propsOptions:[v]}=a;if(m)if(!(t in m))(!v||!(ao(t)in v))&&Pe(`Component emitted event "${t}" but it is neither declared in the emits option nor as an "${ao(t)}" prop.`);else{const y=m[t];tt(y)&&(y(...i)||Pe(`Invalid event arguments: event validation failed for event "${t}".`))}}let e=i;const n=t.startsWith("update:"),s=n&&t.slice(7);if(s&&s in r){const m=`${s==="modelValue"?"model":s}Modifiers`,{number:v,trim:y}=r[m]||kt;y&&(e=i.map(E=>ii(E)?E.trim():E)),v&&(e=i.map(ZD))}if({}.NODE_ENV!=="production"&&rk(a,t,e),{}.NODE_ENV!=="production"){const m=t.toLowerCase();m!==t&&r[ao(m)]&&Pe(`Event "${m}" is emitted in component ${kh(a,a.type)} but the handler is registered for "${t}". Note that HTML attributes are case-insensitive and you cannot use v-on to listen to camelCase events when using in-DOM templates. You should probably use "${Rr(t)}" instead of "${t}".`)}let o,l=r[o=ao(t)]||r[o=ao(Fr(t))];!l&&n&&(l=r[o=ao(Rr(t))]),l&&Cn(l,a,6,e);const f=r[o+"Once"];if(f){if(!a.emitted)a.emitted={};else if(a.emitted[o])return;a.emitted[o]=!0,Cn(f,a,6,e)}}function vx(a,t,i=!1){const r=t.emitsCache,e=r.get(a);if(e!==void 0)return e;const n=a.emits;let s={},o=!1;if(!tt(a)){const l=f=>{const m=vx(f,t,!0);m&&(o=!0,ti(s,m))};!i&&t.mixins.length&&t.mixins.forEach(l),a.extends&&l(a.extends),a.mixins&&a.mixins.forEach(l)}return!n&&!o?(Ut(a)&&r.set(a,null),null):(Je(n)?n.forEach(l=>s[l]=null):ti(s,n),Ut(a)&&r.set(a,s),s)}function Ih(a,t){return!a||!Zd(t)?!1:(t=t.slice(2).replace(/Once$/,""),gt(a,t[0].toLowerCase()+t.slice(1))||gt(a,Rr(t))||gt(a,t))}let Zi=null,_x=null;function Lc(a){const t=Zi;return Zi=a,_x=a&&a.type.__scopeId||null,t}function ak(a,t=Zi,i){if(!t||a._n)return a;const r=(...e)=>{r._d&&ky(-1);const n=Lc(t);let s;try{s=a(...e)}finally{Lc(n),r._d&&ky(1)}return{}.NODE_ENV!=="production"&&mx(t),s};return r._n=!0,r._c=!0,r._d=!0,r}let Lm=!1;function kc(){Lm=!0}function Kp(a){const{type:t,vnode:i,proxy:r,withProxy:e,props:n,propsOptions:[s],slots:o,attrs:l,emit:f,render:m,renderCache:v,data:y,setupState:E,ctx:I,inheritAttrs:O}=a;let D,R;const H=Lc(a);({}).NODE_ENV!=="production"&&(Lm=!1);try{if(i.shapeFlag&4){const W=e||r;D=xn(m.call(W,W,v,n,E,y,I)),R=l}else{const W=t;({}).NODE_ENV!=="production"&&l===n&&kc(),D=xn(W.length>1?W(n,{}.NODE_ENV!=="production"?{get attrs(){return kc(),l},slots:o,emit:f}:{attrs:l,slots:o,emit:f}):W(n,null)),R=t.props?l:ok(l)}}catch(W){Cd.length=0,Ch(W,a,1),D=ia(Nr)}let Z=D,V;if({}.NODE_ENV!=="production"&&D.patchFlag>0&&D.patchFlag&2048&&([Z,V]=sk(D)),R&&O!==!1){const W=Object.keys(R),{shapeFlag:te}=Z;if(W.length){if(te&7)s&&W.some(Pc)&&(R=uk(R,s)),Z=bs(Z,R);else if({}.NODE_ENV!=="production"&&!Lm&&Z.type!==Nr){const z=Object.keys(l),q=[],X=[];for(let j=0,oe=z.length;j<oe;j++){const re=z[j];Zd(re)?Pc(re)||q.push(re[2].toLowerCase()+re.slice(3)):X.push(re)}X.length&&Pe(`Extraneous non-props attributes (${X.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes.`),q.length&&Pe(`Extraneous non-emits event listeners (${q.join(", ")}) were passed to component but could not be automatically inherited because component renders fragment or text root nodes. If the listener is intended to be a component custom event listener only, declare it using the "emits" option.`)}}}return i.dirs&&({}.NODE_ENV!=="production"&&!Sy(Z)&&Pe("Runtime directive used on component with non-element root node. The directives will not function as intended."),Z=bs(Z),Z.dirs=Z.dirs?Z.dirs.concat(i.dirs):i.dirs),i.transition&&({}.NODE_ENV!=="production"&&!Sy(Z)&&Pe("Component inside <Transition> renders non-element root node that cannot be animated."),Z.transition=i.transition),{}.NODE_ENV!=="production"&&V?V(Z):D=Z,Lc(H),D}const sk=a=>{const t=a.children,i=a.dynamicChildren,r=yx(t);if(!r)return[a,void 0];const e=t.indexOf(r),n=i?i.indexOf(r):-1,s=o=>{t[e]=o,i&&(n>-1?i[n]=o:o.patchFlag>0&&(a.dynamicChildren=[...i,o]))};return[xn(r),s]};function yx(a){let t;for(let i=0;i<a.length;i++){const r=a[i];if(Jg(r)){if(r.type!==Nr||r.children==="v-if"){if(t)return;t=r}}else return}return t}const ok=a=>{let t;for(const i in a)(i==="class"||i==="style"||Zd(i))&&((t||(t={}))[i]=a[i]);return t},uk=(a,t)=>{const i={};for(const r in a)(!Pc(r)||!(r.slice(9)in t))&&(i[r]=a[r]);return i},Sy=a=>a.shapeFlag&7||a.type===Nr;function lk(a,t,i){const{props:r,children:e,component:n}=a,{props:s,children:o,patchFlag:l}=t,f=n.emitsOptions;if({}.NODE_ENV!=="production"&&(e||o)&&yo||t.dirs||t.transition)return!0;if(i&&l>=0){if(l&1024)return!0;if(l&16)return r?Ey(r,s,f):!!s;if(l&8){const m=t.dynamicProps;for(let v=0;v<m.length;v++){const y=m[v];if(s[y]!==r[y]&&!Ih(f,y))return!0}}}else return(e||o)&&(!o||!o.$stable)?!0:r===s?!1:r?s?Ey(r,s,f):!0:!!s;return!1}function Ey(a,t,i){const r=Object.keys(t);if(r.length!==Object.keys(a).length)return!0;for(let e=0;e<r.length;e++){const n=r[e];if(t[n]!==a[n]&&!Ih(i,n))return!0}return!1}function dk({vnode:a,parent:t},i){for(;t&&t.subTree===a;)(a=t.vnode).el=i,t=t.parent}const fk=a=>a.__isSuspense;function ck(a,t){t&&t.pendingBranch?Je(a)?t.effects.push(...a):t.effects.push(a):dx(a)}function hk(a,t){if(!qt)({}).NODE_ENV!=="production"&&Pe("provide() can only be used inside setup().");else{let i=qt.provides;const r=qt.parent&&qt.parent.provides;r===i&&(i=qt.provides=Object.create(r)),i[a]=t}}function Tc(a,t,i=!1){const r=qt||Zi;if(r){const e=r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides;if(e&&a in e)return e[a];if(arguments.length>1)return i&&tt(t)?t.call(r.proxy):t;({}).NODE_ENV!=="production"&&Pe(`injection "${String(a)}" not found.`)}else({}).NODE_ENV!=="production"&&Pe("inject() can only be used inside setup() or functional components.")}function pk(a,t){return qg(a,null,{}.NODE_ENV!=="production"?Object.assign(Object.assign({},t),{flush:"post"}):{flush:"post"})}const tc={};function Ed(a,t,i){return{}.NODE_ENV!=="production"&&!tt(t)&&Pe("`watch(fn, options?)` signature has been moved to a separate API. Use `watchEffect(fn, options?)` instead. `watch` now only supports `watch(source, cb, options?) signature."),qg(a,t,i)}function qg(a,t,{immediate:i,deep:r,flush:e,onTrack:n,onTrigger:s}=kt){({}).NODE_ENV!=="production"&&!t&&(i!==void 0&&Pe('watch() "immediate" option is only respected when using the watch(source, callback, options?) signature.'),r!==void 0&&Pe('watch() "deep" option is only respected when using the watch(source, callback, options?) signature.'));const o=V=>{Pe("Invalid watch source: ",V,"A watch source can only be a getter/effect function, a ref, a reactive object, or an array of these types.")},l=iL()===(qt==null?void 0:qt.scope)?qt:null;let f,m=!1,v=!1;if(di(a)?(f=()=>a.value,m=Dc(a)):vo(a)?(f=()=>a,r=!0):Je(a)?(v=!0,m=a.some(V=>vo(V)||Dc(V)),f=()=>a.map(V=>{if(di(V))return V.value;if(vo(V))return fo(V);if(tt(V))return Oa(V,l,2);({}).NODE_ENV!=="production"&&o(V)})):tt(a)?t?f=()=>Oa(a,l,2):f=()=>{if(!(l&&l.isUnmounted))return y&&y(),Cn(a,l,3,[E])}:(f=Ai,{}.NODE_ENV!=="production"&&o(a)),t&&r){const V=f;f=()=>fo(V())}let y,E=V=>{y=H.onStop=()=>{Oa(V,l,4)}},I;if(Vd)if(E=Ai,t?i&&Cn(t,l,3,[f(),v?[]:void 0,E]):f(),e==="sync"){const V=bR();I=V.__watcherHandles||(V.__watcherHandles=[])}else return Ai;let O=v?new Array(a.length).fill(tc):tc;const D=()=>{if(H.active)if(t){const V=H.run();(r||m||(v?V.some((W,te)=>Rd(W,O[te])):Rd(V,O)))&&(y&&y(),Cn(t,l,3,[V,O===tc?void 0:v&&O[0]===tc?[]:O,E]),O=V)}else H.run()};D.allowRecurse=!!t;let R;e==="sync"?R=D:e==="post"?R=()=>dr(D,l&&l.suspense):(D.pre=!0,l&&(D.id=l.uid),R=()=>Ah(D));const H=new Ug(f,R);({}).NODE_ENV!=="production"&&(H.onTrack=n,H.onTrigger=s),t?i?D():O=H.run():e==="post"?dr(H.run.bind(H),l&&l.suspense):H.run();const Z=()=>{H.stop(),l&&l.scope&&kg(l.scope.effects,H)};return I&&I.push(Z),Z}function mk(a,t,i){const r=this.proxy,e=ii(a)?a.includes(".")?Tx(r,a):()=>r[a]:a.bind(r,r);let n;tt(t)?n=t:(n=t.handler,i=t);const s=qt;Uu(this);const o=qg(e,n.bind(r),i);return s?Uu(s):bo(),o}function Tx(a,t){const i=t.split(".");return()=>{let r=a;for(let e=0;e<i.length&&r;e++)r=r[i[e]];return r}}function fo(a,t){if(!Ut(a)||a.__v_skip||(t=t||new Set,t.has(a)))return a;if(t.add(a),di(a))fo(a.value,t);else if(Je(a))for(let i=0;i<a.length;i++)fo(a[i],t);else if(zD(a)||Ou(a))a.forEach(i=>{fo(i,t)});else if(XD(a))for(const i in a)fo(a[i],t);return a}function tf(a){return tt(a)?{setup:a,name:a.name}:a}const bc=a=>!!a.type.__asyncLoader,Gg=a=>a.type.__isKeepAlive;function gk(a,t){bx(a,"a",t)}function vk(a,t){bx(a,"da",t)}function bx(a,t,i=qt){const r=a.__wdc||(a.__wdc=()=>{let e=i;for(;e;){if(e.isDeactivated)return;e=e.parent}return a()});if(Ph(t,r,i),i){let e=i.parent;for(;e&&e.parent;)Gg(e.parent.vnode)&&_k(r,t,i,e),e=e.parent}}function _k(a,t,i,r){const e=Ph(t,a,r,!0);zg(()=>{kg(r[t],e)},i)}function Ph(a,t,i=qt,r=!1){if(i){const e=i[a]||(i[a]=[]),n=t.__weh||(t.__weh=(...s)=>{if(i.isUnmounted)return;Po(),Uu(i);const o=Cn(t,i,a,s);return bo(),Oo(),o});return r?e.unshift(n):e.push(n),n}else if({}.NODE_ENV!=="production"){const e=ao(Vg[a].replace(/ hook$/,""));Pe(`${e} is called when there is no active component instance to be associated with. Lifecycle injection APIs can only be used during execution of setup(). If you are using async setup(), make sure to register lifecycle hooks before the first await statement.`)}}const Va=a=>(t,i=qt)=>(!Vd||a==="sp")&&Ph(a,(...r)=>t(...r),i),yk=Va("bm"),xx=Va("m"),Tk=Va("bu"),bk=Va("u"),xk=Va("bum"),zg=Va("um"),Sk=Va("sp"),Ek=Va("rtg"),wk=Va("rtc");function Ck(a,t=qt){Ph("ec",a,t)}function Sx(a){QD(a)&&Pe("Do not use built-in directive ids as custom directive id: "+a)}function Ak(a,t){const i=Zi;if(i===null)return{}.NODE_ENV!=="production"&&Pe("withDirectives can only be used inside render functions."),a;const r=Lh(i)||i.proxy,e=a.dirs||(a.dirs=[]);for(let n=0;n<t.length;n++){let[s,o,l,f=kt]=t[n];s&&(tt(s)&&(s={mounted:s,updated:s}),s.deep&&fo(o),e.push({dir:s,instance:r,value:o,oldValue:void 0,arg:l,modifiers:f}))}return a}function io(a,t,i,r){const e=a.dirs,n=t&&t.dirs;for(let s=0;s<e.length;s++){const o=e[s];n&&(o.oldValue=n[s].value);let l=o.dir[r];l&&(Po(),Cn(l,i,8,[a.el,o,a,t]),Oo())}}const km="components",Ex=Symbol();function Ik(a){return ii(a)?Pk(km,a,!1)||a:a||Ex}function Pk(a,t,i=!0,r=!1){const e=Zi||qt;if(e){const n=e.type;if(a===km){const o=ev(n,!1);if(o&&(o===t||o===Fr(t)||o===Co(Fr(t))))return n}const s=wy(e[a]||n[a],t)||wy(e.appContext[a],t);if(!s&&r)return n;if({}.NODE_ENV!=="production"&&i&&!s){const o=a===km?`
If this is a native custom element, make sure to exclude it from component resolution via compilerOptions.isCustomElement.`:"";Pe(`Failed to resolve ${a.slice(0,-1)}: ${t}${o}`)}return s}else({}).NODE_ENV!=="production"&&Pe(`resolve${Co(a.slice(0,-1))} can only be used in render() or setup().`)}function wy(a,t){return a&&(a[t]||a[Fr(t)]||a[Co(Fr(t))])}const Rm=a=>a?Bx(a)?Lh(a)||a.proxy:Rm(a.parent):null,To=ti(Object.create(null),{$:a=>a,$el:a=>a.vnode.el,$data:a=>a.data,$props:a=>({}).NODE_ENV!=="production"?bu(a.props):a.props,$attrs:a=>({}).NODE_ENV!=="production"?bu(a.attrs):a.attrs,$slots:a=>({}).NODE_ENV!=="production"?bu(a.slots):a.slots,$refs:a=>({}).NODE_ENV!=="production"?bu(a.refs):a.refs,$parent:a=>Rm(a.parent),$root:a=>Rm(a.root),$emit:a=>a.emit,$options:a=>Xg(a),$forceUpdate:a=>a.f||(a.f=()=>Ah(a.update)),$nextTick:a=>a.n||(a.n=Nu.bind(a.proxy)),$watch:a=>mk.bind(a)}),Kg=a=>a==="_"||a==="$",Xp=(a,t)=>a!==kt&&!a.__isScriptSetup&&gt(a,t),wx={get({_:a},t){const{ctx:i,setupState:r,data:e,props:n,accessCache:s,type:o,appContext:l}=a;if({}.NODE_ENV!=="production"&&t==="__isVue")return!0;let f;if(t[0]!=="$"){const E=s[t];if(E!==void 0)switch(E){case 1:return r[t];case 2:return e[t];case 4:return i[t];case 3:return n[t]}else{if(Xp(r,t))return s[t]=1,r[t];if(e!==kt&&gt(e,t))return s[t]=2,e[t];if((f=a.propsOptions[0])&&gt(f,t))return s[t]=3,n[t];if(i!==kt&&gt(i,t))return s[t]=4,i[t];Mm&&(s[t]=0)}}const m=To[t];let v,y;if(m)return t==="$attrs"&&(tr(a,"get",t),{}.NODE_ENV!=="production"&&kc()),m(a);if((v=o.__cssModules)&&(v=v[t]))return v;if(i!==kt&&gt(i,t))return s[t]=4,i[t];if(y=l.config.globalProperties,gt(y,t))return y[t];({}).NODE_ENV!=="production"&&Zi&&(!ii(t)||t.indexOf("__v")!==0)&&(e!==kt&&Kg(t[0])&&gt(e,t)?Pe(`Property ${JSON.stringify(t)} must be accessed via $data because it starts with a reserved character ("$" or "_") and is not proxied on the render context.`):a===Zi&&Pe(`Property ${JSON.stringify(t)} was accessed during render but is not defined on instance.`))},set({_:a},t,i){const{data:r,setupState:e,ctx:n}=a;return Xp(e,t)?(e[t]=i,!0):{}.NODE_ENV!=="production"&&e.__isScriptSetup&&gt(e,t)?(Pe(`Cannot mutate <script setup> binding "${t}" from Options API.`),!1):r!==kt&&gt(r,t)?(r[t]=i,!0):gt(a.props,t)?({}.NODE_ENV!=="production"&&Pe(`Attempting to mutate prop "${t}". Props are readonly.`),!1):t[0]==="$"&&t.slice(1)in a?({}.NODE_ENV!=="production"&&Pe(`Attempting to mutate public property "${t}". Properties starting with $ are reserved and readonly.`),!1):({}.NODE_ENV!=="production"&&t in a.appContext.config.globalProperties?Object.defineProperty(n,t,{enumerable:!0,configurable:!0,value:i}):n[t]=i,!0)},has({_:{data:a,setupState:t,accessCache:i,ctx:r,appContext:e,propsOptions:n}},s){let o;return!!i[s]||a!==kt&&gt(a,s)||Xp(t,s)||(o=n[0])&&gt(o,s)||gt(r,s)||gt(To,s)||gt(e.config.globalProperties,s)},defineProperty(a,t,i){return i.get!=null?a._.accessCache[t]=0:gt(i,"value")&&this.set(a,t,i.value,null),Reflect.defineProperty(a,t,i)}};({}).NODE_ENV!=="production"&&(wx.ownKeys=a=>(Pe("Avoid app logic that relies on enumerating keys on a component instance. The keys will be empty in production mode to avoid performance overhead."),Reflect.ownKeys(a)));function Ok(a){const t={};return Object.defineProperty(t,"_",{configurable:!0,enumerable:!1,get:()=>a}),Object.keys(To).forEach(i=>{Object.defineProperty(t,i,{configurable:!0,enumerable:!1,get:()=>To[i](a),set:Ai})}),t}function Dk(a){const{ctx:t,propsOptions:[i]}=a;i&&Object.keys(i).forEach(r=>{Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>a.props[r],set:Ai})})}function Lk(a){const{ctx:t,setupState:i}=a;Object.keys(st(i)).forEach(r=>{if(!i.__isScriptSetup){if(Kg(r[0])){Pe(`setup() return property ${JSON.stringify(r)} should not start with "$" or "_" which are reserved prefixes for Vue internals.`);return}Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i[r],set:Ai})}})}function kk(){const a=Object.create(null);return(t,i)=>{a[i]?Pe(`${t} property "${i}" is already defined in ${a[i]}.`):a[i]=t}}let Mm=!0;function Rk(a){const t=Xg(a),i=a.proxy,r=a.ctx;Mm=!1,t.beforeCreate&&Cy(t.beforeCreate,a,"bc");const{data:e,computed:n,methods:s,watch:o,provide:l,inject:f,created:m,beforeMount:v,mounted:y,beforeUpdate:E,updated:I,activated:O,deactivated:D,beforeDestroy:R,beforeUnmount:H,destroyed:Z,unmounted:V,render:W,renderTracked:te,renderTriggered:z,errorCaptured:q,serverPrefetch:X,expose:j,inheritAttrs:oe,components:re,directives:se,filters:he}=t,le={}.NODE_ENV!=="production"?kk():null;if({}.NODE_ENV!=="production"){const[ne]=a.propsOptions;if(ne)for(const fe in ne)le("Props",fe)}if(f&&Mk(f,r,le,a.appContext.config.unwrapInjectedRef),s)for(const ne in s){const fe=s[ne];tt(fe)?({}.NODE_ENV!=="production"?Object.defineProperty(r,ne,{value:fe.bind(i),configurable:!0,enumerable:!0,writable:!0}):r[ne]=fe.bind(i),{}.NODE_ENV!=="production"&&le("Methods",ne)):{}.NODE_ENV!=="production"&&Pe(`Method "${ne}" has type "${typeof fe}" in the component definition. Did you reference the function correctly?`)}if(e){({}).NODE_ENV!=="production"&&!tt(e)&&Pe("The data option must be a function. Plain object usage is no longer supported.");const ne=e.call(i,i);if({}.NODE_ENV!=="production"&&Mg(ne)&&Pe("data() returned a Promise - note data() cannot be async; If you intend to perform data fetching before component renders, use async setup() + <Suspense>."),!Ut(ne))({}).NODE_ENV!=="production"&&Pe("data() should return an object.");else if(a.data=Eh(ne),{}.NODE_ENV!=="production")for(const fe in ne)le("Data",fe),Kg(fe[0])||Object.defineProperty(r,fe,{configurable:!0,enumerable:!0,get:()=>ne[fe],set:Ai})}if(Mm=!0,n)for(const ne in n){const fe=n[ne],Ie=tt(fe)?fe.bind(i,i):tt(fe.get)?fe.get.bind(i,i):Ai;({}).NODE_ENV!=="production"&&Ie===Ai&&Pe(`Computed property "${ne}" has no getter.`);const Ce=!tt(fe)&&tt(fe.set)?fe.set.bind(i):{}.NODE_ENV!=="production"?()=>{Pe(`Write operation failed: computed property "${ne}" is readonly.`)}:Ai,Xe=Ec({get:Ie,set:Ce});Object.defineProperty(r,ne,{enumerable:!0,configurable:!0,get:()=>Xe.value,set:Be=>Xe.value=Be}),{}.NODE_ENV!=="production"&&le("Computed",ne)}if(o)for(const ne in o)Cx(o[ne],r,i,ne);if(l){const ne=tt(l)?l.call(i):l;Reflect.ownKeys(ne).forEach(fe=>{hk(fe,ne[fe])})}m&&Cy(m,a,"c");function pe(ne,fe){Je(fe)?fe.forEach(Ie=>ne(Ie.bind(i))):fe&&ne(fe.bind(i))}if(pe(yk,v),pe(xx,y),pe(Tk,E),pe(bk,I),pe(gk,O),pe(vk,D),pe(Ck,q),pe(wk,te),pe(Ek,z),pe(xk,H),pe(zg,V),pe(Sk,X),Je(j))if(j.length){const ne=a.exposed||(a.exposed={});j.forEach(fe=>{Object.defineProperty(ne,fe,{get:()=>i[fe],set:Ie=>i[fe]=Ie})})}else a.exposed||(a.exposed={});W&&a.render===Ai&&(a.render=W),oe!=null&&(a.inheritAttrs=oe),re&&(a.components=re),se&&(a.directives=se)}function Mk(a,t,i=Ai,r=!1){Je(a)&&(a=Fm(a));for(const e in a){const n=a[e];let s;Ut(n)?"default"in n?s=Tc(n.from||e,n.default,!0):s=Tc(n.from||e):s=Tc(n),di(s)?r?Object.defineProperty(t,e,{enumerable:!0,configurable:!0,get:()=>s.value,set:o=>s.value=o}):({}.NODE_ENV!=="production"&&Pe(`injected property "${e}" is a ref and will be auto-unwrapped and no longer needs \`.value\` in the next minor release. To opt-in to the new behavior now, set \`app.config.unwrapInjectedRef = true\` (this config is temporary and will not be needed in the future.)`),t[e]=s):t[e]=s,{}.NODE_ENV!=="production"&&i("Inject",e)}}function Cy(a,t,i){Cn(Je(a)?a.map(r=>r.bind(t.proxy)):a.bind(t.proxy),t,i)}function Cx(a,t,i,r){const e=r.includes(".")?Tx(i,r):()=>i[r];if(ii(a)){const n=t[a];tt(n)?Ed(e,n):{}.NODE_ENV!=="production"&&Pe(`Invalid watch handler specified by key "${a}"`,n)}else if(tt(a))Ed(e,a.bind(i));else if(Ut(a))if(Je(a))a.forEach(n=>Cx(n,t,i,r));else{const n=tt(a.handler)?a.handler.bind(i):t[a.handler];tt(n)?Ed(e,n,a):{}.NODE_ENV!=="production"&&Pe(`Invalid watch handler specified by key "${a.handler}"`,n)}else({}).NODE_ENV!=="production"&&Pe(`Invalid watch option: "${r}"`,a)}function Xg(a){const t=a.type,{mixins:i,extends:r}=t,{mixins:e,optionsCache:n,config:{optionMergeStrategies:s}}=a.appContext,o=n.get(t);let l;return o?l=o:!e.length&&!i&&!r?l=t:(l={},e.length&&e.forEach(f=>Rc(l,f,s,!0)),Rc(l,t,s)),Ut(t)&&n.set(t,l),l}function Rc(a,t,i,r=!1){const{mixins:e,extends:n}=t;n&&Rc(a,n,i,!0),e&&e.forEach(s=>Rc(a,s,i,!0));for(const s in t)if(r&&s==="expose")({}).NODE_ENV!=="production"&&Pe('"expose" option is ignored when declared in mixins or extends. It should only be declared in the base component itself.');else{const o=Fk[s]||i&&i[s];a[s]=o?o(a[s],t[s]):t[s]}return a}const Fk={data:Ay,props:so,emits:so,methods:so,computed:so,beforeCreate:Gi,created:Gi,beforeMount:Gi,mounted:Gi,beforeUpdate:Gi,updated:Gi,beforeDestroy:Gi,beforeUnmount:Gi,destroyed:Gi,unmounted:Gi,activated:Gi,deactivated:Gi,errorCaptured:Gi,serverPrefetch:Gi,components:so,directives:so,watch:Uk,provide:Ay,inject:Nk};function Ay(a,t){return t?a?function(){return ti(tt(a)?a.call(this,this):a,tt(t)?t.call(this,this):t)}:t:a}function Nk(a,t){return so(Fm(a),Fm(t))}function Fm(a){if(Je(a)){const t={};for(let i=0;i<a.length;i++)t[a[i]]=a[i];return t}return a}function Gi(a,t){return a?[...new Set([].concat(a,t))]:t}function so(a,t){return a?ti(ti(Object.create(null),a),t):t}function Uk(a,t){if(!a)return t;if(!t)return a;const i=ti(Object.create(null),a);for(const r in t)i[r]=Gi(a[r],t[r]);return i}function Bk(a,t,i,r=!1){const e={},n={};Oc(n,Oh,1),a.propsDefaults=Object.create(null),Ax(a,t,e,n);for(const s in a.propsOptions[0])s in e||(e[s]=void 0);({}).NODE_ENV!=="production"&&Px(t||{},e,a),i?a.props=r?e:OL(e):a.type.props?a.props=e:a.props=n,a.attrs=n}function jk(a){for(;a;){if(a.type.__hmrId)return!0;a=a.parent}}function Vk(a,t,i,r){const{props:e,attrs:n,vnode:{patchFlag:s}}=a,o=st(e),[l]=a.propsOptions;let f=!1;if(!({}.NODE_ENV!=="production"&&jk(a))&&(r||s>0)&&!(s&16)){if(s&8){const m=a.vnode.dynamicProps;for(let v=0;v<m.length;v++){let y=m[v];if(Ih(a.emitsOptions,y))continue;const E=t[y];if(l)if(gt(n,y))E!==n[y]&&(n[y]=E,f=!0);else{const I=Fr(y);e[I]=Nm(l,o,I,E,a,!1)}else E!==n[y]&&(n[y]=E,f=!0)}}}else{Ax(a,t,e,n)&&(f=!0);let m;for(const v in o)(!t||!gt(t,v)&&((m=Rr(v))===v||!gt(t,m)))&&(l?i&&(i[v]!==void 0||i[m]!==void 0)&&(e[v]=Nm(l,o,v,void 0,a,!0)):delete e[v]);if(n!==o)for(const v in n)(!t||!gt(t,v))&&(delete n[v],f=!0)}f&&Ra(a,"set","$attrs"),{}.NODE_ENV!=="production"&&Px(t||{},e,a)}function Ax(a,t,i,r){const[e,n]=a.propsOptions;let s=!1,o;if(t)for(let l in t){if(vc(l))continue;const f=t[l];let m;e&&gt(e,m=Fr(l))?!n||!n.includes(m)?i[m]=f:(o||(o={}))[m]=f:Ih(a.emitsOptions,l)||(!(l in r)||f!==r[l])&&(r[l]=f,s=!0)}if(n){const l=st(i),f=o||kt;for(let m=0;m<n.length;m++){const v=n[m];i[v]=Nm(e,l,v,f[v],a,!gt(f,v))}}return s}function Nm(a,t,i,r,e,n){const s=a[i];if(s!=null){const o=gt(s,"default");if(o&&r===void 0){const l=s.default;if(s.type!==Function&&tt(l)){const{propsDefaults:f}=e;i in f?r=f[i]:(Uu(e),r=f[i]=l.call(null,t),bo())}else r=l}s[0]&&(n&&!o?r=!1:s[1]&&(r===""||r===Rr(i))&&(r=!0))}return r}function Ix(a,t,i=!1){const r=t.propsCache,e=r.get(a);if(e)return e;const n=a.props,s={},o=[];let l=!1;if(!tt(a)){const m=v=>{l=!0;const[y,E]=Ix(v,t,!0);ti(s,y),E&&o.push(...E)};!i&&t.mixins.length&&t.mixins.forEach(m),a.extends&&m(a.extends),a.mixins&&a.mixins.forEach(m)}if(!n&&!l)return Ut(a)&&r.set(a,Pu),Pu;if(Je(n))for(let m=0;m<n.length;m++){({}).NODE_ENV!=="production"&&!ii(n[m])&&Pe("props must be strings when using array syntax.",n[m]);const v=Fr(n[m]);Iy(v)&&(s[v]=kt)}else if(n){({}).NODE_ENV!=="production"&&!Ut(n)&&Pe("invalid props options",n);for(const m in n){const v=Fr(m);if(Iy(v)){const y=n[m],E=s[v]=Je(y)||tt(y)?{type:y}:Object.assign({},y);if(E){const I=Oy(Boolean,E.type),O=Oy(String,E.type);E[0]=I>-1,E[1]=O<0||I<O,(I>-1||gt(E,"default"))&&o.push(v)}}}}const f=[s,o];return Ut(a)&&r.set(a,f),f}function Iy(a){return a[0]!=="$"?!0:({}.NODE_ENV!=="production"&&Pe(`Invalid prop name: "${a}" is a reserved property.`),!1)}function Um(a){const t=a&&a.toString().match(/^\s*(function|class) (\w+)/);return t?t[2]:a===null?"null":""}function Py(a,t){return Um(a)===Um(t)}function Oy(a,t){return Je(t)?t.findIndex(i=>Py(i,a)):tt(t)&&Py(t,a)?0:-1}function Px(a,t,i){const r=st(t),e=i.propsOptions[0];for(const n in e){let s=e[n];s!=null&&Hk(n,r[n],s,!gt(a,n)&&!gt(a,Rr(n)))}}function Hk(a,t,i,r){const{type:e,required:n,validator:s}=i;if(n&&r){Pe('Missing required prop: "'+a+'"');return}if(!(t==null&&!i.required)){if(e!=null&&e!==!0){let o=!1;const l=Je(e)?e:[e],f=[];for(let m=0;m<l.length&&!o;m++){const{valid:v,expectedType:y}=Wk(t,l[m]);f.push(y||""),o=v}if(!o){Pe(qk(a,t,f));return}}s&&!s(t)&&Pe('Invalid prop: custom validator check failed for prop "'+a+'".')}}const $k=Yu("String,Number,Boolean,Function,Symbol,BigInt");function Wk(a,t){let i;const r=Um(t);if($k(r)){const e=typeof a;i=e===r.toLowerCase(),!i&&e==="object"&&(i=a instanceof t)}else r==="Object"?i=Ut(a):r==="Array"?i=Je(a):r==="null"?i=a===null:i=a instanceof t;return{valid:i,expectedType:r}}function qk(a,t,i){let r=`Invalid prop: type check failed for prop "${a}". Expected ${i.map(Co).join(" | ")}`;const e=i[0],n=Fg(t),s=Dy(t,e),o=Dy(t,n);return i.length===1&&Ly(e)&&!Gk(e,n)&&(r+=` with value ${s}`),r+=`, got ${n} `,Ly(n)&&(r+=`with value ${o}.`),r}function Dy(a,t){return t==="String"?`"${a}"`:t==="Number"?`${Number(a)}`:`${a}`}function Ly(a){return["string","number","boolean"].some(i=>a.toLowerCase()===i)}function Gk(...a){return a.some(t=>t.toLowerCase()==="boolean")}const Ox=a=>a[0]==="_"||a==="$stable",Qg=a=>Je(a)?a.map(xn):[xn(a)],zk=(a,t,i)=>{if(t._n)return t;const r=ak((...e)=>({}.NODE_ENV!=="production"&&qt&&Pe(`Slot "${a}" invoked outside of the render function: this will not track dependencies used in the slot. Invoke the slot function inside the render function instead.`),Qg(t(...e))),i);return r._c=!1,r},Dx=(a,t,i)=>{const r=a._ctx;for(const e in a){if(Ox(e))continue;const n=a[e];if(tt(n))t[e]=zk(e,n,r);else if(n!=null){({}).NODE_ENV!=="production"&&Pe(`Non-function value encountered for slot "${e}". Prefer function slots for better performance.`);const s=Qg(n);t[e]=()=>s}}},Lx=(a,t)=>{({}).NODE_ENV!=="production"&&!Gg(a.vnode)&&Pe("Non-function value encountered for default slot. Prefer function slots for better performance.");const i=Qg(t);a.slots.default=()=>i},Kk=(a,t)=>{if(a.vnode.shapeFlag&32){const i=t._;i?(a.slots=st(t),Oc(t,"_",i)):Dx(t,a.slots={})}else a.slots={},t&&Lx(a,t);Oc(a.slots,Oh,1)},Xk=(a,t,i)=>{const{vnode:r,slots:e}=a;let n=!0,s=kt;if(r.shapeFlag&32){const o=t._;o?{}.NODE_ENV!=="production"&&yo?ti(e,t):i&&o===1?n=!1:(ti(e,t),!i&&o===1&&delete e._):(n=!t.$stable,Dx(t,e)),s=t}else t&&(Lx(a,t),s={default:1});if(n)for(const o in e)!Ox(o)&&!(o in s)&&delete e[o]};function kx(){return{app:null,config:{isNativeTag:Vb,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let Qk=0;function Yk(a,t){return function(r,e=null){tt(r)||(r=Object.assign({},r)),e!=null&&!Ut(e)&&({}.NODE_ENV!=="production"&&Pe("root props passed to app.mount() must be an object."),e=null);const n=kx(),s=new Set;let o=!1;const l=n.app={_uid:Qk++,_component:r,_props:e,_container:null,_context:n,_instance:null,version:Fy,get config(){return n.config},set config(f){({}).NODE_ENV!=="production"&&Pe("app.config cannot be replaced. Modify individual options instead.")},use(f,...m){return s.has(f)?{}.NODE_ENV!=="production"&&Pe("Plugin has already been applied to target app."):f&&tt(f.install)?(s.add(f),f.install(l,...m)):tt(f)?(s.add(f),f(l,...m)):{}.NODE_ENV!=="production"&&Pe('A plugin must either be a function or an object with an "install" function.'),l},mixin(f){return n.mixins.includes(f)?{}.NODE_ENV!=="production"&&Pe("Mixin has already been applied to target app"+(f.name?`: ${f.name}`:"")):n.mixins.push(f),l},component(f,m){return{}.NODE_ENV!=="production"&&jm(f,n.config),m?({}.NODE_ENV!=="production"&&n.components[f]&&Pe(`Component "${f}" has already been registered in target app.`),n.components[f]=m,l):n.components[f]},directive(f,m){return{}.NODE_ENV!=="production"&&Sx(f),m?({}.NODE_ENV!=="production"&&n.directives[f]&&Pe(`Directive "${f}" has already been registered in target app.`),n.directives[f]=m,l):n.directives[f]},mount(f,m,v){if(o)({}).NODE_ENV!=="production"&&Pe("App has already been mounted.\nIf you want to remount the same app, move your app creation logic into a factory function and create fresh app instances for each mount - e.g. `const createMyApp = () => createApp(App)`");else{({}).NODE_ENV!=="production"&&f.__vue_app__&&Pe("There is already an app instance mounted on the host container.\n If you want to mount another app on the same host container, you need to unmount the previous app by calling `app.unmount()` first.");const y=ia(r,e);return y.appContext=n,{}.NODE_ENV!=="production"&&(n.reload=()=>{a(bs(y),f,v)}),m&&t?t(y,f):a(y,f,v),o=!0,l._container=f,f.__vue_app__=l,{}.NODE_ENV!=="production"&&(l._instance=y.component,QL(l,Fy)),Lh(y.component)||y.component.proxy}},unmount(){o?(a(null,l._container),{}.NODE_ENV!=="production"&&(l._instance=null,YL(l)),delete l._container.__vue_app__):{}.NODE_ENV!=="production"&&Pe("Cannot unmount an app that is not mounted.")},provide(f,m){return{}.NODE_ENV!=="production"&&f in n.provides&&Pe(`App already provides property with key "${String(f)}". It will be overwritten with the new value.`),n.provides[f]=m,l}};return l}}function Bm(a,t,i,r,e=!1){if(Je(a)){a.forEach((y,E)=>Bm(y,t&&(Je(t)?t[E]:t),i,r,e));return}if(bc(r)&&!e)return;const n=r.shapeFlag&4?Lh(r.component)||r.component.proxy:r.el,s=e?null:n,{i:o,r:l}=a;if({}.NODE_ENV!=="production"&&!o){Pe("Missing ref owner context. ref cannot be used on hoisted vnodes. A vnode with ref must be created inside the render function.");return}const f=t&&t.r,m=o.refs===kt?o.refs={}:o.refs,v=o.setupState;if(f!=null&&f!==l&&(ii(f)?(m[f]=null,gt(v,f)&&(v[f]=null)):di(f)&&(f.value=null)),tt(l))Oa(l,o,12,[s,m]);else{const y=ii(l),E=di(l);if(y||E){const I=()=>{if(a.f){const O=y?gt(v,l)?v[l]:m[l]:l.value;e?Je(O)&&kg(O,n):Je(O)?O.includes(n)||O.push(n):y?(m[l]=[n],gt(v,l)&&(v[l]=m[l])):(l.value=[n],a.k&&(m[a.k]=l.value))}else y?(m[l]=s,gt(v,l)&&(v[l]=s)):E?(l.value=s,a.k&&(m[a.k]=s)):{}.NODE_ENV!=="production"&&Pe("Invalid template ref type:",l,`(${typeof l})`)};s?(I.id=-1,dr(I,i)):I()}else({}).NODE_ENV!=="production"&&Pe("Invalid template ref type:",l,`(${typeof l})`)}}let nd,gs;function Ea(a,t){a.appContext.config.performance&&Mc()&&gs.mark(`vue-${t}-${a.uid}`),{}.NODE_ENV!=="production"&&tk(a,t,Mc()?gs.now():Date.now())}function wa(a,t){if(a.appContext.config.performance&&Mc()){const i=`vue-${t}-${a.uid}`,r=i+":end";gs.mark(r),gs.measure(`<${kh(a,a.type)}> ${t}`,i,r),gs.clearMarks(i),gs.clearMarks(r)}({}).NODE_ENV!=="production"&&ik(a,t,Mc()?gs.now():Date.now())}function Mc(){return nd!==void 0||(typeof window<"u"&&window.performance?(nd=!0,gs=window.performance):nd=!1),nd}function Jk(){const a=[];if({}.NODE_ENV!=="production"&&a.length){const t=a.length>1;console.warn(`Feature flag${t?"s":""} ${a.join(", ")} ${t?"are":"is"} not explicitly defined. You are running the esm-bundler build of Vue, which expects these compile-time feature flags to be globally injected via the bundler config in order to get better tree-shaking in the production bundle.

For more details, see https://link.vuejs.org/feature-flags.`)}}const dr=ck;function Zk(a){return eR(a)}function eR(a,t){Jk();const i=Hb();i.__VUE__=!0,{}.NODE_ENV!=="production"&&px(i.__VUE_DEVTOOLS_GLOBAL_HOOK__,i);const{insert:r,remove:e,patchProp:n,createElement:s,createText:o,createComment:l,setText:f,setElementText:m,parentNode:v,nextSibling:y,setScopeId:E=Ai,insertStaticContent:I}=a,O=(G,J,de,me=null,ce=null,we=null,ue=!1,Ee=null,be={}.NODE_ENV!=="production"&&yo?!1:!!J.dynamicChildren)=>{if(G===J)return;G&&!ad(G,J)&&(me=Ct(G),Qe(G,ce,we,!0),G=null),J.patchFlag===-2&&(be=!1,J.dynamicChildren=null);const{type:_e,ref:Re,shapeFlag:ke}=J;switch(_e){case rf:D(G,J,de,me);break;case Nr:R(G,J,de,me);break;case wd:G==null?H(J,de,me,ue):{}.NODE_ENV!=="production"&&Z(G,J,de,ue);break;case bn:se(G,J,de,me,ce,we,ue,Ee,be);break;default:ke&1?te(G,J,de,me,ce,we,ue,Ee,be):ke&6?he(G,J,de,me,ce,we,ue,Ee,be):ke&64||ke&128?_e.process(G,J,de,me,ce,we,ue,Ee,be,Gt):{}.NODE_ENV!=="production"&&Pe("Invalid VNode type:",_e,`(${typeof _e})`)}Re!=null&&ce&&Bm(Re,G&&G.ref,we,J||G,!J)},D=(G,J,de,me)=>{if(G==null)r(J.el=o(J.children),de,me);else{const ce=J.el=G.el;J.children!==G.children&&f(ce,J.children)}},R=(G,J,de,me)=>{G==null?r(J.el=l(J.children||""),de,me):J.el=G.el},H=(G,J,de,me)=>{[G.el,G.anchor]=I(G.children,J,de,me,G.el,G.anchor)},Z=(G,J,de,me)=>{if(J.children!==G.children){const ce=y(G.anchor);W(G),[J.el,J.anchor]=I(J.children,de,ce,me)}else J.el=G.el,J.anchor=G.anchor},V=({el:G,anchor:J},de,me)=>{let ce;for(;G&&G!==J;)ce=y(G),r(G,de,me),G=ce;r(J,de,me)},W=({el:G,anchor:J})=>{let de;for(;G&&G!==J;)de=y(G),e(G),G=de;e(J)},te=(G,J,de,me,ce,we,ue,Ee,be)=>{ue=ue||J.type==="svg",G==null?z(J,de,me,ce,we,ue,Ee,be):j(G,J,ce,we,ue,Ee,be)},z=(G,J,de,me,ce,we,ue,Ee)=>{let be,_e;const{type:Re,props:ke,shapeFlag:Me,transition:je,dirs:qe}=G;if(be=G.el=s(G.type,we,ke&&ke.is,ke),Me&8?m(be,G.children):Me&16&&X(G.children,be,null,me,ce,we&&Re!=="foreignObject",ue,Ee),qe&&io(G,null,me,"created"),q(be,G,G.scopeId,ue,me),ke){for(const ft in ke)ft!=="value"&&!vc(ft)&&n(be,ft,null,ke[ft],we,G.children,me,ce,wt);"value"in ke&&n(be,"value",null,ke.value),(_e=ke.onVnodeBeforeMount)&&Wn(_e,me,G)}({}).NODE_ENV!=="production"&&(Object.defineProperty(be,"__vnode",{value:G,enumerable:!1}),Object.defineProperty(be,"__vueParentComponent",{value:me,enumerable:!1})),qe&&io(G,null,me,"beforeMount");const ot=(!ce||ce&&!ce.pendingBranch)&&je&&!je.persisted;ot&&je.beforeEnter(be),r(be,J,de),((_e=ke&&ke.onVnodeMounted)||ot||qe)&&dr(()=>{_e&&Wn(_e,me,G),ot&&je.enter(be),qe&&io(G,null,me,"mounted")},ce)},q=(G,J,de,me,ce)=>{if(de&&E(G,de),me)for(let we=0;we<me.length;we++)E(G,me[we]);if(ce){let we=ce.subTree;if({}.NODE_ENV!=="production"&&we.patchFlag>0&&we.patchFlag&2048&&(we=yx(we.children)||we),J===we){const ue=ce.vnode;q(G,ue,ue.scopeId,ue.slotScopeIds,ce.parent)}}},X=(G,J,de,me,ce,we,ue,Ee,be=0)=>{for(let _e=be;_e<G.length;_e++){const Re=G[_e]=Ee?ms(G[_e]):xn(G[_e]);O(null,Re,J,de,me,ce,we,ue,Ee)}},j=(G,J,de,me,ce,we,ue)=>{const Ee=J.el=G.el;let{patchFlag:be,dynamicChildren:_e,dirs:Re}=J;be|=G.patchFlag&16;const ke=G.props||kt,Me=J.props||kt;let je;de&&ro(de,!1),(je=Me.onVnodeBeforeUpdate)&&Wn(je,de,J,G),Re&&io(J,G,de,"beforeUpdate"),de&&ro(de,!0),{}.NODE_ENV!=="production"&&yo&&(be=0,ue=!1,_e=null);const qe=ce&&J.type!=="foreignObject";if(_e?(oe(G.dynamicChildren,_e,Ee,de,me,qe,we),{}.NODE_ENV!=="production"&&de&&de.type.__hmrId&&xc(G,J)):ue||Ie(G,J,Ee,null,de,me,qe,we,!1),be>0){if(be&16)re(Ee,J,ke,Me,de,me,ce);else if(be&2&&ke.class!==Me.class&&n(Ee,"class",null,Me.class,ce),be&4&&n(Ee,"style",ke.style,Me.style,ce),be&8){const ot=J.dynamicProps;for(let ft=0;ft<ot.length;ft++){const At=ot[ft],Oe=ke[At],ir=Me[At];(ir!==Oe||At==="value")&&n(Ee,At,Oe,ir,ce,G.children,de,me,wt)}}be&1&&G.children!==J.children&&m(Ee,J.children)}else!ue&&_e==null&&re(Ee,J,ke,Me,de,me,ce);((je=Me.onVnodeUpdated)||Re)&&dr(()=>{je&&Wn(je,de,J,G),Re&&io(J,G,de,"updated")},me)},oe=(G,J,de,me,ce,we,ue)=>{for(let Ee=0;Ee<J.length;Ee++){const be=G[Ee],_e=J[Ee],Re=be.el&&(be.type===bn||!ad(be,_e)||be.shapeFlag&70)?v(be.el):de;O(be,_e,Re,null,me,ce,we,ue,!0)}},re=(G,J,de,me,ce,we,ue)=>{if(de!==me){if(de!==kt)for(const Ee in de)!vc(Ee)&&!(Ee in me)&&n(G,Ee,de[Ee],null,ue,J.children,ce,we,wt);for(const Ee in me){if(vc(Ee))continue;const be=me[Ee],_e=de[Ee];be!==_e&&Ee!=="value"&&n(G,Ee,_e,be,ue,J.children,ce,we,wt)}"value"in me&&n(G,"value",de.value,me.value)}},se=(G,J,de,me,ce,we,ue,Ee,be)=>{const _e=J.el=G?G.el:o(""),Re=J.anchor=G?G.anchor:o("");let{patchFlag:ke,dynamicChildren:Me,slotScopeIds:je}=J;({}).NODE_ENV!=="production"&&(yo||ke&2048)&&(ke=0,be=!1,Me=null),je&&(Ee=Ee?Ee.concat(je):je),G==null?(r(_e,de,me),r(Re,de,me),X(J.children,de,Re,ce,we,ue,Ee,be)):ke>0&&ke&64&&Me&&G.dynamicChildren?(oe(G.dynamicChildren,Me,de,ce,we,ue,Ee),{}.NODE_ENV!=="production"&&ce&&ce.type.__hmrId?xc(G,J):(J.key!=null||ce&&J===ce.subTree)&&xc(G,J,!0)):Ie(G,J,de,Re,ce,we,ue,Ee,be)},he=(G,J,de,me,ce,we,ue,Ee,be)=>{J.slotScopeIds=Ee,G==null?J.shapeFlag&512?ce.ctx.activate(J,de,me,ue,be):le(J,de,me,ce,we,ue,be):pe(G,J,be)},le=(G,J,de,me,ce,we,ue)=>{const Ee=G.component=fR(G,me,ce);if({}.NODE_ENV!=="production"&&Ee.type.__hmrId&&GL(Ee),{}.NODE_ENV!=="production"&&(_c(G),Ea(Ee,"mount")),Gg(G)&&(Ee.ctx.renderer=Gt),{}.NODE_ENV!=="production"&&Ea(Ee,"init"),pR(Ee),{}.NODE_ENV!=="production"&&wa(Ee,"init"),Ee.asyncDep){if(ce&&ce.registerDep(Ee,ne),!G.el){const be=Ee.subTree=ia(Nr);R(null,be,J,de)}return}ne(Ee,G,J,de,ce,we,ue),{}.NODE_ENV!=="production"&&(yc(),wa(Ee,"mount"))},pe=(G,J,de)=>{const me=J.component=G.component;if(lk(G,J,de))if(me.asyncDep&&!me.asyncResolved){({}).NODE_ENV!=="production"&&_c(J),fe(me,J,de),{}.NODE_ENV!=="production"&&yc();return}else me.next=J,WL(me.update),me.update();else J.el=G.el,me.vnode=J},ne=(G,J,de,me,ce,we,ue)=>{const Ee=()=>{if(G.isMounted){let{next:Re,bu:ke,u:Me,parent:je,vnode:qe}=G,ot=Re,ft;({}).NODE_ENV!=="production"&&_c(Re||G.vnode),ro(G,!1),Re?(Re.el=qe.el,fe(G,Re,ue)):Re=qe,ke&&rd(ke),(ft=Re.props&&Re.props.onVnodeBeforeUpdate)&&Wn(ft,je,Re,qe),ro(G,!0),{}.NODE_ENV!=="production"&&Ea(G,"render");const At=Kp(G);({}).NODE_ENV!=="production"&&wa(G,"render");const Oe=G.subTree;G.subTree=At,{}.NODE_ENV!=="production"&&Ea(G,"patch"),O(Oe,At,v(Oe.el),Ct(Oe),G,ce,we),{}.NODE_ENV!=="production"&&wa(G,"patch"),Re.el=At.el,ot===null&&dk(G,At.el),Me&&dr(Me,ce),(ft=Re.props&&Re.props.onVnodeUpdated)&&dr(()=>Wn(ft,je,Re,qe),ce),{}.NODE_ENV!=="production"&&mx(G),{}.NODE_ENV!=="production"&&yc()}else{let Re;const{el:ke,props:Me}=J,{bm:je,m:qe,parent:ot}=G,ft=bc(J);if(ro(G,!1),je&&rd(je),!ft&&(Re=Me&&Me.onVnodeBeforeMount)&&Wn(Re,ot,J),ro(G,!0),ke&&yi){const At=()=>{({}).NODE_ENV!=="production"&&Ea(G,"render"),G.subTree=Kp(G),{}.NODE_ENV!=="production"&&wa(G,"render"),{}.NODE_ENV!=="production"&&Ea(G,"hydrate"),yi(ke,G.subTree,G,ce,null),{}.NODE_ENV!=="production"&&wa(G,"hydrate")};ft?J.type.__asyncLoader().then(()=>!G.isUnmounted&&At()):At()}else{({}).NODE_ENV!=="production"&&Ea(G,"render");const At=G.subTree=Kp(G);({}).NODE_ENV!=="production"&&wa(G,"render"),{}.NODE_ENV!=="production"&&Ea(G,"patch"),O(null,At,de,me,G,ce,we),{}.NODE_ENV!=="production"&&wa(G,"patch"),J.el=At.el}if(qe&&dr(qe,ce),!ft&&(Re=Me&&Me.onVnodeMounted)){const At=J;dr(()=>Wn(Re,ot,At),ce)}(J.shapeFlag&256||ot&&bc(ot.vnode)&&ot.vnode.shapeFlag&256)&&G.a&&dr(G.a,ce),G.isMounted=!0,{}.NODE_ENV!=="production"&&JL(G),J=de=me=null}},be=G.effect=new Ug(Ee,()=>Ah(_e),G.scope),_e=G.update=()=>be.run();_e.id=G.uid,ro(G,!0),{}.NODE_ENV!=="production"&&(be.onTrack=G.rtc?Re=>rd(G.rtc,Re):void 0,be.onTrigger=G.rtg?Re=>rd(G.rtg,Re):void 0,_e.ownerInstance=G),_e()},fe=(G,J,de)=>{J.component=G;const me=G.vnode.props;G.vnode=J,G.next=null,Vk(G,J.props,me,de),Xk(G,J.children,de),Po(),by(),Oo()},Ie=(G,J,de,me,ce,we,ue,Ee,be=!1)=>{const _e=G&&G.children,Re=G?G.shapeFlag:0,ke=J.children,{patchFlag:Me,shapeFlag:je}=J;if(Me>0){if(Me&128){Xe(_e,ke,de,me,ce,we,ue,Ee,be);return}else if(Me&256){Ce(_e,ke,de,me,ce,we,ue,Ee,be);return}}je&8?(Re&16&&wt(_e,ce,we),ke!==_e&&m(de,ke)):Re&16?je&16?Xe(_e,ke,de,me,ce,we,ue,Ee,be):wt(_e,ce,we,!0):(Re&8&&m(de,""),je&16&&X(ke,de,me,ce,we,ue,Ee,be))},Ce=(G,J,de,me,ce,we,ue,Ee,be)=>{G=G||Pu,J=J||Pu;const _e=G.length,Re=J.length,ke=Math.min(_e,Re);let Me;for(Me=0;Me<ke;Me++){const je=J[Me]=be?ms(J[Me]):xn(J[Me]);O(G[Me],je,de,null,ce,we,ue,Ee,be)}_e>Re?wt(G,ce,we,!0,!1,ke):X(J,de,me,ce,we,ue,Ee,be,ke)},Xe=(G,J,de,me,ce,we,ue,Ee,be)=>{let _e=0;const Re=J.length;let ke=G.length-1,Me=Re-1;for(;_e<=ke&&_e<=Me;){const je=G[_e],qe=J[_e]=be?ms(J[_e]):xn(J[_e]);if(ad(je,qe))O(je,qe,de,null,ce,we,ue,Ee,be);else break;_e++}for(;_e<=ke&&_e<=Me;){const je=G[ke],qe=J[Me]=be?ms(J[Me]):xn(J[Me]);if(ad(je,qe))O(je,qe,de,null,ce,we,ue,Ee,be);else break;ke--,Me--}if(_e>ke){if(_e<=Me){const je=Me+1,qe=je<Re?J[je].el:me;for(;_e<=Me;)O(null,J[_e]=be?ms(J[_e]):xn(J[_e]),de,qe,ce,we,ue,Ee,be),_e++}}else if(_e>Me)for(;_e<=ke;)Qe(G[_e],ce,we,!0),_e++;else{const je=_e,qe=_e,ot=new Map;for(_e=qe;_e<=Me;_e++){const Vt=J[_e]=be?ms(J[_e]):xn(J[_e]);Vt.key!=null&&({}.NODE_ENV!=="production"&&ot.has(Vt.key)&&Pe("Duplicate keys found during update:",JSON.stringify(Vt.key),"Make sure keys are unique."),ot.set(Vt.key,_e))}let ft,At=0;const Oe=Me-qe+1;let ir=!1,Ln=0;const vr=new Array(Oe);for(_e=0;_e<Oe;_e++)vr[_e]=0;for(_e=je;_e<=ke;_e++){const Vt=G[_e];if(At>=Oe){Qe(Vt,ce,we,!0);continue}let Bt;if(Vt.key!=null)Bt=ot.get(Vt.key);else for(ft=qe;ft<=Me;ft++)if(vr[ft-qe]===0&&ad(Vt,J[ft])){Bt=ft;break}Bt===void 0?Qe(Vt,ce,we,!0):(vr[Bt-qe]=_e+1,Bt>=Ln?Ln=Bt:ir=!0,O(Vt,J[Bt],de,null,ce,we,ue,Ee,be),At++)}const kn=ir?tR(vr):Pu;for(ft=kn.length-1,_e=Oe-1;_e>=0;_e--){const Vt=qe+_e,Bt=J[Vt],Ga=Vt+1<Re?J[Vt+1].el:me;vr[_e]===0?O(null,Bt,de,Ga,ce,we,ue,Ee,be):ir&&(ft<0||_e!==kn[ft]?Be(Bt,de,Ga,2):ft--)}}},Be=(G,J,de,me,ce=null)=>{const{el:we,type:ue,transition:Ee,children:be,shapeFlag:_e}=G;if(_e&6){Be(G.component.subTree,J,de,me);return}if(_e&128){G.suspense.move(J,de,me);return}if(_e&64){ue.move(G,J,de,Gt);return}if(ue===bn){r(we,J,de);for(let ke=0;ke<be.length;ke++)Be(be[ke],J,de,me);r(G.anchor,J,de);return}if(ue===wd){V(G,J,de);return}if(me!==2&&_e&1&&Ee)if(me===0)Ee.beforeEnter(we),r(we,J,de),dr(()=>Ee.enter(we),ce);else{const{leave:ke,delayLeave:Me,afterLeave:je}=Ee,qe=()=>r(we,J,de),ot=()=>{ke(we,()=>{qe(),je&&je()})};Me?Me(we,qe,ot):ot()}else r(we,J,de)},Qe=(G,J,de,me=!1,ce=!1)=>{const{type:we,props:ue,ref:Ee,children:be,dynamicChildren:_e,shapeFlag:Re,patchFlag:ke,dirs:Me}=G;if(Ee!=null&&Bm(Ee,null,de,G,!0),Re&256){J.ctx.deactivate(G);return}const je=Re&1&&Me,qe=!bc(G);let ot;if(qe&&(ot=ue&&ue.onVnodeBeforeUnmount)&&Wn(ot,J,G),Re&6)bt(G.component,de,me);else{if(Re&128){G.suspense.unmount(de,me);return}je&&io(G,null,J,"beforeUnmount"),Re&64?G.type.remove(G,J,de,ce,Gt,me):_e&&(we!==bn||ke>0&&ke&64)?wt(_e,J,de,!1,!0):(we===bn&&ke&384||!ce&&Re&16)&&wt(be,J,de),me&&Et(G)}(qe&&(ot=ue&&ue.onVnodeUnmounted)||je)&&dr(()=>{ot&&Wn(ot,J,G),je&&io(G,null,J,"unmounted")},de)},Et=G=>{const{type:J,el:de,anchor:me,transition:ce}=G;if(J===bn){({}).NODE_ENV!=="production"&&G.patchFlag>0&&G.patchFlag&2048&&ce&&!ce.persisted?G.children.forEach(ue=>{ue.type===Nr?e(ue.el):Et(ue)}):Tt(de,me);return}if(J===wd){W(G);return}const we=()=>{e(de),ce&&!ce.persisted&&ce.afterLeave&&ce.afterLeave()};if(G.shapeFlag&1&&ce&&!ce.persisted){const{leave:ue,delayLeave:Ee}=ce,be=()=>ue(de,we);Ee?Ee(G.el,we,be):be()}else we()},Tt=(G,J)=>{let de;for(;G!==J;)de=y(G),e(G),G=de;e(J)},bt=(G,J,de)=>{({}).NODE_ENV!=="production"&&G.type.__hmrId&&zL(G);const{bum:me,scope:ce,update:we,subTree:ue,um:Ee}=G;me&&rd(me),ce.stop(),we&&(we.active=!1,Qe(ue,G,J,de)),Ee&&dr(Ee,J),dr(()=>{G.isUnmounted=!0},J),J&&J.pendingBranch&&!J.isUnmounted&&G.asyncDep&&!G.asyncResolved&&G.suspenseId===J.pendingId&&(J.deps--,J.deps===0&&J.resolve()),{}.NODE_ENV!=="production"&&ek(G)},wt=(G,J,de,me=!1,ce=!1,we=0)=>{for(let ue=we;ue<G.length;ue++)Qe(G[ue],J,de,me,ce)},Ct=G=>G.shapeFlag&6?Ct(G.component.subTree):G.shapeFlag&128?G.suspense.next():y(G.anchor||G.el),ct=(G,J,de)=>{G==null?J._vnode&&Qe(J._vnode,null,null,!0):O(J._vnode||null,G,J,null,null,null,de),by(),fx(),J._vnode=G},Gt={p:O,um:Qe,m:Be,r:Et,mt:le,mc:X,pc:Ie,pbc:oe,n:Ct,o:a};let fi,yi;return t&&([fi,yi]=t(Gt)),{render:ct,hydrate:fi,createApp:Yk(ct,fi)}}function ro({effect:a,update:t},i){a.allowRecurse=t.allowRecurse=i}function xc(a,t,i=!1){const r=a.children,e=t.children;if(Je(r)&&Je(e))for(let n=0;n<r.length;n++){const s=r[n];let o=e[n];o.shapeFlag&1&&!o.dynamicChildren&&((o.patchFlag<=0||o.patchFlag===32)&&(o=e[n]=ms(e[n]),o.el=s.el),i||xc(s,o)),o.type===rf&&(o.el=s.el),{}.NODE_ENV!=="production"&&o.type===Nr&&!o.el&&(o.el=s.el)}}function tR(a){const t=a.slice(),i=[0];let r,e,n,s,o;const l=a.length;for(r=0;r<l;r++){const f=a[r];if(f!==0){if(e=i[i.length-1],a[e]<f){t[r]=e,i.push(r);continue}for(n=0,s=i.length-1;n<s;)o=n+s>>1,a[i[o]]<f?n=o+1:s=o;f<a[i[n]]&&(n>0&&(t[r]=i[n-1]),i[n]=r)}}for(n=i.length,s=i[n-1];n-- >0;)i[n]=s,s=t[s];return i}const iR=a=>a.__isTeleport,bn=Symbol({}.NODE_ENV!=="production"?"Fragment":void 0),rf=Symbol({}.NODE_ENV!=="production"?"Text":void 0),Nr=Symbol({}.NODE_ENV!=="production"?"Comment":void 0),wd=Symbol({}.NODE_ENV!=="production"?"Static":void 0),Cd=[];let wn=null;function Bd(a=!1){Cd.push(wn=a?null:[])}function rR(){Cd.pop(),wn=Cd[Cd.length-1]||null}let jd=1;function ky(a){jd+=a}function Rx(a){return a.dynamicChildren=jd>0?wn||Pu:null,rR(),jd>0&&wn&&wn.push(a),a}function Yg(a,t,i,r,e,n){return Rx(Dh(a,t,i,r,e,n,!0))}function Mx(a,t,i,r,e){return Rx(ia(a,t,i,r,e,!0))}function Jg(a){return a?a.__v_isVNode===!0:!1}function ad(a,t){return{}.NODE_ENV!=="production"&&t.shapeFlag&6&&_u.has(t.type)?(a.shapeFlag&=-257,t.shapeFlag&=-513,!1):a.type===t.type&&a.key===t.key}const nR=(...a)=>Nx(...a),Oh="__vInternal",Fx=({key:a})=>a??null,Sc=({ref:a,ref_key:t,ref_for:i})=>a!=null?ii(a)||di(a)||tt(a)?{i:Zi,r:a,k:t,f:!!i}:a:null;function Dh(a,t=null,i=null,r=0,e=null,n=a===bn?0:1,s=!1,o=!1){const l={__v_isVNode:!0,__v_skip:!0,type:a,props:t,key:t&&Fx(t),ref:t&&Sc(t),scopeId:_x,slotScopeIds:null,children:i,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetAnchor:null,staticCount:0,shapeFlag:n,patchFlag:r,dynamicProps:e,dynamicChildren:null,appContext:null,ctx:Zi};return o?(Zg(l,i),n&128&&a.normalize(l)):i&&(l.shapeFlag|=ii(i)?8:16),{}.NODE_ENV!=="production"&&l.key!==l.key&&Pe("VNode created with invalid key (NaN). VNode type:",l.type),jd>0&&!s&&wn&&(l.patchFlag>0||n&6)&&l.patchFlag!==32&&wn.push(l),l}const ia={}.NODE_ENV!=="production"?nR:Nx;function Nx(a,t=null,i=null,r=0,e=null,n=!1){if((!a||a===Ex)&&({}.NODE_ENV!=="production"&&!a&&Pe(`Invalid vnode type when creating vnode: ${a}.`),a=Nr),Jg(a)){const o=bs(a,t,!0);return i&&Zg(o,i),jd>0&&!n&&wn&&(o.shapeFlag&6?wn[wn.indexOf(a)]=o:wn.push(o)),o.patchFlag|=-2,o}if(Vx(a)&&(a=a.__vccOpts),t){t=aR(t);let{class:o,style:l}=t;o&&!ii(o)&&(t.class=Lg(o)),Ut(l)&&(Pm(l)&&!Je(l)&&(l=ti({},l)),t.style=_h(l))}const s=ii(a)?1:fk(a)?128:iR(a)?64:Ut(a)?4:tt(a)?2:0;return{}.NODE_ENV!=="production"&&s&4&&Pm(a)&&(a=st(a),Pe("Vue received a Component which was made a reactive object. This can lead to unnecessary performance overhead, and should be avoided by marking the component with `markRaw` or using `shallowRef` instead of `ref`.",`
Component that was made reactive: `,a)),Dh(a,t,i,r,e,s,n,!0)}function aR(a){return a?Pm(a)||Oh in a?ti({},a):a:null}function bs(a,t,i=!1){const{props:r,ref:e,patchFlag:n,children:s}=a,o=t?uR(r||{},t):r;return{__v_isVNode:!0,__v_skip:!0,type:a.type,props:o,key:o&&Fx(o),ref:t&&t.ref?i&&e?Je(e)?e.concat(Sc(t)):[e,Sc(t)]:Sc(t):e,scopeId:a.scopeId,slotScopeIds:a.slotScopeIds,children:{}.NODE_ENV!=="production"&&n===-1&&Je(s)?s.map(Ux):s,target:a.target,targetAnchor:a.targetAnchor,staticCount:a.staticCount,shapeFlag:a.shapeFlag,patchFlag:t&&a.type!==bn?n===-1?16:n|16:n,dynamicProps:a.dynamicProps,dynamicChildren:a.dynamicChildren,appContext:a.appContext,dirs:a.dirs,transition:a.transition,component:a.component,suspense:a.suspense,ssContent:a.ssContent&&bs(a.ssContent),ssFallback:a.ssFallback&&bs(a.ssFallback),el:a.el,anchor:a.anchor,ctx:a.ctx,ce:a.ce}}function Ux(a){const t=bs(a);return Je(a.children)&&(t.children=a.children.map(Ux)),t}function sR(a=" ",t=0){return ia(rf,null,a,t)}function oR(a="",t=!1){return t?(Bd(),Mx(Nr,null,a)):ia(Nr,null,a)}function xn(a){return a==null||typeof a=="boolean"?ia(Nr):Je(a)?ia(bn,null,a.slice()):typeof a=="object"?ms(a):ia(rf,null,String(a))}function ms(a){return a.el===null&&a.patchFlag!==-1||a.memo?a:bs(a)}function Zg(a,t){let i=0;const{shapeFlag:r}=a;if(t==null)t=null;else if(Je(t))i=16;else if(typeof t=="object")if(r&65){const e=t.default;e&&(e._c&&(e._d=!1),Zg(a,e()),e._c&&(e._d=!0));return}else{i=32;const e=t._;!e&&!(Oh in t)?t._ctx=Zi:e===3&&Zi&&(Zi.slots._===1?t._=1:(t._=2,a.patchFlag|=1024))}else tt(t)?(t={default:t,_ctx:Zi},i=32):(t=String(t),r&64?(i=16,t=[sR(t)]):i=8);a.children=t,a.shapeFlag|=i}function uR(...a){const t={};for(let i=0;i<a.length;i++){const r=a[i];for(const e in r)if(e==="class")t.class!==r.class&&(t.class=Lg([t.class,r.class]));else if(e==="style")t.style=_h([t.style,r.style]);else if(Zd(e)){const n=t[e],s=r[e];s&&n!==s&&!(Je(n)&&n.includes(s))&&(t[e]=n?[].concat(n,s):s)}else e!==""&&(t[e]=r[e])}return t}function Wn(a,t,i,r=null){Cn(a,t,7,[i,r])}const lR=kx();let dR=0;function fR(a,t,i){const r=a.type,e=(t?t.appContext:a.appContext)||lR,n={uid:dR++,vnode:a,type:r,parent:t,appContext:e,root:null,next:null,subTree:null,effect:null,update:null,scope:new eL(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(e.provides),accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ix(r,e),emitsOptions:vx(r,e),emit:null,emitted:null,propsDefaults:kt,inheritAttrs:r.inheritAttrs,ctx:kt,data:kt,props:kt,attrs:kt,slots:kt,refs:kt,setupState:kt,setupContext:null,suspense:i,suspenseId:i?i.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return{}.NODE_ENV!=="production"?n.ctx=Ok(n):n.ctx={_:n},n.root=t?t.root:n,n.emit=nk.bind(null,n),a.ce&&a.ce(n),n}let qt=null;const cR=()=>qt||Zi,Uu=a=>{qt=a,a.scope.on()},bo=()=>{qt&&qt.scope.off(),qt=null},hR=Yu("slot,component");function jm(a,t){const i=t.isNativeTag||Vb;(hR(a)||i(a))&&Pe("Do not use built-in or reserved HTML elements as component id: "+a)}function Bx(a){return a.vnode.shapeFlag&4}let Vd=!1;function pR(a,t=!1){Vd=t;const{props:i,children:r}=a.vnode,e=Bx(a);Bk(a,i,e,t),Kk(a,r);const n=e?mR(a,t):void 0;return Vd=!1,n}function mR(a,t){var i;const r=a.type;if({}.NODE_ENV!=="production"){if(r.name&&jm(r.name,a.appContext.config),r.components){const n=Object.keys(r.components);for(let s=0;s<n.length;s++)jm(n[s],a.appContext.config)}if(r.directives){const n=Object.keys(r.directives);for(let s=0;s<n.length;s++)Sx(n[s])}r.compilerOptions&&gR()&&Pe('"compilerOptions" is only supported when using a build of Vue that includes the runtime compiler. Since you are using a runtime-only build, the options should be passed via your build tool config instead.')}a.accessCache=Object.create(null),a.proxy=ix(new Proxy(a.ctx,wx)),{}.NODE_ENV!=="production"&&Dk(a);const{setup:e}=r;if(e){const n=a.setupContext=e.length>1?vR(a):null;Uu(a),Po();const s=Oa(e,a,0,[{}.NODE_ENV!=="production"?bu(a.props):a.props,n]);if(Oo(),bo(),Mg(s)){if(s.then(bo,bo),t)return s.then(o=>{Ry(a,o,t)}).catch(o=>{Ch(o,a,0)});if(a.asyncDep=s,{}.NODE_ENV!=="production"&&!a.suspense){const o=(i=r.name)!==null&&i!==void 0?i:"Anonymous";Pe(`Component <${o}>: setup function returned a promise, but no <Suspense> boundary was found in the parent component tree. A component with async setup() must be nested in a <Suspense> in order to be rendered.`)}}else Ry(a,s,t)}else jx(a,t)}function Ry(a,t,i){tt(t)?a.type.__ssrInlineRender?a.ssrRender=t:a.render=t:Ut(t)?({}.NODE_ENV!=="production"&&Jg(t)&&Pe("setup() should not return VNodes directly - return a render function instead."),{}.NODE_ENV!=="production"&&(a.devtoolsRawSetupState=t),a.setupState=ax(t),{}.NODE_ENV!=="production"&&Lk(a)):{}.NODE_ENV!=="production"&&t!==void 0&&Pe(`setup() should return an object. Received: ${t===null?"null":typeof t}`),jx(a,i)}let Vm;const gR=()=>!Vm;function jx(a,t,i){const r=a.type;if(!a.render){if(!t&&Vm&&!r.render){const e=r.template||Xg(a).template;if(e){({}).NODE_ENV!=="production"&&Ea(a,"compile");const{isCustomElement:n,compilerOptions:s}=a.appContext.config,{delimiters:o,compilerOptions:l}=r,f=ti(ti({isCustomElement:n,delimiters:o},s),l);r.render=Vm(e,f),{}.NODE_ENV!=="production"&&wa(a,"compile")}}a.render=r.render||Ai}Uu(a),Po(),Rk(a),Oo(),bo(),{}.NODE_ENV!=="production"&&!r.render&&a.render===Ai&&!t&&(r.template?Pe('Component provided template option but runtime compilation is not supported in this build of Vue. Configure your bundler to alias "vue" to "vue/dist/vue.esm-bundler.js".'):Pe("Component is missing template or render function."))}function My(a){return new Proxy(a.attrs,{}.NODE_ENV!=="production"?{get(t,i){return kc(),tr(a,"get","$attrs"),t[i]},set(){return Pe("setupContext.attrs is readonly."),!1},deleteProperty(){return Pe("setupContext.attrs is readonly."),!1}}:{get(t,i){return tr(a,"get","$attrs"),t[i]}})}function vR(a){const t=r=>{if({}.NODE_ENV!=="production"&&(a.exposed&&Pe("expose() should be called only once per setup()."),r!=null)){let e=typeof r;e==="object"&&(Je(r)?e="array":di(r)&&(e="ref")),e!=="object"&&Pe(`expose() should be passed a plain object, received ${e}.`)}a.exposed=r||{}};let i;return{}.NODE_ENV!=="production"?Object.freeze({get attrs(){return i||(i=My(a))},get slots(){return bu(a.slots)},get emit(){return(r,...e)=>a.emit(r,...e)},expose:t}):{get attrs(){return i||(i=My(a))},slots:a.slots,emit:a.emit,expose:t}}function Lh(a){if(a.exposed)return a.exposeProxy||(a.exposeProxy=new Proxy(ax(ix(a.exposed)),{get(t,i){if(i in t)return t[i];if(i in To)return To[i](a)},has(t,i){return i in t||i in To}}))}const _R=/(?:^|[-_])(\w)/g,yR=a=>a.replace(_R,t=>t.toUpperCase()).replace(/[-_]/g,"");function ev(a,t=!0){return tt(a)?a.displayName||a.name:a.name||t&&a.__name}function kh(a,t,i=!1){let r=ev(t);if(!r&&t.__file){const e=t.__file.match(/([^/\\]+)\.\w+$/);e&&(r=e[1])}if(!r&&a&&a.parent){const e=n=>{for(const s in n)if(n[s]===t)return s};r=e(a.components||a.parent.type.components)||e(a.appContext.components)}return r?yR(r):i?"App":"Anonymous"}function Vx(a){return tt(a)&&"__vccOpts"in a}const Ec=(a,t)=>FL(a,t,Vd),TR=Symbol({}.NODE_ENV!=="production"?"ssrContext":""),bR=()=>{{const a=Tc(TR);return a||{}.NODE_ENV!=="production"&&Pe("Server rendering context not provided. Make sure to only call useSSRContext() conditionally in the server build."),a}};function Qp(a){return!!(a&&a.__v_isShallow)}function xR(){if({}.NODE_ENV==="production"||typeof window>"u")return;const a={style:"color:#3ba776"},t={style:"color:#0b1bc9"},i={style:"color:#b62e24"},r={style:"color:#9d288c"},e={header(v){return Ut(v)?v.__isVue?["div",a,"VueInstance"]:di(v)?["div",{},["span",a,m(v)],"<",o(v.value),">"]:vo(v)?["div",{},["span",a,Qp(v)?"ShallowReactive":"Reactive"],"<",o(v),`>${Ts(v)?" (readonly)":""}`]:Ts(v)?["div",{},["span",a,Qp(v)?"ShallowReadonly":"Readonly"],"<",o(v),">"]:null:null},hasBody(v){return v&&v.__isVue},body(v){if(v&&v.__isVue)return["div",{},...n(v.$)]}};function n(v){const y=[];v.type.props&&v.props&&y.push(s("props",st(v.props))),v.setupState!==kt&&y.push(s("setup",v.setupState)),v.data!==kt&&y.push(s("data",st(v.data)));const E=l(v,"computed");E&&y.push(s("computed",E));const I=l(v,"inject");return I&&y.push(s("injected",I)),y.push(["div",{},["span",{style:r.style+";opacity:0.66"},"$ (internal): "],["object",{object:v}]]),y}function s(v,y){return y=ti({},y),Object.keys(y).length?["div",{style:"line-height:1.25em;margin-bottom:0.6em"},["div",{style:"color:#476582"},v],["div",{style:"padding-left:1.25em"},...Object.keys(y).map(E=>["div",{},["span",r,E+": "],o(y[E],!1)])]]:["span",{}]}function o(v,y=!0){return typeof v=="number"?["span",t,v]:typeof v=="string"?["span",i,JSON.stringify(v)]:typeof v=="boolean"?["span",r,v]:Ut(v)?["object",{object:y?st(v):v}]:["span",i,String(v)]}function l(v,y){const E=v.type;if(tt(E))return;const I={};for(const O in v.ctx)f(E,O,y)&&(I[O]=v.ctx[O]);return I}function f(v,y,E){const I=v[E];if(Je(I)&&I.includes(y)||Ut(I)&&y in I||v.extends&&f(v.extends,y,E)||v.mixins&&v.mixins.some(O=>f(O,y,E)))return!0}function m(v){return Qp(v)?"ShallowRef":v.effect?"ComputedRef":"Ref"}window.devtoolsFormatters?window.devtoolsFormatters.push(e):window.devtoolsFormatters=[e]}const Fy="3.2.47",SR="http://www.w3.org/2000/svg",uo=typeof document<"u"?document:null,Ny=uo&&uo.createElement("template"),ER={insert:(a,t,i)=>{t.insertBefore(a,i||null)},remove:a=>{const t=a.parentNode;t&&t.removeChild(a)},createElement:(a,t,i,r)=>{const e=t?uo.createElementNS(SR,a):uo.createElement(a,i?{is:i}:void 0);return a==="select"&&r&&r.multiple!=null&&e.setAttribute("multiple",r.multiple),e},createText:a=>uo.createTextNode(a),createComment:a=>uo.createComment(a),setText:(a,t)=>{a.nodeValue=t},setElementText:(a,t)=>{a.textContent=t},parentNode:a=>a.parentNode,nextSibling:a=>a.nextSibling,querySelector:a=>uo.querySelector(a),setScopeId(a,t){a.setAttribute(t,"")},insertStaticContent(a,t,i,r,e,n){const s=i?i.previousSibling:t.lastChild;if(e&&(e===n||e.nextSibling))for(;t.insertBefore(e.cloneNode(!0),i),!(e===n||!(e=e.nextSibling)););else{Ny.innerHTML=r?`<svg>${a}</svg>`:a;const o=Ny.content;if(r){const l=o.firstChild;for(;l.firstChild;)o.appendChild(l.firstChild);o.removeChild(l)}t.insertBefore(o,i)}return[s?s.nextSibling:t.firstChild,i?i.previousSibling:t.lastChild]}};function wR(a,t,i){const r=a._vtc;r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?a.removeAttribute("class"):i?a.setAttribute("class",t):a.className=t}function CR(a,t,i){const r=a.style,e=ii(i);if(i&&!e){if(t&&!ii(t))for(const n in t)i[n]==null&&Hm(r,n,"");for(const n in i)Hm(r,n,i[n])}else{const n=r.display;e?t!==i&&(r.cssText=i):t&&a.removeAttribute("style"),"_vod"in a&&(r.display=n)}}const AR=/[^\\];\s*$/,Uy=/\s*!important$/;function Hm(a,t,i){if(Je(i))i.forEach(r=>Hm(a,t,r));else if(i==null&&(i=""),{}.NODE_ENV!=="production"&&AR.test(i)&&Pe(`Unexpected semicolon at the end of '${t}' style value: '${i}'`),t.startsWith("--"))a.setProperty(t,i);else{const r=IR(a,t);Uy.test(i)?a.setProperty(Rr(r),i.replace(Uy,""),"important"):a[r]=i}}const By=["Webkit","Moz","ms"],Yp={};function IR(a,t){const i=Yp[t];if(i)return i;let r=Fr(t);if(r!=="filter"&&r in a)return Yp[t]=r;r=Co(r);for(let e=0;e<By.length;e++){const n=By[e]+r;if(n in a)return Yp[t]=n}return t}const jy="http://www.w3.org/1999/xlink";function PR(a,t,i,r,e){if(r&&t.startsWith("xlink:"))i==null?a.removeAttributeNS(jy,t.slice(6,t.length)):a.setAttributeNS(jy,t,i);else{const n=WD(t);i==null||n&&!jb(i)?a.removeAttribute(t):a.setAttribute(t,n?"":i)}}function OR(a,t,i,r,e,n,s){if(t==="innerHTML"||t==="textContent"){r&&s(r,e,n),a[t]=i??"";return}if(t==="value"&&a.tagName!=="PROGRESS"&&!a.tagName.includes("-")){a._value=i;const l=i??"";(a.value!==l||a.tagName==="OPTION")&&(a.value=l),i==null&&a.removeAttribute(t);return}let o=!1;if(i===""||i==null){const l=typeof a[t];l==="boolean"?i=jb(i):i==null&&l==="string"?(i="",o=!0):l==="number"&&(i=0,o=!0)}try{a[t]=i}catch(l){({}).NODE_ENV!=="production"&&!o&&Pe(`Failed setting prop "${t}" on <${a.tagName.toLowerCase()}>: value ${i} is invalid.`,l)}o&&a.removeAttribute(t)}function DR(a,t,i,r){a.addEventListener(t,i,r)}function LR(a,t,i,r){a.removeEventListener(t,i,r)}function kR(a,t,i,r,e=null){const n=a._vei||(a._vei={}),s=n[t];if(r&&s)s.value=r;else{const[o,l]=RR(t);if(r){const f=n[t]=NR(r,e);DR(a,o,f,l)}else s&&(LR(a,o,s,l),n[t]=void 0)}}const Vy=/(?:Once|Passive|Capture)$/;function RR(a){let t;if(Vy.test(a)){t={};let r;for(;r=a.match(Vy);)a=a.slice(0,a.length-r[0].length),t[r[0].toLowerCase()]=!0}return[a[2]===":"?a.slice(3):Rr(a.slice(2)),t]}let Jp=0;const MR=Promise.resolve(),FR=()=>Jp||(MR.then(()=>Jp=0),Jp=Date.now());function NR(a,t){const i=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=i.attached)return;Cn(UR(r,i.value),t,5,[r])};return i.value=a,i.attached=FR(),i}function UR(a,t){if(Je(t)){const i=a.stopImmediatePropagation;return a.stopImmediatePropagation=()=>{i.call(a),a._stopped=!0},t.map(r=>e=>!e._stopped&&r&&r(e))}else return t}const Hy=/^on[a-z]/,BR=(a,t,i,r,e=!1,n,s,o,l)=>{t==="class"?wR(a,r,e):t==="style"?CR(a,i,r):Zd(t)?Pc(t)||kR(a,t,i,r,s):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):jR(a,t,r,e))?OR(a,t,r,n,s,o,l):(t==="true-value"?a._trueValue=r:t==="false-value"&&(a._falseValue=r),PR(a,t,r,e))};function jR(a,t,i,r){return r?!!(t==="innerHTML"||t==="textContent"||t in a&&Hy.test(t)&&tt(i)):t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&a.tagName==="INPUT"||t==="type"&&a.tagName==="TEXTAREA"||Hy.test(t)&&ii(i)?!1:t in a}function VR(a,t){const i=tf(a);class r extends tv{constructor(n){super(i,n,t)}}return r.def=i,r}const HR=typeof HTMLElement<"u"?HTMLElement:class{};class tv extends HR{constructor(t,i={},r){super(),this._def=t,this._props=i,this._instance=null,this._connected=!1,this._resolved=!1,this._numberProps=null,this.shadowRoot&&r?r(this._createVNode(),this.shadowRoot):({}.NODE_ENV!=="production"&&this.shadowRoot&&Pe("Custom element has pre-rendered declarative shadow root but is not defined as hydratable. Use `defineSSRCustomElement`."),this.attachShadow({mode:"open"}),this._def.__asyncLoader||this._resolveProps(this._def))}connectedCallback(){this._connected=!0,this._instance||(this._resolved?this._update():this._resolveDef())}disconnectedCallback(){this._connected=!1,Nu(()=>{this._connected||(Wy(null,this.shadowRoot),this._instance=null)})}_resolveDef(){this._resolved=!0;for(let r=0;r<this.attributes.length;r++)this._setAttr(this.attributes[r].name);new MutationObserver(r=>{for(const e of r)this._setAttr(e.attributeName)}).observe(this,{attributes:!0});const t=(r,e=!1)=>{const{props:n,styles:s}=r;let o;if(n&&!Je(n))for(const l in n){const f=n[l];(f===Number||f&&f.type===Number)&&(l in this._props&&(this._props[l]=cy(this._props[l])),(o||(o=Object.create(null)))[Fr(l)]=!0)}this._numberProps=o,e&&this._resolveProps(r),this._applyStyles(s),this._update()},i=this._def.__asyncLoader;i?i().then(r=>t(r,!0)):t(this._def)}_resolveProps(t){const{props:i}=t,r=Je(i)?i:Object.keys(i||{});for(const e of Object.keys(this))e[0]!=="_"&&r.includes(e)&&this._setProp(e,this[e],!0,!1);for(const e of r.map(Fr))Object.defineProperty(this,e,{get(){return this._getProp(e)},set(n){this._setProp(e,n)}})}_setAttr(t){let i=this.getAttribute(t);const r=Fr(t);this._numberProps&&this._numberProps[r]&&(i=cy(i)),this._setProp(r,i,!1)}_getProp(t){return this._props[t]}_setProp(t,i,r=!0,e=!0){i!==this._props[t]&&(this._props[t]=i,e&&this._instance&&this._update(),r&&(i===!0?this.setAttribute(Rr(t),""):typeof i=="string"||typeof i=="number"?this.setAttribute(Rr(t),i+""):i||this.removeAttribute(Rr(t))))}_update(){Wy(this._createVNode(),this.shadowRoot)}_createVNode(){const t=ia(this._def,ti({},this._props));return this._instance||(t.ce=i=>{this._instance=i,i.isCE=!0,{}.NODE_ENV!=="production"&&(i.ceReload=n=>{this._styles&&(this._styles.forEach(s=>this.shadowRoot.removeChild(s)),this._styles.length=0),this._applyStyles(n),this._instance=null,this._update()});const r=(n,s)=>{this.dispatchEvent(new CustomEvent(n,{detail:s}))};i.emit=(n,...s)=>{r(n,s),Rr(n)!==n&&r(Rr(n),s)};let e=this;for(;e=e&&(e.parentNode||e.host);)if(e instanceof tv){i.parent=e._instance,i.provides=e._instance.provides;break}}),t}_applyStyles(t){t&&t.forEach(i=>{const r=document.createElement("style");r.textContent=i,this.shadowRoot.appendChild(r),{}.NODE_ENV!=="production"&&(this._styles||(this._styles=[])).push(r)})}}function $R(a){const t=cR();if(!t){({}).NODE_ENV!=="production"&&Pe("useCssVars is called without current active component instance.");return}const i=t.ut=(e=a(t.proxy))=>{Array.from(document.querySelectorAll(`[data-v-owner="${t.uid}"]`)).forEach(n=>Wm(n,e))},r=()=>{const e=a(t.proxy);$m(t.subTree,e),i(e)};pk(r),xx(()=>{const e=new MutationObserver(r);e.observe(t.subTree.el.parentNode,{childList:!0}),zg(()=>e.disconnect())})}function $m(a,t){if(a.shapeFlag&128){const i=a.suspense;a=i.activeBranch,i.pendingBranch&&!i.isHydrating&&i.effects.push(()=>{$m(i.activeBranch,t)})}for(;a.component;)a=a.component.subTree;if(a.shapeFlag&1&&a.el)Wm(a.el,t);else if(a.type===bn)a.children.forEach(i=>$m(i,t));else if(a.type===wd){let{el:i,anchor:r}=a;for(;i&&(Wm(i,t),i!==r);)i=i.nextSibling}}function Wm(a,t){if(a.nodeType===1){const i=a.style;for(const r in t)i.setProperty(`--${r}`,t[r])}}const WR={beforeMount(a,{value:t},{transition:i}){a._vod=a.style.display==="none"?"":a.style.display,i&&t?i.beforeEnter(a):sd(a,t)},mounted(a,{value:t},{transition:i}){i&&t&&i.enter(a)},updated(a,{value:t,oldValue:i},{transition:r}){!t!=!i&&(r?t?(r.beforeEnter(a),sd(a,!0),r.enter(a)):r.leave(a,()=>{sd(a,!1)}):sd(a,t))},beforeUnmount(a,{value:t}){sd(a,t)}};function sd(a,t){a.style.display=t?a._vod:"none"}const qR=ti({patchProp:BR},ER);let $y;function GR(){return $y||($y=Zk(qR))}const Wy=(...a)=>{GR().render(...a)};function zR(){xR()}({}).NODE_ENV!=="production"&&zR();const KR={webComponentUploaderVersion:"1.0.1",webComponentNameUploader:"micro-media-uploader",webComponentSimpleUploaderVersion:"1.0.0",webComponentNameSimpleUploader:"micro-media-simple-uploader",webComponentPlayerVersion:"1.0.0",webComponentNamePlayer:"micro-media-player",allowFileTypeList:["video/"],allowFileExtensionList:["mp4","webm","avi","mov"]};let ic;const XR=new Uint8Array(16);function QR(){if(!ic&&(ic=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!ic))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return ic(XR)}const wi=[];for(let a=0;a<256;++a)wi.push((a+256).toString(16).slice(1));function YR(a,t=0){return(wi[a[t+0]]+wi[a[t+1]]+wi[a[t+2]]+wi[a[t+3]]+"-"+wi[a[t+4]]+wi[a[t+5]]+"-"+wi[a[t+6]]+wi[a[t+7]]+"-"+wi[a[t+8]]+wi[a[t+9]]+"-"+wi[a[t+10]]+wi[a[t+11]]+wi[a[t+12]]+wi[a[t+13]]+wi[a[t+14]]+wi[a[t+15]]).toLowerCase()}const JR=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),qy={randomUUID:JR};function ZR(a,t,i){if(qy.randomUUID&&!t&&!a)return qy.randomUUID();a=a||{};const r=a.random||(a.rng||QR)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,t){i=i||0;for(let e=0;e<16;++e)t[i+e]=r[e];return t}return YR(r)}var Qn=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Hx(a){if(a.__esModule)return a;var t=a.default;if(typeof t=="function"){var i=function r(){if(this instanceof r){var e=[null];e.push.apply(e,arguments);var n=Function.bind.apply(t,e);return new n}return t.apply(this,arguments)};i.prototype=t.prototype}else i={};return Object.defineProperty(i,"__esModule",{value:!0}),Object.keys(a).forEach(function(r){var e=Object.getOwnPropertyDescriptor(a,r);Object.defineProperty(i,r,e.get?e:{enumerable:!0,get:function(){return a[r]}})}),i}var co={},eM={get exports(){return co},set exports(a){co=a}};(function(a,t){(function(){var i,r="4.17.21",e=200,n="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",s="Expected a function",o="Invalid `variable` option passed into `_.template`",l="__lodash_hash_undefined__",f=500,m="__lodash_placeholder__",v=1,y=2,E=4,I=1,O=2,D=1,R=2,H=4,Z=8,V=16,W=32,te=64,z=128,q=256,X=512,j=30,oe="...",re=800,se=16,he=1,le=2,pe=3,ne=1/0,fe=9007199254740991,Ie=17976931348623157e292,Ce=0/0,Xe=4294967295,Be=Xe-1,Qe=Xe>>>1,Et=[["ary",z],["bind",D],["bindKey",R],["curry",Z],["curryRight",V],["flip",X],["partial",W],["partialRight",te],["rearg",q]],Tt="[object Arguments]",bt="[object Array]",wt="[object AsyncFunction]",Ct="[object Boolean]",ct="[object Date]",Gt="[object DOMException]",fi="[object Error]",yi="[object Function]",G="[object GeneratorFunction]",J="[object Map]",de="[object Number]",me="[object Null]",ce="[object Object]",we="[object Promise]",ue="[object Proxy]",Ee="[object RegExp]",be="[object Set]",_e="[object String]",Re="[object Symbol]",ke="[object Undefined]",Me="[object WeakMap]",je="[object WeakSet]",qe="[object ArrayBuffer]",ot="[object DataView]",ft="[object Float32Array]",At="[object Float64Array]",Oe="[object Int8Array]",ir="[object Int16Array]",Ln="[object Int32Array]",vr="[object Uint8Array]",kn="[object Uint8ClampedArray]",Vt="[object Uint16Array]",Bt="[object Uint32Array]",Ga=/\b__p \+= '';/g,ll=/\b(__p \+=) '' \+/g,dl=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Ro=/&(?:amp|lt|gt|quot|#39);/g,Mt=/[&<>"']/g,Is=RegExp(Ro.source),fl=RegExp(Mt.source),cl=/<%-([\s\S]+?)%>/g,hl=/<%([\s\S]+?)%>/g,Mo=/<%=([\s\S]+?)%>/g,pl=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,_r=/^\w*$/,Pt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ps=/[\\^$.*+?()[\]{}|]/g,ml=RegExp(Ps.source),yr=/^\s+/,zt=/\s/,en=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Ve=/\{\n\/\* \[wrapped with (.+)\] \*/,gl=/,? & /,tn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,rn=/[()=,{}\[\]\/\s]/,vl=/\\(\\)?/g,Ti=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Ge=/\w*$/,nn=/^[-+]0x[0-9a-f]+$/i,ht=/^0b[01]+$/i,_l=/^\[object .+?Constructor\]$/,yl=/^0o[0-7]+$/i,Os=/^(?:0|[1-9]\d*)$/,oa=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Rn=/($^)/,Ds=/['\n\r\u2028\u2029\\]/g,Mn="\\ud800-\\udfff",an="\\u0300-\\u036f",Tl="\\ufe20-\\ufe2f",sn="\\u20d0-\\u20ff",za=an+Tl+sn,Br="\\u2700-\\u27bf",Fo="a-z\\xdf-\\xf6\\xf8-\\xff",bl="\\xac\\xb1\\xd7\\xf7",on="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",Tr="\\u2000-\\u206f",un=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Oi="A-Z\\xc0-\\xd6\\xd8-\\xde",Fn="\\ufe0e\\ufe0f",Ka=bl+on+Tr+un,ln="[']",Kt="["+Mn+"]",No="["+Ka+"]",rr="["+za+"]",Xa="\\d+",Ls="["+Br+"]",Qa="["+Fo+"]",Uo="[^"+Mn+Ka+Xa+Br+Fo+Oi+"]",br="\\ud83c[\\udffb-\\udfff]",xr="(?:"+rr+"|"+br+")",Ya="[^"+Mn+"]",ks="(?:\\ud83c[\\udde6-\\uddff]){2}",Rs="[\\ud800-\\udbff][\\udc00-\\udfff]",jr="["+Oi+"]",Bo="\\u200d",jo="(?:"+Qa+"|"+Uo+")",Ms="(?:"+jr+"|"+Uo+")",Vo="(?:"+ln+"(?:d|ll|m|re|s|t|ve))?",Ho="(?:"+ln+"(?:D|LL|M|RE|S|T|VE))?",$o=xr+"?",Wo="["+Fn+"]?",xl="(?:"+Bo+"(?:"+[Ya,ks,Rs].join("|")+")"+Wo+$o+")*",Sl="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",dn="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Vr=Wo+$o+xl,El="(?:"+[Ls,ks,Rs].join("|")+")"+Vr,wl="(?:"+[Ya+rr+"?",rr,ks,Rs,Kt].join("|")+")",ua=RegExp(ln,"g"),Cl=RegExp(rr,"g"),fn=RegExp(br+"(?="+br+")|"+wl+Vr,"g"),Al=RegExp([jr+"?"+Qa+"+"+Vo+"(?="+[No,jr,"$"].join("|")+")",Ms+"+"+Ho+"(?="+[No,jr+jo,"$"].join("|")+")",jr+"?"+jo+"+"+Vo,jr+"+"+Ho,dn,Sl,Xa,El].join("|"),"g"),Il=RegExp("["+Bo+Mn+za+Fn+"]"),Pl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Sr=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Bi=-1,_t={};_t[ft]=_t[At]=_t[Oe]=_t[ir]=_t[Ln]=_t[vr]=_t[kn]=_t[Vt]=_t[Bt]=!0,_t[Tt]=_t[bt]=_t[qe]=_t[Ct]=_t[ot]=_t[ct]=_t[fi]=_t[yi]=_t[J]=_t[de]=_t[ce]=_t[Ee]=_t[be]=_t[_e]=_t[Me]=!1;var rt={};rt[Tt]=rt[bt]=rt[qe]=rt[ot]=rt[Ct]=rt[ct]=rt[ft]=rt[At]=rt[Oe]=rt[ir]=rt[Ln]=rt[J]=rt[de]=rt[ce]=rt[Ee]=rt[be]=rt[_e]=rt[Re]=rt[vr]=rt[kn]=rt[Vt]=rt[Bt]=!0,rt[fi]=rt[yi]=rt[Me]=!1;var Ol={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss","":"A","":"A","":"A","":"a","":"a","":"a","":"C","":"C","":"C","":"C","":"c","":"c","":"c","":"c","":"D","":"D","":"d","":"d","":"E","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"e","":"G","":"G","":"G","":"G","":"g","":"g","":"g","":"g","":"H","":"H","":"h","":"h","":"I","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"i","":"J","":"j","":"K","":"k","":"k","":"L","":"L","":"L","":"L","":"L","":"l","":"l","":"l","":"l","":"l","":"N","":"N","":"N","":"N","":"n","":"n","":"n","":"n","":"O","":"O","":"O","":"o","":"o","":"o","":"R","":"R","":"R","":"r","":"r","":"r","":"S","":"S","":"S","":"S","":"s","":"s","":"s","":"s","":"T","":"T","":"T","":"t","":"t","":"t","":"U","":"U","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"u","":"u","":"W","":"w","":"Y","":"y","":"Y","":"Z","":"Z","":"Z","":"z","":"z","":"z","":"IJ","":"ij","":"Oe","":"oe","":"'n","":"s"},Fs={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ns={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},la={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Dl=parseFloat,Ll=parseInt,qo=typeof Qn=="object"&&Qn&&Qn.Object===Object&&Qn,cn=typeof self=="object"&&self&&self.Object===Object&&self,Xt=qo||cn||Function("return this")(),si=t&&!t.nodeType&&t,hn=si&&!0&&a&&!a.nodeType&&a,Go=hn&&hn.exports===si,He=Go&&qo.process,Di=function(){try{var S=hn&&hn.require&&hn.require("util").types;return S||He&&He.binding&&He.binding("util")}catch{}}(),zo=Di&&Di.isArrayBuffer,Ko=Di&&Di.isDate,Ja=Di&&Di.isMap,Xo=Di&&Di.isRegExp,Za=Di&&Di.isSet,Qo=Di&&Di.isTypedArray;function oi(S,P,C){switch(C.length){case 0:return S.call(P);case 1:return S.call(P,C[0]);case 2:return S.call(P,C[0],C[1]);case 3:return S.call(P,C[0],C[1],C[2])}return S.apply(P,C)}function kl(S,P,C,L){for(var B=-1,ee=S==null?0:S.length;++B<ee;){var ae=S[B];P(L,ae,C(ae),S)}return L}function ci(S,P){for(var C=-1,L=S==null?0:S.length;++C<L&&P(S[C],C,S)!==!1;);return S}function Us(S,P){for(var C=S==null?0:S.length;C--&&P(S[C],C,S)!==!1;);return S}function nr(S,P){for(var C=-1,L=S==null?0:S.length;++C<L;)if(!P(S[C],C,S))return!1;return!0}function ri(S,P){for(var C=-1,L=S==null?0:S.length,B=0,ee=[];++C<L;){var ae=S[C];P(ae,C,S)&&(ee[B++]=ae)}return ee}function es(S,P){var C=S==null?0:S.length;return!!C&&$r(S,P,0)>-1}function Bs(S,P,C){for(var L=-1,B=S==null?0:S.length;++L<B;)if(C(P,S[L]))return!0;return!1}function Dt(S,P){for(var C=-1,L=S==null?0:S.length,B=Array(L);++C<L;)B[C]=P(S[C],C,S);return B}function Hr(S,P){for(var C=-1,L=P.length,B=S.length;++C<L;)S[B+C]=P[C];return S}function js(S,P,C,L){var B=-1,ee=S==null?0:S.length;for(L&&ee&&(C=S[++B]);++B<ee;)C=P(C,S[B],B,S);return C}function Rl(S,P,C,L){var B=S==null?0:S.length;for(L&&B&&(C=S[--B]);B--;)C=P(C,S[B],B,S);return C}function Vs(S,P){for(var C=-1,L=S==null?0:S.length;++C<L;)if(P(S[C],C,S))return!0;return!1}var Ml=da("length");function Fl(S){return S.split("")}function pn(S){return S.match(tn)||[]}function ar(S,P,C){var L;return C(S,function(B,ee,ae){if(P(B,ee,ae))return L=ee,!1}),L}function ts(S,P,C,L){for(var B=S.length,ee=C+(L?1:-1);L?ee--:++ee<B;)if(P(S[ee],ee,S))return ee;return-1}function $r(S,P,C){return P===P?Vl(S,P,C):ts(S,is,C)}function Hs(S,P,C,L){for(var B=C-1,ee=S.length;++B<ee;)if(L(S[B],P))return B;return-1}function is(S){return S!==S}function rs(S,P){var C=S==null?0:S.length;return C?Er(S,P)/C:Ce}function da(S){return function(P){return P==null?i:P[S]}}function mn(S){return function(P){return S==null?i:S[P]}}function ns(S,P,C,L,B){return B(S,function(ee,ae,Q){C=L?(L=!1,ee):P(C,ee,ae,Q)}),C}function $s(S,P){var C=S.length;for(S.sort(P);C--;)S[C]=S[C].value;return S}function Er(S,P){for(var C,L=-1,B=S.length;++L<B;){var ee=P(S[L]);ee!==i&&(C=C===i?ee:C+ee)}return C}function wr(S,P){for(var C=-1,L=Array(S);++C<S;)L[C]=P(C);return L}function Nl(S,P){return Dt(P,function(C){return[C,S[C]]})}function Yo(S){return S&&S.slice(0,d(S)+1).replace(yr,"")}function bi(S){return function(P){return S(P)}}function Ws(S,P){return Dt(P,function(C){return S[C]})}function fa(S,P){return S.has(P)}function Nn(S,P){for(var C=-1,L=S.length;++C<L&&$r(P,S[C],0)>-1;);return C}function Jo(S,P){for(var C=S.length;C--&&$r(P,S[C],0)>-1;);return C}function Ul(S,P){for(var C=S.length,L=0;C--;)S[C]===P&&++L;return L}var ji=mn(Ol),Fe=mn(Fs);function xi(S){return"\\"+la[S]}function St(S,P){return S==null?i:S[P]}function Lt(S){return Il.test(S)}function Bl(S){return Pl.test(S)}function qs(S){for(var P,C=[];!(P=S.next()).done;)C.push(P.value);return C}function Gs(S){var P=-1,C=Array(S.size);return S.forEach(function(L,B){C[++P]=[B,L]}),C}function Zo(S,P){return function(C){return S(P(C))}}function Wr(S,P){for(var C=-1,L=S.length,B=0,ee=[];++C<L;){var ae=S[C];(ae===P||ae===m)&&(S[C]=m,ee[B++]=C)}return ee}function as(S){var P=-1,C=Array(S.size);return S.forEach(function(L){C[++P]=L}),C}function jl(S){var P=-1,C=Array(S.size);return S.forEach(function(L){C[++P]=[L,L]}),C}function Vl(S,P,C){for(var L=C-1,B=S.length;++L<B;)if(S[L]===P)return L;return-1}function Hl(S,P,C){for(var L=C+1;L--;)if(S[L]===P)return L;return L}function qr(S){return Lt(S)?h(S):Ml(S)}function x(S){return Lt(S)?g(S):Fl(S)}function d(S){for(var P=S.length;P--&&zt.test(S.charAt(P)););return P}var p=mn(Ns);function h(S){for(var P=fn.lastIndex=0;fn.test(S);)++P;return P}function g(S){return S.match(fn)||[]}function _(S){return S.match(Al)||[]}var T=function S(P){P=P==null?Xt:w.defaults(Xt.Object(),P,w.pick(Xt,Sr));var C=P.Array,L=P.Date,B=P.Error,ee=P.Function,ae=P.Math,Q=P.Object,ye=P.RegExp,nt=P.String,Ze=P.TypeError,ni=C.prototype,ca=ee.prototype,Gr=Q.prototype,Un=P["__core-js_shared__"],Bn=ca.toString,pt=Gr.hasOwnProperty,zs=0,Ye=function(){var u=/[^.]+$/.exec(Un&&Un.keys&&Un.keys.IE_PROTO||"");return u?"Symbol(src)_1."+u:""}(),jn=Gr.toString,Si=Bn.call(Q),Fw=Xt._,Nw=ye("^"+Bn.call(pt).replace(Ps,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),_f=Go?P.Buffer:i,ss=P.Symbol,yf=P.Uint8Array,E0=_f?_f.allocUnsafe:i,Tf=Zo(Q.getPrototypeOf,Q),w0=Q.create,C0=Gr.propertyIsEnumerable,bf=ni.splice,A0=ss?ss.isConcatSpreadable:i,$l=ss?ss.iterator:i,Ks=ss?ss.toStringTag:i,xf=function(){try{var u=Zs(Q,"defineProperty");return u({},"",{}),u}catch{}}(),Uw=P.clearTimeout!==Xt.clearTimeout&&P.clearTimeout,Bw=L&&L.now!==Xt.Date.now&&L.now,jw=P.setTimeout!==Xt.setTimeout&&P.setTimeout,Sf=ae.ceil,Ef=ae.floor,ep=Q.getOwnPropertySymbols,Vw=_f?_f.isBuffer:i,I0=P.isFinite,Hw=ni.join,$w=Zo(Q.keys,Q),ui=ae.max,Li=ae.min,Ww=L.now,qw=P.parseInt,P0=ae.random,Gw=ni.reverse,tp=Zs(P,"DataView"),Wl=Zs(P,"Map"),ip=Zs(P,"Promise"),eu=Zs(P,"Set"),ql=Zs(P,"WeakMap"),Gl=Zs(Q,"create"),wf=ql&&new ql,tu={},zw=eo(tp),Kw=eo(Wl),Xw=eo(ip),Qw=eo(eu),Yw=eo(ql),Cf=ss?ss.prototype:i,zl=Cf?Cf.valueOf:i,O0=Cf?Cf.toString:i;function M(u){if($t(u)&&!it(u)&&!(u instanceof vt)){if(u instanceof zr)return u;if(pt.call(u,"__wrapped__"))return D_(u)}return new zr(u)}var iu=function(){function u(){}return function(c){if(!Ht(c))return{};if(w0)return w0(c);u.prototype=c;var b=new u;return u.prototype=i,b}}();function Af(){}function zr(u,c){this.__wrapped__=u,this.__actions__=[],this.__chain__=!!c,this.__index__=0,this.__values__=i}M.templateSettings={escape:cl,evaluate:hl,interpolate:Mo,variable:"",imports:{_:M}},M.prototype=Af.prototype,M.prototype.constructor=M,zr.prototype=iu(Af.prototype),zr.prototype.constructor=zr;function vt(u){this.__wrapped__=u,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Xe,this.__views__=[]}function Jw(){var u=new vt(this.__wrapped__);return u.__actions__=sr(this.__actions__),u.__dir__=this.__dir__,u.__filtered__=this.__filtered__,u.__iteratees__=sr(this.__iteratees__),u.__takeCount__=this.__takeCount__,u.__views__=sr(this.__views__),u}function Zw(){if(this.__filtered__){var u=new vt(this);u.__dir__=-1,u.__filtered__=!0}else u=this.clone(),u.__dir__*=-1;return u}function eC(){var u=this.__wrapped__.value(),c=this.__dir__,b=it(u),A=c<0,k=b?u.length:0,U=cA(0,k,this.__views__),K=U.start,Y=U.end,ie=Y-K,ge=A?Y:K-1,ve=this.__iteratees__,xe=ve.length,De=0,Ne=Li(ie,this.__takeCount__);if(!b||!A&&k==ie&&Ne==ie)return e_(u,this.__actions__);var ze=[];e:for(;ie--&&De<Ne;){ge+=c;for(var ut=-1,Ke=u[ge];++ut<xe;){var mt=ve[ut],yt=mt.iteratee,Ir=mt.type,$i=yt(Ke);if(Ir==le)Ke=$i;else if(!$i){if(Ir==he)continue e;break e}}ze[De++]=Ke}return ze}vt.prototype=iu(Af.prototype),vt.prototype.constructor=vt;function Xs(u){var c=-1,b=u==null?0:u.length;for(this.clear();++c<b;){var A=u[c];this.set(A[0],A[1])}}function tC(){this.__data__=Gl?Gl(null):{},this.size=0}function iC(u){var c=this.has(u)&&delete this.__data__[u];return this.size-=c?1:0,c}function rC(u){var c=this.__data__;if(Gl){var b=c[u];return b===l?i:b}return pt.call(c,u)?c[u]:i}function nC(u){var c=this.__data__;return Gl?c[u]!==i:pt.call(c,u)}function aC(u,c){var b=this.__data__;return this.size+=this.has(u)?0:1,b[u]=Gl&&c===i?l:c,this}Xs.prototype.clear=tC,Xs.prototype.delete=iC,Xs.prototype.get=rC,Xs.prototype.has=nC,Xs.prototype.set=aC;function ha(u){var c=-1,b=u==null?0:u.length;for(this.clear();++c<b;){var A=u[c];this.set(A[0],A[1])}}function sC(){this.__data__=[],this.size=0}function oC(u){var c=this.__data__,b=If(c,u);if(b<0)return!1;var A=c.length-1;return b==A?c.pop():bf.call(c,b,1),--this.size,!0}function uC(u){var c=this.__data__,b=If(c,u);return b<0?i:c[b][1]}function lC(u){return If(this.__data__,u)>-1}function dC(u,c){var b=this.__data__,A=If(b,u);return A<0?(++this.size,b.push([u,c])):b[A][1]=c,this}ha.prototype.clear=sC,ha.prototype.delete=oC,ha.prototype.get=uC,ha.prototype.has=lC,ha.prototype.set=dC;function pa(u){var c=-1,b=u==null?0:u.length;for(this.clear();++c<b;){var A=u[c];this.set(A[0],A[1])}}function fC(){this.size=0,this.__data__={hash:new Xs,map:new(Wl||ha),string:new Xs}}function cC(u){var c=jf(this,u).delete(u);return this.size-=c?1:0,c}function hC(u){return jf(this,u).get(u)}function pC(u){return jf(this,u).has(u)}function mC(u,c){var b=jf(this,u),A=b.size;return b.set(u,c),this.size+=b.size==A?0:1,this}pa.prototype.clear=fC,pa.prototype.delete=cC,pa.prototype.get=hC,pa.prototype.has=pC,pa.prototype.set=mC;function Qs(u){var c=-1,b=u==null?0:u.length;for(this.__data__=new pa;++c<b;)this.add(u[c])}function gC(u){return this.__data__.set(u,l),this}function vC(u){return this.__data__.has(u)}Qs.prototype.add=Qs.prototype.push=gC,Qs.prototype.has=vC;function gn(u){var c=this.__data__=new ha(u);this.size=c.size}function _C(){this.__data__=new ha,this.size=0}function yC(u){var c=this.__data__,b=c.delete(u);return this.size=c.size,b}function TC(u){return this.__data__.get(u)}function bC(u){return this.__data__.has(u)}function xC(u,c){var b=this.__data__;if(b instanceof ha){var A=b.__data__;if(!Wl||A.length<e-1)return A.push([u,c]),this.size=++b.size,this;b=this.__data__=new pa(A)}return b.set(u,c),this.size=b.size,this}gn.prototype.clear=_C,gn.prototype.delete=yC,gn.prototype.get=TC,gn.prototype.has=bC,gn.prototype.set=xC;function D0(u,c){var b=it(u),A=!b&&to(u),k=!b&&!A&&fs(u),U=!b&&!A&&!k&&su(u),K=b||A||k||U,Y=K?wr(u.length,nt):[],ie=Y.length;for(var ge in u)(c||pt.call(u,ge))&&!(K&&(ge=="length"||k&&(ge=="offset"||ge=="parent")||U&&(ge=="buffer"||ge=="byteLength"||ge=="byteOffset")||_a(ge,ie)))&&Y.push(ge);return Y}function L0(u){var c=u.length;return c?u[hp(0,c-1)]:i}function SC(u,c){return Vf(sr(u),Ys(c,0,u.length))}function EC(u){return Vf(sr(u))}function rp(u,c,b){(b!==i&&!vn(u[c],b)||b===i&&!(c in u))&&ma(u,c,b)}function Kl(u,c,b){var A=u[c];(!(pt.call(u,c)&&vn(A,b))||b===i&&!(c in u))&&ma(u,c,b)}function If(u,c){for(var b=u.length;b--;)if(vn(u[b][0],c))return b;return-1}function wC(u,c,b,A){return os(u,function(k,U,K){c(A,k,b(k),K)}),A}function k0(u,c){return u&&Hn(c,hi(c),u)}function CC(u,c){return u&&Hn(c,ur(c),u)}function ma(u,c,b){c=="__proto__"&&xf?xf(u,c,{configurable:!0,enumerable:!0,value:b,writable:!0}):u[c]=b}function np(u,c){for(var b=-1,A=c.length,k=C(A),U=u==null;++b<A;)k[b]=U?i:Up(u,c[b]);return k}function Ys(u,c,b){return u===u&&(b!==i&&(u=u<=b?u:b),c!==i&&(u=u>=c?u:c)),u}function Kr(u,c,b,A,k,U){var K,Y=c&v,ie=c&y,ge=c&E;if(b&&(K=k?b(u,A,k,U):b(u)),K!==i)return K;if(!Ht(u))return u;var ve=it(u);if(ve){if(K=pA(u),!Y)return sr(u,K)}else{var xe=ki(u),De=xe==yi||xe==G;if(fs(u))return r_(u,Y);if(xe==ce||xe==Tt||De&&!k){if(K=ie||De?{}:x_(u),!Y)return ie?rA(u,CC(K,u)):iA(u,k0(K,u))}else{if(!rt[xe])return k?u:{};K=mA(u,xe,Y)}}U||(U=new gn);var Ne=U.get(u);if(Ne)return Ne;U.set(u,K),Y_(u)?u.forEach(function(Ke){K.add(Kr(Ke,c,b,Ke,u,U))}):X_(u)&&u.forEach(function(Ke,mt){K.set(mt,Kr(Ke,c,b,mt,u,U))});var ze=ge?ie?Ep:Sp:ie?ur:hi,ut=ve?i:ze(u);return ci(ut||u,function(Ke,mt){ut&&(mt=Ke,Ke=u[mt]),Kl(K,mt,Kr(Ke,c,b,mt,u,U))}),K}function AC(u){var c=hi(u);return function(b){return R0(b,u,c)}}function R0(u,c,b){var A=b.length;if(u==null)return!A;for(u=Q(u);A--;){var k=b[A],U=c[k],K=u[k];if(K===i&&!(k in u)||!U(K))return!1}return!0}function M0(u,c,b){if(typeof u!="function")throw new Ze(s);return td(function(){u.apply(i,b)},c)}function Xl(u,c,b,A){var k=-1,U=es,K=!0,Y=u.length,ie=[],ge=c.length;if(!Y)return ie;b&&(c=Dt(c,bi(b))),A?(U=Bs,K=!1):c.length>=e&&(U=fa,K=!1,c=new Qs(c));e:for(;++k<Y;){var ve=u[k],xe=b==null?ve:b(ve);if(ve=A||ve!==0?ve:0,K&&xe===xe){for(var De=ge;De--;)if(c[De]===xe)continue e;ie.push(ve)}else U(c,xe,A)||ie.push(ve)}return ie}var os=u_(Vn),F0=u_(sp,!0);function IC(u,c){var b=!0;return os(u,function(A,k,U){return b=!!c(A,k,U),b}),b}function Pf(u,c,b){for(var A=-1,k=u.length;++A<k;){var U=u[A],K=c(U);if(K!=null&&(Y===i?K===K&&!Ar(K):b(K,Y)))var Y=K,ie=U}return ie}function PC(u,c,b,A){var k=u.length;for(b=at(b),b<0&&(b=-b>k?0:k+b),A=A===i||A>k?k:at(A),A<0&&(A+=k),A=b>A?0:Z_(A);b<A;)u[b++]=c;return u}function N0(u,c){var b=[];return os(u,function(A,k,U){c(A,k,U)&&b.push(A)}),b}function Ei(u,c,b,A,k){var U=-1,K=u.length;for(b||(b=vA),k||(k=[]);++U<K;){var Y=u[U];c>0&&b(Y)?c>1?Ei(Y,c-1,b,A,k):Hr(k,Y):A||(k[k.length]=Y)}return k}var ap=l_(),U0=l_(!0);function Vn(u,c){return u&&ap(u,c,hi)}function sp(u,c){return u&&U0(u,c,hi)}function Of(u,c){return ri(c,function(b){return ya(u[b])})}function Js(u,c){c=ls(c,u);for(var b=0,A=c.length;u!=null&&b<A;)u=u[$n(c[b++])];return b&&b==A?u:i}function B0(u,c,b){var A=c(u);return it(u)?A:Hr(A,b(u))}function Vi(u){return u==null?u===i?ke:me:Ks&&Ks in Q(u)?fA(u):EA(u)}function op(u,c){return u>c}function OC(u,c){return u!=null&&pt.call(u,c)}function DC(u,c){return u!=null&&c in Q(u)}function LC(u,c,b){return u>=Li(c,b)&&u<ui(c,b)}function up(u,c,b){for(var A=b?Bs:es,k=u[0].length,U=u.length,K=U,Y=C(U),ie=1/0,ge=[];K--;){var ve=u[K];K&&c&&(ve=Dt(ve,bi(c))),ie=Li(ve.length,ie),Y[K]=!b&&(c||k>=120&&ve.length>=120)?new Qs(K&&ve):i}ve=u[0];var xe=-1,De=Y[0];e:for(;++xe<k&&ge.length<ie;){var Ne=ve[xe],ze=c?c(Ne):Ne;if(Ne=b||Ne!==0?Ne:0,!(De?fa(De,ze):A(ge,ze,b))){for(K=U;--K;){var ut=Y[K];if(!(ut?fa(ut,ze):A(u[K],ze,b)))continue e}De&&De.push(ze),ge.push(Ne)}}return ge}function kC(u,c,b,A){return Vn(u,function(k,U,K){c(A,b(k),U,K)}),A}function Ql(u,c,b){c=ls(c,u),u=C_(u,c);var A=u==null?u:u[$n(Qr(c))];return A==null?i:oi(A,u,b)}function j0(u){return $t(u)&&Vi(u)==Tt}function RC(u){return $t(u)&&Vi(u)==qe}function MC(u){return $t(u)&&Vi(u)==ct}function Yl(u,c,b,A,k){return u===c?!0:u==null||c==null||!$t(u)&&!$t(c)?u!==u&&c!==c:FC(u,c,b,A,Yl,k)}function FC(u,c,b,A,k,U){var K=it(u),Y=it(c),ie=K?bt:ki(u),ge=Y?bt:ki(c);ie=ie==Tt?ce:ie,ge=ge==Tt?ce:ge;var ve=ie==ce,xe=ge==ce,De=ie==ge;if(De&&fs(u)){if(!fs(c))return!1;K=!0,ve=!1}if(De&&!ve)return U||(U=new gn),K||su(u)?y_(u,c,b,A,k,U):lA(u,c,ie,b,A,k,U);if(!(b&I)){var Ne=ve&&pt.call(u,"__wrapped__"),ze=xe&&pt.call(c,"__wrapped__");if(Ne||ze){var ut=Ne?u.value():u,Ke=ze?c.value():c;return U||(U=new gn),k(ut,Ke,b,A,U)}}return De?(U||(U=new gn),dA(u,c,b,A,k,U)):!1}function NC(u){return $t(u)&&ki(u)==J}function lp(u,c,b,A){var k=b.length,U=k,K=!A;if(u==null)return!U;for(u=Q(u);k--;){var Y=b[k];if(K&&Y[2]?Y[1]!==u[Y[0]]:!(Y[0]in u))return!1}for(;++k<U;){Y=b[k];var ie=Y[0],ge=u[ie],ve=Y[1];if(K&&Y[2]){if(ge===i&&!(ie in u))return!1}else{var xe=new gn;if(A)var De=A(ge,ve,ie,u,c,xe);if(!(De===i?Yl(ve,ge,I|O,A,xe):De))return!1}}return!0}function V0(u){if(!Ht(u)||yA(u))return!1;var c=ya(u)?Nw:_l;return c.test(eo(u))}function UC(u){return $t(u)&&Vi(u)==Ee}function BC(u){return $t(u)&&ki(u)==be}function jC(u){return $t(u)&&zf(u.length)&&!!_t[Vi(u)]}function H0(u){return typeof u=="function"?u:u==null?lr:typeof u=="object"?it(u)?q0(u[0],u[1]):W0(u):dy(u)}function dp(u){if(!ed(u))return $w(u);var c=[];for(var b in Q(u))pt.call(u,b)&&b!="constructor"&&c.push(b);return c}function VC(u){if(!Ht(u))return SA(u);var c=ed(u),b=[];for(var A in u)A=="constructor"&&(c||!pt.call(u,A))||b.push(A);return b}function fp(u,c){return u<c}function $0(u,c){var b=-1,A=or(u)?C(u.length):[];return os(u,function(k,U,K){A[++b]=c(k,U,K)}),A}function W0(u){var c=Cp(u);return c.length==1&&c[0][2]?E_(c[0][0],c[0][1]):function(b){return b===u||lp(b,u,c)}}function q0(u,c){return Ip(u)&&S_(c)?E_($n(u),c):function(b){var A=Up(b,u);return A===i&&A===c?Bp(b,u):Yl(c,A,I|O)}}function Df(u,c,b,A,k){u!==c&&ap(c,function(U,K){if(k||(k=new gn),Ht(U))HC(u,c,K,b,Df,A,k);else{var Y=A?A(Op(u,K),U,K+"",u,c,k):i;Y===i&&(Y=U),rp(u,K,Y)}},ur)}function HC(u,c,b,A,k,U,K){var Y=Op(u,b),ie=Op(c,b),ge=K.get(ie);if(ge){rp(u,b,ge);return}var ve=U?U(Y,ie,b+"",u,c,K):i,xe=ve===i;if(xe){var De=it(ie),Ne=!De&&fs(ie),ze=!De&&!Ne&&su(ie);ve=ie,De||Ne||ze?it(Y)?ve=Y:Qt(Y)?ve=sr(Y):Ne?(xe=!1,ve=r_(ie,!0)):ze?(xe=!1,ve=n_(ie,!0)):ve=[]:id(ie)||to(ie)?(ve=Y,to(Y)?ve=ey(Y):(!Ht(Y)||ya(Y))&&(ve=x_(ie))):xe=!1}xe&&(K.set(ie,ve),k(ve,ie,A,U,K),K.delete(ie)),rp(u,b,ve)}function G0(u,c){var b=u.length;if(b)return c+=c<0?b:0,_a(c,b)?u[c]:i}function z0(u,c,b){c.length?c=Dt(c,function(U){return it(U)?function(K){return Js(K,U.length===1?U[0]:U)}:U}):c=[lr];var A=-1;c=Dt(c,bi(We()));var k=$0(u,function(U,K,Y){var ie=Dt(c,function(ge){return ge(U)});return{criteria:ie,index:++A,value:U}});return $s(k,function(U,K){return tA(U,K,b)})}function $C(u,c){return K0(u,c,function(b,A){return Bp(u,A)})}function K0(u,c,b){for(var A=-1,k=c.length,U={};++A<k;){var K=c[A],Y=Js(u,K);b(Y,K)&&Jl(U,ls(K,u),Y)}return U}function WC(u){return function(c){return Js(c,u)}}function cp(u,c,b,A){var k=A?Hs:$r,U=-1,K=c.length,Y=u;for(u===c&&(c=sr(c)),b&&(Y=Dt(u,bi(b)));++U<K;)for(var ie=0,ge=c[U],ve=b?b(ge):ge;(ie=k(Y,ve,ie,A))>-1;)Y!==u&&bf.call(Y,ie,1),bf.call(u,ie,1);return u}function X0(u,c){for(var b=u?c.length:0,A=b-1;b--;){var k=c[b];if(b==A||k!==U){var U=k;_a(k)?bf.call(u,k,1):gp(u,k)}}return u}function hp(u,c){return u+Ef(P0()*(c-u+1))}function qC(u,c,b,A){for(var k=-1,U=ui(Sf((c-u)/(b||1)),0),K=C(U);U--;)K[A?U:++k]=u,u+=b;return K}function pp(u,c){var b="";if(!u||c<1||c>fe)return b;do{c%2&&(b+=u),c=Ef(c/2),c&&(u+=u)}while(c);return b}function dt(u,c){return Dp(w_(u,c,lr),u+"")}function GC(u){return L0(ou(u))}function zC(u,c){var b=ou(u);return Vf(b,Ys(c,0,b.length))}function Jl(u,c,b,A){if(!Ht(u))return u;c=ls(c,u);for(var k=-1,U=c.length,K=U-1,Y=u;Y!=null&&++k<U;){var ie=$n(c[k]),ge=b;if(ie==="__proto__"||ie==="constructor"||ie==="prototype")return u;if(k!=K){var ve=Y[ie];ge=A?A(ve,ie,Y):i,ge===i&&(ge=Ht(ve)?ve:_a(c[k+1])?[]:{})}Kl(Y,ie,ge),Y=Y[ie]}return u}var Q0=wf?function(u,c){return wf.set(u,c),u}:lr,KC=xf?function(u,c){return xf(u,"toString",{configurable:!0,enumerable:!1,value:Vp(c),writable:!0})}:lr;function XC(u){return Vf(ou(u))}function Xr(u,c,b){var A=-1,k=u.length;c<0&&(c=-c>k?0:k+c),b=b>k?k:b,b<0&&(b+=k),k=c>b?0:b-c>>>0,c>>>=0;for(var U=C(k);++A<k;)U[A]=u[A+c];return U}function QC(u,c){var b;return os(u,function(A,k,U){return b=c(A,k,U),!b}),!!b}function Lf(u,c,b){var A=0,k=u==null?A:u.length;if(typeof c=="number"&&c===c&&k<=Qe){for(;A<k;){var U=A+k>>>1,K=u[U];K!==null&&!Ar(K)&&(b?K<=c:K<c)?A=U+1:k=U}return k}return mp(u,c,lr,b)}function mp(u,c,b,A){var k=0,U=u==null?0:u.length;if(U===0)return 0;c=b(c);for(var K=c!==c,Y=c===null,ie=Ar(c),ge=c===i;k<U;){var ve=Ef((k+U)/2),xe=b(u[ve]),De=xe!==i,Ne=xe===null,ze=xe===xe,ut=Ar(xe);if(K)var Ke=A||ze;else ge?Ke=ze&&(A||De):Y?Ke=ze&&De&&(A||!Ne):ie?Ke=ze&&De&&!Ne&&(A||!ut):Ne||ut?Ke=!1:Ke=A?xe<=c:xe<c;Ke?k=ve+1:U=ve}return Li(U,Be)}function Y0(u,c){for(var b=-1,A=u.length,k=0,U=[];++b<A;){var K=u[b],Y=c?c(K):K;if(!b||!vn(Y,ie)){var ie=Y;U[k++]=K===0?0:K}}return U}function J0(u){return typeof u=="number"?u:Ar(u)?Ce:+u}function Cr(u){if(typeof u=="string")return u;if(it(u))return Dt(u,Cr)+"";if(Ar(u))return O0?O0.call(u):"";var c=u+"";return c=="0"&&1/u==-ne?"-0":c}function us(u,c,b){var A=-1,k=es,U=u.length,K=!0,Y=[],ie=Y;if(b)K=!1,k=Bs;else if(U>=e){var ge=c?null:oA(u);if(ge)return as(ge);K=!1,k=fa,ie=new Qs}else ie=c?[]:Y;e:for(;++A<U;){var ve=u[A],xe=c?c(ve):ve;if(ve=b||ve!==0?ve:0,K&&xe===xe){for(var De=ie.length;De--;)if(ie[De]===xe)continue e;c&&ie.push(xe),Y.push(ve)}else k(ie,xe,b)||(ie!==Y&&ie.push(xe),Y.push(ve))}return Y}function gp(u,c){return c=ls(c,u),u=C_(u,c),u==null||delete u[$n(Qr(c))]}function Z0(u,c,b,A){return Jl(u,c,b(Js(u,c)),A)}function kf(u,c,b,A){for(var k=u.length,U=A?k:-1;(A?U--:++U<k)&&c(u[U],U,u););return b?Xr(u,A?0:U,A?U+1:k):Xr(u,A?U+1:0,A?k:U)}function e_(u,c){var b=u;return b instanceof vt&&(b=b.value()),js(c,function(A,k){return k.func.apply(k.thisArg,Hr([A],k.args))},b)}function vp(u,c,b){var A=u.length;if(A<2)return A?us(u[0]):[];for(var k=-1,U=C(A);++k<A;)for(var K=u[k],Y=-1;++Y<A;)Y!=k&&(U[k]=Xl(U[k]||K,u[Y],c,b));return us(Ei(U,1),c,b)}function t_(u,c,b){for(var A=-1,k=u.length,U=c.length,K={};++A<k;){var Y=A<U?c[A]:i;b(K,u[A],Y)}return K}function _p(u){return Qt(u)?u:[]}function yp(u){return typeof u=="function"?u:lr}function ls(u,c){return it(u)?u:Ip(u,c)?[u]:O_(It(u))}var YC=dt;function ds(u,c,b){var A=u.length;return b=b===i?A:b,!c&&b>=A?u:Xr(u,c,b)}var i_=Uw||function(u){return Xt.clearTimeout(u)};function r_(u,c){if(c)return u.slice();var b=u.length,A=E0?E0(b):new u.constructor(b);return u.copy(A),A}function Tp(u){var c=new u.constructor(u.byteLength);return new yf(c).set(new yf(u)),c}function JC(u,c){var b=c?Tp(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.byteLength)}function ZC(u){var c=new u.constructor(u.source,Ge.exec(u));return c.lastIndex=u.lastIndex,c}function eA(u){return zl?Q(zl.call(u)):{}}function n_(u,c){var b=c?Tp(u.buffer):u.buffer;return new u.constructor(b,u.byteOffset,u.length)}function a_(u,c){if(u!==c){var b=u!==i,A=u===null,k=u===u,U=Ar(u),K=c!==i,Y=c===null,ie=c===c,ge=Ar(c);if(!Y&&!ge&&!U&&u>c||U&&K&&ie&&!Y&&!ge||A&&K&&ie||!b&&ie||!k)return 1;if(!A&&!U&&!ge&&u<c||ge&&b&&k&&!A&&!U||Y&&b&&k||!K&&k||!ie)return-1}return 0}function tA(u,c,b){for(var A=-1,k=u.criteria,U=c.criteria,K=k.length,Y=b.length;++A<K;){var ie=a_(k[A],U[A]);if(ie){if(A>=Y)return ie;var ge=b[A];return ie*(ge=="desc"?-1:1)}}return u.index-c.index}function s_(u,c,b,A){for(var k=-1,U=u.length,K=b.length,Y=-1,ie=c.length,ge=ui(U-K,0),ve=C(ie+ge),xe=!A;++Y<ie;)ve[Y]=c[Y];for(;++k<K;)(xe||k<U)&&(ve[b[k]]=u[k]);for(;ge--;)ve[Y++]=u[k++];return ve}function o_(u,c,b,A){for(var k=-1,U=u.length,K=-1,Y=b.length,ie=-1,ge=c.length,ve=ui(U-Y,0),xe=C(ve+ge),De=!A;++k<ve;)xe[k]=u[k];for(var Ne=k;++ie<ge;)xe[Ne+ie]=c[ie];for(;++K<Y;)(De||k<U)&&(xe[Ne+b[K]]=u[k++]);return xe}function sr(u,c){var b=-1,A=u.length;for(c||(c=C(A));++b<A;)c[b]=u[b];return c}function Hn(u,c,b,A){var k=!b;b||(b={});for(var U=-1,K=c.length;++U<K;){var Y=c[U],ie=A?A(b[Y],u[Y],Y,b,u):i;ie===i&&(ie=u[Y]),k?ma(b,Y,ie):Kl(b,Y,ie)}return b}function iA(u,c){return Hn(u,Ap(u),c)}function rA(u,c){return Hn(u,T_(u),c)}function Rf(u,c){return function(b,A){var k=it(b)?kl:wC,U=c?c():{};return k(b,u,We(A,2),U)}}function ru(u){return dt(function(c,b){var A=-1,k=b.length,U=k>1?b[k-1]:i,K=k>2?b[2]:i;for(U=u.length>3&&typeof U=="function"?(k--,U):i,K&&Hi(b[0],b[1],K)&&(U=k<3?i:U,k=1),c=Q(c);++A<k;){var Y=b[A];Y&&u(c,Y,A,U)}return c})}function u_(u,c){return function(b,A){if(b==null)return b;if(!or(b))return u(b,A);for(var k=b.length,U=c?k:-1,K=Q(b);(c?U--:++U<k)&&A(K[U],U,K)!==!1;);return b}}function l_(u){return function(c,b,A){for(var k=-1,U=Q(c),K=A(c),Y=K.length;Y--;){var ie=K[u?Y:++k];if(b(U[ie],ie,U)===!1)break}return c}}function nA(u,c,b){var A=c&D,k=Zl(u);function U(){var K=this&&this!==Xt&&this instanceof U?k:u;return K.apply(A?b:this,arguments)}return U}function d_(u){return function(c){c=It(c);var b=Lt(c)?x(c):i,A=b?b[0]:c.charAt(0),k=b?ds(b,1).join(""):c.slice(1);return A[u]()+k}}function nu(u){return function(c){return js(uy(oy(c).replace(ua,"")),u,"")}}function Zl(u){return function(){var c=arguments;switch(c.length){case 0:return new u;case 1:return new u(c[0]);case 2:return new u(c[0],c[1]);case 3:return new u(c[0],c[1],c[2]);case 4:return new u(c[0],c[1],c[2],c[3]);case 5:return new u(c[0],c[1],c[2],c[3],c[4]);case 6:return new u(c[0],c[1],c[2],c[3],c[4],c[5]);case 7:return new u(c[0],c[1],c[2],c[3],c[4],c[5],c[6])}var b=iu(u.prototype),A=u.apply(b,c);return Ht(A)?A:b}}function aA(u,c,b){var A=Zl(u);function k(){for(var U=arguments.length,K=C(U),Y=U,ie=au(k);Y--;)K[Y]=arguments[Y];var ge=U<3&&K[0]!==ie&&K[U-1]!==ie?[]:Wr(K,ie);if(U-=ge.length,U<b)return m_(u,c,Mf,k.placeholder,i,K,ge,i,i,b-U);var ve=this&&this!==Xt&&this instanceof k?A:u;return oi(ve,this,K)}return k}function f_(u){return function(c,b,A){var k=Q(c);if(!or(c)){var U=We(b,3);c=hi(c),b=function(Y){return U(k[Y],Y,k)}}var K=u(c,b,A);return K>-1?k[U?c[K]:K]:i}}function c_(u){return va(function(c){var b=c.length,A=b,k=zr.prototype.thru;for(u&&c.reverse();A--;){var U=c[A];if(typeof U!="function")throw new Ze(s);if(k&&!K&&Bf(U)=="wrapper")var K=new zr([],!0)}for(A=K?A:b;++A<b;){U=c[A];var Y=Bf(U),ie=Y=="wrapper"?wp(U):i;ie&&Pp(ie[0])&&ie[1]==(z|Z|W|q)&&!ie[4].length&&ie[9]==1?K=K[Bf(ie[0])].apply(K,ie[3]):K=U.length==1&&Pp(U)?K[Y]():K.thru(U)}return function(){var ge=arguments,ve=ge[0];if(K&&ge.length==1&&it(ve))return K.plant(ve).value();for(var xe=0,De=b?c[xe].apply(this,ge):ve;++xe<b;)De=c[xe].call(this,De);return De}})}function Mf(u,c,b,A,k,U,K,Y,ie,ge){var ve=c&z,xe=c&D,De=c&R,Ne=c&(Z|V),ze=c&X,ut=De?i:Zl(u);function Ke(){for(var mt=arguments.length,yt=C(mt),Ir=mt;Ir--;)yt[Ir]=arguments[Ir];if(Ne)var $i=au(Ke),Pr=Ul(yt,$i);if(A&&(yt=s_(yt,A,k,Ne)),U&&(yt=o_(yt,U,K,Ne)),mt-=Pr,Ne&&mt<ge){var Yt=Wr(yt,$i);return m_(u,c,Mf,Ke.placeholder,b,yt,Yt,Y,ie,ge-mt)}var _n=xe?b:this,ba=De?_n[u]:u;return mt=yt.length,Y?yt=wA(yt,Y):ze&&mt>1&&yt.reverse(),ve&&ie<mt&&(yt.length=ie),this&&this!==Xt&&this instanceof Ke&&(ba=ut||Zl(ba)),ba.apply(_n,yt)}return Ke}function h_(u,c){return function(b,A){return kC(b,u,c(A),{})}}function Ff(u,c){return function(b,A){var k;if(b===i&&A===i)return c;if(b!==i&&(k=b),A!==i){if(k===i)return A;typeof b=="string"||typeof A=="string"?(b=Cr(b),A=Cr(A)):(b=J0(b),A=J0(A)),k=u(b,A)}return k}}function bp(u){return va(function(c){return c=Dt(c,bi(We())),dt(function(b){var A=this;return u(c,function(k){return oi(k,A,b)})})})}function Nf(u,c){c=c===i?" ":Cr(c);var b=c.length;if(b<2)return b?pp(c,u):c;var A=pp(c,Sf(u/qr(c)));return Lt(c)?ds(x(A),0,u).join(""):A.slice(0,u)}function sA(u,c,b,A){var k=c&D,U=Zl(u);function K(){for(var Y=-1,ie=arguments.length,ge=-1,ve=A.length,xe=C(ve+ie),De=this&&this!==Xt&&this instanceof K?U:u;++ge<ve;)xe[ge]=A[ge];for(;ie--;)xe[ge++]=arguments[++Y];return oi(De,k?b:this,xe)}return K}function p_(u){return function(c,b,A){return A&&typeof A!="number"&&Hi(c,b,A)&&(b=A=i),c=Ta(c),b===i?(b=c,c=0):b=Ta(b),A=A===i?c<b?1:-1:Ta(A),qC(c,b,A,u)}}function Uf(u){return function(c,b){return typeof c=="string"&&typeof b=="string"||(c=Yr(c),b=Yr(b)),u(c,b)}}function m_(u,c,b,A,k,U,K,Y,ie,ge){var ve=c&Z,xe=ve?K:i,De=ve?i:K,Ne=ve?U:i,ze=ve?i:U;c|=ve?W:te,c&=~(ve?te:W),c&H||(c&=~(D|R));var ut=[u,c,k,Ne,xe,ze,De,Y,ie,ge],Ke=b.apply(i,ut);return Pp(u)&&A_(Ke,ut),Ke.placeholder=A,I_(Ke,u,c)}function xp(u){var c=ae[u];return function(b,A){if(b=Yr(b),A=A==null?0:Li(at(A),292),A&&I0(b)){var k=(It(b)+"e").split("e"),U=c(k[0]+"e"+(+k[1]+A));return k=(It(U)+"e").split("e"),+(k[0]+"e"+(+k[1]-A))}return c(b)}}var oA=eu&&1/as(new eu([,-0]))[1]==ne?function(u){return new eu(u)}:Wp;function g_(u){return function(c){var b=ki(c);return b==J?Gs(c):b==be?jl(c):Nl(c,u(c))}}function ga(u,c,b,A,k,U,K,Y){var ie=c&R;if(!ie&&typeof u!="function")throw new Ze(s);var ge=A?A.length:0;if(ge||(c&=~(W|te),A=k=i),K=K===i?K:ui(at(K),0),Y=Y===i?Y:at(Y),ge-=k?k.length:0,c&te){var ve=A,xe=k;A=k=i}var De=ie?i:wp(u),Ne=[u,c,b,A,k,ve,xe,U,K,Y];if(De&&xA(Ne,De),u=Ne[0],c=Ne[1],b=Ne[2],A=Ne[3],k=Ne[4],Y=Ne[9]=Ne[9]===i?ie?0:u.length:ui(Ne[9]-ge,0),!Y&&c&(Z|V)&&(c&=~(Z|V)),!c||c==D)var ze=nA(u,c,b);else c==Z||c==V?ze=aA(u,c,Y):(c==W||c==(D|W))&&!k.length?ze=sA(u,c,b,A):ze=Mf.apply(i,Ne);var ut=De?Q0:A_;return I_(ut(ze,Ne),u,c)}function v_(u,c,b,A){return u===i||vn(u,Gr[b])&&!pt.call(A,b)?c:u}function __(u,c,b,A,k,U){return Ht(u)&&Ht(c)&&(U.set(c,u),Df(u,c,i,__,U),U.delete(c)),u}function uA(u){return id(u)?i:u}function y_(u,c,b,A,k,U){var K=b&I,Y=u.length,ie=c.length;if(Y!=ie&&!(K&&ie>Y))return!1;var ge=U.get(u),ve=U.get(c);if(ge&&ve)return ge==c&&ve==u;var xe=-1,De=!0,Ne=b&O?new Qs:i;for(U.set(u,c),U.set(c,u);++xe<Y;){var ze=u[xe],ut=c[xe];if(A)var Ke=K?A(ut,ze,xe,c,u,U):A(ze,ut,xe,u,c,U);if(Ke!==i){if(Ke)continue;De=!1;break}if(Ne){if(!Vs(c,function(mt,yt){if(!fa(Ne,yt)&&(ze===mt||k(ze,mt,b,A,U)))return Ne.push(yt)})){De=!1;break}}else if(!(ze===ut||k(ze,ut,b,A,U))){De=!1;break}}return U.delete(u),U.delete(c),De}function lA(u,c,b,A,k,U,K){switch(b){case ot:if(u.byteLength!=c.byteLength||u.byteOffset!=c.byteOffset)return!1;u=u.buffer,c=c.buffer;case qe:return!(u.byteLength!=c.byteLength||!U(new yf(u),new yf(c)));case Ct:case ct:case de:return vn(+u,+c);case fi:return u.name==c.name&&u.message==c.message;case Ee:case _e:return u==c+"";case J:var Y=Gs;case be:var ie=A&I;if(Y||(Y=as),u.size!=c.size&&!ie)return!1;var ge=K.get(u);if(ge)return ge==c;A|=O,K.set(u,c);var ve=y_(Y(u),Y(c),A,k,U,K);return K.delete(u),ve;case Re:if(zl)return zl.call(u)==zl.call(c)}return!1}function dA(u,c,b,A,k,U){var K=b&I,Y=Sp(u),ie=Y.length,ge=Sp(c),ve=ge.length;if(ie!=ve&&!K)return!1;for(var xe=ie;xe--;){var De=Y[xe];if(!(K?De in c:pt.call(c,De)))return!1}var Ne=U.get(u),ze=U.get(c);if(Ne&&ze)return Ne==c&&ze==u;var ut=!0;U.set(u,c),U.set(c,u);for(var Ke=K;++xe<ie;){De=Y[xe];var mt=u[De],yt=c[De];if(A)var Ir=K?A(yt,mt,De,c,u,U):A(mt,yt,De,u,c,U);if(!(Ir===i?mt===yt||k(mt,yt,b,A,U):Ir)){ut=!1;break}Ke||(Ke=De=="constructor")}if(ut&&!Ke){var $i=u.constructor,Pr=c.constructor;$i!=Pr&&"constructor"in u&&"constructor"in c&&!(typeof $i=="function"&&$i instanceof $i&&typeof Pr=="function"&&Pr instanceof Pr)&&(ut=!1)}return U.delete(u),U.delete(c),ut}function va(u){return Dp(w_(u,i,R_),u+"")}function Sp(u){return B0(u,hi,Ap)}function Ep(u){return B0(u,ur,T_)}var wp=wf?function(u){return wf.get(u)}:Wp;function Bf(u){for(var c=u.name+"",b=tu[c],A=pt.call(tu,c)?b.length:0;A--;){var k=b[A],U=k.func;if(U==null||U==u)return k.name}return c}function au(u){var c=pt.call(M,"placeholder")?M:u;return c.placeholder}function We(){var u=M.iteratee||Hp;return u=u===Hp?H0:u,arguments.length?u(arguments[0],arguments[1]):u}function jf(u,c){var b=u.__data__;return _A(c)?b[typeof c=="string"?"string":"hash"]:b.map}function Cp(u){for(var c=hi(u),b=c.length;b--;){var A=c[b],k=u[A];c[b]=[A,k,S_(k)]}return c}function Zs(u,c){var b=St(u,c);return V0(b)?b:i}function fA(u){var c=pt.call(u,Ks),b=u[Ks];try{u[Ks]=i;var A=!0}catch{}var k=jn.call(u);return A&&(c?u[Ks]=b:delete u[Ks]),k}var Ap=ep?function(u){return u==null?[]:(u=Q(u),ri(ep(u),function(c){return C0.call(u,c)}))}:qp,T_=ep?function(u){for(var c=[];u;)Hr(c,Ap(u)),u=Tf(u);return c}:qp,ki=Vi;(tp&&ki(new tp(new ArrayBuffer(1)))!=ot||Wl&&ki(new Wl)!=J||ip&&ki(ip.resolve())!=we||eu&&ki(new eu)!=be||ql&&ki(new ql)!=Me)&&(ki=function(u){var c=Vi(u),b=c==ce?u.constructor:i,A=b?eo(b):"";if(A)switch(A){case zw:return ot;case Kw:return J;case Xw:return we;case Qw:return be;case Yw:return Me}return c});function cA(u,c,b){for(var A=-1,k=b.length;++A<k;){var U=b[A],K=U.size;switch(U.type){case"drop":u+=K;break;case"dropRight":c-=K;break;case"take":c=Li(c,u+K);break;case"takeRight":u=ui(u,c-K);break}}return{start:u,end:c}}function hA(u){var c=u.match(Ve);return c?c[1].split(gl):[]}function b_(u,c,b){c=ls(c,u);for(var A=-1,k=c.length,U=!1;++A<k;){var K=$n(c[A]);if(!(U=u!=null&&b(u,K)))break;u=u[K]}return U||++A!=k?U:(k=u==null?0:u.length,!!k&&zf(k)&&_a(K,k)&&(it(u)||to(u)))}function pA(u){var c=u.length,b=new u.constructor(c);return c&&typeof u[0]=="string"&&pt.call(u,"index")&&(b.index=u.index,b.input=u.input),b}function x_(u){return typeof u.constructor=="function"&&!ed(u)?iu(Tf(u)):{}}function mA(u,c,b){var A=u.constructor;switch(c){case qe:return Tp(u);case Ct:case ct:return new A(+u);case ot:return JC(u,b);case ft:case At:case Oe:case ir:case Ln:case vr:case kn:case Vt:case Bt:return n_(u,b);case J:return new A;case de:case _e:return new A(u);case Ee:return ZC(u);case be:return new A;case Re:return eA(u)}}function gA(u,c){var b=c.length;if(!b)return u;var A=b-1;return c[A]=(b>1?"& ":"")+c[A],c=c.join(b>2?", ":" "),u.replace(en,`{
/* [wrapped with `+c+`] */
`)}function vA(u){return it(u)||to(u)||!!(A0&&u&&u[A0])}function _a(u,c){var b=typeof u;return c=c??fe,!!c&&(b=="number"||b!="symbol"&&Os.test(u))&&u>-1&&u%1==0&&u<c}function Hi(u,c,b){if(!Ht(b))return!1;var A=typeof c;return(A=="number"?or(b)&&_a(c,b.length):A=="string"&&c in b)?vn(b[c],u):!1}function Ip(u,c){if(it(u))return!1;var b=typeof u;return b=="number"||b=="symbol"||b=="boolean"||u==null||Ar(u)?!0:_r.test(u)||!pl.test(u)||c!=null&&u in Q(c)}function _A(u){var c=typeof u;return c=="string"||c=="number"||c=="symbol"||c=="boolean"?u!=="__proto__":u===null}function Pp(u){var c=Bf(u),b=M[c];if(typeof b!="function"||!(c in vt.prototype))return!1;if(u===b)return!0;var A=wp(b);return!!A&&u===A[0]}function yA(u){return!!Ye&&Ye in u}var TA=Un?ya:Gp;function ed(u){var c=u&&u.constructor,b=typeof c=="function"&&c.prototype||Gr;return u===b}function S_(u){return u===u&&!Ht(u)}function E_(u,c){return function(b){return b==null?!1:b[u]===c&&(c!==i||u in Q(b))}}function bA(u){var c=qf(u,function(A){return b.size===f&&b.clear(),A}),b=c.cache;return c}function xA(u,c){var b=u[1],A=c[1],k=b|A,U=k<(D|R|z),K=A==z&&b==Z||A==z&&b==q&&u[7].length<=c[8]||A==(z|q)&&c[7].length<=c[8]&&b==Z;if(!(U||K))return u;A&D&&(u[2]=c[2],k|=b&D?0:H);var Y=c[3];if(Y){var ie=u[3];u[3]=ie?s_(ie,Y,c[4]):Y,u[4]=ie?Wr(u[3],m):c[4]}return Y=c[5],Y&&(ie=u[5],u[5]=ie?o_(ie,Y,c[6]):Y,u[6]=ie?Wr(u[5],m):c[6]),Y=c[7],Y&&(u[7]=Y),A&z&&(u[8]=u[8]==null?c[8]:Li(u[8],c[8])),u[9]==null&&(u[9]=c[9]),u[0]=c[0],u[1]=k,u}function SA(u){var c=[];if(u!=null)for(var b in Q(u))c.push(b);return c}function EA(u){return jn.call(u)}function w_(u,c,b){return c=ui(c===i?u.length-1:c,0),function(){for(var A=arguments,k=-1,U=ui(A.length-c,0),K=C(U);++k<U;)K[k]=A[c+k];k=-1;for(var Y=C(c+1);++k<c;)Y[k]=A[k];return Y[c]=b(K),oi(u,this,Y)}}function C_(u,c){return c.length<2?u:Js(u,Xr(c,0,-1))}function wA(u,c){for(var b=u.length,A=Li(c.length,b),k=sr(u);A--;){var U=c[A];u[A]=_a(U,b)?k[U]:i}return u}function Op(u,c){if(!(c==="constructor"&&typeof u[c]=="function")&&c!="__proto__")return u[c]}var A_=P_(Q0),td=jw||function(u,c){return Xt.setTimeout(u,c)},Dp=P_(KC);function I_(u,c,b){var A=c+"";return Dp(u,gA(A,CA(hA(A),b)))}function P_(u){var c=0,b=0;return function(){var A=Ww(),k=se-(A-b);if(b=A,k>0){if(++c>=re)return arguments[0]}else c=0;return u.apply(i,arguments)}}function Vf(u,c){var b=-1,A=u.length,k=A-1;for(c=c===i?A:c;++b<c;){var U=hp(b,k),K=u[U];u[U]=u[b],u[b]=K}return u.length=c,u}var O_=bA(function(u){var c=[];return u.charCodeAt(0)===46&&c.push(""),u.replace(Pt,function(b,A,k,U){c.push(k?U.replace(vl,"$1"):A||b)}),c});function $n(u){if(typeof u=="string"||Ar(u))return u;var c=u+"";return c=="0"&&1/u==-ne?"-0":c}function eo(u){if(u!=null){try{return Bn.call(u)}catch{}try{return u+""}catch{}}return""}function CA(u,c){return ci(Et,function(b){var A="_."+b[0];c&b[1]&&!es(u,A)&&u.push(A)}),u.sort()}function D_(u){if(u instanceof vt)return u.clone();var c=new zr(u.__wrapped__,u.__chain__);return c.__actions__=sr(u.__actions__),c.__index__=u.__index__,c.__values__=u.__values__,c}function AA(u,c,b){(b?Hi(u,c,b):c===i)?c=1:c=ui(at(c),0);var A=u==null?0:u.length;if(!A||c<1)return[];for(var k=0,U=0,K=C(Sf(A/c));k<A;)K[U++]=Xr(u,k,k+=c);return K}function IA(u){for(var c=-1,b=u==null?0:u.length,A=0,k=[];++c<b;){var U=u[c];U&&(k[A++]=U)}return k}function PA(){var u=arguments.length;if(!u)return[];for(var c=C(u-1),b=arguments[0],A=u;A--;)c[A-1]=arguments[A];return Hr(it(b)?sr(b):[b],Ei(c,1))}var OA=dt(function(u,c){return Qt(u)?Xl(u,Ei(c,1,Qt,!0)):[]}),DA=dt(function(u,c){var b=Qr(c);return Qt(b)&&(b=i),Qt(u)?Xl(u,Ei(c,1,Qt,!0),We(b,2)):[]}),LA=dt(function(u,c){var b=Qr(c);return Qt(b)&&(b=i),Qt(u)?Xl(u,Ei(c,1,Qt,!0),i,b):[]});function kA(u,c,b){var A=u==null?0:u.length;return A?(c=b||c===i?1:at(c),Xr(u,c<0?0:c,A)):[]}function RA(u,c,b){var A=u==null?0:u.length;return A?(c=b||c===i?1:at(c),c=A-c,Xr(u,0,c<0?0:c)):[]}function MA(u,c){return u&&u.length?kf(u,We(c,3),!0,!0):[]}function FA(u,c){return u&&u.length?kf(u,We(c,3),!0):[]}function NA(u,c,b,A){var k=u==null?0:u.length;return k?(b&&typeof b!="number"&&Hi(u,c,b)&&(b=0,A=k),PC(u,c,b,A)):[]}function L_(u,c,b){var A=u==null?0:u.length;if(!A)return-1;var k=b==null?0:at(b);return k<0&&(k=ui(A+k,0)),ts(u,We(c,3),k)}function k_(u,c,b){var A=u==null?0:u.length;if(!A)return-1;var k=A-1;return b!==i&&(k=at(b),k=b<0?ui(A+k,0):Li(k,A-1)),ts(u,We(c,3),k,!0)}function R_(u){var c=u==null?0:u.length;return c?Ei(u,1):[]}function UA(u){var c=u==null?0:u.length;return c?Ei(u,ne):[]}function BA(u,c){var b=u==null?0:u.length;return b?(c=c===i?1:at(c),Ei(u,c)):[]}function jA(u){for(var c=-1,b=u==null?0:u.length,A={};++c<b;){var k=u[c];A[k[0]]=k[1]}return A}function M_(u){return u&&u.length?u[0]:i}function VA(u,c,b){var A=u==null?0:u.length;if(!A)return-1;var k=b==null?0:at(b);return k<0&&(k=ui(A+k,0)),$r(u,c,k)}function HA(u){var c=u==null?0:u.length;return c?Xr(u,0,-1):[]}var $A=dt(function(u){var c=Dt(u,_p);return c.length&&c[0]===u[0]?up(c):[]}),WA=dt(function(u){var c=Qr(u),b=Dt(u,_p);return c===Qr(b)?c=i:b.pop(),b.length&&b[0]===u[0]?up(b,We(c,2)):[]}),qA=dt(function(u){var c=Qr(u),b=Dt(u,_p);return c=typeof c=="function"?c:i,c&&b.pop(),b.length&&b[0]===u[0]?up(b,i,c):[]});function GA(u,c){return u==null?"":Hw.call(u,c)}function Qr(u){var c=u==null?0:u.length;return c?u[c-1]:i}function zA(u,c,b){var A=u==null?0:u.length;if(!A)return-1;var k=A;return b!==i&&(k=at(b),k=k<0?ui(A+k,0):Li(k,A-1)),c===c?Hl(u,c,k):ts(u,is,k,!0)}function KA(u,c){return u&&u.length?G0(u,at(c)):i}var XA=dt(F_);function F_(u,c){return u&&u.length&&c&&c.length?cp(u,c):u}function QA(u,c,b){return u&&u.length&&c&&c.length?cp(u,c,We(b,2)):u}function YA(u,c,b){return u&&u.length&&c&&c.length?cp(u,c,i,b):u}var JA=va(function(u,c){var b=u==null?0:u.length,A=np(u,c);return X0(u,Dt(c,function(k){return _a(k,b)?+k:k}).sort(a_)),A});function ZA(u,c){var b=[];if(!(u&&u.length))return b;var A=-1,k=[],U=u.length;for(c=We(c,3);++A<U;){var K=u[A];c(K,A,u)&&(b.push(K),k.push(A))}return X0(u,k),b}function Lp(u){return u==null?u:Gw.call(u)}function eI(u,c,b){var A=u==null?0:u.length;return A?(b&&typeof b!="number"&&Hi(u,c,b)?(c=0,b=A):(c=c==null?0:at(c),b=b===i?A:at(b)),Xr(u,c,b)):[]}function tI(u,c){return Lf(u,c)}function iI(u,c,b){return mp(u,c,We(b,2))}function rI(u,c){var b=u==null?0:u.length;if(b){var A=Lf(u,c);if(A<b&&vn(u[A],c))return A}return-1}function nI(u,c){return Lf(u,c,!0)}function aI(u,c,b){return mp(u,c,We(b,2),!0)}function sI(u,c){var b=u==null?0:u.length;if(b){var A=Lf(u,c,!0)-1;if(vn(u[A],c))return A}return-1}function oI(u){return u&&u.length?Y0(u):[]}function uI(u,c){return u&&u.length?Y0(u,We(c,2)):[]}function lI(u){var c=u==null?0:u.length;return c?Xr(u,1,c):[]}function dI(u,c,b){return u&&u.length?(c=b||c===i?1:at(c),Xr(u,0,c<0?0:c)):[]}function fI(u,c,b){var A=u==null?0:u.length;return A?(c=b||c===i?1:at(c),c=A-c,Xr(u,c<0?0:c,A)):[]}function cI(u,c){return u&&u.length?kf(u,We(c,3),!1,!0):[]}function hI(u,c){return u&&u.length?kf(u,We(c,3)):[]}var pI=dt(function(u){return us(Ei(u,1,Qt,!0))}),mI=dt(function(u){var c=Qr(u);return Qt(c)&&(c=i),us(Ei(u,1,Qt,!0),We(c,2))}),gI=dt(function(u){var c=Qr(u);return c=typeof c=="function"?c:i,us(Ei(u,1,Qt,!0),i,c)});function vI(u){return u&&u.length?us(u):[]}function _I(u,c){return u&&u.length?us(u,We(c,2)):[]}function yI(u,c){return c=typeof c=="function"?c:i,u&&u.length?us(u,i,c):[]}function kp(u){if(!(u&&u.length))return[];var c=0;return u=ri(u,function(b){if(Qt(b))return c=ui(b.length,c),!0}),wr(c,function(b){return Dt(u,da(b))})}function N_(u,c){if(!(u&&u.length))return[];var b=kp(u);return c==null?b:Dt(b,function(A){return oi(c,i,A)})}var TI=dt(function(u,c){return Qt(u)?Xl(u,c):[]}),bI=dt(function(u){return vp(ri(u,Qt))}),xI=dt(function(u){var c=Qr(u);return Qt(c)&&(c=i),vp(ri(u,Qt),We(c,2))}),SI=dt(function(u){var c=Qr(u);return c=typeof c=="function"?c:i,vp(ri(u,Qt),i,c)}),EI=dt(kp);function wI(u,c){return t_(u||[],c||[],Kl)}function CI(u,c){return t_(u||[],c||[],Jl)}var AI=dt(function(u){var c=u.length,b=c>1?u[c-1]:i;return b=typeof b=="function"?(u.pop(),b):i,N_(u,b)});function U_(u){var c=M(u);return c.__chain__=!0,c}function II(u,c){return c(u),u}function Hf(u,c){return c(u)}var PI=va(function(u){var c=u.length,b=c?u[0]:0,A=this.__wrapped__,k=function(U){return np(U,u)};return c>1||this.__actions__.length||!(A instanceof vt)||!_a(b)?this.thru(k):(A=A.slice(b,+b+(c?1:0)),A.__actions__.push({func:Hf,args:[k],thisArg:i}),new zr(A,this.__chain__).thru(function(U){return c&&!U.length&&U.push(i),U}))});function OI(){return U_(this)}function DI(){return new zr(this.value(),this.__chain__)}function LI(){this.__values__===i&&(this.__values__=J_(this.value()));var u=this.__index__>=this.__values__.length,c=u?i:this.__values__[this.__index__++];return{done:u,value:c}}function kI(){return this}function RI(u){for(var c,b=this;b instanceof Af;){var A=D_(b);A.__index__=0,A.__values__=i,c?k.__wrapped__=A:c=A;var k=A;b=b.__wrapped__}return k.__wrapped__=u,c}function MI(){var u=this.__wrapped__;if(u instanceof vt){var c=u;return this.__actions__.length&&(c=new vt(this)),c=c.reverse(),c.__actions__.push({func:Hf,args:[Lp],thisArg:i}),new zr(c,this.__chain__)}return this.thru(Lp)}function FI(){return e_(this.__wrapped__,this.__actions__)}var NI=Rf(function(u,c,b){pt.call(u,b)?++u[b]:ma(u,b,1)});function UI(u,c,b){var A=it(u)?nr:IC;return b&&Hi(u,c,b)&&(c=i),A(u,We(c,3))}function BI(u,c){var b=it(u)?ri:N0;return b(u,We(c,3))}var jI=f_(L_),VI=f_(k_);function HI(u,c){return Ei($f(u,c),1)}function $I(u,c){return Ei($f(u,c),ne)}function WI(u,c,b){return b=b===i?1:at(b),Ei($f(u,c),b)}function B_(u,c){var b=it(u)?ci:os;return b(u,We(c,3))}function j_(u,c){var b=it(u)?Us:F0;return b(u,We(c,3))}var qI=Rf(function(u,c,b){pt.call(u,b)?u[b].push(c):ma(u,b,[c])});function GI(u,c,b,A){u=or(u)?u:ou(u),b=b&&!A?at(b):0;var k=u.length;return b<0&&(b=ui(k+b,0)),Kf(u)?b<=k&&u.indexOf(c,b)>-1:!!k&&$r(u,c,b)>-1}var zI=dt(function(u,c,b){var A=-1,k=typeof c=="function",U=or(u)?C(u.length):[];return os(u,function(K){U[++A]=k?oi(c,K,b):Ql(K,c,b)}),U}),KI=Rf(function(u,c,b){ma(u,b,c)});function $f(u,c){var b=it(u)?Dt:$0;return b(u,We(c,3))}function XI(u,c,b,A){return u==null?[]:(it(c)||(c=c==null?[]:[c]),b=A?i:b,it(b)||(b=b==null?[]:[b]),z0(u,c,b))}var QI=Rf(function(u,c,b){u[b?0:1].push(c)},function(){return[[],[]]});function YI(u,c,b){var A=it(u)?js:ns,k=arguments.length<3;return A(u,We(c,4),b,k,os)}function JI(u,c,b){var A=it(u)?Rl:ns,k=arguments.length<3;return A(u,We(c,4),b,k,F0)}function ZI(u,c){var b=it(u)?ri:N0;return b(u,Gf(We(c,3)))}function eP(u){var c=it(u)?L0:GC;return c(u)}function tP(u,c,b){(b?Hi(u,c,b):c===i)?c=1:c=at(c);var A=it(u)?SC:zC;return A(u,c)}function iP(u){var c=it(u)?EC:XC;return c(u)}function rP(u){if(u==null)return 0;if(or(u))return Kf(u)?qr(u):u.length;var c=ki(u);return c==J||c==be?u.size:dp(u).length}function nP(u,c,b){var A=it(u)?Vs:QC;return b&&Hi(u,c,b)&&(c=i),A(u,We(c,3))}var aP=dt(function(u,c){if(u==null)return[];var b=c.length;return b>1&&Hi(u,c[0],c[1])?c=[]:b>2&&Hi(c[0],c[1],c[2])&&(c=[c[0]]),z0(u,Ei(c,1),[])}),Wf=Bw||function(){return Xt.Date.now()};function sP(u,c){if(typeof c!="function")throw new Ze(s);return u=at(u),function(){if(--u<1)return c.apply(this,arguments)}}function V_(u,c,b){return c=b?i:c,c=u&&c==null?u.length:c,ga(u,z,i,i,i,i,c)}function H_(u,c){var b;if(typeof c!="function")throw new Ze(s);return u=at(u),function(){return--u>0&&(b=c.apply(this,arguments)),u<=1&&(c=i),b}}var Rp=dt(function(u,c,b){var A=D;if(b.length){var k=Wr(b,au(Rp));A|=W}return ga(u,A,c,b,k)}),$_=dt(function(u,c,b){var A=D|R;if(b.length){var k=Wr(b,au($_));A|=W}return ga(c,A,u,b,k)});function W_(u,c,b){c=b?i:c;var A=ga(u,Z,i,i,i,i,i,c);return A.placeholder=W_.placeholder,A}function q_(u,c,b){c=b?i:c;var A=ga(u,V,i,i,i,i,i,c);return A.placeholder=q_.placeholder,A}function G_(u,c,b){var A,k,U,K,Y,ie,ge=0,ve=!1,xe=!1,De=!0;if(typeof u!="function")throw new Ze(s);c=Yr(c)||0,Ht(b)&&(ve=!!b.leading,xe="maxWait"in b,U=xe?ui(Yr(b.maxWait)||0,c):U,De="trailing"in b?!!b.trailing:De);function Ne(Yt){var _n=A,ba=k;return A=k=i,ge=Yt,K=u.apply(ba,_n),K}function ze(Yt){return ge=Yt,Y=td(mt,c),ve?Ne(Yt):K}function ut(Yt){var _n=Yt-ie,ba=Yt-ge,fy=c-_n;return xe?Li(fy,U-ba):fy}function Ke(Yt){var _n=Yt-ie,ba=Yt-ge;return ie===i||_n>=c||_n<0||xe&&ba>=U}function mt(){var Yt=Wf();if(Ke(Yt))return yt(Yt);Y=td(mt,ut(Yt))}function yt(Yt){return Y=i,De&&A?Ne(Yt):(A=k=i,K)}function Ir(){Y!==i&&i_(Y),ge=0,A=ie=k=Y=i}function $i(){return Y===i?K:yt(Wf())}function Pr(){var Yt=Wf(),_n=Ke(Yt);if(A=arguments,k=this,ie=Yt,_n){if(Y===i)return ze(ie);if(xe)return i_(Y),Y=td(mt,c),Ne(ie)}return Y===i&&(Y=td(mt,c)),K}return Pr.cancel=Ir,Pr.flush=$i,Pr}var oP=dt(function(u,c){return M0(u,1,c)}),uP=dt(function(u,c,b){return M0(u,Yr(c)||0,b)});function lP(u){return ga(u,X)}function qf(u,c){if(typeof u!="function"||c!=null&&typeof c!="function")throw new Ze(s);var b=function(){var A=arguments,k=c?c.apply(this,A):A[0],U=b.cache;if(U.has(k))return U.get(k);var K=u.apply(this,A);return b.cache=U.set(k,K)||U,K};return b.cache=new(qf.Cache||pa),b}qf.Cache=pa;function Gf(u){if(typeof u!="function")throw new Ze(s);return function(){var c=arguments;switch(c.length){case 0:return!u.call(this);case 1:return!u.call(this,c[0]);case 2:return!u.call(this,c[0],c[1]);case 3:return!u.call(this,c[0],c[1],c[2])}return!u.apply(this,c)}}function dP(u){return H_(2,u)}var fP=YC(function(u,c){c=c.length==1&&it(c[0])?Dt(c[0],bi(We())):Dt(Ei(c,1),bi(We()));var b=c.length;return dt(function(A){for(var k=-1,U=Li(A.length,b);++k<U;)A[k]=c[k].call(this,A[k]);return oi(u,this,A)})}),Mp=dt(function(u,c){var b=Wr(c,au(Mp));return ga(u,W,i,c,b)}),z_=dt(function(u,c){var b=Wr(c,au(z_));return ga(u,te,i,c,b)}),cP=va(function(u,c){return ga(u,q,i,i,i,c)});function hP(u,c){if(typeof u!="function")throw new Ze(s);return c=c===i?c:at(c),dt(u,c)}function pP(u,c){if(typeof u!="function")throw new Ze(s);return c=c==null?0:ui(at(c),0),dt(function(b){var A=b[c],k=ds(b,0,c);return A&&Hr(k,A),oi(u,this,k)})}function mP(u,c,b){var A=!0,k=!0;if(typeof u!="function")throw new Ze(s);return Ht(b)&&(A="leading"in b?!!b.leading:A,k="trailing"in b?!!b.trailing:k),G_(u,c,{leading:A,maxWait:c,trailing:k})}function gP(u){return V_(u,1)}function vP(u,c){return Mp(yp(c),u)}function _P(){if(!arguments.length)return[];var u=arguments[0];return it(u)?u:[u]}function yP(u){return Kr(u,E)}function TP(u,c){return c=typeof c=="function"?c:i,Kr(u,E,c)}function bP(u){return Kr(u,v|E)}function xP(u,c){return c=typeof c=="function"?c:i,Kr(u,v|E,c)}function SP(u,c){return c==null||R0(u,c,hi(c))}function vn(u,c){return u===c||u!==u&&c!==c}var EP=Uf(op),wP=Uf(function(u,c){return u>=c}),to=j0(function(){return arguments}())?j0:function(u){return $t(u)&&pt.call(u,"callee")&&!C0.call(u,"callee")},it=C.isArray,CP=zo?bi(zo):RC;function or(u){return u!=null&&zf(u.length)&&!ya(u)}function Qt(u){return $t(u)&&or(u)}function AP(u){return u===!0||u===!1||$t(u)&&Vi(u)==Ct}var fs=Vw||Gp,IP=Ko?bi(Ko):MC;function PP(u){return $t(u)&&u.nodeType===1&&!id(u)}function OP(u){if(u==null)return!0;if(or(u)&&(it(u)||typeof u=="string"||typeof u.splice=="function"||fs(u)||su(u)||to(u)))return!u.length;var c=ki(u);if(c==J||c==be)return!u.size;if(ed(u))return!dp(u).length;for(var b in u)if(pt.call(u,b))return!1;return!0}function DP(u,c){return Yl(u,c)}function LP(u,c,b){b=typeof b=="function"?b:i;var A=b?b(u,c):i;return A===i?Yl(u,c,i,b):!!A}function Fp(u){if(!$t(u))return!1;var c=Vi(u);return c==fi||c==Gt||typeof u.message=="string"&&typeof u.name=="string"&&!id(u)}function kP(u){return typeof u=="number"&&I0(u)}function ya(u){if(!Ht(u))return!1;var c=Vi(u);return c==yi||c==G||c==wt||c==ue}function K_(u){return typeof u=="number"&&u==at(u)}function zf(u){return typeof u=="number"&&u>-1&&u%1==0&&u<=fe}function Ht(u){var c=typeof u;return u!=null&&(c=="object"||c=="function")}function $t(u){return u!=null&&typeof u=="object"}var X_=Ja?bi(Ja):NC;function RP(u,c){return u===c||lp(u,c,Cp(c))}function MP(u,c,b){return b=typeof b=="function"?b:i,lp(u,c,Cp(c),b)}function FP(u){return Q_(u)&&u!=+u}function NP(u){if(TA(u))throw new B(n);return V0(u)}function UP(u){return u===null}function BP(u){return u==null}function Q_(u){return typeof u=="number"||$t(u)&&Vi(u)==de}function id(u){if(!$t(u)||Vi(u)!=ce)return!1;var c=Tf(u);if(c===null)return!0;var b=pt.call(c,"constructor")&&c.constructor;return typeof b=="function"&&b instanceof b&&Bn.call(b)==Si}var Np=Xo?bi(Xo):UC;function jP(u){return K_(u)&&u>=-fe&&u<=fe}var Y_=Za?bi(Za):BC;function Kf(u){return typeof u=="string"||!it(u)&&$t(u)&&Vi(u)==_e}function Ar(u){return typeof u=="symbol"||$t(u)&&Vi(u)==Re}var su=Qo?bi(Qo):jC;function VP(u){return u===i}function HP(u){return $t(u)&&ki(u)==Me}function $P(u){return $t(u)&&Vi(u)==je}var WP=Uf(fp),qP=Uf(function(u,c){return u<=c});function J_(u){if(!u)return[];if(or(u))return Kf(u)?x(u):sr(u);if($l&&u[$l])return qs(u[$l]());var c=ki(u),b=c==J?Gs:c==be?as:ou;return b(u)}function Ta(u){if(!u)return u===0?u:0;if(u=Yr(u),u===ne||u===-ne){var c=u<0?-1:1;return c*Ie}return u===u?u:0}function at(u){var c=Ta(u),b=c%1;return c===c?b?c-b:c:0}function Z_(u){return u?Ys(at(u),0,Xe):0}function Yr(u){if(typeof u=="number")return u;if(Ar(u))return Ce;if(Ht(u)){var c=typeof u.valueOf=="function"?u.valueOf():u;u=Ht(c)?c+"":c}if(typeof u!="string")return u===0?u:+u;u=Yo(u);var b=ht.test(u);return b||yl.test(u)?Ll(u.slice(2),b?2:8):nn.test(u)?Ce:+u}function ey(u){return Hn(u,ur(u))}function GP(u){return u?Ys(at(u),-fe,fe):u===0?u:0}function It(u){return u==null?"":Cr(u)}var zP=ru(function(u,c){if(ed(c)||or(c)){Hn(c,hi(c),u);return}for(var b in c)pt.call(c,b)&&Kl(u,b,c[b])}),ty=ru(function(u,c){Hn(c,ur(c),u)}),Xf=ru(function(u,c,b,A){Hn(c,ur(c),u,A)}),KP=ru(function(u,c,b,A){Hn(c,hi(c),u,A)}),XP=va(np);function QP(u,c){var b=iu(u);return c==null?b:k0(b,c)}var YP=dt(function(u,c){u=Q(u);var b=-1,A=c.length,k=A>2?c[2]:i;for(k&&Hi(c[0],c[1],k)&&(A=1);++b<A;)for(var U=c[b],K=ur(U),Y=-1,ie=K.length;++Y<ie;){var ge=K[Y],ve=u[ge];(ve===i||vn(ve,Gr[ge])&&!pt.call(u,ge))&&(u[ge]=U[ge])}return u}),JP=dt(function(u){return u.push(i,__),oi(iy,i,u)});function ZP(u,c){return ar(u,We(c,3),Vn)}function eO(u,c){return ar(u,We(c,3),sp)}function tO(u,c){return u==null?u:ap(u,We(c,3),ur)}function iO(u,c){return u==null?u:U0(u,We(c,3),ur)}function rO(u,c){return u&&Vn(u,We(c,3))}function nO(u,c){return u&&sp(u,We(c,3))}function aO(u){return u==null?[]:Of(u,hi(u))}function sO(u){return u==null?[]:Of(u,ur(u))}function Up(u,c,b){var A=u==null?i:Js(u,c);return A===i?b:A}function oO(u,c){return u!=null&&b_(u,c,OC)}function Bp(u,c){return u!=null&&b_(u,c,DC)}var uO=h_(function(u,c,b){c!=null&&typeof c.toString!="function"&&(c=jn.call(c)),u[c]=b},Vp(lr)),lO=h_(function(u,c,b){c!=null&&typeof c.toString!="function"&&(c=jn.call(c)),pt.call(u,c)?u[c].push(b):u[c]=[b]},We),dO=dt(Ql);function hi(u){return or(u)?D0(u):dp(u)}function ur(u){return or(u)?D0(u,!0):VC(u)}function fO(u,c){var b={};return c=We(c,3),Vn(u,function(A,k,U){ma(b,c(A,k,U),A)}),b}function cO(u,c){var b={};return c=We(c,3),Vn(u,function(A,k,U){ma(b,k,c(A,k,U))}),b}var hO=ru(function(u,c,b){Df(u,c,b)}),iy=ru(function(u,c,b,A){Df(u,c,b,A)}),pO=va(function(u,c){var b={};if(u==null)return b;var A=!1;c=Dt(c,function(U){return U=ls(U,u),A||(A=U.length>1),U}),Hn(u,Ep(u),b),A&&(b=Kr(b,v|y|E,uA));for(var k=c.length;k--;)gp(b,c[k]);return b});function mO(u,c){return ry(u,Gf(We(c)))}var gO=va(function(u,c){return u==null?{}:$C(u,c)});function ry(u,c){if(u==null)return{};var b=Dt(Ep(u),function(A){return[A]});return c=We(c),K0(u,b,function(A,k){return c(A,k[0])})}function vO(u,c,b){c=ls(c,u);var A=-1,k=c.length;for(k||(k=1,u=i);++A<k;){var U=u==null?i:u[$n(c[A])];U===i&&(A=k,U=b),u=ya(U)?U.call(u):U}return u}function _O(u,c,b){return u==null?u:Jl(u,c,b)}function yO(u,c,b,A){return A=typeof A=="function"?A:i,u==null?u:Jl(u,c,b,A)}var ny=g_(hi),ay=g_(ur);function TO(u,c,b){var A=it(u),k=A||fs(u)||su(u);if(c=We(c,4),b==null){var U=u&&u.constructor;k?b=A?new U:[]:Ht(u)?b=ya(U)?iu(Tf(u)):{}:b={}}return(k?ci:Vn)(u,function(K,Y,ie){return c(b,K,Y,ie)}),b}function bO(u,c){return u==null?!0:gp(u,c)}function xO(u,c,b){return u==null?u:Z0(u,c,yp(b))}function SO(u,c,b,A){return A=typeof A=="function"?A:i,u==null?u:Z0(u,c,yp(b),A)}function ou(u){return u==null?[]:Ws(u,hi(u))}function EO(u){return u==null?[]:Ws(u,ur(u))}function wO(u,c,b){return b===i&&(b=c,c=i),b!==i&&(b=Yr(b),b=b===b?b:0),c!==i&&(c=Yr(c),c=c===c?c:0),Ys(Yr(u),c,b)}function CO(u,c,b){return c=Ta(c),b===i?(b=c,c=0):b=Ta(b),u=Yr(u),LC(u,c,b)}function AO(u,c,b){if(b&&typeof b!="boolean"&&Hi(u,c,b)&&(c=b=i),b===i&&(typeof c=="boolean"?(b=c,c=i):typeof u=="boolean"&&(b=u,u=i)),u===i&&c===i?(u=0,c=1):(u=Ta(u),c===i?(c=u,u=0):c=Ta(c)),u>c){var A=u;u=c,c=A}if(b||u%1||c%1){var k=P0();return Li(u+k*(c-u+Dl("1e-"+((k+"").length-1))),c)}return hp(u,c)}var IO=nu(function(u,c,b){return c=c.toLowerCase(),u+(b?sy(c):c)});function sy(u){return jp(It(u).toLowerCase())}function oy(u){return u=It(u),u&&u.replace(oa,ji).replace(Cl,"")}function PO(u,c,b){u=It(u),c=Cr(c);var A=u.length;b=b===i?A:Ys(at(b),0,A);var k=b;return b-=c.length,b>=0&&u.slice(b,k)==c}function OO(u){return u=It(u),u&&fl.test(u)?u.replace(Mt,Fe):u}function DO(u){return u=It(u),u&&ml.test(u)?u.replace(Ps,"\\$&"):u}var LO=nu(function(u,c,b){return u+(b?"-":"")+c.toLowerCase()}),kO=nu(function(u,c,b){return u+(b?" ":"")+c.toLowerCase()}),RO=d_("toLowerCase");function MO(u,c,b){u=It(u),c=at(c);var A=c?qr(u):0;if(!c||A>=c)return u;var k=(c-A)/2;return Nf(Ef(k),b)+u+Nf(Sf(k),b)}function FO(u,c,b){u=It(u),c=at(c);var A=c?qr(u):0;return c&&A<c?u+Nf(c-A,b):u}function NO(u,c,b){u=It(u),c=at(c);var A=c?qr(u):0;return c&&A<c?Nf(c-A,b)+u:u}function UO(u,c,b){return b||c==null?c=0:c&&(c=+c),qw(It(u).replace(yr,""),c||0)}function BO(u,c,b){return(b?Hi(u,c,b):c===i)?c=1:c=at(c),pp(It(u),c)}function jO(){var u=arguments,c=It(u[0]);return u.length<3?c:c.replace(u[1],u[2])}var VO=nu(function(u,c,b){return u+(b?"_":"")+c.toLowerCase()});function HO(u,c,b){return b&&typeof b!="number"&&Hi(u,c,b)&&(c=b=i),b=b===i?Xe:b>>>0,b?(u=It(u),u&&(typeof c=="string"||c!=null&&!Np(c))&&(c=Cr(c),!c&&Lt(u))?ds(x(u),0,b):u.split(c,b)):[]}var $O=nu(function(u,c,b){return u+(b?" ":"")+jp(c)});function WO(u,c,b){return u=It(u),b=b==null?0:Ys(at(b),0,u.length),c=Cr(c),u.slice(b,b+c.length)==c}function qO(u,c,b){var A=M.templateSettings;b&&Hi(u,c,b)&&(c=i),u=It(u),c=Xf({},c,A,v_);var k=Xf({},c.imports,A.imports,v_),U=hi(k),K=Ws(k,U),Y,ie,ge=0,ve=c.interpolate||Rn,xe="__p += '",De=ye((c.escape||Rn).source+"|"+ve.source+"|"+(ve===Mo?Ti:Rn).source+"|"+(c.evaluate||Rn).source+"|$","g"),Ne="//# sourceURL="+(pt.call(c,"sourceURL")?(c.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Bi+"]")+`
`;u.replace(De,function(Ke,mt,yt,Ir,$i,Pr){return yt||(yt=Ir),xe+=u.slice(ge,Pr).replace(Ds,xi),mt&&(Y=!0,xe+=`' +
__e(`+mt+`) +
'`),$i&&(ie=!0,xe+=`';
`+$i+`;
__p += '`),yt&&(xe+=`' +
((__t = (`+yt+`)) == null ? '' : __t) +
'`),ge=Pr+Ke.length,Ke}),xe+=`';
`;var ze=pt.call(c,"variable")&&c.variable;if(!ze)xe=`with (obj) {
`+xe+`
}
`;else if(rn.test(ze))throw new B(o);xe=(ie?xe.replace(Ga,""):xe).replace(ll,"$1").replace(dl,"$1;"),xe="function("+(ze||"obj")+`) {
`+(ze?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Y?", __e = _.escape":"")+(ie?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+xe+`return __p
}`;var ut=ly(function(){return ee(U,Ne+"return "+xe).apply(i,K)});if(ut.source=xe,Fp(ut))throw ut;return ut}function GO(u){return It(u).toLowerCase()}function zO(u){return It(u).toUpperCase()}function KO(u,c,b){if(u=It(u),u&&(b||c===i))return Yo(u);if(!u||!(c=Cr(c)))return u;var A=x(u),k=x(c),U=Nn(A,k),K=Jo(A,k)+1;return ds(A,U,K).join("")}function XO(u,c,b){if(u=It(u),u&&(b||c===i))return u.slice(0,d(u)+1);if(!u||!(c=Cr(c)))return u;var A=x(u),k=Jo(A,x(c))+1;return ds(A,0,k).join("")}function QO(u,c,b){if(u=It(u),u&&(b||c===i))return u.replace(yr,"");if(!u||!(c=Cr(c)))return u;var A=x(u),k=Nn(A,x(c));return ds(A,k).join("")}function YO(u,c){var b=j,A=oe;if(Ht(c)){var k="separator"in c?c.separator:k;b="length"in c?at(c.length):b,A="omission"in c?Cr(c.omission):A}u=It(u);var U=u.length;if(Lt(u)){var K=x(u);U=K.length}if(b>=U)return u;var Y=b-qr(A);if(Y<1)return A;var ie=K?ds(K,0,Y).join(""):u.slice(0,Y);if(k===i)return ie+A;if(K&&(Y+=ie.length-Y),Np(k)){if(u.slice(Y).search(k)){var ge,ve=ie;for(k.global||(k=ye(k.source,It(Ge.exec(k))+"g")),k.lastIndex=0;ge=k.exec(ve);)var xe=ge.index;ie=ie.slice(0,xe===i?Y:xe)}}else if(u.indexOf(Cr(k),Y)!=Y){var De=ie.lastIndexOf(k);De>-1&&(ie=ie.slice(0,De))}return ie+A}function JO(u){return u=It(u),u&&Is.test(u)?u.replace(Ro,p):u}var ZO=nu(function(u,c,b){return u+(b?" ":"")+c.toUpperCase()}),jp=d_("toUpperCase");function uy(u,c,b){return u=It(u),c=b?i:c,c===i?Bl(u)?_(u):pn(u):u.match(c)||[]}var ly=dt(function(u,c){try{return oi(u,i,c)}catch(b){return Fp(b)?b:new B(b)}}),eD=va(function(u,c){return ci(c,function(b){b=$n(b),ma(u,b,Rp(u[b],u))}),u});function tD(u){var c=u==null?0:u.length,b=We();return u=c?Dt(u,function(A){if(typeof A[1]!="function")throw new Ze(s);return[b(A[0]),A[1]]}):[],dt(function(A){for(var k=-1;++k<c;){var U=u[k];if(oi(U[0],this,A))return oi(U[1],this,A)}})}function iD(u){return AC(Kr(u,v))}function Vp(u){return function(){return u}}function rD(u,c){return u==null||u!==u?c:u}var nD=c_(),aD=c_(!0);function lr(u){return u}function Hp(u){return H0(typeof u=="function"?u:Kr(u,v))}function sD(u){return W0(Kr(u,v))}function oD(u,c){return q0(u,Kr(c,v))}var uD=dt(function(u,c){return function(b){return Ql(b,u,c)}}),lD=dt(function(u,c){return function(b){return Ql(u,b,c)}});function $p(u,c,b){var A=hi(c),k=Of(c,A);b==null&&!(Ht(c)&&(k.length||!A.length))&&(b=c,c=u,u=this,k=Of(c,hi(c)));var U=!(Ht(b)&&"chain"in b)||!!b.chain,K=ya(u);return ci(k,function(Y){var ie=c[Y];u[Y]=ie,K&&(u.prototype[Y]=function(){var ge=this.__chain__;if(U||ge){var ve=u(this.__wrapped__),xe=ve.__actions__=sr(this.__actions__);return xe.push({func:ie,args:arguments,thisArg:u}),ve.__chain__=ge,ve}return ie.apply(u,Hr([this.value()],arguments))})}),u}function dD(){return Xt._===this&&(Xt._=Fw),this}function Wp(){}function fD(u){return u=at(u),dt(function(c){return G0(c,u)})}var cD=bp(Dt),hD=bp(nr),pD=bp(Vs);function dy(u){return Ip(u)?da($n(u)):WC(u)}function mD(u){return function(c){return u==null?i:Js(u,c)}}var gD=p_(),vD=p_(!0);function qp(){return[]}function Gp(){return!1}function _D(){return{}}function yD(){return""}function TD(){return!0}function bD(u,c){if(u=at(u),u<1||u>fe)return[];var b=Xe,A=Li(u,Xe);c=We(c),u-=Xe;for(var k=wr(A,c);++b<u;)c(b);return k}function xD(u){return it(u)?Dt(u,$n):Ar(u)?[u]:sr(O_(It(u)))}function SD(u){var c=++zs;return It(u)+c}var ED=Ff(function(u,c){return u+c},0),wD=xp("ceil"),CD=Ff(function(u,c){return u/c},1),AD=xp("floor");function ID(u){return u&&u.length?Pf(u,lr,op):i}function PD(u,c){return u&&u.length?Pf(u,We(c,2),op):i}function OD(u){return rs(u,lr)}function DD(u,c){return rs(u,We(c,2))}function LD(u){return u&&u.length?Pf(u,lr,fp):i}function kD(u,c){return u&&u.length?Pf(u,We(c,2),fp):i}var RD=Ff(function(u,c){return u*c},1),MD=xp("round"),FD=Ff(function(u,c){return u-c},0);function ND(u){return u&&u.length?Er(u,lr):0}function UD(u,c){return u&&u.length?Er(u,We(c,2)):0}return M.after=sP,M.ary=V_,M.assign=zP,M.assignIn=ty,M.assignInWith=Xf,M.assignWith=KP,M.at=XP,M.before=H_,M.bind=Rp,M.bindAll=eD,M.bindKey=$_,M.castArray=_P,M.chain=U_,M.chunk=AA,M.compact=IA,M.concat=PA,M.cond=tD,M.conforms=iD,M.constant=Vp,M.countBy=NI,M.create=QP,M.curry=W_,M.curryRight=q_,M.debounce=G_,M.defaults=YP,M.defaultsDeep=JP,M.defer=oP,M.delay=uP,M.difference=OA,M.differenceBy=DA,M.differenceWith=LA,M.drop=kA,M.dropRight=RA,M.dropRightWhile=MA,M.dropWhile=FA,M.fill=NA,M.filter=BI,M.flatMap=HI,M.flatMapDeep=$I,M.flatMapDepth=WI,M.flatten=R_,M.flattenDeep=UA,M.flattenDepth=BA,M.flip=lP,M.flow=nD,M.flowRight=aD,M.fromPairs=jA,M.functions=aO,M.functionsIn=sO,M.groupBy=qI,M.initial=HA,M.intersection=$A,M.intersectionBy=WA,M.intersectionWith=qA,M.invert=uO,M.invertBy=lO,M.invokeMap=zI,M.iteratee=Hp,M.keyBy=KI,M.keys=hi,M.keysIn=ur,M.map=$f,M.mapKeys=fO,M.mapValues=cO,M.matches=sD,M.matchesProperty=oD,M.memoize=qf,M.merge=hO,M.mergeWith=iy,M.method=uD,M.methodOf=lD,M.mixin=$p,M.negate=Gf,M.nthArg=fD,M.omit=pO,M.omitBy=mO,M.once=dP,M.orderBy=XI,M.over=cD,M.overArgs=fP,M.overEvery=hD,M.overSome=pD,M.partial=Mp,M.partialRight=z_,M.partition=QI,M.pick=gO,M.pickBy=ry,M.property=dy,M.propertyOf=mD,M.pull=XA,M.pullAll=F_,M.pullAllBy=QA,M.pullAllWith=YA,M.pullAt=JA,M.range=gD,M.rangeRight=vD,M.rearg=cP,M.reject=ZI,M.remove=ZA,M.rest=hP,M.reverse=Lp,M.sampleSize=tP,M.set=_O,M.setWith=yO,M.shuffle=iP,M.slice=eI,M.sortBy=aP,M.sortedUniq=oI,M.sortedUniqBy=uI,M.split=HO,M.spread=pP,M.tail=lI,M.take=dI,M.takeRight=fI,M.takeRightWhile=cI,M.takeWhile=hI,M.tap=II,M.throttle=mP,M.thru=Hf,M.toArray=J_,M.toPairs=ny,M.toPairsIn=ay,M.toPath=xD,M.toPlainObject=ey,M.transform=TO,M.unary=gP,M.union=pI,M.unionBy=mI,M.unionWith=gI,M.uniq=vI,M.uniqBy=_I,M.uniqWith=yI,M.unset=bO,M.unzip=kp,M.unzipWith=N_,M.update=xO,M.updateWith=SO,M.values=ou,M.valuesIn=EO,M.without=TI,M.words=uy,M.wrap=vP,M.xor=bI,M.xorBy=xI,M.xorWith=SI,M.zip=EI,M.zipObject=wI,M.zipObjectDeep=CI,M.zipWith=AI,M.entries=ny,M.entriesIn=ay,M.extend=ty,M.extendWith=Xf,$p(M,M),M.add=ED,M.attempt=ly,M.camelCase=IO,M.capitalize=sy,M.ceil=wD,M.clamp=wO,M.clone=yP,M.cloneDeep=bP,M.cloneDeepWith=xP,M.cloneWith=TP,M.conformsTo=SP,M.deburr=oy,M.defaultTo=rD,M.divide=CD,M.endsWith=PO,M.eq=vn,M.escape=OO,M.escapeRegExp=DO,M.every=UI,M.find=jI,M.findIndex=L_,M.findKey=ZP,M.findLast=VI,M.findLastIndex=k_,M.findLastKey=eO,M.floor=AD,M.forEach=B_,M.forEachRight=j_,M.forIn=tO,M.forInRight=iO,M.forOwn=rO,M.forOwnRight=nO,M.get=Up,M.gt=EP,M.gte=wP,M.has=oO,M.hasIn=Bp,M.head=M_,M.identity=lr,M.includes=GI,M.indexOf=VA,M.inRange=CO,M.invoke=dO,M.isArguments=to,M.isArray=it,M.isArrayBuffer=CP,M.isArrayLike=or,M.isArrayLikeObject=Qt,M.isBoolean=AP,M.isBuffer=fs,M.isDate=IP,M.isElement=PP,M.isEmpty=OP,M.isEqual=DP,M.isEqualWith=LP,M.isError=Fp,M.isFinite=kP,M.isFunction=ya,M.isInteger=K_,M.isLength=zf,M.isMap=X_,M.isMatch=RP,M.isMatchWith=MP,M.isNaN=FP,M.isNative=NP,M.isNil=BP,M.isNull=UP,M.isNumber=Q_,M.isObject=Ht,M.isObjectLike=$t,M.isPlainObject=id,M.isRegExp=Np,M.isSafeInteger=jP,M.isSet=Y_,M.isString=Kf,M.isSymbol=Ar,M.isTypedArray=su,M.isUndefined=VP,M.isWeakMap=HP,M.isWeakSet=$P,M.join=GA,M.kebabCase=LO,M.last=Qr,M.lastIndexOf=zA,M.lowerCase=kO,M.lowerFirst=RO,M.lt=WP,M.lte=qP,M.max=ID,M.maxBy=PD,M.mean=OD,M.meanBy=DD,M.min=LD,M.minBy=kD,M.stubArray=qp,M.stubFalse=Gp,M.stubObject=_D,M.stubString=yD,M.stubTrue=TD,M.multiply=RD,M.nth=KA,M.noConflict=dD,M.noop=Wp,M.now=Wf,M.pad=MO,M.padEnd=FO,M.padStart=NO,M.parseInt=UO,M.random=AO,M.reduce=YI,M.reduceRight=JI,M.repeat=BO,M.replace=jO,M.result=vO,M.round=MD,M.runInContext=S,M.sample=eP,M.size=rP,M.snakeCase=VO,M.some=nP,M.sortedIndex=tI,M.sortedIndexBy=iI,M.sortedIndexOf=rI,M.sortedLastIndex=nI,M.sortedLastIndexBy=aI,M.sortedLastIndexOf=sI,M.startCase=$O,M.startsWith=WO,M.subtract=FD,M.sum=ND,M.sumBy=UD,M.template=qO,M.times=bD,M.toFinite=Ta,M.toInteger=at,M.toLength=Z_,M.toLower=GO,M.toNumber=Yr,M.toSafeInteger=GP,M.toString=It,M.toUpper=zO,M.trim=KO,M.trimEnd=XO,M.trimStart=QO,M.truncate=YO,M.unescape=JO,M.uniqueId=SD,M.upperCase=ZO,M.upperFirst=jp,M.each=B_,M.eachRight=j_,M.first=M_,$p(M,function(){var u={};return Vn(M,function(c,b){pt.call(M.prototype,b)||(u[b]=c)}),u}(),{chain:!1}),M.VERSION=r,ci(["bind","bindKey","curry","curryRight","partial","partialRight"],function(u){M[u].placeholder=M}),ci(["drop","take"],function(u,c){vt.prototype[u]=function(b){b=b===i?1:ui(at(b),0);var A=this.__filtered__&&!c?new vt(this):this.clone();return A.__filtered__?A.__takeCount__=Li(b,A.__takeCount__):A.__views__.push({size:Li(b,Xe),type:u+(A.__dir__<0?"Right":"")}),A},vt.prototype[u+"Right"]=function(b){return this.reverse()[u](b).reverse()}}),ci(["filter","map","takeWhile"],function(u,c){var b=c+1,A=b==he||b==pe;vt.prototype[u]=function(k){var U=this.clone();return U.__iteratees__.push({iteratee:We(k,3),type:b}),U.__filtered__=U.__filtered__||A,U}}),ci(["head","last"],function(u,c){var b="take"+(c?"Right":"");vt.prototype[u]=function(){return this[b](1).value()[0]}}),ci(["initial","tail"],function(u,c){var b="drop"+(c?"":"Right");vt.prototype[u]=function(){return this.__filtered__?new vt(this):this[b](1)}}),vt.prototype.compact=function(){return this.filter(lr)},vt.prototype.find=function(u){return this.filter(u).head()},vt.prototype.findLast=function(u){return this.reverse().find(u)},vt.prototype.invokeMap=dt(function(u,c){return typeof u=="function"?new vt(this):this.map(function(b){return Ql(b,u,c)})}),vt.prototype.reject=function(u){return this.filter(Gf(We(u)))},vt.prototype.slice=function(u,c){u=at(u);var b=this;return b.__filtered__&&(u>0||c<0)?new vt(b):(u<0?b=b.takeRight(-u):u&&(b=b.drop(u)),c!==i&&(c=at(c),b=c<0?b.dropRight(-c):b.take(c-u)),b)},vt.prototype.takeRightWhile=function(u){return this.reverse().takeWhile(u).reverse()},vt.prototype.toArray=function(){return this.take(Xe)},Vn(vt.prototype,function(u,c){var b=/^(?:filter|find|map|reject)|While$/.test(c),A=/^(?:head|last)$/.test(c),k=M[A?"take"+(c=="last"?"Right":""):c],U=A||/^find/.test(c);k&&(M.prototype[c]=function(){var K=this.__wrapped__,Y=A?[1]:arguments,ie=K instanceof vt,ge=Y[0],ve=ie||it(K),xe=function(mt){var yt=k.apply(M,Hr([mt],Y));return A&&De?yt[0]:yt};ve&&b&&typeof ge=="function"&&ge.length!=1&&(ie=ve=!1);var De=this.__chain__,Ne=!!this.__actions__.length,ze=U&&!De,ut=ie&&!Ne;if(!U&&ve){K=ut?K:new vt(this);var Ke=u.apply(K,Y);return Ke.__actions__.push({func:Hf,args:[xe],thisArg:i}),new zr(Ke,De)}return ze&&ut?u.apply(this,Y):(Ke=this.thru(xe),ze?A?Ke.value()[0]:Ke.value():Ke)})}),ci(["pop","push","shift","sort","splice","unshift"],function(u){var c=ni[u],b=/^(?:push|sort|unshift)$/.test(u)?"tap":"thru",A=/^(?:pop|shift)$/.test(u);M.prototype[u]=function(){var k=arguments;if(A&&!this.__chain__){var U=this.value();return c.apply(it(U)?U:[],k)}return this[b](function(K){return c.apply(it(K)?K:[],k)})}}),Vn(vt.prototype,function(u,c){var b=M[c];if(b){var A=b.name+"";pt.call(tu,A)||(tu[A]=[]),tu[A].push({name:c,func:b})}}),tu[Mf(i,R).name]=[{name:"wrapper",func:i}],vt.prototype.clone=Jw,vt.prototype.reverse=Zw,vt.prototype.value=eC,M.prototype.at=PI,M.prototype.chain=OI,M.prototype.commit=DI,M.prototype.next=LI,M.prototype.plant=RI,M.prototype.reverse=MI,M.prototype.toJSON=M.prototype.valueOf=M.prototype.value=FI,M.prototype.first=M.prototype.head,$l&&(M.prototype[$l]=kI),M},w=T();hn?((hn.exports=w)._=w,si._=w):Xt._=w}).call(Qn)})(eM,co);const tM={get:co.get,round:co.round,cloneDeep:co.cloneDeep,isEqual:co.isEqual};var qm={},iM={get exports(){return qm},set exports(a){qm=a}};(function(a,t){(function(i,r){a.exports=r()})(Qn,function(){var i=1e3,r=6e4,e=36e5,n="millisecond",s="second",o="minute",l="hour",f="day",m="week",v="month",y="quarter",E="year",I="date",O="Invalid Date",D=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,R=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,H={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(se){var he=["th","st","nd","rd"],le=se%100;return"["+se+(he[(le-20)%10]||he[le]||he[0])+"]"}},Z=function(se,he,le){var pe=String(se);return!pe||pe.length>=he?se:""+Array(he+1-pe.length).join(le)+se},V={s:Z,z:function(se){var he=-se.utcOffset(),le=Math.abs(he),pe=Math.floor(le/60),ne=le%60;return(he<=0?"+":"-")+Z(pe,2,"0")+":"+Z(ne,2,"0")},m:function se(he,le){if(he.date()<le.date())return-se(le,he);var pe=12*(le.year()-he.year())+(le.month()-he.month()),ne=he.clone().add(pe,v),fe=le-ne<0,Ie=he.clone().add(pe+(fe?-1:1),v);return+(-(pe+(le-ne)/(fe?ne-Ie:Ie-ne))||0)},a:function(se){return se<0?Math.ceil(se)||0:Math.floor(se)},p:function(se){return{M:v,y:E,w:m,d:f,D:I,h:l,m:o,s:s,ms:n,Q:y}[se]||String(se||"").toLowerCase().replace(/s$/,"")},u:function(se){return se===void 0}},W="en",te={};te[W]=H;var z=function(se){return se instanceof oe},q=function se(he,le,pe){var ne;if(!he)return W;if(typeof he=="string"){var fe=he.toLowerCase();te[fe]&&(ne=fe),le&&(te[fe]=le,ne=fe);var Ie=he.split("-");if(!ne&&Ie.length>1)return se(Ie[0])}else{var Ce=he.name;te[Ce]=he,ne=Ce}return!pe&&ne&&(W=ne),ne||!pe&&W},X=function(se,he){if(z(se))return se.clone();var le=typeof he=="object"?he:{};return le.date=se,le.args=arguments,new oe(le)},j=V;j.l=q,j.i=z,j.w=function(se,he){return X(se,{locale:he.$L,utc:he.$u,x:he.$x,$offset:he.$offset})};var oe=function(){function se(le){this.$L=q(le.locale,null,!0),this.parse(le)}var he=se.prototype;return he.parse=function(le){this.$d=function(pe){var ne=pe.date,fe=pe.utc;if(ne===null)return new Date(NaN);if(j.u(ne))return new Date;if(ne instanceof Date)return new Date(ne);if(typeof ne=="string"&&!/Z$/i.test(ne)){var Ie=ne.match(D);if(Ie){var Ce=Ie[2]-1||0,Xe=(Ie[7]||"0").substring(0,3);return fe?new Date(Date.UTC(Ie[1],Ce,Ie[3]||1,Ie[4]||0,Ie[5]||0,Ie[6]||0,Xe)):new Date(Ie[1],Ce,Ie[3]||1,Ie[4]||0,Ie[5]||0,Ie[6]||0,Xe)}}return new Date(ne)}(le),this.$x=le.x||{},this.init()},he.init=function(){var le=this.$d;this.$y=le.getFullYear(),this.$M=le.getMonth(),this.$D=le.getDate(),this.$W=le.getDay(),this.$H=le.getHours(),this.$m=le.getMinutes(),this.$s=le.getSeconds(),this.$ms=le.getMilliseconds()},he.$utils=function(){return j},he.isValid=function(){return this.$d.toString()!==O},he.isSame=function(le,pe){var ne=X(le);return this.startOf(pe)<=ne&&ne<=this.endOf(pe)},he.isAfter=function(le,pe){return X(le)<this.startOf(pe)},he.isBefore=function(le,pe){return this.endOf(pe)<X(le)},he.$g=function(le,pe,ne){return j.u(le)?this[pe]:this.set(ne,le)},he.unix=function(){return Math.floor(this.valueOf()/1e3)},he.valueOf=function(){return this.$d.getTime()},he.startOf=function(le,pe){var ne=this,fe=!!j.u(pe)||pe,Ie=j.p(le),Ce=function(Ct,ct){var Gt=j.w(ne.$u?Date.UTC(ne.$y,ct,Ct):new Date(ne.$y,ct,Ct),ne);return fe?Gt:Gt.endOf(f)},Xe=function(Ct,ct){return j.w(ne.toDate()[Ct].apply(ne.toDate("s"),(fe?[0,0,0,0]:[23,59,59,999]).slice(ct)),ne)},Be=this.$W,Qe=this.$M,Et=this.$D,Tt="set"+(this.$u?"UTC":"");switch(Ie){case E:return fe?Ce(1,0):Ce(31,11);case v:return fe?Ce(1,Qe):Ce(0,Qe+1);case m:var bt=this.$locale().weekStart||0,wt=(Be<bt?Be+7:Be)-bt;return Ce(fe?Et-wt:Et+(6-wt),Qe);case f:case I:return Xe(Tt+"Hours",0);case l:return Xe(Tt+"Minutes",1);case o:return Xe(Tt+"Seconds",2);case s:return Xe(Tt+"Milliseconds",3);default:return this.clone()}},he.endOf=function(le){return this.startOf(le,!1)},he.$set=function(le,pe){var ne,fe=j.p(le),Ie="set"+(this.$u?"UTC":""),Ce=(ne={},ne[f]=Ie+"Date",ne[I]=Ie+"Date",ne[v]=Ie+"Month",ne[E]=Ie+"FullYear",ne[l]=Ie+"Hours",ne[o]=Ie+"Minutes",ne[s]=Ie+"Seconds",ne[n]=Ie+"Milliseconds",ne)[fe],Xe=fe===f?this.$D+(pe-this.$W):pe;if(fe===v||fe===E){var Be=this.clone().set(I,1);Be.$d[Ce](Xe),Be.init(),this.$d=Be.set(I,Math.min(this.$D,Be.daysInMonth())).$d}else Ce&&this.$d[Ce](Xe);return this.init(),this},he.set=function(le,pe){return this.clone().$set(le,pe)},he.get=function(le){return this[j.p(le)]()},he.add=function(le,pe){var ne,fe=this;le=Number(le);var Ie=j.p(pe),Ce=function(Qe){var Et=X(fe);return j.w(Et.date(Et.date()+Math.round(Qe*le)),fe)};if(Ie===v)return this.set(v,this.$M+le);if(Ie===E)return this.set(E,this.$y+le);if(Ie===f)return Ce(1);if(Ie===m)return Ce(7);var Xe=(ne={},ne[o]=r,ne[l]=e,ne[s]=i,ne)[Ie]||1,Be=this.$d.getTime()+le*Xe;return j.w(Be,this)},he.subtract=function(le,pe){return this.add(-1*le,pe)},he.format=function(le){var pe=this,ne=this.$locale();if(!this.isValid())return ne.invalidDate||O;var fe=le||"YYYY-MM-DDTHH:mm:ssZ",Ie=j.z(this),Ce=this.$H,Xe=this.$m,Be=this.$M,Qe=ne.weekdays,Et=ne.months,Tt=function(ct,Gt,fi,yi){return ct&&(ct[Gt]||ct(pe,fe))||fi[Gt].slice(0,yi)},bt=function(ct){return j.s(Ce%12||12,ct,"0")},wt=ne.meridiem||function(ct,Gt,fi){var yi=ct<12?"AM":"PM";return fi?yi.toLowerCase():yi},Ct={YY:String(this.$y).slice(-2),YYYY:this.$y,M:Be+1,MM:j.s(Be+1,2,"0"),MMM:Tt(ne.monthsShort,Be,Et,3),MMMM:Tt(Et,Be),D:this.$D,DD:j.s(this.$D,2,"0"),d:String(this.$W),dd:Tt(ne.weekdaysMin,this.$W,Qe,2),ddd:Tt(ne.weekdaysShort,this.$W,Qe,3),dddd:Qe[this.$W],H:String(Ce),HH:j.s(Ce,2,"0"),h:bt(1),hh:bt(2),a:wt(Ce,Xe,!0),A:wt(Ce,Xe,!1),m:String(Xe),mm:j.s(Xe,2,"0"),s:String(this.$s),ss:j.s(this.$s,2,"0"),SSS:j.s(this.$ms,3,"0"),Z:Ie};return fe.replace(R,function(ct,Gt){return Gt||Ct[ct]||Ie.replace(":","")})},he.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},he.diff=function(le,pe,ne){var fe,Ie=j.p(pe),Ce=X(le),Xe=(Ce.utcOffset()-this.utcOffset())*r,Be=this-Ce,Qe=j.m(this,Ce);return Qe=(fe={},fe[E]=Qe/12,fe[v]=Qe,fe[y]=Qe/3,fe[m]=(Be-Xe)/6048e5,fe[f]=(Be-Xe)/864e5,fe[l]=Be/e,fe[o]=Be/r,fe[s]=Be/i,fe)[Ie]||Be,ne?Qe:j.a(Qe)},he.daysInMonth=function(){return this.endOf(v).$D},he.$locale=function(){return te[this.$L]},he.locale=function(le,pe){if(!le)return this.$L;var ne=this.clone(),fe=q(le,pe,!0);return fe&&(ne.$L=fe),ne},he.clone=function(){return j.w(this.$d,this)},he.toDate=function(){return new Date(this.valueOf())},he.toJSON=function(){return this.isValid()?this.toISOString():null},he.toISOString=function(){return this.$d.toISOString()},he.toString=function(){return this.$d.toUTCString()},se}(),re=oe.prototype;return X.prototype=re,[["$ms",n],["$s",s],["$m",o],["$H",l],["$W",f],["$M",v],["$y",E],["$D",I]].forEach(function(se){re[se[1]]=function(he){return this.$g(he,se[0],se[1])}}),X.extend=function(se,he){return se.$i||(se(he,oe,X),se.$i=!0),X},X.locale=q,X.isDayjs=z,X.unix=function(se){return X(1e3*se)},X.en=te[W],X.Ls=te,X.p={},X})})(iM);class rM{now(t="YYYY-MM-DD HH:mm:ss"){return qm().format(t)}delay(t=1){return new Promise(i=>{setTimeout(()=>{i()},t*1e3)})}getFileExtension(t){return t?t.name.split(".").pop():null}validateFile(t,i={}){if(!t)return!1;const r=t.name.split(".").pop()||"";if(Array.isArray(i.allowFileTypeList)){for(const e of i.allowFileTypeList)if(new RegExp(e,"g").test(t.type))return!0}if(Array.isArray(i.allowExtensionList)){for(const e of i.allowExtensionList)if(new RegExp(e,"g").test(r))return!0}return!1}getYoutubeUid(t){if(typeof t!="string")return null;const i=/(https:\/\/youtu\.be\/)(.*)/;if(t.match(i)){let n=t.replace(i,"$2");return new RegExp(/\?/).test(n)&&(n=n.split("?")[0]),n}const r=t.split("v=");return typeof r[1]!="string"?null:r[1].split("&")[0]}}const nM=new rM;var yu=(a=>(a[a.UNSTARTED=-1]="UNSTARTED",a[a.ENDED=0]="ENDED",a[a.PLAYING=1]="PLAYING",a[a.PAUSED=2]="PAUSED",a[a.BUFFERING=3]="BUFFERING",a[a.CUED=5]="CUED",a))(yu||{});const $x=tf({emits:{videoFirstPlay:null,videoPlay:null,videoPause:null,videoEnd:null},props:{disabled:{type:Boolean,default:!1},debug:{type:Boolean,default:!1},width:{type:Number},height:{type:Number},autoplay:{type:Boolean},startTime:{type:String,default:null}},methods:{videoFirstPlay(){this.$emit("videoFirstPlay")},videoPlay(){this.$emit("videoPlay")},videoPause(){this.$emit("videoPause")},videoEnd(){this.$emit("videoEnd")}},computed:{shouldAutoplay(){return this.disabled?!1:this.autoplay}}}),aM=tf({mixins:[$x],props:{source:{type:Object}},data:()=>({hasPlay:!1,player:null,getCurrentTimeCallback:null}),mounted(){this.init()},methods:{async init(){var i;if(this.debug&&console.warn("[DEBUG] start init youtube player"),await this.$nextTick(),window.YT){await Nu(),this.onYouTubeIframeAPIReady();return}const a=document.createElement("script");a.src="https://www.youtube.com/iframe_api";const t=document.getElementsByTagName("script")[0];(i=t.parentNode)==null||i.insertBefore(a,t),await Nu(),this.onYouTubeIframeAPIReady()},onYouTubeIframeAPIReady(){if(!window.YT){setTimeout(()=>{this.onYouTubeIframeAPIReady()},500);return}window.YT.ready(()=>{const a=this.$refs.player;this.player=new window.YT.Player(a,{height:this.height,width:this.width,videoId:this.youtubeUid,playerVars:{autoplay:this.shouldAutoplay?1:0,start:this.startTime?this.startTime:void 0},events:{onStateChange:this.onPlayerStateChange}})})},onPlayerStateChange(a){this.setupGetCurrentTimeCallback(a),a.data==yu.PLAYING?this.hasPlay?(this.hasPlay=!0,this.videoPlay()):(this.hasPlay=!0,this.videoFirstPlay()):a.data==yu.BUFFERING||a.data==yu.CUED||(a.data==yu.ENDED?this.videoEnd():a.data==yu.PAUSED&&this.videoPause())},setupGetCurrentTimeCallback(a){this.getCurrentTimeCallback=()=>a.target.getCurrentTime()}},computed:{elementId(){return ZR()},youtubeUid(){var a;return nM.getYoutubeUid((a=this.source)==null?void 0:a.url)}}}),iv=(a,t)=>{const i=a.__vccOpts||a;for(const[r,e]of t)i[r]=e;return i},sM=["disabled"],oM=["id"];function uM(a,t,i,r,e,n){return Bd(),Yg("div",{"micro-media-player":"youtube",disabled:a.disabled},[Dh("div",{id:a.elementId,ref:"player"},null,8,oM)],8,sM)}const lM=iv(aM,[["render",uM]]);var ho=(a=>(a.STATIC_VIDEO="static-video",a.M3U8="m3u8",a.YOUTUBE="youtube",a))(ho||{}),vd;typeof window<"u"?vd=window:typeof Qn<"u"?vd=Qn:typeof self<"u"?vd=self:vd={};var F=vd;const dM={},fM=Object.freeze(Object.defineProperty({__proto__:null,default:dM},Symbol.toStringTag,{value:"Module"})),cM=Hx(fM);var Gy=typeof Qn<"u"?Qn:typeof window<"u"?window:{},hM=cM,_d;typeof document<"u"?_d=document:(_d=Gy["__GLOBAL_DOCUMENT_CACHE@4"],_d||(_d=Gy["__GLOBAL_DOCUMENT_CACHE@4"]=hM));var Se=_d;function Ni(){return Ni=Object.assign?Object.assign.bind():function(a){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(a[r]=i[r])}return a},Ni.apply(this,arguments)}const pM=Object.freeze(Object.defineProperty({__proto__:null,default:Ni},Symbol.toStringTag,{value:"Module"}));var Fc={},mM={get exports(){return Fc},set exports(a){Fc=a}};(function(a,t){function i(l){if(l&&typeof l=="object"){var f=l.which||l.keyCode||l.charCode;f&&(l=f)}if(typeof l=="number")return s[l];var m=String(l),v=r[m.toLowerCase()];if(v)return v;var v=e[m.toLowerCase()];if(v)return v;if(m.length===1)return m.charCodeAt(0)}i.isEventKey=function(f,m){if(f&&typeof f=="object"){var v=f.which||f.keyCode||f.charCode;if(v==null)return!1;if(typeof m=="string"){var y=r[m.toLowerCase()];if(y)return y===v;var y=e[m.toLowerCase()];if(y)return y===v}else if(typeof m=="number")return m===v;return!1}},t=a.exports=i;var r=t.code=t.codes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,"pause/break":19,"caps lock":20,esc:27,space:32,"page up":33,"page down":34,end:35,home:36,left:37,up:38,right:39,down:40,insert:45,delete:46,command:91,"left command":91,"right command":93,"numpad *":106,"numpad +":107,"numpad -":109,"numpad .":110,"numpad /":111,"num lock":144,"scroll lock":145,"my computer":182,"my calculator":183,";":186,"=":187,",":188,"-":189,".":190,"/":191,"`":192,"[":219,"\\":220,"]":221,"'":222},e=t.aliases={windows:91,"":16,"":18,"":17,"":91,ctl:17,control:17,option:18,pause:19,break:19,caps:20,return:13,escape:27,spc:32,spacebar:32,pgup:33,pgdn:34,ins:45,del:46,cmd:91};for(n=97;n<123;n++)r[String.fromCharCode(n)]=n-32;for(var n=48;n<58;n++)r[n-48]=n;for(n=1;n<13;n++)r["f"+n]=n+111;for(n=0;n<10;n++)r["numpad "+n]=n+96;var s=t.names=t.title={};for(n in r)s[r[n]]=n;for(var o in e)r[o]=e[o]})(mM,Fc);const et=Fc;function Ue(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}function Bu(a,t){return Bu=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,e){return r.__proto__=e,r},Bu(a,t)}function Ae(a,t){a.prototype=Object.create(t.prototype),a.prototype.constructor=a,Bu(a,t)}var gM=vM;function vM(a,t){var i,r=null;try{i=JSON.parse(a,t)}catch(e){r=e}return[r,i]}var Hd={},_M={get exports(){return Hd},set exports(a){Hd=a}};const yM=Hx(pM);var TM=xM,bM=Object.prototype.toString;function xM(a){if(!a)return!1;var t=bM.call(a);return t==="[object Function]"||typeof a=="function"&&t!=="[object RegExp]"||typeof window<"u"&&(a===window.setTimeout||a===window.alert||a===window.confirm||a===window.prompt)}var SM=F,EM=function(t,i){return i===void 0&&(i=!1),function(r,e,n){if(r){t(r);return}if(e.statusCode>=400&&e.statusCode<=599){var s=n;if(i)if(SM.TextDecoder){var o=wM(e.headers&&e.headers["content-type"]);try{s=new TextDecoder(o).decode(n)}catch{}}else s=String.fromCharCode.apply(null,new Uint8Array(n));t({cause:s});return}t(null,n)}};function wM(a){return a===void 0&&(a=""),a.toLowerCase().split(";").reduce(function(t,i){var r=i.split("="),e=r[0],n=r[1];return e.trim()==="charset"?n.trim():t},"utf-8")}var CM=EM,Wx=F,AM=yM,IM=TM;ra.httpHandler=CM;var PM=function(t){var i={};return t&&t.trim().split(`
`).forEach(function(r){var e=r.indexOf(":"),n=r.slice(0,e).trim().toLowerCase(),s=r.slice(e+1).trim();typeof i[n]>"u"?i[n]=s:Array.isArray(i[n])?i[n].push(s):i[n]=[i[n],s]}),i};_M.exports=ra;Hd.default=ra;ra.XMLHttpRequest=Wx.XMLHttpRequest||kM;ra.XDomainRequest="withCredentials"in new ra.XMLHttpRequest?ra.XMLHttpRequest:Wx.XDomainRequest;OM(["get","put","post","patch","head","delete"],function(a){ra[a==="delete"?"del":a]=function(t,i,r){return i=qx(t,i,r),i.method=a.toUpperCase(),Gx(i)}});function OM(a,t){for(var i=0;i<a.length;i++)t(a[i])}function DM(a){for(var t in a)if(a.hasOwnProperty(t))return!1;return!0}function qx(a,t,i){var r=a;return IM(t)?(i=t,typeof a=="string"&&(r={uri:a})):r=AM({},t,{uri:a}),r.callback=i,r}function ra(a,t,i){return t=qx(a,t,i),Gx(t)}function Gx(a){if(typeof a.callback>"u")throw new Error("callback argument missing");var t=!1,i=function(Z,V,W){t||(t=!0,a.callback(Z,V,W))};function r(){o.readyState===4&&setTimeout(s,0)}function e(){var H=void 0;if(o.response?H=o.response:H=o.responseText||LM(o),O)try{H=JSON.parse(H)}catch{}return H}function n(H){return clearTimeout(D),H instanceof Error||(H=new Error(""+(H||"Unknown XMLHttpRequest Error"))),H.statusCode=0,i(H,R)}function s(){if(!f){var H;clearTimeout(D),a.useXDR&&o.status===void 0?H=200:H=o.status===1223?204:o.status;var Z=R,V=null;return H!==0?(Z={body:e(),statusCode:H,method:v,headers:{},url:m,rawRequest:o},o.getAllResponseHeaders&&(Z.headers=PM(o.getAllResponseHeaders()))):V=new Error("Internal XMLHttpRequest Error"),i(V,Z,Z.body)}}var o=a.xhr||null;o||(a.cors||a.useXDR?o=new ra.XDomainRequest:o=new ra.XMLHttpRequest);var l,f,m=o.url=a.uri||a.url,v=o.method=a.method||"GET",y=a.body||a.data,E=o.headers=a.headers||{},I=!!a.sync,O=!1,D,R={body:void 0,headers:{},statusCode:0,method:v,url:m,rawRequest:o};if("json"in a&&a.json!==!1&&(O=!0,E.accept||E.Accept||(E.Accept="application/json"),v!=="GET"&&v!=="HEAD"&&(E["content-type"]||E["Content-Type"]||(E["Content-Type"]="application/json"),y=JSON.stringify(a.json===!0?y:a.json))),o.onreadystatechange=r,o.onload=s,o.onerror=n,o.onprogress=function(){},o.onabort=function(){f=!0},o.ontimeout=n,o.open(v,m,!I,a.username,a.password),I||(o.withCredentials=!!a.withCredentials),!I&&a.timeout>0&&(D=setTimeout(function(){if(!f){f=!0,o.abort("timeout");var H=new Error("XMLHttpRequest timeout");H.code="ETIMEDOUT",n(H)}},a.timeout)),o.setRequestHeader)for(l in E)E.hasOwnProperty(l)&&o.setRequestHeader(l,E[l]);else if(a.headers&&!DM(a.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in a&&(o.responseType=a.responseType),"beforeSend"in a&&typeof a.beforeSend=="function"&&a.beforeSend(o),o.send(y||null),o}function LM(a){try{if(a.responseType==="document")return a.responseXML;var t=a.responseXML&&a.responseXML.documentElement.nodeName==="parsererror";if(a.responseType===""&&!t)return a.responseXML}catch{}return null}function kM(){}var Nc={},RM={get exports(){return Nc},set exports(a){Nc=a}},zy=Se,rv=Object.create||function(){function a(){}return function(t){if(arguments.length!==1)throw new Error("Object.create shim only accepts one parameter.");return a.prototype=t,new a}}();function Mr(a,t){this.name="ParsingError",this.code=a.code,this.message=t||a.message}Mr.prototype=rv(Error.prototype);Mr.prototype.constructor=Mr;Mr.Errors={BadSignature:{code:0,message:"Malformed WebVTT signature."},BadTimeStamp:{code:1,message:"Malformed time stamp."}};function nv(a){function t(r,e,n,s){return(r|0)*3600+(e|0)*60+(n|0)+(s|0)/1e3}var i=a.match(/^(\d+):(\d{1,2})(:\d{1,2})?\.(\d{3})/);return i?i[3]?t(i[1],i[2],i[3].replace(":",""),i[4]):i[1]>59?t(i[1],i[2],0,i[4]):t(0,i[1],i[2],i[4]):null}function Ad(){this.values=rv(null)}Ad.prototype={set:function(a,t){!this.get(a)&&t!==""&&(this.values[a]=t)},get:function(a,t,i){return i?this.has(a)?this.values[a]:t[i]:this.has(a)?this.values[a]:t},has:function(a){return a in this.values},alt:function(a,t,i){for(var r=0;r<i.length;++r)if(t===i[r]){this.set(a,t);break}},integer:function(a,t){/^-?\d+$/.test(t)&&this.set(a,parseInt(t,10))},percent:function(a,t){return t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t),t>=0&&t<=100)?(this.set(a,t),!0):!1}};function yd(a,t,i,r){var e=r?a.split(r):[a];for(var n in e)if(typeof e[n]=="string"){var s=e[n].split(i);if(s.length===2){var o=s[0].trim(),l=s[1].trim();t(o,l)}}}function MM(a,t,i){var r=a;function e(){var o=nv(a);if(o===null)throw new Mr(Mr.Errors.BadTimeStamp,"Malformed timestamp: "+r);return a=a.replace(/^[^\sa-zA-Z-]+/,""),o}function n(o,l){var f=new Ad;yd(o,function(m,v){switch(m){case"region":for(var y=i.length-1;y>=0;y--)if(i[y].id===v){f.set(m,i[y].region);break}break;case"vertical":f.alt(m,v,["rl","lr"]);break;case"line":var E=v.split(","),I=E[0];f.integer(m,I),f.percent(m,I)&&f.set("snapToLines",!1),f.alt(m,I,["auto"]),E.length===2&&f.alt("lineAlign",E[1],["start","center","end"]);break;case"position":E=v.split(","),f.percent(m,E[0]),E.length===2&&f.alt("positionAlign",E[1],["start","center","end"]);break;case"size":f.percent(m,v);break;case"align":f.alt(m,v,["start","center","end","left","right"]);break}},/:/,/\s/),l.region=f.get("region",null),l.vertical=f.get("vertical","");try{l.line=f.get("line","auto")}catch{}l.lineAlign=f.get("lineAlign","start"),l.snapToLines=f.get("snapToLines",!0),l.size=f.get("size",100);try{l.align=f.get("align","center")}catch{l.align=f.get("align","middle")}try{l.position=f.get("position","auto")}catch{l.position=f.get("position",{start:0,left:0,center:50,middle:50,end:100,right:100},l.align)}l.positionAlign=f.get("positionAlign",{start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},l.align)}function s(){a=a.replace(/^\s+/,"")}if(s(),t.startTime=e(),s(),a.substr(0,3)!=="--\x3e")throw new Mr(Mr.Errors.BadTimeStamp,"Malformed time stamp (time stamps must be separated by '--\x3e'): "+r);a=a.substr(3),s(),t.endTime=e(),s(),n(a,t)}var Zp=zy.createElement&&zy.createElement("textarea"),FM={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},Ky={white:"rgba(255,255,255,1)",lime:"rgba(0,255,0,1)",cyan:"rgba(0,255,255,1)",red:"rgba(255,0,0,1)",yellow:"rgba(255,255,0,1)",magenta:"rgba(255,0,255,1)",blue:"rgba(0,0,255,1)",black:"rgba(0,0,0,1)"},NM={v:"title",lang:"lang"},Xy={rt:"ruby"};function zx(a,t){function i(){if(!t)return null;function I(D){return t=t.substr(D.length),D}var O=t.match(/^([^<]*)(<[^>]*>?)?/);return I(O[1]?O[1]:O[2])}function r(I){return Zp.innerHTML=I,I=Zp.textContent,Zp.textContent="",I}function e(I,O){return!Xy[O.localName]||Xy[O.localName]===I.localName}function n(I,O){var D=FM[I];if(!D)return null;var R=a.document.createElement(D),H=NM[I];return H&&O&&(R[H]=O.trim()),R}for(var s=a.document.createElement("div"),o=s,l,f=[];(l=i())!==null;){if(l[0]==="<"){if(l[1]==="/"){f.length&&f[f.length-1]===l.substr(2).replace(">","")&&(f.pop(),o=o.parentNode);continue}var m=nv(l.substr(1,l.length-2)),v;if(m){v=a.document.createProcessingInstruction("timestamp",m),o.appendChild(v);continue}var y=l.match(/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/);if(!y||(v=n(y[1],y[3]),!v)||!e(o,v))continue;if(y[2]){var E=y[2].split(".");E.forEach(function(I){var O=/^bg_/.test(I),D=O?I.slice(3):I;if(Ky.hasOwnProperty(D)){var R=O?"background-color":"color",H=Ky[D];v.style[R]=H}}),v.className=E.join(" ")}f.push(y[1]),o.appendChild(v),o=v;continue}o.appendChild(a.document.createTextNode(r(l)))}return s}var Qy=[[1470,1470],[1472,1472],[1475,1475],[1478,1478],[1488,1514],[1520,1524],[1544,1544],[1547,1547],[1549,1549],[1563,1563],[1566,1610],[1645,1647],[1649,1749],[1765,1766],[1774,1775],[1786,1805],[1807,1808],[1810,1839],[1869,1957],[1969,1969],[1984,2026],[2036,2037],[2042,2042],[2048,2069],[2074,2074],[2084,2084],[2088,2088],[2096,2110],[2112,2136],[2142,2142],[2208,2208],[2210,2220],[8207,8207],[64285,64285],[64287,64296],[64298,64310],[64312,64316],[64318,64318],[64320,64321],[64323,64324],[64326,64449],[64467,64829],[64848,64911],[64914,64967],[65008,65020],[65136,65140],[65142,65276],[67584,67589],[67592,67592],[67594,67637],[67639,67640],[67644,67644],[67647,67669],[67671,67679],[67840,67867],[67872,67897],[67903,67903],[67968,68023],[68030,68031],[68096,68096],[68112,68115],[68117,68119],[68121,68147],[68160,68167],[68176,68184],[68192,68223],[68352,68405],[68416,68437],[68440,68466],[68472,68479],[68608,68680],[126464,126467],[126469,126495],[126497,126498],[126500,126500],[126503,126503],[126505,126514],[126516,126519],[126521,126521],[126523,126523],[126530,126530],[126535,126535],[126537,126537],[126539,126539],[126541,126543],[126545,126546],[126548,126548],[126551,126551],[126553,126553],[126555,126555],[126557,126557],[126559,126559],[126561,126562],[126564,126564],[126567,126570],[126572,126578],[126580,126583],[126585,126588],[126590,126590],[126592,126601],[126603,126619],[126625,126627],[126629,126633],[126635,126651],[1114109,1114109]];function UM(a){for(var t=0;t<Qy.length;t++){var i=Qy[t];if(a>=i[0]&&a<=i[1])return!0}return!1}function BM(a){var t=[],i="",r;if(!a||!a.childNodes)return"ltr";function e(o,l){for(var f=l.childNodes.length-1;f>=0;f--)o.push(l.childNodes[f])}function n(o){if(!o||!o.length)return null;var l=o.pop(),f=l.textContent||l.innerText;if(f){var m=f.match(/^.*(\n|\r)/);return m?(o.length=0,m[0]):f}if(l.tagName==="ruby")return n(o);if(l.childNodes)return e(o,l),n(o)}for(e(t,a);i=n(t);)for(var s=0;s<i.length;s++)if(r=i.charCodeAt(s),UM(r))return"rtl";return"ltr"}function jM(a){if(typeof a.line=="number"&&(a.snapToLines||a.line>=0&&a.line<=100))return a.line;if(!a.track||!a.track.textTrackList||!a.track.textTrackList.mediaElement)return-1;for(var t=a.track,i=t.textTrackList,r=0,e=0;e<i.length&&i[e]!==t;e++)i[e].mode==="showing"&&r++;return++r*-1}function Rh(){}Rh.prototype.applyStyles=function(a,t){t=t||this.div;for(var i in a)a.hasOwnProperty(i)&&(t.style[i]=a[i])};Rh.prototype.formatStyle=function(a,t){return a===0?0:a+t};function Uc(a,t,i){Rh.call(this),this.cue=t,this.cueDiv=zx(a,t.text);var r={color:"rgba(255, 255, 255, 1)",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"relative",left:0,right:0,top:0,bottom:0,display:"inline",writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext"};this.applyStyles(r,this.cueDiv),this.div=a.document.createElement("div"),r={direction:BM(this.cueDiv),writingMode:t.vertical===""?"horizontal-tb":t.vertical==="lr"?"vertical-lr":"vertical-rl",unicodeBidi:"plaintext",textAlign:t.align==="middle"?"center":t.align,font:i.font,whiteSpace:"pre-line",position:"absolute"},this.applyStyles(r),this.div.appendChild(this.cueDiv);var e=0;switch(t.positionAlign){case"start":e=t.position;break;case"center":e=t.position-t.size/2;break;case"end":e=t.position-t.size;break}t.vertical===""?this.applyStyles({left:this.formatStyle(e,"%"),width:this.formatStyle(t.size,"%")}):this.applyStyles({top:this.formatStyle(e,"%"),height:this.formatStyle(t.size,"%")}),this.move=function(n){this.applyStyles({top:this.formatStyle(n.top,"px"),bottom:this.formatStyle(n.bottom,"px"),left:this.formatStyle(n.left,"px"),right:this.formatStyle(n.right,"px"),height:this.formatStyle(n.height,"px"),width:this.formatStyle(n.width,"px")})}}Uc.prototype=rv(Rh.prototype);Uc.prototype.constructor=Uc;function Xi(a){var t,i,r,e;if(a.div){i=a.div.offsetHeight,r=a.div.offsetWidth,e=a.div.offsetTop;var n=(n=a.div.childNodes)&&(n=n[0])&&n.getClientRects&&n.getClientRects();a=a.div.getBoundingClientRect(),t=n?Math.max(n[0]&&n[0].height||0,a.height/n.length):0}this.left=a.left,this.right=a.right,this.top=a.top||e,this.height=a.height||i,this.bottom=a.bottom||e+(a.height||i),this.width=a.width||r,this.lineHeight=t!==void 0?t:a.lineHeight}Xi.prototype.move=function(a,t){switch(t=t!==void 0?t:this.lineHeight,a){case"+x":this.left+=t,this.right+=t;break;case"-x":this.left-=t,this.right-=t;break;case"+y":this.top+=t,this.bottom+=t;break;case"-y":this.top-=t,this.bottom-=t;break}};Xi.prototype.overlaps=function(a){return this.left<a.right&&this.right>a.left&&this.top<a.bottom&&this.bottom>a.top};Xi.prototype.overlapsAny=function(a){for(var t=0;t<a.length;t++)if(this.overlaps(a[t]))return!0;return!1};Xi.prototype.within=function(a){return this.top>=a.top&&this.bottom<=a.bottom&&this.left>=a.left&&this.right<=a.right};Xi.prototype.overlapsOppositeAxis=function(a,t){switch(t){case"+x":return this.left<a.left;case"-x":return this.right>a.right;case"+y":return this.top<a.top;case"-y":return this.bottom>a.bottom}};Xi.prototype.intersectPercentage=function(a){var t=Math.max(0,Math.min(this.right,a.right)-Math.max(this.left,a.left)),i=Math.max(0,Math.min(this.bottom,a.bottom)-Math.max(this.top,a.top)),r=t*i;return r/(this.height*this.width)};Xi.prototype.toCSSCompatValues=function(a){return{top:this.top-a.top,bottom:a.bottom-this.bottom,left:this.left-a.left,right:a.right-this.right,height:this.height,width:this.width}};Xi.getSimpleBoxPosition=function(a){var t=a.div?a.div.offsetHeight:a.tagName?a.offsetHeight:0,i=a.div?a.div.offsetWidth:a.tagName?a.offsetWidth:0,r=a.div?a.div.offsetTop:a.tagName?a.offsetTop:0;a=a.div?a.div.getBoundingClientRect():a.tagName?a.getBoundingClientRect():a;var e={left:a.left,right:a.right,top:a.top||r,height:a.height||t,bottom:a.bottom||r+(a.height||t),width:a.width||i};return e};function VM(a,t,i,r){function e(D,R){for(var H,Z=new Xi(D),V=1,W=0;W<R.length;W++){for(;D.overlapsOppositeAxis(i,R[W])||D.within(i)&&D.overlapsAny(r);)D.move(R[W]);if(D.within(i))return D;var te=D.intersectPercentage(i);V>te&&(H=new Xi(D),V=te),D=new Xi(Z)}return H||Z}var n=new Xi(t),s=t.cue,o=jM(s),l=[];if(s.snapToLines){var f;switch(s.vertical){case"":l=["+y","-y"],f="height";break;case"rl":l=["+x","-x"],f="width";break;case"lr":l=["-x","+x"],f="width";break}var m=n.lineHeight,v=m*Math.round(o),y=i[f]+m,E=l[0];Math.abs(v)>y&&(v=v<0?-1:1,v*=Math.ceil(y/m)*m),o<0&&(v+=s.vertical===""?i.height:i.width,l=l.reverse()),n.move(E,v)}else{var I=n.lineHeight/i.height*100;switch(s.lineAlign){case"center":o-=I/2;break;case"end":o-=I;break}switch(s.vertical){case"":t.applyStyles({top:t.formatStyle(o,"%")});break;case"rl":t.applyStyles({left:t.formatStyle(o,"%")});break;case"lr":t.applyStyles({right:t.formatStyle(o,"%")});break}l=["+y","-x","+x","-y"],n=new Xi(t)}var O=e(n,l);t.move(O.toCSSCompatValues(i))}function Ju(){}Ju.StringDecoder=function(){return{decode:function(a){if(!a)return"";if(typeof a!="string")throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(a))}}};Ju.convertCueToDOMTree=function(a,t){return!a||!t?null:zx(a,t)};var HM=.05,$M="sans-serif",WM="1.5%";Ju.processCues=function(a,t,i){if(!a||!t||!i)return null;for(;i.firstChild;)i.removeChild(i.firstChild);var r=a.document.createElement("div");r.style.position="absolute",r.style.left="0",r.style.right="0",r.style.top="0",r.style.bottom="0",r.style.margin=WM,i.appendChild(r);function e(m){for(var v=0;v<m.length;v++)if(m[v].hasBeenReset||!m[v].displayState)return!0;return!1}if(!e(t)){for(var n=0;n<t.length;n++)r.appendChild(t[n].displayState);return}var s=[],o=Xi.getSimpleBoxPosition(r),l=Math.round(o.height*HM*100)/100,f={font:l+"px "+$M};(function(){for(var m,v,y=0;y<t.length;y++)v=t[y],m=new Uc(a,v,f),r.appendChild(m.div),VM(a,m,o,s),v.displayState=m.div,s.push(Xi.getSimpleBoxPosition(m))})()};Ju.Parser=function(a,t,i){i||(i=t,t={}),t||(t={}),this.window=a,this.vttjs=t,this.state="INITIAL",this.buffer="",this.decoder=i||new TextDecoder("utf8"),this.regionList=[]};Ju.Parser.prototype={reportOrThrowError:function(a){if(a instanceof Mr)this.onparsingerror&&this.onparsingerror(a);else throw a},parse:function(a){var t=this;a&&(t.buffer+=t.decoder.decode(a,{stream:!0}));function i(){for(var m=t.buffer,v=0;v<m.length&&m[v]!=="\r"&&m[v]!==`
`;)++v;var y=m.substr(0,v);return m[v]==="\r"&&++v,m[v]===`
`&&++v,t.buffer=m.substr(v),y}function r(m){var v=new Ad;if(yd(m,function(E,I){switch(E){case"id":v.set(E,I);break;case"width":v.percent(E,I);break;case"lines":v.integer(E,I);break;case"regionanchor":case"viewportanchor":var O=I.split(",");if(O.length!==2)break;var D=new Ad;if(D.percent("x",O[0]),D.percent("y",O[1]),!D.has("x")||!D.has("y"))break;v.set(E+"X",D.get("x")),v.set(E+"Y",D.get("y"));break;case"scroll":v.alt(E,I,["up"]);break}},/=/,/\s/),v.has("id")){var y=new(t.vttjs.VTTRegion||t.window.VTTRegion);y.width=v.get("width",100),y.lines=v.get("lines",3),y.regionAnchorX=v.get("regionanchorX",0),y.regionAnchorY=v.get("regionanchorY",100),y.viewportAnchorX=v.get("viewportanchorX",0),y.viewportAnchorY=v.get("viewportanchorY",100),y.scroll=v.get("scroll",""),t.onregion&&t.onregion(y),t.regionList.push({id:v.get("id"),region:y})}}function e(m){var v=new Ad;yd(m,function(y,E){switch(y){case"MPEGT":v.integer(y+"S",E);break;case"LOCA":v.set(y+"L",nv(E));break}},/[^\d]:/,/,/),t.ontimestampmap&&t.ontimestampmap({MPEGTS:v.get("MPEGTS"),LOCAL:v.get("LOCAL")})}function n(m){m.match(/X-TIMESTAMP-MAP/)?yd(m,function(v,y){switch(v){case"X-TIMESTAMP-MAP":e(y);break}},/=/):yd(m,function(v,y){switch(v){case"Region":r(y);break}},/:/)}try{var s;if(t.state==="INITIAL"){if(!/\r\n|\n/.test(t.buffer))return this;s=i();var o=s.match(/^WEBVTT([ \t].*)?$/);if(!o||!o[0])throw new Mr(Mr.Errors.BadSignature);t.state="HEADER"}for(var l=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(l?l=!1:s=i(),t.state){case"HEADER":/:/.test(s)?n(s):s||(t.state="ID");continue;case"NOTE":s||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(s)){t.state="NOTE";break}if(!s)continue;t.cue=new(t.vttjs.VTTCue||t.window.VTTCue)(0,0,"");try{t.cue.align="center"}catch{t.cue.align="middle"}if(t.state="CUE",s.indexOf("--\x3e")===-1){t.cue.id=s;continue}case"CUE":try{MM(s,t.cue,t.regionList)}catch(m){t.reportOrThrowError(m),t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var f=s.indexOf("--\x3e")!==-1;if(!s||f&&(l=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+=`
`),t.cue.text+=s.replace(/\u2028/g,`
`).replace(/u2029/g,`
`);continue;case"BADCUE":s||(t.state="ID");continue}}}catch(m){t.reportOrThrowError(m),t.state==="CUETEXT"&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state=t.state==="INITIAL"?"BADWEBVTT":"BADCUE"}return this},flush:function(){var a=this;try{if(a.buffer+=a.decoder.decode(),(a.cue||a.state==="HEADER")&&(a.buffer+=`

`,a.parse()),a.state==="INITIAL")throw new Mr(Mr.Errors.BadSignature)}catch(t){a.reportOrThrowError(t)}return a.onflush&&a.onflush(),this}};var qM=Ju,GM="auto",zM={"":1,lr:1,rl:1},KM={start:1,center:1,end:1,left:1,right:1,auto:1,"line-left":1,"line-right":1};function XM(a){if(typeof a!="string")return!1;var t=zM[a.toLowerCase()];return t?a.toLowerCase():!1}function em(a){if(typeof a!="string")return!1;var t=KM[a.toLowerCase()];return t?a.toLowerCase():!1}function Kx(a,t,i){this.hasBeenReset=!1;var r="",e=!1,n=a,s=t,o=i,l=null,f="",m=!0,v="auto",y="start",E="auto",I="auto",O=100,D="center";Object.defineProperties(this,{id:{enumerable:!0,get:function(){return r},set:function(R){r=""+R}},pauseOnExit:{enumerable:!0,get:function(){return e},set:function(R){e=!!R}},startTime:{enumerable:!0,get:function(){return n},set:function(R){if(typeof R!="number")throw new TypeError("Start time must be set to a number.");n=R,this.hasBeenReset=!0}},endTime:{enumerable:!0,get:function(){return s},set:function(R){if(typeof R!="number")throw new TypeError("End time must be set to a number.");s=R,this.hasBeenReset=!0}},text:{enumerable:!0,get:function(){return o},set:function(R){o=""+R,this.hasBeenReset=!0}},region:{enumerable:!0,get:function(){return l},set:function(R){l=R,this.hasBeenReset=!0}},vertical:{enumerable:!0,get:function(){return f},set:function(R){var H=XM(R);if(H===!1)throw new SyntaxError("Vertical: an invalid or illegal direction string was specified.");f=H,this.hasBeenReset=!0}},snapToLines:{enumerable:!0,get:function(){return m},set:function(R){m=!!R,this.hasBeenReset=!0}},line:{enumerable:!0,get:function(){return v},set:function(R){if(typeof R!="number"&&R!==GM)throw new SyntaxError("Line: an invalid number or illegal string was specified.");v=R,this.hasBeenReset=!0}},lineAlign:{enumerable:!0,get:function(){return y},set:function(R){var H=em(R);H?(y=H,this.hasBeenReset=!0):console.warn("lineAlign: an invalid or illegal string was specified.")}},position:{enumerable:!0,get:function(){return E},set:function(R){if(R<0||R>100)throw new Error("Position must be between 0 and 100.");E=R,this.hasBeenReset=!0}},positionAlign:{enumerable:!0,get:function(){return I},set:function(R){var H=em(R);H?(I=H,this.hasBeenReset=!0):console.warn("positionAlign: an invalid or illegal string was specified.")}},size:{enumerable:!0,get:function(){return O},set:function(R){if(R<0||R>100)throw new Error("Size must be between 0 and 100.");O=R,this.hasBeenReset=!0}},align:{enumerable:!0,get:function(){return D},set:function(R){var H=em(R);if(!H)throw new SyntaxError("align: an invalid or illegal alignment string was specified.");D=H,this.hasBeenReset=!0}}}),this.displayState=void 0}Kx.prototype.getCueAsHTML=function(){return WebVTT.convertCueToDOMTree(window,this.text)};var QM=Kx,YM={"":!0,up:!0};function JM(a){if(typeof a!="string")return!1;var t=YM[a.toLowerCase()];return t?a.toLowerCase():!1}function od(a){return typeof a=="number"&&a>=0&&a<=100}function ZM(){var a=100,t=3,i=0,r=100,e=0,n=100,s="";Object.defineProperties(this,{width:{enumerable:!0,get:function(){return a},set:function(o){if(!od(o))throw new Error("Width must be between 0 and 100.");a=o}},lines:{enumerable:!0,get:function(){return t},set:function(o){if(typeof o!="number")throw new TypeError("Lines must be set to a number.");t=o}},regionAnchorY:{enumerable:!0,get:function(){return r},set:function(o){if(!od(o))throw new Error("RegionAnchorX must be between 0 and 100.");r=o}},regionAnchorX:{enumerable:!0,get:function(){return i},set:function(o){if(!od(o))throw new Error("RegionAnchorY must be between 0 and 100.");i=o}},viewportAnchorY:{enumerable:!0,get:function(){return n},set:function(o){if(!od(o))throw new Error("ViewportAnchorY must be between 0 and 100.");n=o}},viewportAnchorX:{enumerable:!0,get:function(){return e},set:function(o){if(!od(o))throw new Error("ViewportAnchorX must be between 0 and 100.");e=o}},scroll:{enumerable:!0,get:function(){return s},set:function(o){var l=JM(o);l===!1?console.warn("Scroll: an invalid or illegal string was specified."):s=l}}})}var eF=ZM,Ma=F,Do=RM.exports={WebVTT:qM,VTTCue:QM,VTTRegion:eF};Ma.vttjs=Do;Ma.WebVTT=Do.WebVTT;var tF=Do.VTTCue,iF=Do.VTTRegion,rF=Ma.VTTCue,nF=Ma.VTTRegion;Do.shim=function(){Ma.VTTCue=tF,Ma.VTTRegion=iF};Do.restore=function(){Ma.VTTCue=rF,Ma.VTTRegion=nF};Ma.VTTCue||Do.shim();function aF(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function Id(a,t,i){return aF()?Id=Reflect.construct.bind():Id=function(e,n,s){var o=[null];o.push.apply(o,n);var l=Function.bind.apply(e,o),f=new l;return s&&Bu(f,s.prototype),f},Id.apply(null,arguments)}function sF(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,writable:!0,configurable:!0}}),Object.defineProperty(a,"prototype",{writable:!1}),t&&Bu(a,t)}var Gm={},oF={get exports(){return Gm},set exports(a){Gm=a}};(function(a,t){(function(i){var r=/^(?=((?:[a-zA-Z0-9+\-.]+:)?))\1(?=((?:\/\/[^\/?#]*)?))\2(?=((?:(?:[^?#\/]*\/)*[^;?#\/]*)?))\3((?:;[^?#]*)?)(\?[^#]*)?(#[^]*)?$/,e=/^(?=([^\/?#]*))\1([^]*)$/,n=/(?:\/|^)\.(?=\/)/g,s=/(?:\/|^)\.\.\/(?!\.\.\/)[^\/]*(?=\/)/g,o={buildAbsoluteURL:function(l,f,m){if(m=m||{},l=l.trim(),f=f.trim(),!f){if(!m.alwaysNormalize)return l;var v=o.parseURL(l);if(!v)throw new Error("Error trying to parse base URL.");return v.path=o.normalizePath(v.path),o.buildURLFromParts(v)}var y=o.parseURL(f);if(!y)throw new Error("Error trying to parse relative URL.");if(y.scheme)return m.alwaysNormalize?(y.path=o.normalizePath(y.path),o.buildURLFromParts(y)):f;var E=o.parseURL(l);if(!E)throw new Error("Error trying to parse base URL.");if(!E.netLoc&&E.path&&E.path[0]!=="/"){var I=e.exec(E.path);E.netLoc=I[1],E.path=I[2]}E.netLoc&&!E.path&&(E.path="/");var O={scheme:E.scheme,netLoc:y.netLoc,path:null,params:y.params,query:y.query,fragment:y.fragment};if(!y.netLoc&&(O.netLoc=E.netLoc,y.path[0]!=="/"))if(!y.path)O.path=E.path,y.params||(O.params=E.params,y.query||(O.query=E.query));else{var D=E.path,R=D.substring(0,D.lastIndexOf("/")+1)+y.path;O.path=o.normalizePath(R)}return O.path===null&&(O.path=m.alwaysNormalize?o.normalizePath(y.path):y.path),o.buildURLFromParts(O)},parseURL:function(l){var f=r.exec(l);return f?{scheme:f[1]||"",netLoc:f[2]||"",path:f[3]||"",params:f[4]||"",query:f[5]||"",fragment:f[6]||""}:null},normalizePath:function(l){for(l=l.split("").reverse().join("").replace(n,"");l.length!==(l=l.replace(s,"")).length;);return l.split("").reverse().join("")},buildURLFromParts:function(l){return l.scheme+l.netLoc+l.path+l.params+l.query+l.fragment}};a.exports=o})()})(oF);const Yy=Gm;var Jy="http://example.com",nf=function(t,i){if(/^[a-z]+:/i.test(i))return i;/^data:/.test(t)&&(t=F.location&&F.location.href||"");var r=typeof F.URL=="function",e=/^\/\//.test(t),n=!F.location&&!/\/\//i.test(t);if(r?t=new F.URL(t,F.location||Jy):/\/\//i.test(t)||(t=Yy.buildAbsoluteURL(F.location&&F.location.href||"",t)),r){var s=new URL(i,t);return n?s.href.slice(Jy.length):e?s.href.slice(s.protocol.length):s.href}return Yy.buildAbsoluteURL(t,i)},av=function(){function a(){this.listeners={}}var t=a.prototype;return t.on=function(r,e){this.listeners[r]||(this.listeners[r]=[]),this.listeners[r].push(e)},t.off=function(r,e){if(!this.listeners[r])return!1;var n=this.listeners[r].indexOf(e);return this.listeners[r]=this.listeners[r].slice(0),this.listeners[r].splice(n,1),n>-1},t.trigger=function(r){var e=this.listeners[r];if(e)if(arguments.length===2)for(var n=e.length,s=0;s<n;++s)e[s].call(this,arguments[1]);else for(var o=Array.prototype.slice.call(arguments,1),l=e.length,f=0;f<l;++f)e[f].apply(this,o)},t.dispose=function(){this.listeners={}},t.pipe=function(r){this.on("data",function(e){r.push(e)})},a}(),uF=function(t){return F.atob?F.atob(t):Buffer.from(t,"base64").toString("binary")};function Xx(a){for(var t=uF(a),i=new Uint8Array(t.length),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}var lF=function(a){Ae(t,a);function t(){var r;return r=a.call(this)||this,r.buffer="",r}var i=t.prototype;return i.push=function(e){var n;for(this.buffer+=e,n=this.buffer.indexOf(`
`);n>-1;n=this.buffer.indexOf(`
`))this.trigger("data",this.buffer.substring(0,n)),this.buffer=this.buffer.substring(n+1)},t}(av),dF=String.fromCharCode(9),tm=function(t){var i=/([0-9.]*)?@?([0-9.]*)?/.exec(t||""),r={};return i[1]&&(r.length=parseInt(i[1],10)),i[2]&&(r.offset=parseInt(i[2],10)),r},fF=function(){var t="[^=]*",i='"[^"]*"|[^,]*',r="(?:"+t+")=(?:"+i+")";return new RegExp("(?:^|,)("+r+")")},yn=function(t){for(var i=t.split(fF()),r={},e=i.length,n;e--;)i[e]!==""&&(n=/([^=]*)=(.*)/.exec(i[e]).slice(1),n[0]=n[0].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^\s+|\s+$/g,""),n[1]=n[1].replace(/^['"](.*)['"]$/g,"$1"),r[n[0]]=n[1]);return r},cF=function(a){Ae(t,a);function t(){var r;return r=a.call(this)||this,r.customParsers=[],r.tagMappers=[],r}var i=t.prototype;return i.push=function(e){var n=this,s,o;if(e=e.trim(),e.length!==0){if(e[0]!=="#"){this.trigger("data",{type:"uri",uri:e});return}var l=this.tagMappers.reduce(function(f,m){var v=m(e);return v===e?f:f.concat([v])},[e]);l.forEach(function(f){for(var m=0;m<n.customParsers.length;m++)if(n.customParsers[m].call(n,f))return;if(f.indexOf("#EXT")!==0){n.trigger("data",{type:"comment",text:f.slice(1)});return}if(f=f.replace("\r",""),s=/^#EXTM3U/.exec(f),s){n.trigger("data",{type:"tag",tagType:"m3u"});return}if(s=/^#EXTINF:?([0-9\.]*)?,?(.*)?$/.exec(f),s){o={type:"tag",tagType:"inf"},s[1]&&(o.duration=parseFloat(s[1])),s[2]&&(o.title=s[2]),n.trigger("data",o);return}if(s=/^#EXT-X-TARGETDURATION:?([0-9.]*)?/.exec(f),s){o={type:"tag",tagType:"targetduration"},s[1]&&(o.duration=parseInt(s[1],10)),n.trigger("data",o);return}if(s=/^#EXT-X-VERSION:?([0-9.]*)?/.exec(f),s){o={type:"tag",tagType:"version"},s[1]&&(o.version=parseInt(s[1],10)),n.trigger("data",o);return}if(s=/^#EXT-X-MEDIA-SEQUENCE:?(\-?[0-9.]*)?/.exec(f),s){o={type:"tag",tagType:"media-sequence"},s[1]&&(o.number=parseInt(s[1],10)),n.trigger("data",o);return}if(s=/^#EXT-X-DISCONTINUITY-SEQUENCE:?(\-?[0-9.]*)?/.exec(f),s){o={type:"tag",tagType:"discontinuity-sequence"},s[1]&&(o.number=parseInt(s[1],10)),n.trigger("data",o);return}if(s=/^#EXT-X-PLAYLIST-TYPE:?(.*)?$/.exec(f),s){o={type:"tag",tagType:"playlist-type"},s[1]&&(o.playlistType=s[1]),n.trigger("data",o);return}if(s=/^#EXT-X-BYTERANGE:?(.*)?$/.exec(f),s){o=Ni(tm(s[1]),{type:"tag",tagType:"byterange"}),n.trigger("data",o);return}if(s=/^#EXT-X-ALLOW-CACHE:?(YES|NO)?/.exec(f),s){o={type:"tag",tagType:"allow-cache"},s[1]&&(o.allowed=!/NO/.test(s[1])),n.trigger("data",o);return}if(s=/^#EXT-X-MAP:?(.*)$/.exec(f),s){if(o={type:"tag",tagType:"map"},s[1]){var v=yn(s[1]);v.URI&&(o.uri=v.URI),v.BYTERANGE&&(o.byterange=tm(v.BYTERANGE))}n.trigger("data",o);return}if(s=/^#EXT-X-STREAM-INF:?(.*)$/.exec(f),s){if(o={type:"tag",tagType:"stream-inf"},s[1]){if(o.attributes=yn(s[1]),o.attributes.RESOLUTION){var y=o.attributes.RESOLUTION.split("x"),E={};y[0]&&(E.width=parseInt(y[0],10)),y[1]&&(E.height=parseInt(y[1],10)),o.attributes.RESOLUTION=E}o.attributes.BANDWIDTH&&(o.attributes.BANDWIDTH=parseInt(o.attributes.BANDWIDTH,10)),o.attributes["FRAME-RATE"]&&(o.attributes["FRAME-RATE"]=parseFloat(o.attributes["FRAME-RATE"])),o.attributes["PROGRAM-ID"]&&(o.attributes["PROGRAM-ID"]=parseInt(o.attributes["PROGRAM-ID"],10))}n.trigger("data",o);return}if(s=/^#EXT-X-MEDIA:?(.*)$/.exec(f),s){o={type:"tag",tagType:"media"},s[1]&&(o.attributes=yn(s[1])),n.trigger("data",o);return}if(s=/^#EXT-X-ENDLIST/.exec(f),s){n.trigger("data",{type:"tag",tagType:"endlist"});return}if(s=/^#EXT-X-DISCONTINUITY/.exec(f),s){n.trigger("data",{type:"tag",tagType:"discontinuity"});return}if(s=/^#EXT-X-PROGRAM-DATE-TIME:?(.*)$/.exec(f),s){o={type:"tag",tagType:"program-date-time"},s[1]&&(o.dateTimeString=s[1],o.dateTimeObject=new Date(s[1])),n.trigger("data",o);return}if(s=/^#EXT-X-KEY:?(.*)$/.exec(f),s){o={type:"tag",tagType:"key"},s[1]&&(o.attributes=yn(s[1]),o.attributes.IV&&(o.attributes.IV.substring(0,2).toLowerCase()==="0x"&&(o.attributes.IV=o.attributes.IV.substring(2)),o.attributes.IV=o.attributes.IV.match(/.{8}/g),o.attributes.IV[0]=parseInt(o.attributes.IV[0],16),o.attributes.IV[1]=parseInt(o.attributes.IV[1],16),o.attributes.IV[2]=parseInt(o.attributes.IV[2],16),o.attributes.IV[3]=parseInt(o.attributes.IV[3],16),o.attributes.IV=new Uint32Array(o.attributes.IV))),n.trigger("data",o);return}if(s=/^#EXT-X-START:?(.*)$/.exec(f),s){o={type:"tag",tagType:"start"},s[1]&&(o.attributes=yn(s[1]),o.attributes["TIME-OFFSET"]=parseFloat(o.attributes["TIME-OFFSET"]),o.attributes.PRECISE=/YES/.test(o.attributes.PRECISE)),n.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT-CONT:?(.*)?$/.exec(f),s){o={type:"tag",tagType:"cue-out-cont"},s[1]?o.data=s[1]:o.data="",n.trigger("data",o);return}if(s=/^#EXT-X-CUE-OUT:?(.*)?$/.exec(f),s){o={type:"tag",tagType:"cue-out"},s[1]?o.data=s[1]:o.data="",n.trigger("data",o);return}if(s=/^#EXT-X-CUE-IN:?(.*)?$/.exec(f),s){o={type:"tag",tagType:"cue-in"},s[1]?o.data=s[1]:o.data="",n.trigger("data",o);return}if(s=/^#EXT-X-SKIP:(.*)$/.exec(f),s&&s[1]){o={type:"tag",tagType:"skip"},o.attributes=yn(s[1]),o.attributes.hasOwnProperty("SKIPPED-SEGMENTS")&&(o.attributes["SKIPPED-SEGMENTS"]=parseInt(o.attributes["SKIPPED-SEGMENTS"],10)),o.attributes.hasOwnProperty("RECENTLY-REMOVED-DATERANGES")&&(o.attributes["RECENTLY-REMOVED-DATERANGES"]=o.attributes["RECENTLY-REMOVED-DATERANGES"].split(dF)),n.trigger("data",o);return}if(s=/^#EXT-X-PART:(.*)$/.exec(f),s&&s[1]){o={type:"tag",tagType:"part"},o.attributes=yn(s[1]),["DURATION"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=parseFloat(o.attributes[I]))}),["INDEPENDENT","GAP"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=/YES/.test(o.attributes[I]))}),o.attributes.hasOwnProperty("BYTERANGE")&&(o.attributes.byterange=tm(o.attributes.BYTERANGE)),n.trigger("data",o);return}if(s=/^#EXT-X-SERVER-CONTROL:(.*)$/.exec(f),s&&s[1]){o={type:"tag",tagType:"server-control"},o.attributes=yn(s[1]),["CAN-SKIP-UNTIL","PART-HOLD-BACK","HOLD-BACK"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=parseFloat(o.attributes[I]))}),["CAN-SKIP-DATERANGES","CAN-BLOCK-RELOAD"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=/YES/.test(o.attributes[I]))}),n.trigger("data",o);return}if(s=/^#EXT-X-PART-INF:(.*)$/.exec(f),s&&s[1]){o={type:"tag",tagType:"part-inf"},o.attributes=yn(s[1]),["PART-TARGET"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=parseFloat(o.attributes[I]))}),n.trigger("data",o);return}if(s=/^#EXT-X-PRELOAD-HINT:(.*)$/.exec(f),s&&s[1]){o={type:"tag",tagType:"preload-hint"},o.attributes=yn(s[1]),["BYTERANGE-START","BYTERANGE-LENGTH"].forEach(function(I){if(o.attributes.hasOwnProperty(I)){o.attributes[I]=parseInt(o.attributes[I],10);var O=I==="BYTERANGE-LENGTH"?"length":"offset";o.attributes.byterange=o.attributes.byterange||{},o.attributes.byterange[O]=o.attributes[I],delete o.attributes[I]}}),n.trigger("data",o);return}if(s=/^#EXT-X-RENDITION-REPORT:(.*)$/.exec(f),s&&s[1]){o={type:"tag",tagType:"rendition-report"},o.attributes=yn(s[1]),["LAST-MSN","LAST-PART"].forEach(function(I){o.attributes.hasOwnProperty(I)&&(o.attributes[I]=parseInt(o.attributes[I],10))}),n.trigger("data",o);return}n.trigger("data",{type:"tag",data:f.slice(4)})})}},i.addParser=function(e){var n=this,s=e.expression,o=e.customType,l=e.dataParser,f=e.segment;typeof l!="function"&&(l=function(v){return v}),this.customParsers.push(function(m){var v=s.exec(m);if(v)return n.trigger("data",{type:"custom",data:l(m),customType:o,segment:f}),!0})},i.addTagMapper=function(e){var n=e.expression,s=e.map,o=function(f){return n.test(f)?s(f):f};this.tagMappers.push(o)},t}(av),hF=function(t){return t.toLowerCase().replace(/-(\w)/g,function(i){return i[1].toUpperCase()})},uu=function(t){var i={};return Object.keys(t).forEach(function(r){i[hF(r)]=t[r]}),i},im=function(t){var i=t.serverControl,r=t.targetDuration,e=t.partTargetDuration;if(i){var n="#EXT-X-SERVER-CONTROL",s="holdBack",o="partHoldBack",l=r&&r*3,f=e&&e*2;r&&!i.hasOwnProperty(s)&&(i[s]=l,this.trigger("info",{message:n+" defaulting HOLD-BACK to targetDuration * 3 ("+l+")."})),l&&i[s]<l&&(this.trigger("warn",{message:n+" clamping HOLD-BACK ("+i[s]+") to targetDuration * 3 ("+l+")"}),i[s]=l),e&&!i.hasOwnProperty(o)&&(i[o]=e*3,this.trigger("info",{message:n+" defaulting PART-HOLD-BACK to partTargetDuration * 3 ("+i[o]+")."})),e&&i[o]<f&&(this.trigger("warn",{message:n+" clamping PART-HOLD-BACK ("+i[o]+") to partTargetDuration * 2 ("+f+")."}),i[o]=f)}},Qx=function(a){Ae(t,a);function t(){var r;r=a.call(this)||this,r.lineStream=new lF,r.parseStream=new cF,r.lineStream.pipe(r.parseStream);var e=Ue(r),n=[],s={},o,l,f=!1,m=function(){},v={AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},y="urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed",E=0;r.manifest={allowCache:!0,discontinuityStarts:[],segments:[]};var I=0,O=0;return r.on("end",function(){s.uri||!s.parts&&!s.preloadHints||(!s.map&&o&&(s.map=o),!s.key&&l&&(s.key=l),!s.timeline&&typeof E=="number"&&(s.timeline=E),r.manifest.preloadSegment=s)}),r.parseStream.on("data",function(D){var R,H;({tag:function(){({version:function(){D.version&&(this.manifest.version=D.version)},"allow-cache":function(){this.manifest.allowCache=D.allowed,"allowed"in D||(this.trigger("info",{message:"defaulting allowCache to YES"}),this.manifest.allowCache=!0)},byterange:function(){var W={};"length"in D&&(s.byterange=W,W.length=D.length,"offset"in D||(D.offset=I)),"offset"in D&&(s.byterange=W,W.offset=D.offset),I=W.offset+W.length},endlist:function(){this.manifest.endList=!0},inf:function(){"mediaSequence"in this.manifest||(this.manifest.mediaSequence=0,this.trigger("info",{message:"defaulting media sequence to zero"})),"discontinuitySequence"in this.manifest||(this.manifest.discontinuitySequence=0,this.trigger("info",{message:"defaulting discontinuity sequence to zero"})),D.duration>0&&(s.duration=D.duration),D.duration===0&&(s.duration=.01,this.trigger("info",{message:"updating zero segment duration to a small value"})),this.manifest.segments=n},key:function(){if(!D.attributes){this.trigger("warn",{message:"ignoring key declaration without attribute list"});return}if(D.attributes.METHOD==="NONE"){l=null;return}if(!D.attributes.URI){this.trigger("warn",{message:"ignoring key declaration without URI"});return}if(D.attributes.KEYFORMAT==="com.apple.streamingkeydelivery"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.apple.fps.1_0"]={attributes:D.attributes};return}if(D.attributes.KEYFORMAT==="com.microsoft.playready"){this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.microsoft.playready"]={uri:D.attributes.URI};return}if(D.attributes.KEYFORMAT===y){var W=["SAMPLE-AES","SAMPLE-AES-CTR","SAMPLE-AES-CENC"];if(W.indexOf(D.attributes.METHOD)===-1){this.trigger("warn",{message:"invalid key method provided for Widevine"});return}if(D.attributes.METHOD==="SAMPLE-AES-CENC"&&this.trigger("warn",{message:"SAMPLE-AES-CENC is deprecated, please use SAMPLE-AES-CTR instead"}),D.attributes.URI.substring(0,23)!=="data:text/plain;base64,"){this.trigger("warn",{message:"invalid key URI provided for Widevine"});return}if(!(D.attributes.KEYID&&D.attributes.KEYID.substring(0,2)==="0x")){this.trigger("warn",{message:"invalid key ID provided for Widevine"});return}this.manifest.contentProtection=this.manifest.contentProtection||{},this.manifest.contentProtection["com.widevine.alpha"]={attributes:{schemeIdUri:D.attributes.KEYFORMAT,keyId:D.attributes.KEYID.substring(2)},pssh:Xx(D.attributes.URI.split(",")[1])};return}D.attributes.METHOD||this.trigger("warn",{message:"defaulting key method to AES-128"}),l={method:D.attributes.METHOD||"AES-128",uri:D.attributes.URI},typeof D.attributes.IV<"u"&&(l.iv=D.attributes.IV)},"media-sequence":function(){if(!isFinite(D.number)){this.trigger("warn",{message:"ignoring invalid media sequence: "+D.number});return}this.manifest.mediaSequence=D.number},"discontinuity-sequence":function(){if(!isFinite(D.number)){this.trigger("warn",{message:"ignoring invalid discontinuity sequence: "+D.number});return}this.manifest.discontinuitySequence=D.number,E=D.number},"playlist-type":function(){if(!/VOD|EVENT/.test(D.playlistType)){this.trigger("warn",{message:"ignoring unknown playlist type: "+D.playlist});return}this.manifest.playlistType=D.playlistType},map:function(){o={},D.uri&&(o.uri=D.uri),D.byterange&&(o.byterange=D.byterange),l&&(o.key=l)},"stream-inf":function(){if(this.manifest.playlists=n,this.manifest.mediaGroups=this.manifest.mediaGroups||v,!D.attributes){this.trigger("warn",{message:"ignoring empty stream-inf attributes"});return}s.attributes||(s.attributes={}),Ni(s.attributes,D.attributes)},media:function(){if(this.manifest.mediaGroups=this.manifest.mediaGroups||v,!(D.attributes&&D.attributes.TYPE&&D.attributes["GROUP-ID"]&&D.attributes.NAME)){this.trigger("warn",{message:"ignoring incomplete or missing media group"});return}var W=this.manifest.mediaGroups[D.attributes.TYPE];W[D.attributes["GROUP-ID"]]=W[D.attributes["GROUP-ID"]]||{},R=W[D.attributes["GROUP-ID"]],H={default:/yes/i.test(D.attributes.DEFAULT)},H.default?H.autoselect=!0:H.autoselect=/yes/i.test(D.attributes.AUTOSELECT),D.attributes.LANGUAGE&&(H.language=D.attributes.LANGUAGE),D.attributes.URI&&(H.uri=D.attributes.URI),D.attributes["INSTREAM-ID"]&&(H.instreamId=D.attributes["INSTREAM-ID"]),D.attributes.CHARACTERISTICS&&(H.characteristics=D.attributes.CHARACTERISTICS),D.attributes.FORCED&&(H.forced=/yes/i.test(D.attributes.FORCED)),R[D.attributes.NAME]=H},discontinuity:function(){E+=1,s.discontinuity=!0,this.manifest.discontinuityStarts.push(n.length)},"program-date-time":function(){typeof this.manifest.dateTimeString>"u"&&(this.manifest.dateTimeString=D.dateTimeString,this.manifest.dateTimeObject=D.dateTimeObject),s.dateTimeString=D.dateTimeString,s.dateTimeObject=D.dateTimeObject},targetduration:function(){if(!isFinite(D.duration)||D.duration<0){this.trigger("warn",{message:"ignoring invalid target duration: "+D.duration});return}this.manifest.targetDuration=D.duration,im.call(this,this.manifest)},start:function(){if(!D.attributes||isNaN(D.attributes["TIME-OFFSET"])){this.trigger("warn",{message:"ignoring start declaration without appropriate attribute list"});return}this.manifest.start={timeOffset:D.attributes["TIME-OFFSET"],precise:D.attributes.PRECISE}},"cue-out":function(){s.cueOut=D.data},"cue-out-cont":function(){s.cueOutCont=D.data},"cue-in":function(){s.cueIn=D.data},skip:function(){this.manifest.skip=uu(D.attributes),this.warnOnMissingAttributes_("#EXT-X-SKIP",D.attributes,["SKIPPED-SEGMENTS"])},part:function(){var W=this;f=!0;var te=this.manifest.segments.length,z=uu(D.attributes);s.parts=s.parts||[],s.parts.push(z),z.byterange&&(z.byterange.hasOwnProperty("offset")||(z.byterange.offset=O),O=z.byterange.offset+z.byterange.length);var q=s.parts.length-1;this.warnOnMissingAttributes_("#EXT-X-PART #"+q+" for segment #"+te,D.attributes,["URI","DURATION"]),this.manifest.renditionReports&&this.manifest.renditionReports.forEach(function(X,j){X.hasOwnProperty("lastPart")||W.trigger("warn",{message:"#EXT-X-RENDITION-REPORT #"+j+" lacks required attribute(s): LAST-PART"})})},"server-control":function(){var W=this.manifest.serverControl=uu(D.attributes);W.hasOwnProperty("canBlockReload")||(W.canBlockReload=!1,this.trigger("info",{message:"#EXT-X-SERVER-CONTROL defaulting CAN-BLOCK-RELOAD to false"})),im.call(this,this.manifest),W.canSkipDateranges&&!W.hasOwnProperty("canSkipUntil")&&this.trigger("warn",{message:"#EXT-X-SERVER-CONTROL lacks required attribute CAN-SKIP-UNTIL which is required when CAN-SKIP-DATERANGES is set"})},"preload-hint":function(){var W=this.manifest.segments.length,te=uu(D.attributes),z=te.type&&te.type==="PART";s.preloadHints=s.preloadHints||[],s.preloadHints.push(te),te.byterange&&(te.byterange.hasOwnProperty("offset")||(te.byterange.offset=z?O:0,z&&(O=te.byterange.offset+te.byterange.length)));var q=s.preloadHints.length-1;if(this.warnOnMissingAttributes_("#EXT-X-PRELOAD-HINT #"+q+" for segment #"+W,D.attributes,["TYPE","URI"]),!!te.type)for(var X=0;X<s.preloadHints.length-1;X++){var j=s.preloadHints[X];j.type&&j.type===te.type&&this.trigger("warn",{message:"#EXT-X-PRELOAD-HINT #"+q+" for segment #"+W+" has the same TYPE "+te.type+" as preload hint #"+X})}},"rendition-report":function(){var W=uu(D.attributes);this.manifest.renditionReports=this.manifest.renditionReports||[],this.manifest.renditionReports.push(W);var te=this.manifest.renditionReports.length-1,z=["LAST-MSN","URI"];f&&z.push("LAST-PART"),this.warnOnMissingAttributes_("#EXT-X-RENDITION-REPORT #"+te,D.attributes,z)},"part-inf":function(){this.manifest.partInf=uu(D.attributes),this.warnOnMissingAttributes_("#EXT-X-PART-INF",D.attributes,["PART-TARGET"]),this.manifest.partInf.partTarget&&(this.manifest.partTargetDuration=this.manifest.partInf.partTarget),im.call(this,this.manifest)}}[D.tagType]||m).call(e)},uri:function(){s.uri=D.uri,n.push(s),this.manifest.targetDuration&&!("duration"in s)&&(this.trigger("warn",{message:"defaulting segment duration to the target duration"}),s.duration=this.manifest.targetDuration),l&&(s.key=l),s.timeline=E,o&&(s.map=o),O=0,s={}},comment:function(){},custom:function(){D.segment?(s.custom=s.custom||{},s.custom[D.customType]=D.data):(this.manifest.custom=this.manifest.custom||{},this.manifest.custom[D.customType]=D.data)}})[D.type].call(e)}),r}var i=t.prototype;return i.warnOnMissingAttributes_=function(e,n,s){var o=[];s.forEach(function(l){n.hasOwnProperty(l)||o.push(l)}),o.length&&this.trigger("warn",{message:e+" lacks required attribute(s): "+o.join(", ")})},i.push=function(e){this.lineStream.push(e)},i.end=function(){this.lineStream.push(`
`),this.trigger("end")},i.addParser=function(e){this.parseStream.addParser(e)},i.addTagMapper=function(e){this.parseStream.addTagMapper(e)},t}(av),xo={mp4:/^(av0?1|avc0?[1234]|vp0?9|flac|opus|mp3|mp4a|mp4v|stpp.ttml.im1t)/,webm:/^(vp0?[89]|av0?1|opus|vorbis)/,ogg:/^(vp0?[89]|theora|flac|opus|vorbis)/,video:/^(av0?1|avc0?[1234]|vp0?[89]|hvc1|hev1|theora|mp4v)/,audio:/^(mp4a|flac|vorbis|opus|ac-[34]|ec-3|alac|mp3|speex|aac)/,text:/^(stpp.ttml.im1t)/,muxerVideo:/^(avc0?1)/,muxerAudio:/^(mp4a)/,muxerText:/a^/},pF=["video","audio","text"],Zy=["Video","Audio","Text"],sv=function(t){return t&&t.replace(/avc1\.(\d+)\.(\d+)/i,function(i,r,e){var n=("00"+Number(r).toString(16)).slice(-2),s=("00"+Number(e).toString(16)).slice(-2);return"avc1."+n+"00"+s})},li=function(t){t===void 0&&(t="");var i=t.split(","),r=[];return i.forEach(function(e){e=e.trim();var n;pF.forEach(function(s){var o=xo[s].exec(e.toLowerCase());if(!(!o||o.length<=1)){n=s;var l=e.substring(0,o[1].length),f=e.replace(l,"");r.push({type:l,details:f,mediaType:s})}}),n||r.push({type:e,details:"",mediaType:"unknown"})}),r},Yx=function(t,i){if(!t.mediaGroups.AUDIO||!i)return null;var r=t.mediaGroups.AUDIO[i];if(!r)return null;for(var e in r){var n=r[e];if(n.default&&n.playlists)return li(n.playlists[0].attributes.CODECS)}return null},ov=function(t){return t===void 0&&(t=""),xo.audio.test(t.trim().toLowerCase())},mF=function(t){return t===void 0&&(t=""),xo.text.test(t.trim().toLowerCase())},Fa=function(t){if(!(!t||typeof t!="string")){var i=t.toLowerCase().split(",").map(function(n){return sv(n.trim())}),r="video";i.length===1&&ov(i[0])?r="audio":i.length===1&&mF(i[0])&&(r="application");var e="mp4";return i.every(function(n){return xo.mp4.test(n)})?e="mp4":i.every(function(n){return xo.webm.test(n)})?e="webm":i.every(function(n){return xo.ogg.test(n)})&&(e="ogg"),r+"/"+e+';codecs="'+t+'"'}},_s=function(t){return t===void 0&&(t=""),F.MediaSource&&F.MediaSource.isTypeSupported&&F.MediaSource.isTypeSupported(Fa(t))||!1},Lu=function(t){return t===void 0&&(t=""),t.toLowerCase().split(",").every(function(i){i=i.trim();for(var r=0;r<Zy.length;r++){var e=Zy[r];if(xo["muxer"+e].test(i))return!0}return!1})},Bc="mp4a.40.2",Jx="avc1.4d400d",gF=/^(audio|video|application)\/(x-|vnd\.apple\.)?mpegurl/i,vF=/^application\/dash\+xml/i,Mh=function(t){return gF.test(t)?"hls":vF.test(t)?"dash":t==="application/vnd.videojs.vhs+json"?"vhs-json":null},_F=function(t){return t.toString(2).length},yF=function(t){return Math.ceil(_F(t)/8)},uv=function(t){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer},TF=function(t){return uv(t)},$e=function(t){return t instanceof Uint8Array?t:(!Array.isArray(t)&&!TF(t)&&!(t instanceof ArrayBuffer)&&(typeof t!="number"||typeof t=="number"&&t!==t?t=0:t=[t]),new Uint8Array(t&&t.buffer||t,t&&t.byteOffset||0,t&&t.byteLength||0))},Ci=F.BigInt||Number,zm=[Ci("0x1"),Ci("0x100"),Ci("0x10000"),Ci("0x1000000"),Ci("0x100000000"),Ci("0x10000000000"),Ci("0x1000000000000"),Ci("0x100000000000000"),Ci("0x10000000000000000")];(function(){var a=new Uint16Array([65484]),t=new Uint8Array(a.buffer,a.byteOffset,a.byteLength);return t[0]===255?"big":t[0]===204?"little":"unknown"})();var bF=function(t,i){var r=i===void 0?{}:i,e=r.signed,n=e===void 0?!1:e,s=r.le,o=s===void 0?!1:s;t=$e(t);var l=o?"reduce":"reduceRight",f=t[l]?t[l]:Array.prototype[l],m=f.call(t,function(y,E,I){var O=o?I:Math.abs(I+1-t.length);return y+Ci(E)*zm[O]},Ci(0));if(n){var v=zm[t.length]/Ci(2)-Ci(1);m=Ci(m),m>v&&(m-=v,m-=v,m-=Ci(2))}return Number(m)},xF=function(t,i){var r=i===void 0?{}:i,e=r.le,n=e===void 0?!1:e;(typeof t!="bigint"&&typeof t!="number"||typeof t=="number"&&t!==t)&&(t=0),t=Ci(t);for(var s=yF(t),o=new Uint8Array(new ArrayBuffer(s)),l=0;l<s;l++){var f=n?l:Math.abs(l+1-o.length);o[f]=Number(t/zm[l]&Ci(255)),t<0&&(o[f]=Math.abs(~o[f]),o[f]-=l===0?1:2)}return o},lv=function(t,i){if(typeof t!="string"&&t&&typeof t.toString=="function"&&(t=t.toString()),typeof t!="string")return new Uint8Array;i||(t=unescape(encodeURIComponent(t)));for(var r=new Uint8Array(t.length),e=0;e<t.length;e++)r[e]=t.charCodeAt(e);return r},Zx=function(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];if(i=i.filter(function(o){return o&&(o.byteLength||o.length)&&typeof o!="string"}),i.length<=1)return $e(i[0]);var e=i.reduce(function(o,l,f){return o+(l.byteLength||l.length)},0),n=new Uint8Array(e),s=0;return i.forEach(function(o){o=$e(o),n.set(o,s),s+=o.byteLength}),n},jt=function(t,i,r){var e=r===void 0?{}:r,n=e.offset,s=n===void 0?0:n,o=e.mask,l=o===void 0?[]:o;t=$e(t),i=$e(i);var f=i.every?i.every:Array.prototype.every;return i.length&&t.length-s>=i.length&&f.call(i,function(m,v){var y=l[v]?l[v]&t[s+v]:t[s+v];return m===y})},SF=function(t,i,r){i.forEach(function(e){for(var n in t.mediaGroups[e])for(var s in t.mediaGroups[e][n]){var o=t.mediaGroups[e][n][s];r(o,e,n,s)}})},As={},Ha={};function EF(a,t,i){if(i===void 0&&(i=Array.prototype),a&&typeof i.find=="function")return i.find.call(a,t);for(var r=0;r<a.length;r++)if(Object.prototype.hasOwnProperty.call(a,r)){var e=a[r];if(t.call(void 0,e,r,a))return e}}function dv(a,t){return t===void 0&&(t=Object),t&&typeof t.freeze=="function"?t.freeze(a):a}function wF(a,t){if(a===null||typeof a!="object")throw new TypeError("target is not an object");for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(a[i]=t[i]);return a}var eS=dv({HTML:"text/html",isHTML:function(a){return a===eS.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),tS=dv({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(a){return a===tS.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Ha.assign=wF;Ha.find=EF;Ha.freeze=dv;Ha.MIME_TYPE=eS;Ha.NAMESPACE=tS;var iS=Ha,na=iS.find,$d=iS.NAMESPACE;function CF(a){return a!==""}function AF(a){return a?a.split(/[\t\n\f\r ]+/).filter(CF):[]}function IF(a,t){return a.hasOwnProperty(t)||(a[t]=!0),a}function eT(a){if(!a)return[];var t=AF(a);return Object.keys(t.reduce(IF,{}))}function PF(a){return function(t){return a&&a.indexOf(t)!==-1}}function af(a,t){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}function mr(a,t){var i=a.prototype;if(!(i instanceof t)){let r=function(){};r.prototype=t.prototype,r=new r,af(i,r),a.prototype=i=r}i.constructor!=a&&(typeof a!="function"&&console.error("unknown Class:"+a),i.constructor=a)}var gr={},An=gr.ELEMENT_NODE=1,ju=gr.ATTRIBUTE_NODE=2,jc=gr.TEXT_NODE=3,rS=gr.CDATA_SECTION_NODE=4,nS=gr.ENTITY_REFERENCE_NODE=5,OF=gr.ENTITY_NODE=6,aS=gr.PROCESSING_INSTRUCTION_NODE=7,sS=gr.COMMENT_NODE=8,oS=gr.DOCUMENT_NODE=9,uS=gr.DOCUMENT_TYPE_NODE=10,Na=gr.DOCUMENT_FRAGMENT_NODE=11,DF=gr.NOTATION_NODE=12,Ui={},vi={};Ui.INDEX_SIZE_ERR=(vi[1]="Index size error",1);Ui.DOMSTRING_SIZE_ERR=(vi[2]="DOMString size error",2);var cr=Ui.HIERARCHY_REQUEST_ERR=(vi[3]="Hierarchy request error",3);Ui.WRONG_DOCUMENT_ERR=(vi[4]="Wrong document",4);Ui.INVALID_CHARACTER_ERR=(vi[5]="Invalid character",5);Ui.NO_DATA_ALLOWED_ERR=(vi[6]="No data allowed",6);Ui.NO_MODIFICATION_ALLOWED_ERR=(vi[7]="No modification allowed",7);var lS=Ui.NOT_FOUND_ERR=(vi[8]="Not found",8);Ui.NOT_SUPPORTED_ERR=(vi[9]="Not supported",9);var tT=Ui.INUSE_ATTRIBUTE_ERR=(vi[10]="Attribute in use",10);Ui.INVALID_STATE_ERR=(vi[11]="Invalid state",11);Ui.SYNTAX_ERR=(vi[12]="Syntax error",12);Ui.INVALID_MODIFICATION_ERR=(vi[13]="Invalid modification",13);Ui.NAMESPACE_ERR=(vi[14]="Invalid namespace",14);Ui.INVALID_ACCESS_ERR=(vi[15]="Invalid access",15);function ei(a,t){if(t instanceof Error)var i=t;else i=this,Error.call(this,vi[a]),this.message=vi[a],Error.captureStackTrace&&Error.captureStackTrace(this,ei);return i.code=a,t&&(this.message=this.message+": "+t),i}ei.prototype=Error.prototype;af(Ui,ei);function Da(){}Da.prototype={length:0,item:function(a){return this[a]||null},toString:function(a,t){for(var i=[],r=0;r<this.length;r++)xu(this[r],i,a,t);return i.join("")},filter:function(a){return Array.prototype.filter.call(this,a)},indexOf:function(a){return Array.prototype.indexOf.call(this,a)}};function Vu(a,t){this._node=a,this._refresh=t,fv(this)}function fv(a){var t=a._node._inc||a._node.ownerDocument._inc;if(a._inc!=t){var i=a._refresh(a._node);bS(a,"length",i.length),af(i,a),a._inc=t}}Vu.prototype.item=function(a){return fv(this),this[a]};mr(Vu,Da);function Vc(){}function dS(a,t){for(var i=a.length;i--;)if(a[i]===t)return i}function iT(a,t,i,r){if(r?t[dS(t,r)]=i:t[t.length++]=i,a){i.ownerElement=a;var e=a.ownerDocument;e&&(r&&hS(e,a,r),LF(e,a,i))}}function rT(a,t,i){var r=dS(t,i);if(r>=0){for(var e=t.length-1;r<e;)t[r]=t[++r];if(t.length=e,a){var n=a.ownerDocument;n&&(hS(n,a,i),i.ownerElement=null)}}else throw new ei(lS,new Error(a.tagName+"@"+i))}Vc.prototype={length:0,item:Da.prototype.item,getNamedItem:function(a){for(var t=this.length;t--;){var i=this[t];if(i.nodeName==a)return i}},setNamedItem:function(a){var t=a.ownerElement;if(t&&t!=this._ownerElement)throw new ei(tT);var i=this.getNamedItem(a.nodeName);return iT(this._ownerElement,this,a,i),i},setNamedItemNS:function(a){var t=a.ownerElement,i;if(t&&t!=this._ownerElement)throw new ei(tT);return i=this.getNamedItemNS(a.namespaceURI,a.localName),iT(this._ownerElement,this,a,i),i},removeNamedItem:function(a){var t=this.getNamedItem(a);return rT(this._ownerElement,this,t),t},removeNamedItemNS:function(a,t){var i=this.getNamedItemNS(a,t);return rT(this._ownerElement,this,i),i},getNamedItemNS:function(a,t){for(var i=this.length;i--;){var r=this[i];if(r.localName==t&&r.namespaceURI==a)return r}return null}};function fS(){}fS.prototype={hasFeature:function(a,t){return!0},createDocument:function(a,t,i){var r=new sf;if(r.implementation=this,r.childNodes=new Da,r.doctype=i||null,i&&r.appendChild(i),t){var e=r.createElementNS(a,t);r.appendChild(e)}return r},createDocumentType:function(a,t,i){var r=new Fh;return r.name=a,r.nodeName=a,r.publicId=t||"",r.systemId=i||"",r}};function Ot(){}Ot.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(a,t){return Hc(this,a,t)},replaceChild:function(a,t){Hc(this,a,t,mS),t&&this.removeChild(t)},removeChild:function(a){return pS(this,a)},appendChild:function(a){return this.insertBefore(a,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(a){return Km(this.ownerDocument||this,this,a)},normalize:function(){for(var a=this.firstChild;a;){var t=a.nextSibling;t&&t.nodeType==jc&&a.nodeType==jc?(this.removeChild(t),a.appendData(t.data)):(a.normalize(),a=t)}},isSupported:function(a,t){return this.ownerDocument.implementation.hasFeature(a,t)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(a){for(var t=this;t;){var i=t._nsMap;if(i){for(var r in i)if(Object.prototype.hasOwnProperty.call(i,r)&&i[r]===a)return r}t=t.nodeType==ju?t.ownerDocument:t.parentNode}return null},lookupNamespaceURI:function(a){for(var t=this;t;){var i=t._nsMap;if(i&&Object.prototype.hasOwnProperty.call(i,a))return i[a];t=t.nodeType==ju?t.ownerDocument:t.parentNode}return null},isDefaultNamespace:function(a){var t=this.lookupPrefix(a);return t==null}};function cS(a){return a=="<"&&"&lt;"||a==">"&&"&gt;"||a=="&"&&"&amp;"||a=='"'&&"&quot;"||"&#"+a.charCodeAt()+";"}af(gr,Ot);af(gr,Ot.prototype);function Wd(a,t){if(t(a))return!0;if(a=a.firstChild)do{if(Wd(a,t))return!0}while(a=a.nextSibling)}function sf(){this.ownerDocument=this}function LF(a,t,i){a&&a._inc++;var r=i.namespaceURI;r===$d.XMLNS&&(t._nsMap[i.prefix?i.localName:""]=i.value)}function hS(a,t,i,r){a&&a._inc++;var e=i.namespaceURI;e===$d.XMLNS&&delete t._nsMap[i.prefix?i.localName:""]}function cv(a,t,i){if(a&&a._inc){a._inc++;var r=t.childNodes;if(i)r[r.length++]=i;else{for(var e=t.firstChild,n=0;e;)r[n++]=e,e=e.nextSibling;r.length=n,delete r[r.length]}}}function pS(a,t){var i=t.previousSibling,r=t.nextSibling;return i?i.nextSibling=r:a.firstChild=r,r?r.previousSibling=i:a.lastChild=i,t.parentNode=null,t.previousSibling=null,t.nextSibling=null,cv(a.ownerDocument,a),t}function kF(a){return a&&(a.nodeType===Ot.DOCUMENT_NODE||a.nodeType===Ot.DOCUMENT_FRAGMENT_NODE||a.nodeType===Ot.ELEMENT_NODE)}function RF(a){return a&&(aa(a)||hv(a)||Ua(a)||a.nodeType===Ot.DOCUMENT_FRAGMENT_NODE||a.nodeType===Ot.COMMENT_NODE||a.nodeType===Ot.PROCESSING_INSTRUCTION_NODE)}function Ua(a){return a&&a.nodeType===Ot.DOCUMENT_TYPE_NODE}function aa(a){return a&&a.nodeType===Ot.ELEMENT_NODE}function hv(a){return a&&a.nodeType===Ot.TEXT_NODE}function nT(a,t){var i=a.childNodes||[];if(na(i,aa)||Ua(t))return!1;var r=na(i,Ua);return!(t&&r&&i.indexOf(r)>i.indexOf(t))}function aT(a,t){var i=a.childNodes||[];function r(n){return aa(n)&&n!==t}if(na(i,r))return!1;var e=na(i,Ua);return!(t&&e&&i.indexOf(e)>i.indexOf(t))}function MF(a,t,i){if(!kF(a))throw new ei(cr,"Unexpected parent node type "+a.nodeType);if(i&&i.parentNode!==a)throw new ei(lS,"child not in parent");if(!RF(t)||Ua(t)&&a.nodeType!==Ot.DOCUMENT_NODE)throw new ei(cr,"Unexpected node type "+t.nodeType+" for parent node type "+a.nodeType)}function FF(a,t,i){var r=a.childNodes||[],e=t.childNodes||[];if(t.nodeType===Ot.DOCUMENT_FRAGMENT_NODE){var n=e.filter(aa);if(n.length>1||na(e,hv))throw new ei(cr,"More than one element or text in fragment");if(n.length===1&&!nT(a,i))throw new ei(cr,"Element in fragment can not be inserted before doctype")}if(aa(t)&&!nT(a,i))throw new ei(cr,"Only one element can be added and only after doctype");if(Ua(t)){if(na(r,Ua))throw new ei(cr,"Only one doctype is allowed");var s=na(r,aa);if(i&&r.indexOf(s)<r.indexOf(i))throw new ei(cr,"Doctype can only be inserted before an element");if(!i&&s)throw new ei(cr,"Doctype can not be appended since element is present")}}function mS(a,t,i){var r=a.childNodes||[],e=t.childNodes||[];if(t.nodeType===Ot.DOCUMENT_FRAGMENT_NODE){var n=e.filter(aa);if(n.length>1||na(e,hv))throw new ei(cr,"More than one element or text in fragment");if(n.length===1&&!aT(a,i))throw new ei(cr,"Element in fragment can not be inserted before doctype")}if(aa(t)&&!aT(a,i))throw new ei(cr,"Only one element can be added and only after doctype");if(Ua(t)){if(na(r,function(l){return Ua(l)&&l!==i}))throw new ei(cr,"Only one doctype is allowed");var s=na(r,aa);if(i&&r.indexOf(s)<r.indexOf(i))throw new ei(cr,"Doctype can only be inserted before an element")}}function Hc(a,t,i,r){MF(a,t,i),a.nodeType===Ot.DOCUMENT_NODE&&(r||FF)(a,t,i);var e=t.parentNode;if(e&&e.removeChild(t),t.nodeType===Na){var n=t.firstChild;if(n==null)return t;var s=t.lastChild}else n=s=t;var o=i?i.previousSibling:a.lastChild;n.previousSibling=o,s.nextSibling=i,o?o.nextSibling=n:a.firstChild=n,i==null?a.lastChild=s:i.previousSibling=s;do{n.parentNode=a}while(n!==s&&(n=n.nextSibling));return cv(a.ownerDocument||a,a),t.nodeType==Na&&(t.firstChild=t.lastChild=null),t}function NF(a,t){return t.parentNode&&t.parentNode.removeChild(t),t.parentNode=a,t.previousSibling=a.lastChild,t.nextSibling=null,t.previousSibling?t.previousSibling.nextSibling=t:a.firstChild=t,a.lastChild=t,cv(a.ownerDocument,a,t),t}sf.prototype={nodeName:"#document",nodeType:oS,doctype:null,documentElement:null,_inc:1,insertBefore:function(a,t){if(a.nodeType==Na){for(var i=a.firstChild;i;){var r=i.nextSibling;this.insertBefore(i,t),i=r}return a}return Hc(this,a,t),a.ownerDocument=this,this.documentElement===null&&a.nodeType===An&&(this.documentElement=a),a},removeChild:function(a){return this.documentElement==a&&(this.documentElement=null),pS(this,a)},replaceChild:function(a,t){Hc(this,a,t,mS),a.ownerDocument=this,t&&this.removeChild(t),aa(a)&&(this.documentElement=a)},importNode:function(a,t){return TS(this,a,t)},getElementById:function(a){var t=null;return Wd(this.documentElement,function(i){if(i.nodeType==An&&i.getAttribute("id")==a)return t=i,!0}),t},getElementsByClassName:function(a){var t=eT(a);return new Vu(this,function(i){var r=[];return t.length>0&&Wd(i.documentElement,function(e){if(e!==i&&e.nodeType===An){var n=e.getAttribute("class");if(n){var s=a===n;if(!s){var o=eT(n);s=t.every(PF(o))}s&&r.push(e)}}}),r})},createElement:function(a){var t=new Io;t.ownerDocument=this,t.nodeName=a,t.tagName=a,t.localName=a,t.childNodes=new Da;var i=t.attributes=new Vc;return i._ownerElement=t,t},createDocumentFragment:function(){var a=new Nh;return a.ownerDocument=this,a.childNodes=new Da,a},createTextNode:function(a){var t=new pv;return t.ownerDocument=this,t.appendData(a),t},createComment:function(a){var t=new mv;return t.ownerDocument=this,t.appendData(a),t},createCDATASection:function(a){var t=new gv;return t.ownerDocument=this,t.appendData(a),t},createProcessingInstruction:function(a,t){var i=new _v;return i.ownerDocument=this,i.tagName=i.target=a,i.nodeValue=i.data=t,i},createAttribute:function(a){var t=new $c;return t.ownerDocument=this,t.name=a,t.nodeName=a,t.localName=a,t.specified=!0,t},createEntityReference:function(a){var t=new vv;return t.ownerDocument=this,t.nodeName=a,t},createElementNS:function(a,t){var i=new Io,r=t.split(":"),e=i.attributes=new Vc;return i.childNodes=new Da,i.ownerDocument=this,i.nodeName=t,i.tagName=t,i.namespaceURI=a,r.length==2?(i.prefix=r[0],i.localName=r[1]):i.localName=t,e._ownerElement=i,i},createAttributeNS:function(a,t){var i=new $c,r=t.split(":");return i.ownerDocument=this,i.nodeName=t,i.name=t,i.namespaceURI=a,i.specified=!0,r.length==2?(i.prefix=r[0],i.localName=r[1]):i.localName=t,i}};mr(sf,Ot);function Io(){this._nsMap={}}Io.prototype={nodeType:An,hasAttribute:function(a){return this.getAttributeNode(a)!=null},getAttribute:function(a){var t=this.getAttributeNode(a);return t&&t.value||""},getAttributeNode:function(a){return this.attributes.getNamedItem(a)},setAttribute:function(a,t){var i=this.ownerDocument.createAttribute(a);i.value=i.nodeValue=""+t,this.setAttributeNode(i)},removeAttribute:function(a){var t=this.getAttributeNode(a);t&&this.removeAttributeNode(t)},appendChild:function(a){return a.nodeType===Na?this.insertBefore(a,null):NF(this,a)},setAttributeNode:function(a){return this.attributes.setNamedItem(a)},setAttributeNodeNS:function(a){return this.attributes.setNamedItemNS(a)},removeAttributeNode:function(a){return this.attributes.removeNamedItem(a.nodeName)},removeAttributeNS:function(a,t){var i=this.getAttributeNodeNS(a,t);i&&this.removeAttributeNode(i)},hasAttributeNS:function(a,t){return this.getAttributeNodeNS(a,t)!=null},getAttributeNS:function(a,t){var i=this.getAttributeNodeNS(a,t);return i&&i.value||""},setAttributeNS:function(a,t,i){var r=this.ownerDocument.createAttributeNS(a,t);r.value=r.nodeValue=""+i,this.setAttributeNode(r)},getAttributeNodeNS:function(a,t){return this.attributes.getNamedItemNS(a,t)},getElementsByTagName:function(a){return new Vu(this,function(t){var i=[];return Wd(t,function(r){r!==t&&r.nodeType==An&&(a==="*"||r.tagName==a)&&i.push(r)}),i})},getElementsByTagNameNS:function(a,t){return new Vu(this,function(i){var r=[];return Wd(i,function(e){e!==i&&e.nodeType===An&&(a==="*"||e.namespaceURI===a)&&(t==="*"||e.localName==t)&&r.push(e)}),r})}};sf.prototype.getElementsByTagName=Io.prototype.getElementsByTagName;sf.prototype.getElementsByTagNameNS=Io.prototype.getElementsByTagNameNS;mr(Io,Ot);function $c(){}$c.prototype.nodeType=ju;mr($c,Ot);function of(){}of.prototype={data:"",substringData:function(a,t){return this.data.substring(a,a+t)},appendData:function(a){a=this.data+a,this.nodeValue=this.data=a,this.length=a.length},insertData:function(a,t){this.replaceData(a,0,t)},appendChild:function(a){throw new Error(vi[cr])},deleteData:function(a,t){this.replaceData(a,t,"")},replaceData:function(a,t,i){var r=this.data.substring(0,a),e=this.data.substring(a+t);i=r+i+e,this.nodeValue=this.data=i,this.length=i.length}};mr(of,Ot);function pv(){}pv.prototype={nodeName:"#text",nodeType:jc,splitText:function(a){var t=this.data,i=t.substring(a);t=t.substring(0,a),this.data=this.nodeValue=t,this.length=t.length;var r=this.ownerDocument.createTextNode(i);return this.parentNode&&this.parentNode.insertBefore(r,this.nextSibling),r}};mr(pv,of);function mv(){}mv.prototype={nodeName:"#comment",nodeType:sS};mr(mv,of);function gv(){}gv.prototype={nodeName:"#cdata-section",nodeType:rS};mr(gv,of);function Fh(){}Fh.prototype.nodeType=uS;mr(Fh,Ot);function gS(){}gS.prototype.nodeType=DF;mr(gS,Ot);function vS(){}vS.prototype.nodeType=OF;mr(vS,Ot);function vv(){}vv.prototype.nodeType=nS;mr(vv,Ot);function Nh(){}Nh.prototype.nodeName="#document-fragment";Nh.prototype.nodeType=Na;mr(Nh,Ot);function _v(){}_v.prototype.nodeType=aS;mr(_v,Ot);function _S(){}_S.prototype.serializeToString=function(a,t,i){return yS.call(a,t,i)};Ot.prototype.toString=yS;function yS(a,t){var i=[],r=this.nodeType==9&&this.documentElement||this,e=r.prefix,n=r.namespaceURI;if(n&&e==null){var e=r.lookupPrefix(n);if(e==null)var s=[{namespace:n,prefix:null}]}return xu(this,i,a,t,s),i.join("")}function sT(a,t,i){var r=a.prefix||"",e=a.namespaceURI;if(!e||r==="xml"&&e===$d.XML||e===$d.XMLNS)return!1;for(var n=i.length;n--;){var s=i[n];if(s.prefix===r)return s.namespace!==e}return!0}function rm(a,t,i){a.push(" ",t,'="',i.replace(/[<>&"\t\n\r]/g,cS),'"')}function xu(a,t,i,r,e){if(e||(e=[]),r)if(a=r(a),a){if(typeof a=="string"){t.push(a);return}}else return;switch(a.nodeType){case An:var n=a.attributes,s=n.length,R=a.firstChild,o=a.tagName;i=$d.isHTML(a.namespaceURI)||i;var l=o;if(!i&&!a.prefix&&a.namespaceURI){for(var f,m=0;m<n.length;m++)if(n.item(m).name==="xmlns"){f=n.item(m).value;break}if(!f)for(var v=e.length-1;v>=0;v--){var y=e[v];if(y.prefix===""&&y.namespace===a.namespaceURI){f=y.namespace;break}}if(f!==a.namespaceURI)for(var v=e.length-1;v>=0;v--){var y=e[v];if(y.namespace===a.namespaceURI){y.prefix&&(l=y.prefix+":"+o);break}}}t.push("<",l);for(var E=0;E<s;E++){var I=n.item(E);I.prefix=="xmlns"?e.push({prefix:I.localName,namespace:I.value}):I.nodeName=="xmlns"&&e.push({prefix:"",namespace:I.value})}for(var E=0;E<s;E++){var I=n.item(E);if(sT(I,i,e)){var O=I.prefix||"",D=I.namespaceURI;rm(t,O?"xmlns:"+O:"xmlns",D),e.push({prefix:O,namespace:D})}xu(I,t,i,r,e)}if(o===l&&sT(a,i,e)){var O=a.prefix||"",D=a.namespaceURI;rm(t,O?"xmlns:"+O:"xmlns",D),e.push({prefix:O,namespace:D})}if(R||i&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(t.push(">"),i&&/^script$/i.test(o))for(;R;)R.data?t.push(R.data):xu(R,t,i,r,e.slice()),R=R.nextSibling;else for(;R;)xu(R,t,i,r,e.slice()),R=R.nextSibling;t.push("</",l,">")}else t.push("/>");return;case oS:case Na:for(var R=a.firstChild;R;)xu(R,t,i,r,e.slice()),R=R.nextSibling;return;case ju:return rm(t,a.name,a.value);case jc:return t.push(a.data.replace(/[<&>]/g,cS));case rS:return t.push("<![CDATA[",a.data,"]]>");case sS:return t.push("\x3c!--",a.data,"--\x3e");case uS:var H=a.publicId,Z=a.systemId;if(t.push("<!DOCTYPE ",a.name),H)t.push(" PUBLIC ",H),Z&&Z!="."&&t.push(" ",Z),t.push(">");else if(Z&&Z!=".")t.push(" SYSTEM ",Z,">");else{var V=a.internalSubset;V&&t.push(" [",V,"]"),t.push(">")}return;case aS:return t.push("<?",a.target," ",a.data,"?>");case nS:return t.push("&",a.nodeName,";");default:t.push("??",a.nodeName)}}function TS(a,t,i){var r;switch(t.nodeType){case An:r=t.cloneNode(!1),r.ownerDocument=a;case Na:break;case ju:i=!0;break}if(r||(r=t.cloneNode(!1)),r.ownerDocument=a,r.parentNode=null,i)for(var e=t.firstChild;e;)r.appendChild(TS(a,e,i)),e=e.nextSibling;return r}function Km(a,t,i){var r=new t.constructor;for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e)){var n=t[e];typeof n!="object"&&n!=r[e]&&(r[e]=n)}switch(t.childNodes&&(r.childNodes=new Da),r.ownerDocument=a,r.nodeType){case An:var s=t.attributes,o=r.attributes=new Vc,l=s.length;o._ownerElement=r;for(var f=0;f<l;f++)r.setAttributeNode(Km(a,s.item(f),!0));break;case ju:i=!0}if(i)for(var m=t.firstChild;m;)r.appendChild(Km(a,m,i)),m=m.nextSibling;return r}function bS(a,t,i){a[t]=i}try{if(Object.defineProperty){let a=function(t){switch(t.nodeType){case An:case Na:var i=[];for(t=t.firstChild;t;)t.nodeType!==7&&t.nodeType!==8&&i.push(a(t)),t=t.nextSibling;return i.join("");default:return t.nodeValue}};Object.defineProperty(Vu.prototype,"length",{get:function(){return fv(this),this.$$length}}),Object.defineProperty(Ot.prototype,"textContent",{get:function(){return a(this)},set:function(t){switch(this.nodeType){case An:case Na:for(;this.firstChild;)this.removeChild(this.firstChild);(t||String(t))&&this.appendChild(this.ownerDocument.createTextNode(t));break;default:this.data=t,this.value=t,this.nodeValue=t}}}),bS=function(t,i,r){t["$$"+i]=r}}}catch{}As.DocumentType=Fh;As.DOMException=ei;As.DOMImplementation=fS;As.Element=Io;As.Node=Ot;As.NodeList=Da;As.XMLSerializer=_S;var Uh={},xS={};(function(a){var t=Ha.freeze;a.XML_ENTITIES=t({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),a.HTML_ENTITIES=t({lt:"<",gt:">",amp:"&",quot:'"',apos:"'",Agrave:"",Aacute:"",Acirc:"",Atilde:"",Auml:"",Aring:"",AElig:"",Ccedil:"",Egrave:"",Eacute:"",Ecirc:"",Euml:"",Igrave:"",Iacute:"",Icirc:"",Iuml:"",ETH:"",Ntilde:"",Ograve:"",Oacute:"",Ocirc:"",Otilde:"",Ouml:"",Oslash:"",Ugrave:"",Uacute:"",Ucirc:"",Uuml:"",Yacute:"",THORN:"",szlig:"",agrave:"",aacute:"",acirc:"",atilde:"",auml:"",aring:"",aelig:"",ccedil:"",egrave:"",eacute:"",ecirc:"",euml:"",igrave:"",iacute:"",icirc:"",iuml:"",eth:"",ntilde:"",ograve:"",oacute:"",ocirc:"",otilde:"",ouml:"",oslash:"",ugrave:"",uacute:"",ucirc:"",uuml:"",yacute:"",thorn:"",yuml:"",nbsp:"",iexcl:"",cent:"",pound:"",curren:"",yen:"",brvbar:"",sect:"",uml:"",copy:"",ordf:"",laquo:"",not:"",shy:"",reg:"",macr:"",deg:"",plusmn:"",sup2:"",sup3:"",acute:"",micro:"",para:"",middot:"",cedil:"",sup1:"",ordm:"",raquo:"",frac14:"",frac12:"",frac34:"",iquest:"",times:"",divide:"",forall:"",part:"",exist:"",empty:"",nabla:"",isin:"",notin:"",ni:"",prod:"",sum:"",minus:"",lowast:"",radic:"",prop:"",infin:"",ang:"",and:"",or:"",cap:"",cup:"",int:"",there4:"",sim:"",cong:"",asymp:"",ne:"",equiv:"",le:"",ge:"",sub:"",sup:"",nsub:"",sube:"",supe:"",oplus:"",otimes:"",perp:"",sdot:"",Alpha:"",Beta:"",Gamma:"",Delta:"",Epsilon:"",Zeta:"",Eta:"",Theta:"",Iota:"",Kappa:"",Lambda:"",Mu:"",Nu:"",Xi:"",Omicron:"",Pi:"",Rho:"",Sigma:"",Tau:"",Upsilon:"",Phi:"",Chi:"",Psi:"",Omega:"",alpha:"",beta:"",gamma:"",delta:"",epsilon:"",zeta:"",eta:"",theta:"",iota:"",kappa:"",lambda:"",mu:"",nu:"",xi:"",omicron:"",pi:"",rho:"",sigmaf:"",sigma:"",tau:"",upsilon:"",phi:"",chi:"",psi:"",omega:"",thetasym:"",upsih:"",piv:"",OElig:"",oelig:"",Scaron:"",scaron:"",Yuml:"",fnof:"",circ:"",tilde:"",ensp:"",emsp:"",thinsp:"",zwnj:"",zwj:"",lrm:"",rlm:"",ndash:"",mdash:"",lsquo:"",rsquo:"",sbquo:"",ldquo:"",rdquo:"",bdquo:"",dagger:"",Dagger:"",bull:"",hellip:"",permil:"",prime:"",Prime:"",lsaquo:"",rsaquo:"",oline:"",euro:"",trade:"",larr:"",uarr:"",rarr:"",darr:"",harr:"",crarr:"",lceil:"",rceil:"",lfloor:"",rfloor:"",loz:"",spades:"",clubs:"",hearts:"",diams:""}),a.entityMap=a.HTML_ENTITIES})(xS);var yv={},qd=Ha.NAMESPACE,Xm=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,oT=new RegExp("[\\-\\.0-9"+Xm.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),uT=new RegExp("^"+Xm.source+oT.source+"*(?::"+Xm.source+oT.source+"*)?$"),ud=0,hs=1,lu=2,ld=3,du=4,fu=5,dd=6,rc=7;function Hu(a,t){this.message=a,this.locator=t,Error.captureStackTrace&&Error.captureStackTrace(this,Hu)}Hu.prototype=new Error;Hu.prototype.name=Hu.name;function SS(){}SS.prototype={parse:function(a,t,i){var r=this.domBuilder;r.startDocument(),ES(t,t={}),UF(a,t,i,r,this.errorHandler),r.endDocument()}};function UF(a,t,i,r,e){function n(pe){if(pe>65535){pe-=65536;var ne=55296+(pe>>10),fe=56320+(pe&1023);return String.fromCharCode(ne,fe)}else return String.fromCharCode(pe)}function s(pe){var ne=pe.slice(1,-1);return Object.hasOwnProperty.call(i,ne)?i[ne]:ne.charAt(0)==="#"?n(parseInt(ne.substr(1).replace("x","0x"))):(e.error("entity not found:"+pe),pe)}function o(pe){if(pe>O){var ne=a.substring(O,pe).replace(/&#?\w+;/g,s);y&&l(O),r.characters(ne,0,pe-O),O=pe}}function l(pe,ne){for(;pe>=m&&(ne=v.exec(a));)f=ne.index,m=f+ne[0].length,y.lineNumber++;y.columnNumber=pe-f+1}for(var f=0,m=0,v=/.*(?:\r\n?|\n)|.*$/g,y=r.locator,E=[{currentNSMap:t}],I={},O=0;;){try{var D=a.indexOf("<",O);if(D<0){if(!a.substr(O).match(/^\s*$/)){var R=r.doc,H=R.createTextNode(a.substr(O));R.appendChild(H),r.currentElement=H}return}switch(D>O&&o(D),a.charAt(D+1)){case"/":var oe=a.indexOf(">",D+3),Z=a.substring(D+2,oe).replace(/[ \t\n\r]+$/g,""),V=E.pop();oe<0?(Z=a.substring(D+2).replace(/[\s<].*/,""),e.error("end tag name: "+Z+" is not complete:"+V.tagName),oe=D+1+Z.length):Z.match(/\s</)&&(Z=Z.replace(/[\s<].*/,""),e.error("end tag name: "+Z+" maybe not complete"),oe=D+1+Z.length);var W=V.localNSMap,te=V.tagName==Z,z=te||V.tagName&&V.tagName.toLowerCase()==Z.toLowerCase();if(z){if(r.endElement(V.uri,V.localName,Z),W)for(var q in W)Object.prototype.hasOwnProperty.call(W,q)&&r.endPrefixMapping(q);te||e.fatalError("end tag name: "+Z+" is not match the current start tagName:"+V.tagName)}else E.push(V);oe++;break;case"?":y&&l(D),oe=$F(a,D,r);break;case"!":y&&l(D),oe=HF(a,D,r,e);break;default:y&&l(D);var X=new wS,j=E[E.length-1].currentNSMap,oe=BF(a,D,X,j,s,e),re=X.length;if(!X.closed&&VF(a,oe,X.tagName,I)&&(X.closed=!0,i.nbsp||e.warning("unclosed xml attribute")),y&&re){for(var se=lT(y,{}),he=0;he<re;he++){var le=X[he];l(le.offset),le.locator=lT(y,{})}r.locator=se,dT(X,r,j)&&E.push(X),r.locator=y}else dT(X,r,j)&&E.push(X);qd.isHTML(X.uri)&&!X.closed?oe=jF(a,oe,X.tagName,s,r):oe++}}catch(pe){if(pe instanceof Hu)throw pe;e.error("element parse error: "+pe),oe=-1}oe>O?O=oe:o(Math.max(D,O)+1)}}function lT(a,t){return t.lineNumber=a.lineNumber,t.columnNumber=a.columnNumber,t}function BF(a,t,i,r,e,n){function s(y,E,I){i.attributeNames.hasOwnProperty(y)&&n.fatalError("Attribute "+y+" redefined"),i.addValue(y,E.replace(/[\t\n\r]/g," ").replace(/&#?\w+;/g,e),I)}for(var o,l,f=++t,m=ud;;){var v=a.charAt(f);switch(v){case"=":if(m===hs)o=a.slice(t,f),m=ld;else if(m===lu)m=ld;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(m===ld||m===hs)if(m===hs&&(n.warning('attribute value must after "="'),o=a.slice(t,f)),t=f+1,f=a.indexOf(v,t),f>0)l=a.slice(t,f),s(o,l,t-1),m=fu;else throw new Error("attribute value no end '"+v+"' match");else if(m==du)l=a.slice(t,f),s(o,l,t),n.warning('attribute "'+o+'" missed start quot('+v+")!!"),t=f+1,m=fu;else throw new Error('attribute value must after "="');break;case"/":switch(m){case ud:i.setTagName(a.slice(t,f));case fu:case dd:case rc:m=rc,i.closed=!0;case du:case hs:case lu:break;default:throw new Error("attribute invalid close char('/')")}break;case"":return n.error("unexpected end of input"),m==ud&&i.setTagName(a.slice(t,f)),f;case">":switch(m){case ud:i.setTagName(a.slice(t,f));case fu:case dd:case rc:break;case du:case hs:l=a.slice(t,f),l.slice(-1)==="/"&&(i.closed=!0,l=l.slice(0,-1));case lu:m===lu&&(l=o),m==du?(n.warning('attribute "'+l+'" missed quot(")!'),s(o,l,t)):((!qd.isHTML(r[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&n.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),s(l,l,t));break;case ld:throw new Error("attribute value missed!!")}return f;case"":v=" ";default:if(v<=" ")switch(m){case ud:i.setTagName(a.slice(t,f)),m=dd;break;case hs:o=a.slice(t,f),m=lu;break;case du:var l=a.slice(t,f);n.warning('attribute "'+l+'" missed quot(")!!'),s(o,l,t);case fu:m=dd;break}else switch(m){case lu:i.tagName,(!qd.isHTML(r[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&n.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),s(o,o,t),t=f,m=hs;break;case fu:n.warning('attribute space is required"'+o+'"!!');case dd:m=hs,t=f;break;case ld:m=du,t=f;break;case rc:throw new Error("elements closed character '/' and '>' must be connected to")}}f++}}function dT(a,t,i){for(var r=a.tagName,e=null,v=a.length;v--;){var n=a[v],s=n.qName,o=n.value,y=s.indexOf(":");if(y>0)var l=n.prefix=s.slice(0,y),f=s.slice(y+1),m=l==="xmlns"&&f;else f=s,l=null,m=s==="xmlns"&&"";n.localName=f,m!==!1&&(e==null&&(e={},ES(i,i={})),i[m]=e[m]=o,n.uri=qd.XMLNS,t.startPrefixMapping(m,o))}for(var v=a.length;v--;){n=a[v];var l=n.prefix;l&&(l==="xml"&&(n.uri=qd.XML),l!=="xmlns"&&(n.uri=i[l||""]))}var y=r.indexOf(":");y>0?(l=a.prefix=r.slice(0,y),f=a.localName=r.slice(y+1)):(l=null,f=a.localName=r);var E=a.uri=i[l||""];if(t.startElement(E,f,r,a),a.closed){if(t.endElement(E,f,r),e)for(l in e)Object.prototype.hasOwnProperty.call(e,l)&&t.endPrefixMapping(l)}else return a.currentNSMap=i,a.localNSMap=e,!0}function jF(a,t,i,r,e){if(/^(?:script|textarea)$/i.test(i)){var n=a.indexOf("</"+i+">",t),s=a.substring(t+1,n);if(/[&<]/.test(s))return/^script$/i.test(i)?(e.characters(s,0,s.length),n):(s=s.replace(/&#?\w+;/g,r),e.characters(s,0,s.length),n)}return t+1}function VF(a,t,i,r){var e=r[i];return e==null&&(e=a.lastIndexOf("</"+i+">"),e<t&&(e=a.lastIndexOf("</"+i)),r[i]=e),e<t}function ES(a,t){for(var i in a)Object.prototype.hasOwnProperty.call(a,i)&&(t[i]=a[i])}function HF(a,t,i,r){var e=a.charAt(t+2);switch(e){case"-":if(a.charAt(t+3)==="-"){var n=a.indexOf("--\x3e",t+4);return n>t?(i.comment(a,t+4,n-t-4),n+3):(r.error("Unclosed comment"),-1)}else return-1;default:if(a.substr(t+3,6)=="CDATA["){var n=a.indexOf("]]>",t+9);return i.startCDATA(),i.characters(a,t+9,n-t-9),i.endCDATA(),n+3}var s=WF(a,t),o=s.length;if(o>1&&/!doctype/i.test(s[0][0])){var l=s[1][0],f=!1,m=!1;o>3&&(/^public$/i.test(s[2][0])?(f=s[3][0],m=o>4&&s[4][0]):/^system$/i.test(s[2][0])&&(m=s[3][0]));var v=s[o-1];return i.startDTD(l,f,m),i.endDTD(),v.index+v[0].length}}return-1}function $F(a,t,i){var r=a.indexOf("?>",t);if(r){var e=a.substring(t,r).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return e?(e[0].length,i.processingInstruction(e[1],e[2]),r+2):-1}return-1}function wS(){this.attributeNames={}}wS.prototype={setTagName:function(a){if(!uT.test(a))throw new Error("invalid tagName:"+a);this.tagName=a},addValue:function(a,t,i){if(!uT.test(a))throw new Error("invalid attribute:"+a);this.attributeNames[a]=this.length,this[this.length++]={qName:a,value:t,offset:i}},length:0,getLocalName:function(a){return this[a].localName},getLocator:function(a){return this[a].locator},getQName:function(a){return this[a].qName},getURI:function(a){return this[a].uri},getValue:function(a){return this[a].value}};function WF(a,t){var i,r=[],e=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(e.lastIndex=t,e.exec(a);i=e.exec(a);)if(r.push(i),i[1])return r}yv.XMLReader=SS;yv.ParseError=Hu;var qF=Ha,GF=As,fT=xS,CS=yv,zF=GF.DOMImplementation,cT=qF.NAMESPACE,KF=CS.ParseError,XF=CS.XMLReader;function AS(a){return a.replace(/\r[\n\u0085]/g,`
`).replace(/[\r\u0085\u2028]/g,`
`)}function IS(a){this.options=a||{locator:{}}}IS.prototype.parseFromString=function(a,t){var i=this.options,r=new XF,e=i.domBuilder||new uf,n=i.errorHandler,s=i.locator,o=i.xmlns||{},l=/\/x?html?$/.test(t),f=l?fT.HTML_ENTITIES:fT.XML_ENTITIES;s&&e.setDocumentLocator(s),r.errorHandler=QF(n,e,s),r.domBuilder=i.domBuilder||e,l&&(o[""]=cT.HTML),o.xml=o.xml||cT.XML;var m=i.normalizeLineEndings||AS;return a&&typeof a=="string"?r.parse(m(a),o,f):r.errorHandler.error("invalid doc source"),e.doc};function QF(a,t,i){if(!a){if(t instanceof uf)return t;a=t}var r={},e=a instanceof Function;i=i||{};function n(s){var o=a[s];!o&&e&&(o=a.length==2?function(l){a(s,l)}:a),r[s]=o&&function(l){o("[xmldom "+s+"]\t"+l+Qm(i))}||function(){}}return n("warning"),n("error"),n("fatalError"),r}function uf(){this.cdata=!1}function cu(a,t){t.lineNumber=a.lineNumber,t.columnNumber=a.columnNumber}uf.prototype={startDocument:function(){this.doc=(new zF).createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(a,t,i,r){var e=this.doc,n=e.createElementNS(a,i||t),s=r.length;nc(this,n),this.currentElement=n,this.locator&&cu(this.locator,n);for(var o=0;o<s;o++){var a=r.getURI(o),l=r.getValue(o),i=r.getQName(o),f=e.createAttributeNS(a,i);this.locator&&cu(r.getLocator(o),f),f.value=f.nodeValue=l,n.setAttributeNode(f)}},endElement:function(a,t,i){var r=this.currentElement;r.tagName,this.currentElement=r.parentNode},startPrefixMapping:function(a,t){},endPrefixMapping:function(a){},processingInstruction:function(a,t){var i=this.doc.createProcessingInstruction(a,t);this.locator&&cu(this.locator,i),nc(this,i)},ignorableWhitespace:function(a,t,i){},characters:function(a,t,i){if(a=hT.apply(this,arguments),a){if(this.cdata)var r=this.doc.createCDATASection(a);else var r=this.doc.createTextNode(a);this.currentElement?this.currentElement.appendChild(r):/^\s*$/.test(a)&&this.doc.appendChild(r),this.locator&&cu(this.locator,r)}},skippedEntity:function(a){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(a){(this.locator=a)&&(a.lineNumber=0)},comment:function(a,t,i){a=hT.apply(this,arguments);var r=this.doc.createComment(a);this.locator&&cu(this.locator,r),nc(this,r)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(a,t,i){var r=this.doc.implementation;if(r&&r.createDocumentType){var e=r.createDocumentType(a,t,i);this.locator&&cu(this.locator,e),nc(this,e),this.doc.doctype=e}},warning:function(a){console.warn("[xmldom warning]\t"+a,Qm(this.locator))},error:function(a){console.error("[xmldom error]\t"+a,Qm(this.locator))},fatalError:function(a){throw new KF(a,this.locator)}};function Qm(a){if(a)return`
@`+(a.systemId||"")+"#[line:"+a.lineNumber+",col:"+a.columnNumber+"]"}function hT(a,t,i){return typeof a=="string"?a.substr(t,i):a.length>=t+i||t?new java.lang.String(a,t,i)+"":a}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(a){uf.prototype[a]=function(){return null}});function nc(a,t){a.currentElement?a.currentElement.appendChild(t):a.doc.appendChild(t)}Uh.__DOMHandler=uf;Uh.normalizeLineEndings=AS;Uh.DOMParser=IS;var YF=Uh.DOMParser;var pT=function(t){return!!t&&typeof t=="object"},Qi=function a(){for(var t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return i.reduce(function(e,n){return typeof n!="object"||Object.keys(n).forEach(function(s){Array.isArray(e[s])&&Array.isArray(n[s])?e[s]=e[s].concat(n[s]):pT(e[s])&&pT(n[s])?e[s]=a(e[s],n[s]):e[s]=n[s]}),e},{})},PS=function(t){return Object.keys(t).map(function(i){return t[i]})},JF=function(t,i){for(var r=[],e=t;e<i;e++)r.push(e);return r},Bh=function(t){return t.reduce(function(i,r){return i.concat(r)},[])},OS=function(t){if(!t.length)return[];for(var i=[],r=0;r<t.length;r++)i.push(t[r]);return i},ZF=function(t,i){return t.reduce(function(r,e,n){return e[i]&&r.push(n),r},[])},Ym=function(t,i){for(var r=0;r<t.length;r++)if(i(t[r]))return r;return-1},eN=function(t,i){return PS(t.reduce(function(r,e){return e.forEach(function(n){r[i(n)]=n}),r},{}))},$u={INVALID_NUMBER_OF_PERIOD:"INVALID_NUMBER_OF_PERIOD",DASH_EMPTY_MANIFEST:"DASH_EMPTY_MANIFEST",DASH_INVALID_XML:"DASH_INVALID_XML",NO_BASE_URL:"NO_BASE_URL",MISSING_SEGMENT_INFORMATION:"MISSING_SEGMENT_INFORMATION",SEGMENT_TIME_UNSPECIFIED:"SEGMENT_TIME_UNSPECIFIED",UNSUPPORTED_UTC_TIMING_SCHEME:"UNSUPPORTED_UTC_TIMING_SCHEME"},Gd=function(t){var i=t.baseUrl,r=i===void 0?"":i,e=t.source,n=e===void 0?"":e,s=t.range,o=s===void 0?"":s,l=t.indexRange,f=l===void 0?"":l,m={uri:n,resolvedUri:nf(r||"",n)};if(o||f){var v=o||f,y=v.split("-"),E=F.BigInt?F.BigInt(y[0]):parseInt(y[0],10),I=F.BigInt?F.BigInt(y[1]):parseInt(y[1],10);E<Number.MAX_SAFE_INTEGER&&typeof E=="bigint"&&(E=Number(E)),I<Number.MAX_SAFE_INTEGER&&typeof I=="bigint"&&(I=Number(I));var O;typeof I=="bigint"||typeof E=="bigint"?O=F.BigInt(I)-F.BigInt(E)+F.BigInt(1):O=I-E+1,typeof O=="bigint"&&O<Number.MAX_SAFE_INTEGER&&(O=Number(O)),m.byterange={length:O,offset:E}}return m},tN=function(t){var i;return typeof t.offset=="bigint"||typeof t.length=="bigint"?i=F.BigInt(t.offset)+F.BigInt(t.length)-F.BigInt(1):i=t.offset+t.length-1,t.offset+"-"+i},mT=function(t){return t&&typeof t!="number"&&(t=parseInt(t,10)),isNaN(t)?null:t},iN={static:function(t){var i=t.duration,r=t.timescale,e=r===void 0?1:r,n=t.sourceDuration,s=t.periodDuration,o=mT(t.endNumber),l=i/e;return typeof o=="number"?{start:0,end:o}:typeof s=="number"?{start:0,end:s/l}:{start:0,end:n/l}},dynamic:function(t){var i=t.NOW,r=t.clientOffset,e=t.availabilityStartTime,n=t.timescale,s=n===void 0?1:n,o=t.duration,l=t.periodStart,f=l===void 0?0:l,m=t.minimumUpdatePeriod,v=m===void 0?0:m,y=t.timeShiftBufferDepth,E=y===void 0?1/0:y,I=mT(t.endNumber),O=(i+r)/1e3,D=e+f,R=O+v,H=R-D,Z=Math.ceil(H*s/o),V=Math.floor((O-D-E)*s/o),W=Math.floor((O-D)*s/o);return{start:Math.max(0,V),end:typeof I=="number"?I:Math.min(Z,W)}}},rN=function(t){return function(i){var r=t.duration,e=t.timescale,n=e===void 0?1:e,s=t.periodStart,o=t.startNumber,l=o===void 0?1:o;return{number:l+i,duration:r/n,timeline:s,time:i*r}}},Tv=function(t){var i=t.type,r=t.duration,e=t.timescale,n=e===void 0?1:e,s=t.periodDuration,o=t.sourceDuration,l=iN[i](t),f=l.start,m=l.end,v=JF(f,m).map(rN(t));if(i==="static"){var y=v.length-1,E=typeof s=="number"?s:o;v[y].duration=E-r/n*y}return v},DS=function(t){var i=t.baseUrl,r=t.initialization,e=r===void 0?{}:r,n=t.sourceDuration,s=t.indexRange,o=s===void 0?"":s,l=t.periodStart,f=t.presentationTime,m=t.number,v=m===void 0?0:m,y=t.duration;if(!i)throw new Error($u.NO_BASE_URL);var E=Gd({baseUrl:i,source:e.sourceURL,range:e.range}),I=Gd({baseUrl:i,source:i,indexRange:o});if(I.map=E,y){var O=Tv(t);O.length&&(I.duration=O[0].duration,I.timeline=O[0].timeline)}else n&&(I.duration=n,I.timeline=l);return I.presentationTime=f||l,I.number=v,[I]},lf=function(t,i,r){var e=t.sidx.map?t.sidx.map:null,n=t.sidx.duration,s=t.timeline||0,o=t.sidx.byterange,l=o.offset+o.length,f=i.timescale,m=i.references.filter(function(X){return X.referenceType!==1}),v=[],y=t.endList?"static":"dynamic",E=t.sidx.timeline,I=E,O=t.mediaSequence||0,D;typeof i.firstOffset=="bigint"?D=F.BigInt(l)+i.firstOffset:D=l+i.firstOffset;for(var R=0;R<m.length;R++){var H=i.references[R],Z=H.referencedSize,V=H.subsegmentDuration,W=void 0;typeof D=="bigint"?W=D+F.BigInt(Z)-F.BigInt(1):W=D+Z-1;var te=D+"-"+W,z={baseUrl:r,timescale:f,timeline:s,periodStart:E,presentationTime:I,number:O,duration:V,sourceDuration:n,indexRange:te,type:y},q=DS(z)[0];e&&(q.map=e),v.push(q),typeof D=="bigint"?D+=F.BigInt(Z):D+=Z,I+=V/f,O++}return t.segments=v,t},nN=["AUDIO","SUBTITLES"],aN=1/60,LS=function(t){return eN(t,function(i){var r=i.timeline;return r}).sort(function(i,r){return i.timeline>r.timeline?1:-1})},sN=function(t,i){for(var r=0;r<t.length;r++)if(t[r].attributes.NAME===i)return t[r];return null},gT=function(t){var i=[];return SF(t,nN,function(r,e,n,s){i=i.concat(r.playlists||[])}),i},vT=function(t){var i=t.playlist,r=t.mediaSequence;i.mediaSequence=r,i.segments.forEach(function(e,n){e.number=i.mediaSequence+n})},oN=function(t){var i=t.oldPlaylists,r=t.newPlaylists,e=t.timelineStarts;r.forEach(function(n){n.discontinuitySequence=Ym(e,function(m){var v=m.timeline;return v===n.timeline});var s=sN(i,n.attributes.NAME);if(s&&!n.sidx){var o=n.segments[0],l=Ym(s.segments,function(m){return Math.abs(m.presentationTime-o.presentationTime)<aN});if(l===-1){vT({playlist:n,mediaSequence:s.mediaSequence+s.segments.length}),n.segments[0].discontinuity=!0,n.discontinuityStarts.unshift(0),(!s.segments.length&&n.timeline>s.timeline||s.segments.length&&n.timeline>s.segments[s.segments.length-1].timeline)&&n.discontinuitySequence--;return}var f=s.segments[l];f.discontinuity&&!o.discontinuity&&(o.discontinuity=!0,n.discontinuityStarts.unshift(0),n.discontinuitySequence--),vT({playlist:n,mediaSequence:s.segments[l].number})}})},uN=function(t){var i=t.oldManifest,r=t.newManifest,e=i.playlists.concat(gT(i)),n=r.playlists.concat(gT(r));return r.timelineStarts=LS([i.timelineStarts,r.timelineStarts]),oN({oldPlaylists:e,newPlaylists:n,timelineStarts:r.timelineStarts}),r},Lo=function(t){return t&&t.uri+"-"+tN(t.byterange)},nm=function(t){var i=PS(t.reduce(function(r,e){var n=e.attributes.id+(e.attributes.lang||"");if(!r[n])r[n]=e,r[n].attributes.timelineStarts=[];else{if(e.segments){var s;e.segments[0]&&(e.segments[0].discontinuity=!0),(s=r[n].segments).push.apply(s,e.segments)}e.attributes.contentProtection&&(r[n].attributes.contentProtection=e.attributes.contentProtection)}return r[n].attributes.timelineStarts.push({start:e.attributes.periodStart,timeline:e.attributes.periodStart}),r},{}));return i.map(function(r){return r.discontinuityStarts=ZF(r.segments||[],"discontinuity"),r})},bv=function(t,i){var r=Lo(t.sidx),e=r&&i[r]&&i[r].sidx;return e&&lf(t,e,t.sidx.resolvedUri),t},lN=function(t,i){if(i===void 0&&(i={}),!Object.keys(i).length)return t;for(var r in t)t[r]=bv(t[r],i);return t},dN=function(t,i){var r,e=t.attributes,n=t.segments,s=t.sidx,o=t.mediaSequence,l=t.discontinuitySequence,f=t.discontinuityStarts,m={attributes:(r={NAME:e.id,BANDWIDTH:e.bandwidth,CODECS:e.codecs},r["PROGRAM-ID"]=1,r),uri:"",endList:e.type==="static",timeline:e.periodStart,resolvedUri:"",targetDuration:e.duration,discontinuitySequence:l,discontinuityStarts:f,timelineStarts:e.timelineStarts,mediaSequence:o,segments:n};return e.contentProtection&&(m.contentProtection=e.contentProtection),s&&(m.sidx=s),i&&(m.attributes.AUDIO="audio",m.attributes.SUBTITLES="subs"),m},fN=function(t){var i,r=t.attributes,e=t.segments,n=t.mediaSequence,s=t.discontinuityStarts,o=t.discontinuitySequence;typeof e>"u"&&(e=[{uri:r.baseUrl,timeline:r.periodStart,resolvedUri:r.baseUrl||"",duration:r.sourceDuration,number:0}],r.duration=r.sourceDuration);var l=(i={NAME:r.id,BANDWIDTH:r.bandwidth},i["PROGRAM-ID"]=1,i);return r.codecs&&(l.CODECS=r.codecs),{attributes:l,uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:r.baseUrl||"",targetDuration:r.duration,timelineStarts:r.timelineStarts,discontinuityStarts:s,discontinuitySequence:o,mediaSequence:n,segments:e}},cN=function(t,i,r){i===void 0&&(i={}),r===void 0&&(r=!1);var e,n=t.reduce(function(o,l){var f=l.attributes.role&&l.attributes.role.value||"",m=l.attributes.lang||"",v=l.attributes.label||"main";if(m&&!l.attributes.label){var y=f?" ("+f+")":"";v=""+l.attributes.lang+y}o[v]||(o[v]={language:m,autoselect:!0,default:f==="main",playlists:[],uri:""});var E=bv(dN(l,r),i);return o[v].playlists.push(E),typeof e>"u"&&f==="main"&&(e=l,e.default=!0),o},{});if(!e){var s=Object.keys(n)[0];n[s].default=!0}return n},hN=function(t,i){return i===void 0&&(i={}),t.reduce(function(r,e){var n=e.attributes.lang||"text";return r[n]||(r[n]={language:n,default:!1,autoselect:!1,playlists:[],uri:""}),r[n].playlists.push(bv(fN(e),i)),r},{})},pN=function(t){return t.reduce(function(i,r){return r&&r.forEach(function(e){var n=e.channel,s=e.language;i[s]={autoselect:!1,default:!1,instreamId:n,language:s},e.hasOwnProperty("aspectRatio")&&(i[s].aspectRatio=e.aspectRatio),e.hasOwnProperty("easyReader")&&(i[s].easyReader=e.easyReader),e.hasOwnProperty("3D")&&(i[s]["3D"]=e["3D"])}),i},{})},mN=function(t){var i,r=t.attributes,e=t.segments,n=t.sidx,s=t.discontinuityStarts,o={attributes:(i={NAME:r.id,AUDIO:"audio",SUBTITLES:"subs",RESOLUTION:{width:r.width,height:r.height},CODECS:r.codecs,BANDWIDTH:r.bandwidth},i["PROGRAM-ID"]=1,i),uri:"",endList:r.type==="static",timeline:r.periodStart,resolvedUri:"",targetDuration:r.duration,discontinuityStarts:s,timelineStarts:r.timelineStarts,segments:e};return r.frameRate&&(o.attributes["FRAME-RATE"]=r.frameRate),r.contentProtection&&(o.contentProtection=r.contentProtection),n&&(o.sidx=n),o},gN=function(t){var i=t.attributes;return i.mimeType==="video/mp4"||i.mimeType==="video/webm"||i.contentType==="video"},vN=function(t){var i=t.attributes;return i.mimeType==="audio/mp4"||i.mimeType==="audio/webm"||i.contentType==="audio"},_N=function(t){var i=t.attributes;return i.mimeType==="text/vtt"||i.contentType==="text"},yN=function(t,i){t.forEach(function(r){r.mediaSequence=0,r.discontinuitySequence=Ym(i,function(e){var n=e.timeline;return n===r.timeline}),r.segments&&r.segments.forEach(function(e,n){e.number=n})})},_T=function(t){return t?Object.keys(t).reduce(function(i,r){var e=t[r];return i.concat(e.playlists)},[]):[]},TN=function(t){var i,r=t.dashPlaylists,e=t.locations,n=t.sidxMapping,s=n===void 0?{}:n,o=t.previousManifest;if(!r.length)return{};var l=r[0].attributes,f=l.sourceDuration,m=l.type,v=l.suggestedPresentationDelay,y=l.minimumUpdatePeriod,E=nm(r.filter(gN)).map(mN),I=nm(r.filter(vN)),O=nm(r.filter(_N)),D=r.map(function(z){return z.attributes.captionServices}).filter(Boolean),R={allowCache:!0,discontinuityStarts:[],segments:[],endList:!0,mediaGroups:(i={AUDIO:{},VIDEO:{}},i["CLOSED-CAPTIONS"]={},i.SUBTITLES={},i),uri:"",duration:f,playlists:lN(E,s)};y>=0&&(R.minimumUpdatePeriod=y*1e3),e&&(R.locations=e),m==="dynamic"&&(R.suggestedPresentationDelay=v);var H=R.playlists.length===0,Z=I.length?cN(I,s,H):null,V=O.length?hN(O,s):null,W=E.concat(_T(Z),_T(V)),te=W.map(function(z){var q=z.timelineStarts;return q});return R.timelineStarts=LS(te),yN(W,R.timelineStarts),Z&&(R.mediaGroups.AUDIO.audio=Z),V&&(R.mediaGroups.SUBTITLES.subs=V),D.length&&(R.mediaGroups["CLOSED-CAPTIONS"].cc=pN(D)),o?uN({oldManifest:o,newManifest:R}):R},bN=function(t,i,r){var e=t.NOW,n=t.clientOffset,s=t.availabilityStartTime,o=t.timescale,l=o===void 0?1:o,f=t.periodStart,m=f===void 0?0:f,v=t.minimumUpdatePeriod,y=v===void 0?0:v,E=(e+n)/1e3,I=s+m,O=E+y,D=O-I;return Math.ceil((D*l-i)/r)},kS=function(t,i){for(var r=t.type,e=t.minimumUpdatePeriod,n=e===void 0?0:e,s=t.media,o=s===void 0?"":s,l=t.sourceDuration,f=t.timescale,m=f===void 0?1:f,v=t.startNumber,y=v===void 0?1:v,E=t.periodStart,I=[],O=-1,D=0;D<i.length;D++){var R=i[D],H=R.d,Z=R.r||0,V=R.t||0;O<0&&(O=V),V&&V>O&&(O=V);var W=void 0;if(Z<0){var te=D+1;te===i.length?r==="dynamic"&&n>0&&o.indexOf("$Number$")>0?W=bN(t,O,H):W=(l*m-O)/H:W=(i[te].t-O)/H}else W=Z+1;for(var z=y+I.length+W,q=y+I.length;q<z;)I.push({number:q,duration:H/m,time:O,timeline:E}),O+=H,q++}return I},xN=/\$([A-z]*)(?:(%0)([0-9]+)d)?\$/g,SN=function(t){return function(i,r,e,n){if(i==="$$")return"$";if(typeof t[r]>"u")return i;var s=""+t[r];return r==="RepresentationID"||(e?n=parseInt(n,10):n=1,s.length>=n)?s:""+new Array(n-s.length+1).join("0")+s}},yT=function(t,i){return t.replace(xN,SN(i))},EN=function(t,i){return!t.duration&&!i?[{number:t.startNumber||1,duration:t.sourceDuration,time:0,timeline:t.periodStart}]:t.duration?Tv(t):kS(t,i)},wN=function(t,i){var r={RepresentationID:t.id,Bandwidth:t.bandwidth||0},e=t.initialization,n=e===void 0?{sourceURL:"",range:""}:e,s=Gd({baseUrl:t.baseUrl,source:yT(n.sourceURL,r),range:n.range}),o=EN(t,i);return o.map(function(l){r.Number=l.number,r.Time=l.time;var f=yT(t.media||"",r),m=t.timescale||1,v=t.presentationTimeOffset||0,y=t.periodStart+(l.time-v)/m,E={uri:f,timeline:l.timeline,duration:l.duration,resolvedUri:nf(t.baseUrl||"",f),map:s,number:l.number,presentationTime:y};return E})},CN=function(t,i){var r=t.baseUrl,e=t.initialization,n=e===void 0?{}:e,s=Gd({baseUrl:r,source:n.sourceURL,range:n.range}),o=Gd({baseUrl:r,source:i.media,range:i.mediaRange});return o.map=s,o},AN=function(t,i){var r=t.duration,e=t.segmentUrls,n=e===void 0?[]:e,s=t.periodStart;if(!r&&!i||r&&i)throw new Error($u.SEGMENT_TIME_UNSPECIFIED);var o=n.map(function(m){return CN(t,m)}),l;r&&(l=Tv(t)),i&&(l=kS(t,i));var f=l.map(function(m,v){if(o[v]){var y=o[v],E=t.timescale||1,I=t.presentationTimeOffset||0;return y.timeline=m.timeline,y.duration=m.duration,y.number=m.number,y.presentationTime=s+(m.time-I)/E,y}}).filter(function(m){return m});return f},IN=function(t){var i=t.attributes,r=t.segmentInfo,e,n;r.template?(n=wN,e=Qi(i,r.template)):r.base?(n=DS,e=Qi(i,r.base)):r.list&&(n=AN,e=Qi(i,r.list));var s={attributes:i};if(!n)return s;var o=n(e,r.segmentTimeline);if(e.duration){var l=e,f=l.duration,m=l.timescale,v=m===void 0?1:m;e.duration=f/v}else o.length?e.duration=o.reduce(function(y,E){return Math.max(y,Math.ceil(E.duration))},0):e.duration=0;return s.attributes=e,s.segments=o,r.base&&e.indexRange&&(s.sidx=o[0],s.segments=[]),s},PN=function(t){return t.map(IN)},Jt=function(t,i){return OS(t.childNodes).filter(function(r){var e=r.tagName;return e===i})},xv=function(t){return t.textContent.trim()},ON=function(t){return parseFloat(t.split("/").reduce(function(i,r){return i/r}))},hu=function(t){var i=31536e3,r=30*24*60*60,e=24*60*60,n=60*60,s=60,o=/P(?:(\d*)Y)?(?:(\d*)M)?(?:(\d*)D)?(?:T(?:(\d*)H)?(?:(\d*)M)?(?:([\d.]*)S)?)?/,l=o.exec(t);if(!l)return 0;var f=l.slice(1),m=f[0],v=f[1],y=f[2],E=f[3],I=f[4],O=f[5];return parseFloat(m||0)*i+parseFloat(v||0)*r+parseFloat(y||0)*e+parseFloat(E||0)*n+parseFloat(I||0)*s+parseFloat(O||0)},DN=function(t){var i=/^\d+-\d+-\d+T\d+:\d+:\d+(\.\d+)?$/;return i.test(t)&&(t+="Z"),Date.parse(t)},TT={mediaPresentationDuration:function(t){return hu(t)},availabilityStartTime:function(t){return DN(t)/1e3},minimumUpdatePeriod:function(t){return hu(t)},suggestedPresentationDelay:function(t){return hu(t)},type:function(t){return t},timeShiftBufferDepth:function(t){return hu(t)},start:function(t){return hu(t)},width:function(t){return parseInt(t,10)},height:function(t){return parseInt(t,10)},bandwidth:function(t){return parseInt(t,10)},frameRate:function(t){return ON(t)},startNumber:function(t){return parseInt(t,10)},timescale:function(t){return parseInt(t,10)},presentationTimeOffset:function(t){return parseInt(t,10)},duration:function(t){var i=parseInt(t,10);return isNaN(i)?hu(t):i},d:function(t){return parseInt(t,10)},t:function(t){return parseInt(t,10)},r:function(t){return parseInt(t,10)},DEFAULT:function(t){return t}},Ri=function(t){return t&&t.attributes?OS(t.attributes).reduce(function(i,r){var e=TT[r.name]||TT.DEFAULT;return i[r.name]=e(r.value),i},{}):{}},LN={"urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"org.w3.clearkey","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"com.widevine.alpha","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"com.microsoft.playready","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"com.adobe.primetime"},jh=function(t,i){return i.length?Bh(t.map(function(r){return i.map(function(e){return nf(r,xv(e))})})):t},Sv=function(t){var i=Jt(t,"SegmentTemplate")[0],r=Jt(t,"SegmentList")[0],e=r&&Jt(r,"SegmentURL").map(function(y){return Qi({tag:"SegmentURL"},Ri(y))}),n=Jt(t,"SegmentBase")[0],s=r||i,o=s&&Jt(s,"SegmentTimeline")[0],l=r||n||i,f=l&&Jt(l,"Initialization")[0],m=i&&Ri(i);m&&f?m.initialization=f&&Ri(f):m&&m.initialization&&(m.initialization={sourceURL:m.initialization});var v={template:m,segmentTimeline:o&&Jt(o,"S").map(function(y){return Ri(y)}),list:r&&Qi(Ri(r),{segmentUrls:e,initialization:Ri(f)}),base:n&&Qi(Ri(n),{initialization:Ri(f)})};return Object.keys(v).forEach(function(y){v[y]||delete v[y]}),v},kN=function(t,i,r){return function(e){var n=Jt(e,"BaseURL"),s=jh(i,n),o=Qi(t,Ri(e)),l=Sv(e);return s.map(function(f){return{segmentInfo:Qi(r,l),attributes:Qi(o,{baseUrl:f})}})}},RN=function(t){return t.reduce(function(i,r){var e=Ri(r);e.schemeIdUri&&(e.schemeIdUri=e.schemeIdUri.toLowerCase());var n=LN[e.schemeIdUri];if(n){i[n]={attributes:e};var s=Jt(r,"cenc:pssh")[0];if(s){var o=xv(s);i[n].pssh=o&&Xx(o)}}return i},{})},MN=function(t){if(t.schemeIdUri==="urn:scte:dash:cc:cea-608:2015"){var i=typeof t.value!="string"?[]:t.value.split(";");return i.map(function(e){var n,s;if(s=e,/^CC\d=/.test(e)){var o=e.split("=");n=o[0],s=o[1]}else/^CC\d$/.test(e)&&(n=e);return{channel:n,language:s}})}else if(t.schemeIdUri==="urn:scte:dash:cc:cea-708:2015"){var r=typeof t.value!="string"?[]:t.value.split(";");return r.map(function(e){var n={channel:void 0,language:void 0,aspectRatio:1,easyReader:0,"3D":0};if(/=/.test(e)){var s=e.split("="),o=s[0],l=s[1],f=l===void 0?"":l;n.channel=o,n.language=e,f.split(",").forEach(function(m){var v=m.split(":"),y=v[0],E=v[1];y==="lang"?n.language=E:y==="er"?n.easyReader=Number(E):y==="war"?n.aspectRatio=Number(E):y==="3D"&&(n["3D"]=Number(E))})}else n.language=e;return n.channel&&(n.channel="SERVICE"+n.channel),n})}},FN=function(t,i,r){return function(e){var n=Ri(e),s=jh(i,Jt(e,"BaseURL")),o=Jt(e,"Role")[0],l={role:Ri(o)},f=Qi(t,n,l),m=Jt(e,"Accessibility")[0],v=MN(Ri(m));v&&(f=Qi(f,{captionServices:v}));var y=Jt(e,"Label")[0];if(y&&y.childNodes.length){var E=y.childNodes[0].nodeValue.trim();f=Qi(f,{label:E})}var I=RN(Jt(e,"ContentProtection"));Object.keys(I).length&&(f=Qi(f,{contentProtection:I}));var O=Sv(e),D=Jt(e,"Representation"),R=Qi(r,O);return Bh(D.map(kN(f,s,R)))}},NN=function(t,i){return function(r,e){var n=jh(i,Jt(r.node,"BaseURL")),s=Qi(t,{periodStart:r.attributes.start});typeof r.attributes.duration=="number"&&(s.periodDuration=r.attributes.duration);var o=Jt(r.node,"AdaptationSet"),l=Sv(r.node);return Bh(o.map(FN(s,n,l)))}},UN=function(t){var i=t.attributes,r=t.priorPeriodAttributes,e=t.mpdType;return typeof i.start=="number"?i.start:r&&typeof r.start=="number"&&typeof r.duration=="number"?r.start+r.duration:!r&&e==="static"?0:null},BN=function(t,i){i===void 0&&(i={});var r=i,e=r.manifestUri,n=e===void 0?"":e,s=r.NOW,o=s===void 0?Date.now():s,l=r.clientOffset,f=l===void 0?0:l,m=Jt(t,"Period");if(!m.length)throw new Error($u.INVALID_NUMBER_OF_PERIOD);var v=Jt(t,"Location"),y=Ri(t),E=jh([n],Jt(t,"BaseURL"));y.type=y.type||"static",y.sourceDuration=y.mediaPresentationDuration||0,y.NOW=o,y.clientOffset=f,v.length&&(y.locations=v.map(xv));var I=[];return m.forEach(function(O,D){var R=Ri(O),H=I[D-1];R.start=UN({attributes:R,priorPeriodAttributes:H?H.attributes:null,mpdType:y.type}),I.push({node:O,attributes:R})}),{locations:y.locations,representationInfo:Bh(I.map(NN(y,E)))}},RS=function(t){if(t==="")throw new Error($u.DASH_EMPTY_MANIFEST);var i=new YF,r,e;try{r=i.parseFromString(t,"application/xml"),e=r&&r.documentElement.tagName==="MPD"?r.documentElement:null}catch{}if(!e||e&&e.getElementsByTagName("parsererror").length>0)throw new Error($u.DASH_INVALID_XML);return e},jN=function(t){var i=Jt(t,"UTCTiming")[0];if(!i)return null;var r=Ri(i);switch(r.schemeIdUri){case"urn:mpeg:dash:utc:http-head:2014":case"urn:mpeg:dash:utc:http-head:2012":r.method="HEAD";break;case"urn:mpeg:dash:utc:http-xsdate:2014":case"urn:mpeg:dash:utc:http-iso:2014":case"urn:mpeg:dash:utc:http-xsdate:2012":case"urn:mpeg:dash:utc:http-iso:2012":r.method="GET";break;case"urn:mpeg:dash:utc:direct:2014":case"urn:mpeg:dash:utc:direct:2012":r.method="DIRECT",r.value=Date.parse(r.value);break;case"urn:mpeg:dash:utc:http-ntp:2014":case"urn:mpeg:dash:utc:ntp:2014":case"urn:mpeg:dash:utc:sntp:2014":default:throw new Error($u.UNSUPPORTED_UTC_TIMING_SCHEME)}return r},MS=function(t,i){i===void 0&&(i={});var r=BN(RS(t),i),e=PN(r.representationInfo);return TN({dashPlaylists:e,locations:r.locations,sidxMapping:i.sidxMapping,previousManifest:i.previousManifest})},FS=function(t){return jN(RS(t))},NS=Math.pow(2,32),VN=function(a){var t=new DataView(a.buffer,a.byteOffset,a.byteLength),i;return t.getBigUint64?(i=t.getBigUint64(0),i<Number.MAX_SAFE_INTEGER?Number(i):i):t.getUint32(0)*NS+t.getUint32(4)},HN={getUint64:VN,MAX_UINT32:NS},bT=HN.getUint64,$N=function(a){var t=new DataView(a.buffer,a.byteOffset,a.byteLength),i={version:a[0],flags:new Uint8Array(a.subarray(1,4)),references:[],referenceId:t.getUint32(4),timescale:t.getUint32(8)},r=12;i.version===0?(i.earliestPresentationTime=t.getUint32(r),i.firstOffset=t.getUint32(r+4),r+=8):(i.earliestPresentationTime=bT(a.subarray(r)),i.firstOffset=bT(a.subarray(r+8)),r+=16),r+=2;var e=t.getUint16(r);for(r+=2;e>0;r+=12,e--)i.references.push({referenceType:(a[r]&128)>>>7,referencedSize:t.getUint32(r)&2147483647,subsegmentDuration:t.getUint32(r+4),startsWithSap:!!(a[r+8]&128),sapType:(a[r+8]&112)>>>4,sapDeltaTime:t.getUint32(r+8)&268435455});return i},US=$N,WN=$e([73,68,51]),qN=function(t,i){i===void 0&&(i=0),t=$e(t);var r=t[i+5],e=t[i+6]<<21|t[i+7]<<14|t[i+8]<<7|t[i+9],n=(r&16)>>4;return n?e+20:e+10},Su=function a(t,i){return i===void 0&&(i=0),t=$e(t),t.length-i<10||!jt(t,WN,{offset:i})?i:(i+=qN(t,i),a(t,i))},xT=function(t){return typeof t=="string"?lv(t):t},GN=function(t){return Array.isArray(t)?t.map(function(i){return xT(i)}):[xT(t)]},zN=function a(t,i,r){r===void 0&&(r=!1),i=GN(i),t=$e(t);var e=[];if(!i.length)return e;for(var n=0;n<t.length;){var s=(t[n]<<24|t[n+1]<<16|t[n+2]<<8|t[n+3])>>>0,o=t.subarray(n+4,n+8);if(s===0)break;var l=n+s;if(l>t.length){if(r)break;l=t.length}var f=t.subarray(n+8,l);jt(o,i[0])&&(i.length===1?e.push(f):e.push.apply(e,a(f,i.slice(1),r))),n=l}return e},ac={EBML:$e([26,69,223,163]),DocType:$e([66,130]),Segment:$e([24,83,128,103]),SegmentInfo:$e([21,73,169,102]),Tracks:$e([22,84,174,107]),Track:$e([174]),TrackNumber:$e([215]),DefaultDuration:$e([35,227,131]),TrackEntry:$e([174]),TrackType:$e([131]),FlagDefault:$e([136]),CodecID:$e([134]),CodecPrivate:$e([99,162]),VideoTrack:$e([224]),AudioTrack:$e([225]),Cluster:$e([31,67,182,117]),Timestamp:$e([231]),TimestampScale:$e([42,215,177]),BlockGroup:$e([160]),BlockDuration:$e([155]),Block:$e([161]),SimpleBlock:$e([163])},Jm=[128,64,32,16,8,4,2,1],KN=function(t){for(var i=1,r=0;r<Jm.length&&!(t&Jm[r]);r++)i++;return i},Wc=function(t,i,r,e){r===void 0&&(r=!0),e===void 0&&(e=!1);var n=KN(t[i]),s=t.subarray(i,i+n);return r&&(s=Array.prototype.slice.call(t,i,i+n),s[0]^=Jm[n-1]),{length:n,value:bF(s,{signed:e}),bytes:s}},ST=function a(t){return typeof t=="string"?t.match(/.{1,2}/g).map(function(i){return a(i)}):typeof t=="number"?xF(t):t},XN=function(t){return Array.isArray(t)?t.map(function(i){return ST(i)}):[ST(t)]},QN=function a(t,i,r){if(r>=i.length)return i.length;var e=Wc(i,r,!1);if(jt(t.bytes,e.bytes))return r;var n=Wc(i,r+e.length);return a(t,i,r+n.length+n.value+e.length)},ET=function a(t,i){i=XN(i),t=$e(t);var r=[];if(!i.length)return r;for(var e=0;e<t.length;){var n=Wc(t,e,!1),s=Wc(t,e+n.length),o=e+n.length+s.length;s.value===127&&(s.value=QN(n,t,o),s.value!==t.length&&(s.value-=o));var l=o+s.value>t.length?t.length:o+s.value,f=t.subarray(o,l);jt(i[0],n.bytes)&&(i.length===1?r.push(f):r=r.concat(a(f,i.slice(1))));var m=n.length+s.length+f.length;e+=m}return r},YN=$e([0,0,0,1]),JN=$e([0,0,1]),ZN=$e([0,0,3]),eU=function(t){for(var i=[],r=1;r<t.length-2;)jt(t.subarray(r,r+3),ZN)&&(i.push(r+2),r++),r++;if(i.length===0)return t;var e=t.length-i.length,n=new Uint8Array(e),s=0;for(r=0;r<e;s++,r++)s===i[0]&&(s++,i.shift()),n[r]=t[s];return n},BS=function(t,i,r,e){e===void 0&&(e=1/0),t=$e(t),r=[].concat(r);for(var n=0,s,o=0;n<t.length&&(o<e||s);){var l=void 0;if(jt(t.subarray(n),YN)?l=4:jt(t.subarray(n),JN)&&(l=3),!l){n++;continue}if(o++,s)return eU(t.subarray(s,n));var f=void 0;i==="h264"?f=t[n+l]&31:i==="h265"&&(f=t[n+l]>>1&63),r.indexOf(f)!==-1&&(s=n+l),n+=l+(i==="h264"?1:2)}return t.subarray(0,0)},tU=function(t,i,r){return BS(t,"h264",i,r)},iU=function(t,i,r){return BS(t,"h265",i,r)},Wi={webm:$e([119,101,98,109]),matroska:$e([109,97,116,114,111,115,107,97]),flac:$e([102,76,97,67]),ogg:$e([79,103,103,83]),ac3:$e([11,119]),riff:$e([82,73,70,70]),avi:$e([65,86,73]),wav:$e([87,65,86,69]),"3gp":$e([102,116,121,112,51,103]),mp4:$e([102,116,121,112]),fmp4:$e([115,116,121,112]),mov:$e([102,116,121,112,113,116]),moov:$e([109,111,111,118]),moof:$e([109,111,111,102])},Wu={aac:function(t){var i=Su(t);return jt(t,[255,16],{offset:i,mask:[255,22]})},mp3:function(t){var i=Su(t);return jt(t,[255,2],{offset:i,mask:[255,6]})},webm:function(t){var i=ET(t,[ac.EBML,ac.DocType])[0];return jt(i,Wi.webm)},mkv:function(t){var i=ET(t,[ac.EBML,ac.DocType])[0];return jt(i,Wi.matroska)},mp4:function(t){if(Wu["3gp"](t)||Wu.mov(t))return!1;if(jt(t,Wi.mp4,{offset:4})||jt(t,Wi.fmp4,{offset:4})||jt(t,Wi.moof,{offset:4})||jt(t,Wi.moov,{offset:4}))return!0},mov:function(t){return jt(t,Wi.mov,{offset:4})},"3gp":function(t){return jt(t,Wi["3gp"],{offset:4})},ac3:function(t){var i=Su(t);return jt(t,Wi.ac3,{offset:i})},ts:function(t){if(t.length<189&&t.length>=1)return t[0]===71;for(var i=0;i+188<t.length&&i<188;){if(t[i]===71&&t[i+188]===71)return!0;i+=1}return!1},flac:function(t){var i=Su(t);return jt(t,Wi.flac,{offset:i})},ogg:function(t){return jt(t,Wi.ogg)},avi:function(t){return jt(t,Wi.riff)&&jt(t,Wi.avi,{offset:8})},wav:function(t){return jt(t,Wi.riff)&&jt(t,Wi.wav,{offset:8})},h264:function(t){return tU(t,7,3).length},h265:function(t){return iU(t,[32,33],3).length}},Zm=Object.keys(Wu).filter(function(a){return a!=="ts"&&a!=="h264"&&a!=="h265"}).concat(["ts","h264","h265"]);Zm.forEach(function(a){var t=Wu[a];Wu[a]=function(i){return t($e(i))}});var rU=Wu,Zu=function(t){t=$e(t);for(var i=0;i<Zm.length;i++){var r=Zm[i];if(rU[r](t))return r}return""},jS=function(t){return zN(t,["moof"]).length>0},Ev=9e4,wv,Cv,Vh,Av,VS,HS,$S;wv=function(a){return a*Ev};Cv=function(a,t){return a*t};Vh=function(a){return a/Ev};Av=function(a,t){return a/t};VS=function(a,t){return wv(Av(a,t))};HS=function(a,t){return Cv(Vh(a),t)};$S=function(a,t,i){return Vh(i?a:a-t)};var xs={ONE_SECOND_IN_TS:Ev,secondsToVideoTs:wv,secondsToAudioTs:Cv,videoTsToSeconds:Vh,audioTsToSeconds:Av,audioTsToVideoTs:VS,videoTsToAudioTs:HS,metadataTsToSeconds:$S};function eg(a){return eg=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(i){return i.__proto__||Object.getPrototypeOf(i)},eg(a)}function nU(a){return Function.toString.call(a).indexOf("[native code]")!==-1}function qc(a){var t=typeof Map=="function"?new Map:void 0;return qc=function(r){if(r===null||!nU(r))return r;if(typeof r!="function")throw new TypeError("Super expression must either be null or a function");if(typeof t<"u"){if(t.has(r))return t.get(r);t.set(r,e)}function e(){return Id(r,arguments,eg(this).constructor)}return e.prototype=Object.create(r.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Bu(e,r)},qc(a)}var WS="7.21.3",Aa={},Ss=function(t,i){return Aa[t]=Aa[t]||[],i&&(Aa[t]=Aa[t].concat(i)),Aa[t]},aU=function(t,i){Ss(t,i)},qS=function(t,i){var r=Ss(t).indexOf(i);return r<=-1?!1:(Aa[t]=Aa[t].slice(),Aa[t].splice(r,1),!0)},sU=function(t,i){Ss(t,[].concat(i).map(function(r){var e=function n(){return qS(t,n),r.apply(void 0,arguments)};return e}))},Gc={prefixed:!0},wc=[["requestFullscreen","exitFullscreen","fullscreenElement","fullscreenEnabled","fullscreenchange","fullscreenerror","fullscreen"],["webkitRequestFullscreen","webkitExitFullscreen","webkitFullscreenElement","webkitFullscreenEnabled","webkitfullscreenchange","webkitfullscreenerror","-webkit-full-screen"],["mozRequestFullScreen","mozCancelFullScreen","mozFullScreenElement","mozFullScreenEnabled","mozfullscreenchange","mozfullscreenerror","-moz-full-screen"],["msRequestFullscreen","msExitFullscreen","msFullscreenElement","msFullscreenEnabled","MSFullscreenChange","MSFullscreenError","-ms-fullscreen"]],wT=wc[0],Td;for(var sc=0;sc<wc.length;sc++)if(wc[sc][1]in Se){Td=wc[sc];break}if(Td){for(var oc=0;oc<Td.length;oc++)Gc[wT[oc]]=Td[oc];Gc.prefixed=Td[0]!==wT[0]}var fr=[],oU=function(t,i){return function(r,e,n){var s=i.levels[e],o=new RegExp("^("+s+")$");if(r!=="log"&&n.unshift(r.toUpperCase()+":"),n.unshift(t+":"),fr){fr.push([].concat(n));var l=fr.length-1e3;fr.splice(0,l>0?l:0)}if(F.console){var f=F.console[r];!f&&r==="debug"&&(f=F.console.info||F.console.log),!(!f||!s||!o.test(r))&&f[Array.isArray(n)?"apply":"call"](F.console,n)}}};function GS(a){var t="info",i,r=function(){for(var n=arguments.length,s=new Array(n),o=0;o<n;o++)s[o]=arguments[o];i("log",t,s)};return i=oU(a,r),r.createLogger=function(e){return GS(a+": "+e)},r.levels={all:"debug|log|warn|error",off:"",debug:"debug|log|warn|error",info:"log|warn|error",warn:"warn|error",error:"error",DEFAULT:t},r.level=function(e){if(typeof e=="string"){if(!r.levels.hasOwnProperty(e))throw new Error('"'+e+'" in not a valid log level');t=e}return t},r.history=function(){return fr?[].concat(fr):[]},r.history.filter=function(e){return(fr||[]).filter(function(n){return new RegExp(".*"+e+".*").test(n[0])})},r.history.clear=function(){fr&&(fr.length=0)},r.history.disable=function(){fr!==null&&(fr.length=0,fr=null)},r.history.enable=function(){fr===null&&(fr=[])},r.error=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i("error",t,n)},r.warn=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i("warn",t,n)},r.debug=function(){for(var e=arguments.length,n=new Array(e),s=0;s<e;s++)n[s]=arguments[s];return i("debug",t,n)},r}var lt=GS("VIDEOJS"),zS=lt.createLogger,uU=Object.prototype.toString,KS=function(t){return Ba(t)?Object.keys(t):[]};function ku(a,t){KS(a).forEach(function(i){return t(a[i],i)})}function lU(a,t,i){return i===void 0&&(i=0),KS(a).reduce(function(r,e){return t(r,a[e],e)},i)}function Wt(a){for(var t=arguments.length,i=new Array(t>1?t-1:0),r=1;r<t;r++)i[r-1]=arguments[r];return Object.assign?Ni.apply(void 0,[a].concat(i)):(i.forEach(function(e){e&&ku(e,function(n,s){a[s]=n})}),a)}function Ba(a){return!!a&&typeof a=="object"}function zd(a){return Ba(a)&&uU.call(a)==="[object Object]"&&a.constructor===Object}function Kd(a,t){if(!a||!t)return"";if(typeof F.getComputedStyle=="function"){var i;try{i=F.getComputedStyle(a)}catch{return""}return i?i.getPropertyValue(t)||i[t]:""}return""}var gi=F.navigator&&F.navigator.userAgent||"",CT=/AppleWebKit\/([\d.]+)/i.exec(gi),dU=CT?parseFloat(CT.pop()):null,XS=/iPod/i.test(gi),fU=function(){var a=gi.match(/OS (\d+)_/i);return a&&a[1]?a[1]:null}(),$a=/Android/i.test(gi),Iv=function(){var a=gi.match(/Android (\d+)(?:\.(\d+))?(?:\.(\d+))*/i);if(!a)return null;var t=a[1]&&parseFloat(a[1]),i=a[2]&&parseFloat(a[2]);return t&&i?parseFloat(a[1]+"."+a[2]):t||null}(),QS=$a&&Iv<5&&dU<537,YS=/Firefox/i.test(gi),df=/Edg/i.test(gi),Wa=!df&&(/Chrome/i.test(gi)||/CriOS/i.test(gi)),JS=function(){var a=gi.match(/(Chrome|CriOS)\/(\d+)/);return a&&a[2]?parseFloat(a[2]):null}(),ff=function(){var a=/MSIE\s(\d+)\.\d/.exec(gi),t=a&&parseFloat(a[1]);return!t&&/Trident\/7.0/i.test(gi)&&/rv:11.0/.test(gi)&&(t=11),t}(),Pv=/Safari/i.test(gi)&&!Wa&&!$a&&!df,ZS=/Windows/i.test(gi),qu=Boolean(el()&&("ontouchstart"in F||F.navigator.maxTouchPoints||F.DocumentTouch&&F.document instanceof F.DocumentTouch)),Ov=/iPad/i.test(gi)||Pv&&qu&&!/iPhone/i.test(gi),Dv=/iPhone/i.test(gi)&&!Ov,er=Dv||Ov||XS,Hh=(Pv||er)&&!Wa,cU=Object.freeze({__proto__:null,IS_IPOD:XS,IOS_VERSION:fU,IS_ANDROID:$a,ANDROID_VERSION:Iv,IS_NATIVE_ANDROID:QS,IS_FIREFOX:YS,IS_EDGE:df,IS_CHROME:Wa,CHROME_VERSION:JS,IE_VERSION:ff,IS_SAFARI:Pv,IS_WINDOWS:ZS,TOUCH_ENABLED:qu,IS_IPAD:Ov,IS_IPHONE:Dv,IS_IOS:er,IS_ANY_SAFARI:Hh});function AT(a){return typeof a=="string"&&Boolean(a.trim())}function eE(a){if(a.indexOf(" ")>=0)throw new Error("class has illegal whitespace characters")}function hU(a){return new RegExp("(^|\\s)"+a+"($|\\s)")}function el(){return Se===F.document}function tl(a){return Ba(a)&&a.nodeType===1}function tE(){try{return F.parent!==F.self}catch{return!0}}function iE(a){return function(t,i){if(!AT(t))return Se[a](null);AT(i)&&(i=Se.querySelector(i));var r=tl(i)?i:Se;return r[a]&&r[a](t)}}function xt(a,t,i,r){a===void 0&&(a="div"),t===void 0&&(t={}),i===void 0&&(i={});var e=Se.createElement(a);return Object.getOwnPropertyNames(t).forEach(function(n){var s=t[n];n.indexOf("aria-")!==-1||n==="role"||n==="type"?(lt.warn(`Setting attributes in the second argument of createEl()
has been deprecated. Use the third argument instead.
`+("createEl(type, properties, attributes). Attempting to set "+n+" to "+s+".")),e.setAttribute(n,s)):n==="textContent"?ko(e,s):(e[n]!==s||n==="tabIndex")&&(e[n]=s)}),Object.getOwnPropertyNames(i).forEach(function(n){e.setAttribute(n,i[n])}),r&&kv(e,r),e}function ko(a,t){return typeof a.textContent>"u"?a.innerText=t:a.textContent=t,a}function tg(a,t){t.firstChild?t.insertBefore(a,t.firstChild):t.appendChild(a)}function So(a,t){return eE(t),a.classList?a.classList.contains(t):hU(t).test(a.className)}function La(a,t){return a.classList?a.classList.add(t):So(a,t)||(a.className=(a.className+" "+t).trim()),a}function cf(a,t){return a?(a.classList?a.classList.remove(t):(eE(t),a.className=a.className.split(/\s+/).filter(function(i){return i!==t}).join(" ")),a):(lt.warn("removeClass was called with an element that doesn't exist"),null)}function rE(a,t,i){var r=So(a,t);if(typeof i=="function"&&(i=i(a,t)),typeof i!="boolean"&&(i=!r),i!==r)return i?La(a,t):cf(a,t),a}function nE(a,t){Object.getOwnPropertyNames(t).forEach(function(i){var r=t[i];r===null||typeof r>"u"||r===!1?a.removeAttribute(i):a.setAttribute(i,r===!0?"":r)})}function Ca(a){var t={},i=",autoplay,controls,playsinline,loop,muted,default,defaultMuted,";if(a&&a.attributes&&a.attributes.length>0)for(var r=a.attributes,e=r.length-1;e>=0;e--){var n=r[e].name,s=r[e].value;(typeof a[n]=="boolean"||i.indexOf(","+n+",")!==-1)&&(s=s!==null),t[n]=s}return t}function aE(a,t){return a.getAttribute(t)}function Gu(a,t,i){a.setAttribute(t,i)}function $h(a,t){a.removeAttribute(t)}function sE(){Se.body.focus(),Se.onselectstart=function(){return!1}}function oE(){Se.onselectstart=function(){return!0}}function zu(a){if(a&&a.getBoundingClientRect&&a.parentNode){var t=a.getBoundingClientRect(),i={};return["bottom","height","left","right","top","width"].forEach(function(r){t[r]!==void 0&&(i[r]=t[r])}),i.height||(i.height=parseFloat(Kd(a,"height"))),i.width||(i.width=parseFloat(Kd(a,"width"))),i}}function Xd(a){if(!a||a&&!a.offsetParent)return{left:0,top:0,width:0,height:0};for(var t=a.offsetWidth,i=a.offsetHeight,r=0,e=0;a.offsetParent&&a!==Se[Gc.fullscreenElement];)r+=a.offsetLeft,e+=a.offsetTop,a=a.offsetParent;return{left:r,top:e,width:t,height:i}}function Wh(a,t){var i={x:0,y:0};if(er)for(var r=a;r&&r.nodeName.toLowerCase()!=="html";){var e=Kd(r,"transform");if(/^matrix/.test(e)){var n=e.slice(7,-1).split(/,\s/).map(Number);i.x+=n[4],i.y+=n[5]}else if(/^matrix3d/.test(e)){var s=e.slice(9,-1).split(/,\s/).map(Number);i.x+=s[12],i.y+=s[13]}r=r.parentNode}var o={},l=Xd(t.target),f=Xd(a),m=f.width,v=f.height,y=t.offsetY-(f.top-l.top),E=t.offsetX-(f.left-l.left);return t.changedTouches&&(E=t.changedTouches[0].pageX-f.left,y=t.changedTouches[0].pageY+f.top,er&&(E-=i.x,y-=i.y)),o.y=1-Math.max(0,Math.min(1,y/v)),o.x=Math.max(0,Math.min(1,E/m)),o}function uE(a){return Ba(a)&&a.nodeType===3}function Lv(a){for(;a.firstChild;)a.removeChild(a.firstChild);return a}function lE(a){return typeof a=="function"&&(a=a()),(Array.isArray(a)?a:[a]).map(function(t){if(typeof t=="function"&&(t=t()),tl(t)||uE(t))return t;if(typeof t=="string"&&/\S/.test(t))return Se.createTextNode(t)}).filter(function(t){return t})}function kv(a,t){return lE(t).forEach(function(i){return a.appendChild(i)}),a}function dE(a,t){return kv(Lv(a),t)}function Qd(a){return a.button===void 0&&a.buttons===void 0||a.button===0&&a.buttons===void 0||a.type==="mouseup"&&a.button===0&&a.buttons===0?!0:!(a.button!==0||a.buttons!==1)}var Es=iE("querySelector"),fE=iE("querySelectorAll"),cE=Object.freeze({__proto__:null,isReal:el,isEl:tl,isInFrame:tE,createEl:xt,textContent:ko,prependTo:tg,hasClass:So,addClass:La,removeClass:cf,toggleClass:rE,setAttributes:nE,getAttributes:Ca,getAttribute:aE,setAttribute:Gu,removeAttribute:$h,blockTextSelection:sE,unblockTextSelection:oE,getBoundingClientRect:zu,findPosition:Xd,getPointerPosition:Wh,isTextNode:uE,emptyEl:Lv,normalizeContent:lE,appendContent:kv,insertContent:dE,isSingleLeftClick:Qd,$:Es,$$:fE}),hE=!1,ig,pU=function(){if(ig.options.autoSetup!==!1){var t=Array.prototype.slice.call(Se.getElementsByTagName("video")),i=Array.prototype.slice.call(Se.getElementsByTagName("audio")),r=Array.prototype.slice.call(Se.getElementsByTagName("video-js")),e=t.concat(i,r);if(e&&e.length>0)for(var n=0,s=e.length;n<s;n++){var o=e[n];if(o&&o.getAttribute){if(o.player===void 0){var l=o.getAttribute("data-setup");l!==null&&ig(o)}}else{rg(1);break}}else hE||rg(1)}};function rg(a,t){el()&&(t&&(ig=t),F.setTimeout(pU,a))}function ng(){hE=!0,F.removeEventListener("load",ng)}el()&&(Se.readyState==="complete"?ng():F.addEventListener("load",ng));var pE=function(t){var i=Se.createElement("style");return i.className=t,i},mE=function(t,i){t.styleSheet?t.styleSheet.cssText=i:t.textContent=i},mU=3,gU=mU;function qa(){return gU++}var gE;F.WeakMap||(gE=function(){function a(){this.vdata="vdata"+Math.floor(F.performance&&F.performance.now()||Date.now()),this.data={}}var t=a.prototype;return t.set=function(r,e){var n=r[this.vdata]||qa();return r[this.vdata]||(r[this.vdata]=n),this.data[n]=e,this},t.get=function(r){var e=r[this.vdata];if(e)return this.data[e];lt("We have no data for this element",r)},t.has=function(r){var e=r[this.vdata];return e in this.data},t.delete=function(r){var e=r[this.vdata];e&&(delete this.data[e],delete r[this.vdata])},a}());var Yi=F.WeakMap?new WeakMap:new gE;function IT(a,t){if(Yi.has(a)){var i=Yi.get(a);i.handlers[t].length===0&&(delete i.handlers[t],a.removeEventListener?a.removeEventListener(t,i.dispatcher,!1):a.detachEvent&&a.detachEvent("on"+t,i.dispatcher)),Object.getOwnPropertyNames(i.handlers).length<=0&&(delete i.handlers,delete i.dispatcher,delete i.disabled),Object.getOwnPropertyNames(i).length===0&&Yi.delete(a)}}function Rv(a,t,i,r){i.forEach(function(e){a(t,e,r)})}function qh(a){if(a.fixed_)return a;function t(){return!0}function i(){return!1}if(!a||!a.isPropagationStopped||!a.isImmediatePropagationStopped){var r=a||F.event;a={};for(var e in r)e!=="layerX"&&e!=="layerY"&&e!=="keyLocation"&&e!=="webkitMovementX"&&e!=="webkitMovementY"&&e!=="path"&&(e==="returnValue"&&r.preventDefault||(a[e]=r[e]));if(a.target||(a.target=a.srcElement||Se),a.relatedTarget||(a.relatedTarget=a.fromElement===a.target?a.toElement:a.fromElement),a.preventDefault=function(){r.preventDefault&&r.preventDefault(),a.returnValue=!1,r.returnValue=!1,a.defaultPrevented=!0},a.defaultPrevented=!1,a.stopPropagation=function(){r.stopPropagation&&r.stopPropagation(),a.cancelBubble=!0,r.cancelBubble=!0,a.isPropagationStopped=t},a.isPropagationStopped=i,a.stopImmediatePropagation=function(){r.stopImmediatePropagation&&r.stopImmediatePropagation(),a.isImmediatePropagationStopped=t,a.stopPropagation()},a.isImmediatePropagationStopped=i,a.clientX!==null&&a.clientX!==void 0){var n=Se.documentElement,s=Se.body;a.pageX=a.clientX+(n&&n.scrollLeft||s&&s.scrollLeft||0)-(n&&n.clientLeft||s&&s.clientLeft||0),a.pageY=a.clientY+(n&&n.scrollTop||s&&s.scrollTop||0)-(n&&n.clientTop||s&&s.clientTop||0)}a.which=a.charCode||a.keyCode,a.button!==null&&a.button!==void 0&&(a.button=a.button&1?0:a.button&4?1:a.button&2?2:0)}return a.fixed_=!0,a}var uc,vU=function(){if(typeof uc!="boolean"){uc=!1;try{var t=Object.defineProperty({},"passive",{get:function(){uc=!0}});F.addEventListener("test",null,t),F.removeEventListener("test",null,t)}catch{}}return uc},_U=["touchstart","touchmove"];function Ur(a,t,i){if(Array.isArray(t))return Rv(Ur,a,t,i);Yi.has(a)||Yi.set(a,{});var r=Yi.get(a);if(r.handlers||(r.handlers={}),r.handlers[t]||(r.handlers[t]=[]),i.guid||(i.guid=qa()),r.handlers[t].push(i),r.dispatcher||(r.disabled=!1,r.dispatcher=function(n,s){if(!r.disabled){n=qh(n);var o=r.handlers[n.type];if(o)for(var l=o.slice(0),f=0,m=l.length;f<m&&!n.isImmediatePropagationStopped();f++)try{l[f].call(a,n,s)}catch(v){lt.error(v)}}}),r.handlers[t].length===1)if(a.addEventListener){var e=!1;vU()&&_U.indexOf(t)>-1&&(e={passive:!0}),a.addEventListener(t,r.dispatcher,e)}else a.attachEvent&&a.attachEvent("on"+t,r.dispatcher)}function Fi(a,t,i){if(Yi.has(a)){var r=Yi.get(a);if(r.handlers){if(Array.isArray(t))return Rv(Fi,a,t,i);var e=function(f,m){r.handlers[m]=[],IT(f,m)};if(t===void 0){for(var n in r.handlers)Object.prototype.hasOwnProperty.call(r.handlers||{},n)&&e(a,n);return}var s=r.handlers[t];if(s){if(!i){e(a,t);return}if(i.guid)for(var o=0;o<s.length;o++)s[o].guid===i.guid&&s.splice(o--,1);IT(a,t)}}}}function il(a,t,i){var r=Yi.has(a)?Yi.get(a):{},e=a.parentNode||a.ownerDocument;if(typeof t=="string"?t={type:t,target:a}:t.target||(t.target=a),t=qh(t),r.dispatcher&&r.dispatcher.call(a,t,i),e&&!t.isPropagationStopped()&&t.bubbles===!0)il.call(null,e,t,i);else if(!e&&!t.defaultPrevented&&t.target&&t.target[t.type]){Yi.has(t.target)||Yi.set(t.target,{});var n=Yi.get(t.target);t.target[t.type]&&(n.disabled=!0,typeof t.target[t.type]=="function"&&t.target[t.type](),n.disabled=!1)}return!t.defaultPrevented}function Gh(a,t,i){if(Array.isArray(t))return Rv(Gh,a,t,i);var r=function e(){Fi(a,t,e),i.apply(this,arguments)};r.guid=i.guid=i.guid||qa(),Ur(a,t,r)}function vE(a,t,i){var r=function e(){Fi(a,t,e),i.apply(this,arguments)};r.guid=i.guid=i.guid||qa(),Ur(a,t,r)}var yU=Object.freeze({__proto__:null,fixEvent:qh,on:Ur,off:Fi,trigger:il,one:Gh,any:vE}),Pn=30,Nt=function(t,i,r){i.guid||(i.guid=qa());var e=i.bind(t);return e.guid=r?r+"_"+i.guid:i.guid,e},ja=function(t,i){var r=F.performance.now(),e=function(){var s=F.performance.now();s-r>=i&&(t.apply(void 0,arguments),r=s)};return e},TU=function(t,i,r,e){e===void 0&&(e=F);var n,s=function(){e.clearTimeout(n),n=null},o=function(){var f=this,m=arguments,v=function(){n=null,v=null,r||t.apply(f,m)};!n&&r&&t.apply(f,m),e.clearTimeout(n),n=e.setTimeout(v,i)};return o.cancel=s,o},_i=function(){};_i.prototype.allowedEvents_={};_i.prototype.on=function(a,t){var i=this.addEventListener;this.addEventListener=function(){},Ur(this,a,t),this.addEventListener=i};_i.prototype.addEventListener=_i.prototype.on;_i.prototype.off=function(a,t){Fi(this,a,t)};_i.prototype.removeEventListener=_i.prototype.off;_i.prototype.one=function(a,t){var i=this.addEventListener;this.addEventListener=function(){},Gh(this,a,t),this.addEventListener=i};_i.prototype.any=function(a,t){var i=this.addEventListener;this.addEventListener=function(){},vE(this,a,t),this.addEventListener=i};_i.prototype.trigger=function(a){var t=a.type||a;typeof a=="string"&&(a={type:t}),a=qh(a),this.allowedEvents_[t]&&this["on"+t]&&this["on"+t](a),il(this,a)};_i.prototype.dispatchEvent=_i.prototype.trigger;var fd;_i.prototype.queueTrigger=function(a){var t=this;fd||(fd=new Map);var i=a.type||a,r=fd.get(this);r||(r=new Map,fd.set(this,r));var e=r.get(i);r.delete(i),F.clearTimeout(e);var n=F.setTimeout(function(){r.delete(i),r.size===0&&(r=null,fd.delete(t)),t.trigger(a)},0);r.set(i,n)};var zh=function(t){return typeof t.name=="function"?t.name():typeof t.name=="string"?t.name:t.name_?t.name_:t.constructor&&t.constructor.name?t.constructor.name:typeof t},ka=function(t){return t instanceof _i||!!t.eventBusEl_&&["on","one","off","trigger"].every(function(i){return typeof t[i]=="function"})},bU=function(t,i){ka(t)?i():(t.eventedCallbacks||(t.eventedCallbacks=[]),t.eventedCallbacks.push(i))},ag=function(t){return typeof t=="string"&&/\S/.test(t)||Array.isArray(t)&&!!t.length},zc=function(t,i,r){if(!t||!t.nodeName&&!ka(t))throw new Error("Invalid target for "+zh(i)+"#"+r+"; must be a DOM node or evented object.")},_E=function(t,i,r){if(!ag(t))throw new Error("Invalid event type for "+zh(i)+"#"+r+"; must be a non-empty string or array.")},yE=function(t,i,r){if(typeof t!="function")throw new Error("Invalid listener for "+zh(i)+"#"+r+"; must be a function.")},am=function(t,i,r){var e=i.length<3||i[0]===t||i[0]===t.eventBusEl_,n,s,o;return e?(n=t.eventBusEl_,i.length>=3&&i.shift(),s=i[0],o=i[1]):(n=i[0],s=i[1],o=i[2]),zc(n,t,r),_E(s,t,r),yE(o,t,r),o=Nt(t,o),{isTargetingSelf:e,target:n,type:s,listener:o}},no=function(t,i,r,e){zc(t,t,i),t.nodeName?yU[i](t,r,e):t[i](r,e)},xU={on:function(){for(var t=this,i=arguments.length,r=new Array(i),e=0;e<i;e++)r[e]=arguments[e];var n=am(this,r,"on"),s=n.isTargetingSelf,o=n.target,l=n.type,f=n.listener;if(no(o,"on",l,f),!s){var m=function(){return t.off(o,l,f)};m.guid=f.guid;var v=function(){return t.off("dispose",m)};v.guid=f.guid,no(this,"on","dispose",m),no(o,"on","dispose",v)}},one:function(){for(var t=this,i=arguments.length,r=new Array(i),e=0;e<i;e++)r[e]=arguments[e];var n=am(this,r,"one"),s=n.isTargetingSelf,o=n.target,l=n.type,f=n.listener;if(s)no(o,"one",l,f);else{var m=function v(){t.off(o,l,v);for(var y=arguments.length,E=new Array(y),I=0;I<y;I++)E[I]=arguments[I];f.apply(null,E)};m.guid=f.guid,no(o,"one",l,m)}},any:function(){for(var t=this,i=arguments.length,r=new Array(i),e=0;e<i;e++)r[e]=arguments[e];var n=am(this,r,"any"),s=n.isTargetingSelf,o=n.target,l=n.type,f=n.listener;if(s)no(o,"any",l,f);else{var m=function v(){t.off(o,l,v);for(var y=arguments.length,E=new Array(y),I=0;I<y;I++)E[I]=arguments[I];f.apply(null,E)};m.guid=f.guid,no(o,"any",l,m)}},off:function(t,i,r){if(!t||ag(t))Fi(this.eventBusEl_,t,i);else{var e=t,n=i;zc(e,this,"off"),_E(n,this,"off"),yE(r,this,"off"),r=Nt(this,r),this.off("dispose",r),e.nodeName?(Fi(e,n,r),Fi(e,"dispose",r)):ka(e)&&(e.off(n,r),e.off("dispose",r))}},trigger:function(t,i){zc(this.eventBusEl_,this,"trigger");var r=t&&typeof t!="string"?t.type:t;if(!ag(r)){var e="Invalid event type for "+zh(this)+"#trigger; must be a non-empty string or object with a type key that has a non-empty value.";if(t)(this.log||lt).error(e);else throw new Error(e)}return il(this.eventBusEl_,t,i)}};function Mv(a,t){t===void 0&&(t={});var i=t,r=i.eventBusKey;if(r){if(!a[r].nodeName)throw new Error('The eventBusKey "'+r+'" does not refer to an element.');a.eventBusEl_=a[r]}else a.eventBusEl_=xt("span",{className:"vjs-event-bus"});return Wt(a,xU),a.eventedCallbacks&&a.eventedCallbacks.forEach(function(e){e()}),a.on("dispose",function(){a.off(),[a,a.el_,a.eventBusEl_].forEach(function(e){e&&Yi.has(e)&&Yi.delete(e)}),F.setTimeout(function(){a.eventBusEl_=null},0)}),a}var SU={state:{},setState:function(t){var i=this;typeof t=="function"&&(t=t());var r;return ku(t,function(e,n){i.state[n]!==e&&(r=r||{},r[n]={from:i.state[n],to:e}),i.state[n]=e}),r&&ka(this)&&this.trigger({changes:r,type:"statechanged"}),r}};function TE(a,t){return Wt(a,SU),a.state=Wt({},a.state,t),typeof a.handleStateChanged=="function"&&ka(a)&&a.on("statechanged",a.handleStateChanged),a}var Cc=function(t){return typeof t!="string"?t:t.replace(/./,function(i){return i.toLowerCase()})},Zt=function(t){return typeof t!="string"?t:t.replace(/./,function(i){return i.toUpperCase()})},EU=function(t,i){return Zt(t)===Zt(i)};function Ft(){for(var a={},t=arguments.length,i=new Array(t),r=0;r<t;r++)i[r]=arguments[r];return i.forEach(function(e){e&&ku(e,function(n,s){if(!zd(n)){a[s]=n;return}zd(a[s])||(a[s]={}),a[s]=Ft(a[s],n)})}),a}var wU=function(){function a(){this.map_={}}var t=a.prototype;return t.has=function(r){return r in this.map_},t.delete=function(r){var e=this.has(r);return delete this.map_[r],e},t.set=function(r,e){return this.map_[r]=e,this},t.forEach=function(r,e){for(var n in this.map_)r.call(e,this.map_[n],n,this)},a}(),CU=F.Map?F.Map:wU,AU=function(){function a(){this.set_={}}var t=a.prototype;return t.has=function(r){return r in this.set_},t.delete=function(r){var e=this.has(r);return delete this.set_[r],e},t.add=function(r){return this.set_[r]=1,this},t.forEach=function(r,e){for(var n in this.set_)r.call(e,n,n,this)},a}(),sm=F.Set?F.Set:AU,Te=function(){function a(i,r,e){var n=this;if(!i&&this.play?this.player_=i=this:this.player_=i,this.isDisposed_=!1,this.parentComponent_=null,this.options_=Ft({},this.options_),r=this.options_=Ft(this.options_,r),this.id_=r.id||r.el&&r.el.id,!this.id_){var s=i&&i.id&&i.id()||"no_player";this.id_=s+"_component_"+qa()}this.name_=r.name||null,r.el?this.el_=r.el:r.createEl!==!1&&(this.el_=this.createEl()),r.className&&this.el_&&r.className.split(" ").forEach(function(o){return n.addClass(o)}),r.evented!==!1&&(Mv(this,{eventBusKey:this.el_?"el_":null}),this.handleLanguagechange=this.handleLanguagechange.bind(this),this.on(this.player_,"languagechange",this.handleLanguagechange)),TE(this,this.constructor.defaultState),this.children_=[],this.childIndex_={},this.childNameIndex_={},this.setTimeoutIds_=new sm,this.setIntervalIds_=new sm,this.rafIds_=new sm,this.namedRafs_=new CU,this.clearingTimersOnDispose_=!1,r.initChildren!==!1&&this.initChildren(),this.ready(e),r.reportTouchActivity!==!1&&this.enableTouchActivity()}var t=a.prototype;return t.dispose=function(r){if(r===void 0&&(r={}),!this.isDisposed_){if(this.readyQueue_&&(this.readyQueue_.length=0),this.trigger({type:"dispose",bubbles:!1}),this.isDisposed_=!0,this.children_)for(var e=this.children_.length-1;e>=0;e--)this.children_[e].dispose&&this.children_[e].dispose();this.children_=null,this.childIndex_=null,this.childNameIndex_=null,this.parentComponent_=null,this.el_&&(this.el_.parentNode&&(r.restoreEl?this.el_.parentNode.replaceChild(r.restoreEl,this.el_):this.el_.parentNode.removeChild(this.el_)),this.el_=null),this.player_=null}},t.isDisposed=function(){return Boolean(this.isDisposed_)},t.player=function(){return this.player_},t.options=function(r){return r?(this.options_=Ft(this.options_,r),this.options_):this.options_},t.el=function(){return this.el_},t.createEl=function(r,e,n){return xt(r,e,n)},t.localize=function(r,e,n){n===void 0&&(n=r);var s=this.player_.language&&this.player_.language(),o=this.player_.languages&&this.player_.languages(),l=o&&o[s],f=s&&s.split("-")[0],m=o&&o[f],v=n;return l&&l[r]?v=l[r]:m&&m[r]&&(v=m[r]),e&&(v=v.replace(/\{(\d+)\}/g,function(y,E){var I=e[E-1],O=I;return typeof I>"u"&&(O=y),O})),v},t.handleLanguagechange=function(){},t.contentEl=function(){return this.contentEl_||this.el_},t.id=function(){return this.id_},t.name=function(){return this.name_},t.children=function(){return this.children_},t.getChildById=function(r){return this.childIndex_[r]},t.getChild=function(r){if(r)return this.childNameIndex_[r]},t.getDescendant=function(){for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];e=e.reduce(function(l,f){return l.concat(f)},[]);for(var s=this,o=0;o<e.length;o++)if(s=s.getChild(e[o]),!s||!s.getChild)return;return s},t.addChild=function(r,e,n){e===void 0&&(e={}),n===void 0&&(n=this.children_.length);var s,o;if(typeof r=="string"){o=Zt(r);var l=e.componentClass||o;e.name=o;var f=a.getComponent(l);if(!f)throw new Error("Component "+l+" does not exist");if(typeof f!="function")return null;s=new f(this.player_||this,e)}else s=r;if(s.parentComponent_&&s.parentComponent_.removeChild(s),this.children_.splice(n,0,s),s.parentComponent_=this,typeof s.id=="function"&&(this.childIndex_[s.id()]=s),o=o||s.name&&Zt(s.name()),o&&(this.childNameIndex_[o]=s,this.childNameIndex_[Cc(o)]=s),typeof s.el=="function"&&s.el()){var m=null;this.children_[n+1]&&(this.children_[n+1].el_?m=this.children_[n+1].el_:tl(this.children_[n+1])&&(m=this.children_[n+1])),this.contentEl().insertBefore(s.el(),m)}return s},t.removeChild=function(r){if(typeof r=="string"&&(r=this.getChild(r)),!(!r||!this.children_)){for(var e=!1,n=this.children_.length-1;n>=0;n--)if(this.children_[n]===r){e=!0,this.children_.splice(n,1);break}if(e){r.parentComponent_=null,this.childIndex_[r.id()]=null,this.childNameIndex_[Zt(r.name())]=null,this.childNameIndex_[Cc(r.name())]=null;var s=r.el();s&&s.parentNode===this.contentEl()&&this.contentEl().removeChild(r.el())}}},t.initChildren=function(){var r=this,e=this.options_.children;if(e){var n=this.options_,s=function(m){var v=m.name,y=m.opts;if(n[v]!==void 0&&(y=n[v]),y!==!1){y===!0&&(y={}),y.playerOptions=r.options_.playerOptions;var E=r.addChild(v,y);E&&(r[v]=E)}},o,l=a.getComponent("Tech");Array.isArray(e)?o=e:o=Object.keys(e),o.concat(Object.keys(this.options_).filter(function(f){return!o.some(function(m){return typeof m=="string"?f===m:f===m.name})})).map(function(f){var m,v;return typeof f=="string"?(m=f,v=e[m]||r.options_[m]||{}):(m=f.name,v=f),{name:m,opts:v}}).filter(function(f){var m=a.getComponent(f.opts.componentClass||Zt(f.name));return m&&!l.isTech(m)}).forEach(s)}},t.buildCSSClass=function(){return""},t.ready=function(r,e){if(e===void 0&&(e=!1),!!r){if(!this.isReady_){this.readyQueue_=this.readyQueue_||[],this.readyQueue_.push(r);return}e?r.call(this):this.setTimeout(r,1)}},t.triggerReady=function(){this.isReady_=!0,this.setTimeout(function(){var r=this.readyQueue_;this.readyQueue_=[],r&&r.length>0&&r.forEach(function(e){e.call(this)},this),this.trigger("ready")},1)},t.$=function(r,e){return Es(r,e||this.contentEl())},t.$$=function(r,e){return fE(r,e||this.contentEl())},t.hasClass=function(r){return So(this.el_,r)},t.addClass=function(r){La(this.el_,r)},t.removeClass=function(r){cf(this.el_,r)},t.toggleClass=function(r,e){rE(this.el_,r,e)},t.show=function(){this.removeClass("vjs-hidden")},t.hide=function(){this.addClass("vjs-hidden")},t.lockShowing=function(){this.addClass("vjs-lock-showing")},t.unlockShowing=function(){this.removeClass("vjs-lock-showing")},t.getAttribute=function(r){return aE(this.el_,r)},t.setAttribute=function(r,e){Gu(this.el_,r,e)},t.removeAttribute=function(r){$h(this.el_,r)},t.width=function(r,e){return this.dimension("width",r,e)},t.height=function(r,e){return this.dimension("height",r,e)},t.dimensions=function(r,e){this.width(r,!0),this.height(e)},t.dimension=function(r,e,n){if(e!==void 0){(e===null||e!==e)&&(e=0),(""+e).indexOf("%")!==-1||(""+e).indexOf("px")!==-1?this.el_.style[r]=e:e==="auto"?this.el_.style[r]="":this.el_.style[r]=e+"px",n||this.trigger("componentresize");return}if(!this.el_)return 0;var s=this.el_.style[r],o=s.indexOf("px");return parseInt(o!==-1?s.slice(0,o):this.el_["offset"+Zt(r)],10)},t.currentDimension=function(r){var e=0;if(r!=="width"&&r!=="height")throw new Error("currentDimension only accepts width or height value");if(e=Kd(this.el_,r),e=parseFloat(e),e===0||isNaN(e)){var n="offset"+Zt(r);e=this.el_[n]}return e},t.currentDimensions=function(){return{width:this.currentDimension("width"),height:this.currentDimension("height")}},t.currentWidth=function(){return this.currentDimension("width")},t.currentHeight=function(){return this.currentDimension("height")},t.focus=function(){this.el_.focus()},t.blur=function(){this.el_.blur()},t.handleKeyDown=function(r){this.player_&&(et.isEventKey(r,"Tab")||r.stopPropagation(),this.player_.handleKeyDown(r))},t.handleKeyPress=function(r){this.handleKeyDown(r)},t.emitTapEvents=function(){var r=0,e=null,n=10,s=200,o;this.on("touchstart",function(f){f.touches.length===1&&(e={pageX:f.touches[0].pageX,pageY:f.touches[0].pageY},r=F.performance.now(),o=!0)}),this.on("touchmove",function(f){if(f.touches.length>1)o=!1;else if(e){var m=f.touches[0].pageX-e.pageX,v=f.touches[0].pageY-e.pageY,y=Math.sqrt(m*m+v*v);y>n&&(o=!1)}});var l=function(){o=!1};this.on("touchleave",l),this.on("touchcancel",l),this.on("touchend",function(f){if(e=null,o===!0){var m=F.performance.now()-r;m<s&&(f.preventDefault(),this.trigger("tap"))}})},t.enableTouchActivity=function(){if(!(!this.player()||!this.player().reportUserActivity)){var r=Nt(this.player(),this.player().reportUserActivity),e;this.on("touchstart",function(){r(),this.clearInterval(e),e=this.setInterval(r,250)});var n=function(o){r(),this.clearInterval(e)};this.on("touchmove",r),this.on("touchend",n),this.on("touchcancel",n)}},t.setTimeout=function(r,e){var n=this,s;return r=Nt(this,r),this.clearTimersOnDispose_(),s=F.setTimeout(function(){n.setTimeoutIds_.has(s)&&n.setTimeoutIds_.delete(s),r()},e),this.setTimeoutIds_.add(s),s},t.clearTimeout=function(r){return this.setTimeoutIds_.has(r)&&(this.setTimeoutIds_.delete(r),F.clearTimeout(r)),r},t.setInterval=function(r,e){r=Nt(this,r),this.clearTimersOnDispose_();var n=F.setInterval(r,e);return this.setIntervalIds_.add(n),n},t.clearInterval=function(r){return this.setIntervalIds_.has(r)&&(this.setIntervalIds_.delete(r),F.clearInterval(r)),r},t.requestAnimationFrame=function(r){var e=this;if(!this.supportsRaf_)return this.setTimeout(r,1e3/60);this.clearTimersOnDispose_();var n;return r=Nt(this,r),n=F.requestAnimationFrame(function(){e.rafIds_.has(n)&&e.rafIds_.delete(n),r()}),this.rafIds_.add(n),n},t.requestNamedAnimationFrame=function(r,e){var n=this;if(!this.namedRafs_.has(r)){this.clearTimersOnDispose_(),e=Nt(this,e);var s=this.requestAnimationFrame(function(){e(),n.namedRafs_.has(r)&&n.namedRafs_.delete(r)});return this.namedRafs_.set(r,s),r}},t.cancelNamedAnimationFrame=function(r){this.namedRafs_.has(r)&&(this.cancelAnimationFrame(this.namedRafs_.get(r)),this.namedRafs_.delete(r))},t.cancelAnimationFrame=function(r){return this.supportsRaf_?(this.rafIds_.has(r)&&(this.rafIds_.delete(r),F.cancelAnimationFrame(r)),r):this.clearTimeout(r)},t.clearTimersOnDispose_=function(){var r=this;this.clearingTimersOnDispose_||(this.clearingTimersOnDispose_=!0,this.one("dispose",function(){[["namedRafs_","cancelNamedAnimationFrame"],["rafIds_","cancelAnimationFrame"],["setTimeoutIds_","clearTimeout"],["setIntervalIds_","clearInterval"]].forEach(function(e){var n=e[0],s=e[1];r[n].forEach(function(o,l){return r[s](l)})}),r.clearingTimersOnDispose_=!1}))},a.registerComponent=function(r,e){if(typeof r!="string"||!r)throw new Error('Illegal component name, "'+r+'"; must be a non-empty string.');var n=a.getComponent("Tech"),s=n&&n.isTech(e),o=a===e||a.prototype.isPrototypeOf(e.prototype);if(s||!o){var l;throw s?l="techs must be registered using Tech.registerTech()":l="must be a Component subclass",new Error('Illegal component, "'+r+'"; '+l+".")}r=Zt(r),a.components_||(a.components_={});var f=a.getComponent("Player");if(r==="Player"&&f&&f.players){var m=f.players,v=Object.keys(m);if(m&&v.length>0&&v.map(function(y){return m[y]}).every(Boolean))throw new Error("Can not register Player component after player has been created.")}return a.components_[r]=e,a.components_[Cc(r)]=e,e},a.getComponent=function(r){if(!(!r||!a.components_))return a.components_[r]},a}();Te.prototype.supportsRaf_=typeof F.requestAnimationFrame=="function"&&typeof F.cancelAnimationFrame=="function";Te.registerComponent("Component",Te);function IU(a,t,i){if(typeof t!="number"||t<0||t>i)throw new Error("Failed to execute '"+a+"' on 'TimeRanges': The index provided ("+t+") is non-numeric or out of bounds (0-"+i+").")}function PT(a,t,i,r){return IU(a,r,i.length-1),i[r][t]}function om(a){var t;return a===void 0||a.length===0?t={length:0,start:function(){throw new Error("This TimeRanges object is empty")},end:function(){throw new Error("This TimeRanges object is empty")}}:t={length:a.length,start:PT.bind(null,"start",0,a),end:PT.bind(null,"end",1,a)},F.Symbol&&F.Symbol.iterator&&(t[F.Symbol.iterator]=function(){return(a||[]).values()}),t}function Eo(a,t){return Array.isArray(a)?om(a):a===void 0||t===void 0?om():om([[a,t]])}function bE(a,t){var i=0,r,e;if(!t)return 0;(!a||!a.length)&&(a=Eo(0,0));for(var n=0;n<a.length;n++)r=a.start(n),e=a.end(n),e>t&&(e=t),i+=e-r;return i/t}function Ji(a){if(a instanceof Ji)return a;typeof a=="number"?this.code=a:typeof a=="string"?this.message=a:Ba(a)&&(typeof a.code=="number"&&(this.code=a.code),Wt(this,a)),this.message||(this.message=Ji.defaultMessages[this.code]||"")}Ji.prototype.code=0;Ji.prototype.message="";Ji.prototype.status=null;Ji.errorTypes=["MEDIA_ERR_CUSTOM","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED","MEDIA_ERR_ENCRYPTED"];Ji.defaultMessages={1:"You aborted the media playback",2:"A network error caused the media download to fail part-way.",3:"The media playback was aborted due to a corruption problem or because the media used features your browser did not support.",4:"The media could not be loaded, either because the server or network failed or because the format is not supported.",5:"The media is encrypted and we do not have the keys to decrypt it."};for(var pu=0;pu<Ji.errorTypes.length;pu++)Ji[Ji.errorTypes[pu]]=pu,Ji.prototype[Ji.errorTypes[pu]]=pu;function Pd(a){return a!=null&&typeof a.then=="function"}function Yn(a){Pd(a)&&a.then(null,function(t){})}var sg=function(t){var i=["kind","label","language","id","inBandMetadataTrackDispatchType","mode","src"].reduce(function(r,e,n){return t[e]&&(r[e]=t[e]),r},{cues:t.cues&&Array.prototype.map.call(t.cues,function(r){return{startTime:r.startTime,endTime:r.endTime,text:r.text,id:r.id}})});return i},PU=function(t){var i=t.$$("track"),r=Array.prototype.map.call(i,function(n){return n.track}),e=Array.prototype.map.call(i,function(n){var s=sg(n.track);return n.src&&(s.src=n.src),s});return e.concat(Array.prototype.filter.call(t.textTracks(),function(n){return r.indexOf(n)===-1}).map(sg))},OU=function(t,i){return t.forEach(function(r){var e=i.addRemoteTextTrack(r).track;!r.src&&r.cues&&r.cues.forEach(function(n){return e.addCue(n)})}),i.textTracks()},OT={textTracksToJson:PU,jsonToTextTracks:OU,trackToJson_:sg},um="vjs-modal-dialog",rl=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.handleKeyDown_=function(s){return n.handleKeyDown(s)},n.close_=function(s){return n.close(s)},n.opened_=n.hasBeenOpened_=n.hasBeenFilled_=!1,n.closeable(!n.options_.uncloseable),n.content(n.options_.content),n.contentEl_=xt("div",{className:um+"-content"},{role:"document"}),n.descEl_=xt("p",{className:um+"-description vjs-control-text",id:n.el().getAttribute("aria-describedby")}),ko(n.descEl_,n.description()),n.el_.appendChild(n.descEl_),n.el_.appendChild(n.contentEl_),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),tabIndex:-1},{"aria-describedby":this.id()+"_description","aria-hidden":"true","aria-label":this.label(),role:"dialog"})},i.dispose=function(){this.contentEl_=null,this.descEl_=null,this.previouslyActiveEl_=null,a.prototype.dispose.call(this)},i.buildCSSClass=function(){return um+" vjs-hidden "+a.prototype.buildCSSClass.call(this)},i.label=function(){return this.localize(this.options_.label||"Modal Window")},i.description=function(){var e=this.options_.description||this.localize("This is a modal window.");return this.closeable()&&(e+=" "+this.localize("This modal can be closed by pressing the Escape key or activating the close button.")),e},i.open=function(){if(!this.opened_){var e=this.player();this.trigger("beforemodalopen"),this.opened_=!0,(this.options_.fillAlways||!this.hasBeenOpened_&&!this.hasBeenFilled_)&&this.fill(),this.wasPlaying_=!e.paused(),this.options_.pauseOnOpen&&this.wasPlaying_&&e.pause(),this.on("keydown",this.handleKeyDown_),this.hadControls_=e.controls(),e.controls(!1),this.show(),this.conditionalFocus_(),this.el().setAttribute("aria-hidden","false"),this.trigger("modalopen"),this.hasBeenOpened_=!0}},i.opened=function(e){return typeof e=="boolean"&&this[e?"open":"close"](),this.opened_},i.close=function(){if(this.opened_){var e=this.player();this.trigger("beforemodalclose"),this.opened_=!1,this.wasPlaying_&&this.options_.pauseOnOpen&&e.play(),this.off("keydown",this.handleKeyDown_),this.hadControls_&&e.controls(!0),this.hide(),this.el().setAttribute("aria-hidden","true"),this.trigger("modalclose"),this.conditionalBlur_(),this.options_.temporary&&this.dispose()}},i.closeable=function(e){if(typeof e=="boolean"){var n=this.closeable_=!!e,s=this.getChild("closeButton");if(n&&!s){var o=this.contentEl_;this.contentEl_=this.el_,s=this.addChild("closeButton",{controlText:"Close Modal Dialog"}),this.contentEl_=o,this.on(s,"close",this.close_)}!n&&s&&(this.off(s,"close",this.close_),this.removeChild(s),s.dispose())}return this.closeable_},i.fill=function(){this.fillWith(this.content())},i.fillWith=function(e){var n=this.contentEl(),s=n.parentNode,o=n.nextSibling;this.trigger("beforemodalfill"),this.hasBeenFilled_=!0,s.removeChild(n),this.empty(),dE(n,e),this.trigger("modalfill"),o?s.insertBefore(n,o):s.appendChild(n);var l=this.getChild("closeButton");l&&s.appendChild(l.el_)},i.empty=function(){this.trigger("beforemodalempty"),Lv(this.contentEl()),this.trigger("modalempty")},i.content=function(e){return typeof e<"u"&&(this.content_=e),this.content_},i.conditionalFocus_=function(){var e=Se.activeElement,n=this.player_.el_;this.previouslyActiveEl_=null,(n.contains(e)||n===e)&&(this.previouslyActiveEl_=e,this.focus())},i.conditionalBlur_=function(){this.previouslyActiveEl_&&(this.previouslyActiveEl_.focus(),this.previouslyActiveEl_=null)},i.handleKeyDown=function(e){if(e.stopPropagation(),et.isEventKey(e,"Escape")&&this.closeable()){e.preventDefault(),this.close();return}if(et.isEventKey(e,"Tab")){for(var n=this.focusableEls_(),s=this.el_.querySelector(":focus"),o,l=0;l<n.length;l++)if(s===n[l]){o=l;break}Se.activeElement===this.el_&&(o=0),e.shiftKey&&o===0?(n[n.length-1].focus(),e.preventDefault()):!e.shiftKey&&o===n.length-1&&(n[0].focus(),e.preventDefault())}},i.focusableEls_=function(){var e=this.el_.querySelectorAll("*");return Array.prototype.filter.call(e,function(n){return(n instanceof F.HTMLAnchorElement||n instanceof F.HTMLAreaElement)&&n.hasAttribute("href")||(n instanceof F.HTMLInputElement||n instanceof F.HTMLSelectElement||n instanceof F.HTMLTextAreaElement||n instanceof F.HTMLButtonElement)&&!n.hasAttribute("disabled")||n instanceof F.HTMLIFrameElement||n instanceof F.HTMLObjectElement||n instanceof F.HTMLEmbedElement||n.hasAttribute("tabindex")&&n.getAttribute("tabindex")!==-1||n.hasAttribute("contenteditable")})},t}(Te);rl.prototype.options_={pauseOnOpen:!0,temporary:!0};Te.registerComponent("ModalDialog",rl);var Ku=function(a){Ae(t,a);function t(r){var e;r===void 0&&(r=[]),e=a.call(this)||this,e.tracks_=[],Object.defineProperty(Ue(e),"length",{get:function(){return this.tracks_.length}});for(var n=0;n<r.length;n++)e.addTrack(r[n]);return e}var i=t.prototype;return i.addTrack=function(e){var n=this,s=this.tracks_.length;""+s in this||Object.defineProperty(this,s,{get:function(){return this.tracks_[s]}}),this.tracks_.indexOf(e)===-1&&(this.tracks_.push(e),this.trigger({track:e,type:"addtrack",target:this})),e.labelchange_=function(){n.trigger({track:e,type:"labelchange",target:n})},ka(e)&&e.addEventListener("labelchange",e.labelchange_)},i.removeTrack=function(e){for(var n,s=0,o=this.length;s<o;s++)if(this[s]===e){n=this[s],n.off&&n.off(),this.tracks_.splice(s,1);break}n&&this.trigger({track:n,type:"removetrack",target:this})},i.getTrackById=function(e){for(var n=null,s=0,o=this.length;s<o;s++){var l=this[s];if(l.id===e){n=l;break}}return n},t}(_i);Ku.prototype.allowedEvents_={change:"change",addtrack:"addtrack",removetrack:"removetrack",labelchange:"labelchange"};for(var DU in Ku.prototype.allowedEvents_)Ku.prototype["on"+DU]=null;var lm=function(t,i){for(var r=0;r<t.length;r++)!Object.keys(t[r]).length||i.id===t[r].id||(t[r].enabled=!1)},LU=function(a){Ae(t,a);function t(r){var e;r===void 0&&(r=[]);for(var n=r.length-1;n>=0;n--)if(r[n].enabled){lm(r,r[n]);break}return e=a.call(this,r)||this,e.changing_=!1,e}var i=t.prototype;return i.addTrack=function(e){var n=this;e.enabled&&lm(this,e),a.prototype.addTrack.call(this,e),e.addEventListener&&(e.enabledChange_=function(){n.changing_||(n.changing_=!0,lm(n,e),n.changing_=!1,n.trigger("change"))},e.addEventListener("enabledchange",e.enabledChange_))},i.removeTrack=function(e){a.prototype.removeTrack.call(this,e),e.removeEventListener&&e.enabledChange_&&(e.removeEventListener("enabledchange",e.enabledChange_),e.enabledChange_=null)},t}(Ku),dm=function(t,i){for(var r=0;r<t.length;r++)!Object.keys(t[r]).length||i.id===t[r].id||(t[r].selected=!1)},kU=function(a){Ae(t,a);function t(r){var e;r===void 0&&(r=[]);for(var n=r.length-1;n>=0;n--)if(r[n].selected){dm(r,r[n]);break}return e=a.call(this,r)||this,e.changing_=!1,Object.defineProperty(Ue(e),"selectedIndex",{get:function(){for(var o=0;o<this.length;o++)if(this[o].selected)return o;return-1},set:function(){}}),e}var i=t.prototype;return i.addTrack=function(e){var n=this;e.selected&&dm(this,e),a.prototype.addTrack.call(this,e),e.addEventListener&&(e.selectedChange_=function(){n.changing_||(n.changing_=!0,dm(n,e),n.changing_=!1,n.trigger("change"))},e.addEventListener("selectedchange",e.selectedChange_))},i.removeTrack=function(e){a.prototype.removeTrack.call(this,e),e.removeEventListener&&e.selectedChange_&&(e.removeEventListener("selectedchange",e.selectedChange_),e.selectedChange_=null)},t}(Ku),xE=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.addTrack=function(e){var n=this;a.prototype.addTrack.call(this,e),this.queueChange_||(this.queueChange_=function(){return n.queueTrigger("change")}),this.triggerSelectedlanguagechange||(this.triggerSelectedlanguagechange_=function(){return n.trigger("selectedlanguagechange")}),e.addEventListener("modechange",this.queueChange_);var s=["metadata","chapters"];s.indexOf(e.kind)===-1&&e.addEventListener("modechange",this.triggerSelectedlanguagechange_)},i.removeTrack=function(e){a.prototype.removeTrack.call(this,e),e.removeEventListener&&(this.queueChange_&&e.removeEventListener("modechange",this.queueChange_),this.selectedlanguagechange_&&e.removeEventListener("modechange",this.triggerSelectedlanguagechange_))},t}(Ku),RU=function(){function a(i){i===void 0&&(i=[]),this.trackElements_=[],Object.defineProperty(this,"length",{get:function(){return this.trackElements_.length}});for(var r=0,e=i.length;r<e;r++)this.addTrackElement_(i[r])}var t=a.prototype;return t.addTrackElement_=function(r){var e=this.trackElements_.length;""+e in this||Object.defineProperty(this,e,{get:function(){return this.trackElements_[e]}}),this.trackElements_.indexOf(r)===-1&&this.trackElements_.push(r)},t.getTrackElementByTrack_=function(r){for(var e,n=0,s=this.trackElements_.length;n<s;n++)if(r===this.trackElements_[n].track){e=this.trackElements_[n];break}return e},t.removeTrackElement_=function(r){for(var e=0,n=this.trackElements_.length;e<n;e++)if(r===this.trackElements_[e]){this.trackElements_[e].track&&typeof this.trackElements_[e].track.off=="function"&&this.trackElements_[e].track.off(),typeof this.trackElements_[e].off=="function"&&this.trackElements_[e].off(),this.trackElements_.splice(e,1);break}},a}(),DT=function(){function a(i){a.prototype.setCues_.call(this,i),Object.defineProperty(this,"length",{get:function(){return this.length_}})}var t=a.prototype;return t.setCues_=function(r){var e=this.length||0,n=0,s=r.length;this.cues_=r,this.length_=r.length;var o=function(f){""+f in this||Object.defineProperty(this,""+f,{get:function(){return this.cues_[f]}})};if(e<s)for(n=e;n<s;n++)o.call(this,n)},t.getCueById=function(r){for(var e=null,n=0,s=this.length;n<s;n++){var o=this[n];if(o.id===r){e=o;break}}return e},a}(),MU={alternative:"alternative",captions:"captions",main:"main",sign:"sign",subtitles:"subtitles",commentary:"commentary"},FU={alternative:"alternative",descriptions:"descriptions",main:"main","main-desc":"main-desc",translation:"translation",commentary:"commentary"},NU={subtitles:"subtitles",captions:"captions",descriptions:"descriptions",chapters:"chapters",metadata:"metadata"},LT={disabled:"disabled",hidden:"hidden",showing:"showing"},Fv=function(a){Ae(t,a);function t(i){var r;i===void 0&&(i={}),r=a.call(this)||this;var e={id:i.id||"vjs_track_"+qa(),kind:i.kind||"",language:i.language||""},n=i.label||"",s=function(f){Object.defineProperty(Ue(r),f,{get:function(){return e[f]},set:function(){}})};for(var o in e)s(o);return Object.defineProperty(Ue(r),"label",{get:function(){return n},set:function(f){f!==n&&(n=f,this.trigger("labelchange"))}}),r}return t}(_i),Nv=function(t){var i=["protocol","hostname","port","pathname","search","hash","host"],r=Se.createElement("a");r.href=t;for(var e={},n=0;n<i.length;n++)e[i[n]]=r[i[n]];return e.protocol==="http:"&&(e.host=e.host.replace(/:80$/,"")),e.protocol==="https:"&&(e.host=e.host.replace(/:443$/,"")),e.protocol||(e.protocol=F.location.protocol),e.host||(e.host=F.location.host),e},SE=function(t){if(!t.match(/^https?:\/\//)){var i=Se.createElement("a");i.href=t,t=i.href}return t},Uv=function(t){if(typeof t=="string"){var i=/^(\/?)([\s\S]*?)((?:\.{1,2}|[^\/]+?)(\.([^\.\/\?]+)))(?:[\/]*|[\?].*)$/,r=i.exec(t);if(r)return r.pop().toLowerCase()}return""},Kh=function(t,i){i===void 0&&(i=F.location);var r=Nv(t),e=r.protocol===":"?i.protocol:r.protocol,n=e+r.host!==i.protocol+i.host;return n},UU=Object.freeze({__proto__:null,parseUrl:Nv,getAbsoluteURL:SE,getFileExtension:Uv,isCrossOrigin:Kh}),kT=function(t,i){var r=new F.WebVTT.Parser(F,F.vttjs,F.WebVTT.StringDecoder()),e=[];r.oncue=function(n){i.addCue(n)},r.onparsingerror=function(n){e.push(n)},r.onflush=function(){i.trigger({type:"loadeddata",target:i})},r.parse(t),e.length>0&&(F.console&&F.console.groupCollapsed&&F.console.groupCollapsed("Text Track parsing errors for "+i.src),e.forEach(function(n){return lt.error(n)}),F.console&&F.console.groupEnd&&F.console.groupEnd()),r.flush()},RT=function(t,i){var r={uri:t},e=Kh(t);e&&(r.cors=e);var n=i.tech_.crossOrigin()==="use-credentials";n&&(r.withCredentials=n),Hd(r,Nt(this,function(s,o,l){if(s)return lt.error(s,o);i.loaded_=!0,typeof F.WebVTT!="function"?i.tech_&&i.tech_.any(["vttjsloaded","vttjserror"],function(f){if(f.type==="vttjserror"){lt.error("vttjs failed to load, stopping trying to process "+i.src);return}return kT(l,i)}):kT(l,i)}))},hf=function(a){Ae(t,a);function t(r){var e;if(r===void 0&&(r={}),!r.tech)throw new Error("A tech was not provided.");var n=Ft(r,{kind:NU[r.kind]||"subtitles",language:r.language||r.srclang||""}),s=LT[n.mode]||"disabled",o=n.default;(n.kind==="metadata"||n.kind==="chapters")&&(s="hidden"),e=a.call(this,n)||this,e.tech_=n.tech,e.cues_=[],e.activeCues_=[],e.preload_=e.tech_.preloadTextTracks!==!1;var l=new DT(e.cues_),f=new DT(e.activeCues_),m=!1;e.timeupdateHandler=Nt(Ue(e),function(y){if(y===void 0&&(y={}),!this.tech_.isDisposed()){if(!this.tech_.isReady_){y.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler));return}this.activeCues=this.activeCues,m&&(this.trigger("cuechange"),m=!1),y.type!=="timeupdate"&&(this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler))}});var v=function(){e.stopTracking()};return e.tech_.one("dispose",v),s!=="disabled"&&e.startTracking(),Object.defineProperties(Ue(e),{default:{get:function(){return o},set:function(){}},mode:{get:function(){return s},set:function(E){LT[E]&&s!==E&&(s=E,!this.preload_&&s!=="disabled"&&this.cues.length===0&&RT(this.src,this),this.stopTracking(),s!=="disabled"&&this.startTracking(),this.trigger("modechange"))}},cues:{get:function(){return this.loaded_?l:null},set:function(){}},activeCues:{get:function(){if(!this.loaded_)return null;if(this.cues.length===0)return f;for(var E=this.tech_.currentTime(),I=[],O=0,D=this.cues.length;O<D;O++){var R=this.cues[O];(R.startTime<=E&&R.endTime>=E||R.startTime===R.endTime&&R.startTime<=E&&R.startTime+.5>=E)&&I.push(R)}if(m=!1,I.length!==this.activeCues_.length)m=!0;else for(var H=0;H<I.length;H++)this.activeCues_.indexOf(I[H])===-1&&(m=!0);return this.activeCues_=I,f.setCues_(this.activeCues_),f},set:function(){}}}),n.src?(e.src=n.src,e.preload_||(e.loaded_=!0),(e.preload_||n.kind!=="subtitles"&&n.kind!=="captions")&&RT(e.src,Ue(e))):e.loaded_=!0,e}var i=t.prototype;return i.startTracking=function(){this.rvf_=this.tech_.requestVideoFrameCallback(this.timeupdateHandler),this.tech_.on("timeupdate",this.timeupdateHandler)},i.stopTracking=function(){this.rvf_&&(this.tech_.cancelVideoFrameCallback(this.rvf_),this.rvf_=void 0),this.tech_.off("timeupdate",this.timeupdateHandler)},i.addCue=function(e){var n=e;if(F.vttjs&&!(e instanceof F.vttjs.VTTCue)){n=new F.vttjs.VTTCue(e.startTime,e.endTime,e.text);for(var s in e)s in n||(n[s]=e[s]);n.id=e.id,n.originalCue_=e}for(var o=this.tech_.textTracks(),l=0;l<o.length;l++)o[l]!==this&&o[l].removeCue(n);this.cues_.push(n),this.cues.setCues_(this.cues_)},i.removeCue=function(e){for(var n=this.cues_.length;n--;){var s=this.cues_[n];if(s===e||s.originalCue_&&s.originalCue_===e){this.cues_.splice(n,1),this.cues.setCues_(this.cues_);break}}},t}(Fv);hf.prototype.allowedEvents_={cuechange:"cuechange"};var EE=function(a){Ae(t,a);function t(i){var r;i===void 0&&(i={});var e=Ft(i,{kind:FU[i.kind]||""});r=a.call(this,e)||this;var n=!1;return Object.defineProperty(Ue(r),"enabled",{get:function(){return n},set:function(o){typeof o!="boolean"||o===n||(n=o,this.trigger("enabledchange"))}}),e.enabled&&(r.enabled=e.enabled),r.loaded_=!0,r}return t}(Fv),wE=function(a){Ae(t,a);function t(i){var r;i===void 0&&(i={});var e=Ft(i,{kind:MU[i.kind]||""});r=a.call(this,e)||this;var n=!1;return Object.defineProperty(Ue(r),"selected",{get:function(){return n},set:function(o){typeof o!="boolean"||o===n||(n=o,this.trigger("selectedchange"))}}),e.selected&&(r.selected=e.selected),r}return t}(Fv),CE=0,BU=1,AE=2,jU=3,nl=function(a){Ae(t,a);function t(i){var r;i===void 0&&(i={}),r=a.call(this)||this;var e,n=new hf(i);return r.kind=n.kind,r.src=n.src,r.srclang=n.language,r.label=n.label,r.default=n.default,Object.defineProperties(Ue(r),{readyState:{get:function(){return e}},track:{get:function(){return n}}}),e=CE,n.addEventListener("loadeddata",function(){e=AE,r.trigger({type:"load",target:Ue(r)})}),r}return t}(_i);nl.prototype.allowedEvents_={load:"load"};nl.NONE=CE;nl.LOADING=BU;nl.LOADED=AE;nl.ERROR=jU;var Zr={audio:{ListClass:LU,TrackClass:EE,capitalName:"Audio"},video:{ListClass:kU,TrackClass:wE,capitalName:"Video"},text:{ListClass:xE,TrackClass:hf,capitalName:"Text"}};Object.keys(Zr).forEach(function(a){Zr[a].getterName=a+"Tracks",Zr[a].privateName=a+"Tracks_"});var Xu={remoteText:{ListClass:xE,TrackClass:hf,capitalName:"RemoteText",getterName:"remoteTextTracks",privateName:"remoteTextTracks_"},remoteTextEl:{ListClass:RU,TrackClass:nl,capitalName:"RemoteTextTrackEls",getterName:"remoteTextTrackEls",privateName:"remoteTextTrackEls_"}},Ki=Ni({},Zr,Xu);Xu.names=Object.keys(Xu);Zr.names=Object.keys(Zr);Ki.names=[].concat(Xu.names).concat(Zr.names);function VU(a,t,i,r,e){e===void 0&&(e={});var n=a.textTracks();e.kind=t,i&&(e.label=i),r&&(e.language=r),e.tech=a;var s=new Ki.text.TrackClass(e);return n.addTrack(s),s}var Rt=function(a){Ae(t,a);function t(r,e){var n;return r===void 0&&(r={}),e===void 0&&(e=function(){}),r.reportTouchActivity=!1,n=a.call(this,null,r,e)||this,n.onDurationChange_=function(s){return n.onDurationChange(s)},n.trackProgress_=function(s){return n.trackProgress(s)},n.trackCurrentTime_=function(s){return n.trackCurrentTime(s)},n.stopTrackingCurrentTime_=function(s){return n.stopTrackingCurrentTime(s)},n.disposeSourceHandler_=function(s){return n.disposeSourceHandler(s)},n.queuedHanders_=new Set,n.hasStarted_=!1,n.on("playing",function(){this.hasStarted_=!0}),n.on("loadstart",function(){this.hasStarted_=!1}),Ki.names.forEach(function(s){var o=Ki[s];r&&r[o.getterName]&&(n[o.privateName]=r[o.getterName])}),n.featuresProgressEvents||n.manualProgressOn(),n.featuresTimeupdateEvents||n.manualTimeUpdatesOn(),["Text","Audio","Video"].forEach(function(s){r["native"+s+"Tracks"]===!1&&(n["featuresNative"+s+"Tracks"]=!1)}),r.nativeCaptions===!1||r.nativeTextTracks===!1?n.featuresNativeTextTracks=!1:(r.nativeCaptions===!0||r.nativeTextTracks===!0)&&(n.featuresNativeTextTracks=!0),n.featuresNativeTextTracks||n.emulateTextTracks(),n.preloadTextTracks=r.preloadTextTracks!==!1,n.autoRemoteTextTracks_=new Ki.text.ListClass,n.initTrackListeners(),r.nativeControlsForTouch||n.emitTapEvents(),n.constructor&&(n.name_=n.constructor.name||"Unknown Tech"),n}var i=t.prototype;return i.triggerSourceset=function(e){var n=this;this.isReady_||this.one("ready",function(){return n.setTimeout(function(){return n.triggerSourceset(e)},1)}),this.trigger({src:e,type:"sourceset"})},i.manualProgressOn=function(){this.on("durationchange",this.onDurationChange_),this.manualProgress=!0,this.one("ready",this.trackProgress_)},i.manualProgressOff=function(){this.manualProgress=!1,this.stopTrackingProgress(),this.off("durationchange",this.onDurationChange_)},i.trackProgress=function(e){this.stopTrackingProgress(),this.progressInterval=this.setInterval(Nt(this,function(){var n=this.bufferedPercent();this.bufferedPercent_!==n&&this.trigger("progress"),this.bufferedPercent_=n,n===1&&this.stopTrackingProgress()}),500)},i.onDurationChange=function(e){this.duration_=this.duration()},i.buffered=function(){return Eo(0,0)},i.bufferedPercent=function(){return bE(this.buffered(),this.duration_)},i.stopTrackingProgress=function(){this.clearInterval(this.progressInterval)},i.manualTimeUpdatesOn=function(){this.manualTimeUpdates=!0,this.on("play",this.trackCurrentTime_),this.on("pause",this.stopTrackingCurrentTime_)},i.manualTimeUpdatesOff=function(){this.manualTimeUpdates=!1,this.stopTrackingCurrentTime(),this.off("play",this.trackCurrentTime_),this.off("pause",this.stopTrackingCurrentTime_)},i.trackCurrentTime=function(){this.currentTimeInterval&&this.stopTrackingCurrentTime(),this.currentTimeInterval=this.setInterval(function(){this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},250)},i.stopTrackingCurrentTime=function(){this.clearInterval(this.currentTimeInterval),this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.dispose=function(){this.clearTracks(Zr.names),this.manualProgress&&this.manualProgressOff(),this.manualTimeUpdates&&this.manualTimeUpdatesOff(),a.prototype.dispose.call(this)},i.clearTracks=function(e){var n=this;e=[].concat(e),e.forEach(function(s){for(var o=n[s+"Tracks"]()||[],l=o.length;l--;){var f=o[l];s==="text"&&n.removeRemoteTextTrack(f),o.removeTrack(f)}})},i.cleanupAutoTextTracks=function(){for(var e=this.autoRemoteTextTracks_||[],n=e.length;n--;){var s=e[n];this.removeRemoteTextTrack(s)}},i.reset=function(){},i.crossOrigin=function(){},i.setCrossOrigin=function(){},i.error=function(e){return e!==void 0&&(this.error_=new Ji(e),this.trigger("error")),this.error_},i.played=function(){return this.hasStarted_?Eo(0,0):Eo()},i.play=function(){},i.setScrubbing=function(){},i.scrubbing=function(){},i.setCurrentTime=function(){this.manualTimeUpdates&&this.trigger({type:"timeupdate",target:this,manuallyTriggered:!0})},i.initTrackListeners=function(){var e=this;Zr.names.forEach(function(n){var s=Zr[n],o=function(){e.trigger(n+"trackchange")},l=e[s.getterName]();l.addEventListener("removetrack",o),l.addEventListener("addtrack",o),e.on("dispose",function(){l.removeEventListener("removetrack",o),l.removeEventListener("addtrack",o)})})},i.addWebVttScript_=function(){var e=this;if(!F.WebVTT)if(Se.body.contains(this.el())){if(!this.options_["vtt.js"]&&zd(Nc)&&Object.keys(Nc).length>0){this.trigger("vttjsloaded");return}var n=Se.createElement("script");n.src=this.options_["vtt.js"]||"https://vjs.zencdn.net/vttjs/0.14.1/vtt.min.js",n.onload=function(){e.trigger("vttjsloaded")},n.onerror=function(){e.trigger("vttjserror")},this.on("dispose",function(){n.onload=null,n.onerror=null}),F.WebVTT=!0,this.el().parentNode.appendChild(n)}else this.ready(this.addWebVttScript_)},i.emulateTextTracks=function(){var e=this,n=this.textTracks(),s=this.remoteTextTracks(),o=function(y){return n.addTrack(y.track)},l=function(y){return n.removeTrack(y.track)};s.on("addtrack",o),s.on("removetrack",l),this.addWebVttScript_();var f=function(){return e.trigger("texttrackchange")},m=function(){f();for(var y=0;y<n.length;y++){var E=n[y];E.removeEventListener("cuechange",f),E.mode==="showing"&&E.addEventListener("cuechange",f)}};m(),n.addEventListener("change",m),n.addEventListener("addtrack",m),n.addEventListener("removetrack",m),this.on("dispose",function(){s.off("addtrack",o),s.off("removetrack",l),n.removeEventListener("change",m),n.removeEventListener("addtrack",m),n.removeEventListener("removetrack",m);for(var v=0;v<n.length;v++){var y=n[v];y.removeEventListener("cuechange",f)}})},i.addTextTrack=function(e,n,s){if(!e)throw new Error("TextTrack kind is required but was not provided");return VU(this,e,n,s)},i.createRemoteTextTrack=function(e){var n=Ft(e,{tech:this});return new Xu.remoteTextEl.TrackClass(n)},i.addRemoteTextTrack=function(e,n){var s=this;e===void 0&&(e={});var o=this.createRemoteTextTrack(e);return n!==!0&&n!==!1&&(lt.warn('Calling addRemoteTextTrack without explicitly setting the "manualCleanup" parameter to `true` is deprecated and default to `false` in future version of video.js'),n=!0),this.remoteTextTrackEls().addTrackElement_(o),this.remoteTextTracks().addTrack(o.track),n!==!0&&this.ready(function(){return s.autoRemoteTextTracks_.addTrack(o.track)}),o},i.removeRemoteTextTrack=function(e){var n=this.remoteTextTrackEls().getTrackElementByTrack_(e);this.remoteTextTrackEls().removeTrackElement_(n),this.remoteTextTracks().removeTrack(e),this.autoRemoteTextTracks_.removeTrack(e)},i.getVideoPlaybackQuality=function(){return{}},i.requestPictureInPicture=function(){var e=this.options_.Promise||F.Promise;if(e)return e.reject()},i.disablePictureInPicture=function(){return!0},i.setDisablePictureInPicture=function(){},i.requestVideoFrameCallback=function(e){var n=this,s=qa();return!this.isReady_||this.paused()?(this.queuedHanders_.add(s),this.one("playing",function(){n.queuedHanders_.has(s)&&(n.queuedHanders_.delete(s),e())})):this.requestNamedAnimationFrame(s,e),s},i.cancelVideoFrameCallback=function(e){this.queuedHanders_.has(e)?this.queuedHanders_.delete(e):this.cancelNamedAnimationFrame(e)},i.setPoster=function(){},i.playsinline=function(){},i.setPlaysinline=function(){},i.overrideNativeAudioTracks=function(){},i.overrideNativeVideoTracks=function(){},i.canPlayType=function(){return""},t.canPlayType=function(){return""},t.canPlaySource=function(e,n){return t.canPlayType(e.type)},t.isTech=function(e){return e.prototype instanceof t||e instanceof t||e===t},t.registerTech=function(e,n){if(t.techs_||(t.techs_={}),!t.isTech(n))throw new Error("Tech "+e+" must be a Tech");if(!t.canPlayType)throw new Error("Techs must have a static canPlayType method on them");if(!t.canPlaySource)throw new Error("Techs must have a static canPlaySource method on them");return e=Zt(e),t.techs_[e]=n,t.techs_[Cc(e)]=n,e!=="Tech"&&t.defaultTechOrder_.push(e),n},t.getTech=function(e){if(e){if(t.techs_&&t.techs_[e])return t.techs_[e];if(e=Zt(e),F&&F.videojs&&F.videojs[e])return lt.warn("The "+e+" tech was added to the videojs object when it should be registered using videojs.registerTech(name, tech)"),F.videojs[e]}},t}(Te);Ki.names.forEach(function(a){var t=Ki[a];Rt.prototype[t.getterName]=function(){return this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName]}});Rt.prototype.featuresVolumeControl=!0;Rt.prototype.featuresMuteControl=!0;Rt.prototype.featuresFullscreenResize=!1;Rt.prototype.featuresPlaybackRate=!1;Rt.prototype.featuresProgressEvents=!1;Rt.prototype.featuresSourceset=!1;Rt.prototype.featuresTimeupdateEvents=!1;Rt.prototype.featuresNativeTextTracks=!1;Rt.prototype.featuresVideoFrameCallback=!1;Rt.withSourceHandlers=function(a){a.registerSourceHandler=function(i,r){var e=a.sourceHandlers;e||(e=a.sourceHandlers=[]),r===void 0&&(r=e.length),e.splice(r,0,i)},a.canPlayType=function(i){for(var r=a.sourceHandlers||[],e,n=0;n<r.length;n++)if(e=r[n].canPlayType(i),e)return e;return""},a.selectSourceHandler=function(i,r){for(var e=a.sourceHandlers||[],n,s=0;s<e.length;s++)if(n=e[s].canHandleSource(i,r),n)return e[s];return null},a.canPlaySource=function(i,r){var e=a.selectSourceHandler(i,r);return e?e.canHandleSource(i,r):""};var t=["seekable","seeking","duration"];t.forEach(function(i){var r=this[i];typeof r=="function"&&(this[i]=function(){return this.sourceHandler_&&this.sourceHandler_[i]?this.sourceHandler_[i].apply(this.sourceHandler_,arguments):r.apply(this,arguments)})},a.prototype),a.prototype.setSource=function(i){var r=a.selectSourceHandler(i,this.options_);r||(a.nativeSourceHandler?r=a.nativeSourceHandler:lt.error("No source handler found for the current source.")),this.disposeSourceHandler(),this.off("dispose",this.disposeSourceHandler_),r!==a.nativeSourceHandler&&(this.currentSource_=i),this.sourceHandler_=r.handleSource(i,this,this.options_),this.one("dispose",this.disposeSourceHandler_)},a.prototype.disposeSourceHandler=function(){this.currentSource_&&(this.clearTracks(["audio","video"]),this.currentSource_=null),this.cleanupAutoTextTracks(),this.sourceHandler_&&(this.sourceHandler_.dispose&&this.sourceHandler_.dispose(),this.sourceHandler_=null)}};Te.registerComponent("Tech",Rt);Rt.registerTech("Tech",Rt);Rt.defaultTechOrder_=[];var wo={},og={},Kc={};function HU(a,t){wo[a]=wo[a]||[],wo[a].push(t)}function $U(a,t,i){a.setTimeout(function(){return oo(t,wo[t.type],i,a)},1)}function WU(a,t){a.forEach(function(i){return i.setTech&&i.setTech(t)})}function qU(a,t,i){return a.reduceRight(Bv(i),t[i]())}function GU(a,t,i,r){return t[i](a.reduce(Bv(i),r))}function MT(a,t,i,r){r===void 0&&(r=null);var e="call"+Zt(i),n=a.reduce(Bv(e),r),s=n===Kc,o=s?null:t[i](n);return XU(a,i,o,s),o}var zU={buffered:1,currentTime:1,duration:1,muted:1,played:1,paused:1,seekable:1,volume:1,ended:1},KU={setCurrentTime:1,setMuted:1,setVolume:1},FT={play:1,pause:1};function Bv(a){return function(t,i){return t===Kc?Kc:i[a]?i[a](t):t}}function XU(a,t,i,r){for(var e=a.length-1;e>=0;e--){var n=a[e];n[t]&&n[t](r,i)}}function QU(a){og[a.id()]=null}function YU(a,t){var i=og[a.id()],r=null;if(i==null)return r=t(a),og[a.id()]=[[t,r]],r;for(var e=0;e<i.length;e++){var n=i[e],s=n[0],o=n[1];s===t&&(r=o)}return r===null&&(r=t(a),i.push([t,r])),r}function oo(a,t,i,r,e,n){a===void 0&&(a={}),t===void 0&&(t=[]),e===void 0&&(e=[]),n===void 0&&(n=!1);var s=t,o=s[0],l=s.slice(1);if(typeof o=="string")oo(a,wo[o],i,r,e,n);else if(o){var f=YU(r,o);if(!f.setSource)return e.push(f),oo(a,l,i,r,e,n);f.setSource(Wt({},a),function(m,v){if(m)return oo(a,l,i,r,e,n);e.push(f),oo(v,a.type===v.type?l:wo[v.type],i,r,e,n)})}else l.length?oo(a,l,i,r,e,n):n?i(a,e):oo(a,wo["*"],i,r,e,!0)}var JU={opus:"video/ogg",ogv:"video/ogg",mp4:"video/mp4",mov:"video/mp4",m4v:"video/mp4",mkv:"video/x-matroska",m4a:"audio/mp4",mp3:"audio/mpeg",aac:"audio/aac",caf:"audio/x-caf",flac:"audio/flac",oga:"audio/ogg",wav:"audio/wav",m3u8:"application/x-mpegURL",mpd:"application/dash+xml",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",png:"image/png",svg:"image/svg+xml",webp:"image/webp"},Xc=function(t){t===void 0&&(t="");var i=Uv(t),r=JU[i.toLowerCase()];return r||""},ZU=function(t,i){if(!i)return"";if(t.cache_.source.src===i&&t.cache_.source.type)return t.cache_.source.type;var r=t.cache_.sources.filter(function(o){return o.src===i});if(r.length)return r[0].type;for(var e=t.$$("source"),n=0;n<e.length;n++){var s=e[n];if(s.type&&s.src&&s.src===i)return s.type}return Xc(i)},eB=function a(t){if(Array.isArray(t)){var i=[];t.forEach(function(r){r=a(r),Array.isArray(r)?i=i.concat(r):Ba(r)&&i.push(r)}),t=i}else typeof t=="string"&&t.trim()?t=[NT({src:t})]:Ba(t)&&typeof t.src=="string"&&t.src&&t.src.trim()?t=[NT(t)]:t=[];return t};function NT(a){if(!a.type){var t=Xc(a.src);t&&(a.type=t)}return a}var tB=function(a){Ae(t,a);function t(i,r,e){var n,s=Ft({createEl:!1},r);if(n=a.call(this,i,s,e)||this,!r.playerOptions.sources||r.playerOptions.sources.length===0)for(var o=0,l=r.playerOptions.techOrder;o<l.length;o++){var f=Zt(l[o]),m=Rt.getTech(f);if(f||(m=Te.getComponent(f)),m&&m.isSupported()){i.loadTech_(f);break}}else i.src(r.playerOptions.sources);return n}return t}(Te);Te.registerComponent("MediaLoader",tB);var Xh=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.options_.controlText&&n.controlText(n.options_.controlText),n.handleMouseOver_=function(s){return n.handleMouseOver(s)},n.handleMouseOut_=function(s){return n.handleMouseOut(s)},n.handleClick_=function(s){return n.handleClick(s)},n.handleKeyDown_=function(s){return n.handleKeyDown(s)},n.emitTapEvents(),n.enable(),n}var i=t.prototype;return i.createEl=function(e,n,s){e===void 0&&(e="div"),n===void 0&&(n={}),s===void 0&&(s={}),n=Wt({className:this.buildCSSClass(),tabIndex:0},n),e==="button"&&lt.error("Creating a ClickableComponent with an HTML element of "+e+" is not supported; use a Button instead."),s=Wt({role:"button"},s),this.tabIndex_=n.tabIndex;var o=xt(e,n,s);return o.appendChild(xt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},i.dispose=function(){this.controlTextEl_=null,a.prototype.dispose.call(this)},i.createControlTextEl=function(e){return this.controlTextEl_=xt("span",{className:"vjs-control-text"},{"aria-live":"polite"}),e&&e.appendChild(this.controlTextEl_),this.controlText(this.controlText_,e),this.controlTextEl_},i.controlText=function(e,n){if(n===void 0&&(n=this.el()),e===void 0)return this.controlText_||"Need Text";var s=this.localize(e);this.controlText_=e,ko(this.controlTextEl_,s),!this.nonIconControl&&!this.player_.options_.noUITitleAttributes&&n.setAttribute("title",s)},i.buildCSSClass=function(){return"vjs-control vjs-button "+a.prototype.buildCSSClass.call(this)},i.enable=function(){this.enabled_||(this.enabled_=!0,this.removeClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","false"),typeof this.tabIndex_<"u"&&this.el_.setAttribute("tabIndex",this.tabIndex_),this.on(["tap","click"],this.handleClick_),this.on("keydown",this.handleKeyDown_))},i.disable=function(){this.enabled_=!1,this.addClass("vjs-disabled"),this.el_.setAttribute("aria-disabled","true"),typeof this.tabIndex_<"u"&&this.el_.removeAttribute("tabIndex"),this.off("mouseover",this.handleMouseOver_),this.off("mouseout",this.handleMouseOut_),this.off(["tap","click"],this.handleClick_),this.off("keydown",this.handleKeyDown_)},i.handleLanguagechange=function(){this.controlText(this.controlText_)},i.handleClick=function(e){this.options_.clickHandler&&this.options_.clickHandler.call(this,arguments)},i.handleKeyDown=function(e){et.isEventKey(e,"Space")||et.isEventKey(e,"Enter")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,e)},t}(Te);Te.registerComponent("ClickableComponent",Xh);var iB=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.update(),n.update_=function(s){return n.update(s)},r.on("posterchange",n.update_),n}var i=t.prototype;return i.dispose=function(){this.player().off("posterchange",this.update_),a.prototype.dispose.call(this)},i.createEl=function(){var e=xt("div",{className:"vjs-poster",tabIndex:-1});return e},i.update=function(e){var n=this.player().poster();this.setSrc(n),n?this.show():this.hide()},i.setSrc=function(e){var n="";e&&(n='url("'+e+'")'),this.el_.style.backgroundImage=n},i.handleClick=function(e){if(this.player_.controls()){var n=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;this.player_.tech(!0)&&!((ff||df)&&n)&&this.player_.tech(!0).focus(),this.player_.paused()?Yn(this.player_.play()):this.player_.pause()}},t}(Xh);Te.registerComponent("PosterImage",iB);var Jr="#222",UT="#ccc",rB={monospace:"monospace",sansSerif:"sans-serif",serif:"serif",monospaceSansSerif:'"Andale Mono", "Lucida Console", monospace',monospaceSerif:'"Courier New", monospace',proportionalSansSerif:"sans-serif",proportionalSerif:"serif",casual:'"Comic Sans MS", Impact, fantasy',script:'"Monotype Corsiva", cursive',smallcaps:'"Andale Mono", "Lucida Console", monospace, sans-serif'};function fm(a,t){var i;if(a.length===4)i=a[1]+a[1]+a[2]+a[2]+a[3]+a[3];else if(a.length===7)i=a.slice(1);else throw new Error("Invalid color code provided, "+a+"; must be formatted as e.g. #f0e or #f604e2.");return"rgba("+parseInt(i.slice(0,2),16)+","+parseInt(i.slice(2,4),16)+","+parseInt(i.slice(4,6),16)+","+t+")"}function cm(a,t,i){try{a.style[t]=i}catch{return}}var nB=function(a){Ae(t,a);function t(r,e,n){var s;s=a.call(this,r,e,n)||this;var o=function(f){return s.updateDisplay(f)};return r.on("loadstart",function(l){return s.toggleDisplay(l)}),r.on("texttrackchange",o),r.on("loadedmetadata",function(l){return s.preselectTrack(l)}),r.ready(Nt(Ue(s),function(){if(r.tech_&&r.tech_.featuresNativeTextTracks){this.hide();return}r.on("fullscreenchange",o),r.on("playerresize",o),F.addEventListener("orientationchange",o),r.on("dispose",function(){return F.removeEventListener("orientationchange",o)});for(var l=this.options_.playerOptions.tracks||[],f=0;f<l.length;f++)this.player_.addRemoteTextTrack(l[f],!0);this.preselectTrack()})),s}var i=t.prototype;return i.preselectTrack=function(){for(var e={captions:1,subtitles:1},n=this.player_.textTracks(),s=this.player_.cache_.selectedLanguage,o,l,f,m=0;m<n.length;m++){var v=n[m];s&&s.enabled&&s.language&&s.language===v.language&&v.kind in e?v.kind===s.kind?f=v:f||(f=v):s&&!s.enabled?(f=null,o=null,l=null):v.default&&(v.kind==="descriptions"&&!o?o=v:v.kind in e&&!l&&(l=v))}f?f.mode="showing":l?l.mode="showing":o&&(o.mode="showing")},i.toggleDisplay=function(){this.player_.tech_&&this.player_.tech_.featuresNativeTextTracks?this.hide():this.show()},i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-text-track-display"},{translate:"yes","aria-live":"off","aria-atomic":"true"})},i.clearDisplay=function(){typeof F.WebVTT=="function"&&F.WebVTT.processCues(F,[],this.el_)},i.updateDisplay=function(){var e=this.player_.textTracks(),n=this.options_.allowMultipleShowingTracks;if(this.clearDisplay(),n){for(var s=[],o=0;o<e.length;++o){var l=e[o];l.mode==="showing"&&s.push(l)}this.updateForTrack(s);return}for(var f=null,m=null,v=e.length;v--;){var y=e[v];y.mode==="showing"&&(y.kind==="descriptions"?f=y:m=y)}m?(this.getAttribute("aria-live")!=="off"&&this.setAttribute("aria-live","off"),this.updateForTrack(m)):f&&(this.getAttribute("aria-live")!=="assertive"&&this.setAttribute("aria-live","assertive"),this.updateForTrack(f))},i.updateDisplayState=function(e){for(var n=this.player_.textTrackSettings.getValues(),s=e.activeCues,o=s.length;o--;){var l=s[o];if(l){var f=l.displayState;if(n.color&&(f.firstChild.style.color=n.color),n.textOpacity&&cm(f.firstChild,"color",fm(n.color||"#fff",n.textOpacity)),n.backgroundColor&&(f.firstChild.style.backgroundColor=n.backgroundColor),n.backgroundOpacity&&cm(f.firstChild,"backgroundColor",fm(n.backgroundColor||"#000",n.backgroundOpacity)),n.windowColor&&(n.windowOpacity?cm(f,"backgroundColor",fm(n.windowColor,n.windowOpacity)):f.style.backgroundColor=n.windowColor),n.edgeStyle&&(n.edgeStyle==="dropshadow"?f.firstChild.style.textShadow="2px 2px 3px "+Jr+", 2px 2px 4px "+Jr+", 2px 2px 5px "+Jr:n.edgeStyle==="raised"?f.firstChild.style.textShadow="1px 1px "+Jr+", 2px 2px "+Jr+", 3px 3px "+Jr:n.edgeStyle==="depressed"?f.firstChild.style.textShadow="1px 1px "+UT+", 0 1px "+UT+", -1px -1px "+Jr+", 0 -1px "+Jr:n.edgeStyle==="uniform"&&(f.firstChild.style.textShadow="0 0 4px "+Jr+", 0 0 4px "+Jr+", 0 0 4px "+Jr+", 0 0 4px "+Jr)),n.fontPercent&&n.fontPercent!==1){var m=F.parseFloat(f.style.fontSize);f.style.fontSize=m*n.fontPercent+"px",f.style.height="auto",f.style.top="auto"}n.fontFamily&&n.fontFamily!=="default"&&(n.fontFamily==="small-caps"?f.firstChild.style.fontVariant="small-caps":f.firstChild.style.fontFamily=rB[n.fontFamily])}}},i.updateForTrack=function(e){if(Array.isArray(e)||(e=[e]),!(typeof F.WebVTT!="function"||e.every(function(E){return!E.activeCues}))){for(var n=[],s=0;s<e.length;++s)for(var o=e[s],l=0;l<o.activeCues.length;++l)n.push(o.activeCues[l]);F.WebVTT.processCues(F,n,this.el_);for(var f=0;f<e.length;++f){for(var m=e[f],v=0;v<m.activeCues.length;++v){var y=m.activeCues[v].displayState;La(y,"vjs-text-track-cue"),La(y,"vjs-text-track-cue-"+(m.language?m.language:f)),m.language&&Gu(y,"lang",m.language)}this.player_.textTrackSettings&&this.updateDisplayState(m)}}},t}(Te);Te.registerComponent("TextTrackDisplay",nB);var aB=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.createEl=function(){var e=this.player_.isAudio(),n=this.localize(e?"Audio Player":"Video Player"),s=xt("span",{className:"vjs-control-text",textContent:this.localize("{1} is loading.",[n])}),o=a.prototype.createEl.call(this,"div",{className:"vjs-loading-spinner",dir:"ltr"});return o.appendChild(s),o},t}(Te);Te.registerComponent("LoadingSpinner",aB);var In=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.createEl=function(e,n,s){n===void 0&&(n={}),s===void 0&&(s={}),e="button",n=Wt({className:this.buildCSSClass()},n),s=Wt({type:"button"},s);var o=xt(e,n,s);return o.appendChild(xt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),this.createControlTextEl(o),o},i.addChild=function(e,n){n===void 0&&(n={});var s=this.constructor.name;return lt.warn("Adding an actionable (user controllable) child to a Button ("+s+") is not supported; use a ClickableComponent instead."),Te.prototype.addChild.call(this,e,n)},i.enable=function(){a.prototype.enable.call(this),this.el_.removeAttribute("disabled")},i.disable=function(){a.prototype.disable.call(this),this.el_.setAttribute("disabled","disabled")},i.handleKeyDown=function(e){if(et.isEventKey(e,"Space")||et.isEventKey(e,"Enter")){e.stopPropagation();return}a.prototype.handleKeyDown.call(this,e)},t}(Xh);Te.registerComponent("Button",In);var IE=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.mouseused_=!1,n.on("mousedown",function(s){return n.handleMouseDown(s)}),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-big-play-button"},i.handleClick=function(e){var n=this.player_.play();if(this.mouseused_&&e.clientX&&e.clientY){var s=this.player_.usingPlugin("eme")&&this.player_.eme.sessions&&this.player_.eme.sessions.length>0;Yn(n),this.player_.tech(!0)&&!((ff||df)&&s)&&this.player_.tech(!0).focus();return}var o=this.player_.getChild("controlBar"),l=o&&o.getChild("playToggle");if(!l){this.player_.tech(!0).focus();return}var f=function(){return l.focus()};Pd(n)?n.then(f,function(){}):this.setTimeout(f,1)},i.handleKeyDown=function(e){this.mouseused_=!1,a.prototype.handleKeyDown.call(this,e)},i.handleMouseDown=function(e){this.mouseused_=!0},t}(In);IE.prototype.controlText_="Play Video";Te.registerComponent("BigPlayButton",IE);var sB=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.controlText(e&&e.controlText||n.localize("Close")),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-close-button "+a.prototype.buildCSSClass.call(this)},i.handleClick=function(e){this.trigger({type:"close",bubbles:!1})},i.handleKeyDown=function(e){et.isEventKey(e,"Esc")?(e.preventDefault(),e.stopPropagation(),this.trigger("click")):a.prototype.handleKeyDown.call(this,e)},t}(In);Te.registerComponent("CloseButton",sB);var PE=function(a){Ae(t,a);function t(r,e){var n;return e===void 0&&(e={}),n=a.call(this,r,e)||this,e.replay=e.replay===void 0||e.replay,n.on(r,"play",function(s){return n.handlePlay(s)}),n.on(r,"pause",function(s){return n.handlePause(s)}),e.replay&&n.on(r,"ended",function(s){return n.handleEnded(s)}),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-play-control "+a.prototype.buildCSSClass.call(this)},i.handleClick=function(e){this.player_.paused()?Yn(this.player_.play()):this.player_.pause()},i.handleSeeked=function(e){this.removeClass("vjs-ended"),this.player_.paused()?this.handlePause(e):this.handlePlay(e)},i.handlePlay=function(e){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.controlText("Pause")},i.handlePause=function(e){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.controlText("Play")},i.handleEnded=function(e){var n=this;this.removeClass("vjs-playing"),this.addClass("vjs-ended"),this.controlText("Replay"),this.one(this.player_,"seeked",function(s){return n.handleSeeked(s)})},t}(In);PE.prototype.controlText_="Play";Te.registerComponent("PlayToggle",PE);var OE=function(t,i){t=t<0?0:t;var r=Math.floor(t%60),e=Math.floor(t/60%60),n=Math.floor(t/3600),s=Math.floor(i/60%60),o=Math.floor(i/3600);return(isNaN(t)||t===1/0)&&(n=e=r="-"),n=n>0||o>0?n+":":"",e=((n||s>=10)&&e<10?"0"+e:e)+":",r=r<10?"0"+r:r,n+e+r},jv=OE;function oB(a){jv=a}function uB(){jv=OE}function Qu(a,t){return t===void 0&&(t=a),jv(a,t)}var al=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.on(r,["timeupdate","ended"],function(s){return n.updateContent(s)}),n.updateTextNode_(),n}var i=t.prototype;return i.createEl=function(){var e=this.buildCSSClass(),n=a.prototype.createEl.call(this,"div",{className:e+" vjs-time-control vjs-control"}),s=xt("span",{className:"vjs-control-text",textContent:this.localize(this.labelText_)+""},{role:"presentation"});return n.appendChild(s),this.contentEl_=xt("span",{className:e+"-display"},{"aria-live":"off",role:"presentation"}),n.appendChild(this.contentEl_),n},i.dispose=function(){this.contentEl_=null,this.textNode_=null,a.prototype.dispose.call(this)},i.updateTextNode_=function(e){var n=this;e===void 0&&(e=0),e=Qu(e),this.formattedTime_!==e&&(this.formattedTime_=e,this.requestNamedAnimationFrame("TimeDisplay#updateTextNode_",function(){if(n.contentEl_){var s=n.textNode_;s&&n.contentEl_.firstChild!==s&&(s=null,lt.warn("TimeDisplay#updateTextnode_: Prevented replacement of text node element since it was no longer a child of this node. Appending a new node instead.")),n.textNode_=Se.createTextNode(n.formattedTime_),n.textNode_&&(s?n.contentEl_.replaceChild(n.textNode_,s):n.contentEl_.appendChild(n.textNode_))}}))},i.updateContent=function(e){},t}(Te);al.prototype.labelText_="Time";al.prototype.controlText_="Time";Te.registerComponent("TimeDisplay",al);var Vv=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-current-time"},i.updateContent=function(e){var n;this.player_.ended()?n=this.player_.duration():n=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime(),this.updateTextNode_(n)},t}(al);Vv.prototype.labelText_="Current Time";Vv.prototype.controlText_="Current Time";Te.registerComponent("CurrentTimeDisplay",Vv);var Hv=function(a){Ae(t,a);function t(r,e){var n;n=a.call(this,r,e)||this;var s=function(l){return n.updateContent(l)};return n.on(r,"durationchange",s),n.on(r,"loadstart",s),n.on(r,"loadedmetadata",s),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-duration"},i.updateContent=function(e){var n=this.player_.duration();this.updateTextNode_(n)},t}(al);Hv.prototype.labelText_="Duration";Hv.prototype.controlText_="Duration";Te.registerComponent("DurationDisplay",Hv);var lB=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.createEl=function(){var e=a.prototype.createEl.call(this,"div",{className:"vjs-time-control vjs-time-divider"},{"aria-hidden":!0}),n=a.prototype.createEl.call(this,"div"),s=a.prototype.createEl.call(this,"span",{textContent:"/"});return n.appendChild(s),e.appendChild(n),e},t}(Te);Te.registerComponent("TimeDivider",lB);var $v=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.on(r,"durationchange",function(s){return n.updateContent(s)}),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-remaining-time"},i.createEl=function(){var e=a.prototype.createEl.call(this);return this.options_.displayNegative!==!1&&e.insertBefore(xt("span",{},{"aria-hidden":!0},"-"),this.contentEl_),e},i.updateContent=function(e){if(typeof this.player_.duration()=="number"){var n;this.player_.ended()?n=0:this.player_.remainingTimeDisplay?n=this.player_.remainingTimeDisplay():n=this.player_.remainingTime(),this.updateTextNode_(n)}},t}(al);$v.prototype.labelText_="Remaining Time";$v.prototype.controlText_="Remaining Time";Te.registerComponent("RemainingTimeDisplay",$v);var dB=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.updateShowing(),n.on(n.player(),"durationchange",function(s){return n.updateShowing(s)}),n}var i=t.prototype;return i.createEl=function(){var e=a.prototype.createEl.call(this,"div",{className:"vjs-live-control vjs-control"});return this.contentEl_=xt("div",{className:"vjs-live-display"},{"aria-live":"off"}),this.contentEl_.appendChild(xt("span",{className:"vjs-control-text",textContent:this.localize("Stream Type")+""})),this.contentEl_.appendChild(Se.createTextNode(this.localize("LIVE"))),e.appendChild(this.contentEl_),e},i.dispose=function(){this.contentEl_=null,a.prototype.dispose.call(this)},i.updateShowing=function(e){this.player().duration()===1/0?this.show():this.hide()},t}(Te);Te.registerComponent("LiveDisplay",dB);var DE=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.updateLiveEdgeStatus(),n.player_.liveTracker&&(n.updateLiveEdgeStatusHandler_=function(s){return n.updateLiveEdgeStatus(s)},n.on(n.player_.liveTracker,"liveedgechange",n.updateLiveEdgeStatusHandler_)),n}var i=t.prototype;return i.createEl=function(){var e=a.prototype.createEl.call(this,"button",{className:"vjs-seek-to-live-control vjs-control"});return this.textEl_=xt("span",{className:"vjs-seek-to-live-text",textContent:this.localize("LIVE")},{"aria-hidden":"true"}),e.appendChild(this.textEl_),e},i.updateLiveEdgeStatus=function(){!this.player_.liveTracker||this.player_.liveTracker.atLiveEdge()?(this.setAttribute("aria-disabled",!0),this.addClass("vjs-at-live-edge"),this.controlText("Seek to live, currently playing live")):(this.setAttribute("aria-disabled",!1),this.removeClass("vjs-at-live-edge"),this.controlText("Seek to live, currently behind live"))},i.handleClick=function(){this.player_.liveTracker.seekToLiveEdge()},i.dispose=function(){this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.updateLiveEdgeStatusHandler_),this.textEl_=null,a.prototype.dispose.call(this)},t}(In);DE.prototype.controlText_="Seek to live, currently playing live";Te.registerComponent("SeekToLive",DE);var Qh=function(t,i,r){return t=Number(t),Math.min(r,Math.max(i,isNaN(t)?i:t))},Wv=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.handleMouseDown_=function(s){return n.handleMouseDown(s)},n.handleMouseUp_=function(s){return n.handleMouseUp(s)},n.handleKeyDown_=function(s){return n.handleKeyDown(s)},n.handleClick_=function(s){return n.handleClick(s)},n.handleMouseMove_=function(s){return n.handleMouseMove(s)},n.update_=function(s){return n.update(s)},n.bar=n.getChild(n.options_.barName),n.vertical(!!n.options_.vertical),n.enable(),n}var i=t.prototype;return i.enabled=function(){return this.enabled_},i.enable=function(){this.enabled()||(this.on("mousedown",this.handleMouseDown_),this.on("touchstart",this.handleMouseDown_),this.on("keydown",this.handleKeyDown_),this.on("click",this.handleClick_),this.on(this.player_,"controlsvisible",this.update),this.playerEvent&&this.on(this.player_,this.playerEvent,this.update),this.removeClass("disabled"),this.setAttribute("tabindex",0),this.enabled_=!0)},i.disable=function(){if(this.enabled()){var e=this.bar.el_.ownerDocument;this.off("mousedown",this.handleMouseDown_),this.off("touchstart",this.handleMouseDown_),this.off("keydown",this.handleKeyDown_),this.off("click",this.handleClick_),this.off(this.player_,"controlsvisible",this.update_),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.removeAttribute("tabindex"),this.addClass("disabled"),this.playerEvent&&this.off(this.player_,this.playerEvent,this.update),this.enabled_=!1}},i.createEl=function(e,n,s){return n===void 0&&(n={}),s===void 0&&(s={}),n.className=n.className+" vjs-slider",n=Wt({tabIndex:0},n),s=Wt({role:"slider","aria-valuenow":0,"aria-valuemin":0,"aria-valuemax":100,tabIndex:0},s),a.prototype.createEl.call(this,e,n,s)},i.handleMouseDown=function(e){var n=this.bar.el_.ownerDocument;e.type==="mousedown"&&e.preventDefault(),e.type==="touchstart"&&!Wa&&e.preventDefault(),sE(),this.addClass("vjs-sliding"),this.trigger("slideractive"),this.on(n,"mousemove",this.handleMouseMove_),this.on(n,"mouseup",this.handleMouseUp_),this.on(n,"touchmove",this.handleMouseMove_),this.on(n,"touchend",this.handleMouseUp_),this.handleMouseMove(e,!0)},i.handleMouseMove=function(e){},i.handleMouseUp=function(){var e=this.bar.el_.ownerDocument;oE(),this.removeClass("vjs-sliding"),this.trigger("sliderinactive"),this.off(e,"mousemove",this.handleMouseMove_),this.off(e,"mouseup",this.handleMouseUp_),this.off(e,"touchmove",this.handleMouseMove_),this.off(e,"touchend",this.handleMouseUp_),this.update()},i.update=function(){var e=this;if(!(!this.el_||!this.bar)){var n=this.getProgress();return n===this.progress_||(this.progress_=n,this.requestNamedAnimationFrame("Slider#update",function(){var s=e.vertical()?"height":"width";e.bar.el().style[s]=(n*100).toFixed(2)+"%"})),n}},i.getProgress=function(){return Number(Qh(this.getPercent(),0,1).toFixed(4))},i.calculateDistance=function(e){var n=Wh(this.el_,e);return this.vertical()?n.y:n.x},i.handleKeyDown=function(e){et.isEventKey(e,"Left")||et.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepBack()):et.isEventKey(e,"Right")||et.isEventKey(e,"Up")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):a.prototype.handleKeyDown.call(this,e)},i.handleClick=function(e){e.stopPropagation(),e.preventDefault()},i.vertical=function(e){if(e===void 0)return this.vertical_||!1;this.vertical_=!!e,this.vertical_?this.addClass("vjs-slider-vertical"):this.addClass("vjs-slider-horizontal")},t}(Te);Te.registerComponent("Slider",Wv);var hm=function(t,i){return Qh(t/i*100,0,100).toFixed(2)+"%"},fB=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.partEls_=[],n.on(r,"progress",function(s){return n.update(s)}),n}var i=t.prototype;return i.createEl=function(){var e=a.prototype.createEl.call(this,"div",{className:"vjs-load-progress"}),n=xt("span",{className:"vjs-control-text"}),s=xt("span",{textContent:this.localize("Loaded")}),o=Se.createTextNode(": ");return this.percentageEl_=xt("span",{className:"vjs-control-text-loaded-percentage",textContent:"0%"}),e.appendChild(n),n.appendChild(s),n.appendChild(o),n.appendChild(this.percentageEl_),e},i.dispose=function(){this.partEls_=null,this.percentageEl_=null,a.prototype.dispose.call(this)},i.update=function(e){var n=this;this.requestNamedAnimationFrame("LoadProgressBar#update",function(){var s=n.player_.liveTracker,o=n.player_.buffered(),l=s&&s.isLive()?s.seekableEnd():n.player_.duration(),f=n.player_.bufferedEnd(),m=n.partEls_,v=hm(f,l);n.percent_!==v&&(n.el_.style.width=v,ko(n.percentageEl_,v),n.percent_=v);for(var y=0;y<o.length;y++){var E=o.start(y),I=o.end(y),O=m[y];O||(O=n.el_.appendChild(xt()),m[y]=O),!(O.dataset.start===E&&O.dataset.end===I)&&(O.dataset.start=E,O.dataset.end=I,O.style.left=hm(E,f),O.style.width=hm(I-E,f))}for(var D=m.length;D>o.length;D--)n.el_.removeChild(m[D-1]);m.length=o.length})},t}(Te);Te.registerComponent("LoadProgressBar",fB);var cB=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.update=ja(Nt(Ue(n),n.update),Pn),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-time-tooltip"},{"aria-hidden":"true"})},i.update=function(e,n,s){var o=Xd(this.el_),l=zu(this.player_.el()),f=e.width*n;if(!(!l||!o)){var m=e.left-l.left+f,v=e.width-f+(l.right-e.right),y=o.width/2;m<y?y+=y-m:v<y&&(y=v),y<0?y=0:y>o.width&&(y=o.width),y=Math.round(y),this.el_.style.right="-"+y+"px",this.write(s)}},i.write=function(e){ko(this.el_,e)},i.updateTime=function(e,n,s,o){var l=this;this.requestNamedAnimationFrame("TimeTooltip#updateTime",function(){var f,m=l.player_.duration();if(l.player_.liveTracker&&l.player_.liveTracker.isLive()){var v=l.player_.liveTracker.liveWindow(),y=v-n*v;f=(y<1?"":"-")+Qu(y,v)}else f=Qu(s,m);l.update(e,n,f),o&&o()})},t}(Te);Te.registerComponent("TimeTooltip",cB);var qv=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.update=ja(Nt(Ue(n),n.update),Pn),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-play-progress vjs-slider-bar"},{"aria-hidden":"true"})},i.update=function(e,n){var s=this.getChild("timeTooltip");if(s){var o=this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime();s.updateTime(e,n,o)}},t}(Te);qv.prototype.options_={children:[]};!er&&!$a&&qv.prototype.options_.children.push("timeTooltip");Te.registerComponent("PlayProgressBar",qv);var LE=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.update=ja(Nt(Ue(n),n.update),Pn),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(e,n){var s=this,o=n*this.player_.duration();this.getChild("timeTooltip").updateTime(e,n,o,function(){s.el_.style.left=e.width*n+"px"})},t}(Te);LE.prototype.options_={children:["timeTooltip"]};Te.registerComponent("MouseTimeDisplay",LE);var lc=5,BT=12,Gv=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.setEventHandlers_(),n}var i=t.prototype;return i.setEventHandlers_=function(){var e=this;this.update_=Nt(this,this.update),this.update=ja(this.update_,Pn),this.on(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.on(this.player_.liveTracker,"liveedgechange",this.update),this.updateInterval=null,this.enableIntervalHandler_=function(n){return e.enableInterval_(n)},this.disableIntervalHandler_=function(n){return e.disableInterval_(n)},this.on(this.player_,["playing"],this.enableIntervalHandler_),this.on(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Se&&"visibilityState"in Se&&this.on(Se,"visibilitychange",this.toggleVisibility_)},i.toggleVisibility_=function(e){Se.visibilityState==="hidden"?(this.cancelNamedAnimationFrame("SeekBar#update"),this.cancelNamedAnimationFrame("Slider#update"),this.disableInterval_(e)):(!this.player_.ended()&&!this.player_.paused()&&this.enableInterval_(),this.update())},i.enableInterval_=function(){this.updateInterval||(this.updateInterval=this.setInterval(this.update,Pn))},i.disableInterval_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&e&&e.type!=="ended"||this.updateInterval&&(this.clearInterval(this.updateInterval),this.updateInterval=null)},i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-holder"},{"aria-label":this.localize("Progress Bar")})},i.update=function(e){var n=this;if(Se.visibilityState!=="hidden"){var s=a.prototype.update.call(this);return this.requestNamedAnimationFrame("SeekBar#update",function(){var o=n.player_.ended()?n.player_.duration():n.getCurrentTime_(),l=n.player_.liveTracker,f=n.player_.duration();l&&l.isLive()&&(f=n.player_.liveTracker.liveCurrentTime()),n.percent_!==s&&(n.el_.setAttribute("aria-valuenow",(s*100).toFixed(2)),n.percent_=s),(n.currentTime_!==o||n.duration_!==f)&&(n.el_.setAttribute("aria-valuetext",n.localize("progress bar timing: currentTime={1} duration={2}",[Qu(o,f),Qu(f,f)],"{1} of {2}")),n.currentTime_=o,n.duration_=f),n.bar&&n.bar.update(zu(n.el()),n.getProgress())}),s}},i.userSeek_=function(e){this.player_.liveTracker&&this.player_.liveTracker.isLive()&&this.player_.liveTracker.nextSeekedFromUser(),this.player_.currentTime(e)},i.getCurrentTime_=function(){return this.player_.scrubbing()?this.player_.getCache().currentTime:this.player_.currentTime()},i.getPercent=function(){var e=this.getCurrentTime_(),n,s=this.player_.liveTracker;return s&&s.isLive()?(n=(e-s.seekableStart())/s.liveWindow(),s.atLiveEdge()&&(n=1)):n=e/this.player_.duration(),n},i.handleMouseDown=function(e){Qd(e)&&(e.stopPropagation(),this.videoWasPlaying=!this.player_.paused(),this.player_.pause(),a.prototype.handleMouseDown.call(this,e))},i.handleMouseMove=function(e,n){if(n===void 0&&(n=!1),!!Qd(e)){!n&&!this.player_.scrubbing()&&this.player_.scrubbing(!0);var s,o=this.calculateDistance(e),l=this.player_.liveTracker;if(!l||!l.isLive())s=o*this.player_.duration(),s===this.player_.duration()&&(s=s-.1);else{if(o>=.99){l.seekToLiveEdge();return}var f=l.seekableStart(),m=l.liveCurrentTime();if(s=f+o*l.liveWindow(),s>=m&&(s=m),s<=f&&(s=f+.1),s===1/0)return}this.userSeek_(s)}},i.enable=function(){a.prototype.enable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.show()},i.disable=function(){a.prototype.disable.call(this);var e=this.getChild("mouseTimeDisplay");e&&e.hide()},i.handleMouseUp=function(e){a.prototype.handleMouseUp.call(this,e),e&&e.stopPropagation(),this.player_.scrubbing(!1),this.player_.trigger({type:"timeupdate",target:this,manuallyTriggered:!0}),this.videoWasPlaying?Yn(this.player_.play()):this.update_()},i.stepForward=function(){this.userSeek_(this.player_.currentTime()+lc)},i.stepBack=function(){this.userSeek_(this.player_.currentTime()-lc)},i.handleAction=function(e){this.player_.paused()?this.player_.play():this.player_.pause()},i.handleKeyDown=function(e){var n=this.player_.liveTracker;if(et.isEventKey(e,"Space")||et.isEventKey(e,"Enter"))e.preventDefault(),e.stopPropagation(),this.handleAction(e);else if(et.isEventKey(e,"Home"))e.preventDefault(),e.stopPropagation(),this.userSeek_(0);else if(et.isEventKey(e,"End"))e.preventDefault(),e.stopPropagation(),n&&n.isLive()?this.userSeek_(n.liveCurrentTime()):this.userSeek_(this.player_.duration());else if(/^[0-9]$/.test(et(e))){e.preventDefault(),e.stopPropagation();var s=(et.codes[et(e)]-et.codes[0])*10/100;n&&n.isLive()?this.userSeek_(n.seekableStart()+n.liveWindow()*s):this.userSeek_(this.player_.duration()*s)}else et.isEventKey(e,"PgDn")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()-lc*BT)):et.isEventKey(e,"PgUp")?(e.preventDefault(),e.stopPropagation(),this.userSeek_(this.player_.currentTime()+lc*BT)):a.prototype.handleKeyDown.call(this,e)},i.dispose=function(){this.disableInterval_(),this.off(this.player_,["ended","durationchange","timeupdate"],this.update),this.player_.liveTracker&&this.off(this.player_.liveTracker,"liveedgechange",this.update),this.off(this.player_,["playing"],this.enableIntervalHandler_),this.off(this.player_,["ended","pause","waiting"],this.disableIntervalHandler_),"hidden"in Se&&"visibilityState"in Se&&this.off(Se,"visibilitychange",this.toggleVisibility_),a.prototype.dispose.call(this)},t}(Wv);Gv.prototype.options_={children:["loadProgressBar","playProgressBar"],barName:"playProgressBar"};!er&&!$a&&Gv.prototype.options_.children.splice(1,0,"mouseTimeDisplay");Te.registerComponent("SeekBar",Gv);var kE=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.handleMouseMove=ja(Nt(Ue(n),n.handleMouseMove),Pn),n.throttledHandleMouseSeek=ja(Nt(Ue(n),n.handleMouseSeek),Pn),n.handleMouseUpHandler_=function(s){return n.handleMouseUp(s)},n.handleMouseDownHandler_=function(s){return n.handleMouseDown(s)},n.enable(),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-progress-control vjs-control"})},i.handleMouseMove=function(e){var n=this.getChild("seekBar");if(n){var s=n.getChild("playProgressBar"),o=n.getChild("mouseTimeDisplay");if(!(!s&&!o)){var l=n.el(),f=Xd(l),m=Wh(l,e).x;m=Qh(m,0,1),o&&o.update(f,m),s&&s.update(f,n.getProgress())}}},i.handleMouseSeek=function(e){var n=this.getChild("seekBar");n&&n.handleMouseMove(e)},i.enabled=function(){return this.enabled_},i.disable=function(){if(this.children().forEach(function(n){return n.disable&&n.disable()}),!!this.enabled()&&(this.off(["mousedown","touchstart"],this.handleMouseDownHandler_),this.off(this.el_,"mousemove",this.handleMouseMove),this.removeListenersAddedOnMousedownAndTouchstart(),this.addClass("disabled"),this.enabled_=!1,this.player_.scrubbing())){var e=this.getChild("seekBar");this.player_.scrubbing(!1),e.videoWasPlaying&&Yn(this.player_.play())}},i.enable=function(){this.children().forEach(function(e){return e.enable&&e.enable()}),!this.enabled()&&(this.on(["mousedown","touchstart"],this.handleMouseDownHandler_),this.on(this.el_,"mousemove",this.handleMouseMove),this.removeClass("disabled"),this.enabled_=!0)},i.removeListenersAddedOnMousedownAndTouchstart=function(){var e=this.el_.ownerDocument;this.off(e,"mousemove",this.throttledHandleMouseSeek),this.off(e,"touchmove",this.throttledHandleMouseSeek),this.off(e,"mouseup",this.handleMouseUpHandler_),this.off(e,"touchend",this.handleMouseUpHandler_)},i.handleMouseDown=function(e){var n=this.el_.ownerDocument,s=this.getChild("seekBar");s&&s.handleMouseDown(e),this.on(n,"mousemove",this.throttledHandleMouseSeek),this.on(n,"touchmove",this.throttledHandleMouseSeek),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)},i.handleMouseUp=function(e){var n=this.getChild("seekBar");n&&n.handleMouseUp(e),this.removeListenersAddedOnMousedownAndTouchstart()},t}(Te);kE.prototype.options_={children:["seekBar"]};Te.registerComponent("ProgressControl",kE);var RE=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.on(r,["enterpictureinpicture","leavepictureinpicture"],function(s){return n.handlePictureInPictureChange(s)}),n.on(r,["disablepictureinpicturechanged","loadedmetadata"],function(s){return n.handlePictureInPictureEnabledChange(s)}),n.on(r,["loadedmetadata","audioonlymodechange","audiopostermodechange"],function(){var s=r.currentType().substring(0,5)==="audio";s||r.audioPosterMode()||r.audioOnlyMode()?(r.isInPictureInPicture()&&r.exitPictureInPicture(),n.hide()):n.show()}),n.disable(),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-picture-in-picture-control "+a.prototype.buildCSSClass.call(this)},i.handlePictureInPictureEnabledChange=function(){Se.pictureInPictureEnabled&&this.player_.disablePictureInPicture()===!1?this.enable():this.disable()},i.handlePictureInPictureChange=function(e){this.player_.isInPictureInPicture()?this.controlText("Exit Picture-in-Picture"):this.controlText("Picture-in-Picture"),this.handlePictureInPictureEnabledChange()},i.handleClick=function(e){this.player_.isInPictureInPicture()?this.player_.exitPictureInPicture():this.player_.requestPictureInPicture()},t}(In);RE.prototype.controlText_="Picture-in-Picture";Te.registerComponent("PictureInPictureToggle",RE);var ME=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.on(r,"fullscreenchange",function(s){return n.handleFullscreenChange(s)}),Se[r.fsApi_.fullscreenEnabled]===!1&&n.disable(),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-fullscreen-control "+a.prototype.buildCSSClass.call(this)},i.handleFullscreenChange=function(e){this.player_.isFullscreen()?this.controlText("Non-Fullscreen"):this.controlText("Fullscreen")},i.handleClick=function(e){this.player_.isFullscreen()?this.player_.exitFullscreen():this.player_.requestFullscreen()},t}(In);ME.prototype.controlText_="Fullscreen";Te.registerComponent("FullscreenToggle",ME);var hB=function(t,i){i.tech_&&!i.tech_.featuresVolumeControl&&t.addClass("vjs-hidden"),t.on(i,"loadstart",function(){i.tech_.featuresVolumeControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})},pB=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.createEl=function(){var e=a.prototype.createEl.call(this,"div",{className:"vjs-volume-level"});return e.appendChild(a.prototype.createEl.call(this,"span",{className:"vjs-control-text"})),e},t}(Te);Te.registerComponent("VolumeLevel",pB);var mB=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.update=ja(Nt(Ue(n),n.update),Pn),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-tooltip"},{"aria-hidden":"true"})},i.update=function(e,n,s,o){if(!s){var l=zu(this.el_),f=zu(this.player_.el()),m=e.width*n;if(!f||!l)return;var v=e.left-f.left+m,y=e.width-m+(f.right-e.right),E=l.width/2;v<E?E+=E-v:y<E&&(E=y),E<0?E=0:E>l.width&&(E=l.width),this.el_.style.right="-"+E+"px"}this.write(o+"%")},i.write=function(e){ko(this.el_,e)},i.updateVolume=function(e,n,s,o,l){var f=this;this.requestNamedAnimationFrame("VolumeLevelTooltip#updateVolume",function(){f.update(e,n,s,o.toFixed(0)),l&&l()})},t}(Te);Te.registerComponent("VolumeLevelTooltip",mB);var FE=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.update=ja(Nt(Ue(n),n.update),Pn),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-mouse-display"})},i.update=function(e,n,s){var o=this,l=100*n;this.getChild("volumeLevelTooltip").updateVolume(e,n,s,l,function(){s?o.el_.style.bottom=e.height*n+"px":o.el_.style.left=e.width*n+"px"})},t}(Te);FE.prototype.options_={children:["volumeLevelTooltip"]};Te.registerComponent("MouseVolumeLevelDisplay",FE);var Yh=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.on("slideractive",function(s){return n.updateLastVolume_(s)}),n.on(r,"volumechange",function(s){return n.updateARIAAttributes(s)}),r.ready(function(){return n.updateARIAAttributes()}),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-volume-bar vjs-slider-bar"},{"aria-label":this.localize("Volume Level"),"aria-live":"polite"})},i.handleMouseDown=function(e){Qd(e)&&a.prototype.handleMouseDown.call(this,e)},i.handleMouseMove=function(e){var n=this.getChild("mouseVolumeLevelDisplay");if(n){var s=this.el(),o=zu(s),l=this.vertical(),f=Wh(s,e);f=l?f.y:f.x,f=Qh(f,0,1),n.update(o,f,l)}Qd(e)&&(this.checkMuted(),this.player_.volume(this.calculateDistance(e)))},i.checkMuted=function(){this.player_.muted()&&this.player_.muted(!1)},i.getPercent=function(){return this.player_.muted()?0:this.player_.volume()},i.stepForward=function(){this.checkMuted(),this.player_.volume(this.player_.volume()+.1)},i.stepBack=function(){this.checkMuted(),this.player_.volume(this.player_.volume()-.1)},i.updateARIAAttributes=function(e){var n=this.player_.muted()?0:this.volumeAsPercentage_();this.el_.setAttribute("aria-valuenow",n),this.el_.setAttribute("aria-valuetext",n+"%")},i.volumeAsPercentage_=function(){return Math.round(this.player_.volume()*100)},i.updateLastVolume_=function(){var e=this,n=this.player_.volume();this.one("sliderinactive",function(){e.player_.volume()===0&&e.player_.lastVolume_(n)})},t}(Wv);Yh.prototype.options_={children:["volumeLevel"],barName:"volumeLevel"};!er&&!$a&&Yh.prototype.options_.children.splice(0,0,"mouseVolumeLevelDisplay");Yh.prototype.playerEvent="volumechange";Te.registerComponent("VolumeBar",Yh);var NE=function(a){Ae(t,a);function t(r,e){var n;return e===void 0&&(e={}),e.vertical=e.vertical||!1,(typeof e.volumeBar>"u"||zd(e.volumeBar))&&(e.volumeBar=e.volumeBar||{},e.volumeBar.vertical=e.vertical),n=a.call(this,r,e)||this,hB(Ue(n),r),n.throttledHandleMouseMove=ja(Nt(Ue(n),n.handleMouseMove),Pn),n.handleMouseUpHandler_=function(s){return n.handleMouseUp(s)},n.on("mousedown",function(s){return n.handleMouseDown(s)}),n.on("touchstart",function(s){return n.handleMouseDown(s)}),n.on("mousemove",function(s){return n.handleMouseMove(s)}),n.on(n.volumeBar,["focus","slideractive"],function(){n.volumeBar.addClass("vjs-slider-active"),n.addClass("vjs-slider-active"),n.trigger("slideractive")}),n.on(n.volumeBar,["blur","sliderinactive"],function(){n.volumeBar.removeClass("vjs-slider-active"),n.removeClass("vjs-slider-active"),n.trigger("sliderinactive")}),n}var i=t.prototype;return i.createEl=function(){var e="vjs-volume-horizontal";return this.options_.vertical&&(e="vjs-volume-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-control vjs-control "+e})},i.handleMouseDown=function(e){var n=this.el_.ownerDocument;this.on(n,"mousemove",this.throttledHandleMouseMove),this.on(n,"touchmove",this.throttledHandleMouseMove),this.on(n,"mouseup",this.handleMouseUpHandler_),this.on(n,"touchend",this.handleMouseUpHandler_)},i.handleMouseUp=function(e){var n=this.el_.ownerDocument;this.off(n,"mousemove",this.throttledHandleMouseMove),this.off(n,"touchmove",this.throttledHandleMouseMove),this.off(n,"mouseup",this.handleMouseUpHandler_),this.off(n,"touchend",this.handleMouseUpHandler_)},i.handleMouseMove=function(e){this.volumeBar.handleMouseMove(e)},t}(Te);NE.prototype.options_={children:["volumeBar"]};Te.registerComponent("VolumeControl",NE);var gB=function(t,i){i.tech_&&!i.tech_.featuresMuteControl&&t.addClass("vjs-hidden"),t.on(i,"loadstart",function(){i.tech_.featuresMuteControl?t.removeClass("vjs-hidden"):t.addClass("vjs-hidden")})},UE=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,gB(Ue(n),r),n.on(r,["loadstart","volumechange"],function(s){return n.update(s)}),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-mute-control "+a.prototype.buildCSSClass.call(this)},i.handleClick=function(e){var n=this.player_.volume(),s=this.player_.lastVolume_();if(n===0){var o=s<.1?.1:s;this.player_.volume(o),this.player_.muted(!1)}else this.player_.muted(!this.player_.muted())},i.update=function(e){this.updateIcon_(),this.updateControlText_()},i.updateIcon_=function(){var e=this.player_.volume(),n=3;er&&this.player_.tech_&&this.player_.tech_.el_&&this.player_.muted(this.player_.tech_.el_.muted),e===0||this.player_.muted()?n=0:e<.33?n=1:e<.67&&(n=2);for(var s=0;s<4;s++)cf(this.el_,"vjs-vol-"+s);La(this.el_,"vjs-vol-"+n)},i.updateControlText_=function(){var e=this.player_.muted()||this.player_.volume()===0,n=e?"Unmute":"Mute";this.controlText()!==n&&this.controlText(n)},t}(In);UE.prototype.controlText_="Mute";Te.registerComponent("MuteToggle",UE);var BE=function(a){Ae(t,a);function t(r,e){var n;return e===void 0&&(e={}),typeof e.inline<"u"?e.inline=e.inline:e.inline=!0,(typeof e.volumeControl>"u"||zd(e.volumeControl))&&(e.volumeControl=e.volumeControl||{},e.volumeControl.vertical=!e.inline),n=a.call(this,r,e)||this,n.handleKeyPressHandler_=function(s){return n.handleKeyPress(s)},n.on(r,["loadstart"],function(s){return n.volumePanelState_(s)}),n.on(n.muteToggle,"keyup",function(s){return n.handleKeyPress(s)}),n.on(n.volumeControl,"keyup",function(s){return n.handleVolumeControlKeyUp(s)}),n.on("keydown",function(s){return n.handleKeyPress(s)}),n.on("mouseover",function(s){return n.handleMouseOver(s)}),n.on("mouseout",function(s){return n.handleMouseOut(s)}),n.on(n.volumeControl,["slideractive"],n.sliderActive_),n.on(n.volumeControl,["sliderinactive"],n.sliderInactive_),n}var i=t.prototype;return i.sliderActive_=function(){this.addClass("vjs-slider-active")},i.sliderInactive_=function(){this.removeClass("vjs-slider-active")},i.volumePanelState_=function(){this.volumeControl.hasClass("vjs-hidden")&&this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-hidden"),this.volumeControl.hasClass("vjs-hidden")&&!this.muteToggle.hasClass("vjs-hidden")&&this.addClass("vjs-mute-toggle-only")},i.createEl=function(){var e="vjs-volume-panel-horizontal";return this.options_.inline||(e="vjs-volume-panel-vertical"),a.prototype.createEl.call(this,"div",{className:"vjs-volume-panel vjs-control "+e})},i.dispose=function(){this.handleMouseOut(),a.prototype.dispose.call(this)},i.handleVolumeControlKeyUp=function(e){et.isEventKey(e,"Esc")&&this.muteToggle.focus()},i.handleMouseOver=function(e){this.addClass("vjs-hover"),Ur(Se,"keyup",this.handleKeyPressHandler_)},i.handleMouseOut=function(e){this.removeClass("vjs-hover"),Fi(Se,"keyup",this.handleKeyPressHandler_)},i.handleKeyPress=function(e){et.isEventKey(e,"Esc")&&this.handleMouseOut()},t}(Te);BE.prototype.options_={children:["muteToggle","volumeControl"]};Te.registerComponent("VolumePanel",BE);var jE=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,e&&(n.menuButton_=e.menuButton),n.focusedChild_=-1,n.on("keydown",function(s){return n.handleKeyDown(s)}),n.boundHandleBlur_=function(s){return n.handleBlur(s)},n.boundHandleTapClick_=function(s){return n.handleTapClick(s)},n}var i=t.prototype;return i.addEventListenerForItem=function(e){e instanceof Te&&(this.on(e,"blur",this.boundHandleBlur_),this.on(e,["tap","click"],this.boundHandleTapClick_))},i.removeEventListenerForItem=function(e){e instanceof Te&&(this.off(e,"blur",this.boundHandleBlur_),this.off(e,["tap","click"],this.boundHandleTapClick_))},i.removeChild=function(e){typeof e=="string"&&(e=this.getChild(e)),this.removeEventListenerForItem(e),a.prototype.removeChild.call(this,e)},i.addItem=function(e){var n=this.addChild(e);n&&this.addEventListenerForItem(n)},i.createEl=function(){var e=this.options_.contentElType||"ul";this.contentEl_=xt(e,{className:"vjs-menu-content"}),this.contentEl_.setAttribute("role","menu");var n=a.prototype.createEl.call(this,"div",{append:this.contentEl_,className:"vjs-menu"});return n.appendChild(this.contentEl_),Ur(n,"click",function(s){s.preventDefault(),s.stopImmediatePropagation()}),n},i.dispose=function(){this.contentEl_=null,this.boundHandleBlur_=null,this.boundHandleTapClick_=null,a.prototype.dispose.call(this)},i.handleBlur=function(e){var n=e.relatedTarget||Se.activeElement;if(!this.children().some(function(o){return o.el()===n})){var s=this.menuButton_;s&&s.buttonPressed_&&n!==s.el().firstChild&&s.unpressButton()}},i.handleTapClick=function(e){if(this.menuButton_){this.menuButton_.unpressButton();var n=this.children();if(!Array.isArray(n))return;var s=n.filter(function(o){return o.el()===e.target})[0];if(!s)return;s.name()!=="CaptionSettingsMenuItem"&&this.menuButton_.focus()}},i.handleKeyDown=function(e){et.isEventKey(e,"Left")||et.isEventKey(e,"Down")?(e.preventDefault(),e.stopPropagation(),this.stepForward()):(et.isEventKey(e,"Right")||et.isEventKey(e,"Up"))&&(e.preventDefault(),e.stopPropagation(),this.stepBack())},i.stepForward=function(){var e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_+1),this.focus(e)},i.stepBack=function(){var e=0;this.focusedChild_!==void 0&&(e=this.focusedChild_-1),this.focus(e)},i.focus=function(e){e===void 0&&(e=0);var n=this.children().slice(),s=n.length&&n[0].hasClass("vjs-menu-title");s&&n.shift(),n.length>0&&(e<0?e=0:e>=n.length&&(e=n.length-1),this.focusedChild_=e,n[e].el_.focus())},t}(Te);Te.registerComponent("Menu",jE);var zv=function(a){Ae(t,a);function t(r,e){var n;e===void 0&&(e={}),n=a.call(this,r,e)||this,n.menuButton_=new In(r,e),n.menuButton_.controlText(n.controlText_),n.menuButton_.el_.setAttribute("aria-haspopup","true");var s=In.prototype.buildCSSClass();n.menuButton_.el_.className=n.buildCSSClass()+" "+s,n.menuButton_.removeClass("vjs-control"),n.addChild(n.menuButton_),n.update(),n.enabled_=!0;var o=function(f){return n.handleClick(f)};return n.handleMenuKeyUp_=function(l){return n.handleMenuKeyUp(l)},n.on(n.menuButton_,"tap",o),n.on(n.menuButton_,"click",o),n.on(n.menuButton_,"keydown",function(l){return n.handleKeyDown(l)}),n.on(n.menuButton_,"mouseenter",function(){n.addClass("vjs-hover"),n.menu.show(),Ur(Se,"keyup",n.handleMenuKeyUp_)}),n.on("mouseleave",function(l){return n.handleMouseLeave(l)}),n.on("keydown",function(l){return n.handleSubmenuKeyDown(l)}),n}var i=t.prototype;return i.update=function(){var e=this.createMenu();this.menu&&(this.menu.dispose(),this.removeChild(this.menu)),this.menu=e,this.addChild(e),this.buttonPressed_=!1,this.menuButton_.el_.setAttribute("aria-expanded","false"),this.items&&this.items.length<=this.hideThreshold_?(this.hide(),this.menu.contentEl_.removeAttribute("role")):(this.show(),this.menu.contentEl_.setAttribute("role","menu"))},i.createMenu=function(){var e=new jE(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var n=xt("li",{className:"vjs-menu-title",textContent:Zt(this.options_.title),tabIndex:-1}),s=new Te(this.player_,{el:n});e.addItem(s)}if(this.items=this.createItems(),this.items)for(var o=0;o<this.items.length;o++)e.addItem(this.items[o]);return e},i.createItems=function(){},i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildWrapperCSSClass()},{})},i.buildWrapperCSSClass=function(){var e="vjs-menu-button";this.options_.inline===!0?e+="-inline":e+="-popup";var n=In.prototype.buildCSSClass();return"vjs-menu-button "+e+" "+n+" "+a.prototype.buildCSSClass.call(this)},i.buildCSSClass=function(){var e="vjs-menu-button";return this.options_.inline===!0?e+="-inline":e+="-popup","vjs-menu-button "+e+" "+a.prototype.buildCSSClass.call(this)},i.controlText=function(e,n){return n===void 0&&(n=this.menuButton_.el()),this.menuButton_.controlText(e,n)},i.dispose=function(){this.handleMouseLeave(),a.prototype.dispose.call(this)},i.handleClick=function(e){this.buttonPressed_?this.unpressButton():this.pressButton()},i.handleMouseLeave=function(e){this.removeClass("vjs-hover"),Fi(Se,"keyup",this.handleMenuKeyUp_)},i.focus=function(){this.menuButton_.focus()},i.blur=function(){this.menuButton_.blur()},i.handleKeyDown=function(e){et.isEventKey(e,"Esc")||et.isEventKey(e,"Tab")?(this.buttonPressed_&&this.unpressButton(),et.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus())):(et.isEventKey(e,"Up")||et.isEventKey(e,"Down"))&&(this.buttonPressed_||(e.preventDefault(),this.pressButton()))},i.handleMenuKeyUp=function(e){(et.isEventKey(e,"Esc")||et.isEventKey(e,"Tab"))&&this.removeClass("vjs-hover")},i.handleSubmenuKeyPress=function(e){this.handleSubmenuKeyDown(e)},i.handleSubmenuKeyDown=function(e){(et.isEventKey(e,"Esc")||et.isEventKey(e,"Tab"))&&(this.buttonPressed_&&this.unpressButton(),et.isEventKey(e,"Tab")||(e.preventDefault(),this.menuButton_.focus()))},i.pressButton=function(){if(this.enabled_){if(this.buttonPressed_=!0,this.menu.show(),this.menu.lockShowing(),this.menuButton_.el_.setAttribute("aria-expanded","true"),er&&tE())return;this.menu.focus()}},i.unpressButton=function(){this.enabled_&&(this.buttonPressed_=!1,this.menu.unlockShowing(),this.menu.hide(),this.menuButton_.el_.setAttribute("aria-expanded","false"))},i.disable=function(){this.unpressButton(),this.enabled_=!1,this.addClass("vjs-disabled"),this.menuButton_.disable()},i.enable=function(){this.enabled_=!0,this.removeClass("vjs-disabled"),this.menuButton_.enable()},t}(Te);Te.registerComponent("MenuButton",zv);var Kv=function(a){Ae(t,a);function t(i,r){var e,n=r.tracks;if(e=a.call(this,i,r)||this,e.items.length<=1&&e.hide(),!n)return Ue(e);var s=Nt(Ue(e),e.update);return n.addEventListener("removetrack",s),n.addEventListener("addtrack",s),n.addEventListener("labelchange",s),e.player_.on("ready",s),e.player_.on("dispose",function(){n.removeEventListener("removetrack",s),n.removeEventListener("addtrack",s),n.removeEventListener("labelchange",s)}),e}return t}(zv);Te.registerComponent("TrackButton",Kv);var vB=["Tab","Esc","Up","Down","Right","Left"],pf=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.selectable=e.selectable,n.isSelected_=e.selected||!1,n.multiSelectable=e.multiSelectable,n.selected(n.isSelected_),n.selectable?n.multiSelectable?n.el_.setAttribute("role","menuitemcheckbox"):n.el_.setAttribute("role","menuitemradio"):n.el_.setAttribute("role","menuitem"),n}var i=t.prototype;return i.createEl=function(e,n,s){this.nonIconControl=!0;var o=a.prototype.createEl.call(this,"li",Wt({className:"vjs-menu-item",tabIndex:-1},n),s);return o.replaceChild(xt("span",{className:"vjs-menu-item-text",textContent:this.localize(this.options_.label)}),o.querySelector(".vjs-icon-placeholder")),o},i.handleKeyDown=function(e){vB.some(function(n){return et.isEventKey(e,n)})||a.prototype.handleKeyDown.call(this,e)},i.handleClick=function(e){this.selected(!0)},i.selected=function(e){this.selectable&&(e?(this.addClass("vjs-selected"),this.el_.setAttribute("aria-checked","true"),this.controlText(", selected"),this.isSelected_=!0):(this.removeClass("vjs-selected"),this.el_.setAttribute("aria-checked","false"),this.controlText(""),this.isSelected_=!1))},t}(Xh);Te.registerComponent("MenuItem",pf);var mf=function(a){Ae(t,a);function t(r,e){var n,s=e.track,o=r.textTracks();e.label=s.label||s.language||"Unknown",e.selected=s.mode==="showing",n=a.call(this,r,e)||this,n.track=s,n.kinds=(e.kinds||[e.kind||n.track.kind]).filter(Boolean);var l=function(){for(var y=arguments.length,E=new Array(y),I=0;I<y;I++)E[I]=arguments[I];n.handleTracksChange.apply(Ue(n),E)},f=function(){for(var y=arguments.length,E=new Array(y),I=0;I<y;I++)E[I]=arguments[I];n.handleSelectedLanguageChange.apply(Ue(n),E)};if(r.on(["loadstart","texttrackchange"],l),o.addEventListener("change",l),o.addEventListener("selectedlanguagechange",f),n.on("dispose",function(){r.off(["loadstart","texttrackchange"],l),o.removeEventListener("change",l),o.removeEventListener("selectedlanguagechange",f)}),o.onchange===void 0){var m;n.on(["tap","click"],function(){if(typeof F.Event!="object")try{m=new F.Event("change")}catch{}m||(m=Se.createEvent("Event"),m.initEvent("change",!0,!0)),o.dispatchEvent(m)})}return n.handleTracksChange(),n}var i=t.prototype;return i.handleClick=function(e){var n=this.track,s=this.player_.textTracks();if(a.prototype.handleClick.call(this,e),!!s)for(var o=0;o<s.length;o++){var l=s[o];this.kinds.indexOf(l.kind)!==-1&&(l===n?l.mode!=="showing"&&(l.mode="showing"):l.mode!=="disabled"&&(l.mode="disabled"))}},i.handleTracksChange=function(e){var n=this.track.mode==="showing";n!==this.isSelected_&&this.selected(n)},i.handleSelectedLanguageChange=function(e){if(this.track.mode==="showing"){var n=this.player_.cache_.selectedLanguage;if(n&&n.enabled&&n.language===this.track.language&&n.kind!==this.track.kind)return;this.player_.cache_.selectedLanguage={enabled:!0,language:this.track.language,kind:this.track.kind}}},i.dispose=function(){this.track=null,a.prototype.dispose.call(this)},t}(pf);Te.registerComponent("TextTrackMenuItem",mf);var VE=function(a){Ae(t,a);function t(r,e){return e.track={player:r,kind:e.kind,kinds:e.kinds,default:!1,mode:"disabled"},e.kinds||(e.kinds=[e.kind]),e.label?e.track.label=e.label:e.track.label=e.kinds.join(" and ")+" off",e.selectable=!0,e.multiSelectable=!1,a.call(this,r,e)||this}var i=t.prototype;return i.handleTracksChange=function(e){for(var n=this.player().textTracks(),s=!0,o=0,l=n.length;o<l;o++){var f=n[o];if(this.options_.kinds.indexOf(f.kind)>-1&&f.mode==="showing"){s=!1;break}}s!==this.isSelected_&&this.selected(s)},i.handleSelectedLanguageChange=function(e){for(var n=this.player().textTracks(),s=!0,o=0,l=n.length;o<l;o++){var f=n[o];if(["captions","descriptions","subtitles"].indexOf(f.kind)>-1&&f.mode==="showing"){s=!1;break}}s&&(this.player_.cache_.selectedLanguage={enabled:!1})},t}(mf);Te.registerComponent("OffTextTrackMenuItem",VE);var sl=function(a){Ae(t,a);function t(r,e){return e===void 0&&(e={}),e.tracks=r.textTracks(),a.call(this,r,e)||this}var i=t.prototype;return i.createItems=function(e,n){e===void 0&&(e=[]),n===void 0&&(n=mf);var s;this.label_&&(s=this.label_+" off"),e.push(new VE(this.player_,{kinds:this.kinds_,kind:this.kind_,label:s})),this.hideThreshold_+=1;var o=this.player_.textTracks();Array.isArray(this.kinds_)||(this.kinds_=[this.kind_]);for(var l=0;l<o.length;l++){var f=o[l];if(this.kinds_.indexOf(f.kind)>-1){var m=new n(this.player_,{track:f,kinds:this.kinds_,kind:this.kind_,selectable:!0,multiSelectable:!1});m.addClass("vjs-"+f.kind+"-menu-item"),e.push(m)}}return e},t}(Kv);Te.registerComponent("TextTrackButton",sl);var HE=function(a){Ae(t,a);function t(r,e){var n,s=e.track,o=e.cue,l=r.currentTime();return e.selectable=!0,e.multiSelectable=!1,e.label=o.text,e.selected=o.startTime<=l&&l<o.endTime,n=a.call(this,r,e)||this,n.track=s,n.cue=o,n}var i=t.prototype;return i.handleClick=function(e){a.prototype.handleClick.call(this),this.player_.currentTime(this.cue.startTime)},t}(pf);Te.registerComponent("ChaptersTrackMenuItem",HE);var Xv=function(a){Ae(t,a);function t(r,e,n){var s;return s=a.call(this,r,e,n)||this,s.selectCurrentItem_=function(){s.items.forEach(function(o){o.selected(s.track_.activeCues[0]===o.cue)})},s}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-chapters-button "+a.prototype.buildWrapperCSSClass.call(this)},i.update=function(e){if(!(e&&e.track&&e.track.kind!=="chapters")){var n=this.findChaptersTrack();n!==this.track_?(this.setTrack(n),a.prototype.update.call(this)):(!this.items||n&&n.cues&&n.cues.length!==this.items.length)&&a.prototype.update.call(this)}},i.setTrack=function(e){if(this.track_!==e){if(this.updateHandler_||(this.updateHandler_=this.update.bind(this)),this.track_){var n=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);n&&n.removeEventListener("load",this.updateHandler_),this.track_.removeEventListener("cuechange",this.selectCurrentItem_),this.track_=null}if(this.track_=e,this.track_){this.track_.mode="hidden";var s=this.player_.remoteTextTrackEls().getTrackElementByTrack_(this.track_);s&&s.addEventListener("load",this.updateHandler_),this.track_.addEventListener("cuechange",this.selectCurrentItem_)}}},i.findChaptersTrack=function(){for(var e=this.player_.textTracks()||[],n=e.length-1;n>=0;n--){var s=e[n];if(s.kind===this.kind_)return s}},i.getMenuCaption=function(){return this.track_&&this.track_.label?this.track_.label:this.localize(Zt(this.kind_))},i.createMenu=function(){return this.options_.title=this.getMenuCaption(),a.prototype.createMenu.call(this)},i.createItems=function(){var e=[];if(!this.track_)return e;var n=this.track_.cues;if(!n)return e;for(var s=0,o=n.length;s<o;s++){var l=n[s],f=new HE(this.player_,{track:this.track_,cue:l});e.push(f)}return e},t}(sl);Xv.prototype.kind_="chapters";Xv.prototype.controlText_="Chapters";Te.registerComponent("ChaptersButton",Xv);var Qv=function(a){Ae(t,a);function t(r,e,n){var s;s=a.call(this,r,e,n)||this;var o=r.textTracks(),l=Nt(Ue(s),s.handleTracksChange);return o.addEventListener("change",l),s.on("dispose",function(){o.removeEventListener("change",l)}),s}var i=t.prototype;return i.handleTracksChange=function(e){for(var n=this.player().textTracks(),s=!1,o=0,l=n.length;o<l;o++){var f=n[o];if(f.kind!==this.kind_&&f.mode==="showing"){s=!0;break}}s?this.disable():this.enable()},i.buildCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-descriptions-button "+a.prototype.buildWrapperCSSClass.call(this)},t}(sl);Qv.prototype.kind_="descriptions";Qv.prototype.controlText_="Descriptions";Te.registerComponent("DescriptionsButton",Qv);var Yv=function(a){Ae(t,a);function t(r,e,n){return a.call(this,r,e,n)||this}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subtitles-button "+a.prototype.buildWrapperCSSClass.call(this)},t}(sl);Yv.prototype.kind_="subtitles";Yv.prototype.controlText_="Subtitles";Te.registerComponent("SubtitlesButton",Yv);var Jv=function(a){Ae(t,a);function t(r,e){var n;return e.track={player:r,kind:e.kind,label:e.kind+" settings",selectable:!1,default:!1,mode:"disabled"},e.selectable=!1,e.name="CaptionSettingsMenuItem",n=a.call(this,r,e)||this,n.addClass("vjs-texttrack-settings"),n.controlText(", opens "+e.kind+" settings dialog"),n}var i=t.prototype;return i.handleClick=function(e){this.player().getChild("textTrackSettings").open()},t}(mf);Te.registerComponent("CaptionSettingsMenuItem",Jv);var Zv=function(a){Ae(t,a);function t(r,e,n){return a.call(this,r,e,n)||this}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-captions-button "+a.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-captions-button "+a.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new Jv(this.player_,{kind:this.kind_})),this.hideThreshold_+=1),a.prototype.createItems.call(this,e)},t}(sl);Zv.prototype.kind_="captions";Zv.prototype.controlText_="Captions";Te.registerComponent("CaptionsButton",Zv);var $E=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.createEl=function(e,n,s){var o=a.prototype.createEl.call(this,e,n,s),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="captions"&&(l.appendChild(xt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(xt("span",{className:"vjs-control-text",textContent:" "+this.localize("Captions")}))),o},t}(mf);Te.registerComponent("SubsCapsMenuItem",$E);var e0=function(a){Ae(t,a);function t(r,e){var n;return e===void 0&&(e={}),n=a.call(this,r,e)||this,n.label_="subtitles",["en","en-us","en-ca","fr-ca"].indexOf(n.player_.language_)>-1&&(n.label_="captions"),n.menuButton_.controlText(Zt(n.label_)),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-subs-caps-button "+a.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){var e=[];return!(this.player().tech_&&this.player().tech_.featuresNativeTextTracks)&&this.player().getChild("textTrackSettings")&&(e.push(new Jv(this.player_,{kind:this.label_})),this.hideThreshold_+=1),e=a.prototype.createItems.call(this,e,$E),e},t}(sl);e0.prototype.kinds_=["captions","subtitles"];e0.prototype.controlText_="Subtitles";Te.registerComponent("SubsCapsButton",e0);var WE=function(a){Ae(t,a);function t(r,e){var n,s=e.track,o=r.audioTracks();e.label=s.label||s.language||"Unknown",e.selected=s.enabled,n=a.call(this,r,e)||this,n.track=s,n.addClass("vjs-"+s.kind+"-menu-item");var l=function(){for(var m=arguments.length,v=new Array(m),y=0;y<m;y++)v[y]=arguments[y];n.handleTracksChange.apply(Ue(n),v)};return o.addEventListener("change",l),n.on("dispose",function(){o.removeEventListener("change",l)}),n}var i=t.prototype;return i.createEl=function(e,n,s){var o=a.prototype.createEl.call(this,e,n,s),l=o.querySelector(".vjs-menu-item-text");return this.options_.track.kind==="main-desc"&&(l.appendChild(xt("span",{className:"vjs-icon-placeholder"},{"aria-hidden":!0})),l.appendChild(xt("span",{className:"vjs-control-text",textContent:" "+this.localize("Descriptions")}))),o},i.handleClick=function(e){if(a.prototype.handleClick.call(this,e),this.track.enabled=!0,this.player_.tech_.featuresNativeAudioTracks)for(var n=this.player_.audioTracks(),s=0;s<n.length;s++){var o=n[s];o!==this.track&&(o.enabled=o===this.track)}},i.handleTracksChange=function(e){this.selected(this.track.enabled)},t}(pf);Te.registerComponent("AudioTrackMenuItem",WE);var qE=function(a){Ae(t,a);function t(r,e){return e===void 0&&(e={}),e.tracks=r.audioTracks(),a.call(this,r,e)||this}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-audio-button "+a.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-audio-button "+a.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(e){e===void 0&&(e=[]),this.hideThreshold_=1;for(var n=this.player_.audioTracks(),s=0;s<n.length;s++){var o=n[s];e.push(new WE(this.player_,{track:o,selectable:!0,multiSelectable:!1}))}return e},t}(Kv);qE.prototype.controlText_="Audio Track";Te.registerComponent("AudioTrackButton",qE);var t0=function(a){Ae(t,a);function t(r,e){var n,s=e.rate,o=parseFloat(s,10);return e.label=s,e.selected=o===r.playbackRate(),e.selectable=!0,e.multiSelectable=!1,n=a.call(this,r,e)||this,n.label=s,n.rate=o,n.on(r,"ratechange",function(l){return n.update(l)}),n}var i=t.prototype;return i.handleClick=function(e){a.prototype.handleClick.call(this),this.player().playbackRate(this.rate)},i.update=function(e){this.selected(this.player().playbackRate()===this.rate)},t}(pf);t0.prototype.contentElType="button";Te.registerComponent("PlaybackRateMenuItem",t0);var GE=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.menuButton_.el_.setAttribute("aria-describedby",n.labelElId_),n.updateVisibility(),n.updateLabel(),n.on(r,"loadstart",function(s){return n.updateVisibility(s)}),n.on(r,"ratechange",function(s){return n.updateLabel(s)}),n.on(r,"playbackrateschange",function(s){return n.handlePlaybackRateschange(s)}),n}var i=t.prototype;return i.createEl=function(){var e=a.prototype.createEl.call(this);return this.labelElId_="vjs-playback-rate-value-label-"+this.id_,this.labelEl_=xt("div",{className:"vjs-playback-rate-value",id:this.labelElId_,textContent:"1x"}),e.appendChild(this.labelEl_),e},i.dispose=function(){this.labelEl_=null,a.prototype.dispose.call(this)},i.buildCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildCSSClass.call(this)},i.buildWrapperCSSClass=function(){return"vjs-playback-rate "+a.prototype.buildWrapperCSSClass.call(this)},i.createItems=function(){for(var e=this.playbackRates(),n=[],s=e.length-1;s>=0;s--)n.push(new t0(this.player(),{rate:e[s]+"x"}));return n},i.updateARIAAttributes=function(){this.el().setAttribute("aria-valuenow",this.player().playbackRate())},i.handleClick=function(e){var n=this.player().playbackRate(),s=this.playbackRates(),o=s.indexOf(n),l=(o+1)%s.length;this.player().playbackRate(s[l])},i.handlePlaybackRateschange=function(e){this.update()},i.playbackRates=function(){var e=this.player();return e.playbackRates&&e.playbackRates()||[]},i.playbackRateSupported=function(){return this.player().tech_&&this.player().tech_.featuresPlaybackRate&&this.playbackRates()&&this.playbackRates().length>0},i.updateVisibility=function(e){this.playbackRateSupported()?this.removeClass("vjs-hidden"):this.addClass("vjs-hidden")},i.updateLabel=function(e){this.playbackRateSupported()&&(this.labelEl_.textContent=this.player().playbackRate()+"x")},t}(zv);GE.prototype.controlText_="Playback Rate";Te.registerComponent("PlaybackRateMenuButton",GE);var zE=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-spacer "+a.prototype.buildCSSClass.call(this)},i.createEl=function(e,n,s){return e===void 0&&(e="div"),n===void 0&&(n={}),s===void 0&&(s={}),n.className||(n.className=this.buildCSSClass()),a.prototype.createEl.call(this,e,n,s)},t}(Te);Te.registerComponent("Spacer",zE);var _B=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-custom-control-spacer "+a.prototype.buildCSSClass.call(this)},i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:this.buildCSSClass(),textContent:""})},t}(zE);Te.registerComponent("CustomControlSpacer",_B);var Qc=function(a){Ae(t,a);function t(){return a.apply(this,arguments)||this}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"div",{className:"vjs-control-bar",dir:"ltr"})},t}(Te);Qc.prototype.options_={children:["playToggle","volumePanel","currentTimeDisplay","timeDivider","durationDisplay","progressControl","liveDisplay","seekToLive","remainingTimeDisplay","customControlSpacer","playbackRateMenuButton","chaptersButton","descriptionsButton","subsCapsButton","audioTrackButton","fullscreenToggle"]};"exitPictureInPicture"in Se&&Qc.prototype.options_.children.splice(Qc.prototype.options_.children.length-1,0,"pictureInPictureToggle");Te.registerComponent("ControlBar",Qc);var KE=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r,e)||this,n.on(r,"error",function(s){return n.open(s)}),n}var i=t.prototype;return i.buildCSSClass=function(){return"vjs-error-display "+a.prototype.buildCSSClass.call(this)},i.content=function(){var e=this.player().error();return e?this.localize(e.message):""},t}(rl);KE.prototype.options_=Ni({},rl.prototype.options_,{pauseOnOpen:!1,fillAlways:!0,temporary:!1,uncloseable:!0});Te.registerComponent("ErrorDisplay",KE);var pm="vjs-text-track-settings",jT=["#000","Black"],VT=["#00F","Blue"],HT=["#0FF","Cyan"],$T=["#0F0","Green"],WT=["#F0F","Magenta"],qT=["#F00","Red"],GT=["#FFF","White"],zT=["#FF0","Yellow"],mm=["1","Opaque"],gm=["0.5","Semi-Transparent"],KT=["0","Transparent"],lo={backgroundColor:{selector:".vjs-bg-color > select",id:"captions-background-color-%s",label:"Color",options:[jT,GT,qT,$T,VT,zT,WT,HT]},backgroundOpacity:{selector:".vjs-bg-opacity > select",id:"captions-background-opacity-%s",label:"Transparency",options:[mm,gm,KT]},color:{selector:".vjs-fg-color > select",id:"captions-foreground-color-%s",label:"Color",options:[GT,jT,qT,$T,VT,zT,WT,HT]},edgeStyle:{selector:".vjs-edge-style > select",id:"%s",label:"Text Edge Style",options:[["none","None"],["raised","Raised"],["depressed","Depressed"],["uniform","Uniform"],["dropshadow","Dropshadow"]]},fontFamily:{selector:".vjs-font-family > select",id:"captions-font-family-%s",label:"Font Family",options:[["proportionalSansSerif","Proportional Sans-Serif"],["monospaceSansSerif","Monospace Sans-Serif"],["proportionalSerif","Proportional Serif"],["monospaceSerif","Monospace Serif"],["casual","Casual"],["script","Script"],["small-caps","Small Caps"]]},fontPercent:{selector:".vjs-font-percent > select",id:"captions-font-size-%s",label:"Font Size",options:[["0.50","50%"],["0.75","75%"],["1.00","100%"],["1.25","125%"],["1.50","150%"],["1.75","175%"],["2.00","200%"],["3.00","300%"],["4.00","400%"]],default:2,parser:function(t){return t==="1.00"?null:Number(t)}},textOpacity:{selector:".vjs-text-opacity > select",id:"captions-foreground-opacity-%s",label:"Transparency",options:[mm,gm]},windowColor:{selector:".vjs-window-color > select",id:"captions-window-color-%s",label:"Color"},windowOpacity:{selector:".vjs-window-opacity > select",id:"captions-window-opacity-%s",label:"Transparency",options:[KT,gm,mm]}};lo.windowColor.options=lo.backgroundColor.options;function XE(a,t){if(t&&(a=t(a)),a&&a!=="none")return a}function yB(a,t){var i=a.options[a.options.selectedIndex].value;return XE(i,t)}function TB(a,t,i){if(t){for(var r=0;r<a.options.length;r++)if(XE(a.options[r].value,i)===t){a.selectedIndex=r;break}}}var bB=function(a){Ae(t,a);function t(r,e){var n;return e.temporary=!1,n=a.call(this,r,e)||this,n.updateDisplay=n.updateDisplay.bind(Ue(n)),n.fill(),n.hasBeenOpened_=n.hasBeenFilled_=!0,n.endDialog=xt("p",{className:"vjs-control-text",textContent:n.localize("End of dialog window.")}),n.el().appendChild(n.endDialog),n.setDefaults(),e.persistTextTrackSettings===void 0&&(n.options_.persistTextTrackSettings=n.options_.playerOptions.persistTextTrackSettings),n.on(n.$(".vjs-done-button"),"click",function(){n.saveSettings(),n.close()}),n.on(n.$(".vjs-default-button"),"click",function(){n.setDefaults(),n.updateDisplay()}),ku(lo,function(s){n.on(n.$(s.selector),"change",n.updateDisplay)}),n.options_.persistTextTrackSettings&&n.restoreSettings(),n}var i=t.prototype;return i.dispose=function(){this.endDialog=null,a.prototype.dispose.call(this)},i.createElSelect_=function(e,n,s){var o=this;n===void 0&&(n=""),s===void 0&&(s="label");var l=lo[e],f=l.id.replace("%s",this.id_),m=[n,f].join(" ").trim();return["<"+s+' id="'+f+'" class="'+(s==="label"?"vjs-label":"")+'">',this.localize(l.label),"</"+s+">",'<select aria-labelledby="'+m+'">'].concat(l.options.map(function(v){var y=f+"-"+v[1].replace(/\W+/g,"");return['<option id="'+y+'" value="'+v[0]+'" ','aria-labelledby="'+m+" "+y+'">',o.localize(v[1]),"</option>"].join("")})).concat("</select>").join("")},i.createElFgColor_=function(){var e="captions-text-legend-"+this.id_;return['<fieldset class="vjs-fg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Text"),"</legend>",this.createElSelect_("color",e),'<span class="vjs-text-opacity vjs-opacity">',this.createElSelect_("textOpacity",e),"</span>","</fieldset>"].join("")},i.createElBgColor_=function(){var e="captions-background-"+this.id_;return['<fieldset class="vjs-bg-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Background"),"</legend>",this.createElSelect_("backgroundColor",e),'<span class="vjs-bg-opacity vjs-opacity">',this.createElSelect_("backgroundOpacity",e),"</span>","</fieldset>"].join("")},i.createElWinColor_=function(){var e="captions-window-"+this.id_;return['<fieldset class="vjs-window-color vjs-track-setting">','<legend id="'+e+'">',this.localize("Window"),"</legend>",this.createElSelect_("windowColor",e),'<span class="vjs-window-opacity vjs-opacity">',this.createElSelect_("windowOpacity",e),"</span>","</fieldset>"].join("")},i.createElColors_=function(){return xt("div",{className:"vjs-track-settings-colors",innerHTML:[this.createElFgColor_(),this.createElBgColor_(),this.createElWinColor_()].join("")})},i.createElFont_=function(){return xt("div",{className:"vjs-track-settings-font",innerHTML:['<fieldset class="vjs-font-percent vjs-track-setting">',this.createElSelect_("fontPercent","","legend"),"</fieldset>",'<fieldset class="vjs-edge-style vjs-track-setting">',this.createElSelect_("edgeStyle","","legend"),"</fieldset>",'<fieldset class="vjs-font-family vjs-track-setting">',this.createElSelect_("fontFamily","","legend"),"</fieldset>"].join("")})},i.createElControls_=function(){var e=this.localize("restore all settings to the default values");return xt("div",{className:"vjs-track-settings-controls",innerHTML:['<button type="button" class="vjs-default-button" title="'+e+'">',this.localize("Reset"),'<span class="vjs-control-text"> '+e+"</span>","</button>",'<button type="button" class="vjs-done-button">'+this.localize("Done")+"</button>"].join("")})},i.content=function(){return[this.createElColors_(),this.createElFont_(),this.createElControls_()]},i.label=function(){return this.localize("Caption Settings Dialog")},i.description=function(){return this.localize("Beginning of dialog window. Escape will cancel and close the window.")},i.buildCSSClass=function(){return a.prototype.buildCSSClass.call(this)+" vjs-text-track-settings"},i.getValues=function(){var e=this;return lU(lo,function(n,s,o){var l=yB(e.$(s.selector),s.parser);return l!==void 0&&(n[o]=l),n},{})},i.setValues=function(e){var n=this;ku(lo,function(s,o){TB(n.$(s.selector),e[o],s.parser)})},i.setDefaults=function(){var e=this;ku(lo,function(n){var s=n.hasOwnProperty("default")?n.default:0;e.$(n.selector).selectedIndex=s})},i.restoreSettings=function(){var e;try{e=JSON.parse(F.localStorage.getItem(pm))}catch(n){lt.warn(n)}e&&this.setValues(e)},i.saveSettings=function(){if(this.options_.persistTextTrackSettings){var e=this.getValues();try{Object.keys(e).length?F.localStorage.setItem(pm,JSON.stringify(e)):F.localStorage.removeItem(pm)}catch(n){lt.warn(n)}}},i.updateDisplay=function(){var e=this.player_.getChild("textTrackDisplay");e&&e.updateDisplay()},i.conditionalBlur_=function(){this.previouslyActiveEl_=null;var e=this.player_.controlBar,n=e&&e.subsCapsButton,s=e&&e.captionsButton;n?n.focus():s&&s.focus()},t}(rl);Te.registerComponent("TextTrackSettings",bB);var xB=function(a){Ae(t,a);function t(r,e){var n,s=e.ResizeObserver||F.ResizeObserver;e.ResizeObserver===null&&(s=!1);var o=Ft({createEl:!s,reportTouchActivity:!1},e);return n=a.call(this,r,o)||this,n.ResizeObserver=e.ResizeObserver||F.ResizeObserver,n.loadListener_=null,n.resizeObserver_=null,n.debouncedHandler_=TU(function(){n.resizeHandler()},100,!1,Ue(n)),s?(n.resizeObserver_=new n.ResizeObserver(n.debouncedHandler_),n.resizeObserver_.observe(r.el())):(n.loadListener_=function(){if(!(!n.el_||!n.el_.contentWindow)){var l=n.debouncedHandler_,f=n.unloadListener_=function(){Fi(this,"resize",l),Fi(this,"unload",f),f=null};Ur(n.el_.contentWindow,"unload",f),Ur(n.el_.contentWindow,"resize",l)}},n.one("load",n.loadListener_)),n}var i=t.prototype;return i.createEl=function(){return a.prototype.createEl.call(this,"iframe",{className:"vjs-resize-manager",tabIndex:-1,title:this.localize("No content")},{"aria-hidden":"true"})},i.resizeHandler=function(){!this.player_||!this.player_.trigger||this.player_.trigger("playerresize")},i.dispose=function(){this.debouncedHandler_&&this.debouncedHandler_.cancel(),this.resizeObserver_&&(this.player_.el()&&this.resizeObserver_.unobserve(this.player_.el()),this.resizeObserver_.disconnect()),this.loadListener_&&this.off("load",this.loadListener_),this.el_&&this.el_.contentWindow&&this.unloadListener_&&this.unloadListener_.call(this.el_.contentWindow),this.ResizeObserver=null,this.resizeObserver=null,this.debouncedHandler_=null,this.loadListener_=null,a.prototype.dispose.call(this)},t}(Te);Te.registerComponent("ResizeManager",xB);var SB={trackingThreshold:20,liveTolerance:15},EB=function(a){Ae(t,a);function t(r,e){var n,s=Ft(SB,e,{createEl:!1});return n=a.call(this,r,s)||this,n.handleVisibilityChange_=function(o){return n.handleVisibilityChange(o)},n.trackLiveHandler_=function(){return n.trackLive_()},n.handlePlay_=function(o){return n.handlePlay(o)},n.handleFirstTimeupdate_=function(o){return n.handleFirstTimeupdate(o)},n.handleSeeked_=function(o){return n.handleSeeked(o)},n.seekToLiveEdge_=function(o){return n.seekToLiveEdge(o)},n.reset_(),n.on(n.player_,"durationchange",function(o){return n.handleDurationchange(o)}),n.on(n.player_,"canplay",function(){return n.toggleTracking()}),ff&&"hidden"in Se&&"visibilityState"in Se&&n.on(Se,"visibilitychange",n.handleVisibilityChange_),n}var i=t.prototype;return i.handleVisibilityChange=function(){this.player_.duration()===1/0&&(Se.hidden?this.stopTracking():this.startTracking())},i.trackLive_=function(){var e=this.player_.seekable();if(!(!e||!e.length)){var n=Number(F.performance.now().toFixed(4)),s=this.lastTime_===-1?0:(n-this.lastTime_)/1e3;this.lastTime_=n,this.pastSeekEnd_=this.pastSeekEnd()+s;var o=this.liveCurrentTime(),l=this.player_.currentTime(),f=this.player_.paused()||this.seekedBehindLive_||Math.abs(o-l)>this.options_.liveTolerance;(!this.timeupdateSeen_||o===1/0)&&(f=!1),f!==this.behindLiveEdge_&&(this.behindLiveEdge_=f,this.trigger("liveedgechange"))}},i.handleDurationchange=function(){this.toggleTracking()},i.toggleTracking=function(){this.player_.duration()===1/0&&this.liveWindow()>=this.options_.trackingThreshold?(this.player_.options_.liveui&&this.player_.addClass("vjs-liveui"),this.startTracking()):(this.player_.removeClass("vjs-liveui"),this.stopTracking())},i.startTracking=function(){this.isTracking()||(this.timeupdateSeen_||(this.timeupdateSeen_=this.player_.hasStarted()),this.trackingInterval_=this.setInterval(this.trackLiveHandler_,Pn),this.trackLive_(),this.on(this.player_,["play","pause"],this.trackLiveHandler_),this.timeupdateSeen_?this.on(this.player_,"seeked",this.handleSeeked_):(this.one(this.player_,"play",this.handlePlay_),this.one(this.player_,"timeupdate",this.handleFirstTimeupdate_)))},i.handleFirstTimeupdate=function(){this.timeupdateSeen_=!0,this.on(this.player_,"seeked",this.handleSeeked_)},i.handleSeeked=function(){var e=Math.abs(this.liveCurrentTime()-this.player_.currentTime());this.seekedBehindLive_=this.nextSeekedFromUser_&&e>2,this.nextSeekedFromUser_=!1,this.trackLive_()},i.handlePlay=function(){this.one(this.player_,"timeupdate",this.seekToLiveEdge_)},i.reset_=function(){this.lastTime_=-1,this.pastSeekEnd_=0,this.lastSeekEnd_=-1,this.behindLiveEdge_=!0,this.timeupdateSeen_=!1,this.seekedBehindLive_=!1,this.nextSeekedFromUser_=!1,this.clearInterval(this.trackingInterval_),this.trackingInterval_=null,this.off(this.player_,["play","pause"],this.trackLiveHandler_),this.off(this.player_,"seeked",this.handleSeeked_),this.off(this.player_,"play",this.handlePlay_),this.off(this.player_,"timeupdate",this.handleFirstTimeupdate_),this.off(this.player_,"timeupdate",this.seekToLiveEdge_)},i.nextSeekedFromUser=function(){this.nextSeekedFromUser_=!0},i.stopTracking=function(){this.isTracking()&&(this.reset_(),this.trigger("liveedgechange"))},i.seekableEnd=function(){for(var e=this.player_.seekable(),n=[],s=e?e.length:0;s--;)n.push(e.end(s));return n.length?n.sort()[n.length-1]:1/0},i.seekableStart=function(){for(var e=this.player_.seekable(),n=[],s=e?e.length:0;s--;)n.push(e.start(s));return n.length?n.sort()[0]:0},i.liveWindow=function(){var e=this.liveCurrentTime();return e===1/0?0:e-this.seekableStart()},i.isLive=function(){return this.isTracking()},i.atLiveEdge=function(){return!this.behindLiveEdge()},i.liveCurrentTime=function(){return this.pastSeekEnd()+this.seekableEnd()},i.pastSeekEnd=function(){var e=this.seekableEnd();return this.lastSeekEnd_!==-1&&e!==this.lastSeekEnd_&&(this.pastSeekEnd_=0),this.lastSeekEnd_=e,this.pastSeekEnd_},i.behindLiveEdge=function(){return this.behindLiveEdge_},i.isTracking=function(){return typeof this.trackingInterval_=="number"},i.seekToLiveEdge=function(){this.seekedBehindLive_=!1,!this.atLiveEdge()&&(this.nextSeekedFromUser_=!1,this.player_.currentTime(this.liveCurrentTime()))},i.dispose=function(){this.off(Se,"visibilitychange",this.handleVisibilityChange_),this.stopTracking(),a.prototype.dispose.call(this)},t}(Te);Te.registerComponent("LiveTracker",EB);var ug=function(t){var i=t.el();if(i.hasAttribute("src"))return t.triggerSourceset(i.src),!0;var r=t.$$("source"),e=[],n="";if(!r.length)return!1;for(var s=0;s<r.length;s++){var o=r[s].src;o&&e.indexOf(o)===-1&&e.push(o)}return e.length?(e.length===1&&(n=e[0]),t.triggerSourceset(n),!0):!1},wB=Object.defineProperty({},"innerHTML",{get:function(){return this.cloneNode(!0).innerHTML},set:function(t){var i=Se.createElement(this.nodeName.toLowerCase());i.innerHTML=t;for(var r=Se.createDocumentFragment();i.childNodes.length;)r.appendChild(i.childNodes[0]);return this.innerText="",F.Element.prototype.appendChild.call(this,r),this.innerHTML}}),QE=function(t,i){for(var r={},e=0;e<t.length&&(r=Object.getOwnPropertyDescriptor(t[e],i),!(r&&r.set&&r.get));e++);return r.enumerable=!0,r.configurable=!0,r},CB=function(t){return QE([t.el(),F.HTMLMediaElement.prototype,F.Element.prototype,wB],"innerHTML")},XT=function(t){var i=t.el();if(!i.resetSourceWatch_){var r={},e=CB(t),n=function(o){return function(){for(var l=arguments.length,f=new Array(l),m=0;m<l;m++)f[m]=arguments[m];var v=o.apply(i,f);return ug(t),v}};["append","appendChild","insertAdjacentHTML"].forEach(function(s){i[s]&&(r[s]=i[s],i[s]=n(r[s]))}),Object.defineProperty(i,"innerHTML",Ft(e,{set:n(e.set)})),i.resetSourceWatch_=function(){i.resetSourceWatch_=null,Object.keys(r).forEach(function(s){i[s]=r[s]}),Object.defineProperty(i,"innerHTML",e)},t.one("sourceset",i.resetSourceWatch_)}},AB=Object.defineProperty({},"src",{get:function(){return this.hasAttribute("src")?SE(F.Element.prototype.getAttribute.call(this,"src")):""},set:function(t){return F.Element.prototype.setAttribute.call(this,"src",t),t}}),IB=function(t){return QE([t.el(),F.HTMLMediaElement.prototype,AB],"src")},PB=function(t){if(t.featuresSourceset){var i=t.el();if(!i.resetSourceset_){var r=IB(t),e=i.setAttribute,n=i.load;Object.defineProperty(i,"src",Ft(r,{set:function(o){var l=r.set.call(i,o);return t.triggerSourceset(i.src),l}})),i.setAttribute=function(s,o){var l=e.call(i,s,o);return/src/i.test(s)&&t.triggerSourceset(i.src),l},i.load=function(){var s=n.call(i);return ug(t)||(t.triggerSourceset(""),XT(t)),s},i.currentSrc?t.triggerSourceset(i.currentSrc):ug(t)||XT(t),i.resetSourceset_=function(){i.resetSourceset_=null,i.load=n,i.setAttribute=e,Object.defineProperty(i,"src",r),i.resetSourceWatch_&&i.resetSourceWatch_()}}}},i0=function(t,i,r,e){e===void 0&&(e=!0);var n=function(l){return Object.defineProperty(t,i,{value:l,enumerable:!0,writable:!0})},s={configurable:!0,enumerable:!0,get:function(){var l=r();return n(l),l}};return e&&(s.set=n),Object.defineProperty(t,i,s)},Le=function(a){Ae(t,a);function t(r,e){var n;n=a.call(this,r,e)||this;var s=r.source,o=!1;if(n.featuresVideoFrameCallback=n.featuresVideoFrameCallback&&n.el_.tagName==="VIDEO",s&&(n.el_.currentSrc!==s.src||r.tag&&r.tag.initNetworkState_===3)?n.setSource(s):n.handleLateInit_(n.el_),r.enableSourceset&&n.setupSourcesetHandling_(),n.isScrubbing_=!1,n.el_.hasChildNodes()){for(var l=n.el_.childNodes,f=l.length,m=[];f--;){var v=l[f],y=v.nodeName.toLowerCase();y==="track"&&(n.featuresNativeTextTracks?(n.remoteTextTrackEls().addTrackElement_(v),n.remoteTextTracks().addTrack(v.track),n.textTracks().addTrack(v.track),!o&&!n.el_.hasAttribute("crossorigin")&&Kh(v.src)&&(o=!0)):m.push(v))}for(var E=0;E<m.length;E++)n.el_.removeChild(m[E])}return n.proxyNativeTracks_(),n.featuresNativeTextTracks&&o&&lt.warn(`Text Tracks are being loaded from another origin but the crossorigin attribute isn't used.
This may prevent text tracks from loading.`),n.restoreMetadataTracksInIOSNativePlayer_(),(qu||Dv||QS)&&r.nativeControlsForTouch===!0&&n.setControls(!0),n.proxyWebkitFullscreen_(),n.triggerReady(),n}var i=t.prototype;return i.dispose=function(){this.el_&&this.el_.resetSourceset_&&this.el_.resetSourceset_(),t.disposeMediaElement(this.el_),this.options_=null,a.prototype.dispose.call(this)},i.setupSourcesetHandling_=function(){PB(this)},i.restoreMetadataTracksInIOSNativePlayer_=function(){var e=this.textTracks(),n,s=function(){n=[];for(var f=0;f<e.length;f++){var m=e[f];m.kind==="metadata"&&n.push({track:m,storedMode:m.mode})}};s(),e.addEventListener("change",s),this.on("dispose",function(){return e.removeEventListener("change",s)});var o=function l(){for(var f=0;f<n.length;f++){var m=n[f];m.track.mode==="disabled"&&m.track.mode!==m.storedMode&&(m.track.mode=m.storedMode)}e.removeEventListener("change",l)};this.on("webkitbeginfullscreen",function(){e.removeEventListener("change",s),e.removeEventListener("change",o),e.addEventListener("change",o)}),this.on("webkitendfullscreen",function(){e.removeEventListener("change",s),e.addEventListener("change",s),e.removeEventListener("change",o)})},i.overrideNative_=function(e,n){var s=this;if(n===this["featuresNative"+e+"Tracks"]){var o=e.toLowerCase();this[o+"TracksListeners_"]&&Object.keys(this[o+"TracksListeners_"]).forEach(function(l){var f=s.el()[o+"Tracks"];f.removeEventListener(l,s[o+"TracksListeners_"][l])}),this["featuresNative"+e+"Tracks"]=!n,this[o+"TracksListeners_"]=null,this.proxyNativeTracksForType_(o)}},i.overrideNativeAudioTracks=function(e){this.overrideNative_("Audio",e)},i.overrideNativeVideoTracks=function(e){this.overrideNative_("Video",e)},i.proxyNativeTracksForType_=function(e){var n=this,s=Zr[e],o=this.el()[s.getterName],l=this[s.getterName]();if(!(!this["featuresNative"+s.capitalName+"Tracks"]||!o||!o.addEventListener)){var f={change:function(y){var E={type:"change",target:l,currentTarget:l,srcElement:l};l.trigger(E),e==="text"&&n[Xu.remoteText.getterName]().trigger(E)},addtrack:function(y){l.addTrack(y.track)},removetrack:function(y){l.removeTrack(y.track)}},m=function(){for(var y=[],E=0;E<l.length;E++){for(var I=!1,O=0;O<o.length;O++)if(o[O]===l[E]){I=!0;break}I||y.push(l[E])}for(;y.length;)l.removeTrack(y.shift())};this[s.getterName+"Listeners_"]=f,Object.keys(f).forEach(function(v){var y=f[v];o.addEventListener(v,y),n.on("dispose",function(E){return o.removeEventListener(v,y)})}),this.on("loadstart",m),this.on("dispose",function(v){return n.off("loadstart",m)})}},i.proxyNativeTracks_=function(){var e=this;Zr.names.forEach(function(n){e.proxyNativeTracksForType_(n)})},i.createEl=function(){var e=this.options_.tag;if(!e||!(this.options_.playerElIngest||this.movingMediaElementInDOM)){if(e){var n=e.cloneNode(!0);e.parentNode&&e.parentNode.insertBefore(n,e),t.disposeMediaElement(e),e=n}else{e=Se.createElement("video");var s=this.options_.tag&&Ca(this.options_.tag),o=Ft({},s);(!qu||this.options_.nativeControlsForTouch!==!0)&&delete o.controls,nE(e,Wt(o,{id:this.options_.techId,class:"vjs-tech"}))}e.playerId=this.options_.playerId}typeof this.options_.preload<"u"&&Gu(e,"preload",this.options_.preload),this.options_.disablePictureInPicture!==void 0&&(e.disablePictureInPicture=this.options_.disablePictureInPicture);for(var l=["loop","muted","playsinline","autoplay"],f=0;f<l.length;f++){var m=l[f],v=this.options_[m];typeof v<"u"&&(v?Gu(e,m,m):$h(e,m),e[m]=v)}return e},i.handleLateInit_=function(e){if(!(e.networkState===0||e.networkState===3)){if(e.readyState===0){var n=!1,s=function(){n=!0};this.on("loadstart",s);var o=function(){n||this.trigger("loadstart")};this.on("loadedmetadata",o),this.ready(function(){this.off("loadstart",s),this.off("loadedmetadata",o),n||this.trigger("loadstart")});return}var l=["loadstart"];l.push("loadedmetadata"),e.readyState>=2&&l.push("loadeddata"),e.readyState>=3&&l.push("canplay"),e.readyState>=4&&l.push("canplaythrough"),this.ready(function(){l.forEach(function(f){this.trigger(f)},this)})}},i.setScrubbing=function(e){this.isScrubbing_=e},i.scrubbing=function(){return this.isScrubbing_},i.setCurrentTime=function(e){try{this.isScrubbing_&&this.el_.fastSeek&&Hh?this.el_.fastSeek(e):this.el_.currentTime=e}catch(n){lt(n,"Video is not ready. (Video.js)")}},i.duration=function(){var e=this;if(this.el_.duration===1/0&&$a&&Wa&&this.el_.currentTime===0){var n=function s(){e.el_.currentTime>0&&(e.el_.duration===1/0&&e.trigger("durationchange"),e.off("timeupdate",s))};return this.on("timeupdate",n),NaN}return this.el_.duration||NaN},i.width=function(){return this.el_.offsetWidth},i.height=function(){return this.el_.offsetHeight},i.proxyWebkitFullscreen_=function(){var e=this;if("webkitDisplayingFullscreen"in this.el_){var n=function(){this.trigger("fullscreenchange",{isFullscreen:!1}),this.el_.controls&&!this.options_.nativeControlsForTouch&&this.controls()&&(this.el_.controls=!1)},s=function(){"webkitPresentationMode"in this.el_&&this.el_.webkitPresentationMode!=="picture-in-picture"&&(this.one("webkitendfullscreen",n),this.trigger("fullscreenchange",{isFullscreen:!0,nativeIOSFullscreen:!0}))};this.on("webkitbeginfullscreen",s),this.on("dispose",function(){e.off("webkitbeginfullscreen",s),e.off("webkitendfullscreen",n)})}},i.supportsFullScreen=function(){if(typeof this.el_.webkitEnterFullScreen=="function"){var e=F.navigator&&F.navigator.userAgent||"";if(/Android/.test(e)||!/Chrome|Mac OS X 10.5/.test(e))return!0}return!1},i.enterFullScreen=function(){var e=this.el_;if(e.paused&&e.networkState<=e.HAVE_METADATA)Yn(this.el_.play()),this.setTimeout(function(){e.pause();try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},0);else try{e.webkitEnterFullScreen()}catch(n){this.trigger("fullscreenerror",n)}},i.exitFullScreen=function(){if(!this.el_.webkitDisplayingFullscreen){this.trigger("fullscreenerror",new Error("The video is not fullscreen"));return}this.el_.webkitExitFullScreen()},i.requestPictureInPicture=function(){return this.el_.requestPictureInPicture()},i.requestVideoFrameCallback=function(e){return this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.requestVideoFrameCallback(e):a.prototype.requestVideoFrameCallback.call(this,e)},i.cancelVideoFrameCallback=function(e){this.featuresVideoFrameCallback&&!this.el_.webkitKeys?this.el_.cancelVideoFrameCallback(e):a.prototype.cancelVideoFrameCallback.call(this,e)},i.src=function(e){if(e===void 0)return this.el_.src;this.setSrc(e)},i.reset=function(){t.resetMediaElement(this.el_)},i.currentSrc=function(){return this.currentSource_?this.currentSource_.src:this.el_.currentSrc},i.setControls=function(e){this.el_.controls=!!e},i.addTextTrack=function(e,n,s){return this.featuresNativeTextTracks?this.el_.addTextTrack(e,n,s):a.prototype.addTextTrack.call(this,e,n,s)},i.createRemoteTextTrack=function(e){if(!this.featuresNativeTextTracks)return a.prototype.createRemoteTextTrack.call(this,e);var n=Se.createElement("track");return e.kind&&(n.kind=e.kind),e.label&&(n.label=e.label),(e.language||e.srclang)&&(n.srclang=e.language||e.srclang),e.default&&(n.default=e.default),e.id&&(n.id=e.id),e.src&&(n.src=e.src),n},i.addRemoteTextTrack=function(e,n){var s=a.prototype.addRemoteTextTrack.call(this,e,n);return this.featuresNativeTextTracks&&this.el().appendChild(s),s},i.removeRemoteTextTrack=function(e){if(a.prototype.removeRemoteTextTrack.call(this,e),this.featuresNativeTextTracks)for(var n=this.$$("track"),s=n.length;s--;)(e===n[s]||e===n[s].track)&&this.el().removeChild(n[s])},i.getVideoPlaybackQuality=function(){if(typeof this.el().getVideoPlaybackQuality=="function")return this.el().getVideoPlaybackQuality();var e={};return typeof this.el().webkitDroppedFrameCount<"u"&&typeof this.el().webkitDecodedFrameCount<"u"&&(e.droppedVideoFrames=this.el().webkitDroppedFrameCount,e.totalVideoFrames=this.el().webkitDecodedFrameCount),F.performance&&typeof F.performance.now=="function"?e.creationTime=F.performance.now():F.performance&&F.performance.timing&&typeof F.performance.timing.navigationStart=="number"&&(e.creationTime=F.Date.now()-F.performance.timing.navigationStart),e},t}(Rt);i0(Le,"TEST_VID",function(){if(el()){var a=Se.createElement("video"),t=Se.createElement("track");return t.kind="captions",t.srclang="en",t.label="English",a.appendChild(t),a}});Le.isSupported=function(){try{Le.TEST_VID.volume=.5}catch{return!1}return!!(Le.TEST_VID&&Le.TEST_VID.canPlayType)};Le.canPlayType=function(a){return Le.TEST_VID.canPlayType(a)};Le.canPlaySource=function(a,t){return Le.canPlayType(a.type)};Le.canControlVolume=function(){try{var a=Le.TEST_VID.volume;Le.TEST_VID.volume=a/2+.1;var t=a!==Le.TEST_VID.volume;return t&&er?(F.setTimeout(function(){Le&&Le.prototype&&(Le.prototype.featuresVolumeControl=a!==Le.TEST_VID.volume)}),!1):t}catch{return!1}};Le.canMuteVolume=function(){try{var a=Le.TEST_VID.muted;return Le.TEST_VID.muted=!a,Le.TEST_VID.muted?Gu(Le.TEST_VID,"muted","muted"):$h(Le.TEST_VID,"muted","muted"),a!==Le.TEST_VID.muted}catch{return!1}};Le.canControlPlaybackRate=function(){if($a&&Wa&&JS<58)return!1;try{var a=Le.TEST_VID.playbackRate;return Le.TEST_VID.playbackRate=a/2+.1,a!==Le.TEST_VID.playbackRate}catch{return!1}};Le.canOverrideAttributes=function(){try{var a=function(){};Object.defineProperty(Se.createElement("video"),"src",{get:a,set:a}),Object.defineProperty(Se.createElement("audio"),"src",{get:a,set:a}),Object.defineProperty(Se.createElement("video"),"innerHTML",{get:a,set:a}),Object.defineProperty(Se.createElement("audio"),"innerHTML",{get:a,set:a})}catch{return!1}return!0};Le.supportsNativeTextTracks=function(){return Hh||er&&Wa};Le.supportsNativeVideoTracks=function(){return!!(Le.TEST_VID&&Le.TEST_VID.videoTracks)};Le.supportsNativeAudioTracks=function(){return!!(Le.TEST_VID&&Le.TEST_VID.audioTracks)};Le.Events=["loadstart","suspend","abort","error","emptied","stalled","loadedmetadata","loadeddata","canplay","canplaythrough","playing","waiting","seeking","seeked","ended","durationchange","timeupdate","progress","play","pause","ratechange","resize","volumechange"];[["featuresMuteControl","canMuteVolume"],["featuresPlaybackRate","canControlPlaybackRate"],["featuresSourceset","canOverrideAttributes"],["featuresNativeTextTracks","supportsNativeTextTracks"],["featuresNativeVideoTracks","supportsNativeVideoTracks"],["featuresNativeAudioTracks","supportsNativeAudioTracks"]].forEach(function(a){var t=a[0],i=a[1];i0(Le.prototype,t,function(){return Le[i]()},!0)});Le.prototype.featuresVolumeControl=Le.canControlVolume();Le.prototype.movingMediaElementInDOM=!er;Le.prototype.featuresFullscreenResize=!0;Le.prototype.featuresProgressEvents=!0;Le.prototype.featuresTimeupdateEvents=!0;Le.prototype.featuresVideoFrameCallback=!!(Le.TEST_VID&&Le.TEST_VID.requestVideoFrameCallback);var Yc;Le.patchCanPlayType=function(){Iv>=4&&!YS&&!Wa&&(Yc=Le.TEST_VID&&Le.TEST_VID.constructor.prototype.canPlayType,Le.TEST_VID.constructor.prototype.canPlayType=function(a){var t=/^application\/(?:x-|vnd\.apple\.)mpegurl/i;return a&&t.test(a)?"maybe":Yc.call(this,a)})};Le.unpatchCanPlayType=function(){var a=Le.TEST_VID.constructor.prototype.canPlayType;return Yc&&(Le.TEST_VID.constructor.prototype.canPlayType=Yc),a};Le.patchCanPlayType();Le.disposeMediaElement=function(a){if(a){for(a.parentNode&&a.parentNode.removeChild(a);a.hasChildNodes();)a.removeChild(a.firstChild);a.removeAttribute("src"),typeof a.load=="function"&&function(){try{a.load()}catch{}}()}};Le.resetMediaElement=function(a){if(a){for(var t=a.querySelectorAll("source"),i=t.length;i--;)a.removeChild(t[i]);a.removeAttribute("src"),typeof a.load=="function"&&function(){try{a.load()}catch{}}()}};["muted","defaultMuted","autoplay","controls","loop","playsinline"].forEach(function(a){Le.prototype[a]=function(){return this.el_[a]||this.el_.hasAttribute(a)}});["muted","defaultMuted","autoplay","loop","playsinline"].forEach(function(a){Le.prototype["set"+Zt(a)]=function(t){this.el_[a]=t,t?this.el_.setAttribute(a,a):this.el_.removeAttribute(a)}});["paused","currentTime","buffered","volume","poster","preload","error","seeking","seekable","ended","playbackRate","defaultPlaybackRate","disablePictureInPicture","played","networkState","readyState","videoWidth","videoHeight","crossOrigin"].forEach(function(a){Le.prototype[a]=function(){return this.el_[a]}});["volume","src","poster","preload","playbackRate","defaultPlaybackRate","disablePictureInPicture","crossOrigin"].forEach(function(a){Le.prototype["set"+Zt(a)]=function(t){this.el_[a]=t}});["pause","load","play"].forEach(function(a){Le.prototype[a]=function(){return this.el_[a]()}});Rt.withSourceHandlers(Le);Le.nativeSourceHandler={};Le.nativeSourceHandler.canPlayType=function(a){try{return Le.TEST_VID.canPlayType(a)}catch{return""}};Le.nativeSourceHandler.canHandleSource=function(a,t){if(a.type)return Le.nativeSourceHandler.canPlayType(a.type);if(a.src){var i=Uv(a.src);return Le.nativeSourceHandler.canPlayType("video/"+i)}return""};Le.nativeSourceHandler.handleSource=function(a,t,i){t.setSrc(a.src)};Le.nativeSourceHandler.dispose=function(){};Le.registerSourceHandler(Le.nativeSourceHandler);Rt.registerTech("Html5",Le);var YE=["progress","abort","suspend","emptied","stalled","loadedmetadata","loadeddata","timeupdate","resize","volumechange","texttrackchange"],vm={canplay:"CanPlay",canplaythrough:"CanPlayThrough",playing:"Playing",seeked:"Seeked"},lg=["tiny","xsmall","small","medium","large","xlarge","huge"],Ac={};lg.forEach(function(a){var t=a.charAt(0)==="x"?"x-"+a.substring(1):a;Ac[a]="vjs-layout-"+t});var OB={tiny:210,xsmall:320,small:425,medium:768,large:1440,xlarge:2560,huge:1/0},ai=function(a){Ae(t,a);function t(r,e,n){var s;if(r.id=r.id||e.id||"vjs_video_"+qa(),e=Wt(t.getTagSettings(r),e),e.initChildren=!1,e.createEl=!1,e.evented=!1,e.reportTouchActivity=!1,!e.language)if(typeof r.closest=="function"){var o=r.closest("[lang]");o&&o.getAttribute&&(e.language=o.getAttribute("lang"))}else for(var l=r;l&&l.nodeType===1;){if(Ca(l).hasOwnProperty("lang")){e.language=l.getAttribute("lang");break}l=l.parentNode}if(s=a.call(this,null,e,n)||this,s.boundDocumentFullscreenChange_=function(y){return s.documentFullscreenChange_(y)},s.boundFullWindowOnEscKey_=function(y){return s.fullWindowOnEscKey(y)},s.boundUpdateStyleEl_=function(y){return s.updateStyleEl_(y)},s.boundApplyInitTime_=function(y){return s.applyInitTime_(y)},s.boundUpdateCurrentBreakpoint_=function(y){return s.updateCurrentBreakpoint_(y)},s.boundHandleTechClick_=function(y){return s.handleTechClick_(y)},s.boundHandleTechDoubleClick_=function(y){return s.handleTechDoubleClick_(y)},s.boundHandleTechTouchStart_=function(y){return s.handleTechTouchStart_(y)},s.boundHandleTechTouchMove_=function(y){return s.handleTechTouchMove_(y)},s.boundHandleTechTouchEnd_=function(y){return s.handleTechTouchEnd_(y)},s.boundHandleTechTap_=function(y){return s.handleTechTap_(y)},s.isFullscreen_=!1,s.log=zS(s.id_),s.fsApi_=Gc,s.isPosterFromTech_=!1,s.queuedCallbacks_=[],s.isReady_=!1,s.hasStarted_=!1,s.userActive_=!1,s.debugEnabled_=!1,s.audioOnlyMode_=!1,s.audioPosterMode_=!1,s.audioOnlyCache_={playerHeight:null,hiddenChildren:[]},!s.options_||!s.options_.techOrder||!s.options_.techOrder.length)throw new Error("No techOrder specified. Did you overwrite videojs.options instead of just changing the properties you want to override?");if(s.tag=r,s.tagAttributes=r&&Ca(r),s.language(s.options_.language),e.languages){var f={};Object.getOwnPropertyNames(e.languages).forEach(function(y){f[y.toLowerCase()]=e.languages[y]}),s.languages_=f}else s.languages_=t.prototype.options_.languages;s.resetCache_(),s.poster_=e.poster||"",s.controls_=!!e.controls,r.controls=!1,r.removeAttribute("controls"),s.changingSrc_=!1,s.playCallbacks_=[],s.playTerminatedQueue_=[],r.hasAttribute("autoplay")?s.autoplay(!0):s.autoplay(s.options_.autoplay),e.plugins&&Object.keys(e.plugins).forEach(function(y){if(typeof s[y]!="function")throw new Error('plugin "'+y+'" does not exist')}),s.scrubbing_=!1,s.el_=s.createEl(),Mv(Ue(s),{eventBusKey:"el_"}),s.fsApi_.requestFullscreen&&(Ur(Se,s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_),s.on(s.fsApi_.fullscreenchange,s.boundDocumentFullscreenChange_)),s.fluid_&&s.on(["playerreset","resize"],s.boundUpdateStyleEl_);var m=Ft(s.options_);e.plugins&&Object.keys(e.plugins).forEach(function(y){s[y](e.plugins[y])}),e.debug&&s.debug(!0),s.options_.playerOptions=m,s.middleware_=[],s.playbackRates(e.playbackRates),s.initChildren(),s.isAudio(r.nodeName.toLowerCase()==="audio"),s.controls()?s.addClass("vjs-controls-enabled"):s.addClass("vjs-controls-disabled"),s.el_.setAttribute("role","region"),s.isAudio()?s.el_.setAttribute("aria-label",s.localize("Audio Player")):s.el_.setAttribute("aria-label",s.localize("Video Player")),s.isAudio()&&s.addClass("vjs-audio"),s.flexNotSupported_()&&s.addClass("vjs-no-flex"),qu&&s.addClass("vjs-touch-enabled"),er||s.addClass("vjs-workinghover"),t.players[s.id_]=Ue(s);var v=WS.split(".")[0];return s.addClass("vjs-v"+v),s.userActive(!0),s.reportUserActivity(),s.one("play",function(y){return s.listenForUserActivity_(y)}),s.on("stageclick",function(y){return s.handleStageClick_(y)}),s.on("keydown",function(y){return s.handleKeyDown(y)}),s.on("languagechange",function(y){return s.handleLanguagechange(y)}),s.breakpoints(s.options_.breakpoints),s.responsive(s.options_.responsive),s.on("ready",function(){s.audioPosterMode(s.options_.audioPosterMode),s.audioOnlyMode(s.options_.audioOnlyMode)}),s}var i=t.prototype;return i.dispose=function(){var e=this;this.trigger("dispose"),this.off("dispose"),Fi(Se,this.fsApi_.fullscreenchange,this.boundDocumentFullscreenChange_),Fi(Se,"keydown",this.boundFullWindowOnEscKey_),this.styleEl_&&this.styleEl_.parentNode&&(this.styleEl_.parentNode.removeChild(this.styleEl_),this.styleEl_=null),t.players[this.id_]=null,this.tag&&this.tag.player&&(this.tag.player=null),this.el_&&this.el_.player&&(this.el_.player=null),this.tech_&&(this.tech_.dispose(),this.isPosterFromTech_=!1,this.poster_=""),this.playerElIngest_&&(this.playerElIngest_=null),this.tag&&(this.tag=null),QU(this),Ki.names.forEach(function(n){var s=Ki[n],o=e[s.getterName]();o&&o.off&&o.off()}),a.prototype.dispose.call(this,{restoreEl:this.options_.restoreEl})},i.createEl=function(){var e=this.tag,n,s=this.playerElIngest_=e.parentNode&&e.parentNode.hasAttribute&&e.parentNode.hasAttribute("data-vjs-player"),o=this.tag.tagName.toLowerCase()==="video-js";s?n=this.el_=e.parentNode:o||(n=this.el_=a.prototype.createEl.call(this,"div"));var l=Ca(e);if(o){for(n=this.el_=e,e=this.tag=Se.createElement("video");n.children.length;)e.appendChild(n.firstChild);So(n,"video-js")||La(n,"video-js"),n.appendChild(e),s=this.playerElIngest_=n,Object.keys(n).forEach(function(I){try{e[I]=n[I]}catch{}})}if(e.setAttribute("tabindex","-1"),l.tabindex="-1",(ff||Wa&&ZS)&&(e.setAttribute("role","application"),l.role="application"),e.removeAttribute("width"),e.removeAttribute("height"),"width"in l&&delete l.width,"height"in l&&delete l.height,Object.getOwnPropertyNames(l).forEach(function(I){o&&I==="class"||n.setAttribute(I,l[I]),o&&e.setAttribute(I,l[I])}),e.playerId=e.id,e.id+="_html5_api",e.className="vjs-tech",e.player=n.player=this,this.addClass("vjs-paused"),F.VIDEOJS_NO_DYNAMIC_STYLE!==!0){this.styleEl_=pE("vjs-styles-dimensions");var f=Es(".vjs-styles-defaults"),m=Es("head");m.insertBefore(this.styleEl_,f?f.nextSibling:m.firstChild)}this.fill_=!1,this.fluid_=!1,this.width(this.options_.width),this.height(this.options_.height),this.fill(this.options_.fill),this.fluid(this.options_.fluid),this.aspectRatio(this.options_.aspectRatio),this.crossOrigin(this.options_.crossOrigin||this.options_.crossorigin);for(var v=e.getElementsByTagName("a"),y=0;y<v.length;y++){var E=v.item(y);La(E,"vjs-hidden"),E.setAttribute("hidden","hidden")}return e.initNetworkState_=e.networkState,e.parentNode&&!s&&e.parentNode.insertBefore(n,e),tg(e,n),this.children_.unshift(e),this.el_.setAttribute("lang",this.language_),this.el_.setAttribute("translate","no"),this.el_=n,n},i.crossOrigin=function(e){if(!e)return this.techGet_("crossOrigin");if(e!=="anonymous"&&e!=="use-credentials"){lt.warn('crossOrigin must be "anonymous" or "use-credentials", given "'+e+'"');return}this.techCall_("setCrossOrigin",e)},i.width=function(e){return this.dimension("width",e)},i.height=function(e){return this.dimension("height",e)},i.dimension=function(e,n){var s=e+"_";if(n===void 0)return this[s]||0;if(n===""||n==="auto"){this[s]=void 0,this.updateStyleEl_();return}var o=parseFloat(n);if(isNaN(o)){lt.error('Improper value "'+n+'" supplied for for '+e);return}this[s]=o,this.updateStyleEl_()},i.fluid=function(e){var n=this;if(e===void 0)return!!this.fluid_;this.fluid_=!!e,ka(this)&&this.off(["playerreset","resize"],this.boundUpdateStyleEl_),e?(this.addClass("vjs-fluid"),this.fill(!1),bU(this,function(){n.on(["playerreset","resize"],n.boundUpdateStyleEl_)})):this.removeClass("vjs-fluid"),this.updateStyleEl_()},i.fill=function(e){if(e===void 0)return!!this.fill_;this.fill_=!!e,e?(this.addClass("vjs-fill"),this.fluid(!1)):this.removeClass("vjs-fill")},i.aspectRatio=function(e){if(e===void 0)return this.aspectRatio_;if(!/^\d+\:\d+$/.test(e))throw new Error("Improper value supplied for aspect ratio. The format should be width:height, for example 16:9.");this.aspectRatio_=e,this.fluid(!0),this.updateStyleEl_()},i.updateStyleEl_=function(){if(F.VIDEOJS_NO_DYNAMIC_STYLE===!0){var e=typeof this.width_=="number"?this.width_:this.options_.width,n=typeof this.height_=="number"?this.height_:this.options_.height,s=this.tech_&&this.tech_.el();s&&(e>=0&&(s.width=e),n>=0&&(s.height=n));return}var o,l,f,m;this.aspectRatio_!==void 0&&this.aspectRatio_!=="auto"?f=this.aspectRatio_:this.videoWidth()>0?f=this.videoWidth()+":"+this.videoHeight():f="16:9";var v=f.split(":"),y=v[1]/v[0];this.width_!==void 0?o=this.width_:this.height_!==void 0?o=this.height_/y:o=this.videoWidth()||300,this.height_!==void 0?l=this.height_:l=o*y,/^[^a-zA-Z]/.test(this.id())?m="dimensions-"+this.id():m=this.id()+"-dimensions",this.addClass(m),mE(this.styleEl_,`
      .`+m+` {
        width: `+o+`px;
        height: `+l+`px;
      }

      .`+m+`.vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: `+y*100+`%;
      }
    `)},i.loadTech_=function(e,n){var s=this;this.tech_&&this.unloadTech_();var o=Zt(e),l=e.charAt(0).toLowerCase()+e.slice(1);o!=="Html5"&&this.tag&&(Rt.getTech("Html5").disposeMediaElement(this.tag),this.tag.player=null,this.tag=null),this.techName_=o,this.isReady_=!1;var f=this.autoplay();(typeof this.autoplay()=="string"||this.autoplay()===!0&&this.options_.normalizeAutoplay)&&(f=!1);var m={source:n,autoplay:f,nativeControlsForTouch:this.options_.nativeControlsForTouch,playerId:this.id(),techId:this.id()+"_"+l+"_api",playsinline:this.options_.playsinline,preload:this.options_.preload,loop:this.options_.loop,disablePictureInPicture:this.options_.disablePictureInPicture,muted:this.options_.muted,poster:this.poster(),language:this.language(),playerElIngest:this.playerElIngest_||!1,"vtt.js":this.options_["vtt.js"],canOverridePoster:!!this.options_.techCanOverridePoster,enableSourceset:this.options_.enableSourceset,Promise:this.options_.Promise};Ki.names.forEach(function(y){var E=Ki[y];m[E.getterName]=s[E.privateName]}),Wt(m,this.options_[o]),Wt(m,this.options_[l]),Wt(m,this.options_[e.toLowerCase()]),this.tag&&(m.tag=this.tag),n&&n.src===this.cache_.src&&this.cache_.currentTime>0&&(m.startTime=this.cache_.currentTime);var v=Rt.getTech(e);if(!v)throw new Error("No Tech named '"+o+"' exists! '"+o+"' should be registered using videojs.registerTech()'");this.tech_=new v(m),this.tech_.ready(Nt(this,this.handleTechReady_),!0),OT.jsonToTextTracks(this.textTracksJson_||[],this.tech_),YE.forEach(function(y){s.on(s.tech_,y,function(E){return s["handleTech"+Zt(y)+"_"](E)})}),Object.keys(vm).forEach(function(y){s.on(s.tech_,y,function(E){if(s.tech_.playbackRate()===0&&s.tech_.seeking()){s.queuedCallbacks_.push({callback:s["handleTech"+vm[y]+"_"].bind(s),event:E});return}s["handleTech"+vm[y]+"_"](E)})}),this.on(this.tech_,"loadstart",function(y){return s.handleTechLoadStart_(y)}),this.on(this.tech_,"sourceset",function(y){return s.handleTechSourceset_(y)}),this.on(this.tech_,"waiting",function(y){return s.handleTechWaiting_(y)}),this.on(this.tech_,"ended",function(y){return s.handleTechEnded_(y)}),this.on(this.tech_,"seeking",function(y){return s.handleTechSeeking_(y)}),this.on(this.tech_,"play",function(y){return s.handleTechPlay_(y)}),this.on(this.tech_,"firstplay",function(y){return s.handleTechFirstPlay_(y)}),this.on(this.tech_,"pause",function(y){return s.handleTechPause_(y)}),this.on(this.tech_,"durationchange",function(y){return s.handleTechDurationChange_(y)}),this.on(this.tech_,"fullscreenchange",function(y,E){return s.handleTechFullscreenChange_(y,E)}),this.on(this.tech_,"fullscreenerror",function(y,E){return s.handleTechFullscreenError_(y,E)}),this.on(this.tech_,"enterpictureinpicture",function(y){return s.handleTechEnterPictureInPicture_(y)}),this.on(this.tech_,"leavepictureinpicture",function(y){return s.handleTechLeavePictureInPicture_(y)}),this.on(this.tech_,"error",function(y){return s.handleTechError_(y)}),this.on(this.tech_,"posterchange",function(y){return s.handleTechPosterChange_(y)}),this.on(this.tech_,"textdata",function(y){return s.handleTechTextData_(y)}),this.on(this.tech_,"ratechange",function(y){return s.handleTechRateChange_(y)}),this.on(this.tech_,"loadedmetadata",this.boundUpdateStyleEl_),this.usingNativeControls(this.techGet_("controls")),this.controls()&&!this.usingNativeControls()&&this.addTechControlsListeners_(),this.tech_.el().parentNode!==this.el()&&(o!=="Html5"||!this.tag)&&tg(this.tech_.el(),this.el()),this.tag&&(this.tag.player=null,this.tag=null)},i.unloadTech_=function(){var e=this;Ki.names.forEach(function(n){var s=Ki[n];e[s.privateName]=e[s.getterName]()}),this.textTracksJson_=OT.textTracksToJson(this.tech_),this.isReady_=!1,this.tech_.dispose(),this.tech_=!1,this.isPosterFromTech_&&(this.poster_="",this.trigger("posterchange")),this.isPosterFromTech_=!1},i.tech=function(e){return e===void 0&&lt.warn(`Using the tech directly can be dangerous. I hope you know what you're doing.
See https://github.com/videojs/video.js/issues/2617 for more info.
`),this.tech_},i.addTechControlsListeners_=function(){this.removeTechControlsListeners_(),this.on(this.tech_,"click",this.boundHandleTechClick_),this.on(this.tech_,"dblclick",this.boundHandleTechDoubleClick_),this.on(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.on(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.on(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.on(this.tech_,"tap",this.boundHandleTechTap_)},i.removeTechControlsListeners_=function(){this.off(this.tech_,"tap",this.boundHandleTechTap_),this.off(this.tech_,"touchstart",this.boundHandleTechTouchStart_),this.off(this.tech_,"touchmove",this.boundHandleTechTouchMove_),this.off(this.tech_,"touchend",this.boundHandleTechTouchEnd_),this.off(this.tech_,"click",this.boundHandleTechClick_),this.off(this.tech_,"dblclick",this.boundHandleTechDoubleClick_)},i.handleTechReady_=function(){this.triggerReady(),this.cache_.volume&&this.techCall_("setVolume",this.cache_.volume),this.handleTechPosterChange_(),this.handleTechDurationChange_()},i.handleTechLoadStart_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-seeking"),this.error(null),this.handleTechDurationChange_(),this.paused()?(this.hasStarted(!1),this.trigger("loadstart")):(this.trigger("loadstart"),this.trigger("firstplay")),this.manualAutoplay_(this.autoplay()===!0&&this.options_.normalizeAutoplay?"play":this.autoplay())},i.manualAutoplay_=function(e){var n=this;if(!(!this.tech_||typeof e!="string")){var s=function(){var f=n.muted();n.muted(!0);var m=function(){n.muted(f)};n.playTerminatedQueue_.push(m);var v=n.play();if(Pd(v))return v.catch(function(y){throw m(),new Error("Rejection at manualAutoplay. Restoring muted value. "+(y||""))})},o;if(e==="any"&&!this.muted()?(o=this.play(),Pd(o)&&(o=o.catch(s))):e==="muted"&&!this.muted()?o=s():o=this.play(),!!Pd(o))return o.then(function(){n.trigger({type:"autoplay-success",autoplay:e})}).catch(function(){n.trigger({type:"autoplay-failure",autoplay:e})})}},i.updateSourceCaches_=function(e){e===void 0&&(e="");var n=e,s="";typeof n!="string"&&(n=e.src,s=e.type),this.cache_.source=this.cache_.source||{},this.cache_.sources=this.cache_.sources||[],n&&!s&&(s=ZU(this,n)),this.cache_.source=Ft({},e,{src:n,type:s});for(var o=this.cache_.sources.filter(function(E){return E.src&&E.src===n}),l=[],f=this.$$("source"),m=[],v=0;v<f.length;v++){var y=Ca(f[v]);l.push(y),y.src&&y.src===n&&m.push(y.src)}m.length&&!o.length?this.cache_.sources=l:o.length||(this.cache_.sources=[this.cache_.source]),this.cache_.src=n},i.handleTechSourceset_=function(e){var n=this;if(!this.changingSrc_){var s=function(m){return n.updateSourceCaches_(m)},o=this.currentSource().src,l=e.src;o&&!/^blob:/.test(o)&&/^blob:/.test(l)&&(!this.lastSource_||this.lastSource_.tech!==l&&this.lastSource_.player!==o)&&(s=function(){}),s(l),e.src||this.tech_.any(["sourceset","loadstart"],function(f){if(f.type!=="sourceset"){var m=n.techGet("currentSrc");n.lastSource_.tech=m,n.updateSourceCaches_(m)}})}this.lastSource_={player:this.currentSource().src,tech:e.src},this.trigger({src:e.src,type:"sourceset"})},i.hasStarted=function(e){if(e===void 0)return this.hasStarted_;e!==this.hasStarted_&&(this.hasStarted_=e,this.hasStarted_?(this.addClass("vjs-has-started"),this.trigger("firstplay")):this.removeClass("vjs-has-started"))},i.handleTechPlay_=function(){this.removeClass("vjs-ended"),this.removeClass("vjs-paused"),this.addClass("vjs-playing"),this.hasStarted(!0),this.trigger("play")},i.handleTechRateChange_=function(){this.tech_.playbackRate()>0&&this.cache_.lastPlaybackRate===0&&(this.queuedCallbacks_.forEach(function(e){return e.callback(e.event)}),this.queuedCallbacks_=[]),this.cache_.lastPlaybackRate=this.tech_.playbackRate(),this.trigger("ratechange")},i.handleTechWaiting_=function(){var e=this;this.addClass("vjs-waiting"),this.trigger("waiting");var n=this.currentTime(),s=function o(){n!==e.currentTime()&&(e.removeClass("vjs-waiting"),e.off("timeupdate",o))};this.on("timeupdate",s)},i.handleTechCanPlay_=function(){this.removeClass("vjs-waiting"),this.trigger("canplay")},i.handleTechCanPlayThrough_=function(){this.removeClass("vjs-waiting"),this.trigger("canplaythrough")},i.handleTechPlaying_=function(){this.removeClass("vjs-waiting"),this.trigger("playing")},i.handleTechSeeking_=function(){this.addClass("vjs-seeking"),this.trigger("seeking")},i.handleTechSeeked_=function(){this.removeClass("vjs-seeking"),this.removeClass("vjs-ended"),this.trigger("seeked")},i.handleTechFirstPlay_=function(){this.options_.starttime&&(lt.warn("Passing the `starttime` option to the player will be deprecated in 6.0"),this.currentTime(this.options_.starttime)),this.addClass("vjs-has-started"),this.trigger("firstplay")},i.handleTechPause_=function(){this.removeClass("vjs-playing"),this.addClass("vjs-paused"),this.trigger("pause")},i.handleTechEnded_=function(){this.addClass("vjs-ended"),this.removeClass("vjs-waiting"),this.options_.loop?(this.currentTime(0),this.play()):this.paused()||this.pause(),this.trigger("ended")},i.handleTechDurationChange_=function(){this.duration(this.techGet_("duration"))},i.handleTechClick_=function(e){this.controls_&&(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.click===void 0||this.options_.userActions.click!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.click=="function"?this.options_.userActions.click.call(this,e):this.paused()?Yn(this.play()):this.pause())},i.handleTechDoubleClick_=function(e){if(this.controls_){var n=Array.prototype.some.call(this.$$(".vjs-control-bar, .vjs-modal-dialog"),function(s){return s.contains(e.target)});n||(this.options_===void 0||this.options_.userActions===void 0||this.options_.userActions.doubleClick===void 0||this.options_.userActions.doubleClick!==!1)&&(this.options_!==void 0&&this.options_.userActions!==void 0&&typeof this.options_.userActions.doubleClick=="function"?this.options_.userActions.doubleClick.call(this,e):this.isFullscreen()?this.exitFullscreen():this.requestFullscreen())}},i.handleTechTap_=function(){this.userActive(!this.userActive())},i.handleTechTouchStart_=function(){this.userWasActive=this.userActive()},i.handleTechTouchMove_=function(){this.userWasActive&&this.reportUserActivity()},i.handleTechTouchEnd_=function(e){e.cancelable&&e.preventDefault()},i.handleStageClick_=function(){this.reportUserActivity()},i.toggleFullscreenClass_=function(){this.isFullscreen()?this.addClass("vjs-fullscreen"):this.removeClass("vjs-fullscreen")},i.documentFullscreenChange_=function(e){var n=e.target.player;if(!(n&&n!==this)){var s=this.el(),o=Se[this.fsApi_.fullscreenElement]===s;!o&&s.matches?o=s.matches(":"+this.fsApi_.fullscreen):!o&&s.msMatchesSelector&&(o=s.msMatchesSelector(":"+this.fsApi_.fullscreen)),this.isFullscreen(o)}},i.handleTechFullscreenChange_=function(e,n){var s=this;n&&(n.nativeIOSFullscreen&&(this.addClass("vjs-ios-native-fs"),this.tech_.one("webkitendfullscreen",function(){s.removeClass("vjs-ios-native-fs")})),this.isFullscreen(n.isFullscreen))},i.handleTechFullscreenError_=function(e,n){this.trigger("fullscreenerror",n)},i.togglePictureInPictureClass_=function(){this.isInPictureInPicture()?this.addClass("vjs-picture-in-picture"):this.removeClass("vjs-picture-in-picture")},i.handleTechEnterPictureInPicture_=function(e){this.isInPictureInPicture(!0)},i.handleTechLeavePictureInPicture_=function(e){this.isInPictureInPicture(!1)},i.handleTechError_=function(){var e=this.tech_.error();this.error(e)},i.handleTechTextData_=function(){var e=null;arguments.length>1&&(e=arguments[1]),this.trigger("textdata",e)},i.getCache=function(){return this.cache_},i.resetCache_=function(){this.cache_={currentTime:0,initTime:0,inactivityTimeout:this.options_.inactivityTimeout,duration:NaN,lastVolume:1,lastPlaybackRate:this.defaultPlaybackRate(),media:null,src:"",source:{},sources:[],playbackRates:[],volume:1}},i.techCall_=function(e,n){this.ready(function(){if(e in KU)return GU(this.middleware_,this.tech_,e,n);if(e in FT)return MT(this.middleware_,this.tech_,e,n);try{this.tech_&&this.tech_[e](n)}catch(s){throw lt(s),s}},!0)},i.techGet_=function(e){if(!(!this.tech_||!this.tech_.isReady_)){if(e in zU)return qU(this.middleware_,this.tech_,e);if(e in FT)return MT(this.middleware_,this.tech_,e);try{return this.tech_[e]()}catch(n){throw this.tech_[e]===void 0?(lt("Video.js: "+e+" method not defined for "+this.techName_+" playback technology.",n),n):n.name==="TypeError"?(lt("Video.js: "+e+" unavailable on "+this.techName_+" playback technology element.",n),this.tech_.isReady_=!1,n):(lt(n),n)}}},i.play=function(){var e=this,n=this.options_.Promise||F.Promise;return n?new n(function(s){e.play_(s)}):this.play_()},i.play_=function(e){var n=this;e===void 0&&(e=Yn),this.playCallbacks_.push(e);var s=Boolean(!this.changingSrc_&&(this.src()||this.currentSrc()));if(this.waitToPlay_&&(this.off(["ready","loadstart"],this.waitToPlay_),this.waitToPlay_=null),!this.isReady_||!s){this.waitToPlay_=function(l){n.play_()},this.one(["ready","loadstart"],this.waitToPlay_),!s&&(Hh||er)&&this.load();return}var o=this.techGet_("play");o===null?this.runPlayTerminatedQueue_():this.runPlayCallbacks_(o)},i.runPlayTerminatedQueue_=function(){var e=this.playTerminatedQueue_.slice(0);this.playTerminatedQueue_=[],e.forEach(function(n){n()})},i.runPlayCallbacks_=function(e){var n=this.playCallbacks_.slice(0);this.playCallbacks_=[],this.playTerminatedQueue_=[],n.forEach(function(s){s(e)})},i.pause=function(){this.techCall_("pause")},i.paused=function(){return this.techGet_("paused")!==!1},i.played=function(){return this.techGet_("played")||Eo(0,0)},i.scrubbing=function(e){if(typeof e>"u")return this.scrubbing_;this.scrubbing_=!!e,this.techCall_("setScrubbing",this.scrubbing_),e?this.addClass("vjs-scrubbing"):this.removeClass("vjs-scrubbing")},i.currentTime=function(e){if(typeof e<"u"){if(e<0&&(e=0),!this.isReady_||this.changingSrc_||!this.tech_||!this.tech_.isReady_){this.cache_.initTime=e,this.off("canplay",this.boundApplyInitTime_),this.one("canplay",this.boundApplyInitTime_);return}this.techCall_("setCurrentTime",e),this.cache_.initTime=0;return}return this.cache_.currentTime=this.techGet_("currentTime")||0,this.cache_.currentTime},i.applyInitTime_=function(){this.currentTime(this.cache_.initTime)},i.duration=function(e){if(e===void 0)return this.cache_.duration!==void 0?this.cache_.duration:NaN;e=parseFloat(e),e<0&&(e=1/0),e!==this.cache_.duration&&(this.cache_.duration=e,e===1/0?this.addClass("vjs-live"):this.removeClass("vjs-live"),isNaN(e)||this.trigger("durationchange"))},i.remainingTime=function(){return this.duration()-this.currentTime()},i.remainingTimeDisplay=function(){return Math.floor(this.duration())-Math.floor(this.currentTime())},i.buffered=function(){var e=this.techGet_("buffered");return(!e||!e.length)&&(e=Eo(0,0)),e},i.bufferedPercent=function(){return bE(this.buffered(),this.duration())},i.bufferedEnd=function(){var e=this.buffered(),n=this.duration(),s=e.end(e.length-1);return s>n&&(s=n),s},i.volume=function(e){var n;if(e!==void 0){n=Math.max(0,Math.min(1,parseFloat(e))),this.cache_.volume=n,this.techCall_("setVolume",n),n>0&&this.lastVolume_(n);return}return n=parseFloat(this.techGet_("volume")),isNaN(n)?1:n},i.muted=function(e){if(e!==void 0){this.techCall_("setMuted",e);return}return this.techGet_("muted")||!1},i.defaultMuted=function(e){return e!==void 0?this.techCall_("setDefaultMuted",e):this.techGet_("defaultMuted")||!1},i.lastVolume_=function(e){if(e!==void 0&&e!==0){this.cache_.lastVolume=e;return}return this.cache_.lastVolume},i.supportsFullScreen=function(){return this.techGet_("supportsFullScreen")||!1},i.isFullscreen=function(e){if(e!==void 0){var n=this.isFullscreen_;this.isFullscreen_=Boolean(e),this.isFullscreen_!==n&&this.fsApi_.prefixed&&this.trigger("fullscreenchange"),this.toggleFullscreenClass_();return}return this.isFullscreen_},i.requestFullscreen=function(e){var n=this.options_.Promise||F.Promise;if(n){var s=this;return new n(function(o,l){function f(){s.off("fullscreenerror",v),s.off("fullscreenchange",m)}function m(){f(),o()}function v(E,I){f(),l(I)}s.one("fullscreenchange",m),s.one("fullscreenerror",v);var y=s.requestFullscreenHelper_(e);y&&(y.then(f,f),y.then(o,l))})}return this.requestFullscreenHelper_()},i.requestFullscreenHelper_=function(e){var n=this,s;if(this.fsApi_.prefixed||(s=this.options_.fullscreen&&this.options_.fullscreen.options||{},e!==void 0&&(s=e)),this.fsApi_.requestFullscreen){var o=this.el_[this.fsApi_.requestFullscreen](s);return o&&o.then(function(){return n.isFullscreen(!0)},function(){return n.isFullscreen(!1)}),o}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("enterFullScreen"):this.enterFullWindow()},i.exitFullscreen=function(){var e=this.options_.Promise||F.Promise;if(e){var n=this;return new e(function(s,o){function l(){n.off("fullscreenerror",m),n.off("fullscreenchange",f)}function f(){l(),s()}function m(y,E){l(),o(E)}n.one("fullscreenchange",f),n.one("fullscreenerror",m);var v=n.exitFullscreenHelper_();v&&(v.then(l,l),v.then(s,o))})}return this.exitFullscreenHelper_()},i.exitFullscreenHelper_=function(){var e=this;if(this.fsApi_.requestFullscreen){var n=Se[this.fsApi_.exitFullscreen]();return n&&Yn(n.then(function(){return e.isFullscreen(!1)})),n}else this.tech_.supportsFullScreen()&&!this.options_.preferFullWindow?this.techCall_("exitFullScreen"):this.exitFullWindow()},i.enterFullWindow=function(){this.isFullscreen(!0),this.isFullWindow=!0,this.docOrigOverflow=Se.documentElement.style.overflow,Ur(Se,"keydown",this.boundFullWindowOnEscKey_),Se.documentElement.style.overflow="hidden",La(Se.body,"vjs-full-window"),this.trigger("enterFullWindow")},i.fullWindowOnEscKey=function(e){et.isEventKey(e,"Esc")&&this.isFullscreen()===!0&&(this.isFullWindow?this.exitFullWindow():this.exitFullscreen())},i.exitFullWindow=function(){this.isFullscreen(!1),this.isFullWindow=!1,Fi(Se,"keydown",this.boundFullWindowOnEscKey_),Se.documentElement.style.overflow=this.docOrigOverflow,cf(Se.body,"vjs-full-window"),this.trigger("exitFullWindow")},i.disablePictureInPicture=function(e){if(e===void 0)return this.techGet_("disablePictureInPicture");this.techCall_("setDisablePictureInPicture",e),this.options_.disablePictureInPicture=e,this.trigger("disablepictureinpicturechanged")},i.isInPictureInPicture=function(e){if(e!==void 0){this.isInPictureInPicture_=!!e,this.togglePictureInPictureClass_();return}return!!this.isInPictureInPicture_},i.requestPictureInPicture=function(){if("pictureInPictureEnabled"in Se&&this.disablePictureInPicture()===!1)return this.techGet_("requestPictureInPicture")},i.exitPictureInPicture=function(){if("pictureInPictureEnabled"in Se)return Se.exitPictureInPicture()},i.handleKeyDown=function(e){var n=this.options_.userActions;if(!(!n||!n.hotkeys)){var s=function(l){var f=l.tagName.toLowerCase();if(l.isContentEditable)return!0;var m=["button","checkbox","hidden","radio","reset","submit"];if(f==="input")return m.indexOf(l.type)===-1;var v=["textarea"];return v.indexOf(f)!==-1};s(this.el_.ownerDocument.activeElement)||(typeof n.hotkeys=="function"?n.hotkeys.call(this,e):this.handleHotkeys(e))}},i.handleHotkeys=function(e){var n=this.options_.userActions?this.options_.userActions.hotkeys:{},s=n.fullscreenKey,o=s===void 0?function(O){return et.isEventKey(O,"f")}:s,l=n.muteKey,f=l===void 0?function(O){return et.isEventKey(O,"m")}:l,m=n.playPauseKey,v=m===void 0?function(O){return et.isEventKey(O,"k")||et.isEventKey(O,"Space")}:m;if(o.call(this,e)){e.preventDefault(),e.stopPropagation();var y=Te.getComponent("FullscreenToggle");Se[this.fsApi_.fullscreenEnabled]!==!1&&y.prototype.handleClick.call(this,e)}else if(f.call(this,e)){e.preventDefault(),e.stopPropagation();var E=Te.getComponent("MuteToggle");E.prototype.handleClick.call(this,e)}else if(v.call(this,e)){e.preventDefault(),e.stopPropagation();var I=Te.getComponent("PlayToggle");I.prototype.handleClick.call(this,e)}},i.canPlayType=function(e){for(var n,s=0,o=this.options_.techOrder;s<o.length;s++){var l=o[s],f=Rt.getTech(l);if(f||(f=Te.getComponent(l)),!f){lt.error('The "'+l+'" tech is undefined. Skipped browser support check for that tech.');continue}if(f.isSupported()&&(n=f.canPlayType(e),n))return n}return""},i.selectSource=function(e){var n=this,s=this.options_.techOrder.map(function(v){return[v,Rt.getTech(v)]}).filter(function(v){var y=v[0],E=v[1];return E?E.isSupported():(lt.error('The "'+y+'" tech is undefined. Skipped browser support check for that tech.'),!1)}),o=function(y,E,I){var O;return y.some(function(D){return E.some(function(R){if(O=I(D,R),O)return!0})}),O},l,f=function(y){return function(E,I){return y(I,E)}},m=function(y,E){var I=y[0],O=y[1];if(O.canPlaySource(E,n.options_[I.toLowerCase()]))return{source:E,tech:I}};return this.options_.sourceOrder?l=o(e,s,f(m)):l=o(s,e,m),l||!1},i.handleSrc_=function(e,n){var s=this;if(typeof e>"u")return this.cache_.src||"";this.resetRetryOnError_&&this.resetRetryOnError_();var o=eB(e);if(!o.length){this.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0);return}if(this.changingSrc_=!0,n||(this.cache_.sources=o),this.updateSourceCaches_(o[0]),$U(this,o[0],function(m,v){s.middleware_=v,n||(s.cache_.sources=o),s.updateSourceCaches_(m);var y=s.src_(m);if(y){if(o.length>1)return s.handleSrc_(o.slice(1));s.changingSrc_=!1,s.setTimeout(function(){this.error({code:4,message:this.options_.notSupportedMessage})},0),s.triggerReady();return}WU(v,s.tech_)}),this.options_.retryOnError&&o.length>1){var l=function(){s.error(null),s.handleSrc_(o.slice(1),!0)},f=function(){s.off("error",l)};this.one("error",l),this.one("playing",f),this.resetRetryOnError_=function(){s.off("error",l),s.off("playing",f)}}},i.src=function(e){return this.handleSrc_(e,!1)},i.src_=function(e){var n=this,s=this.selectSource([e]);return s?EU(s.tech,this.techName_)?(this.ready(function(){this.tech_.constructor.prototype.hasOwnProperty("setSource")?this.techCall_("setSource",e):this.techCall_("src",e.src),this.changingSrc_=!1},!0),!1):(this.changingSrc_=!0,this.loadTech_(s.tech,s.source),this.tech_.ready(function(){n.changingSrc_=!1}),!1):!0},i.load=function(){this.techCall_("load")},i.reset=function(){var e=this,n=this.options_.Promise||F.Promise;if(this.paused()||!n)this.doReset_();else{var s=this.play();Yn(s.then(function(){return e.doReset_()}))}},i.doReset_=function(){this.tech_&&this.tech_.clearTracks("text"),this.resetCache_(),this.poster(""),this.loadTech_(this.options_.techOrder[0],null),this.techCall_("reset"),this.resetControlBarUI_(),ka(this)&&this.trigger("playerreset")},i.resetControlBarUI_=function(){this.resetProgressBar_(),this.resetPlaybackRate_(),this.resetVolumeBar_()},i.resetProgressBar_=function(){this.currentTime(0);var e=this.controlBar||{},n=e.durationDisplay,s=e.remainingTimeDisplay;n&&n.updateContent(),s&&s.updateContent()},i.resetPlaybackRate_=function(){this.playbackRate(this.defaultPlaybackRate()),this.handleTechRateChange_()},i.resetVolumeBar_=function(){this.volume(1),this.trigger("volumechange")},i.currentSources=function(){var e=this.currentSource(),n=[];return Object.keys(e).length!==0&&n.push(e),this.cache_.sources||n},i.currentSource=function(){return this.cache_.source||{}},i.currentSrc=function(){return this.currentSource()&&this.currentSource().src||""},i.currentType=function(){return this.currentSource()&&this.currentSource().type||""},i.preload=function(e){if(e!==void 0){this.techCall_("setPreload",e),this.options_.preload=e;return}return this.techGet_("preload")},i.autoplay=function(e){if(e===void 0)return this.options_.autoplay||!1;var n;typeof e=="string"&&/(any|play|muted)/.test(e)||e===!0&&this.options_.normalizeAutoplay?(this.options_.autoplay=e,this.manualAutoplay_(typeof e=="string"?e:"play"),n=!1):e?this.options_.autoplay=!0:this.options_.autoplay=!1,n=typeof n>"u"?this.options_.autoplay:n,this.tech_&&this.techCall_("setAutoplay",n)},i.playsinline=function(e){return e!==void 0?(this.techCall_("setPlaysinline",e),this.options_.playsinline=e,this):this.techGet_("playsinline")},i.loop=function(e){if(e!==void 0){this.techCall_("setLoop",e),this.options_.loop=e;return}return this.techGet_("loop")},i.poster=function(e){if(e===void 0)return this.poster_;e||(e=""),e!==this.poster_&&(this.poster_=e,this.techCall_("setPoster",e),this.isPosterFromTech_=!1,this.trigger("posterchange"))},i.handleTechPosterChange_=function(){if((!this.poster_||this.options_.techCanOverridePoster)&&this.tech_&&this.tech_.poster){var e=this.tech_.poster()||"";e!==this.poster_&&(this.poster_=e,this.isPosterFromTech_=!0,this.trigger("posterchange"))}},i.controls=function(e){if(e===void 0)return!!this.controls_;e=!!e,this.controls_!==e&&(this.controls_=e,this.usingNativeControls()&&this.techCall_("setControls",e),this.controls_?(this.removeClass("vjs-controls-disabled"),this.addClass("vjs-controls-enabled"),this.trigger("controlsenabled"),this.usingNativeControls()||this.addTechControlsListeners_()):(this.removeClass("vjs-controls-enabled"),this.addClass("vjs-controls-disabled"),this.trigger("controlsdisabled"),this.usingNativeControls()||this.removeTechControlsListeners_()))},i.usingNativeControls=function(e){if(e===void 0)return!!this.usingNativeControls_;e=!!e,this.usingNativeControls_!==e&&(this.usingNativeControls_=e,this.usingNativeControls_?(this.addClass("vjs-using-native-controls"),this.trigger("usingnativecontrols")):(this.removeClass("vjs-using-native-controls"),this.trigger("usingcustomcontrols")))},i.error=function(e){var n=this;if(e===void 0)return this.error_||null;if(Ss("beforeerror").forEach(function(o){var l=o(n,e);if(!(Ba(l)&&!Array.isArray(l)||typeof l=="string"||typeof l=="number"||l===null)){n.log.error("please return a value that MediaError expects in beforeerror hooks");return}e=l}),this.options_.suppressNotSupportedError&&e&&e.code===4){var s=function(){this.error(e)};this.options_.suppressNotSupportedError=!1,this.any(["click","touchstart"],s),this.one("loadstart",function(){this.off(["click","touchstart"],s)});return}if(e===null){this.error_=e,this.removeClass("vjs-error"),this.errorDisplay&&this.errorDisplay.close();return}this.error_=new Ji(e),this.addClass("vjs-error"),lt.error("(CODE:"+this.error_.code+" "+Ji.errorTypes[this.error_.code]+")",this.error_.message,this.error_),this.trigger("error"),Ss("error").forEach(function(o){return o(n,n.error_)})},i.reportUserActivity=function(e){this.userActivity_=!0},i.userActive=function(e){if(e===void 0)return this.userActive_;if(e=!!e,e!==this.userActive_){if(this.userActive_=e,this.userActive_){this.userActivity_=!0,this.removeClass("vjs-user-inactive"),this.addClass("vjs-user-active"),this.trigger("useractive");return}this.tech_&&this.tech_.one("mousemove",function(n){n.stopPropagation(),n.preventDefault()}),this.userActivity_=!1,this.removeClass("vjs-user-active"),this.addClass("vjs-user-inactive"),this.trigger("userinactive")}},i.listenForUserActivity_=function(){var e,n,s,o=Nt(this,this.reportUserActivity),l=function(I){(I.screenX!==n||I.screenY!==s)&&(n=I.screenX,s=I.screenY,o())},f=function(){o(),this.clearInterval(e),e=this.setInterval(o,250)},m=function(I){o(),this.clearInterval(e)};this.on("mousedown",f),this.on("mousemove",l),this.on("mouseup",m),this.on("mouseleave",m);var v=this.getChild("controlBar");v&&!er&&!$a&&(v.on("mouseenter",function(E){this.player().options_.inactivityTimeout!==0&&(this.player().cache_.inactivityTimeout=this.player().options_.inactivityTimeout),this.player().options_.inactivityTimeout=0}),v.on("mouseleave",function(E){this.player().options_.inactivityTimeout=this.player().cache_.inactivityTimeout})),this.on("keydown",o),this.on("keyup",o);var y;this.setInterval(function(){if(this.userActivity_){this.userActivity_=!1,this.userActive(!0),this.clearTimeout(y);var E=this.options_.inactivityTimeout;E<=0||(y=this.setTimeout(function(){this.userActivity_||this.userActive(!1)},E))}},250)},i.playbackRate=function(e){if(e!==void 0){this.techCall_("setPlaybackRate",e);return}return this.tech_&&this.tech_.featuresPlaybackRate?this.cache_.lastPlaybackRate||this.techGet_("playbackRate"):1},i.defaultPlaybackRate=function(e){return e!==void 0?this.techCall_("setDefaultPlaybackRate",e):this.tech_&&this.tech_.featuresPlaybackRate?this.techGet_("defaultPlaybackRate"):1},i.isAudio=function(e){if(e!==void 0){this.isAudio_=!!e;return}return!!this.isAudio_},i.enableAudioOnlyUI_=function(){var e=this;this.addClass("vjs-audio-only-mode");var n=this.children(),s=this.getChild("ControlBar"),o=s&&s.currentHeight();n.forEach(function(l){l!==s&&l.el_&&!l.hasClass("vjs-hidden")&&(l.hide(),e.audioOnlyCache_.hiddenChildren.push(l))}),this.audioOnlyCache_.playerHeight=this.currentHeight(),this.height(o),this.trigger("audioonlymodechange")},i.disableAudioOnlyUI_=function(){this.removeClass("vjs-audio-only-mode"),this.audioOnlyCache_.hiddenChildren.forEach(function(e){return e.show()}),this.height(this.audioOnlyCache_.playerHeight),this.trigger("audioonlymodechange")},i.audioOnlyMode=function(e){var n=this;if(typeof e!="boolean"||e===this.audioOnlyMode_)return this.audioOnlyMode_;this.audioOnlyMode_=e;var s=this.options_.Promise||F.Promise;if(s){if(e){var o=[];return this.isInPictureInPicture()&&o.push(this.exitPictureInPicture()),this.isFullscreen()&&o.push(this.exitFullscreen()),this.audioPosterMode()&&o.push(this.audioPosterMode(!1)),s.all(o).then(function(){return n.enableAudioOnlyUI_()})}return s.resolve().then(function(){return n.disableAudioOnlyUI_()})}e?(this.isInPictureInPicture()&&this.exitPictureInPicture(),this.isFullscreen()&&this.exitFullscreen(),this.enableAudioOnlyUI_()):this.disableAudioOnlyUI_()},i.enablePosterModeUI_=function(){var e=this.tech_&&this.tech_;e.hide(),this.addClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},i.disablePosterModeUI_=function(){var e=this.tech_&&this.tech_;e.show(),this.removeClass("vjs-audio-poster-mode"),this.trigger("audiopostermodechange")},i.audioPosterMode=function(e){var n=this;if(typeof e!="boolean"||e===this.audioPosterMode_)return this.audioPosterMode_;this.audioPosterMode_=e;var s=this.options_.Promise||F.Promise;if(s){if(e){if(this.audioOnlyMode()){var o=this.audioOnlyMode(!1);return o.then(function(){n.enablePosterModeUI_()})}return s.resolve().then(function(){n.enablePosterModeUI_()})}return s.resolve().then(function(){n.disablePosterModeUI_()})}if(e){this.audioOnlyMode()&&this.audioOnlyMode(!1),this.enablePosterModeUI_();return}this.disablePosterModeUI_()},i.addTextTrack=function(e,n,s){if(this.tech_)return this.tech_.addTextTrack(e,n,s)},i.addRemoteTextTrack=function(e,n){if(this.tech_)return this.tech_.addRemoteTextTrack(e,n)},i.removeRemoteTextTrack=function(e){e===void 0&&(e={});var n=e,s=n.track;if(s||(s=e),this.tech_)return this.tech_.removeRemoteTextTrack(s)},i.getVideoPlaybackQuality=function(){return this.techGet_("getVideoPlaybackQuality")},i.videoWidth=function(){return this.tech_&&this.tech_.videoWidth&&this.tech_.videoWidth()||0},i.videoHeight=function(){return this.tech_&&this.tech_.videoHeight&&this.tech_.videoHeight()||0},i.language=function(e){if(e===void 0)return this.language_;this.language_!==String(e).toLowerCase()&&(this.language_=String(e).toLowerCase(),ka(this)&&this.trigger("languagechange"))},i.languages=function(){return Ft(t.prototype.options_.languages,this.languages_)},i.toJSON=function(){var e=Ft(this.options_),n=e.tracks;e.tracks=[];for(var s=0;s<n.length;s++){var o=n[s];o=Ft(o),o.player=void 0,e.tracks[s]=o}return e},i.createModal=function(e,n){var s=this;n=n||{},n.content=e||"";var o=new rl(this,n);return this.addChild(o),o.on("dispose",function(){s.removeChild(o)}),o.open(),o},i.updateCurrentBreakpoint_=function(){if(this.responsive())for(var e=this.currentBreakpoint(),n=this.currentWidth(),s=0;s<lg.length;s++){var o=lg[s],l=this.breakpoints_[o];if(n<=l){if(e===o)return;e&&this.removeClass(Ac[e]),this.addClass(Ac[o]),this.breakpoint_=o;break}}},i.removeCurrentBreakpoint_=function(){var e=this.currentBreakpointClass();this.breakpoint_="",e&&this.removeClass(e)},i.breakpoints=function(e){return e===void 0?Wt(this.breakpoints_):(this.breakpoint_="",this.breakpoints_=Wt({},OB,e),this.updateCurrentBreakpoint_(),Wt(this.breakpoints_))},i.responsive=function(e){if(e===void 0)return this.responsive_;e=Boolean(e);var n=this.responsive_;if(e!==n)return this.responsive_=e,e?(this.on("playerresize",this.boundUpdateCurrentBreakpoint_),this.updateCurrentBreakpoint_()):(this.off("playerresize",this.boundUpdateCurrentBreakpoint_),this.removeCurrentBreakpoint_()),e},i.currentBreakpoint=function(){return this.breakpoint_},i.currentBreakpointClass=function(){return Ac[this.breakpoint_]||""},i.loadMedia=function(e,n){var s=this;if(!(!e||typeof e!="object")){this.reset(),this.cache_.media=Ft(e);var o=this.cache_.media,l=o.artwork,f=o.poster,m=o.src,v=o.textTracks;!l&&f&&(this.cache_.media.artwork=[{src:f,type:Xc(f)}]),m&&this.src(m),f&&this.poster(f),Array.isArray(v)&&v.forEach(function(y){return s.addRemoteTextTrack(y,!1)}),this.ready(n)}},i.getMedia=function(){if(!this.cache_.media){var e=this.poster(),n=this.currentSources(),s=Array.prototype.map.call(this.remoteTextTracks(),function(l){return{kind:l.kind,label:l.label,language:l.language,src:l.src}}),o={src:n,textTracks:s};return e&&(o.poster=e,o.artwork=[{src:o.poster,type:Xc(o.poster)}]),o}return Ft(this.cache_.media)},t.getTagSettings=function(e){var n={sources:[],tracks:[]},s=Ca(e),o=s["data-setup"];if(So(e,"vjs-fill")&&(s.fill=!0),So(e,"vjs-fluid")&&(s.fluid=!0),o!==null){var l=gM(o||"{}"),f=l[0],m=l[1];f&&lt.error(f),Wt(s,m)}if(Wt(n,s),e.hasChildNodes())for(var v=e.childNodes,y=0,E=v.length;y<E;y++){var I=v[y],O=I.nodeName.toLowerCase();O==="source"?n.sources.push(Ca(I)):O==="track"&&n.tracks.push(Ca(I))}return n},i.flexNotSupported_=function(){var e=Se.createElement("i");return!("flexBasis"in e.style||"webkitFlexBasis"in e.style||"mozFlexBasis"in e.style||"msFlexBasis"in e.style||"msFlexOrder"in e.style)},i.debug=function(e){if(e===void 0)return this.debugEnabled_;e?(this.trigger("debugon"),this.previousLogLevel_=this.log.level,this.log.level("debug"),this.debugEnabled_=!0):(this.trigger("debugoff"),this.log.level(this.previousLogLevel_),this.previousLogLevel_=void 0,this.debugEnabled_=!1)},i.playbackRates=function(e){if(e===void 0)return this.cache_.playbackRates;Array.isArray(e)&&e.every(function(n){return typeof n=="number"})&&(this.cache_.playbackRates=e,this.trigger("playbackrateschange"))},t}(Te);Ki.names.forEach(function(a){var t=Ki[a];ai.prototype[t.getterName]=function(){return this.tech_?this.tech_[t.getterName]():(this[t.privateName]=this[t.privateName]||new t.ListClass,this[t.privateName])}});ai.prototype.crossorigin=ai.prototype.crossOrigin;ai.players={};var cd=F.navigator;ai.prototype.options_={techOrder:Rt.defaultTechOrder_,html5:{},inactivityTimeout:2e3,playbackRates:[],liveui:!1,children:["mediaLoader","posterImage","textTrackDisplay","loadingSpinner","bigPlayButton","liveTracker","controlBar","errorDisplay","textTrackSettings","resizeManager"],language:cd&&(cd.languages&&cd.languages[0]||cd.userLanguage||cd.language)||"en",languages:{},notSupportedMessage:"No compatible source was found for this media.",normalizeAutoplay:!1,fullscreen:{options:{navigationUI:"hide"}},breakpoints:{},responsive:!1,audioOnlyMode:!1,audioPosterMode:!1};["ended","seeking","seekable","networkState","readyState"].forEach(function(a){ai.prototype[a]=function(){return this.techGet_(a)}});YE.forEach(function(a){ai.prototype["handleTech"+Zt(a)+"_"]=function(){return this.trigger(a)}});Te.registerComponent("Player",ai);var Jc="plugin",Ru="activePlugins_",Eu={},Zc=function(t){return Eu.hasOwnProperty(t)},Ic=function(t){return Zc(t)?Eu[t]:void 0},JE=function(t,i){t[Ru]=t[Ru]||{},t[Ru][i]=!0},eh=function(t,i,r){var e=(r?"before":"")+"pluginsetup";t.trigger(e,i),t.trigger(e+":"+i.name,i)},DB=function(t,i){var r=function(){eh(this,{name:t,plugin:i,instance:null},!0);var n=i.apply(this,arguments);return JE(this,t),eh(this,{name:t,plugin:i,instance:n}),n};return Object.keys(i).forEach(function(e){r[e]=i[e]}),r},QT=function(t,i){return i.prototype.name=t,function(){eh(this,{name:t,plugin:i,instance:null},!0);for(var r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];var s=Id(i,[this].concat(e));return this[t]=function(){return s},eh(this,s.getEventHash()),s}},sa=function(){function a(i){if(this.constructor===a)throw new Error("Plugin must be sub-classed; not directly instantiated.");this.player=i,this.log||(this.log=this.player.log.createLogger(this.name)),Mv(this),delete this.trigger,TE(this,this.constructor.defaultState),JE(i,this.name),this.dispose=this.dispose.bind(this),i.on("dispose",this.dispose)}var t=a.prototype;return t.version=function(){return this.constructor.VERSION},t.getEventHash=function(r){return r===void 0&&(r={}),r.name=this.name,r.plugin=this.constructor,r.instance=this,r},t.trigger=function(r,e){return e===void 0&&(e={}),il(this.eventBusEl_,r,this.getEventHash(e))},t.handleStateChanged=function(r){},t.dispose=function(){var r=this.name,e=this.player;this.trigger("dispose"),this.off(),e.off("dispose",this.dispose),e[Ru][r]=!1,this.player=this.state=null,e[r]=QT(r,Eu[r])},a.isBasic=function(r){var e=typeof r=="string"?Ic(r):r;return typeof e=="function"&&!a.prototype.isPrototypeOf(e.prototype)},a.registerPlugin=function(r,e){if(typeof r!="string")throw new Error('Illegal plugin name, "'+r+'", must be a string, was '+typeof r+".");if(Zc(r))lt.warn('A plugin named "'+r+'" already exists. You may want to avoid re-registering plugins!');else if(ai.prototype.hasOwnProperty(r))throw new Error('Illegal plugin name, "'+r+'", cannot share a name with an existing player method!');if(typeof e!="function")throw new Error('Illegal plugin for "'+r+'", must be a function, was '+typeof e+".");return Eu[r]=e,r!==Jc&&(a.isBasic(e)?ai.prototype[r]=DB(r,e):ai.prototype[r]=QT(r,e)),e},a.deregisterPlugin=function(r){if(r===Jc)throw new Error("Cannot de-register base plugin.");Zc(r)&&(delete Eu[r],delete ai.prototype[r])},a.getPlugins=function(r){r===void 0&&(r=Object.keys(Eu));var e;return r.forEach(function(n){var s=Ic(n);s&&(e=e||{},e[n]=s)}),e},a.getPluginVersion=function(r){var e=Ic(r);return e&&e.VERSION||""},a}();sa.getPlugin=Ic;sa.BASE_PLUGIN_NAME=Jc;sa.registerPlugin(Jc,sa);ai.prototype.usingPlugin=function(a){return!!this[Ru]&&this[Ru][a]===!0};ai.prototype.hasPlugin=function(a){return!!Zc(a)};var YT=!1,LB=function(t,i){i===void 0&&(i={}),YT||(lt.warn("videojs.extend is deprecated as of Video.js 7.22.0 and will be removed in Video.js 8.0.0"),YT=!0);var r=function(){t.apply(this,arguments)},e={};typeof i=="object"?(i.constructor!==Object.prototype.constructor&&(r=i.constructor),e=i):typeof i=="function"&&(r=i),sF(r,t),t&&(r.super_=t);for(var n in e)e.hasOwnProperty(n)&&(r.prototype[n]=e[n]);return r},ZE=function(t){return t.indexOf("#")===0?t.slice(1):t};function N(a,t,i){var r=N.getPlayer(a);if(r)return t&&lt.warn('Player "'+a+'" is already initialised. Options will not be applied.'),i&&r.ready(i),r;var e=typeof a=="string"?Es("#"+ZE(a)):a;if(!tl(e))throw new TypeError("The element or ID supplied is not valid. (videojs)");(!e.ownerDocument.defaultView||!e.ownerDocument.body.contains(e))&&lt.warn("The element supplied is not included in the DOM"),t=t||{},t.restoreEl===!0&&(t.restoreEl=(e.parentNode&&e.parentNode.hasAttribute("data-vjs-player")?e.parentNode:e).cloneNode(!0)),Ss("beforesetup").forEach(function(s){var o=s(e,Ft(t));if(!Ba(o)||Array.isArray(o)){lt.error("please return an object in beforesetup hooks");return}t=Ft(t,o)});var n=Te.getComponent("Player");return r=new n(e,t,i),Ss("setup").forEach(function(s){return s(r)}),r}N.hooks_=Aa;N.hooks=Ss;N.hook=aU;N.hookOnce=sU;N.removeHook=qS;if(F.VIDEOJS_NO_DYNAMIC_STYLE!==!0&&el()){var dc=Es(".vjs-styles-defaults");if(!dc){dc=pE("vjs-styles-defaults");var _m=Es("head");_m&&_m.insertBefore(dc,_m.firstChild),mE(dc,`
      .video-js {
        width: 300px;
        height: 150px;
      }

      .vjs-fluid:not(.vjs-audio-only-mode) {
        padding-top: 56.25%
      }
    `)}}rg(1,N);N.VERSION=WS;N.options=ai.prototype.options_;N.getPlayers=function(){return ai.players};N.getPlayer=function(a){var t=ai.players,i;if(typeof a=="string"){var r=ZE(a),e=t[r];if(e)return e;i=Es("#"+r)}else i=a;if(tl(i)){var n=i,s=n.player,o=n.playerId;if(s||t[o])return s||t[o]}};N.getAllPlayers=function(){return Object.keys(ai.players).map(function(a){return ai.players[a]}).filter(Boolean)};N.players=ai.players;N.getComponent=Te.getComponent;N.registerComponent=function(a,t){Rt.isTech(t)&&lt.warn("The "+a+" tech was registered as a component. It should instead be registered using videojs.registerTech(name, tech)"),Te.registerComponent.call(Te,a,t)};N.getTech=Rt.getTech;N.registerTech=Rt.registerTech;N.use=HU;Object.defineProperty(N,"middleware",{value:{},writeable:!1,enumerable:!0});Object.defineProperty(N.middleware,"TERMINATOR",{value:Kc,writeable:!1,enumerable:!0});N.browser=cU;N.TOUCH_ENABLED=qu;N.extend=LB;N.mergeOptions=Ft;N.bind=Nt;N.registerPlugin=sa.registerPlugin;N.deregisterPlugin=sa.deregisterPlugin;N.plugin=function(a,t){return lt.warn("videojs.plugin() is deprecated; use videojs.registerPlugin() instead"),sa.registerPlugin(a,t)};N.getPlugins=sa.getPlugins;N.getPlugin=sa.getPlugin;N.getPluginVersion=sa.getPluginVersion;N.addLanguage=function(a,t){var i;return a=(""+a).toLowerCase(),N.options.languages=Ft(N.options.languages,(i={},i[a]=t,i)),N.options.languages[a]};N.log=lt;N.createLogger=zS;N.createTimeRange=N.createTimeRanges=Eo;N.formatTime=Qu;N.setFormatTime=oB;N.resetFormatTime=uB;N.parseUrl=Nv;N.isCrossOrigin=Kh;N.EventTarget=_i;N.on=Ur;N.one=Gh;N.off=Fi;N.trigger=il;N.xhr=Hd;N.TextTrack=hf;N.AudioTrack=EE;N.VideoTrack=wE;["isEl","isTextNode","createEl","hasClass","addClass","removeClass","toggleClass","setAttributes","getAttributes","emptyEl","appendContent","insertContent"].forEach(function(a){N[a]=function(){return lt.warn("videojs."+a+"() is deprecated; use videojs.dom."+a+"() instead"),cE[a].apply(null,arguments)}});N.computedStyle=Kd;N.dom=cE;N.url=UU;N.defineLazyProperty=i0;N.addLanguage("en",{"Non-Fullscreen":"Exit Fullscreen"});var Sn=nf,th=function(t,i,r){return t&&r&&r.responseURL&&i!==r.responseURL?r.responseURL:i},On=function(t){return N.log.debug?N.log.debug.bind(N,"VHS:",t+" >"):function(){}},ws=1/30,Jn=ws*3,e1=function(t,i){var r=[],e;if(t&&t.length)for(e=0;e<t.length;e++)i(t.start(e),t.end(e))&&r.push([t.start(e),t.end(e)]);return N.createTimeRanges(r)},wu=function(t,i){return e1(t,function(r,e){return r-Jn<=i&&e+Jn>=i})},fc=function(t,i){return e1(t,function(r){return r-ws>=i})},kB=function(t){if(t.length<2)return N.createTimeRanges();for(var i=[],r=1;r<t.length;r++){var e=t.end(r-1),n=t.start(r);i.push([e,n])}return N.createTimeRanges(i)},RB=function(t,i){var r=null,e=null,n=0,s=[],o=[];if(!t||!t.length||!i||!i.length)return N.createTimeRange();for(var l=t.length;l--;)s.push({time:t.start(l),type:"start"}),s.push({time:t.end(l),type:"end"});for(l=i.length;l--;)s.push({time:i.start(l),type:"start"}),s.push({time:i.end(l),type:"end"});for(s.sort(function(f,m){return f.time-m.time}),l=0;l<s.length;l++)s[l].type==="start"?(n++,n===2&&(r=s[l].time)):s[l].type==="end"&&(n--,n===1&&(e=s[l].time)),r!==null&&e!==null&&(o.push([r,e]),r=null,e=null);return N.createTimeRanges(o)},t1=function(t){var i=[];if(!t||!t.length)return"";for(var r=0;r<t.length;r++)i.push(t.start(r)+" => "+t.end(r));return i.join(", ")},MB=function(t,i,r){r===void 0&&(r=1);var e=t.length?t.end(t.length-1):0;return(e-i)/r},po=function(t){for(var i=[],r=0;r<t.length;r++)i.push({start:t.start(r),end:t.end(r)});return i},FB=function(t,i){if(t===i)return!1;if(!t&&i||!i&&t||t.length!==i.length)return!0;for(var r=0;r<t.length;r++)if(t.start(r)!==i.start(r)||t.end(r)!==i.end(r))return!0;return!1},JT=function(t){if(!(!t||!t.length||!t.end))return t.end(t.length-1)},r0=function(t,i){var r=0;if(!t||!t.length)return r;for(var e=0;e<t.length;e++){var n=t.start(e),s=t.end(e);if(!(i>s)){if(i>n&&i<=s){r+=s-i;continue}r+=s-n}}return r},ZT=N.createTimeRange,n0=function(t,i){if(!i.preload)return i.duration;var r=0;return(i.parts||[]).forEach(function(e){r+=e.duration}),(i.preloadHints||[]).forEach(function(e){e.type==="PART"&&(r+=t.partTargetDuration)}),r},dg=function(t){return(t.segments||[]).reduce(function(i,r,e){return r.parts?r.parts.forEach(function(n,s){i.push({duration:n.duration,segmentIndex:e,partIndex:s,part:n,segment:r})}):i.push({duration:r.duration,segmentIndex:e,partIndex:null,segment:r,part:null}),i},[])},i1=function(t){var i=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return i&&i.parts||[]},r1=function(t){var i=t.preloadSegment;if(i){var r=i.parts,e=i.preloadHints,n=(e||[]).reduce(function(s,o){return s+(o.type==="PART"?1:0)},0);return n+=r&&r.length?r.length:0,n}},n1=function(t,i){if(i.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;var r=i1(i).length>0;return r&&i.serverControl&&i.serverControl.partHoldBack?i.serverControl.partHoldBack:r&&i.partTargetDuration?i.partTargetDuration*3:i.serverControl&&i.serverControl.holdBack?i.serverControl.holdBack:i.targetDuration?i.targetDuration*3:0},NB=function(t,i){var r=0,e=i-t.mediaSequence,n=t.segments[e];if(n){if(typeof n.start<"u")return{result:n.start,precise:!0};if(typeof n.end<"u")return{result:n.end-n.duration,precise:!0}}for(;e--;){if(n=t.segments[e],typeof n.end<"u")return{result:r+n.end,precise:!0};if(r+=n0(t,n),typeof n.start<"u")return{result:r+n.start,precise:!0}}return{result:r,precise:!1}},UB=function(t,i){for(var r=0,e,n=i-t.mediaSequence;n<t.segments.length;n++){if(e=t.segments[n],typeof e.start<"u")return{result:e.start-r,precise:!0};if(r+=n0(t,e),typeof e.end<"u")return{result:e.end-r,precise:!0}}return{result:-1,precise:!1}},a1=function(t,i,r){if(typeof i>"u"&&(i=t.mediaSequence+t.segments.length),i<t.mediaSequence)return 0;var e=NB(t,i);if(e.precise)return e.result;var n=UB(t,i);return n.precise?n.result:e.result+r},s1=function(t,i,r){if(!t)return 0;if(typeof r!="number"&&(r=0),typeof i>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return F.Infinity}return a1(t,i,r)},Od=function(t){var i=t.defaultDuration,r=t.durationList,e=t.startIndex,n=t.endIndex,s=0;if(e>n){var o=[n,e];e=o[0],n=o[1]}if(e<0){for(var l=e;l<Math.min(0,n);l++)s+=i;e=0}for(var f=e;f<n;f++)s+=r[f].duration;return s},o1=function(t,i,r,e){if(!t||!t.segments)return null;if(t.endList)return s1(t);if(i===null)return null;i=i||0;var n=a1(t,t.mediaSequence+t.segments.length,i);return r&&(e=typeof e=="number"?e:n1(null,t),n-=e),Math.max(0,n)},BB=function(t,i,r){var e=!0,n=i||0,s=o1(t,i,e,r);return s===null?ZT():ZT(n,s)},jB=function(t){for(var i=t.playlist,r=t.currentTime,e=t.startingSegmentIndex,n=t.startingPartIndex,s=t.startTime,o=t.experimentalExactManifestTimings,l=r-s,f=dg(i),m=0,v=0;v<f.length;v++){var y=f[v];if(e===y.segmentIndex&&!(typeof n=="number"&&typeof y.partIndex=="number"&&n!==y.partIndex)){m=v;break}}if(l<0){if(m>0)for(var E=m-1;E>=0;E--){var I=f[E];if(l+=I.duration,o){if(l<0)continue}else if(l+ws<=0)continue;return{partIndex:I.partIndex,segmentIndex:I.segmentIndex,startTime:s-Od({defaultDuration:i.targetDuration,durationList:f,startIndex:m,endIndex:E})}}return{partIndex:f[0]&&f[0].partIndex||null,segmentIndex:f[0]&&f[0].segmentIndex||0,startTime:r}}if(m<0){for(var O=m;O<0;O++)if(l-=i.targetDuration,l<0)return{partIndex:f[0]&&f[0].partIndex||null,segmentIndex:f[0]&&f[0].segmentIndex||0,startTime:r};m=0}for(var D=m;D<f.length;D++){var R=f[D];if(l-=R.duration,o){if(l>0)continue}else if(l-ws>=0)continue;return{partIndex:R.partIndex,segmentIndex:R.segmentIndex,startTime:s+Od({defaultDuration:i.targetDuration,durationList:f,startIndex:m,endIndex:D})}}return{segmentIndex:f[f.length-1].segmentIndex,partIndex:f[f.length-1].partIndex,startTime:r}},u1=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},a0=function(t){return t.excludeUntil&&t.excludeUntil===1/0},Jh=function(t){var i=u1(t);return!t.disabled&&!i},VB=function(t){return t.disabled},HB=function(t){for(var i=0;i<t.segments.length;i++)if(t.segments[i].key)return!0;return!1},l1=function(t,i){return i.attributes&&i.attributes[t]},$B=function(t,i,r,e){if(e===void 0&&(e=0),!l1("BANDWIDTH",r))return NaN;var n=t*r.attributes.BANDWIDTH;return(n-e*8)/i},fg=function(t,i){if(t.playlists.length===1)return!0;var r=i.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(function(e){return Jh(e)?(e.attributes.BANDWIDTH||0)<r:!1}).length===0},s0=function(t,i){return!t&&!i||!t&&i||t&&!i?!1:!!(t===i||t.id&&i.id&&t.id===i.id||t.resolvedUri&&i.resolvedUri&&t.resolvedUri===i.resolvedUri||t.uri&&i.uri&&t.uri===i.uri)},eb=function(t,i){var r=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{},e=!1;for(var n in r){for(var s in r[n])if(e=i(r[n][s]),e)break;if(e)break}return!!e},gf=function(t){if(!t||!t.playlists||!t.playlists.length){var i=eb(t,function(s){return s.playlists&&s.playlists.length||s.uri});return i}for(var r=function(o){var l=t.playlists[o],f=l.attributes&&l.attributes.CODECS;if(f&&f.split(",").every(function(v){return ov(v)}))return"continue";var m=eb(t,function(v){return s0(l,v)});return m?"continue":{v:!1}},e=0;e<t.playlists.length;e++){var n=r(e);if(n!=="continue"&&typeof n=="object")return n.v}return!0},hr={liveEdgeDelay:n1,duration:s1,seekable:BB,getMediaInfoForTime:jB,isEnabled:Jh,isDisabled:VB,isBlacklisted:u1,isIncompatible:a0,playlistEnd:o1,isAes:HB,hasAttribute:l1,estimateSegmentRequestTime:$B,isLowestEnabledRendition:fg,isAudioOnly:gf,playlistMatch:s0,segmentDurationWithParts:n0},d1=N.log,o0=function(t,i){return t+"-"+i},WB=function(t,i,r){return"placeholder-uri-"+t+"-"+i+"-"+r},qB=function(t){var i=t.onwarn,r=t.oninfo,e=t.manifestString,n=t.customTagParsers,s=n===void 0?[]:n,o=t.customTagMappers,l=o===void 0?[]:o,f=t.experimentalLLHLS,m=new Qx;i&&m.on("warn",i),r&&m.on("info",r),s.forEach(function(O){return m.addParser(O)}),l.forEach(function(O){return m.addTagMapper(O)}),m.push(e),m.end();var v=m.manifest;if(f||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(O){v.hasOwnProperty(O)&&delete v[O]}),v.segments&&v.segments.forEach(function(O){["parts","preloadHints"].forEach(function(D){O.hasOwnProperty(D)&&delete O[D]})})),!v.targetDuration){var y=10;v.segments&&v.segments.length&&(y=v.segments.reduce(function(O,D){return Math.max(O,D.duration)},0)),i&&i("manifest has no targetDuration defaulting to "+y),v.targetDuration=y}var E=i1(v);if(E.length&&!v.partTargetDuration){var I=E.reduce(function(O,D){return Math.max(O,D.duration)},0);i&&(i("manifest has no partTargetDuration defaulting to "+I),d1.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),v.partTargetDuration=I}return v},ol=function(t,i){t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(r){if(t.mediaGroups[r])for(var e in t.mediaGroups[r])for(var n in t.mediaGroups[r][e]){var s=t.mediaGroups[r][e][n];i(s,r,e,n)}})},f1=function(t){var i=t.playlist,r=t.uri,e=t.id;i.id=e,i.playlistErrors_=0,r&&(i.uri=r),i.attributes=i.attributes||{}},GB=function(t){for(var i=t.playlists.length;i--;){var r=t.playlists[i];f1({playlist:r,id:o0(i,r.uri)}),r.resolvedUri=Sn(t.uri,r.uri),t.playlists[r.id]=r,t.playlists[r.uri]=r,r.attributes.BANDWIDTH||d1.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},zB=function(t){ol(t,function(i){i.uri&&(i.resolvedUri=Sn(t.uri,i.uri))})},KB=function(t,i){var r=o0(0,i),e={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:F.location.href,resolvedUri:F.location.href,playlists:[{uri:i,id:r,resolvedUri:i,attributes:{}}]};return e.playlists[r]=e.playlists[0],e.playlists[i]=e.playlists[0],e},c1=function(t,i,r){r===void 0&&(r=WB),t.uri=i;for(var e=0;e<t.playlists.length;e++)if(!t.playlists[e].uri){var n="placeholder-uri-"+e;t.playlists[e].uri=n}var s=gf(t);ol(t,function(o,l,f,m){if(!o.playlists||!o.playlists.length){if(s&&l==="AUDIO"&&!o.uri)for(var v=0;v<t.playlists.length;v++){var y=t.playlists[v];if(y.attributes&&y.attributes.AUDIO&&y.attributes.AUDIO===f)return}o.playlists=[Ni({},o)]}o.playlists.forEach(function(E,I){var O=r(l,f,m,E),D=o0(I,O);E.uri?E.resolvedUri=E.resolvedUri||Sn(t.uri,E.uri):(E.uri=I===0?O:D,E.resolvedUri=E.uri),E.id=E.id||D,E.attributes=E.attributes||{},t.playlists[E.id]=E,t.playlists[E.uri]=E})}),GB(t),zB(t)},ih=N.mergeOptions,XB=N.EventTarget,QB=function(t,i){if(i.endList||!i.serverControl)return t;var r={};if(i.serverControl.canBlockReload){var e=i.preloadSegment,n=i.mediaSequence+i.segments.length;if(e){var s=e.parts||[],o=r1(i)-1;o>-1&&o!==s.length-1&&(r._HLS_part=o),(o>-1||s.length)&&n--}r._HLS_msn=n}if(i.serverControl&&i.serverControl.canSkipUntil&&(r._HLS_skip=i.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(r).length){var l=new F.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(f){r.hasOwnProperty(f)&&l.searchParams.set(f,r[f])}),t=l.toString()}return t},YB=function(t,i){if(!t)return i;var r=ih(t,i);if(t.preloadHints&&!i.preloadHints&&delete r.preloadHints,t.parts&&!i.parts)delete r.parts;else if(t.parts&&i.parts)for(var e=0;e<i.parts.length;e++)t.parts&&t.parts[e]&&(r.parts[e]=ih(t.parts[e],i.parts[e]));return!t.skipped&&i.skipped&&(r.skipped=!1),t.preload&&!i.preload&&(r.preload=!1),r},JB=function(t,i,r){var e=t.slice(),n=i.slice();r=r||0;for(var s=[],o,l=0;l<n.length;l++){var f=e[l+r],m=n[l];f?(o=f.map||o,s.push(YB(f,m))):(o&&!m.map&&(m.map=o),s.push(m))}return s},h1=function(t,i){!t.resolvedUri&&t.uri&&(t.resolvedUri=Sn(i,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=Sn(i,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=Sn(i,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=Sn(i,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(function(r){r.resolvedUri||(r.resolvedUri=Sn(i,r.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(function(r){r.resolvedUri||(r.resolvedUri=Sn(i,r.uri))})},p1=function(t){var i=t.segments||[],r=t.preloadSegment;if(r&&r.parts&&r.parts.length){if(r.preloadHints){for(var e=0;e<r.preloadHints.length;e++)if(r.preloadHints[e].type==="MAP")return i}r.duration=t.targetDuration,r.preload=!0,i.push(r)}return i},m1=function(t,i){return t===i||t.segments&&i.segments&&t.segments.length===i.segments.length&&t.endList===i.endList&&t.mediaSequence===i.mediaSequence&&t.preloadSegment===i.preloadSegment},cg=function(t,i,r){r===void 0&&(r=m1);var e=ih(t,{}),n=e.playlists[i.id];if(!n||r(n,i))return null;i.segments=p1(i);var s=ih(n,i);if(s.preloadSegment&&!i.preloadSegment&&delete s.preloadSegment,n.segments){if(i.skip){i.segments=i.segments||[];for(var o=0;o<i.skip.skippedSegments;o++)i.segments.unshift({skipped:!0})}s.segments=JB(n.segments,i.segments,i.mediaSequence-n.mediaSequence)}s.segments.forEach(function(f){h1(f,s.resolvedUri)});for(var l=0;l<e.playlists.length;l++)e.playlists[l].id===i.id&&(e.playlists[l]=s);return e.playlists[i.id]=s,e.playlists[i.uri]=s,ol(t,function(f,m,v,y){if(f.playlists)for(var E=0;E<f.playlists.length;E++)i.id===f.playlists[E].id&&(f.playlists[E]=s)}),e},hg=function(t,i){var r=t.segments||[],e=r[r.length-1],n=e&&e.parts&&e.parts[e.parts.length-1],s=n&&n.duration||e&&e.duration;return i&&s?s*1e3:(t.partTargetDuration||t.targetDuration||10)*500},Cu=function(a){Ae(t,a);function t(r,e,n){var s;if(n===void 0&&(n={}),s=a.call(this)||this,!r)throw new Error("A non-empty playlist URL or object is required");s.logger_=On("PlaylistLoader");var o=n,l=o.withCredentials,f=l===void 0?!1:l,m=o.handleManifestRedirects,v=m===void 0?!1:m;s.src=r,s.vhs_=e,s.withCredentials=f,s.handleManifestRedirects=v;var y=e.options_;return s.customTagParsers=y&&y.customTagParsers||[],s.customTagMappers=y&&y.customTagMappers||[],s.experimentalLLHLS=y&&y.experimentalLLHLS||!1,N.browser.IE_VERSION&&(s.experimentalLLHLS=!1),s.state="HAVE_NOTHING",s.handleMediaupdatetimeout_=s.handleMediaupdatetimeout_.bind(Ue(s)),s.on("mediaupdatetimeout",s.handleMediaupdatetimeout_),s}var i=t.prototype;return i.handleMediaupdatetimeout_=function(){var e=this;if(this.state==="HAVE_METADATA"){var n=this.media(),s=Sn(this.master.uri,n.uri);this.experimentalLLHLS&&(s=QB(s,n)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials},function(o,l){if(e.request){if(o)return e.playlistRequestError(e.request,e.media(),"HAVE_METADATA");e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}})}},i.playlistRequestError=function(e,n,s){var o=n.uri,l=n.id;this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[l],status:e.status,message:"HLS playlist request error at URL: "+o+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},i.parseManifest_=function(e){var n=this,s=e.url,o=e.manifestString;return qB({onwarn:function(f){var m=f.message;return n.logger_("m3u8-parser warn for "+s+": "+m)},oninfo:function(f){var m=f.message;return n.logger_("m3u8-parser info for "+s+": "+m)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},i.haveMetadata=function(e){var n=e.playlistString,s=e.playlistObject,o=e.url,l=e.id;this.request=null,this.state="HAVE_METADATA";var f=s||this.parseManifest_({url:o,manifestString:n});f.lastRequest=Date.now(),f1({playlist:f,uri:o,id:l});var m=cg(this.master,f);this.targetDuration=f.partTargetDuration||f.targetDuration,this.pendingMedia_=null,m?(this.master=m,this.media_=this.master.playlists[l]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(hg(this.media(),!!m)),this.trigger("loadedplaylist")},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),F.clearTimeout(this.mediaUpdateTimeout),F.clearTimeout(this.finalRenditionTimeout),this.off()},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e,n){var s=this;if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(F.clearTimeout(this.finalRenditionTimeout),n){var o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=F.setTimeout(this.media.bind(this,e,!1),o);return}var l=this.state,f=!this.media_||e.id!==this.media_.id,m=this.master.playlists[e.id];if(m&&m.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,f&&(this.trigger("mediachanging"),l==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(hg(e,!0)),!!f){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},function(v,y){if(s.request){if(e.lastRequest=Date.now(),e.resolvedUri=th(s.handleManifestRedirects,e.resolvedUri,y),v)return s.playlistRequestError(s.request,e,l);s.haveMetadata({playlistString:y.responseText,url:e.uri,id:e.id}),l==="HAVE_MASTER"?s.trigger("loadedmetadata"):s.trigger("mediachange")}})}},i.pause=function(){this.mediaUpdateTimeout&&(F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},i.load=function(e){var n=this;this.mediaUpdateTimeout&&(F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var s=this.media();if(e){var o=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=F.setTimeout(function(){n.mediaUpdateTimeout=null,n.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},i.updateMediaUpdateTimeout_=function(e){var n=this;this.mediaUpdateTimeout&&(F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=F.setTimeout(function(){n.mediaUpdateTimeout=null,n.trigger("mediaupdatetimeout"),n.updateMediaUpdateTimeout_(e)},e))},i.start=function(){var e=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=F.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){e.setupInitialPlaylist(e.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(n,s){if(e.request){if(e.request=null,n)return e.error={status:s.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:s.responseText,code:2},e.state==="HAVE_NOTHING"&&(e.started=!1),e.trigger("error");e.src=th(e.handleManifestRedirects,e.src,s);var o=e.parseManifest_({manifestString:s.responseText,url:e.src});e.setupInitialPlaylist(o)}})},i.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},i.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists){this.master=e,c1(this.master,this.srcUri()),e.playlists.forEach(function(s){s.segments=p1(s),s.segments.forEach(function(o){h1(o,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var n=this.srcUri()||F.location.href;this.master=KB(e,n),this.haveMetadata({playlistObject:e,url:n,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(XB),ZB=N.xhr,ej=N.mergeOptions,pg=function(t,i,r,e){var n=t.responseType==="arraybuffer"?t.response:t.responseText;!i&&n&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=n.byteLength||n.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),r.headers&&(t.responseHeaders=r.headers),i&&i.code==="ETIMEDOUT"&&(t.timedout=!0),!i&&!t.aborted&&r.statusCode!==200&&r.statusCode!==206&&r.statusCode!==0&&(i=new Error("XHR Failed with a response of: "+(t&&(n||t.responseText)))),e(i,t)},g1=function(){var t=function i(r,e){r=ej({timeout:45e3},r);var n=i.beforeRequest||N.Vhs.xhr.beforeRequest;if(n&&typeof n=="function"){var s=n(r);s&&(r=s)}var o=N.Vhs.xhr.original===!0?ZB:N.Vhs.xhr,l=o(r,function(m,v){return pg(l,m,v,e)}),f=l.abort;return l.abort=function(){return l.aborted=!0,f.apply(l,arguments)},l.uri=r.uri,l.requestTime=Date.now(),l};return t.original=!0,t},tj=function(t){var i,r=t.offset;return typeof t.offset=="bigint"||typeof t.length=="bigint"?i=F.BigInt(t.offset)+F.BigInt(t.length)-F.BigInt(1):i=t.offset+t.length-1,"bytes="+r+"-"+i},mg=function(t){var i={};return t.byterange&&(i.Range=tj(t.byterange)),i},ij=function(t,i){return t.start(i)+"-"+t.end(i)},rj=function(t,i){var r=t.toString(16);return"00".substring(0,2-r.length)+r+(i%2?" ":"")},nj=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},v1=function(t){var i={};return Object.keys(t).forEach(function(r){var e=t[r];uv(e)?i[r]={bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:i[r]=e}),i},rh=function(t){var i=t.byterange||{length:1/0,offset:0};return[i.length,i.offset,t.resolvedUri].join(",")},_1=function(t){return t.resolvedUri},y1=function(t){for(var i=Array.prototype.slice.call(t),r=16,e="",n,s,o=0;o<i.length/r;o++)n=i.slice(o*r,o*r+r).map(rj).join(""),s=i.slice(o*r,o*r+r).map(nj).join(""),e+=n+" "+s+`
`;return e},aj=function(t){var i=t.bytes;return y1(i)},sj=function(t){var i="",r;for(r=0;r<t.length;r++)i+=ij(t,r)+" ";return i},oj=Object.freeze({__proto__:null,createTransferableMessage:v1,initSegmentId:rh,segmentKeyId:_1,hexDump:y1,tagDump:aj,textRanges:sj}),T1=.25,uj=function(t,i){if(!i.dateTimeObject)return null;var r=i.videoTimingInfo.transmuxerPrependedSeconds,e=i.videoTimingInfo.transmuxedPresentationStart,n=e+r,s=t-n;return new Date(i.dateTimeObject.getTime()+s*1e3)},lj=function(t){return t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds},dj=function(t,i){var r;try{r=new Date(t)}catch{return null}if(!i||!i.segments||i.segments.length===0)return null;var e=i.segments[0];if(r<e.dateTimeObject)return null;for(var n=0;n<i.segments.length-1;n++){e=i.segments[n];var s=i.segments[n+1].dateTimeObject;if(r<s)break}var o=i.segments[i.segments.length-1],l=o.dateTimeObject,f=o.videoTimingInfo?lj(o.videoTimingInfo):o.duration+o.duration*T1,m=new Date(l.getTime()+f*1e3);return r>m?null:(r>l&&(e=o),{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:hr.duration(i,i.mediaSequence+i.segments.indexOf(e)),type:e.videoTimingInfo?"accurate":"estimate"})},fj=function(t,i){if(!i||!i.segments||i.segments.length===0)return null;for(var r=0,e,n=0;n<i.segments.length&&(e=i.segments[n],r=e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationEnd:r+e.duration,!(t<=r));n++);var s=i.segments[i.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>r){if(t>r+s.duration*T1)return null;e=s}return{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:r-e.duration,type:e.videoTimingInfo?"accurate":"estimate"}},cj=function(t,i){var r,e;try{r=new Date(t),e=new Date(i)}catch{}var n=r.getTime(),s=e.getTime();return(s-n)/1e3},hj=function(t){if(!t.segments||t.segments.length===0)return!1;for(var i=0;i<t.segments.length;i++){var r=t.segments[i];if(!r.dateTimeObject)return!1}return!0},pj=function(t){var i=t.playlist,r=t.time,e=r===void 0?void 0:r,n=t.callback;if(!n)throw new Error("getProgramTime: callback must be provided");if(!i||e===void 0)return n({message:"getProgramTime: playlist and time must be provided"});var s=fj(e,i);if(!s)return n({message:"valid programTime was not found"});if(s.type==="estimate")return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var o={mediaSeconds:e},l=uj(e,s.segment);return l&&(o.programDateTime=l.toISOString()),n(null,o)},mj=function a(t){var i=t.programTime,r=t.playlist,e=t.retryCount,n=e===void 0?2:e,s=t.seekTo,o=t.pauseAfterSeek,l=o===void 0?!0:o,f=t.tech,m=t.callback;if(!m)throw new Error("seekToProgramTime: callback must be provided");if(typeof i>"u"||!r||!s)return m({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!f.hasStarted_)return m({message:"player must be playing a live stream to start buffering"});if(!hj(r))return m({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});var v=dj(i,r);if(!v)return m({message:i+" was not found in the stream"});var y=v.segment,E=cj(y.dateTimeObject,i);if(v.type==="estimate"){if(n===0)return m({message:i+" is not buffered yet. Try again"});s(v.estimatedStart+E),f.one("seeked",function(){a({programTime:i,playlist:r,retryCount:n-1,seekTo:s,pauseAfterSeek:l,tech:f,callback:m})});return}var I=y.start+E,O=function(){return m(null,f.currentTime())};f.one("seeked",O),l&&f.pause(),s(I)},ym=function(t,i){if(t.readyState===4)return i()},gj=function(t,i,r){var e=[],n,s=!1,o=function(y,E,I,O){return E.abort(),s=!0,r(y,E,I,O)},l=function(y,E){if(!s){if(y)return o(y,E,"",e);var I=E.responseText.substring(e&&e.byteLength||0,E.responseText.length);if(e=Zx(e,lv(I,!0)),n=n||Su(e),e.length<10||n&&e.length<n+2)return ym(E,function(){return o(y,E,"",e)});var O=Zu(e);return O==="ts"&&e.length<188?ym(E,function(){return o(y,E,"",e)}):!O&&e.length<376?ym(E,function(){return o(y,E,"",e)}):o(null,E,O,e)}},f={uri:t,beforeSend:function(y){y.overrideMimeType("text/plain; charset=x-user-defined"),y.addEventListener("progress",function(E){return E.total,E.loaded,pg(y,null,{statusCode:y.status},l)})}},m=i(f,function(v,y){return pg(m,v,y,l)});return m},vj=N.EventTarget,b1=N.mergeOptions,tb=function(t,i){if(!m1(t,i)||t.sidx&&i.sidx&&(t.sidx.offset!==i.sidx.offset||t.sidx.length!==i.sidx.length))return!1;if(!t.sidx&&i.sidx||t.sidx&&!i.sidx||t.segments&&!i.segments||!t.segments&&i.segments)return!1;if(!t.segments&&!i.segments)return!0;for(var r=0;r<t.segments.length;r++){var e=t.segments[r],n=i.segments[r];if(e.uri!==n.uri)return!1;if(!(!e.byterange&&!n.byterange)){var s=e.byterange,o=n.byterange;if(s&&!o||!s&&o||s.offset!==o.offset||s.length!==o.length)return!1}}return!0},_j=function(t,i,r,e){var n=e.attributes.NAME||r;return"placeholder-uri-"+t+"-"+i+"-"+n},yj=function(t){var i=t.masterXml,r=t.srcUrl,e=t.clientOffset,n=t.sidxMapping,s=t.previousManifest,o=MS(i,{manifestUri:r,clientOffset:e,sidxMapping:n,previousManifest:s});return c1(o,r,_j),o},Tj=function(t,i){ol(t,function(r,e,n,s){s in i.mediaGroups[e][n]||delete t.mediaGroups[e][n][s]})},bj=function(t,i,r){for(var e=!0,n=b1(t,{duration:i.duration,minimumUpdatePeriod:i.minimumUpdatePeriod,timelineStarts:i.timelineStarts}),s=0;s<i.playlists.length;s++){var o=i.playlists[s];if(o.sidx){var l=Lo(o.sidx);r&&r[l]&&r[l].sidx&&lf(o,r[l].sidx,o.sidx.resolvedUri)}var f=cg(n,o,tb);f&&(n=f,e=!1)}return ol(i,function(m,v,y,E){if(m.playlists&&m.playlists.length){var I=m.playlists[0].id,O=cg(n,m.playlists[0],tb);O&&(n=O,E in n.mediaGroups[v][y]||(n.mediaGroups[v][y][E]=m),n.mediaGroups[v][y][E].playlists[0]=n.playlists[I],e=!1)}}),Tj(n,i),i.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(e=!1),e?null:n},xj=function(t,i){var r=Boolean(!t.map&&!i.map),e=r||Boolean(t.map&&i.map&&t.map.byterange.offset===i.map.byterange.offset&&t.map.byterange.length===i.map.byterange.length);return e&&t.uri===i.uri&&t.byterange.offset===i.byterange.offset&&t.byterange.length===i.byterange.length},ib=function(t,i){var r={};for(var e in t){var n=t[e],s=n.sidx;if(s){var o=Lo(s);if(!i[o])break;var l=i[o].sidxInfo;xj(l,s)&&(r[o]=i[o])}}return r},Sj=function(t,i){var r=ib(t.playlists,i),e=r;return ol(t,function(n,s,o,l){if(n.playlists&&n.playlists.length){var f=n.playlists;e=b1(e,ib(f,i))}}),e},gg=function(a){Ae(t,a);function t(r,e,n,s){var o;n===void 0&&(n={}),o=a.call(this)||this,o.masterPlaylistLoader_=s||Ue(o),s||(o.isMaster_=!0);var l=n,f=l.withCredentials,m=f===void 0?!1:f,v=l.handleManifestRedirects,y=v===void 0?!1:v;if(o.vhs_=e,o.withCredentials=m,o.handleManifestRedirects=y,!r)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=On("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=r,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=r,o}var i=t.prototype;return i.requestErrored_=function(e,n,s){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:n.status,message:"DASH request error at URL: "+n.uri,response:n.response,code:2},s&&(this.state=s),this.trigger("error"),!0},i.addSidxSegments_=function(e,n,s){var o=this,l=e.sidx&&Lo(e.sidx);if(!e.sidx||!l||this.masterPlaylistLoader_.sidxMapping_[l]){this.mediaRequest_=F.setTimeout(function(){return s(!1)},0);return}var f=th(this.handleManifestRedirects,e.sidx.resolvedUri),m=function(y,E){if(!o.requestErrored_(y,E,n)){var I=o.masterPlaylistLoader_.sidxMapping_,O;try{O=US($e(E.response).subarray(8))}catch(D){o.requestErrored_(D,E,n);return}return I[l]={sidxInfo:e.sidx,sidx:O},lf(e,O,e.sidx.resolvedUri),s(!0)}};this.request=gj(f,this.vhs_.xhr,function(v,y,E,I){if(v)return m(v,y);if(!E||E!=="mp4")return m({status:y.status,message:"Unsupported "+(E||"unknown")+" container type for sidx segment at URL: "+f,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},y);var O=e.sidx.byterange,D=O.offset,R=O.length;if(I.length>=R+D)return m(v,{response:I.subarray(D,D+R),status:y.status,uri:y.uri});o.request=o.vhs_.xhr({uri:f,responseType:"arraybuffer",headers:mg({byterange:e.sidx.byterange})},m)})},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},F.clearTimeout(this.minimumUpdatePeriodTimeout_),F.clearTimeout(this.mediaRequest_),F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},i.hasPendingRequest=function(){return this.request||this.mediaRequest_},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e){var n=this;if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if(typeof e=="string"){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var o=!this.media_||e.id!==this.media_.id;if(o&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}o&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,s,function(l){n.haveMetadata({startingState:s,playlist:e})}))},i.haveMetadata=function(e){var n=e.startingState,s=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),n==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},i.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(F.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},i.load=function(e){var n=this;F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var s=this.media();if(e){var o=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=F.setTimeout(function(){return n.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},i.start=function(){var e=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=F.setTimeout(function(){return e.haveMaster_()},0);return}this.requestMaster_(function(n,s){e.haveMaster_(),!e.hasPendingRequest()&&!e.media_&&e.media(e.masterPlaylistLoader_.master.playlists[0])})},i.requestMaster_=function(e){var n=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(s,o){if(n.requestErrored_(s,o)){n.state==="HAVE_NOTHING"&&(n.started=!1);return}var l=o.responseText!==n.masterPlaylistLoader_.masterXml_;if(n.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?n.masterLoaded_=Date.parse(o.responseHeaders.date):n.masterLoaded_=Date.now(),n.masterPlaylistLoader_.srcUrl=th(n.handleManifestRedirects,n.masterPlaylistLoader_.srcUrl,o),l){n.handleMaster_(),n.syncClientServerClock_(function(){return e(o,l)});return}return e(o,l)})},i.syncClientServerClock_=function(e){var n=this,s=FS(this.masterPlaylistLoader_.masterXml_);if(s===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e();if(s.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=s.value-Date.now(),e();this.request=this.vhs_.xhr({uri:Sn(this.masterPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(o,l){if(n.request){if(o)return n.masterPlaylistLoader_.clientOffset_=n.masterLoaded_-Date.now(),e();var f;s.method==="HEAD"?!l.responseHeaders||!l.responseHeaders.date?f=n.masterLoaded_:f=Date.parse(l.responseHeaders.date):f=Date.parse(l.responseText),n.masterPlaylistLoader_.clientOffset_=f-Date.now(),e()}})},i.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},i.handleMaster_=function(){this.mediaRequest_=null;var e=this.masterPlaylistLoader_.master,n=yj({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(n=bj(e,n,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=n||e;var s=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return s&&s!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=s),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(n)},i.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(F.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var n=e.master&&e.master.minimumUpdatePeriod;if(n===0&&(e.media()?n=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof n!="number"||n<=0){n<0&&this.logger_("found invalid minimumUpdatePeriod of "+n+", not setting a timeout");return}this.createMUPTimeout_(n)},i.createMUPTimeout_=function(e){var n=this.masterPlaylistLoader_;n.minimumUpdatePeriodTimeout_=F.setTimeout(function(){n.minimumUpdatePeriodTimeout_=null,n.trigger("minimumUpdatePeriod"),n.createMUPTimeout_(e)},e)},i.refreshXml_=function(){var e=this;this.requestMaster_(function(n,s){s&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=Sj(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.sidxMapping_),e.addSidxSegments_(e.media(),e.state,function(o){e.refreshMedia_(e.media().id)}))})},i.refreshMedia_=function(e){var n=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var s=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==s[e];if(o?this.media_=s[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var l=function f(){n.media().endList||(n.mediaUpdateTimeout=F.setTimeout(function(){n.trigger("mediaupdatetimeout"),f()},hg(n.media(),Boolean(o))))};l()}this.trigger("loadedplaylist")},t}(vj),pi={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},Ej=function(t){for(var i=new Uint8Array(new ArrayBuffer(t.length)),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i.buffer},x1=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},wj=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{var i=new BlobBuilder;return i.append(t),URL.createObjectURL(i.getBlob())}},S1=function(t){return function(){var i=wj(t),r=x1(new Worker(i));r.objURL=i;var e=r.terminate;return r.on=r.addEventListener,r.off=r.removeEventListener,r.terminate=function(){return URL.revokeObjectURL(i),e.call(this)},r}},E1=function(t){return"var browserWorkerPolyFill = "+x1.toString()+`;
browserWorkerPolyFill(self);
`+t},w1=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},Cj=E1(w1(function(){var a=function(){this.init=function(){var d={};this.on=function(p,h){d[p]||(d[p]=[]),d[p]=d[p].concat(h)},this.off=function(p,h){var g;return d[p]?(g=d[p].indexOf(h),d[p]=d[p].slice(),d[p].splice(g,1),g>-1):!1},this.trigger=function(p){var h,g,_,T;if(h=d[p],!!h)if(arguments.length===2)for(_=h.length,g=0;g<_;++g)h[g].call(this,arguments[1]);else{for(T=[],g=arguments.length,g=1;g<arguments.length;++g)T.push(arguments[g]);for(_=h.length,g=0;g<_;++g)h[g].apply(this,T)}},this.dispose=function(){d={}}}};a.prototype.pipe=function(x){return this.on("data",function(d){x.push(d)}),this.on("done",function(d){x.flush(d)}),this.on("partialdone",function(d){x.partialFlush(d)}),this.on("endedtimeline",function(d){x.endTimeline(d)}),this.on("reset",function(d){x.reset(d)}),x},a.prototype.push=function(x){this.trigger("data",x)},a.prototype.flush=function(x){this.trigger("done",x)},a.prototype.partialFlush=function(x){this.trigger("partialdone",x)},a.prototype.endTimeline=function(x){this.trigger("endedtimeline",x)},a.prototype.reset=function(x){this.trigger("reset",x)};var t=a,i=Math.pow(2,32),r=function(d){var p=new DataView(d.buffer,d.byteOffset,d.byteLength),h;return p.getBigUint64?(h=p.getBigUint64(0),h<Number.MAX_SAFE_INTEGER?Number(h):h):p.getUint32(0)*i+p.getUint32(4)},e={getUint64:r,MAX_UINT32:i},n=e.MAX_UINT32,s,o,l,f,m,v,y,E,I,O,D,R,H,Z,V,W,te,z,q,X,j,oe,re,se,he,le,pe,ne,fe,Ie,Ce,Xe,Be,Qe,Et,Tt;(function(){var x;if(re={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(x in re)re.hasOwnProperty(x)&&(re[x]=[x.charCodeAt(0),x.charCodeAt(1),x.charCodeAt(2),x.charCodeAt(3)]);se=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),le=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),he=new Uint8Array([0,0,0,1]),pe=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ne=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),fe={video:pe,audio:ne},Xe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Ce=new Uint8Array([0,0,0,0,0,0,0,0]),Be=new Uint8Array([0,0,0,0,0,0,0,0]),Qe=Be,Et=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Tt=Be,Ie=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),s=function(d){var p=[],h=0,g,_,T;for(g=1;g<arguments.length;g++)p.push(arguments[g]);for(g=p.length;g--;)h+=p[g].byteLength;for(_=new Uint8Array(h+8),T=new DataView(_.buffer,_.byteOffset,_.byteLength),T.setUint32(0,_.byteLength),_.set(d,4),g=0,h=8;g<p.length;g++)_.set(p[g],h),h+=p[g].byteLength;return _},o=function(){return s(re.dinf,s(re.dref,Xe))},l=function(d){return s(re.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,d.audioobjecttype<<3|d.samplingfrequencyindex>>>1,d.samplingfrequencyindex<<7|d.channelcount<<3,6,1,2]))},f=function(){return s(re.ftyp,se,he,se,le)},W=function(d){return s(re.hdlr,fe[d])},m=function(d){return s(re.mdat,d)},V=function(d){var p=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,d.duration>>>24&255,d.duration>>>16&255,d.duration>>>8&255,d.duration&255,85,196,0,0]);return d.samplerate&&(p[12]=d.samplerate>>>24&255,p[13]=d.samplerate>>>16&255,p[14]=d.samplerate>>>8&255,p[15]=d.samplerate&255),s(re.mdhd,p)},Z=function(d){return s(re.mdia,V(d),W(d.type),y(d))},v=function(d){return s(re.mfhd,new Uint8Array([0,0,0,0,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255]))},y=function(d){return s(re.minf,d.type==="video"?s(re.vmhd,Ie):s(re.smhd,Ce),o(),z(d))},E=function(d,p){for(var h=[],g=p.length;g--;)h[g]=X(p[g]);return s.apply(null,[re.moof,v(d)].concat(h))},I=function(d){for(var p=d.length,h=[];p--;)h[p]=R(d[p]);return s.apply(null,[re.moov,D(4294967295)].concat(h).concat(O(d)))},O=function(d){for(var p=d.length,h=[];p--;)h[p]=j(d[p]);return s.apply(null,[re.mvex].concat(h))},D=function(d){var p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(re.mvhd,p)},te=function(d){var p=d.samples||[],h=new Uint8Array(4+p.length),g,_;for(_=0;_<p.length;_++)g=p[_].flags,h[_+4]=g.dependsOn<<4|g.isDependedOn<<2|g.hasRedundancy;return s(re.sdtp,h)},z=function(d){return s(re.stbl,q(d),s(re.stts,Tt),s(re.stsc,Qe),s(re.stsz,Et),s(re.stco,Be))},function(){var x,d;q=function(h){return s(re.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),h.type==="video"?x(h):d(h))},x=function(h){var g=h.sps||[],_=h.pps||[],T=[],w=[],S,P;for(S=0;S<g.length;S++)T.push((g[S].byteLength&65280)>>>8),T.push(g[S].byteLength&255),T=T.concat(Array.prototype.slice.call(g[S]));for(S=0;S<_.length;S++)w.push((_[S].byteLength&65280)>>>8),w.push(_[S].byteLength&255),w=w.concat(Array.prototype.slice.call(_[S]));if(P=[re.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(h.width&65280)>>8,h.width&255,(h.height&65280)>>8,h.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(re.avcC,new Uint8Array([1,h.profileIdc,h.profileCompatibility,h.levelIdc,255].concat([g.length],T,[_.length],w))),s(re.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],h.sarRatio){var C=h.sarRatio[0],L=h.sarRatio[1];P.push(s(re.pasp,new Uint8Array([(C&4278190080)>>24,(C&16711680)>>16,(C&65280)>>8,C&255,(L&4278190080)>>24,(L&16711680)>>16,(L&65280)>>8,L&255])))}return s.apply(null,P)},d=function(h){return s(re.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(h.channelcount&65280)>>8,h.channelcount&255,(h.samplesize&65280)>>8,h.samplesize&255,0,0,0,0,(h.samplerate&65280)>>8,h.samplerate&255,0,0]),l(h))}}(),H=function(d){var p=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,0,(d.duration&4278190080)>>24,(d.duration&16711680)>>16,(d.duration&65280)>>8,d.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(d.width&65280)>>8,d.width&255,0,0,(d.height&65280)>>8,d.height&255,0,0]);return s(re.tkhd,p)},X=function(d){var p,h,g,_,T,w,S;return p=s(re.tfhd,new Uint8Array([0,0,0,58,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),w=Math.floor(d.baseMediaDecodeTime/n),S=Math.floor(d.baseMediaDecodeTime%n),h=s(re.tfdt,new Uint8Array([1,0,0,0,w>>>24&255,w>>>16&255,w>>>8&255,w&255,S>>>24&255,S>>>16&255,S>>>8&255,S&255])),T=32+20+8+16+8+8,d.type==="audio"?(g=oe(d,T),s(re.traf,p,h,g)):(_=te(d),g=oe(d,_.length+T),s(re.traf,p,h,g,_))},R=function(d){return d.duration=d.duration||4294967295,s(re.trak,H(d),Z(d))},j=function(d){var p=new Uint8Array([0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return d.type!=="video"&&(p[p.length-1]=0),s(re.trex,p)},function(){var x,d,p;p=function(g,_){var T=0,w=0,S=0,P=0;return g.length&&(g[0].duration!==void 0&&(T=1),g[0].size!==void 0&&(w=2),g[0].flags!==void 0&&(S=4),g[0].compositionTimeOffset!==void 0&&(P=8)),[0,0,T|w|S|P,1,(g.length&4278190080)>>>24,(g.length&16711680)>>>16,(g.length&65280)>>>8,g.length&255,(_&4278190080)>>>24,(_&16711680)>>>16,(_&65280)>>>8,_&255]},d=function(g,_){var T,w,S,P,C,L;for(P=g.samples||[],_+=8+12+16*P.length,S=p(P,_),w=new Uint8Array(S.length+P.length*16),w.set(S),T=S.length,L=0;L<P.length;L++)C=P[L],w[T++]=(C.duration&4278190080)>>>24,w[T++]=(C.duration&16711680)>>>16,w[T++]=(C.duration&65280)>>>8,w[T++]=C.duration&255,w[T++]=(C.size&4278190080)>>>24,w[T++]=(C.size&16711680)>>>16,w[T++]=(C.size&65280)>>>8,w[T++]=C.size&255,w[T++]=C.flags.isLeading<<2|C.flags.dependsOn,w[T++]=C.flags.isDependedOn<<6|C.flags.hasRedundancy<<4|C.flags.paddingValue<<1|C.flags.isNonSyncSample,w[T++]=C.flags.degradationPriority&240<<8,w[T++]=C.flags.degradationPriority&15,w[T++]=(C.compositionTimeOffset&4278190080)>>>24,w[T++]=(C.compositionTimeOffset&16711680)>>>16,w[T++]=(C.compositionTimeOffset&65280)>>>8,w[T++]=C.compositionTimeOffset&255;return s(re.trun,w)},x=function(g,_){var T,w,S,P,C,L;for(P=g.samples||[],_+=8+12+8*P.length,S=p(P,_),T=new Uint8Array(S.length+P.length*8),T.set(S),w=S.length,L=0;L<P.length;L++)C=P[L],T[w++]=(C.duration&4278190080)>>>24,T[w++]=(C.duration&16711680)>>>16,T[w++]=(C.duration&65280)>>>8,T[w++]=C.duration&255,T[w++]=(C.size&4278190080)>>>24,T[w++]=(C.size&16711680)>>>16,T[w++]=(C.size&65280)>>>8,T[w++]=C.size&255;return s(re.trun,T)},oe=function(g,_){return g.type==="audio"?x(g,_):d(g,_)}}();var bt={ftyp:f,mdat:m,moof:E,moov:I,initSegment:function(d){var p=f(),h=I(d),g;return g=new Uint8Array(p.byteLength+h.byteLength),g.set(p),g.set(h,p.byteLength),g}},wt=function(d){var p,h,g=[],_=[];for(_.byteLength=0,_.nalCount=0,_.duration=0,g.byteLength=0,p=0;p<d.length;p++)h=d[p],h.nalUnitType==="access_unit_delimiter_rbsp"?(g.length&&(g.duration=h.dts-g.dts,_.byteLength+=g.byteLength,_.nalCount+=g.length,_.duration+=g.duration,_.push(g)),g=[h],g.byteLength=h.data.byteLength,g.pts=h.pts,g.dts=h.dts):(h.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(g.keyFrame=!0),g.duration=h.dts-g.dts,g.byteLength+=h.data.byteLength,g.push(h));return _.length&&(!g.duration||g.duration<=0)&&(g.duration=_[_.length-1].duration),_.byteLength+=g.byteLength,_.nalCount+=g.length,_.duration+=g.duration,_.push(g),_},Ct=function(d){var p,h,g=[],_=[];for(g.byteLength=0,g.nalCount=0,g.duration=0,g.pts=d[0].pts,g.dts=d[0].dts,_.byteLength=0,_.nalCount=0,_.duration=0,_.pts=d[0].pts,_.dts=d[0].dts,p=0;p<d.length;p++)h=d[p],h.keyFrame?(g.length&&(_.push(g),_.byteLength+=g.byteLength,_.nalCount+=g.nalCount,_.duration+=g.duration),g=[h],g.nalCount=h.length,g.byteLength=h.byteLength,g.pts=h.pts,g.dts=h.dts,g.duration=h.duration):(g.duration+=h.duration,g.nalCount+=h.length,g.byteLength+=h.byteLength,g.push(h));return _.length&&g.duration<=0&&(g.duration=_[_.length-1].duration),_.byteLength+=g.byteLength,_.nalCount+=g.nalCount,_.duration+=g.duration,_.push(g),_},ct=function(d){var p;return!d[0][0].keyFrame&&d.length>1&&(p=d.shift(),d.byteLength-=p.byteLength,d.nalCount-=p.nalCount,d[0][0].dts=p.dts,d[0][0].pts=p.pts,d[0][0].duration+=p.duration),d},Gt=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},fi=function(d,p){var h=Gt();return h.dataOffset=p,h.compositionTimeOffset=d.pts-d.dts,h.duration=d.duration,h.size=4*d.length,h.size+=d.byteLength,d.keyFrame&&(h.flags.dependsOn=2,h.flags.isNonSyncSample=0),h},yi=function(d,p){var h,g,_,T,w,S=p||0,P=[];for(h=0;h<d.length;h++)for(T=d[h],g=0;g<T.length;g++)w=T[g],_=fi(w,S),S+=_.size,P.push(_);return P},G=function(d){var p,h,g,_,T,w,S=0,P=d.byteLength,C=d.nalCount,L=P+4*C,B=new Uint8Array(L),ee=new DataView(B.buffer);for(p=0;p<d.length;p++)for(_=d[p],h=0;h<_.length;h++)for(T=_[h],g=0;g<T.length;g++)w=T[g],ee.setUint32(S,w.data.byteLength),S+=4,B.set(w.data,S),S+=w.data.byteLength;return B},J=function(d,p){var h,g=p||0,_=[];return h=fi(d,g),_.push(h),_},de=function(d){var p,h,g=0,_=d.byteLength,T=d.length,w=_+4*T,S=new Uint8Array(w),P=new DataView(S.buffer);for(p=0;p<d.length;p++)h=d[p],P.setUint32(g,h.data.byteLength),g+=4,S.set(h.data,g),g+=h.data.byteLength;return S},me={groupNalsIntoFrames:wt,groupFramesIntoGops:Ct,extendFirstKeyFrame:ct,generateSampleTable:yi,concatenateNalData:G,generateSampleTableForFrame:J,concatenateNalDataForFrame:de},ce=[33,16,5,32,164,27],we=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ue=function(d){for(var p=[];d--;)p.push(0);return p},Ee=function(d){return Object.keys(d).reduce(function(p,h){return p[h]=new Uint8Array(d[h].reduce(function(g,_){return g.concat(_)},[])),p},{})},be,_e=function(){if(!be){var d={96e3:[ce,[227,64],ue(154),[56]],88200:[ce,[231],ue(170),[56]],64e3:[ce,[248,192],ue(240),[56]],48e3:[ce,[255,192],ue(268),[55,148,128],ue(54),[112]],44100:[ce,[255,192],ue(268),[55,163,128],ue(84),[112]],32e3:[ce,[255,192],ue(268),[55,234],ue(226),[112]],24e3:[ce,[255,192],ue(268),[55,255,128],ue(268),[111,112],ue(126),[224]],16e3:[ce,[255,192],ue(268),[55,255,128],ue(268),[111,255],ue(269),[223,108],ue(195),[1,192]],12e3:[we,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,253,128],ue(259),[56]],11025:[we,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,255,192],ue(268),[55,175,128],ue(108),[112]],8e3:[we,ue(268),[3,121,16],ue(47),[7]]};be=Ee(d)}return be},Re=9e4,ke,Me,je,qe,ot,ft,At;ke=function(d){return d*Re},Me=function(d,p){return d*p},je=function(d){return d/Re},qe=function(d,p){return d/p},ot=function(d,p){return ke(qe(d,p))},ft=function(d,p){return Me(je(d),p)},At=function(d,p,h){return je(h?d:d-p)};var Oe={ONE_SECOND_IN_TS:Re,secondsToVideoTs:ke,secondsToAudioTs:Me,videoTsToSeconds:je,audioTsToSeconds:qe,audioTsToVideoTs:ot,videoTsToAudioTs:ft,metadataTsToSeconds:At},ir=function(d){var p,h,g=0;for(p=0;p<d.length;p++)h=d[p],g+=h.data.byteLength;return g},Ln=function(d,p,h,g){var _,T=0,w=0,S=0,P=0,C,L,B;if(p.length&&(_=Oe.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),T=Math.ceil(Oe.ONE_SECOND_IN_TS/(d.samplerate/1024)),h&&g&&(w=_-Math.max(h,g),S=Math.floor(w/T),P=S*T),!(S<1||P>Oe.ONE_SECOND_IN_TS/2))){for(C=_e()[d.samplerate],C||(C=p[0].data),L=0;L<S;L++)B=p[0],p.splice(0,0,{data:C,dts:B.dts-T,pts:B.pts-T});return d.baseMediaDecodeTime-=Math.floor(Oe.videoTsToAudioTs(P,d.samplerate)),P}},vr=function(d,p,h){return p.minSegmentDts>=h?d:(p.minSegmentDts=1/0,d.filter(function(g){return g.dts>=h?(p.minSegmentDts=Math.min(p.minSegmentDts,g.dts),p.minSegmentPts=p.minSegmentDts,!0):!1}))},kn=function(d){var p,h,g=[];for(p=0;p<d.length;p++)h=d[p],g.push({size:h.data.byteLength,duration:1024});return g},Vt=function(d){var p,h,g=0,_=new Uint8Array(ir(d));for(p=0;p<d.length;p++)h=d[p],_.set(h.data,g),g+=h.data.byteLength;return _},Bt={prefixWithSilence:Ln,trimAdtsFramesByEarliestDts:vr,generateSampleTable:kn,concatenateFrameData:Vt},Ga=Oe.ONE_SECOND_IN_TS,ll=function(d,p){typeof p.pts=="number"&&(d.timelineStartInfo.pts===void 0&&(d.timelineStartInfo.pts=p.pts),d.minSegmentPts===void 0?d.minSegmentPts=p.pts:d.minSegmentPts=Math.min(d.minSegmentPts,p.pts),d.maxSegmentPts===void 0?d.maxSegmentPts=p.pts:d.maxSegmentPts=Math.max(d.maxSegmentPts,p.pts)),typeof p.dts=="number"&&(d.timelineStartInfo.dts===void 0&&(d.timelineStartInfo.dts=p.dts),d.minSegmentDts===void 0?d.minSegmentDts=p.dts:d.minSegmentDts=Math.min(d.minSegmentDts,p.dts),d.maxSegmentDts===void 0?d.maxSegmentDts=p.dts:d.maxSegmentDts=Math.max(d.maxSegmentDts,p.dts))},dl=function(d){delete d.minSegmentDts,delete d.maxSegmentDts,delete d.minSegmentPts,delete d.maxSegmentPts},Ro=function(d,p){var h,g,_=d.minSegmentDts;return p||(_-=d.timelineStartInfo.dts),h=d.timelineStartInfo.baseMediaDecodeTime,h+=_,h=Math.max(0,h),d.type==="audio"&&(g=d.samplerate/Ga,h*=g,h=Math.floor(h)),h},Mt={clearDtsInfo:dl,calculateTrackBaseMediaDecodeTime:Ro,collectDtsInfo:ll},Is=4,fl=128,cl=function(d){for(var p=0,h={payloadType:-1,payloadSize:0},g=0,_=0;p<d.byteLength&&d[p]!==fl;){for(;d[p]===255;)g+=255,p++;for(g+=d[p++];d[p]===255;)_+=255,p++;if(_+=d[p++],!h.payload&&g===Is){var T=String.fromCharCode(d[p+3],d[p+4],d[p+5],d[p+6]);if(T==="GA94"){h.payloadType=g,h.payloadSize=_,h.payload=d.subarray(p,p+_);break}else h.payload=void 0}p+=_,g=0,_=0}return h},hl=function(d){return d.payload[0]!==181||(d.payload[1]<<8|d.payload[2])!==49||String.fromCharCode(d.payload[3],d.payload[4],d.payload[5],d.payload[6])!=="GA94"||d.payload[7]!==3?null:d.payload.subarray(8,d.payload.length-1)},Mo=function(d,p){var h=[],g,_,T,w;if(!(p[0]&64))return h;for(_=p[0]&31,g=0;g<_;g++)T=g*3,w={type:p[T+2]&3,pts:d},p[T+2]&4&&(w.ccData=p[T+3]<<8|p[T+4],h.push(w));return h},pl=function(d){for(var p=d.byteLength,h=[],g=1,_,T;g<p-2;)d[g]===0&&d[g+1]===0&&d[g+2]===3?(h.push(g+2),g+=2):g++;if(h.length===0)return d;_=p-h.length,T=new Uint8Array(_);var w=0;for(g=0;g<_;w++,g++)w===h[0]&&(w++,h.shift()),T[g]=d[w];return T},_r={parseSei:cl,parseUserData:hl,parseCaptionPackets:Mo,discardEmulationPreventionBytes:pl,USER_DATA_REGISTERED_ITU_T_T35:Is},Pt=function x(d){d=d||{},x.prototype.init.call(this),this.parse708captions_=typeof d.parse708captions=="boolean"?d.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Ge(0,0),new Ge(0,1),new Ge(1,0),new Ge(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ve({captionServices:d.captionServices})),this.reset(),this.ccStreams_.forEach(function(p){p.on("data",this.trigger.bind(this,"data")),p.on("partialdone",this.trigger.bind(this,"partialdone")),p.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Pt.prototype=new t,Pt.prototype.push=function(x){var d,p,h;if(x.nalUnitType==="sei_rbsp"&&(d=_r.parseSei(x.escapedRBSP),!!d.payload&&d.payloadType===_r.USER_DATA_REGISTERED_ITU_T_T35&&(p=_r.parseUserData(d),!!p))){if(x.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(x.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}h=_r.parseCaptionPackets(x.pts,p),this.captionPackets_=this.captionPackets_.concat(h),this.latestDts_!==x.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=x.dts}},Pt.prototype.flushCCStreams=function(x){this.ccStreams_.forEach(function(d){return x==="flush"?d.flush():d.partialFlush()},this)},Pt.prototype.flushStream=function(x){if(!this.captionPackets_.length){this.flushCCStreams(x);return}this.captionPackets_.forEach(function(d,p){d.presortIndex=p}),this.captionPackets_.sort(function(d,p){return d.pts===p.pts?d.presortIndex-p.presortIndex:d.pts-p.pts}),this.captionPackets_.forEach(function(d){d.type<2?this.dispatchCea608Packet(d):this.dispatchCea708Packet(d)},this),this.captionPackets_.length=0,this.flushCCStreams(x)},Pt.prototype.flush=function(){return this.flushStream("flush")},Pt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Pt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(x){x.reset()})},Pt.prototype.dispatchCea608Packet=function(x){this.setsTextOrXDSActive(x)?this.activeCea608Channel_[x.type]=null:this.setsChannel1Active(x)?this.activeCea608Channel_[x.type]=0:this.setsChannel2Active(x)&&(this.activeCea608Channel_[x.type]=1),this.activeCea608Channel_[x.type]!==null&&this.ccStreams_[(x.type<<1)+this.activeCea608Channel_[x.type]].push(x)},Pt.prototype.setsChannel1Active=function(x){return(x.ccData&30720)===4096},Pt.prototype.setsChannel2Active=function(x){return(x.ccData&30720)===6144},Pt.prototype.setsTextOrXDSActive=function(x){return(x.ccData&28928)===256||(x.ccData&30974)===4138||(x.ccData&30974)===6186},Pt.prototype.dispatchCea708Packet=function(x){this.parse708captions_&&this.cc708Stream_.push(x)};var Ps={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ml=function(d){var p=Ps[d]||d;return d&4096&&d===p?"":String.fromCharCode(p)},yr=function(d){return 32<=d&&d<=127||160<=d&&d<=255},zt=function(d){this.windowNum=d,this.reset()};zt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},zt.prototype.getText=function(){return this.rows.join(`
`)},zt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},zt.prototype.newLine=function(x){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(x),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},zt.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},zt.prototype.addText=function(x){this.rows[this.rowIdx]+=x},zt.prototype.backspace=function(){if(!this.isEmpty()){var x=this.rows[this.rowIdx];this.rows[this.rowIdx]=x.substr(0,x.length-1)}};var en=function(d,p,h){this.serviceNum=d,this.text="",this.currentWindow=new zt(-1),this.windows=[],this.stream=h,typeof p=="string"&&this.createTextDecoder(p)};en.prototype.init=function(x,d){this.startPts=x;for(var p=0;p<8;p++)this.windows[p]=new zt(p),typeof d=="function"&&(this.windows[p].beforeRowOverflow=d)},en.prototype.setCurrentWindow=function(x){this.currentWindow=this.windows[x]},en.prototype.createTextDecoder=function(x){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(x)}catch(d){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+x+" encoding. "+d})}};var Ve=function x(d){d=d||{},x.prototype.init.call(this);var p=this,h=d.captionServices||{},g={},_;Object.keys(h).forEach(function(T){_=h[T],/^SERVICE/.test(T)&&(g[T]=_.encoding)}),this.serviceEncodings=g,this.current708Packet=null,this.services={},this.push=function(T){T.type===3?(p.new708Packet(),p.add708Bytes(T)):(p.current708Packet===null&&p.new708Packet(),p.add708Bytes(T))}};Ve.prototype=new t,Ve.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ve.prototype.add708Bytes=function(x){var d=x.ccData,p=d>>>8,h=d&255;this.current708Packet.ptsVals.push(x.pts),this.current708Packet.data.push(p),this.current708Packet.data.push(h)},Ve.prototype.push708Packet=function(){var x=this.current708Packet,d=x.data,p=null,h=null,g=0,_=d[g++];for(x.seq=_>>6,x.sizeCode=_&63;g<d.length;g++)_=d[g++],p=_>>5,h=_&31,p===7&&h>0&&(_=d[g++],p=_),this.pushServiceBlock(p,g,h),h>0&&(g+=h-1)},Ve.prototype.pushServiceBlock=function(x,d,p){var h,g=d,_=this.current708Packet.data,T=this.services[x];for(T||(T=this.initService(x,g));g<d+p&&g<_.length;g++)h=_[g],yr(h)?g=this.handleText(g,T):h===24?g=this.multiByteCharacter(g,T):h===16?g=this.extendedCommands(g,T):128<=h&&h<=135?g=this.setCurrentWindow(g,T):152<=h&&h<=159?g=this.defineWindow(g,T):h===136?g=this.clearWindows(g,T):h===140?g=this.deleteWindows(g,T):h===137?g=this.displayWindows(g,T):h===138?g=this.hideWindows(g,T):h===139?g=this.toggleWindows(g,T):h===151?g=this.setWindowAttributes(g,T):h===144?g=this.setPenAttributes(g,T):h===145?g=this.setPenColor(g,T):h===146?g=this.setPenLocation(g,T):h===143?T=this.reset(g,T):h===8?T.currentWindow.backspace():h===12?T.currentWindow.clearText():h===13?T.currentWindow.pendingNewLine=!0:h===14?T.currentWindow.clearText():h===141&&g++},Ve.prototype.extendedCommands=function(x,d){var p=this.current708Packet.data,h=p[++x];return yr(h)&&(x=this.handleText(x,d,{isExtended:!0})),x},Ve.prototype.getPts=function(x){return this.current708Packet.ptsVals[Math.floor(x/2)]},Ve.prototype.initService=function(x,d){var h="SERVICE"+x,p=this,h,g;return h in this.serviceEncodings&&(g=this.serviceEncodings[h]),this.services[x]=new en(x,g,p),this.services[x].init(this.getPts(d),function(_){p.flushDisplayed(_,p.services[x])}),this.services[x]},Ve.prototype.handleText=function(x,d,p){var h=p&&p.isExtended,g=p&&p.isMultiByte,_=this.current708Packet.data,T=h?4096:0,w=_[x],S=_[x+1],P=d.currentWindow,C,L;return d.textDecoder_&&!h?(g?(L=[w,S],x++):L=[w],C=d.textDecoder_.decode(new Uint8Array(L))):C=ml(T|w),P.pendingNewLine&&!P.isEmpty()&&P.newLine(this.getPts(x)),P.pendingNewLine=!1,P.addText(C),x},Ve.prototype.multiByteCharacter=function(x,d){var p=this.current708Packet.data,h=p[x+1],g=p[x+2];return yr(h)&&yr(g)&&(x=this.handleText(++x,d,{isMultiByte:!0})),x},Ve.prototype.setCurrentWindow=function(x,d){var p=this.current708Packet.data,h=p[x],g=h&7;return d.setCurrentWindow(g),x},Ve.prototype.defineWindow=function(x,d){var p=this.current708Packet.data,h=p[x],g=h&7;d.setCurrentWindow(g);var _=d.currentWindow;return h=p[++x],_.visible=(h&32)>>5,_.rowLock=(h&16)>>4,_.columnLock=(h&8)>>3,_.priority=h&7,h=p[++x],_.relativePositioning=(h&128)>>7,_.anchorVertical=h&127,h=p[++x],_.anchorHorizontal=h,h=p[++x],_.anchorPoint=(h&240)>>4,_.rowCount=h&15,h=p[++x],_.columnCount=h&63,h=p[++x],_.windowStyle=(h&56)>>3,_.penStyle=h&7,_.virtualRowCount=_.rowCount+1,x},Ve.prototype.setWindowAttributes=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.winAttr;return h=p[++x],g.fillOpacity=(h&192)>>6,g.fillRed=(h&48)>>4,g.fillGreen=(h&12)>>2,g.fillBlue=h&3,h=p[++x],g.borderType=(h&192)>>6,g.borderRed=(h&48)>>4,g.borderGreen=(h&12)>>2,g.borderBlue=h&3,h=p[++x],g.borderType+=(h&128)>>5,g.wordWrap=(h&64)>>6,g.printDirection=(h&48)>>4,g.scrollDirection=(h&12)>>2,g.justify=h&3,h=p[++x],g.effectSpeed=(h&240)>>4,g.effectDirection=(h&12)>>2,g.displayEffect=h&3,x},Ve.prototype.flushDisplayed=function(x,d){for(var p=[],h=0;h<8;h++)d.windows[h].visible&&!d.windows[h].isEmpty()&&p.push(d.windows[h].getText());d.endPts=x,d.text=p.join(`

`),this.pushCaption(d),d.startPts=x},Ve.prototype.pushCaption=function(x){x.text!==""&&(this.trigger("data",{startPts:x.startPts,endPts:x.endPts,text:x.text,stream:"cc708_"+x.serviceNum}),x.text="",x.startPts=x.endPts)},Ve.prototype.displayWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&(d.windows[_].visible=1);return x},Ve.prototype.hideWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&(d.windows[_].visible=0);return x},Ve.prototype.toggleWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&(d.windows[_].visible^=1);return x},Ve.prototype.clearWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&d.windows[_].clearText();return x},Ve.prototype.deleteWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&d.windows[_].reset();return x},Ve.prototype.setPenAttributes=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.penAttr;return h=p[++x],g.textTag=(h&240)>>4,g.offset=(h&12)>>2,g.penSize=h&3,h=p[++x],g.italics=(h&128)>>7,g.underline=(h&64)>>6,g.edgeType=(h&56)>>3,g.fontStyle=h&7,x},Ve.prototype.setPenColor=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.penColor;return h=p[++x],g.fgOpacity=(h&192)>>6,g.fgRed=(h&48)>>4,g.fgGreen=(h&12)>>2,g.fgBlue=h&3,h=p[++x],g.bgOpacity=(h&192)>>6,g.bgRed=(h&48)>>4,g.bgGreen=(h&12)>>2,g.bgBlue=h&3,h=p[++x],g.edgeRed=(h&48)>>4,g.edgeGreen=(h&12)>>2,g.edgeBlue=h&3,x},Ve.prototype.setPenLocation=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.penLoc;return d.currentWindow.pendingNewLine=!0,h=p[++x],g.row=h&15,h=p[++x],g.column=h&63,x},Ve.prototype.reset=function(x,d){var p=this.getPts(x);return this.flushDisplayed(p,d),this.initService(d.serviceNum,x)};var gl={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},tn=function(d){return d===null?"":(d=gl[d]||d,String.fromCharCode(d))},rn=14,vl=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ti=function(){for(var d=[],p=rn+1;p--;)d.push("");return d},Ge=function x(d,p){x.prototype.init.call(this),this.field_=d||0,this.dataChannel_=p||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(h){var g,_,T,w,S;if(g=h.ccData&32639,g===this.lastControlCode_){this.lastControlCode_=null;return}if((g&61440)===4096?this.lastControlCode_=g:g!==this.PADDING_&&(this.lastControlCode_=null),T=g>>>8,w=g&255,g!==this.PADDING_)if(g===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(g===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(h.pts),this.flushDisplayed(h.pts),_=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=_,this.startPts_=h.pts;else if(g===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(h.pts);else if(g===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(h.pts);else if(g===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(h.pts);else if(g===this.CARRIAGE_RETURN_)this.clearFormatting(h.pts),this.flushDisplayed(h.pts),this.shiftRowsUp_(),this.startPts_=h.pts;else if(g===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(g===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(h.pts),this.displayed_=Ti();else if(g===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ti();else if(g===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(h.pts),this.displayed_=Ti()),this.mode_="paintOn",this.startPts_=h.pts;else if(this.isSpecialCharacter(T,w))T=(T&3)<<8,S=tn(T|w),this[this.mode_](h.pts,S),this.column_++;else if(this.isExtCharacter(T,w))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),T=(T&3)<<8,S=tn(T|w),this[this.mode_](h.pts,S),this.column_++;else if(this.isMidRowCode(T,w))this.clearFormatting(h.pts),this[this.mode_](h.pts," "),this.column_++,(w&14)===14&&this.addFormatting(h.pts,["i"]),(w&1)===1&&this.addFormatting(h.pts,["u"]);else if(this.isOffsetControlCode(T,w))this.column_+=w&3;else if(this.isPAC(T,w)){var P=vl.indexOf(g&7968);this.mode_==="rollUp"&&(P-this.rollUpRows_+1<0&&(P=this.rollUpRows_-1),this.setRollUp(h.pts,P)),P!==this.row_&&(this.clearFormatting(h.pts),this.row_=P),w&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(h.pts,["u"]),(g&16)===16&&(this.column_=((g&14)>>1)*4),this.isColorPAC(w)&&(w&14)===14&&this.addFormatting(h.pts,["i"])}else this.isNormalChar(T)&&(w===0&&(w=null),S=tn(T),S+=tn(w),this[this.mode_](h.pts,S),this.column_+=S.length)}};Ge.prototype=new t,Ge.prototype.flushDisplayed=function(x){var d=this.displayed_.map(function(p,h){try{return p.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+h+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");d.length&&this.trigger("data",{startPts:this.startPts_,endPts:x,text:d,stream:this.name_})},Ge.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ti(),this.nonDisplayed_=Ti(),this.lastControlCode_=null,this.column_=0,this.row_=rn,this.rollUpRows_=2,this.formatting_=[]},Ge.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Ge.prototype.isSpecialCharacter=function(x,d){return x===this.EXT_&&d>=48&&d<=63},Ge.prototype.isExtCharacter=function(x,d){return(x===this.EXT_+1||x===this.EXT_+2)&&d>=32&&d<=63},Ge.prototype.isMidRowCode=function(x,d){return x===this.EXT_&&d>=32&&d<=47},Ge.prototype.isOffsetControlCode=function(x,d){return x===this.OFFSET_&&d>=33&&d<=35},Ge.prototype.isPAC=function(x,d){return x>=this.BASE_&&x<this.BASE_+8&&d>=64&&d<=127},Ge.prototype.isColorPAC=function(x){return x>=64&&x<=79||x>=96&&x<=127},Ge.prototype.isNormalChar=function(x){return x>=32&&x<=127},Ge.prototype.setRollUp=function(x,d){if(this.mode_!=="rollUp"&&(this.row_=rn,this.mode_="rollUp",this.flushDisplayed(x),this.nonDisplayed_=Ti(),this.displayed_=Ti()),d!==void 0&&d!==this.row_)for(var p=0;p<this.rollUpRows_;p++)this.displayed_[d-p]=this.displayed_[this.row_-p],this.displayed_[this.row_-p]="";d===void 0&&(d=this.row_),this.topRow_=d-this.rollUpRows_+1},Ge.prototype.addFormatting=function(x,d){this.formatting_=this.formatting_.concat(d);var p=d.reduce(function(h,g){return h+"<"+g+">"},"");this[this.mode_](x,p)},Ge.prototype.clearFormatting=function(x){if(this.formatting_.length){var d=this.formatting_.reverse().reduce(function(p,h){return p+"</"+h+">"},"");this.formatting_=[],this[this.mode_](x,d)}},Ge.prototype.popOn=function(x,d){var p=this.nonDisplayed_[this.row_];p+=d,this.nonDisplayed_[this.row_]=p},Ge.prototype.rollUp=function(x,d){var p=this.displayed_[this.row_];p+=d,this.displayed_[this.row_]=p},Ge.prototype.shiftRowsUp_=function(){var x;for(x=0;x<this.topRow_;x++)this.displayed_[x]="";for(x=this.row_+1;x<rn+1;x++)this.displayed_[x]="";for(x=this.topRow_;x<this.row_;x++)this.displayed_[x]=this.displayed_[x+1];this.displayed_[this.row_]=""},Ge.prototype.paintOn=function(x,d){var p=this.displayed_[this.row_];p+=d,this.displayed_[this.row_]=p};var nn={CaptionStream:Pt,Cea608Stream:Ge,Cea708Stream:Ve},ht={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},_l=8589934592,yl=4294967296,Os="shared",oa=function(d,p){var h=1;for(d>p&&(h=-1);Math.abs(p-d)>yl;)d+=h*_l;return d},Rn=function x(d){var p,h;x.prototype.init.call(this),this.type_=d||Os,this.push=function(g){this.type_!==Os&&g.type!==this.type_||(h===void 0&&(h=g.dts),g.dts=oa(g.dts,h),g.pts=oa(g.pts,h),p=g.dts,this.trigger("data",g))},this.flush=function(){h=p,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){h=void 0,p=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Rn.prototype=new t;var Ds={TimestampRolloverStream:Rn,handleRollover:oa},Mn=function(d,p,h){var g,_="";for(g=p;g<h;g++)_+="%"+("00"+d[g].toString(16)).slice(-2);return _},an=function(d,p,h){return decodeURIComponent(Mn(d,p,h))},Tl=function(d,p,h){return unescape(Mn(d,p,h))},sn=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},za={TXXX:function(d){var p;if(d.data[0]===3){for(p=1;p<d.data.length;p++)if(d.data[p]===0){d.description=an(d.data,1,p),d.value=an(d.data,p+1,d.data.length).replace(/\0*$/,"");break}d.data=d.value}},WXXX:function(d){var p;if(d.data[0]===3){for(p=1;p<d.data.length;p++)if(d.data[p]===0){d.description=an(d.data,1,p),d.url=an(d.data,p+1,d.data.length);break}}},PRIV:function(d){var p;for(p=0;p<d.data.length;p++)if(d.data[p]===0){d.owner=Tl(d.data,0,p);break}d.privateData=d.data.subarray(p+1),d.data=d.privateData}},Br;Br=function(d){var p={descriptor:d&&d.descriptor},h=0,g=[],_=0,T;if(Br.prototype.init.call(this),this.dispatchType=ht.METADATA_STREAM_TYPE.toString(16),p.descriptor)for(T=0;T<p.descriptor.length;T++)this.dispatchType+=("00"+p.descriptor[T].toString(16)).slice(-2);this.push=function(w){var S,P,C,L,B,ee;if(w.type==="timed-metadata"){if(w.dataAlignmentIndicator&&(_=0,g.length=0),g.length===0&&(w.data.length<10||w.data[0]!=="I".charCodeAt(0)||w.data[1]!=="D".charCodeAt(0)||w.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(g.push(w),_+=w.data.byteLength,g.length===1&&(h=sn(w.data.subarray(6,10)),h+=10),!(_<h)){for(S={data:new Uint8Array(h),frames:[],pts:g[0].pts,dts:g[0].dts},B=0;B<h;)S.data.set(g[0].data.subarray(0,h-B),B),B+=g[0].data.byteLength,_-=g[0].data.byteLength,g.shift();P=10,S.data[5]&64&&(P+=4,P+=sn(S.data.subarray(10,14)),h-=sn(S.data.subarray(16,20)));do{if(C=sn(S.data.subarray(P+4,P+8)),C<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(ee=String.fromCharCode(S.data[P],S.data[P+1],S.data[P+2],S.data[P+3]),L={id:ee,data:S.data.subarray(P+10,P+C+10)},L.key=L.id,za[L.id]&&(za[L.id](L),L.owner==="com.apple.streaming.transportStreamTimestamp")){var ae=L.data,Q=(ae[3]&1)<<30|ae[4]<<22|ae[5]<<14|ae[6]<<6|ae[7]>>>2;Q*=4,Q+=ae[7]&3,L.timeStamp=Q,S.pts===void 0&&S.dts===void 0&&(S.pts=L.timeStamp,S.dts=L.timeStamp),this.trigger("timestamp",L)}S.frames.push(L),P+=10,P+=C}while(P<h);this.trigger("data",S)}}}},Br.prototype=new t;var Fo=Br,bl=Ds.TimestampRolloverStream,on,Tr,un,Oi=188,Fn=71;on=function(){var d=new Uint8Array(Oi),p=0;on.prototype.init.call(this),this.push=function(h){var g=0,_=Oi,T;for(p?(T=new Uint8Array(h.byteLength+p),T.set(d.subarray(0,p)),T.set(h,p),p=0):T=h;_<T.byteLength;){if(T[g]===Fn&&T[_]===Fn){this.trigger("data",T.subarray(g,_)),g+=Oi,_+=Oi;continue}g++,_++}g<T.byteLength&&(d.set(T.subarray(g),0),p=T.byteLength-g)},this.flush=function(){p===Oi&&d[0]===Fn&&(this.trigger("data",d),p=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){p=0,this.trigger("reset")}},on.prototype=new t,Tr=function(){var d,p,h,g;Tr.prototype.init.call(this),g=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,d=function(T,w){var S=0;w.payloadUnitStartIndicator&&(S+=T[S]+1),w.type==="pat"?p(T.subarray(S),w):h(T.subarray(S),w)},p=function(T,w){w.section_number=T[7],w.last_section_number=T[8],g.pmtPid=(T[10]&31)<<8|T[11],w.pmtPid=g.pmtPid},h=function(T,w){var S,P,C,L;if(T[5]&1){for(g.programMapTable={video:null,audio:null,"timed-metadata":{}},S=(T[1]&15)<<8|T[2],P=3+S-4,C=(T[10]&15)<<8|T[11],L=12+C;L<P;){var B=T[L],ee=(T[L+1]&31)<<8|T[L+2];B===ht.H264_STREAM_TYPE&&g.programMapTable.video===null?g.programMapTable.video=ee:B===ht.ADTS_STREAM_TYPE&&g.programMapTable.audio===null?g.programMapTable.audio=ee:B===ht.METADATA_STREAM_TYPE&&(g.programMapTable["timed-metadata"][ee]=B),L+=((T[L+3]&15)<<8|T[L+4])+5}w.programMapTable=g.programMapTable}},this.push=function(_){var T={},w=4;if(T.payloadUnitStartIndicator=!!(_[1]&64),T.pid=_[1]&31,T.pid<<=8,T.pid|=_[2],(_[3]&48)>>>4>1&&(w+=_[w]+1),T.pid===0)T.type="pat",d(_.subarray(w),T),this.trigger("data",T);else if(T.pid===this.pmtPid)for(T.type="pmt",d(_.subarray(w),T),this.trigger("data",T);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([_,w,T]):this.processPes_(_,w,T)},this.processPes_=function(_,T,w){w.pid===this.programMapTable.video?w.streamType=ht.H264_STREAM_TYPE:w.pid===this.programMapTable.audio?w.streamType=ht.ADTS_STREAM_TYPE:w.streamType=this.programMapTable["timed-metadata"][w.pid],w.type="pes",w.data=_.subarray(T),this.trigger("data",w)}},Tr.prototype=new t,Tr.STREAM_TYPES={h264:27,adts:15},un=function(){var d=this,p=!1,h={data:[],size:0},g={data:[],size:0},_={data:[],size:0},T,w=function(C,L){var B,ee=C[0]<<16|C[1]<<8|C[2];L.data=new Uint8Array,ee===1&&(L.packetLength=6+(C[4]<<8|C[5]),L.dataAlignmentIndicator=(C[6]&4)!==0,B=C[7],B&192&&(L.pts=(C[9]&14)<<27|(C[10]&255)<<20|(C[11]&254)<<12|(C[12]&255)<<5|(C[13]&254)>>>3,L.pts*=4,L.pts+=(C[13]&6)>>>1,L.dts=L.pts,B&64&&(L.dts=(C[14]&14)<<27|(C[15]&255)<<20|(C[16]&254)<<12|(C[17]&255)<<5|(C[18]&254)>>>3,L.dts*=4,L.dts+=(C[18]&6)>>>1)),L.data=C.subarray(9+C[8]))},S=function(C,L,B){var ee=new Uint8Array(C.size),ae={type:L},Q=0,ye=0,nt=!1,Ze;if(!(!C.data.length||C.size<9)){for(ae.trackId=C.data[0].pid,Q=0;Q<C.data.length;Q++)Ze=C.data[Q],ee.set(Ze.data,ye),ye+=Ze.data.byteLength;w(ee,ae),nt=L==="video"||ae.packetLength<=C.size,(B||nt)&&(C.size=0,C.data.length=0),nt&&d.trigger("data",ae)}};un.prototype.init.call(this),this.push=function(P){({pat:function(){},pes:function(){var L,B;switch(P.streamType){case ht.H264_STREAM_TYPE:L=h,B="video";break;case ht.ADTS_STREAM_TYPE:L=g,B="audio";break;case ht.METADATA_STREAM_TYPE:L=_,B="timed-metadata";break;default:return}P.payloadUnitStartIndicator&&S(L,B,!0),L.data.push(P),L.size+=P.data.byteLength},pmt:function(){var L={type:"metadata",tracks:[]};T=P.programMapTable,T.video!==null&&L.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.video,codec:"avc",type:"video"}),T.audio!==null&&L.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.audio,codec:"adts",type:"audio"}),p=!0,d.trigger("data",L)}})[P.type]()},this.reset=function(){h.size=0,h.data.length=0,g.size=0,g.data.length=0,this.trigger("reset")},this.flushStreams_=function(){S(h,"video"),S(g,"audio"),S(_,"timed-metadata")},this.flush=function(){if(!p&&T){var P={type:"metadata",tracks:[]};T.video!==null&&P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.video,codec:"avc",type:"video"}),T.audio!==null&&P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.audio,codec:"adts",type:"audio"}),d.trigger("data",P)}p=!1,this.flushStreams_(),this.trigger("done")}},un.prototype=new t;var Ka={PAT_PID:0,MP2T_PACKET_LENGTH:Oi,TransportPacketStream:on,TransportParseStream:Tr,ElementaryStream:un,TimestampRolloverStream:bl,CaptionStream:nn.CaptionStream,Cea608Stream:nn.Cea608Stream,Cea708Stream:nn.Cea708Stream,MetadataStream:Fo};for(var ln in ht)ht.hasOwnProperty(ln)&&(Ka[ln]=ht[ln]);var Kt=Ka,No=Oe.ONE_SECOND_IN_TS,rr,Xa=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];rr=function(d){var p,h=0;rr.prototype.init.call(this),this.skipWarn_=function(g,_){this.trigger("log",{level:"warn",message:"adts skiping bytes "+g+" to "+_+" in frame "+h+" outside syncword"})},this.push=function(g){var _=0,T,w,S,P,C;if(d||(h=0),g.type==="audio"){p&&p.length?(S=p,p=new Uint8Array(S.byteLength+g.data.byteLength),p.set(S),p.set(g.data,S.byteLength)):p=g.data;for(var L;_+7<p.length;){if(p[_]!==255||(p[_+1]&246)!==240){typeof L!="number"&&(L=_),_++;continue}if(typeof L=="number"&&(this.skipWarn_(L,_),L=null),w=(~p[_+1]&1)*2,T=(p[_+3]&3)<<11|p[_+4]<<3|(p[_+5]&224)>>5,P=((p[_+6]&3)+1)*1024,C=P*No/Xa[(p[_+2]&60)>>>2],p.byteLength-_<T)break;this.trigger("data",{pts:g.pts+h*C,dts:g.dts+h*C,sampleCount:P,audioobjecttype:(p[_+2]>>>6&3)+1,channelcount:(p[_+2]&1)<<2|(p[_+3]&192)>>>6,samplerate:Xa[(p[_+2]&60)>>>2],samplingfrequencyindex:(p[_+2]&60)>>>2,samplesize:16,data:p.subarray(_+7+w,_+T)}),h++,_+=T}typeof L=="number"&&(this.skipWarn_(L,_),L=null),p=p.subarray(_)}},this.flush=function(){h=0,this.trigger("done")},this.reset=function(){p=void 0,this.trigger("reset")},this.endTimeline=function(){p=void 0,this.trigger("endedtimeline")}},rr.prototype=new t;var Ls=rr,Qa;Qa=function(d){var p=d.byteLength,h=0,g=0;this.length=function(){return 8*p},this.bitsAvailable=function(){return 8*p+g},this.loadWord=function(){var _=d.byteLength-p,T=new Uint8Array(4),w=Math.min(4,p);if(w===0)throw new Error("no bytes available");T.set(d.subarray(_,_+w)),h=new DataView(T.buffer).getUint32(0),g=w*8,p-=w},this.skipBits=function(_){var T;g>_?(h<<=_,g-=_):(_-=g,T=Math.floor(_/8),_-=T*8,p-=T,this.loadWord(),h<<=_,g-=_)},this.readBits=function(_){var T=Math.min(g,_),w=h>>>32-T;return g-=T,g>0?h<<=T:p>0&&this.loadWord(),T=_-T,T>0?w<<T|this.readBits(T):w},this.skipLeadingZeros=function(){var _;for(_=0;_<g;++_)if(h&2147483648>>>_)return h<<=_,g-=_,_;return this.loadWord(),_+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var _=this.skipLeadingZeros();return this.readBits(_+1)-1},this.readExpGolomb=function(){var _=this.readUnsignedExpGolomb();return 1&_?1+_>>>1:-1*(_>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Uo=Qa,br,xr,Ya;xr=function(){var d=0,p,h;xr.prototype.init.call(this),this.push=function(g){var _;h?(_=new Uint8Array(h.byteLength+g.data.byteLength),_.set(h),_.set(g.data,h.byteLength),h=_):h=g.data;for(var T=h.byteLength;d<T-3;d++)if(h[d+2]===1){p=d+5;break}for(;p<T;)switch(h[p]){case 0:if(h[p-1]!==0){p+=2;break}else if(h[p-2]!==0){p++;break}d+3!==p-2&&this.trigger("data",h.subarray(d+3,p-2));do{p++}while(h[p]!==1&&p<T);d=p-2,p+=3;break;case 1:if(h[p-1]!==0||h[p-2]!==0){p+=3;break}this.trigger("data",h.subarray(d+3,p-2)),d=p-2,p+=3;break;default:p+=3;break}h=h.subarray(d),p-=d,d=0},this.reset=function(){h=null,d=0,this.trigger("reset")},this.flush=function(){h&&h.byteLength>3&&this.trigger("data",h.subarray(d+3)),h=null,d=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},xr.prototype=new t,Ya={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},br=function(){var d=new xr,p,h,g,_,T,w,S;br.prototype.init.call(this),p=this,this.push=function(P){P.type==="video"&&(h=P.trackId,g=P.pts,_=P.dts,d.push(P))},d.on("data",function(P){var C={trackId:h,pts:g,dts:_,data:P,nalUnitTypeCode:P[0]&31};switch(C.nalUnitTypeCode){case 5:C.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:C.nalUnitType="sei_rbsp",C.escapedRBSP=T(P.subarray(1));break;case 7:C.nalUnitType="seq_parameter_set_rbsp",C.escapedRBSP=T(P.subarray(1)),C.config=w(C.escapedRBSP);break;case 8:C.nalUnitType="pic_parameter_set_rbsp";break;case 9:C.nalUnitType="access_unit_delimiter_rbsp";break}p.trigger("data",C)}),d.on("done",function(){p.trigger("done")}),d.on("partialdone",function(){p.trigger("partialdone")}),d.on("reset",function(){p.trigger("reset")}),d.on("endedtimeline",function(){p.trigger("endedtimeline")}),this.flush=function(){d.flush()},this.partialFlush=function(){d.partialFlush()},this.reset=function(){d.reset()},this.endTimeline=function(){d.endTimeline()},S=function(C,L){var B=8,ee=8,ae,Q;for(ae=0;ae<C;ae++)ee!==0&&(Q=L.readExpGolomb(),ee=(B+Q+256)%256),B=ee===0?B:ee},T=function(C){for(var L=C.byteLength,B=[],ee=1,ae,Q;ee<L-2;)C[ee]===0&&C[ee+1]===0&&C[ee+2]===3?(B.push(ee+2),ee+=2):ee++;if(B.length===0)return C;ae=L-B.length,Q=new Uint8Array(ae);var ye=0;for(ee=0;ee<ae;ye++,ee++)ye===B[0]&&(ye++,B.shift()),Q[ee]=C[ye];return Q},w=function(C){var L=0,B=0,ee=0,ae=0,Q,ye,nt,Ze,ni,ca,Gr,Un,Bn,pt,zs,Ye=[1,1],jn,Si;if(Q=new Uo(C),ye=Q.readUnsignedByte(),Ze=Q.readUnsignedByte(),nt=Q.readUnsignedByte(),Q.skipUnsignedExpGolomb(),Ya[ye]&&(ni=Q.readUnsignedExpGolomb(),ni===3&&Q.skipBits(1),Q.skipUnsignedExpGolomb(),Q.skipUnsignedExpGolomb(),Q.skipBits(1),Q.readBoolean()))for(zs=ni!==3?8:12,Si=0;Si<zs;Si++)Q.readBoolean()&&(Si<6?S(16,Q):S(64,Q));if(Q.skipUnsignedExpGolomb(),ca=Q.readUnsignedExpGolomb(),ca===0)Q.readUnsignedExpGolomb();else if(ca===1)for(Q.skipBits(1),Q.skipExpGolomb(),Q.skipExpGolomb(),Gr=Q.readUnsignedExpGolomb(),Si=0;Si<Gr;Si++)Q.skipExpGolomb();if(Q.skipUnsignedExpGolomb(),Q.skipBits(1),Un=Q.readUnsignedExpGolomb(),Bn=Q.readUnsignedExpGolomb(),pt=Q.readBits(1),pt===0&&Q.skipBits(1),Q.skipBits(1),Q.readBoolean()&&(L=Q.readUnsignedExpGolomb(),B=Q.readUnsignedExpGolomb(),ee=Q.readUnsignedExpGolomb(),ae=Q.readUnsignedExpGolomb()),Q.readBoolean()&&Q.readBoolean()){switch(jn=Q.readUnsignedByte(),jn){case 1:Ye=[1,1];break;case 2:Ye=[12,11];break;case 3:Ye=[10,11];break;case 4:Ye=[16,11];break;case 5:Ye=[40,33];break;case 6:Ye=[24,11];break;case 7:Ye=[20,11];break;case 8:Ye=[32,11];break;case 9:Ye=[80,33];break;case 10:Ye=[18,11];break;case 11:Ye=[15,11];break;case 12:Ye=[64,33];break;case 13:Ye=[160,99];break;case 14:Ye=[4,3];break;case 15:Ye=[3,2];break;case 16:Ye=[2,1];break;case 255:{Ye=[Q.readUnsignedByte()<<8|Q.readUnsignedByte(),Q.readUnsignedByte()<<8|Q.readUnsignedByte()];break}}Ye&&Ye[0]/Ye[1]}return{profileIdc:ye,levelIdc:nt,profileCompatibility:Ze,width:(Un+1)*16-L*2-B*2,height:(2-pt)*(Bn+1)*16-ee*2-ae*2,sarRatio:Ye}}},br.prototype=new t;var ks={H264Stream:br,NalByteStream:xr},Rs=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],jr=function(d,p){var h=d[p+6]<<21|d[p+7]<<14|d[p+8]<<7|d[p+9],g=d[p+5],_=(g&16)>>4;return h=h>=0?h:0,_?h+20:h+10},Bo=function x(d,p){return d.length-p<10||d[p]!=="I".charCodeAt(0)||d[p+1]!=="D".charCodeAt(0)||d[p+2]!=="3".charCodeAt(0)?p:(p+=jr(d,p),x(d,p))},jo=function(d){var p=Bo(d,0);return d.length>=p+2&&(d[p]&255)===255&&(d[p+1]&240)===240&&(d[p+1]&22)===16},Ms=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},Vo=function(d,p,h){var g,_="";for(g=p;g<h;g++)_+="%"+("00"+d[g].toString(16)).slice(-2);return _},Ho=function(d,p,h){return unescape(Vo(d,p,h))},$o=function(d,p){var h=(d[p+5]&224)>>5,g=d[p+4]<<3,_=d[p+3]&3<<11;return _|g|h},Wo=function(d,p){return d[p]==="I".charCodeAt(0)&&d[p+1]==="D".charCodeAt(0)&&d[p+2]==="3".charCodeAt(0)?"timed-metadata":d[p]&!0&&(d[p+1]&240)===240?"audio":null},xl=function(d){for(var p=0;p+5<d.length;){if(d[p]!==255||(d[p+1]&246)!==240){p++;continue}return Rs[(d[p+2]&60)>>>2]}return null},Sl=function(d){var p,h,g,_;p=10,d[5]&64&&(p+=4,p+=Ms(d.subarray(10,14)));do{if(h=Ms(d.subarray(p+4,p+8)),h<1)return null;if(_=String.fromCharCode(d[p],d[p+1],d[p+2],d[p+3]),_==="PRIV"){g=d.subarray(p+10,p+h+10);for(var T=0;T<g.byteLength;T++)if(g[T]===0){var w=Ho(g,0,T);if(w==="com.apple.streaming.transportStreamTimestamp"){var S=g.subarray(T+1),P=(S[3]&1)<<30|S[4]<<22|S[5]<<14|S[6]<<6|S[7]>>>2;return P*=4,P+=S[7]&3,P}break}}p+=10,p+=h}while(p<d.byteLength);return null},dn={isLikelyAacData:jo,parseId3TagSize:jr,parseAdtsSize:$o,parseType:Wo,parseSampleRate:xl,parseAacTimestamp:Sl},Vr;Vr=function(){var d=new Uint8Array,p=0;Vr.prototype.init.call(this),this.setTimestamp=function(h){p=h},this.push=function(h){var g=0,_=0,T,w,S,P;for(d.length?(P=d.length,d=new Uint8Array(h.byteLength+P),d.set(d.subarray(0,P)),d.set(h,P)):d=h;d.length-_>=3;){if(d[_]==="I".charCodeAt(0)&&d[_+1]==="D".charCodeAt(0)&&d[_+2]==="3".charCodeAt(0)){if(d.length-_<10||(g=dn.parseId3TagSize(d,_),_+g>d.length))break;w={type:"timed-metadata",data:d.subarray(_,_+g)},this.trigger("data",w),_+=g;continue}else if((d[_]&255)===255&&(d[_+1]&240)===240){if(d.length-_<7||(g=dn.parseAdtsSize(d,_),_+g>d.length))break;S={type:"audio",data:d.subarray(_,_+g),pts:p,dts:p},this.trigger("data",S),_+=g;continue}_++}T=d.length-_,T>0?d=d.subarray(_):d=new Uint8Array},this.reset=function(){d=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){d=new Uint8Array,this.trigger("endedtimeline")}},Vr.prototype=new t;var El=Vr,wl=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],ua=wl,Cl=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],fn=Cl,Al=ks.H264Stream,Il=dn.isLikelyAacData,Pl=Oe.ONE_SECOND_IN_TS,Sr,Bi,_t,rt,Ol=function(d,p){p.stream=d,this.trigger("log",p)},Fs=function(d,p){for(var h=Object.keys(p),g=0;g<h.length;g++){var _=h[g];_==="headOfPipeline"||!p[_].on||p[_].on("log",Ol.bind(d,_))}},Ns=function(d,p){var h;if(d.length!==p.length)return!1;for(h=0;h<d.length;h++)if(d[h]!==p[h])return!1;return!0},la=function(d,p,h,g,_,T){var w=h-p,S=g-p,P=_-h;return{start:{dts:d,pts:d+w},end:{dts:d+S,pts:d+P},prependedContentDuration:T,baseMediaDecodeTime:d}};Bi=function(d,p){var h=[],g,_=0,T=0,w=1/0;p=p||{},g=p.firstSequenceNumber||0,Bi.prototype.init.call(this),this.push=function(S){Mt.collectDtsInfo(d,S),d&&ua.forEach(function(P){d[P]=S[P]}),h.push(S)},this.setEarliestDts=function(S){_=S},this.setVideoBaseMediaDecodeTime=function(S){w=S},this.setAudioAppendStart=function(S){T=S},this.flush=function(){var S,P,C,L,B,ee,ae;if(h.length===0){this.trigger("done","AudioSegmentStream");return}S=Bt.trimAdtsFramesByEarliestDts(h,d,_),d.baseMediaDecodeTime=Mt.calculateTrackBaseMediaDecodeTime(d,p.keepOriginalTimestamps),ae=Bt.prefixWithSilence(d,S,T,w),d.samples=Bt.generateSampleTable(S),C=bt.mdat(Bt.concatenateFrameData(S)),h=[],P=bt.moof(g,[d]),L=new Uint8Array(P.byteLength+C.byteLength),g++,L.set(P),L.set(C,P.byteLength),Mt.clearDtsInfo(d),B=Math.ceil(Pl*1024/d.samplerate),S.length&&(ee=S.length*B,this.trigger("segmentTimingInfo",la(Oe.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),S[0].dts,S[0].pts,S[0].dts+ee,S[0].pts+ee,ae||0)),this.trigger("timingInfo",{start:S[0].pts,end:S[0].pts+ee})),this.trigger("data",{track:d,boxes:L}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Mt.clearDtsInfo(d),h=[],this.trigger("reset")}},Bi.prototype=new t,Sr=function(d,p){var h,g=[],_=[],T,w;p=p||{},h=p.firstSequenceNumber||0,Sr.prototype.init.call(this),delete d.minPTS,this.gopCache_=[],this.push=function(S){Mt.collectDtsInfo(d,S),S.nalUnitType==="seq_parameter_set_rbsp"&&!T&&(T=S.config,d.sps=[S.data],fn.forEach(function(P){d[P]=T[P]},this)),S.nalUnitType==="pic_parameter_set_rbsp"&&!w&&(w=S.data,d.pps=[S.data]),g.push(S)},this.flush=function(){for(var S,P,C,L,B,ee,ae=0,Q,ye;g.length&&g[0].nalUnitType!=="access_unit_delimiter_rbsp";)g.shift();if(g.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(S=me.groupNalsIntoFrames(g),C=me.groupFramesIntoGops(S),C[0][0].keyFrame||(P=this.getGopForFusion_(g[0],d),P?(ae=P.duration,C.unshift(P),C.byteLength+=P.byteLength,C.nalCount+=P.nalCount,C.pts=P.pts,C.dts=P.dts,C.duration+=P.duration):C=me.extendFirstKeyFrame(C)),_.length){var nt;if(p.alignGopsAtEnd?nt=this.alignGopsAtEnd_(C):nt=this.alignGopsAtStart_(C),!nt){this.gopCache_.unshift({gop:C.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Mt.clearDtsInfo(d),C=nt}Mt.collectDtsInfo(d,C),d.samples=me.generateSampleTable(C),B=bt.mdat(me.concatenateNalData(C)),d.baseMediaDecodeTime=Mt.calculateTrackBaseMediaDecodeTime(d,p.keepOriginalTimestamps),this.trigger("processedGopsInfo",C.map(function(Ze){return{pts:Ze.pts,dts:Ze.dts,byteLength:Ze.byteLength}})),Q=C[0],ye=C[C.length-1],this.trigger("segmentTimingInfo",la(d.baseMediaDecodeTime,Q.dts,Q.pts,ye.dts+ye.duration,ye.pts+ye.duration,ae)),this.trigger("timingInfo",{start:C[0].pts,end:C[C.length-1].pts+C[C.length-1].duration}),this.gopCache_.unshift({gop:C.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.trigger("baseMediaDecodeTime",d.baseMediaDecodeTime),this.trigger("timelineStartInfo",d.timelineStartInfo),L=bt.moof(h,[d]),ee=new Uint8Array(L.byteLength+B.byteLength),h++,ee.set(L),ee.set(B,L.byteLength),this.trigger("data",{track:d,boxes:ee}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),g=[],this.gopCache_.length=0,_.length=0,this.trigger("reset")},this.resetStream_=function(){Mt.clearDtsInfo(d),T=void 0,w=void 0},this.getGopForFusion_=function(S){var P=45e3,C=1e4,L=1/0,B,ee,ae,Q,ye;for(ye=0;ye<this.gopCache_.length;ye++)Q=this.gopCache_[ye],ae=Q.gop,!(!(d.pps&&Ns(d.pps[0],Q.pps[0]))||!(d.sps&&Ns(d.sps[0],Q.sps[0])))&&(ae.dts<d.timelineStartInfo.dts||(B=S.dts-ae.dts-ae.duration,B>=-C&&B<=P&&(!ee||L>B)&&(ee=Q,L=B)));return ee?ee.gop:null},this.alignGopsAtStart_=function(S){var P,C,L,B,ee,ae,Q,ye;for(ee=S.byteLength,ae=S.nalCount,Q=S.duration,P=C=0;P<_.length&&C<S.length&&(L=_[P],B=S[C],L.pts!==B.pts);){if(B.pts>L.pts){P++;continue}C++,ee-=B.byteLength,ae-=B.nalCount,Q-=B.duration}return C===0?S:C===S.length?null:(ye=S.slice(C),ye.byteLength=ee,ye.duration=Q,ye.nalCount=ae,ye.pts=ye[0].pts,ye.dts=ye[0].dts,ye)},this.alignGopsAtEnd_=function(S){var P,C,L,B,ee,ae;for(P=_.length-1,C=S.length-1,ee=null,ae=!1;P>=0&&C>=0;){if(L=_[P],B=S[C],L.pts===B.pts){ae=!0;break}if(L.pts>B.pts){P--;continue}P===_.length-1&&(ee=C),C--}if(!ae&&ee===null)return null;var Q;if(ae?Q=C:Q=ee,Q===0)return S;var ye=S.slice(Q),nt=ye.reduce(function(Ze,ni){return Ze.byteLength+=ni.byteLength,Ze.duration+=ni.duration,Ze.nalCount+=ni.nalCount,Ze},{byteLength:0,duration:0,nalCount:0});return ye.byteLength=nt.byteLength,ye.duration=nt.duration,ye.nalCount=nt.nalCount,ye.pts=ye[0].pts,ye.dts=ye[0].dts,ye},this.alignGopsWith=function(S){_=S}},Sr.prototype=new t,rt=function(d,p){this.numberOfTracks=0,this.metadataStream=p,d=d||{},typeof d.remux<"u"?this.remuxTracks=!!d.remux:this.remuxTracks=!0,typeof d.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=d.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,rt.prototype.init.call(this),this.push=function(h){if(h.text)return this.pendingCaptions.push(h);if(h.frames)return this.pendingMetadata.push(h);this.pendingTracks.push(h.track),this.pendingBytes+=h.boxes.byteLength,h.track.type==="video"&&(this.videoTrack=h.track,this.pendingBoxes.push(h.boxes)),h.track.type==="audio"&&(this.audioTrack=h.track,this.pendingBoxes.unshift(h.boxes))}},rt.prototype=new t,rt.prototype.flush=function(x){var d=0,p={captions:[],captionStreams:{},metadata:[],info:{}},h,g,_,T=0,w;if(this.pendingTracks.length<this.numberOfTracks){if(x!=="VideoSegmentStream"&&x!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(T=this.videoTrack.timelineStartInfo.pts,fn.forEach(function(S){p.info[S]=this.videoTrack[S]},this)):this.audioTrack&&(T=this.audioTrack.timelineStartInfo.pts,ua.forEach(function(S){p.info[S]=this.audioTrack[S]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?p.type=this.pendingTracks[0].type:p.type="combined",this.emittedTracks+=this.pendingTracks.length,_=bt.initSegment(this.pendingTracks),p.initSegment=new Uint8Array(_.byteLength),p.initSegment.set(_),p.data=new Uint8Array(this.pendingBytes),w=0;w<this.pendingBoxes.length;w++)p.data.set(this.pendingBoxes[w],d),d+=this.pendingBoxes[w].byteLength;for(w=0;w<this.pendingCaptions.length;w++)h=this.pendingCaptions[w],h.startTime=Oe.metadataTsToSeconds(h.startPts,T,this.keepOriginalTimestamps),h.endTime=Oe.metadataTsToSeconds(h.endPts,T,this.keepOriginalTimestamps),p.captionStreams[h.stream]=!0,p.captions.push(h);for(w=0;w<this.pendingMetadata.length;w++)g=this.pendingMetadata[w],g.cueTime=Oe.metadataTsToSeconds(g.pts,T,this.keepOriginalTimestamps),p.metadata.push(g);for(p.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",p),w=0;w<p.captions.length;w++)h=p.captions[w],this.trigger("caption",h);for(w=0;w<p.metadata.length;w++)g=p.metadata[w],this.trigger("id3Frame",g)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},rt.prototype.setRemux=function(x){this.remuxTracks=x},_t=function(d){var p=this,h=!0,g,_;_t.prototype.init.call(this),d=d||{},this.baseMediaDecodeTime=d.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var T={};this.transmuxPipeline_=T,T.type="aac",T.metadataStream=new Kt.MetadataStream,T.aacStream=new El,T.audioTimestampRolloverStream=new Kt.TimestampRolloverStream("audio"),T.timedMetadataTimestampRolloverStream=new Kt.TimestampRolloverStream("timed-metadata"),T.adtsStream=new Ls,T.coalesceStream=new rt(d,T.metadataStream),T.headOfPipeline=T.aacStream,T.aacStream.pipe(T.audioTimestampRolloverStream).pipe(T.adtsStream),T.aacStream.pipe(T.timedMetadataTimestampRolloverStream).pipe(T.metadataStream).pipe(T.coalesceStream),T.metadataStream.on("timestamp",function(w){T.aacStream.setTimestamp(w.timeStamp)}),T.aacStream.on("data",function(w){w.type!=="timed-metadata"&&w.type!=="audio"||T.audioSegmentStream||(_=_||{timelineStartInfo:{baseMediaDecodeTime:p.baseMediaDecodeTime},codec:"adts",type:"audio"},T.coalesceStream.numberOfTracks++,T.audioSegmentStream=new Bi(_,d),T.audioSegmentStream.on("log",p.getLogTrigger_("audioSegmentStream")),T.audioSegmentStream.on("timingInfo",p.trigger.bind(p,"audioTimingInfo")),T.adtsStream.pipe(T.audioSegmentStream).pipe(T.coalesceStream),p.trigger("trackinfo",{hasAudio:!!_,hasVideo:!!g}))}),T.coalesceStream.on("data",this.trigger.bind(this,"data")),T.coalesceStream.on("done",this.trigger.bind(this,"done")),Fs(this,T)},this.setupTsPipeline=function(){var T={};this.transmuxPipeline_=T,T.type="ts",T.metadataStream=new Kt.MetadataStream,T.packetStream=new Kt.TransportPacketStream,T.parseStream=new Kt.TransportParseStream,T.elementaryStream=new Kt.ElementaryStream,T.timestampRolloverStream=new Kt.TimestampRolloverStream,T.adtsStream=new Ls,T.h264Stream=new Al,T.captionStream=new Kt.CaptionStream(d),T.coalesceStream=new rt(d,T.metadataStream),T.headOfPipeline=T.packetStream,T.packetStream.pipe(T.parseStream).pipe(T.elementaryStream).pipe(T.timestampRolloverStream),T.timestampRolloverStream.pipe(T.h264Stream),T.timestampRolloverStream.pipe(T.adtsStream),T.timestampRolloverStream.pipe(T.metadataStream).pipe(T.coalesceStream),T.h264Stream.pipe(T.captionStream).pipe(T.coalesceStream),T.elementaryStream.on("data",function(w){var S;if(w.type==="metadata"){for(S=w.tracks.length;S--;)!g&&w.tracks[S].type==="video"?(g=w.tracks[S],g.timelineStartInfo.baseMediaDecodeTime=p.baseMediaDecodeTime):!_&&w.tracks[S].type==="audio"&&(_=w.tracks[S],_.timelineStartInfo.baseMediaDecodeTime=p.baseMediaDecodeTime);g&&!T.videoSegmentStream&&(T.coalesceStream.numberOfTracks++,T.videoSegmentStream=new Sr(g,d),T.videoSegmentStream.on("log",p.getLogTrigger_("videoSegmentStream")),T.videoSegmentStream.on("timelineStartInfo",function(P){_&&!d.keepOriginalTimestamps&&(_.timelineStartInfo=P,T.audioSegmentStream.setEarliestDts(P.dts-p.baseMediaDecodeTime))}),T.videoSegmentStream.on("processedGopsInfo",p.trigger.bind(p,"gopInfo")),T.videoSegmentStream.on("segmentTimingInfo",p.trigger.bind(p,"videoSegmentTimingInfo")),T.videoSegmentStream.on("baseMediaDecodeTime",function(P){_&&T.audioSegmentStream.setVideoBaseMediaDecodeTime(P)}),T.videoSegmentStream.on("timingInfo",p.trigger.bind(p,"videoTimingInfo")),T.h264Stream.pipe(T.videoSegmentStream).pipe(T.coalesceStream)),_&&!T.audioSegmentStream&&(T.coalesceStream.numberOfTracks++,T.audioSegmentStream=new Bi(_,d),T.audioSegmentStream.on("log",p.getLogTrigger_("audioSegmentStream")),T.audioSegmentStream.on("timingInfo",p.trigger.bind(p,"audioTimingInfo")),T.audioSegmentStream.on("segmentTimingInfo",p.trigger.bind(p,"audioSegmentTimingInfo")),T.adtsStream.pipe(T.audioSegmentStream).pipe(T.coalesceStream)),p.trigger("trackinfo",{hasAudio:!!_,hasVideo:!!g})}}),T.coalesceStream.on("data",this.trigger.bind(this,"data")),T.coalesceStream.on("id3Frame",function(w){w.dispatchType=T.metadataStream.dispatchType,p.trigger("id3Frame",w)}),T.coalesceStream.on("caption",this.trigger.bind(this,"caption")),T.coalesceStream.on("done",this.trigger.bind(this,"done")),Fs(this,T)},this.setBaseMediaDecodeTime=function(T){var w=this.transmuxPipeline_;d.keepOriginalTimestamps||(this.baseMediaDecodeTime=T),_&&(_.timelineStartInfo.dts=void 0,_.timelineStartInfo.pts=void 0,Mt.clearDtsInfo(_),w.audioTimestampRolloverStream&&w.audioTimestampRolloverStream.discontinuity()),g&&(w.videoSegmentStream&&(w.videoSegmentStream.gopCache_=[]),g.timelineStartInfo.dts=void 0,g.timelineStartInfo.pts=void 0,Mt.clearDtsInfo(g),w.captionStream.reset()),w.timestampRolloverStream&&w.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(T){_&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(T)},this.setRemux=function(T){var w=this.transmuxPipeline_;d.remux=T,w&&w.coalesceStream&&w.coalesceStream.setRemux(T)},this.alignGopsWith=function(T){g&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(T)},this.getLogTrigger_=function(T){var w=this;return function(S){S.stream=T,w.trigger("log",S)}},this.push=function(T){if(h){var w=Il(T);w&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!w&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),h=!1}this.transmuxPipeline_.headOfPipeline.push(T)},this.flush=function(){h=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},_t.prototype=new t;var Dl={Transmuxer:_t,VideoSegmentStream:Sr,AudioSegmentStream:Bi,AUDIO_PROPERTIES:ua,VIDEO_PROPERTIES:fn,generateSegmentTimingInfo:la},Ll=function(d){return d>>>0},qo=function(d){return("00"+d.toString(16)).slice(-2)},cn={toUnsigned:Ll,toHexString:qo},Xt=function(d){var p="";return p+=String.fromCharCode(d[0]),p+=String.fromCharCode(d[1]),p+=String.fromCharCode(d[2]),p+=String.fromCharCode(d[3]),p},si=Xt,hn=cn.toUnsigned,Go=function x(d,p){var h=[],g,_,T,w,S;if(!p.length)return null;for(g=0;g<d.byteLength;)_=hn(d[g]<<24|d[g+1]<<16|d[g+2]<<8|d[g+3]),T=si(d.subarray(g+4,g+8)),w=_>1?g+_:d.byteLength,T===p[0]&&(p.length===1?h.push(d.subarray(g+8,w)):(S=x(d.subarray(g+8,w),p.slice(1)),S.length&&(h=h.concat(S)))),g=w;return h},He=Go,Di=cn.toUnsigned,zo=e.getUint64,Ko=function(d){var p={version:d[0],flags:new Uint8Array(d.subarray(1,4))};return p.version===1?p.baseMediaDecodeTime=zo(d.subarray(4)):p.baseMediaDecodeTime=Di(d[4]<<24|d[5]<<16|d[6]<<8|d[7]),p},Ja=Ko,Xo=function(d){return{isLeading:(d[0]&12)>>>2,dependsOn:d[0]&3,isDependedOn:(d[1]&192)>>>6,hasRedundancy:(d[1]&48)>>>4,paddingValue:(d[1]&14)>>>1,isNonSyncSample:d[1]&1,degradationPriority:d[2]<<8|d[3]}},Za=Xo,Qo=function(d){var p={version:d[0],flags:new Uint8Array(d.subarray(1,4)),samples:[]},h=new DataView(d.buffer,d.byteOffset,d.byteLength),g=p.flags[2]&1,_=p.flags[2]&4,T=p.flags[1]&1,w=p.flags[1]&2,S=p.flags[1]&4,P=p.flags[1]&8,C=h.getUint32(4),L=8,B;for(g&&(p.dataOffset=h.getInt32(L),L+=4),_&&C&&(B={flags:Za(d.subarray(L,L+4))},L+=4,T&&(B.duration=h.getUint32(L),L+=4),w&&(B.size=h.getUint32(L),L+=4),P&&(p.version===1?B.compositionTimeOffset=h.getInt32(L):B.compositionTimeOffset=h.getUint32(L),L+=4),p.samples.push(B),C--);C--;)B={},T&&(B.duration=h.getUint32(L),L+=4),w&&(B.size=h.getUint32(L),L+=4),S&&(B.flags=Za(d.subarray(L,L+4)),L+=4),P&&(p.version===1?B.compositionTimeOffset=h.getInt32(L):B.compositionTimeOffset=h.getUint32(L),L+=4),p.samples.push(B);return p},oi=Qo,kl=function(d){var p=new DataView(d.buffer,d.byteOffset,d.byteLength),h={version:d[0],flags:new Uint8Array(d.subarray(1,4)),trackId:p.getUint32(4)},g=h.flags[2]&1,_=h.flags[2]&2,T=h.flags[2]&8,w=h.flags[2]&16,S=h.flags[2]&32,P=h.flags[0]&65536,C=h.flags[0]&131072,L;return L=8,g&&(L+=4,h.baseDataOffset=p.getUint32(12),L+=4),_&&(h.sampleDescriptionIndex=p.getUint32(L),L+=4),T&&(h.defaultSampleDuration=p.getUint32(L),L+=4),w&&(h.defaultSampleSize=p.getUint32(L),L+=4),S&&(h.defaultSampleFlags=p.getUint32(L)),P&&(h.durationIsEmpty=!0),!g&&C&&(h.baseDataOffsetIsMoof=!0),h},ci=kl,Us=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nr;typeof window<"u"?nr=window:typeof Us<"u"?nr=Us:typeof self<"u"?nr=self:nr={};var ri=nr,es=_r.discardEmulationPreventionBytes,Bs=nn.CaptionStream,Dt=function(d,p){for(var h=d,g=0;g<p.length;g++){var _=p[g];if(h<_.size)return _;h-=_.size}return null},Hr=function(d,p,h){var g=new DataView(d.buffer,d.byteOffset,d.byteLength),_={logs:[],seiNals:[]},T,w,S,P;for(w=0;w+4<d.length;w+=S)if(S=g.getUint32(w),w+=4,!(S<=0))switch(d[w]&31){case 6:var C=d.subarray(w+1,w+1+S),L=Dt(w,p);if(T={nalUnitType:"sei_rbsp",size:S,data:C,escapedRBSP:es(C),trackId:h},L)T.pts=L.pts,T.dts=L.dts,P=L;else if(P)T.pts=P.pts,T.dts=P.dts;else{_.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+w+" for trackId "+h+". See mux.js#223."});break}_.seiNals.push(T);break}return _},js=function(d,p,h){var g=p,_=h.defaultSampleDuration||0,T=h.defaultSampleSize||0,w=h.trackId,S=[];return d.forEach(function(P){var C=oi(P),L=C.samples;L.forEach(function(B){B.duration===void 0&&(B.duration=_),B.size===void 0&&(B.size=T),B.trackId=w,B.dts=g,B.compositionTimeOffset===void 0&&(B.compositionTimeOffset=0),typeof g=="bigint"?(B.pts=g+ri.BigInt(B.compositionTimeOffset),g+=ri.BigInt(B.duration)):(B.pts=g+B.compositionTimeOffset,g+=B.duration)}),S=S.concat(L)}),S},Rl=function(d,p){var h=He(d,["moof","traf"]),g=He(d,["mdat"]),_={},T=[];return g.forEach(function(w,S){var P=h[S];T.push({mdat:w,traf:P})}),T.forEach(function(w){var S=w.mdat,P=w.traf,C=He(P,["tfhd"]),L=ci(C[0]),B=L.trackId,ee=He(P,["tfdt"]),ae=ee.length>0?Ja(ee[0]).baseMediaDecodeTime:0,Q=He(P,["trun"]),ye,nt;p===B&&Q.length>0&&(ye=js(Q,ae,L),nt=Hr(S,ye,B),_[B]||(_[B]={seiNals:[],logs:[]}),_[B].seiNals=_[B].seiNals.concat(nt.seiNals),_[B].logs=_[B].logs.concat(nt.logs))}),_},Vs=function(d,p,h){var g;if(p===null)return null;g=Rl(d,p);var _=g[p]||{};return{seiNals:_.seiNals,logs:_.logs,timescale:h}},Ml=function(){var d=!1,p,h,g,_,T,w;this.isInitialized=function(){return d},this.init=function(S){p=new Bs,d=!0,w=S?S.isPartial:!1,p.on("data",function(P){P.startTime=P.startPts/_,P.endTime=P.endPts/_,T.captions.push(P),T.captionStreams[P.stream]=!0}),p.on("log",function(P){T.logs.push(P)})},this.isNewInit=function(S,P){return S&&S.length===0||P&&typeof P=="object"&&Object.keys(P).length===0?!1:g!==S[0]||_!==P[g]},this.parse=function(S,P,C){var L;if(this.isInitialized()){if(!P||!C)return null;if(this.isNewInit(P,C))g=P[0],_=C[g];else if(g===null||!_)return h.push(S),null}else return null;for(;h.length>0;){var B=h.shift();this.parse(B,P,C)}return L=Vs(S,g,_),L&&L.logs&&(T.logs=T.logs.concat(L.logs)),L===null||!L.seiNals?T.logs.length?{logs:T.logs,captions:[],captionStreams:[]}:null:(this.pushNals(L.seiNals),this.flushStream(),T)},this.pushNals=function(S){if(!this.isInitialized()||!S||S.length===0)return null;S.forEach(function(P){p.push(P)})},this.flushStream=function(){if(!this.isInitialized())return null;w?p.partialFlush():p.flush()},this.clearParsedCaptions=function(){T.captions=[],T.captionStreams={},T.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;p.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){h=[],g=null,_=null,T?this.clearParsedCaptions():T={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Fl=Ml,pn=cn.toUnsigned,ar=cn.toHexString,ts=e.getUint64,$r,Hs,is,rs,da,mn;$r=function(d){var p={},h=He(d,["moov","trak"]);return h.reduce(function(g,_){var T,w,S,P,C;return T=He(_,["tkhd"])[0],!T||(w=T[0],S=w===0?12:20,P=pn(T[S]<<24|T[S+1]<<16|T[S+2]<<8|T[S+3]),C=He(_,["mdia","mdhd"])[0],!C)?null:(w=C[0],S=w===0?12:20,g[P]=pn(C[S]<<24|C[S+1]<<16|C[S+2]<<8|C[S+3]),g)},p)},Hs=function(d,p){var h;h=He(p,["moof","traf"]);var g=h.reduce(function(_,T){var w=He(T,["tfhd"])[0],S=pn(w[4]<<24|w[5]<<16|w[6]<<8|w[7]),P=d[S]||9e4,C=He(T,["tfdt"])[0],L=new DataView(C.buffer,C.byteOffset,C.byteLength),B;C[0]===1?B=ts(C.subarray(4,12)):B=L.getUint32(4);var ee;return typeof B=="bigint"?ee=B/ri.BigInt(P):typeof B=="number"&&!isNaN(B)&&(ee=B/P),ee<Number.MAX_SAFE_INTEGER&&(ee=Number(ee)),ee<_&&(_=ee),_},1/0);return typeof g=="bigint"||isFinite(g)?g:0},is=function(d,p){var h=He(p,["moof","traf"]),g=0,_=0,T;if(h&&h.length){var w=He(h[0],["tfhd"])[0],S=He(h[0],["trun"])[0],P=He(h[0],["tfdt"])[0];if(w){var C=ci(w);T=C.trackId}if(P){var L=Ja(P);g=L.baseMediaDecodeTime}if(S){var B=oi(S);B.samples&&B.samples.length&&(_=B.samples[0].compositionTimeOffset||0)}}var ee=d[T]||9e4;typeof g=="bigint"&&(_=ri.BigInt(_),ee=ri.BigInt(ee));var ae=(g+_)/ee;return typeof ae=="bigint"&&ae<Number.MAX_SAFE_INTEGER&&(ae=Number(ae)),ae},rs=function(d){var p=He(d,["moov","trak"]),h=[];return p.forEach(function(g){var _=He(g,["mdia","hdlr"]),T=He(g,["tkhd"]);_.forEach(function(w,S){var P=si(w.subarray(8,12)),C=T[S],L,B,ee;P==="vide"&&(L=new DataView(C.buffer,C.byteOffset,C.byteLength),B=L.getUint8(0),ee=B===0?L.getUint32(12):L.getUint32(20),h.push(ee))})}),h},mn=function(d){var p=d[0],h=p===0?12:20;return pn(d[h]<<24|d[h+1]<<16|d[h+2]<<8|d[h+3])},da=function(d){var p=He(d,["moov","trak"]),h=[];return p.forEach(function(g){var _={},T=He(g,["tkhd"])[0],w,S;T&&(w=new DataView(T.buffer,T.byteOffset,T.byteLength),S=w.getUint8(0),_.id=S===0?w.getUint32(12):w.getUint32(20));var P=He(g,["mdia","hdlr"])[0];if(P){var C=si(P.subarray(8,12));C==="vide"?_.type="video":C==="soun"?_.type="audio":_.type=C}var L=He(g,["mdia","minf","stbl","stsd"])[0];if(L){var B=L.subarray(8);_.codec=si(B.subarray(4,8));var ee=He(B,[_.codec])[0],ae,Q;ee&&(/^[asm]vc[1-9]$/i.test(_.codec)?(ae=ee.subarray(78),Q=si(ae.subarray(4,8)),Q==="avcC"&&ae.length>11?(_.codec+=".",_.codec+=ar(ae[9]),_.codec+=ar(ae[10]),_.codec+=ar(ae[11])):_.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(_.codec)?(ae=ee.subarray(28),Q=si(ae.subarray(4,8)),Q==="esds"&&ae.length>20&&ae[19]!==0?(_.codec+="."+ar(ae[19]),_.codec+="."+ar(ae[20]>>>2&63).replace(/^0/,"")):_.codec="mp4a.40.2"):_.codec=_.codec.toLowerCase())}var ye=He(g,["mdia","mdhd"])[0];ye&&(_.timescale=mn(ye)),h.push(_)}),h};var ns={findBox:He,parseType:si,timescale:$r,startTime:Hs,compositionStartTime:is,videoTrackIds:rs,tracks:da,getTimescaleFromMediaHeader:mn},$s=function(d){var p=d[1]&31;return p<<=8,p|=d[2],p},Er=function(d){return!!(d[1]&64)},wr=function(d){var p=0;return(d[3]&48)>>>4>1&&(p+=d[4]+1),p},Nl=function(d,p){var h=$s(d);return h===0?"pat":h===p?"pmt":p?"pes":null},Yo=function(d){var p=Er(d),h=4+wr(d);return p&&(h+=d[h]+1),(d[h+10]&31)<<8|d[h+11]},bi=function(d){var p={},h=Er(d),g=4+wr(d);if(h&&(g+=d[g]+1),!!(d[g+5]&1)){var _,T,w;_=(d[g+1]&15)<<8|d[g+2],T=3+_-4,w=(d[g+10]&15)<<8|d[g+11];for(var S=12+w;S<T;){var P=g+S;p[(d[P+1]&31)<<8|d[P+2]]=d[P],S+=((d[P+3]&15)<<8|d[P+4])+5}return p}},Ws=function(d,p){var h=$s(d),g=p[h];switch(g){case ht.H264_STREAM_TYPE:return"video";case ht.ADTS_STREAM_TYPE:return"audio";case ht.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},fa=function(d){var p=Er(d);if(!p)return null;var h=4+wr(d);if(h>=d.byteLength)return null;var g=null,_;return _=d[h+7],_&192&&(g={},g.pts=(d[h+9]&14)<<27|(d[h+10]&255)<<20|(d[h+11]&254)<<12|(d[h+12]&255)<<5|(d[h+13]&254)>>>3,g.pts*=4,g.pts+=(d[h+13]&6)>>>1,g.dts=g.pts,_&64&&(g.dts=(d[h+14]&14)<<27|(d[h+15]&255)<<20|(d[h+16]&254)<<12|(d[h+17]&255)<<5|(d[h+18]&254)>>>3,g.dts*=4,g.dts+=(d[h+18]&6)>>>1)),g},Nn=function(d){switch(d){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Jo=function(d){for(var p=4+wr(d),h=d.subarray(p),g=0,_=0,T=!1,w;_<h.byteLength-3;_++)if(h[_+2]===1){g=_+5;break}for(;g<h.byteLength;)switch(h[g]){case 0:if(h[g-1]!==0){g+=2;break}else if(h[g-2]!==0){g++;break}_+3!==g-2&&(w=Nn(h[_+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0));do{g++}while(h[g]!==1&&g<h.length);_=g-2,g+=3;break;case 1:if(h[g-1]!==0||h[g-2]!==0){g+=3;break}w=Nn(h[_+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0),_=g-2,g+=3;break;default:g+=3;break}return h=h.subarray(_),g-=_,_=0,h&&h.byteLength>3&&(w=Nn(h[_+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0)),T},Ul={parseType:Nl,parsePat:Yo,parsePmt:bi,parsePayloadUnitStartIndicator:Er,parsePesType:Ws,parsePesTime:fa,videoPacketContainsKeyFrame:Jo},ji=Ds.handleRollover,Fe={};Fe.ts=Ul,Fe.aac=dn;var xi=Oe.ONE_SECOND_IN_TS,St=188,Lt=71,Bl=function(d,p){for(var h=0,g=St,_,T;g<d.byteLength;){if(d[h]===Lt&&d[g]===Lt){switch(_=d.subarray(h,g),T=Fe.ts.parseType(_,p.pid),T){case"pat":p.pid=Fe.ts.parsePat(_);break;case"pmt":var w=Fe.ts.parsePmt(_);p.table=p.table||{},Object.keys(w).forEach(function(S){p.table[S]=w[S]});break}h+=St,g+=St;continue}h++,g++}},qs=function(d,p,h){for(var g=0,_=St,T,w,S,P,C,L=!1;_<=d.byteLength;){if(d[g]===Lt&&(d[_]===Lt||_===d.byteLength)){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="audio"&&P&&(C=Fe.ts.parsePesTime(T),C&&(C.type="audio",h.audio.push(C),L=!0));break}if(L)break;g+=St,_+=St;continue}g++,_++}for(_=d.byteLength,g=_-St,L=!1;g>=0;){if(d[g]===Lt&&(d[_]===Lt||_===d.byteLength)){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="audio"&&P&&(C=Fe.ts.parsePesTime(T),C&&(C.type="audio",h.audio.push(C),L=!0));break}if(L)break;g-=St,_-=St;continue}g--,_--}},Gs=function(d,p,h){for(var g=0,_=St,T,w,S,P,C,L,B,ee,ae=!1,Q={data:[],size:0};_<d.byteLength;){if(d[g]===Lt&&d[_]===Lt){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":if(S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="video"&&(P&&!ae&&(C=Fe.ts.parsePesTime(T),C&&(C.type="video",h.video.push(C),ae=!0)),!h.firstKeyFrame)){if(P&&Q.size!==0){for(L=new Uint8Array(Q.size),B=0;Q.data.length;)ee=Q.data.shift(),L.set(ee,B),B+=ee.byteLength;if(Fe.ts.videoPacketContainsKeyFrame(L)){var ye=Fe.ts.parsePesTime(L);ye?(h.firstKeyFrame=ye,h.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Q.size=0}Q.data.push(T),Q.size+=T.byteLength}break}if(ae&&h.firstKeyFrame)break;g+=St,_+=St;continue}g++,_++}for(_=d.byteLength,g=_-St,ae=!1;g>=0;){if(d[g]===Lt&&d[_]===Lt){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="video"&&P&&(C=Fe.ts.parsePesTime(T),C&&(C.type="video",h.video.push(C),ae=!0));break}if(ae)break;g-=St,_-=St;continue}g--,_--}},Zo=function(d,p){if(d.audio&&d.audio.length){var h=p;(typeof h>"u"||isNaN(h))&&(h=d.audio[0].dts),d.audio.forEach(function(T){T.dts=ji(T.dts,h),T.pts=ji(T.pts,h),T.dtsTime=T.dts/xi,T.ptsTime=T.pts/xi})}if(d.video&&d.video.length){var g=p;if((typeof g>"u"||isNaN(g))&&(g=d.video[0].dts),d.video.forEach(function(T){T.dts=ji(T.dts,g),T.pts=ji(T.pts,g),T.dtsTime=T.dts/xi,T.ptsTime=T.pts/xi}),d.firstKeyFrame){var _=d.firstKeyFrame;_.dts=ji(_.dts,g),_.pts=ji(_.pts,g),_.dtsTime=_.dts/xi,_.ptsTime=_.pts/xi}}},Wr=function(d){for(var p=!1,h=0,g=null,_=null,T=0,w=0,S;d.length-w>=3;){var P=Fe.aac.parseType(d,w);switch(P){case"timed-metadata":if(d.length-w<10){p=!0;break}if(T=Fe.aac.parseId3TagSize(d,w),T>d.length){p=!0;break}_===null&&(S=d.subarray(w,w+T),_=Fe.aac.parseAacTimestamp(S)),w+=T;break;case"audio":if(d.length-w<7){p=!0;break}if(T=Fe.aac.parseAdtsSize(d,w),T>d.length){p=!0;break}g===null&&(S=d.subarray(w,w+T),g=Fe.aac.parseSampleRate(S)),h++,w+=T;break;default:w++;break}if(p)return null}if(g===null||_===null)return null;var C=xi/g,L={audio:[{type:"audio",dts:_,pts:_},{type:"audio",dts:_+h*1024*C,pts:_+h*1024*C}]};return L},as=function(d){var p={pid:null,table:null},h={};Bl(d,p);for(var g in p.table)if(p.table.hasOwnProperty(g)){var _=p.table[g];switch(_){case ht.H264_STREAM_TYPE:h.video=[],Gs(d,p,h),h.video.length===0&&delete h.video;break;case ht.ADTS_STREAM_TYPE:h.audio=[],qs(d,p,h),h.audio.length===0&&delete h.audio;break}}return h},jl=function(d,p){var h=Fe.aac.isLikelyAacData(d),g;return h?g=Wr(d):g=as(d),!g||!g.audio&&!g.video?null:(Zo(g,p),g)},Vl={inspect:jl,parseAudioPes_:qs},Hl=function(d,p){p.on("data",function(h){var g=h.initSegment;h.initSegment={data:g.buffer,byteOffset:g.byteOffset,byteLength:g.byteLength};var _=h.data;h.data=_.buffer,d.postMessage({action:"data",segment:h,byteOffset:_.byteOffset,byteLength:_.byteLength},[h.data])}),p.on("done",function(h){d.postMessage({action:"done"})}),p.on("gopInfo",function(h){d.postMessage({action:"gopInfo",gopInfo:h})}),p.on("videoSegmentTimingInfo",function(h){var g={start:{decode:Oe.videoTsToSeconds(h.start.dts),presentation:Oe.videoTsToSeconds(h.start.pts)},end:{decode:Oe.videoTsToSeconds(h.end.dts),presentation:Oe.videoTsToSeconds(h.end.pts)},baseMediaDecodeTime:Oe.videoTsToSeconds(h.baseMediaDecodeTime)};h.prependedContentDuration&&(g.prependedContentDuration=Oe.videoTsToSeconds(h.prependedContentDuration)),d.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:g})}),p.on("audioSegmentTimingInfo",function(h){var g={start:{decode:Oe.videoTsToSeconds(h.start.dts),presentation:Oe.videoTsToSeconds(h.start.pts)},end:{decode:Oe.videoTsToSeconds(h.end.dts),presentation:Oe.videoTsToSeconds(h.end.pts)},baseMediaDecodeTime:Oe.videoTsToSeconds(h.baseMediaDecodeTime)};h.prependedContentDuration&&(g.prependedContentDuration=Oe.videoTsToSeconds(h.prependedContentDuration)),d.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:g})}),p.on("id3Frame",function(h){d.postMessage({action:"id3Frame",id3Frame:h})}),p.on("caption",function(h){d.postMessage({action:"caption",caption:h})}),p.on("trackinfo",function(h){d.postMessage({action:"trackinfo",trackInfo:h})}),p.on("audioTimingInfo",function(h){d.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Oe.videoTsToSeconds(h.start),end:Oe.videoTsToSeconds(h.end)}})}),p.on("videoTimingInfo",function(h){d.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Oe.videoTsToSeconds(h.start),end:Oe.videoTsToSeconds(h.end)}})}),p.on("log",function(h){d.postMessage({action:"log",log:h})})},qr=function(){function x(p,h){this.options=h||{},this.self=p,this.init()}var d=x.prototype;return d.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Dl.Transmuxer(this.options),Hl(this.self,this.transmuxer)},d.pushMp4Captions=function(h){this.captionParser||(this.captionParser=new Fl,this.captionParser.init());var g=new Uint8Array(h.data,h.byteOffset,h.byteLength),_=this.captionParser.parse(g,h.trackIds,h.timescales);this.self.postMessage({action:"mp4Captions",captions:_&&_.captions||[],logs:_&&_.logs||[],data:g.buffer},[g.buffer])},d.probeMp4StartTime=function(h){var g=h.timescales,_=h.data,T=ns.startTime(g,_);this.self.postMessage({action:"probeMp4StartTime",startTime:T,data:_},[_.buffer])},d.probeMp4Tracks=function(h){var g=h.data,_=ns.tracks(g);this.self.postMessage({action:"probeMp4Tracks",tracks:_,data:g},[g.buffer])},d.probeTs=function(h){var g=h.data,_=h.baseStartTime,T=typeof _=="number"&&!isNaN(_)?_*Oe.ONE_SECOND_IN_TS:void 0,w=Vl.inspect(g,T),S=null;w&&(S={hasVideo:w.video&&w.video.length===2||!1,hasAudio:w.audio&&w.audio.length===2||!1},S.hasVideo&&(S.videoStart=w.video[0].ptsTime),S.hasAudio&&(S.audioStart=w.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:S,data:g},[g.buffer])},d.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},d.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},d.push=function(h){var g=new Uint8Array(h.data,h.byteOffset,h.byteLength);this.transmuxer.push(g)},d.reset=function(){this.transmuxer.reset()},d.setTimestampOffset=function(h){var g=h.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Oe.secondsToVideoTs(g)))},d.setAudioAppendStart=function(h){this.transmuxer.setAudioAppendStart(Math.ceil(Oe.secondsToVideoTs(h.appendStart)))},d.setRemux=function(h){this.transmuxer.setRemux(h.remux)},d.flush=function(h){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},d.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},d.alignGopsWith=function(h){this.transmuxer.alignGopsWith(h.gopsToAlignWith.slice())},x}();self.onmessage=function(x){if(x.data.action==="init"&&x.data.options){this.messageHandlers=new qr(self,x.data.options);return}this.messageHandlers||(this.messageHandlers=new qr(self)),x.data&&x.data.action&&x.data.action!=="init"&&this.messageHandlers[x.data.action]&&this.messageHandlers[x.data.action](x.data)}})),Aj=S1(Cj),Ij=function(t,i,r){var e=t.data.segment,n=e.type,s=e.initSegment,o=e.captions,l=e.captionStreams,f=e.metadata,m=e.videoFrameDtsTime,v=e.videoFramePtsTime;i.buffer.push({captions:o,captionStreams:l,metadata:f});var y=t.data.segment.boxes||{data:t.data.segment.data},E={type:n,data:new Uint8Array(y.data,y.data.byteOffset,y.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof m<"u"&&(E.videoFrameDtsTime=m),typeof v<"u"&&(E.videoFramePtsTime=v),r(E)},Pj=function(t){var i=t.transmuxedData,r=t.callback;i.buffer=[],r(i)},Oj=function(t,i){i.gopInfo=t.data.gopInfo},C1=function(t){var i=t.transmuxer,r=t.bytes,e=t.audioAppendStart,n=t.gopsToAlignWith,s=t.remux,o=t.onData,l=t.onTrackInfo,f=t.onAudioTimingInfo,m=t.onVideoTimingInfo,v=t.onVideoSegmentTimingInfo,y=t.onAudioSegmentTimingInfo,E=t.onId3,I=t.onCaptions,O=t.onDone,D=t.onEndedTimeline,R=t.onTransmuxerLog,H=t.isEndOfTimeline,Z={buffer:[]},V=H,W=function(X){i.currentTransmux===t&&(X.data.action==="data"&&Ij(X,Z,o),X.data.action==="trackinfo"&&l(X.data.trackInfo),X.data.action==="gopInfo"&&Oj(X,Z),X.data.action==="audioTimingInfo"&&f(X.data.audioTimingInfo),X.data.action==="videoTimingInfo"&&m(X.data.videoTimingInfo),X.data.action==="videoSegmentTimingInfo"&&v(X.data.videoSegmentTimingInfo),X.data.action==="audioSegmentTimingInfo"&&y(X.data.audioSegmentTimingInfo),X.data.action==="id3Frame"&&E([X.data.id3Frame],X.data.id3Frame.dispatchType),X.data.action==="caption"&&I(X.data.caption),X.data.action==="endedtimeline"&&(V=!1,D()),X.data.action==="log"&&R(X.data.log),X.data.type==="transmuxed"&&(V||(i.onmessage=null,Pj({transmuxedData:Z,callback:O}),A1(i))))};if(i.onmessage=W,e&&i.postMessage({action:"setAudioAppendStart",appendStart:e}),Array.isArray(n)&&i.postMessage({action:"alignGopsWith",gopsToAlignWith:n}),typeof s<"u"&&i.postMessage({action:"setRemux",remux:s}),r.byteLength){var te=r instanceof ArrayBuffer?r:r.buffer,z=r instanceof ArrayBuffer?0:r.byteOffset;i.postMessage({action:"push",data:te,byteOffset:z,byteLength:r.byteLength},[te])}H&&i.postMessage({action:"endTimeline"}),i.postMessage({action:"flush"})},A1=function(t){t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),typeof t.currentTransmux=="function"?t.currentTransmux():C1(t.currentTransmux))},rb=function(t,i){t.postMessage({action:i}),A1(t)},I1=function(t,i){if(!i.currentTransmux){i.currentTransmux=t,rb(i,t);return}i.transmuxQueue.push(rb.bind(null,i,t))},Dj=function(t){I1("reset",t)},Lj=function(t){I1("endTimeline",t)},P1=function(t){if(!t.transmuxer.currentTransmux){t.transmuxer.currentTransmux=t,C1(t);return}t.transmuxer.transmuxQueue.push(t)},kj=function(t){var i=new Aj;i.currentTransmux=null,i.transmuxQueue=[];var r=i.terminate;return i.terminate=function(){return i.currentTransmux=null,i.transmuxQueue.length=0,r.call(i)},i.postMessage({action:"init",options:t}),i},Tm={reset:Dj,endTimeline:Lj,transmux:P1,createTransmuxer:kj},nh=function(t){var i=t.transmuxer,r=t.endAction||t.action,e=t.callback,n=Ni({},t,{endAction:null,transmuxer:null,callback:null}),s=function f(m){m.data.action===r&&(i.removeEventListener("message",f),m.data.data&&(m.data.data=new Uint8Array(m.data.data,t.byteOffset||0,t.byteLength||m.data.data.byteLength),t.data&&(t.data=m.data.data)),e(m.data))};if(i.addEventListener("message",s),t.data){var o=t.data instanceof ArrayBuffer;n.byteOffset=o?0:t.data.byteOffset,n.byteLength=t.data.byteLength;var l=[o?t.data:t.data.buffer];i.postMessage(n,l)}else i.postMessage(n)},Zn={FAILURE:2,TIMEOUT:-101,ABORTED:-102},vg=function(t){t.forEach(function(i){i.abort()})},Rj=function(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}},Mj=function(t){var i=t.target,r=Date.now()-i.requestTime,e={bandwidth:1/0,bytesReceived:0,roundTripTime:r||0};return e.bytesReceived=t.loaded,e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3),e},u0=function(t,i){return i.timedout?{status:i.status,message:"HLS request timed-out at URL: "+i.uri,code:Zn.TIMEOUT,xhr:i}:i.aborted?{status:i.status,message:"HLS request aborted at URL: "+i.uri,code:Zn.ABORTED,xhr:i}:t?{status:i.status,message:"HLS request errored at URL: "+i.uri,code:Zn.FAILURE,xhr:i}:i.responseType==="arraybuffer"&&i.response.byteLength===0?{status:i.status,message:"Empty HLS response at URL: "+i.uri,code:Zn.FAILURE,xhr:i}:null},nb=function(t,i,r){return function(e,n){var s=n.response,o=u0(e,n);if(o)return r(o,t);if(s.byteLength!==16)return r({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:Zn.FAILURE,xhr:n},t);for(var l=new DataView(s),f=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]),m=0;m<i.length;m++)i[m].bytes=f;return r(null,t)}},O1=function(t,i){var r=Zu(t.map.bytes);if(r!=="mp4"){var e=t.map.resolvedUri||t.map.uri;return i({internal:!0,message:"Found unsupported "+(r||"unknown")+" container for initialization segment at URL: "+e,code:Zn.FAILURE})}nh({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:function(s){var o=s.tracks,l=s.data;return t.map.bytes=l,o.forEach(function(f){t.map.tracks=t.map.tracks||{},!t.map.tracks[f.type]&&(t.map.tracks[f.type]=f,typeof f.id=="number"&&f.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[f.id]=f.timescale))}),i(null)}})},Fj=function(t){var i=t.segment,r=t.finishProcessingFn;return function(e,n){var s=u0(e,n);if(s)return r(s,i);var o=new Uint8Array(n.response);if(i.map.key)return i.map.encryptedBytes=o,r(null,i);i.map.bytes=o,O1(i,function(l){if(l)return l.xhr=n,l.status=n.status,r(l,i);r(null,i)})}},Nj=function(t){var i=t.segment,r=t.finishProcessingFn,e=t.responseType;return function(n,s){var o=u0(n,s);if(o)return r(o,i);var l=e==="arraybuffer"||!s.responseText?s.response:Ej(s.responseText.substring(i.lastReachedChar||0));return i.stats=Rj(s),i.key?i.encryptedBytes=new Uint8Array(l):i.bytes=new Uint8Array(l),r(null,i)}},Uj=function(t){var i=t.segment,r=t.bytes,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog,O=i.map&&i.map.tracks||{},D=Boolean(O.audio&&O.video),R=n.bind(null,i,"audio","start"),H=n.bind(null,i,"audio","end"),Z=n.bind(null,i,"video","start"),V=n.bind(null,i,"video","end"),W=function(){return P1({bytes:r,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,remux:D,onData:function(q){q.type=q.type==="combined"?"video":q.type,y(i,q)},onTrackInfo:function(q){e&&(D&&(q.isMuxed=!0),e(i,q))},onAudioTimingInfo:function(q){R&&typeof q.start<"u"&&(R(q.start),R=null),H&&typeof q.end<"u"&&H(q.end)},onVideoTimingInfo:function(q){Z&&typeof q.start<"u"&&(Z(q.start),Z=null),V&&typeof q.end<"u"&&V(q.end)},onVideoSegmentTimingInfo:function(q){s(q)},onAudioSegmentTimingInfo:function(q){o(q)},onId3:function(q,X){l(i,q,X)},onCaptions:function(q){f(i,[q])},isEndOfTimeline:m,onEndedTimeline:function(){v()},onTransmuxerLog:I,onDone:function(q){E&&(q.type=q.type==="combined"?"video":q.type,E(null,i,q))}})};nh({action:"probeTs",transmuxer:i.transmuxer,data:r,baseStartTime:i.baseStartTime,callback:function(z){i.bytes=r=z.data;var q=z.result;q&&(e(i,{hasAudio:q.hasAudio,hasVideo:q.hasVideo,isMuxed:D}),e=null,q.hasAudio&&!D&&R(q.audioStart),q.hasVideo&&Z(q.videoStart),R=null,Z=null),W()}})},D1=function(t){var i=t.segment,r=t.bytes,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog,O=new Uint8Array(r);if(jS(O)){i.isFmp4=!0;var D=i.map.tracks,R={isFmp4:!0,hasVideo:!!D.video,hasAudio:!!D.audio};D.audio&&D.audio.codec&&D.audio.codec!=="enca"&&(R.audioCodec=D.audio.codec),D.video&&D.video.codec&&D.video.codec!=="encv"&&(R.videoCodec=D.video.codec),D.video&&D.audio&&(R.isMuxed=!0),e(i,R);var H=function(V){y(i,{data:O,type:R.hasAudio&&!R.isMuxed?"audio":"video"}),V&&V.length&&f(i,V),E(null,i,{})};nh({action:"probeMp4StartTime",timescales:i.map.timescales,data:O,transmuxer:i.transmuxer,callback:function(V){var W=V.data,te=V.startTime;if(r=W.buffer,i.bytes=O=W,R.hasAudio&&!R.isMuxed&&n(i,"audio","start",te),R.hasVideo&&n(i,"video","start",te),!D.video||!W.byteLength||!i.transmuxer){H();return}nh({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:i.transmuxer,data:O,timescales:i.map.timescales,trackIds:[D.video.id],callback:function(q){r=q.data.buffer,i.bytes=O=q.data,q.logs.forEach(function(X){I(N.mergeOptions(X,{stream:"mp4CaptionParser"}))}),H(q.captions)}})}});return}if(!i.transmuxer){E(null,i,{});return}if(typeof i.container>"u"&&(i.container=Zu(O)),i.container!=="ts"&&i.container!=="aac"){e(i,{hasAudio:!1,hasVideo:!1}),E(null,i,{});return}Uj({segment:i,bytes:r,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I})},L1=function(t,i){var r=t.id,e=t.key,n=t.encryptedBytes,s=t.decryptionWorker,o=function f(m){if(m.data.source===r){s.removeEventListener("message",f);var v=m.data.decrypted;i(new Uint8Array(v.bytes,v.byteOffset,v.byteLength))}};s.addEventListener("message",o);var l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),s.postMessage(v1({source:r,encrypted:n,key:l,iv:e.iv}),[n.buffer,l.buffer])},Bj=function(t){var i=t.decryptionWorker,r=t.segment,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog;L1({id:r.requestId,key:r.key,encryptedBytes:r.encryptedBytes,decryptionWorker:i},function(O){r.bytes=O,D1({segment:r,bytes:r.bytes,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I})})},jj=function(t){var i=t.activeXhrs,r=t.decryptionWorker,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog,O=0,D=!1;return function(R,H){if(!D){if(R)return D=!0,vg(i),E(R,H);if(O+=1,O===i.length){var Z=function(){if(H.encryptedBytes)return Bj({decryptionWorker:r,segment:H,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I});D1({segment:H,bytes:H.bytes,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I})};if(H.endOfAllRequests=Date.now(),H.map&&H.map.encryptedBytes&&!H.map.bytes)return L1({decryptionWorker:r,id:H.requestId+"-init",encryptedBytes:H.map.encryptedBytes,key:H.map.key},function(V){H.map.bytes=V,O1(H,function(W){if(W)return vg(i),E(W,H);Z()})});Z()}}}},Vj=function(t){var i=t.loadendState,r=t.abortFn;return function(e){var n=e.target;n.aborted&&r&&!i.calledAbortFn&&(r(),i.calledAbortFn=!0)}},Hj=function(t){var i=t.segment,r=t.progressFn;return t.trackInfoFn,t.timingInfoFn,t.videoSegmentTimingInfoFn,t.audioSegmentTimingInfoFn,t.id3Fn,t.captionsFn,t.isEndOfTimeline,t.endedTimelineFn,t.dataFn,function(e){var n=e.target;if(!n.aborted)return i.stats=N.mergeOptions(i.stats,Mj(e)),!i.stats.firstBytesReceivedAt&&i.stats.bytesReceived&&(i.stats.firstBytesReceivedAt=Date.now()),r(e,i)}},$j=function(t){var i=t.xhr,r=t.xhrOptions,e=t.decryptionWorker,n=t.segment,s=t.abortFn,o=t.progressFn,l=t.trackInfoFn,f=t.timingInfoFn,m=t.videoSegmentTimingInfoFn,v=t.audioSegmentTimingInfoFn,y=t.id3Fn,E=t.captionsFn,I=t.isEndOfTimeline,O=t.endedTimelineFn,D=t.dataFn,R=t.doneFn,H=t.onTransmuxerLog,Z=[],V=jj({activeXhrs:Z,decryptionWorker:e,trackInfoFn:l,timingInfoFn:f,videoSegmentTimingInfoFn:m,audioSegmentTimingInfoFn:v,id3Fn:y,captionsFn:E,isEndOfTimeline:I,endedTimelineFn:O,dataFn:D,doneFn:R,onTransmuxerLog:H});if(n.key&&!n.key.bytes){var W=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&W.push(n.map.key);var te=N.mergeOptions(r,{uri:n.key.resolvedUri,responseType:"arraybuffer"}),z=nb(n,W,V),q=i(te,z);Z.push(q)}if(n.map&&!n.map.bytes){var X=n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri);if(X){var j=N.mergeOptions(r,{uri:n.map.key.resolvedUri,responseType:"arraybuffer"}),oe=nb(n,[n.map.key],V),re=i(j,oe);Z.push(re)}var se=N.mergeOptions(r,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:mg(n.map)}),he=Fj({segment:n,finishProcessingFn:V}),le=i(se,he);Z.push(le)}var pe=N.mergeOptions(r,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:mg(n)}),ne=Nj({segment:n,finishProcessingFn:V,responseType:pe.responseType}),fe=i(pe,ne);fe.addEventListener("progress",Hj({segment:n,progressFn:o,trackInfoFn:l,timingInfoFn:f,videoSegmentTimingInfoFn:m,audioSegmentTimingInfoFn:v,id3Fn:y,captionsFn:E,isEndOfTimeline:I,endedTimelineFn:O,dataFn:D})),Z.push(fe);var Ie={};return Z.forEach(function(Ce){Ce.addEventListener("loadend",Vj({loadendState:Ie,abortFn:s}))}),function(){return vg(Z)}},Wj=On("CodecUtils"),qj=function(t){var i=t.attributes||{};if(i.CODECS)return li(i.CODECS)},k1=function(t,i){var r=i.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&r.AUDIO&&t.mediaGroups.AUDIO[r.AUDIO]},Gj=function(t,i){if(!k1(t,i))return!0;var r=i.attributes||{},e=t.mediaGroups.AUDIO[r.AUDIO];for(var n in e)if(!e[n].uri&&!e[n].playlists)return!0;return!1},ah=function(t){var i={};return t.forEach(function(r){var e=r.mediaType,n=r.type,s=r.details;i[e]=i[e]||[],i[e].push(sv(""+n+s))}),Object.keys(i).forEach(function(r){if(i[r].length>1){Wj("multiple "+r+" codecs found as attributes: "+i[r].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),i[r]=null;return}i[r]=i[r][0]}),i},ab=function(t){var i=0;return t.audio&&i++,t.video&&i++,i},Dd=function(t,i){var r=i.attributes||{},e=ah(qj(i)||[]);if(k1(t,i)&&!e.audio&&!Gj(t,i)){var n=ah(Yx(t,r.AUDIO)||[]);n.audio&&(e.audio=n.audio)}return e},cc=On("PlaylistSelector"),sb=function(t){if(!(!t||!t.playlist)){var i=t.playlist;return JSON.stringify({id:i.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:i.attributes&&i.attributes.CODECS||""})}},sh=function(t,i){if(!t)return"";var r=F.getComputedStyle(t);return r?r[i]:""},Mu=function(t,i){var r=t.slice();t.sort(function(e,n){var s=i(e,n);return s===0?r.indexOf(e)-r.indexOf(n):s})},l0=function(t,i){var r,e;return t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||F.Number.MAX_VALUE,i.attributes.BANDWIDTH&&(e=i.attributes.BANDWIDTH),e=e||F.Number.MAX_VALUE,r-e},zj=function(t,i){var r,e;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||F.Number.MAX_VALUE,i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(e=i.attributes.RESOLUTION.width),e=e||F.Number.MAX_VALUE,r===e&&t.attributes.BANDWIDTH&&i.attributes.BANDWIDTH?t.attributes.BANDWIDTH-i.attributes.BANDWIDTH:r-e},R1=function(t,i,r,e,n,s){if(t){var o={bandwidth:i,width:r,height:e,limitRenditionByPlayerDimensions:n},l=t.playlists;hr.isAudioOnly(t)&&(l=s.getAudioTrackPlaylists_(),o.audioOnly=!0);var f=l.map(function(j){var oe,re=j.attributes&&j.attributes.RESOLUTION&&j.attributes.RESOLUTION.width,se=j.attributes&&j.attributes.RESOLUTION&&j.attributes.RESOLUTION.height;return oe=j.attributes&&j.attributes.BANDWIDTH,oe=oe||F.Number.MAX_VALUE,{bandwidth:oe,width:re,height:se,playlist:j}});Mu(f,function(j,oe){return j.bandwidth-oe.bandwidth}),f=f.filter(function(j){return!hr.isIncompatible(j.playlist)});var m=f.filter(function(j){return hr.isEnabled(j.playlist)});m.length||(m=f.filter(function(j){return!hr.isDisabled(j.playlist)}));var v=m.filter(function(j){return j.bandwidth*pi.BANDWIDTH_VARIANCE<i}),y=v[v.length-1],E=v.filter(function(j){return j.bandwidth===y.bandwidth})[0];if(n===!1){var I=E||m[0]||f[0];if(I&&I.playlist){var O="sortedPlaylistReps";return E&&(O="bandwidthBestRep"),m[0]&&(O="enabledPlaylistReps"),cc("choosing "+sb(I)+" using "+O+" with options",o),I.playlist}return cc("could not choose a playlist with options",o),null}var D=v.filter(function(j){return j.width&&j.height});Mu(D,function(j,oe){return j.width-oe.width});var R=D.filter(function(j){return j.width===r&&j.height===e});y=R[R.length-1];var H=R.filter(function(j){return j.bandwidth===y.bandwidth})[0],Z,V,W;H||(Z=D.filter(function(j){return j.width>r||j.height>e}),V=Z.filter(function(j){return j.width===Z[0].width&&j.height===Z[0].height}),y=V[V.length-1],W=V.filter(function(j){return j.bandwidth===y.bandwidth})[0]);var te;if(s.experimentalLeastPixelDiffSelector){var z=D.map(function(j){return j.pixelDiff=Math.abs(j.width-r)+Math.abs(j.height-e),j});Mu(z,function(j,oe){return j.pixelDiff===oe.pixelDiff?oe.bandwidth-j.bandwidth:j.pixelDiff-oe.pixelDiff}),te=z[0]}var q=te||W||H||E||m[0]||f[0];if(q&&q.playlist){var X="sortedPlaylistReps";return te?X="leastPixelDiffRep":W?X="resolutionPlusOneRep":H?X="resolutionBestRep":E?X="bandwidthBestRep":m[0]&&(X="enabledPlaylistReps"),cc("choosing "+sb(q)+" using "+X+" with options",o),q.playlist}return cc("could not choose a playlist with options",o),null}},ob=function(){var t=this.useDevicePixelRatio&&F.devicePixelRatio||1;return R1(this.playlists.master,this.systemBandwidth,parseInt(sh(this.tech_.el(),"width"),10)*t,parseInt(sh(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},Kj=function(t){var i=-1,r=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var e=this.useDevicePixelRatio&&F.devicePixelRatio||1;return i<0&&(i=this.systemBandwidth,r=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==r&&(i=t*this.systemBandwidth+(1-t)*i,r=this.systemBandwidth),R1(this.playlists.master,i,parseInt(sh(this.tech_.el(),"width"),10)*e,parseInt(sh(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},Xj=function(t){var i=t.master,r=t.currentTime,e=t.bandwidth,n=t.duration,s=t.segmentDuration,o=t.timeUntilRebuffer,l=t.currentTimeline,f=t.syncController,m=i.playlists.filter(function(O){return!hr.isIncompatible(O)}),v=m.filter(hr.isEnabled);v.length||(v=m.filter(function(O){return!hr.isDisabled(O)}));var y=v.filter(hr.hasAttribute.bind(null,"BANDWIDTH")),E=y.map(function(O){var D=f.getSyncPoint(O,n,l,r),R=D?1:2,H=hr.estimateSegmentRequestTime(s,e,O),Z=H*R-o;return{playlist:O,rebufferingImpact:Z}}),I=E.filter(function(O){return O.rebufferingImpact<=0});return Mu(I,function(O,D){return l0(D.playlist,O.playlist)}),I.length?I[0]:(Mu(E,function(O,D){return O.rebufferingImpact-D.rebufferingImpact}),E[0]||null)},Qj=function(){var t=this,i=this.playlists.master.playlists.filter(hr.isEnabled);Mu(i,function(e,n){return l0(e,n)});var r=i.filter(function(e){return!!Dd(t.playlists.master,e).video});return r[0]||null},Yj=function(t){var i=0,r;return t.bytes&&(r=new Uint8Array(t.bytes),t.segments.forEach(function(e){r.set(e,i),i+=e.byteLength})),r},Jj=function(t,i,r){if(!t[r]){i.trigger({type:"usage",name:"vhs-608"}),i.trigger({type:"usage",name:"hls-608"});var e=r;/^cc708_/.test(r)&&(e="SERVICE"+r.split("_")[1]);var n=i.textTracks().getTrackById(e);if(n)t[r]=n;else{var s=i.options_.vhs&&i.options_.vhs.captionServices||{},o=r,l=r,f=!1,m=s[e];m&&(o=m.label,l=m.language,f=m.default),t[r]=i.addRemoteTextTrack({kind:"captions",id:e,default:f,label:o,language:l},!1).track}}},Zj=function(t){var i=t.inbandTextTracks,r=t.captionArray,e=t.timestampOffset;if(r){var n=F.WebKitDataCue||F.VTTCue;r.forEach(function(s){var o=s.stream;i[o].addCue(new n(s.startTime+e,s.endTime+e,s.text))})}},e2=function(t){Object.defineProperties(t.frame,{id:{get:function(){return N.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return N.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return N.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},t2=function(t){var i=t.inbandTextTracks,r=t.metadataArray,e=t.timestampOffset,n=t.videoDuration;if(r){var s=F.WebKitDataCue||F.VTTCue,o=i.metadataTrack_;if(o&&(r.forEach(function(E){var I=E.cueTime+e;typeof I!="number"||F.isNaN(I)||I<0||!(I<1/0)||E.frames.forEach(function(O){var D=new s(I,I,O.value||O.url||O.data||"");D.frame=O,D.value=O,e2(D),o.addCue(D)})}),!(!o.cues||!o.cues.length))){for(var l=o.cues,f=[],m=0;m<l.length;m++)l[m]&&f.push(l[m]);var v=f.reduce(function(E,I){var O=E[I.startTime]||[];return O.push(I),E[I.startTime]=O,E},{}),y=Object.keys(v).sort(function(E,I){return Number(E)-Number(I)});y.forEach(function(E,I){var O=v[E],D=Number(y[I+1])||n;O.forEach(function(R){R.endTime=D})})}}},i2=function(t,i,r){t.metadataTrack_||(t.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=i)},bd=function(t,i,r){var e,n;if(r&&r.cues)for(e=r.cues.length;e--;)n=r.cues[e],n.startTime>=t&&n.endTime<=i&&r.removeCue(n)},r2=function(t){var i=t.cues;if(i)for(var r=0;r<i.length;r++){for(var e=[],n=0,s=0;s<i.length;s++)i[r].startTime===i[s].startTime&&i[r].endTime===i[s].endTime&&i[r].text===i[s].text&&(n++,n>1&&e.push(i[s]));e.length&&e.forEach(function(o){return t.removeCue(o)})}},n2=function(t,i,r){if(typeof i>"u"||i===null||!t.length)return[];var e=Math.ceil((i-r+3)*xs.ONE_SECOND_IN_TS),n;for(n=0;n<t.length&&!(t[n].pts>e);n++);return t.slice(n)},a2=function(t,i,r){if(!i.length)return t;if(r)return i.slice();var e=i[0].pts,n=0;for(n;n<t.length&&!(t[n].pts>=e);n++);return t.slice(0,n).concat(i)},s2=function(t,i,r,e){for(var n=Math.ceil((i-e)*xs.ONE_SECOND_IN_TS),s=Math.ceil((r-e)*xs.ONE_SECOND_IN_TS),o=t.slice(),l=t.length;l--&&!(t[l].pts<=s););if(l===-1)return o;for(var f=l+1;f--&&!(t[f].pts<=n););return f=Math.max(f,0),o.splice(f,l-f+1),o},o2=function(t,i){if(!t&&!i||!t&&i||t&&!i)return!1;if(t===i)return!0;var r=Object.keys(t).sort(),e=Object.keys(i).sort();if(r.length!==e.length)return!1;for(var n=0;n<r.length;n++){var s=r[n];if(s!==e[n]||t[s]!==i[s])return!1}return!0},M1=22,u2=function(t,i,r){i=i||[];for(var e=[],n=0,s=0;s<i.length;s++){var o=i[s];if(t===o.timeline&&(e.push(s),n+=o.duration,n>r))return s}return e.length===0?0:e[e.length-1]},hd=1,l2=500,ub=function(t){return typeof t=="number"&&isFinite(t)},hc=1/60,d2=function(t,i,r){return t!=="main"||!i||!r?null:!r.hasAudio&&!r.hasVideo?"Neither audio nor video found in segment.":i.hasVideo&&!r.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!i.hasVideo&&r.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},f2=function(t,i,r){var e=i-pi.BACK_BUFFER_LENGTH;t.length&&(e=Math.max(e,t.start(0)));var n=i-r;return Math.min(n,e)},mu=function(t){var i=t.startOfSegment,r=t.duration,e=t.segment,n=t.part,s=t.playlist,o=s.mediaSequence,l=s.id,f=s.segments,m=f===void 0?[]:f,v=t.mediaIndex,y=t.partIndex,E=t.timeline,I=m.length-1,O="mediaIndex/partIndex increment";t.getMediaInfoForTime?O="getMediaInfoForTime ("+t.getMediaInfoForTime+")":t.isSyncRequest&&(O="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(O+=" with independent "+t.independent);var D=typeof y=="number",R=t.segment.uri?"segment":"pre-segment",H=D?r1({preloadSegment:e})-1:0;return R+" ["+(o+v)+"/"+(o+I)+"]"+(D?" part ["+y+"/"+H+"]":"")+(" segment start/end ["+e.start+" => "+e.end+"]")+(D?" part start/end ["+n.start+" => "+n.end+"]":"")+(" startOfSegment ["+i+"]")+(" duration ["+r+"]")+(" timeline ["+E+"]")+(" selected by ["+O+"]")+(" playlist ["+l+"]")},lb=function(t){return t+"TimingInfo"},c2=function(t){var i=t.segmentTimeline,r=t.currentTimeline,e=t.startOfSegment,n=t.buffered,s=t.overrideCheck;return!s&&i===r?null:i<r?e:n.length?n.end(n.length-1):e},db=function(t){var i=t.timelineChangeController,r=t.currentTimeline,e=t.segmentTimeline,n=t.loaderType,s=t.audioDisabled;if(r===e)return!1;if(n==="audio"){var o=i.lastTimelineChange({type:"main"});return!o||o.to!==e}if(n==="main"&&s){var l=i.pendingTimelineChange({type:"audio"});return!(l&&l.to===e)}return!1},h2=function(t){var i=0;return["video","audio"].forEach(function(r){var e=t[r+"TimingInfo"];if(e){var n=e.start,s=e.end,o;typeof n=="bigint"||typeof s=="bigint"?o=F.BigInt(s)-F.BigInt(n):typeof n=="number"&&typeof s=="number"&&(o=s-n),typeof o<"u"&&o>i&&(i=o)}}),typeof i=="bigint"&&i<Number.MAX_SAFE_INTEGER&&(i=Number(i)),i},fb=function(t){var i=t.segmentDuration,r=t.maxDuration;return i?Math.round(i)>r+ws:!1},p2=function(t,i){if(i!=="hls")return null;var r=h2({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!r)return null;var e=t.playlist.targetDuration,n=fb({segmentDuration:r,maxDuration:e*2}),s=fb({segmentDuration:r,maxDuration:e}),o="Segment with index "+t.mediaIndex+" "+("from playlist "+t.playlist.id+" ")+("has a duration of "+r+" ")+("when the reported duration is "+t.duration+" ")+("and the target duration is "+e+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return n||s?{severity:n?"warn":"info",message:o}:null},_g=function(a){Ae(t,a);function t(r,e){var n;if(n=a.call(this)||this,!r)throw new TypeError("Initialization settings are required");if(typeof r.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!r.mediaSource)throw new TypeError("No MediaSource specified");return n.bandwidth=r.bandwidth,n.throughput={rate:0,count:0},n.roundTrip=NaN,n.resetStats_(),n.mediaIndex=null,n.partIndex=null,n.hasPlayed_=r.hasPlayed,n.currentTime_=r.currentTime,n.seekable_=r.seekable,n.seeking_=r.seeking,n.duration_=r.duration,n.mediaSource_=r.mediaSource,n.vhs_=r.vhs,n.loaderType_=r.loaderType,n.currentMediaInfo_=void 0,n.startingMediaInfo_=void 0,n.segmentMetadataTrack_=r.segmentMetadataTrack,n.goalBufferLength_=r.goalBufferLength,n.sourceType_=r.sourceType,n.sourceUpdater_=r.sourceUpdater,n.inbandTextTracks_=r.inbandTextTracks,n.state_="INIT",n.timelineChangeController_=r.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!0,n.parse708captions_=r.parse708captions,n.useDtsForTimestampOffset_=r.useDtsForTimestampOffset,n.captionServices_=r.captionServices,n.experimentalExactManifestTimings=r.experimentalExactManifestTimings,n.checkBufferTimeout_=null,n.error_=void 0,n.currentTimeline_=-1,n.pendingSegment_=null,n.xhrOptions_=null,n.pendingSegments_=[],n.audioDisabled_=!1,n.isPendingTimestampOffset_=!1,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=N.browser.IE_VERSION>=11,n.appendInitSegment_={audio:!0,video:!0},n.playlistOfLastInitSegment_={audio:null,video:null},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={id3:[],caption:[]},n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=null,n.activeInitSegmentId_=null,n.initSegments_={},n.cacheEncryptionKeys_=r.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=r.decrypter,n.syncController_=r.syncController,n.syncPoint_={segmentIndex:0,time:0},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=function(){return n.trigger("syncinfoupdate")},n.syncController_.on("syncinfoupdate",n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener("sourceopen",function(){n.isEndOfStream_()||(n.ended_=!1)}),n.fetchAtBuffer_=!1,n.logger_=On("SegmentLoader["+n.loaderType_+"]"),Object.defineProperty(Ue(n),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),n.sourceUpdater_.on("ready",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n.loaderType_==="main"&&n.timelineChangeController_.on("pendingtimelinechange",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n.loaderType_==="audio"&&n.timelineChangeController_.on("timelinechange",function(){n.hasEnoughInfoToLoad_()&&n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n}var i=t.prototype;return i.createTransmuxer_=function(){return Tm.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},i.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},i.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&F.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},i.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},i.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},i.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,F.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},i.checkForAbort_=function(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e},i.error=function(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},i.endOfStream=function(){this.ended_=!0,this.transmuxer_&&Tm.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},i.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return N.createTimeRanges();if(this.loaderType_==="main"){var n=e.hasAudio,s=e.hasVideo,o=e.isMuxed;if(s&&n&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},i.initSegmentForMap=function(e,n){if(n===void 0&&(n=!1),!e)return null;var s=rh(e),o=this.initSegments_[s];return n&&!o&&e.bytes&&(this.initSegments_[s]=o={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),o||e},i.segmentKey=function(e,n){if(n===void 0&&(n=!1),!e)return null;var s=_1(e),o=this.keyCache_[s];this.cacheEncryptionKeys_&&n&&!o&&e.bytes&&(this.keyCache_[s]=o={resolvedUri:e.resolvedUri,bytes:e.bytes});var l={resolvedUri:(o||e).resolvedUri};return o&&(l.bytes=o.bytes),l},i.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},i.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.playlist=function(e,n){if(n===void 0&&(n={}),!!e){var s=this.playlist_,o=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));var l=null;if(s&&(s.id?l=s.id:s.uri&&(l=s.uri)),this.logger_("playlist update ["+l+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==e.uri){this.mediaIndex!==null&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var f=e.mediaSequence-s.mediaSequence;if(this.logger_("live window shift ["+f+"]"),this.mediaIndex!==null)if(this.mediaIndex-=f,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var m=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!m.parts||!m.parts.length||!m.parts[this.partIndex])){var v=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=v}}o&&(o.mediaIndex-=f,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=e.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,e)}},i.pause=function(){this.checkBufferTimeout_&&(F.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},i.paused=function(){return this.checkBufferTimeout_===null},i.resetEverything=function(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},i.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},i.resyncLoader=function(){this.transmuxer_&&Tm.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},i.remove=function(e,n,s,o){if(s===void 0&&(s=function(){}),o===void 0&&(o=!1),n===1/0&&(n=this.duration_()),n<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var l=1,f=function(){l--,l===0&&s()};(o||!this.audioDisabled_)&&(l++,this.sourceUpdater_.removeAudio(e,n,f)),(o||this.loaderType_==="main")&&(this.gopBuffer_=s2(this.gopBuffer_,e,n,this.timeMapping_),l++,this.sourceUpdater_.removeVideo(e,n,f));for(var m in this.inbandTextTracks_)bd(e,n,this.inbandTextTracks_[m]);bd(e,n,this.segmentMetadataTrack_),f()},i.monitorBuffer_=function(){this.checkBufferTimeout_&&F.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=F.setTimeout(this.monitorBufferTick_.bind(this),1)},i.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&F.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=F.setTimeout(this.monitorBufferTick_.bind(this),l2)},i.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&(typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},i.isEndOfStream_=function(e,n,s){if(e===void 0&&(e=this.mediaIndex),n===void 0&&(n=this.playlist_),s===void 0&&(s=this.partIndex),!n||!this.mediaSource_)return!1;var o=typeof e=="number"&&n.segments[e],l=e+1===n.segments.length,f=!o||!o.parts||s+1===o.parts.length;return n.endList&&this.mediaSource_.readyState==="open"&&l&&f},i.chooseNextRequest_=function(){var e=this.buffered_(),n=JT(e)||0,s=r0(e,this.currentTime_()),o=!this.hasPlayed_()&&s>=1,l=s>=this.goalBufferLength_(),f=this.playlist_.segments;if(!f.length||o||l)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var m={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(m.isSyncRequest)m.mediaIndex=u2(this.currentTimeline_,f,n);else if(this.mediaIndex!==null){var v=f[this.mediaIndex],y=typeof this.partIndex=="number"?this.partIndex:-1;m.startOfSegment=v.end?v.end:n,v.parts&&v.parts[y+1]?(m.mediaIndex=this.mediaIndex,m.partIndex=y+1):m.mediaIndex=this.mediaIndex+1}else{var E=hr.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?n:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),I=E.segmentIndex,O=E.startTime,D=E.partIndex;m.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+n:"currentTime "+this.currentTime_(),m.mediaIndex=I,m.startOfSegment=O,m.partIndex=D}var R=f[m.mediaIndex],H=R&&typeof m.partIndex=="number"&&R.parts&&R.parts[m.partIndex];if(!R||typeof m.partIndex=="number"&&!H)return null;if(typeof m.partIndex!="number"&&R.parts&&(m.partIndex=0,H=R.parts[0]),!s&&H&&!H.independent)if(m.partIndex===0){var Z=f[m.mediaIndex-1],V=Z.parts&&Z.parts.length&&Z.parts[Z.parts.length-1];V&&V.independent&&(m.mediaIndex-=1,m.partIndex=Z.parts.length-1,m.independent="previous segment")}else R.parts[m.partIndex-1].independent&&(m.partIndex-=1,m.independent="previous part");var W=this.mediaSource_&&this.mediaSource_.readyState==="ended";return m.mediaIndex>=f.length-1&&W&&!this.seeking_()?null:this.generateSegmentInfo_(m)},i.generateSegmentInfo_=function(e){var n=e.independent,s=e.playlist,o=e.mediaIndex,l=e.startOfSegment,f=e.isSyncRequest,m=e.partIndex,v=e.forceTimestampOffset,y=e.getMediaInfoForTime,E=s.segments[o],I=typeof m=="number"&&E.parts[m],O={requestId:"segment-loader-"+Math.random(),uri:I&&I.resolvedUri||E.resolvedUri,mediaIndex:o,partIndex:I?m:null,isSyncRequest:f,startOfSegment:l,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:E.timeline,duration:I&&I.duration||E.duration,segment:E,part:I,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:y,independent:n},D=typeof v<"u"?v:this.isPendingTimestampOffset_;O.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:E.timeline,currentTimeline:this.currentTimeline_,startOfSegment:l,buffered:this.buffered_(),overrideCheck:D});var R=JT(this.sourceUpdater_.audioBuffered());return typeof R=="number"&&(O.audioAppendStart=R-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(O.gopsToAlignWith=n2(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),O},i.timestampOffsetForSegment_=function(e){return c2(e)},i.earlyAbortWhenNeeded_=function(e){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var n=this.currentTime_(),s=e.bandwidth,o=this.pendingSegment_.duration,l=hr.estimateSegmentRequestTime(o,s,this.playlist_,e.bytesReceived),f=MB(this.buffered_(),n,this.vhs_.tech_.playbackRate())-1;if(!(l<=f)){var m=Xj({master:this.vhs_.playlists.master,currentTime:n,bandwidth:s,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:f,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(m){var v=l-f,y=v-m.rebufferingImpact,E=.5;f<=ws&&(E=1),!(!m.playlist||m.playlist.uri===this.playlist_.uri||y<E)&&(this.bandwidth=m.playlist.attributes.BANDWIDTH*pi.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},i.handleAbort_=function(e){this.logger_("Aborting "+mu(e)),this.mediaRequestsAborted+=1},i.handleProgress_=function(e,n){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&this.trigger("progress")},i.handleTrackInfo_=function(e,n){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(n)||(n=n||{},o2(this.currentMediaInfo_,n)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=n,this.currentMediaInfo_=n,this.logger_("trackinfo update",n),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=n,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},i.handleTimingInfo_=function(e,n,s,o){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var l=this.pendingSegment_,f=lb(n);l[f]=l[f]||{},l[f][s]=o,this.logger_("timinginfo: "+n+" - "+s+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},i.handleCaptions_=function(e,n){var s=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(n.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,n));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),f={};n.forEach(function(m){f[m.stream]=f[m.stream]||{startTime:1/0,captions:[],endTime:0};var v=f[m.stream];v.startTime=Math.min(v.startTime,m.startTime+l),v.endTime=Math.max(v.endTime,m.endTime+l),v.captions.push(m)}),Object.keys(f).forEach(function(m){var v=f[m],y=v.startTime,E=v.endTime,I=v.captions,O=s.inbandTextTracks_;s.logger_("adding cues from "+y+" -> "+E+" for "+m),Jj(O,s.vhs_.tech_,m),bd(y,E,O[m]),Zj({captionArray:I,inbandTextTracks:O,timestampOffset:l})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},i.handleId3_=function(e,n,s){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,n,s));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();i2(this.inbandTextTracks_,s,this.vhs_.tech_),t2({inbandTextTracks:this.inbandTextTracks_,metadataArray:n,timestampOffset:l,videoDuration:this.duration_()})}},i.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(e){return e()}),this.metadataQueue_.caption.forEach(function(e){return e()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},i.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach(function(n){return n()})},i.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach(function(n){return n()})},i.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!db({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},i.getCurrentMediaInfo_=function(e){return e===void 0&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},i.getMediaInfo_=function(e){return e===void 0&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},i.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},i.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,n=this.getCurrentMediaInfo_();if(!e||!n)return!1;var s=n.hasAudio,o=n.hasVideo,l=n.isMuxed;return!(o&&!e.videoTimingInfo||s&&!this.audioDisabled_&&!l&&!e.audioTimingInfo||db({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.handleData_=function(e,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,e,n));return}var s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),s.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),s.isFmp4=e.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[lb(n.type)].start;else{var o=this.getCurrentMediaInfo_(),l=this.loaderType_==="main"&&o&&o.hasVideo,f;l&&(f=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:l,firstVideoFrameTimeForData:f,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,n.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});var m=this.chooseNextRequest_();if(m.mediaIndex!==s.mediaIndex||m.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,n)}}},i.updateAppendInitSegmentStatus=function(e,n){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[n]!==e.playlist&&(this.appendInitSegment_[n]=!0)},i.getInitSegmentAndUpdateState_=function(e){var n=e.type,s=e.initSegment,o=e.map,l=e.playlist;if(o){var f=rh(o);if(this.activeInitSegmentId_===f)return null;s=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=f}return s&&this.appendInitSegment_[n]?(this.playlistOfLastInitSegment_[n]=l,this.appendInitSegment_[n]=!1,this.activeInitSegmentId_=null,s):null},i.handleQuotaExceededError_=function(e,n){var s=this,o=e.segmentInfo,l=e.type,f=e.bytes,m=this.sourceUpdater_.audioBuffered(),v=this.sourceUpdater_.videoBuffered();m.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+po(m).join(", ")),v.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+po(v).join(", "));var y=m.length?m.start(0):0,E=m.length?m.end(m.length-1):0,I=v.length?v.start(0):0,O=v.length?v.end(v.length-1):0;if(E-y<=hd&&O-I<=hd){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+f.byteLength+", ")+("audio buffer: "+po(m).join(", ")+", ")+("video buffer: "+po(v).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:l,bytes:f}));var D=this.currentTime_(),R=D-hd;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+R),this.remove(0,R,function(){s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+hd+"s"),s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=F.setTimeout(function(){s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),s.quotaExceededErrorRetryTimeout_=null,s.processCallQueue_()},hd*1e3)},!0)},i.handleAppendError_=function(e,n){var s=e.segmentInfo,o=e.type,l=e.bytes;if(n){if(n.code===M1){this.handleQuotaExceededError_({segmentInfo:s,type:o,bytes:l});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error(o+" append of "+l.length+"b failed for segment "+("#"+s.mediaIndex+" in playlist "+s.playlist.id)),this.trigger("appenderror")}},i.appendToSourceBuffer_=function(e){var n=e.segmentInfo,s=e.type,o=e.initSegment,l=e.data,f=e.bytes;if(!f){var m=[l],v=l.byteLength;o&&(m.unshift(o),v+=o.byteLength),f=Yj({bytes:v,segments:m})}this.sourceUpdater_.appendBuffer({segmentInfo:n,type:s,bytes:f},this.handleAppendError_.bind(this,{segmentInfo:n,type:s,bytes:f}))},i.handleSegmentTimingInfo_=function(e,n,s){if(!(!this.pendingSegment_||n!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,l=e+"TimingInfo";o[l]||(o[l]={}),o[l].transmuxerPrependedSeconds=s.prependedContentDuration||0,o[l].transmuxedPresentationStart=s.start.presentation,o[l].transmuxedDecodeStart=s.start.decode,o[l].transmuxedPresentationEnd=s.end.presentation,o[l].transmuxedDecodeEnd=s.end.decode,o[l].baseMediaDecodeTime=s.baseMediaDecodeTime}},i.appendData_=function(e,n){var s=n.type,o=n.data;if(!(!o||!o.byteLength)&&!(s==="audio"&&this.audioDisabled_)){var l=this.getInitSegmentAndUpdateState_({type:s,initSegment:n.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:s,initSegment:l,data:o})}},i.loadSegment_=function(e){var n=this;if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var s=Ni({},e,{forceTimestampOffset:!0});Ni(e,n.generateSegmentInfo_(s)),n.isPendingTimestampOffset_=!1,n.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)},i.updateTransmuxerAndRequestSegment_=function(e){var n=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var s=this.createSimplifiedSegmentObj_(e),o=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),l=this.mediaIndex!==null,f=e.timeline!==this.currentTimeline_&&e.timeline>0,m=o||l&&f;this.logger_("Requesting "+mu(e)),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=$j({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:m,endedTimelineFn:function(){n.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(y){var E=y.message,I=y.level,O=y.stream;n.logger_(mu(e)+" logged from transmuxer stream "+O+" as a "+I+": "+E)}})},i.trimBackBuffer_=function(e){var n=f2(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)},i.createSimplifiedSegmentObj_=function(e){var n=e.segment,s=e.part,o={resolvedUri:s?s.resolvedUri:n.resolvedUri,byterange:s?s.byterange:n.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},l=e.playlist.segments[e.mediaIndex-1];if(l&&l.timeline===n.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),n.key){var f=n.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);o.key=this.segmentKey(n.key),o.key.iv=f}return n.map&&(o.map=this.initSegmentForMap(n.map)),o},i.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},i.saveBandwidthRelatedStats_=function(e,n){if(this.pendingSegment_.byteLength=n.bytesReceived,e<hc){this.logger_("Ignoring segment's bandwidth because its duration of "+e+(" is less than the min to record "+hc));return}this.bandwidth=n.bandwidth,this.roundTrip=n.roundTripTime},i.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},i.segmentRequestFinished_=function(e,n,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,n,s));return}if(this.saveTransferStats_(n.stats),!!this.pendingSegment_&&n.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===Zn.ABORTED)return;if(this.pause(),e.code===Zn.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,n.stats),o.endOfAllRequests=n.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=a2(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},i.setTimeMapping_=function(e){var n=this.syncController_.mappingForTimeline(e);n!==null&&(this.timeMapping_=n)},i.updateMediaSecondsLoaded_=function(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},i.shouldUpdateTransmuxerTimestampOffset_=function(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()},i.trueSegmentStart_=function(e){var n=e.currentStart,s=e.playlist,o=e.mediaIndex,l=e.firstVideoFrameTimeForData,f=e.currentVideoTimestampOffset,m=e.useVideoTimingInfo,v=e.videoTimingInfo,y=e.audioTimingInfo;if(typeof n<"u")return n;if(!m)return y.start;var E=s.segments[o-1];return o===0||!E||typeof E.start>"u"||E.end!==l+f?l:v.start},i.waitForAppendsToComplete_=function(e){var n=this.getCurrentMediaInfo_(e);if(!n){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var s=n.hasAudio,o=n.hasVideo,l=n.isMuxed,f=this.loaderType_==="main"&&o,m=!this.audioDisabled_&&s&&!l;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}f&&e.waitingOnAppends++,m&&e.waitingOnAppends++,f&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),m&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},i.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())},i.checkForIllegalMediaSwitch=function(e){var n=d2(this.loaderType_,this.getCurrentMediaInfo_(),e);return n?(this.error({message:n,blacklistDuration:1/0}),this.trigger("error"),!0):!1},i.updateSourceBufferTimestampOffset_=function(e){if(!(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")){var n=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),n=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),n=!0),n&&this.trigger("timestampoffset")}},i.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var n=e.videoTimingInfo,s=e.audioTimingInfo,o=e.timingInfo;return this.useDtsForTimestampOffset_?n&&typeof n.transmuxedDecodeStart=="number"?n.transmuxedDecodeStart:s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:o.start:o.start},i.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var n=this.getMediaInfo_(),s=this.loaderType_==="main"&&n&&n.hasVideo,o=s&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;o&&(e.timingInfo.end=typeof o.end=="number"?o.end:o.start+e.duration)},i.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});var n=p2(e,this.sourceType_);if(n&&(n.severity==="warn"?N.log.warn(n.message):this.logger_(n.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+mu(e));return}this.logger_("Appended "+mu(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var s=e.segment,o=e.part,l=s.end&&this.currentTime_()-s.end>e.playlist.targetDuration*3,f=o&&o.end&&this.currentTime_()-o.end>e.playlist.partTargetDuration*3;if(l||f){this.logger_("bad "+(l?"segment":"part")+" "+mu(e)),this.resetEverything();return}var m=this.mediaIndex!==null;m&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},i.recordThroughput_=function(e){if(e.duration<hc){this.logger_("Ignoring segment's throughput because its duration of "+e.duration+(" is less than the min to record "+hc));return}var n=this.throughput.rate,s=Date.now()-e.endOfAllRequests+1,o=Math.floor(e.byteLength/s*8*1e3);this.throughput.rate+=(o-n)/++this.throughput.count},i.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var n=e.segment,s=n.start,o=n.end;if(!(!ub(s)||!ub(o))){bd(s,o,this.segmentMetadataTrack_);var l=F.WebKitDataCue||F.VTTCue,f={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:s,end:o},m=JSON.stringify(f),v=new l(s,o,m);v.value=f,this.segmentMetadataTrack_.addCue(v)}}},t}(N.EventTarget);function Ia(){}var F1=function(t){return typeof t!="string"?t:t.replace(/./,function(i){return i.toUpperCase()})},m2=["video","audio"],yg=function(t,i){var r=i[t+"Buffer"];return r&&r.updating||i.queuePending[t]},g2=function(t,i){for(var r=0;r<i.length;r++){var e=i[r];if(e.type==="mediaSource")return null;if(e.type===t)return r}return null},d0=function a(t,i){if(i.queue.length!==0){var r=0,e=i.queue[r];if(e.type==="mediaSource"){!i.updating()&&i.mediaSource.readyState!=="closed"&&(i.queue.shift(),e.action(i),e.doneFn&&e.doneFn(),a("audio",i),a("video",i));return}if(t!=="mediaSource"&&!(!i.ready()||i.mediaSource.readyState==="closed"||yg(t,i))){if(e.type!==t){if(r=g2(t,i.queue),r===null)return;e=i.queue[r]}if(i.queue.splice(r,1),i.queuePending[t]=e,e.action(t,i),!e.doneFn){i.queuePending[t]=null,a(t,i);return}}}},N1=function(t,i){var r=i[t+"Buffer"],e=F1(t);r&&(r.removeEventListener("updateend",i["on"+e+"UpdateEnd_"]),r.removeEventListener("error",i["on"+e+"Error_"]),i.codecs[t]=null,i[t+"Buffer"]=null)},Gn=function(t,i){return t&&i&&Array.prototype.indexOf.call(t.sourceBuffers,i)!==-1},Or={appendBuffer:function(t,i,r){return function(e,n){var s=n[e+"Buffer"];if(Gn(n.mediaSource,s)){n.logger_("Appending segment "+i.mediaIndex+"'s "+t.length+" bytes to "+e+"Buffer");try{s.appendBuffer(t)}catch(o){n.logger_("Error with code "+o.code+" "+(o.code===M1?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+i.mediaIndex+" to "+e+"Buffer")),n.queuePending[e]=null,r(o)}}}},remove:function(t,i){return function(r,e){var n=e[r+"Buffer"];if(Gn(e.mediaSource,n)){e.logger_("Removing "+t+" to "+i+" from "+r+"Buffer");try{n.remove(t,i)}catch{e.logger_("Remove "+t+" to "+i+" from "+r+"Buffer failed")}}}},timestampOffset:function(t){return function(i,r){var e=r[i+"Buffer"];Gn(r.mediaSource,e)&&(r.logger_("Setting "+i+"timestampOffset to "+t),e.timestampOffset=t)}},callback:function(t){return function(i,r){t()}},endOfStream:function(t){return function(i){if(i.mediaSource.readyState==="open"){i.logger_("Calling mediaSource endOfStream("+(t||"")+")");try{i.mediaSource.endOfStream(t)}catch(r){N.log.warn("Failed to call media source endOfStream",r)}}}},duration:function(t){return function(i){i.logger_("Setting mediaSource duration to "+t);try{i.mediaSource.duration=t}catch(r){N.log.warn("Failed to set media source duration",r)}}},abort:function(){return function(t,i){if(i.mediaSource.readyState==="open"){var r=i[t+"Buffer"];if(Gn(i.mediaSource,r)){i.logger_("calling abort on "+t+"Buffer");try{r.abort()}catch(e){N.log.warn("Failed to abort on "+t+"Buffer",e)}}}}},addSourceBuffer:function(t,i){return function(r){var e=F1(t),n=Fa(i);r.logger_("Adding "+t+"Buffer with codec "+i+" to mediaSource");var s=r.mediaSource.addSourceBuffer(n);s.addEventListener("updateend",r["on"+e+"UpdateEnd_"]),s.addEventListener("error",r["on"+e+"Error_"]),r.codecs[t]=i,r[t+"Buffer"]=s}},removeSourceBuffer:function(t){return function(i){var r=i[t+"Buffer"];if(N1(t,i),!!Gn(i.mediaSource,r)){i.logger_("Removing "+t+"Buffer with codec "+i.codecs[t]+" from mediaSource");try{i.mediaSource.removeSourceBuffer(r)}catch(e){N.log.warn("Failed to removeSourceBuffer "+t+"Buffer",e)}}}},changeType:function(t){return function(i,r){var e=r[i+"Buffer"],n=Fa(t);Gn(r.mediaSource,e)&&r.codecs[i]!==t&&(r.logger_("changing "+i+"Buffer codec from "+r.codecs[i]+" to "+t),e.changeType(n),r.codecs[i]=t)}}},Dr=function(t){var i=t.type,r=t.sourceUpdater,e=t.action,n=t.doneFn,s=t.name;r.queue.push({type:i,action:e,doneFn:n,name:s}),d0(i,r)},cb=function(t,i){return function(r){if(i.queuePending[t]){var e=i.queuePending[t].doneFn;i.queuePending[t]=null,e&&e(i[t+"Error_"])}d0(t,i)}},U1=function(a){Ae(t,a);function t(r){var e;return e=a.call(this)||this,e.mediaSource=r,e.sourceopenListener_=function(){return d0("mediaSource",Ue(e))},e.mediaSource.addEventListener("sourceopen",e.sourceopenListener_),e.logger_=On("SourceUpdater"),e.audioTimestampOffset_=0,e.videoTimestampOffset_=0,e.queue=[],e.queuePending={audio:null,video:null},e.delayedAudioAppendQueue_=[],e.videoAppendQueued_=!1,e.codecs={},e.onVideoUpdateEnd_=cb("video",Ue(e)),e.onAudioUpdateEnd_=cb("audio",Ue(e)),e.onVideoError_=function(n){e.videoError_=n},e.onAudioError_=function(n){e.audioError_=n},e.createdSourceBuffers_=!1,e.initializedEme_=!1,e.triggeredReady_=!1,e}var i=t.prototype;return i.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},i.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},i.hasInitializedAnyEme=function(){return this.initializedEme_},i.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},i.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},i.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},i.addSourceBuffer=function(e,n){Dr({type:"mediaSource",sourceUpdater:this,action:Or.addSourceBuffer(e,n),name:"addSourceBuffer"})},i.abort=function(e){Dr({type:e,sourceUpdater:this,action:Or.abort(e),name:"abort"})},i.removeSourceBuffer=function(e){if(!this.canRemoveSourceBuffer()){N.log.error("removeSourceBuffer is not supported!");return}Dr({type:"mediaSource",sourceUpdater:this,action:Or.removeSourceBuffer(e),name:"removeSourceBuffer"})},i.canRemoveSourceBuffer=function(){return!N.browser.IE_VERSION&&!N.browser.IS_FIREFOX&&F.MediaSource&&F.MediaSource.prototype&&typeof F.MediaSource.prototype.removeSourceBuffer=="function"},t.canChangeType=function(){return F.SourceBuffer&&F.SourceBuffer.prototype&&typeof F.SourceBuffer.prototype.changeType=="function"},i.canChangeType=function(){return this.constructor.canChangeType()},i.changeType=function(e,n){if(!this.canChangeType()){N.log.error("changeType is not supported!");return}Dr({type:e,sourceUpdater:this,action:Or.changeType(n),name:"changeType"})},i.addOrChangeSourceBuffers=function(e){var n=this;if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(function(s){var o=e[s];if(!n.hasCreatedSourceBuffers())return n.addSourceBuffer(s,o);n.canChangeType()&&n.changeType(s,o)})},i.appendBuffer=function(e,n){var s=this,o=e.segmentInfo,l=e.type,f=e.bytes;if(this.processedAppend_=!0,l==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,n]),this.logger_("delayed audio append of "+f.length+" until video append");return}var m=n;if(Dr({type:l,sourceUpdater:this,action:Or.appendBuffer(f,o||{mediaIndex:-1},m),doneFn:n,name:"appendBuffer"}),l==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var v=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+v.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,v.forEach(function(y){s.appendBuffer.apply(s,y)})}},i.audioBuffered=function(){return Gn(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:N.createTimeRange()},i.videoBuffered=function(){return Gn(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:N.createTimeRange()},i.buffered=function(){var e=Gn(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,n=Gn(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return n&&!e?this.audioBuffered():e&&!n?this.videoBuffered():RB(this.audioBuffered(),this.videoBuffered())},i.setDuration=function(e,n){n===void 0&&(n=Ia),Dr({type:"mediaSource",sourceUpdater:this,action:Or.duration(e),name:"duration",doneFn:n})},i.endOfStream=function(e,n){e===void 0&&(e=null),n===void 0&&(n=Ia),typeof e!="string"&&(e=void 0),Dr({type:"mediaSource",sourceUpdater:this,action:Or.endOfStream(e),name:"endOfStream",doneFn:n})},i.removeAudio=function(e,n,s){if(s===void 0&&(s=Ia),!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}Dr({type:"audio",sourceUpdater:this,action:Or.remove(e,n),doneFn:s,name:"remove"})},i.removeVideo=function(e,n,s){if(s===void 0&&(s=Ia),!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}Dr({type:"video",sourceUpdater:this,action:Or.remove(e,n),doneFn:s,name:"remove"})},i.updating=function(){return!!(yg("audio",this)||yg("video",this))},i.audioTimestampOffset=function(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(Dr({type:"audio",sourceUpdater:this,action:Or.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},i.videoTimestampOffset=function(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(Dr({type:"video",sourceUpdater:this,action:Or.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},i.audioQueueCallback=function(e){this.audioBuffer&&Dr({type:"audio",sourceUpdater:this,action:Or.callback(e),name:"callback"})},i.videoQueueCallback=function(e){this.videoBuffer&&Dr({type:"video",sourceUpdater:this,action:Or.callback(e),name:"callback"})},i.dispose=function(){var e=this;this.trigger("dispose"),m2.forEach(function(n){e.abort(n),e.canRemoveSourceBuffer()?e.removeSourceBuffer(n):e[n+"QueueCallback"](function(){return N1(n,e)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(N.EventTarget),hb=function(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))},pb=new Uint8Array(`

`.split("").map(function(a){return a.charCodeAt(0)})),v2=function(a){Ae(t,a);function t(){return a.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return t}(qc(Error)),_2=function(a){Ae(t,a);function t(r,e){var n;return e===void 0&&(e={}),n=a.call(this,r,e)||this,n.mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=r.featuresNativeTextTracks,n.loadVttJs=r.loadVttJs,n.shouldSaveSegmentTimingInfo_=!1,n}var i=t.prototype;return i.createTransmuxer_=function(){return null},i.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return N.createTimeRanges();var e=this.subtitlesTrack_.cues,n=e[0].startTime,s=e[e.length-1].startTime;return N.createTimeRanges([[n,s]])},i.initSegmentForMap=function(e,n){if(n===void 0&&(n=!1),!e)return null;var s=rh(e),o=this.initSegments_[s];if(n&&!o&&e.bytes){var l=pb.byteLength+e.bytes.byteLength,f=new Uint8Array(l);f.set(e.bytes),f.set(pb,e.bytes.byteLength),this.initSegments_[s]=o={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:f}}return o||e},i.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.track=function(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},i.remove=function(e,n){bd(e,n,this.subtitlesTrack_)},i.fillBuffer_=function(){var e=this,n=this.chooseNextRequest_();if(n){if(this.syncController_.timestampOffsetForTimeline(n.timeline)===null){var s=function(){e.state="READY",e.paused()||e.monitorBuffer_()};this.syncController_.one("timestampoffset",s),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(n)}},i.timestampOffsetForSegment_=function(){return null},i.chooseNextRequest_=function(){return this.skipEmptySegments_(a.prototype.chooseNextRequest_.call(this))},i.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},i.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},i.segmentRequestFinished_=function(e,n,s){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===Zn.TIMEOUT&&this.handleTimeout_(),e.code===Zn.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,n.stats),n.key&&this.segmentKey(n.key,!0),this.state="APPENDING",this.trigger("appending");var f=l.segment;if(f.map&&(f.map.bytes=n.map.bytes),l.bytes=n.bytes,typeof F.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(function(){return o.segmentRequestFinished_(e,n,s)},function(){return o.stopForError({message:"Error loading vtt.js"})});return}f.requested=!0;try{this.parseVTTCues_(l)}catch(m){this.stopForError({message:m.message});return}if(this.updateTimeMapping_(l,this.syncController_.timelines[l.timeline],this.playlist_),l.cues.length?l.timingInfo={start:l.cues[0].startTime,end:l.cues[l.cues.length-1].endTime}:l.timingInfo={start:l.startOfSegment,end:l.startOfSegment+l.duration},l.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}l.byteLength=l.bytes.byteLength,this.mediaSecondsLoaded+=f.duration,l.cues.forEach(function(m){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new F.VTTCue(m.startTime,m.endTime,m.text):m)}),r2(this.subtitlesTrack_),this.handleAppendsDone_()},i.handleData_=function(){},i.updateTimingInfoEnd_=function(){},i.parseVTTCues_=function(e){var n,s=!1;if(typeof F.WebVTT!="function")throw new v2;typeof F.TextDecoder=="function"?n=new F.TextDecoder("utf8"):(n=F.WebVTT.StringDecoder(),s=!0);var o=new F.WebVTT.Parser(F,F.vttjs,n);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=e.cues.push.bind(e.cues),o.ontimestampmap=function(m){e.timestampmap=m},o.onparsingerror=function(m){N.log.warn("Error encountered when parsing cues: "+m.message)},e.segment.map){var l=e.segment.map.bytes;s&&(l=hb(l)),o.parse(l)}var f=e.bytes;s&&(f=hb(f)),o.parse(f),o.flush()},i.updateTimeMapping_=function(e,n,s){var o=e.segment;if(n){if(!e.cues.length){o.empty=!0;return}var l=e.timestampmap,f=l.MPEGTS/xs.ONE_SECOND_IN_TS-l.LOCAL+n.mapping;if(e.cues.forEach(function(y){y.startTime+=f,y.endTime+=f}),!s.syncInfo){var m=e.cues[0].startTime,v=e.cues[e.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+e.mediaIndex,time:Math.min(m,v-o.duration)}}}},t}(_g),y2=function(t,i){for(var r=t.cues,e=0;e<r.length;e++){var n=r[e];if(i>=n.adStartTime&&i<=n.adEndTime)return n}return null},T2=function(t,i,r){if(r===void 0&&(r=0),!!t.segments)for(var e=r,n,s=0;s<t.segments.length;s++){var o=t.segments[s];if(n||(n=y2(i,e+o.duration/2)),n){if("cueIn"in o){n.endTime=e,n.adEndTime=e,e+=o.duration,n=null;continue}if(e<n.endTime){e+=o.duration;continue}n.endTime+=o.duration}else if("cueOut"in o&&(n=new F.VTTCue(e,e+o.duration,o.cueOut),n.adStartTime=e,n.adEndTime=e+parseFloat(o.cueOut),i.addCue(n)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),f=l[0],m=l[1];n=new F.VTTCue(e,e+o.duration,""),n.adStartTime=e-f,n.adEndTime=n.adStartTime+m,i.addCue(n)}e+=o.duration}},b2=86400,mb=[{name:"VOD",run:function(t,i,r,e,n){if(r!==1/0){var s={time:0,segmentIndex:0,partIndex:null};return s}return null}},{name:"ProgramDateTime",run:function(t,i,r,e,n){if(!Object.keys(t.timelineToDatetimeMappings).length)return null;var s=null,o=null,l=dg(i);n=n||0;for(var f=0;f<l.length;f++){var m=i.endList||n===0?f:l.length-(f+1),v=l[m],y=v.segment,E=t.timelineToDatetimeMappings[y.timeline];if(!(!E||!y.dateTimeObject)){var I=y.dateTimeObject.getTime()/1e3,O=I+E;if(y.parts&&typeof v.partIndex=="number")for(var D=0;D<v.partIndex;D++)O+=y.parts[D].duration;var R=Math.abs(n-O);if(o!==null&&(R===0||o<R))break;o=R,s={time:O,segmentIndex:v.segmentIndex,partIndex:v.partIndex}}}return s}},{name:"Segment",run:function(t,i,r,e,n){var s=null,o=null;n=n||0;for(var l=dg(i),f=0;f<l.length;f++){var m=i.endList||n===0?f:l.length-(f+1),v=l[m],y=v.segment,E=v.part&&v.part.start||y&&y.start;if(y.timeline===e&&typeof E<"u"){var I=Math.abs(n-E);if(o!==null&&o<I)break;(!s||o===null||o>=I)&&(o=I,s={time:E,segmentIndex:v.segmentIndex,partIndex:v.partIndex})}}return s}},{name:"Discontinuity",run:function(t,i,r,e,n){var s=null;if(n=n||0,i.discontinuityStarts&&i.discontinuityStarts.length)for(var o=null,l=0;l<i.discontinuityStarts.length;l++){var f=i.discontinuityStarts[l],m=i.discontinuitySequence+l+1,v=t.discontinuities[m];if(v){var y=Math.abs(n-v.time);if(o!==null&&o<y)break;(!s||o===null||o>=y)&&(o=y,s={time:v.time,segmentIndex:f,partIndex:null})}}return s}},{name:"Playlist",run:function(t,i,r,e,n){if(i.syncInfo){var s={time:i.syncInfo.time,segmentIndex:i.syncInfo.mediaSequence-i.mediaSequence,partIndex:null};return s}return null}}],x2=function(a){Ae(t,a);function t(r){var e;return e=a.call(this)||this,e.timelines=[],e.discontinuities=[],e.timelineToDatetimeMappings={},e.logger_=On("SyncController"),e}var i=t.prototype;return i.getSyncPoint=function(e,n,s,o){var l=this.runStrategies_(e,n,s,o);return l.length?this.selectSyncPoint_(l,{key:"time",value:o}):null},i.getExpiredTime=function(e,n){if(!e||!e.segments)return null;var s=this.runStrategies_(e,n,e.discontinuitySequence,0);if(!s.length)return null;var o=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+Od({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:o.segmentIndex,endIndex:0}))},i.runStrategies_=function(e,n,s,o){for(var l=[],f=0;f<mb.length;f++){var m=mb[f],v=m.run(this,e,n,s,o);v&&(v.strategy=m.name,l.push({strategy:m.name,syncPoint:v}))}return l},i.selectSyncPoint_=function(e,n){for(var s=e[0].syncPoint,o=Math.abs(e[0].syncPoint[n.key]-n.value),l=e[0].strategy,f=1;f<e.length;f++){var m=Math.abs(e[f].syncPoint[n.key]-n.value);m<o&&(o=m,s=e[f].syncPoint,l=e[f].strategy)}return this.logger_("syncPoint for ["+n.key+": "+n.value+"] chosen with strategy"+(" ["+l+"]: [time:"+s.time+",")+(" segmentIndex:"+s.segmentIndex)+(typeof s.partIndex=="number"?",partIndex:"+s.partIndex:"")+"]"),s},i.saveExpiredSegmentInfo=function(e,n){var s=n.mediaSequence-e.mediaSequence;if(s>b2){N.log.warn("Not saving expired segment info. Media sequence gap "+s+" is too large.");return}for(var o=s-1;o>=0;o--){var l=e.segments[o];if(l&&typeof l.start<"u"){n.syncInfo={mediaSequence:e.mediaSequence+o,time:l.start},this.logger_("playlist refresh sync: [time:"+n.syncInfo.time+","+(" mediaSequence: "+n.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},i.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var n=e.segments[0],s=n.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[n.timeline]=-s}},i.saveSegmentTimingInfo=function(e){var n=e.segmentInfo,s=e.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(n,n.timingInfo,s),l=n.segment;o&&(this.saveDiscontinuitySyncInfo_(n),n.playlist.syncInfo||(n.playlist.syncInfo={mediaSequence:n.playlist.mediaSequence+n.mediaIndex,time:l.start}));var f=l.dateTimeObject;l.discontinuity&&s&&f&&(this.timelineToDatetimeMappings[l.timeline]=-(f.getTime()/1e3))},i.timestampOffsetForTimeline=function(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time},i.mappingForTimeline=function(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping},i.calculateSegmentTimeMapping_=function(e,n,s){var o=e.segment,l=e.part,f=this.timelines[e.timeline],m,v;if(typeof e.timestampOffset=="number")f={time:e.startOfSegment,mapping:e.startOfSegment-n.start},s&&(this.timelines[e.timeline]=f,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": "+("[time: "+f.time+"] [mapping: "+f.mapping+"]"))),m=e.startOfSegment,v=n.end+f.mapping;else if(f)m=n.start+f.mapping,v=n.end+f.mapping;else return!1;return l&&(l.start=m,l.end=v),(!o.start||m<o.start)&&(o.start=m),o.end=v,!0},i.saveDiscontinuitySyncInfo_=function(e){var n=e.playlist,s=e.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(n.discontinuityStarts&&n.discontinuityStarts.length)for(var o=0;o<n.discontinuityStarts.length;o++){var l=n.discontinuityStarts[o],f=n.discontinuitySequence+o+1,m=l-e.mediaIndex,v=Math.abs(m);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>v){var y=void 0;m<0?y=s.start-Od({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex,endIndex:l}):y=s.end+Od({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex+1,endIndex:l}),this.discontinuities[f]={time:y,accuracy:v}}}},i.dispose=function(){this.trigger("dispose"),this.off()},t}(N.EventTarget),S2=function(a){Ae(t,a);function t(){var r;return r=a.call(this)||this,r.pendingTimelineChanges_={},r.lastTimelineChanges_={},r}var i=t.prototype;return i.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},i.pendingTimelineChange=function(e){var n=e.type,s=e.from,o=e.to;return typeof s=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[n]={type:n,from:s,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[n]},i.lastTimelineChange=function(e){var n=e.type,s=e.from,o=e.to;return typeof s=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[n]={type:n,from:s,to:o},delete this.pendingTimelineChanges_[n],this.trigger("timelinechange")),this.lastTimelineChanges_[n]},i.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(N.EventTarget),E2=E1(w1(function(){var a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function t(V,W,te){return te={path:W,exports:{},require:function(q,X){return i(q,X??te.path)}},V(te,te.exports),te.exports}function i(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var r=t(function(V){function W(z,q){for(var X=0;X<q.length;X++){var j=q[X];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(z,j.key,j)}}function te(z,q,X){return q&&W(z.prototype,q),X&&W(z,X),z}V.exports=te,V.exports.default=V.exports,V.exports.__esModule=!0}),e=t(function(V){function W(te,z){return V.exports=W=Object.setPrototypeOf||function(X,j){return X.__proto__=j,X},V.exports.default=V.exports,V.exports.__esModule=!0,W(te,z)}V.exports=W,V.exports.default=V.exports,V.exports.__esModule=!0}),n=t(function(V){function W(te,z){te.prototype=Object.create(z.prototype),te.prototype.constructor=te,e(te,z)}V.exports=W,V.exports.default=V.exports,V.exports.__esModule=!0}),s=function(){function V(){this.listeners={}}var W=V.prototype;return W.on=function(z,q){this.listeners[z]||(this.listeners[z]=[]),this.listeners[z].push(q)},W.off=function(z,q){if(!this.listeners[z])return!1;var X=this.listeners[z].indexOf(q);return this.listeners[z]=this.listeners[z].slice(0),this.listeners[z].splice(X,1),X>-1},W.trigger=function(z){var q=this.listeners[z];if(q)if(arguments.length===2)for(var X=q.length,j=0;j<X;++j)q[j].call(this,arguments[1]);else for(var oe=Array.prototype.slice.call(arguments,1),re=q.length,se=0;se<re;++se)q[se].apply(this,oe)},W.dispose=function(){this.listeners={}},W.pipe=function(z){this.on("data",function(q){z.push(q)})},V}();function o(V){return V.subarray(0,V.byteLength-V[V.byteLength-1])}var l=function(){var W=[[[],[],[],[],[]],[[],[],[],[],[]]],te=W[0],z=W[1],q=te[4],X=z[4],j,oe,re,se=[],he=[],le,pe,ne,fe,Ie,Ce;for(j=0;j<256;j++)he[(se[j]=j<<1^(j>>7)*283)^j]=j;for(oe=re=0;!q[oe];oe^=le||1,re=he[re]||1)for(fe=re^re<<1^re<<2^re<<3^re<<4,fe=fe>>8^fe&255^99,q[oe]=fe,X[fe]=oe,ne=se[pe=se[le=se[oe]]],Ce=ne*16843009^pe*65537^le*257^oe*16843008,Ie=se[fe]*257^fe*16843008,j=0;j<4;j++)te[j][oe]=Ie=Ie<<24^Ie>>>8,z[j][fe]=Ce=Ce<<24^Ce>>>8;for(j=0;j<5;j++)te[j]=te[j].slice(0),z[j]=z[j].slice(0);return W},f=null,m=function(){function V(te){f||(f=l()),this._tables=[[f[0][0].slice(),f[0][1].slice(),f[0][2].slice(),f[0][3].slice(),f[0][4].slice()],[f[1][0].slice(),f[1][1].slice(),f[1][2].slice(),f[1][3].slice(),f[1][4].slice()]];var z,q,X,j=this._tables[0][4],oe=this._tables[1],re=te.length,se=1;if(re!==4&&re!==6&&re!==8)throw new Error("Invalid aes key size");var he=te.slice(0),le=[];for(this._key=[he,le],z=re;z<4*re+28;z++)X=he[z-1],(z%re===0||re===8&&z%re===4)&&(X=j[X>>>24]<<24^j[X>>16&255]<<16^j[X>>8&255]<<8^j[X&255],z%re===0&&(X=X<<8^X>>>24^se<<24,se=se<<1^(se>>7)*283)),he[z]=he[z-re]^X;for(q=0;z;q++,z--)X=he[q&3?z:z-4],z<=4||q<4?le[q]=X:le[q]=oe[0][j[X>>>24]]^oe[1][j[X>>16&255]]^oe[2][j[X>>8&255]]^oe[3][j[X&255]]}var W=V.prototype;return W.decrypt=function(z,q,X,j,oe,re){var se=this._key[1],he=z^se[0],le=j^se[1],pe=X^se[2],ne=q^se[3],fe,Ie,Ce,Xe=se.length/4-2,Be,Qe=4,Et=this._tables[1],Tt=Et[0],bt=Et[1],wt=Et[2],Ct=Et[3],ct=Et[4];for(Be=0;Be<Xe;Be++)fe=Tt[he>>>24]^bt[le>>16&255]^wt[pe>>8&255]^Ct[ne&255]^se[Qe],Ie=Tt[le>>>24]^bt[pe>>16&255]^wt[ne>>8&255]^Ct[he&255]^se[Qe+1],Ce=Tt[pe>>>24]^bt[ne>>16&255]^wt[he>>8&255]^Ct[le&255]^se[Qe+2],ne=Tt[ne>>>24]^bt[he>>16&255]^wt[le>>8&255]^Ct[pe&255]^se[Qe+3],Qe+=4,he=fe,le=Ie,pe=Ce;for(Be=0;Be<4;Be++)oe[(3&-Be)+re]=ct[he>>>24]<<24^ct[le>>16&255]<<16^ct[pe>>8&255]<<8^ct[ne&255]^se[Qe++],fe=he,he=le,le=pe,pe=ne,ne=fe},V}(),v=function(V){n(W,V);function W(){var z;return z=V.call(this,s)||this,z.jobs=[],z.delay=1,z.timeout_=null,z}var te=W.prototype;return te.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},te.push=function(q){this.jobs.push(q),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},W}(s),y=function(W){return W<<24|(W&65280)<<8|(W&16711680)>>8|W>>>24},E=function(W,te,z){var q=new Int32Array(W.buffer,W.byteOffset,W.byteLength>>2),X=new m(Array.prototype.slice.call(te)),j=new Uint8Array(W.byteLength),oe=new Int32Array(j.buffer),re,se,he,le,pe,ne,fe,Ie,Ce;for(re=z[0],se=z[1],he=z[2],le=z[3],Ce=0;Ce<q.length;Ce+=4)pe=y(q[Ce]),ne=y(q[Ce+1]),fe=y(q[Ce+2]),Ie=y(q[Ce+3]),X.decrypt(pe,ne,fe,Ie,oe,Ce),oe[Ce]=y(oe[Ce]^re),oe[Ce+1]=y(oe[Ce+1]^se),oe[Ce+2]=y(oe[Ce+2]^he),oe[Ce+3]=y(oe[Ce+3]^le),re=pe,se=ne,he=fe,le=Ie;return j},I=function(){function V(te,z,q,X){var j=V.STEP,oe=new Int32Array(te.buffer),re=new Uint8Array(te.byteLength),se=0;for(this.asyncStream_=new v,this.asyncStream_.push(this.decryptChunk_(oe.subarray(se,se+j),z,q,re)),se=j;se<oe.length;se+=j)q=new Uint32Array([y(oe[se-4]),y(oe[se-3]),y(oe[se-2]),y(oe[se-1])]),this.asyncStream_.push(this.decryptChunk_(oe.subarray(se,se+j),z,q,re));this.asyncStream_.push(function(){X(null,o(re))})}var W=V.prototype;return W.decryptChunk_=function(z,q,X,j){return function(){var oe=E(z,q,X);j.set(oe,z.byteOffset)}},r(V,null,[{key:"STEP",get:function(){return 32e3}}]),V}(),O;typeof window<"u"?O=window:typeof a<"u"?O=a:typeof self<"u"?O=self:O={};var D=O,R=function(W){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(W):W&&W.buffer instanceof ArrayBuffer},H=D.BigInt||Number;H("0x1"),H("0x100"),H("0x10000"),H("0x1000000"),H("0x100000000"),H("0x10000000000"),H("0x1000000000000"),H("0x100000000000000"),H("0x10000000000000000");var Z=function(W){var te={};return Object.keys(W).forEach(function(z){var q=W[z];R(q)?te[z]={bytes:q.buffer,byteOffset:q.byteOffset,byteLength:q.byteLength}:te[z]=q}),te};self.onmessage=function(V){var W=V.data,te=new Uint8Array(W.encrypted.bytes,W.encrypted.byteOffset,W.encrypted.byteLength),z=new Uint32Array(W.key.bytes,W.key.byteOffset,W.key.byteLength/4),q=new Uint32Array(W.iv.bytes,W.iv.byteOffset,W.iv.byteLength/4);new I(te,z,q,function(X,j){self.postMessage(Z({source:W.source,decrypted:j}),[j.buffer])})}})),w2=S1(E2),C2=function(t){var i=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(i="main-desc"),i},oh=function(t,i){t.abort(),t.pause(),i&&i.activePlaylistLoader&&(i.activePlaylistLoader.pause(),i.activePlaylistLoader=null)},Tg=function(t,i){i.activePlaylistLoader=t,t.load()},A2=function(t,i){return function(){var r=i.segmentLoaders,e=r[t],n=r.main,s=i.mediaTypes[t],o=s.activeTrack(),l=s.getActiveGroup(),f=s.activePlaylistLoader,m=s.lastGroup_;if(!(l&&m&&l.id===m.id)&&(s.lastGroup_=l,s.lastTrack_=o,oh(e,s),!(!l||l.isMasterPlaylist))){if(!l.playlistLoader){f&&n.resetEverything();return}e.resyncLoader(),Tg(l.playlistLoader,s)}}},I2=function(t,i){return function(){var r=i.segmentLoaders[t],e=i.mediaTypes[t];e.lastGroup_=null,r.abort(),r.pause()}},P2=function(t,i){return function(){var r=i.masterPlaylistLoader,e=i.segmentLoaders,n=e[t],s=e.main,o=i.mediaTypes[t],l=o.activeTrack(),f=o.getActiveGroup(),m=o.activePlaylistLoader,v=o.lastTrack_;if(!(v&&l&&v.id===l.id)&&(o.lastGroup_=f,o.lastTrack_=l,oh(n,o),!!f)){if(f.isMasterPlaylist){if(!l||!v||l.id===v.id)return;var y=i.vhs.masterPlaylistController_,E=y.selectPlaylist();if(y.media()===E)return;o.logger_("track change. Switching master audio from "+v.id+" to "+l.id),r.pause(),s.resetEverything(),y.fastQualityChange_(E);return}if(t==="AUDIO"){if(!f.playlistLoader){s.setAudio(!0),s.resetEverything();return}n.setAudio(!0),s.setAudio(!1)}if(m===f.playlistLoader){Tg(f.playlistLoader,o);return}n.track&&n.track(l),n.resetEverything(),Tg(f.playlistLoader,o)}}},uh={AUDIO:function(t,i){return function(){var r=i.segmentLoaders[t],e=i.mediaTypes[t],n=i.blacklistCurrentPlaylist;oh(r,e);var s=e.activeTrack(),o=e.activeGroup(),l=(o.filter(function(v){return v.default})[0]||o[0]).id,f=e.tracks[l];if(s===f){n({message:"Problem encountered loading the default audio track."});return}N.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var m in e.tracks)e.tracks[m].enabled=e.tracks[m]===f;e.onTrackChanged()}},SUBTITLES:function(t,i){return function(){var r=i.segmentLoaders[t],e=i.mediaTypes[t];N.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),oh(r,e);var n=e.activeTrack();n&&(n.mode="disabled"),e.onTrackChanged()}}},gb={AUDIO:function(t,i,r){if(i){var e=r.tech,n=r.requestOptions,s=r.segmentLoaders[t];i.on("loadedmetadata",function(){var o=i.media();s.playlist(o,n),(!e.paused()||o.endList&&e.preload()!=="none")&&s.load()}),i.on("loadedplaylist",function(){s.playlist(i.media(),n),e.paused()||s.load()}),i.on("error",uh[t](t,r))}},SUBTITLES:function(t,i,r){var e=r.tech,n=r.requestOptions,s=r.segmentLoaders[t],o=r.mediaTypes[t];i.on("loadedmetadata",function(){var l=i.media();s.playlist(l,n),s.track(o.activeTrack()),(!e.paused()||l.endList&&e.preload()!=="none")&&s.load()}),i.on("loadedplaylist",function(){s.playlist(i.media(),n),e.paused()||s.load()}),i.on("error",uh[t](t,r))}},O2={AUDIO:function(t,i){var r=i.vhs,e=i.sourceType,n=i.segmentLoaders[t],s=i.requestOptions,o=i.master.mediaGroups,l=i.mediaTypes[t],f=l.groups,m=l.tracks,v=l.logger_,y=i.masterPlaylistLoader,E=gf(y.master);(!o[t]||Object.keys(o[t]).length===0)&&(o[t]={main:{default:{default:!0}}},E&&(o[t].main.default.playlists=y.master.playlists));for(var I in o[t]){f[I]||(f[I]=[]);for(var O in o[t][I]){var D=o[t][I][O],R=void 0;if(E?(v("AUDIO group '"+I+"' label '"+O+"' is a master playlist"),D.isMasterPlaylist=!0,R=null):e==="vhs-json"&&D.playlists?R=new Cu(D.playlists[0],r,s):D.resolvedUri?R=new Cu(D.resolvedUri,r,s):D.playlists&&e==="dash"?R=new gg(D.playlists[0],r,s,y):R=null,D=N.mergeOptions({id:O,playlistLoader:R},D),gb[t](t,D.playlistLoader,i),f[I].push(D),typeof m[O]>"u"){var H=new N.AudioTrack({id:O,kind:C2(D),enabled:!1,language:D.language,default:D.default,label:O});m[O]=H}}}n.on("error",uh[t](t,i))},SUBTITLES:function(t,i){var r=i.tech,e=i.vhs,n=i.sourceType,s=i.segmentLoaders[t],o=i.requestOptions,l=i.master.mediaGroups,f=i.mediaTypes[t],m=f.groups,v=f.tracks,y=i.masterPlaylistLoader;for(var E in l[t]){m[E]||(m[E]=[]);for(var I in l[t][E])if(!l[t][E][I].forced){var O=l[t][E][I],D=void 0;if(n==="hls")D=new Cu(O.resolvedUri,e,o);else if(n==="dash"){var R=O.playlists.filter(function(Z){return Z.excludeUntil!==1/0});if(!R.length)return;D=new gg(O.playlists[0],e,o,y)}else n==="vhs-json"&&(D=new Cu(O.playlists?O.playlists[0]:O.resolvedUri,e,o));if(O=N.mergeOptions({id:I,playlistLoader:D},O),gb[t](t,O.playlistLoader,i),m[E].push(O),typeof v[I]>"u"){var H=r.addRemoteTextTrack({id:I,kind:"subtitles",default:O.default&&O.autoselect,language:O.language,label:I},!1).track;v[I]=H}}}s.on("error",uh[t](t,i))},"CLOSED-CAPTIONS":function(t,i){var r=i.tech,e=i.master.mediaGroups,n=i.mediaTypes[t],s=n.groups,o=n.tracks;for(var l in e[t]){s[l]||(s[l]=[]);for(var f in e[t][l]){var m=e[t][l][f];if(/^(?:CC|SERVICE)/.test(m.instreamId)){var v=r.options_.vhs&&r.options_.vhs.captionServices||{},y={label:f,language:m.language,instreamId:m.instreamId,default:m.default&&m.autoselect};if(v[y.instreamId]&&(y=N.mergeOptions(y,v[y.instreamId])),y.default===void 0&&delete y.default,s[l].push(N.mergeOptions({id:f},m)),typeof o[f]>"u"){var E=r.addRemoteTextTrack({id:y.instreamId,kind:"captions",default:y.default,language:y.language,label:y.label},!1).track;o[f]=E}}}}}},D2=function a(t,i){for(var r=0;r<t.length;r++)if(s0(i,t[r])||t[r].playlists&&a(t[r].playlists,i))return!0;return!1},L2=function(t,i){return function(r){var e=i.masterPlaylistLoader,n=i.mediaTypes[t].groups,s=e.media();if(!s)return null;var o=null;s.attributes[t]&&(o=n[s.attributes[t]]);var l=Object.keys(n);if(!o)if(t==="AUDIO"&&l.length>1&&gf(i.master))for(var f=0;f<l.length;f++){var m=n[l[f]];if(D2(m,s)){o=m;break}}else n.main?o=n.main:l.length===1&&(o=n[l[0]]);return typeof r>"u"?o:r===null||!o?null:o.filter(function(v){return v.id===r.id})[0]||null}},k2={AUDIO:function(t,i){return function(){var r=i.mediaTypes[t].tracks;for(var e in r)if(r[e].enabled)return r[e];return null}},SUBTITLES:function(t,i){return function(){var r=i.mediaTypes[t].tracks;for(var e in r)if(r[e].mode==="showing"||r[e].mode==="hidden")return r[e];return null}}},R2=function(t,i){var r=i.mediaTypes;return function(){var e=r[t].activeTrack();return e?r[t].activeGroup(e):null}},M2=function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(I){O2[I](I,t)});var i=t.mediaTypes,r=t.masterPlaylistLoader,e=t.tech,n=t.vhs,s=t.segmentLoaders,o=s.AUDIO,l=s.main;["AUDIO","SUBTITLES"].forEach(function(I){i[I].activeGroup=L2(I,t),i[I].activeTrack=k2[I](I,t),i[I].onGroupChanged=A2(I,t),i[I].onGroupChanging=I2(I,t),i[I].onTrackChanged=P2(I,t),i[I].getActiveGroup=R2(I,t)});var f=i.AUDIO.activeGroup();if(f){var m=(f.filter(function(I){return I.default})[0]||f[0]).id;i.AUDIO.tracks[m].enabled=!0,i.AUDIO.onGroupChanged(),i.AUDIO.onTrackChanged();var v=i.AUDIO.getActiveGroup();v.playlistLoader?(l.setAudio(!1),o.setAudio(!0)):l.setAudio(!0)}r.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(I){return i[I].onGroupChanged()})}),r.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(I){return i[I].onGroupChanging()})});var y=function(){i.AUDIO.onTrackChanged(),e.trigger({type:"usage",name:"vhs-audio-change"}),e.trigger({type:"usage",name:"hls-audio-change"})};e.audioTracks().addEventListener("change",y),e.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged),n.on("dispose",function(){e.audioTracks().removeEventListener("change",y),e.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)}),e.clearTracks("audio");for(var E in i.AUDIO.tracks)e.audioTracks().addTrack(i.AUDIO.tracks[E])},F2=function(){var t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(i){t[i]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Ia,activeTrack:Ia,getActiveGroup:Ia,onGroupChanged:Ia,onTrackChanged:Ia,lastTrack_:null,logger_:On("MediaGroups["+i+"]")}}),t},N2=60*2,xa,U2=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],B2=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},j2=function(t){var i=t.currentPlaylist,r=t.buffered,e=t.currentTime,n=t.nextPlaylist,s=t.bufferLowWaterLine,o=t.bufferHighWaterLine,l=t.duration,f=t.experimentalBufferBasedABR,m=t.log;if(!n)return N.log.warn("We received no playlist to switch to. Please check your stream."),!1;var v="allowing switch "+(i&&i.id||"null")+" -> "+n.id;if(!i)return m(v+" as current playlist is not set"),!0;if(n.id===i.id)return!1;var y=Boolean(wu(r,e).length);if(!i.endList)return!y&&typeof i.partTargetDuration=="number"?(m("not "+v+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(m(v+" as current playlist is live"),!0);var E=r0(r,e),I=f?pi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:pi.MAX_BUFFER_LOW_WATER_LINE;if(l<I)return m(v+" as duration < max low water line ("+l+" < "+I+")"),!0;var O=n.attributes.BANDWIDTH,D=i.attributes.BANDWIDTH;if(O<D&&(!f||E<o)){var R=v+" as next bandwidth < current bandwidth ("+O+" < "+D+")";return f&&(R+=" and forwardBuffer < bufferHighWaterLine ("+E+" < "+o+")"),m(R),!0}if((!f||O>D)&&E>=s){var H=v+" as forwardBuffer >= bufferLowWaterLine ("+E+" >= "+s+")";return f&&(H+=" and next bandwidth > current bandwidth ("+O+" > "+D+")"),m(H),!0}return m("not "+v+" as no switching criteria met"),!1},V2=function(a){Ae(t,a);function t(r){var e;e=a.call(this)||this;var n=r.src,s=r.handleManifestRedirects,o=r.withCredentials,l=r.tech,f=r.bandwidth,m=r.externVhs,v=r.useCueTags,y=r.blacklistDuration,E=r.enableLowInitialPlaylist,I=r.sourceType,O=r.cacheEncryptionKeys,D=r.experimentalBufferBasedABR,R=r.experimentalLeastPixelDiffSelector,H=r.captionServices;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");var Z=r.maxPlaylistRetries;(Z===null||typeof Z>"u")&&(Z=1/0),xa=m,e.experimentalBufferBasedABR=Boolean(D),e.experimentalLeastPixelDiffSelector=Boolean(R),e.withCredentials=o,e.tech_=l,e.vhs_=l.vhs,e.sourceType_=I,e.useCueTags_=v,e.blacklistDuration=y,e.maxPlaylistRetries=Z,e.enableLowInitialPlaylist=E,e.useCueTags_&&(e.cueTagsTrack_=e.tech_.addTextTrack("metadata","ad-cues"),e.cueTagsTrack_.inBandMetadataTrackDispatchType=""),e.requestOptions_={withCredentials:o,handleManifestRedirects:s,maxPlaylistRetries:Z,timeout:null},e.on("error",e.pauseLoading),e.mediaTypes_=F2(),e.mediaSource=new F.MediaSource,e.handleDurationChange_=e.handleDurationChange_.bind(Ue(e)),e.handleSourceOpen_=e.handleSourceOpen_.bind(Ue(e)),e.handleSourceEnded_=e.handleSourceEnded_.bind(Ue(e)),e.mediaSource.addEventListener("durationchange",e.handleDurationChange_),e.mediaSource.addEventListener("sourceopen",e.handleSourceOpen_),e.mediaSource.addEventListener("sourceended",e.handleSourceEnded_),e.seekable_=N.createTimeRanges(),e.hasPlayed_=!1,e.syncController_=new x2(r),e.segmentMetadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,e.decrypter_=new w2,e.sourceUpdater_=new U1(e.mediaSource),e.inbandTextTracks_={},e.timelineChangeController_=new S2;var V={vhs:e.vhs_,parse708captions:r.parse708captions,useDtsForTimestampOffset:r.useDtsForTimestampOffset,captionServices:H,mediaSource:e.mediaSource,currentTime:e.tech_.currentTime.bind(e.tech_),seekable:function(){return e.seekable()},seeking:function(){return e.tech_.seeking()},duration:function(){return e.duration()},hasPlayed:function(){return e.hasPlayed_},goalBufferLength:function(){return e.goalBufferLength()},bandwidth:f,syncController:e.syncController_,decrypter:e.decrypter_,sourceType:e.sourceType_,inbandTextTracks:e.inbandTextTracks_,cacheEncryptionKeys:O,sourceUpdater:e.sourceUpdater_,timelineChangeController:e.timelineChangeController_,experimentalExactManifestTimings:r.experimentalExactManifestTimings};e.masterPlaylistLoader_=e.sourceType_==="dash"?new gg(n,e.vhs_,e.requestOptions_):new Cu(n,e.vhs_,e.requestOptions_),e.setupMasterPlaylistLoaderListeners_(),e.mainSegmentLoader_=new _g(N.mergeOptions(V,{segmentMetadataTrack:e.segmentMetadataTrack_,loaderType:"main"}),r),e.audioSegmentLoader_=new _g(N.mergeOptions(V,{loaderType:"audio"}),r),e.subtitleSegmentLoader_=new _2(N.mergeOptions(V,{loaderType:"vtt",featuresNativeTextTracks:e.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(z,q){function X(){l.off("vttjserror",j),z()}function j(){l.off("vttjsloaded",X),q()}l.one("vttjsloaded",X),l.one("vttjserror",j),l.addWebVttScript_()})}}),r),e.setupSegmentLoaderListeners_(),e.experimentalBufferBasedABR&&(e.masterPlaylistLoader_.one("loadedplaylist",function(){return e.startABRTimer_()}),e.tech_.on("pause",function(){return e.stopABRTimer_()}),e.tech_.on("play",function(){return e.startABRTimer_()})),U2.forEach(function(te){e[te+"_"]=B2.bind(Ue(e),te)}),e.logger_=On("MPC"),e.triggeredFmp4Usage=!1,e.tech_.preload()==="none"?(e.loadOnPlay_=function(){e.loadOnPlay_=null,e.masterPlaylistLoader_.load()},e.tech_.one("play",e.loadOnPlay_)):e.masterPlaylistLoader_.load(),e.timeToLoadedData__=-1,e.mainAppendsToLoadedData__=-1,e.audioAppendsToLoadedData__=-1;var W=e.tech_.preload()==="none"?"play":"loadstart";return e.tech_.one(W,function(){var te=Date.now();e.tech_.one("loadeddata",function(){e.timeToLoadedData__=Date.now()-te,e.mainAppendsToLoadedData__=e.mainSegmentLoader_.mediaAppends,e.audioAppendsToLoadedData__=e.audioSegmentLoader_.mediaAppends})}),e}var i=t.prototype;return i.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},i.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},i.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),n=this.audioAppendsToLoadedData_();return e===-1||n===-1?-1:e+n},i.timeToLoadedData_=function(){return this.timeToLoadedData__},i.checkABR_=function(e){e===void 0&&(e="abr");var n=this.selectPlaylist();n&&this.shouldSwitchToMedia_(n)&&this.switchMedia_(n,e)},i.switchMedia_=function(e,n,s){var o=this.media(),l=o&&(o.id||o.uri),f=e.id||e.uri;l&&l!==f&&(this.logger_("switch media "+l+" -> "+f+" from "+n),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+n})),this.masterPlaylistLoader_.media(e,s)},i.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=F.setInterval(function(){return e.checkABR_()},250)},i.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(F.clearInterval(this.abrTimer_),this.abrTimer_=null)},i.getAudioTrackPlaylists_=function(){var e=this.master(),n=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return n;var s=e.mediaGroups.AUDIO,o=Object.keys(s),l;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)l=this.mediaTypes_.AUDIO.activeTrack();else{var f=s.main||o.length&&s[o[0]];for(var m in f)if(f[m].default){l={label:m};break}}if(!l)return n;var v=[];for(var y in s)if(s[y][l.label]){var E=s[y][l.label];if(E.playlists&&E.playlists.length)v.push.apply(v,E.playlists);else if(E.uri)v.push(E);else if(e.playlists.length)for(var I=0;I<e.playlists.length;I++){var O=e.playlists[I];O.attributes&&O.attributes.AUDIO&&O.attributes.AUDIO===y&&v.push(O)}}return v.length?v:n},i.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var n=e.masterPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;fg(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=s,n.endList&&e.tech_.preload()!=="none"&&(e.mainSegmentLoader_.playlist(n,e.requestOptions_),e.mainSegmentLoader_.load()),M2({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),n),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){e.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var n=e.masterPlaylistLoader_.media();if(!n){e.excludeUnsupportedVariants_();var s;if(e.enableLowInitialPlaylist&&(s=e.selectInitialPlaylist()),s||(s=e.selectPlaylist()),!s||!e.shouldSwitchToMedia_(s))return;e.initialMedia_=s,e.switchMedia_(e.initialMedia_,"initial");var o=e.sourceType_==="vhs-json"&&e.initialMedia_.segments;if(!o)return;n=e.initialMedia_}e.handleUpdatedMediaPlaylist(n)}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var n=e.masterPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;fg(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=s,e.masterPlaylistLoader_.load(),e.mainSegmentLoader_.playlist(n,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var n=e.masterPlaylistLoader_.media();if(n.lastExcludeReason_!=="playlist-unchanged"){var s=e.stuckAtPlaylistEnd_(n);s&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},i.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},i.triggerPresenceUsage_=function(e,n){var s=e.mediaGroups||{},o=!0,l=Object.keys(s.AUDIO);for(var f in s.AUDIO)for(var m in s.AUDIO[f]){var v=s.AUDIO[f][m];v.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(s.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),xa.Playlist.isAes(n)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),l.length&&Object.keys(s.AUDIO[l[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},i.shouldSwitchToMedia_=function(e){var n=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),o=this.bufferLowWaterLine(),l=this.bufferHighWaterLine(),f=this.tech_.buffered();return j2({buffered:f,currentTime:s,currentPlaylist:n,nextPlaylist:e,bufferLowWaterLine:o,bufferHighWaterLine:l,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},i.setupSegmentLoaderListeners_=function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){e.checkABR_("bandwidthupdate"),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){e.experimentalBufferBasedABR&&e.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){e.logger_("main segment loader ended"),e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(s){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},N2))});var n=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var o=e.getCodecsOrExclude_();o&&e.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",n),this.audioSegmentLoader_.on("trackinfo",n),this.mainSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()})},i.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},i.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},i.smoothQualityChange_=function(e){e===void 0&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},i.fastQualityChange_=function(e){var n=this;if(e===void 0&&(e=this.selectPlaylist()),e===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){N.browser.IE_VERSION||N.browser.IS_EDGE?n.tech_.setCurrentTime(n.tech_.currentTime()+.04):n.tech_.setCurrentTime(n.tech_.currentTime())})},i.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}},i.setupFirstPlay=function(){var e=this,n=this.masterPlaylistLoader_.media();if(!n||this.tech_.paused()||this.hasPlayed_)return!1;if(!n.endList){var s=this.seekable();if(!s.length)return!1;if(N.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(s.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=!0,this.load(),!0},i.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,function(n){})}this.trigger("sourceopen")},i.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(!(!e||!e.length)){var n=this.duration();e[e.length-1].endTime=isNaN(n)||Math.abs(n)===1/0?Number.MAX_VALUE:n}}},i.handleDurationChange_=function(){this.tech_.trigger("durationchange")},i.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var n=this.mainSegmentLoader_.getCurrentMediaInfo_();!n||n.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=function(e){var n=this.seekable();if(!n.length)return!1;var s=this.syncController_.getExpiredTime(e,this.duration());if(s===null)return!1;var o=xa.Playlist.playlistEnd(e,s),l=this.tech_.currentTime(),f=this.tech_.buffered();if(!f.length)return o-l<=Jn;var m=f.end(f.length-1);return m-l<=Jn&&o-m<=Jn},i.blacklistCurrentPlaylist=function(e,n){e===void 0&&(e={});var s=e.playlist||this.masterPlaylistLoader_.media();if(n=n||e.blacklistDuration||this.blacklistDuration,!s){this.error=e,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}s.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,l=o.filter(Jh),f=l.length===1&&l[0]===s;if(o.length===1&&n!==1/0)return N.log.warn("Problem encountered with playlist "+s.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(f);if(f){var m=!1;o.forEach(function(R){if(R!==s){var H=R.excludeUntil;typeof H<"u"&&H!==1/0&&(m=!0,delete R.excludeUntil)}}),m&&(N.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var v;s.playlistErrors_>this.maxPlaylistRetries?v=1/0:v=Date.now()+n*1e3,s.excludeUntil=v,e.reason&&(s.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var y=this.selectPlaylist();if(!y){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var E=e.internal?this.logger_:N.log.warn,I=e.message?" "+e.message:"";E((e.internal?"Internal problem":"Problem")+" encountered with playlist "+s.id+"."+(I+" Switching to playlist "+y.id+".")),y.attributes.AUDIO!==s.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),y.attributes.SUBTITLES!==s.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var O=y.targetDuration/2*1e3||5*1e3,D=typeof y.lastRequest=="number"&&Date.now()-y.lastRequest<=O;return this.switchMedia_(y,"exclude",f||D)},i.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},i.delegateLoaders_=function(e,n){var s=this,o=[],l=e==="all";(l||e==="main")&&o.push(this.masterPlaylistLoader_);var f=[];(l||e==="audio")&&f.push("AUDIO"),(l||e==="subtitle")&&(f.push("CLOSED-CAPTIONS"),f.push("SUBTITLES")),f.forEach(function(m){var v=s.mediaTypes_[m]&&s.mediaTypes_[m].activePlaylistLoader;v&&o.push(v)}),["main","audio","subtitle"].forEach(function(m){var v=s[m+"SegmentLoader_"];v&&(e===m||e==="all")&&o.push(v)}),o.forEach(function(m){return n.forEach(function(v){typeof m[v]=="function"&&m[v]()})})},i.setCurrentTime=function(e){var n=wu(this.tech_.buffered(),e);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(n&&n.length)return e;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},i.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:xa.Playlist.duration(e):1/0:0},i.seekable=function(){return this.seekable_},i.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var s=this.syncController_.getExpiredTime(n,this.duration());if(s!==null){var o=this.masterPlaylistLoader_.master,l=xa.Playlist.seekable(n,s,xa.Playlist.liveEdgeDelay(o,n));if(l.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),s=this.syncController_.getExpiredTime(n,this.duration()),s===null||(e=xa.Playlist.seekable(n,s,xa.Playlist.liveEdgeDelay(o,n)),e.length===0)))){var f,m;this.seekable_&&this.seekable_.length&&(f=this.seekable_.end(0),m=this.seekable_.start(0)),e?e.start(0)>l.end(0)||l.start(0)>e.end(0)?this.seekable_=l:this.seekable_=N.createTimeRanges([[e.start(0)>l.start(0)?e.start(0):l.start(0),e.end(0)<l.end(0)?e.end(0):l.end(0)]]):this.seekable_=l,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===f&&this.seekable_.start(0)===m)&&(this.logger_("seekable updated ["+t1(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},i.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){var n=this.seekable();if(!n.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1));return}var s=this.tech_.buffered(),o=xa.Playlist.duration(this.masterPlaylistLoader_.media());s.length>0&&(o=Math.max(o,s.end(s.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},i.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(n){var s=e.mediaTypes_[n].groups;for(var o in s)s[o].forEach(function(l){l.playlistLoader&&l.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},i.master=function(){return this.masterPlaylistLoader_.master},i.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},i.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,n=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!n||!s)},i.getCodecsOrExclude_=function(){var e=this,n={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},s=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();n.video=n.main;var o=Dd(this.master(),s),l={},f=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(n.main.hasVideo&&(l.video=o.video||n.main.videoCodec||Jx),n.main.isMuxed&&(l.video+=","+(o.audio||n.main.audioCodec||Bc)),(n.main.hasAudio&&!n.main.isMuxed||n.audio.hasAudio||f)&&(l.audio=o.audio||n.main.audioCodec||n.audio.audioCodec||Bc,n.audio.isFmp4=n.main.hasAudio&&!n.main.isMuxed?n.main.isFmp4:n.audio.isFmp4),!l.audio&&!l.video){this.blacklistCurrentPlaylist({playlist:s,message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var m=function(R,H){return R?_s(H):Lu(H)},v={},y;if(["video","audio"].forEach(function(D){if(l.hasOwnProperty(D)&&!m(n[D].isFmp4,l[D])){var R=n[D].isFmp4?"browser":"muxer";v[R]=v[R]||[],v[R].push(l[D]),D==="audio"&&(y=R)}}),f&&y&&s.attributes.AUDIO){var E=s.attributes.AUDIO;this.master().playlists.forEach(function(D){var R=D.attributes&&D.attributes.AUDIO;R===E&&D!==s&&(D.excludeUntil=1/0)}),this.logger_("excluding audio group "+E+" as "+y+' does not support codec(s): "'+l.audio+'"')}if(Object.keys(v).length){var I=Object.keys(v).reduce(function(D,R){return D&&(D+=", "),D+=R+' does not support codec(s): "'+v[R].join(",")+'"',D},"")+".";this.blacklistCurrentPlaylist({playlist:s,internal:!0,message:I,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var O=[];if(["video","audio"].forEach(function(D){var R=(li(e.sourceUpdater_.codecs[D]||"")[0]||{}).type,H=(li(l[D]||"")[0]||{}).type;R&&H&&R.toLowerCase()!==H.toLowerCase()&&O.push('"'+e.sourceUpdater_.codecs[D]+'" -> "'+l[D]+'"')}),O.length){this.blacklistCurrentPlaylist({playlist:s,message:"Codec switching not supported: "+O.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return l},i.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var n=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(n)}}},i.excludeUnsupportedVariants_=function(){var e=this,n=this.master().playlists,s=[];Object.keys(n).forEach(function(o){var l=n[o];if(s.indexOf(l.id)===-1){s.push(l.id);var f=Dd(e.master,l),m=[];f.audio&&!Lu(f.audio)&&!_s(f.audio)&&m.push("audio codec "+f.audio),f.video&&!Lu(f.video)&&!_s(f.video)&&m.push("video codec "+f.video),f.text&&f.text==="stpp.ttml.im1t"&&m.push("text codec "+f.text),m.length&&(l.excludeUntil=1/0,e.logger_("excluding "+l.id+" for unsupported: "+m.join(", ")))}})},i.excludeIncompatibleVariants_=function(e){var n=this,s=[],o=this.master().playlists,l=ah(li(e)),f=ab(l),m=l.video&&li(l.video)[0]||null,v=l.audio&&li(l.audio)[0]||null;Object.keys(o).forEach(function(y){var E=o[y];if(!(s.indexOf(E.id)!==-1||E.excludeUntil===1/0)){s.push(E.id);var I=[],O=Dd(n.masterPlaylistLoader_.master,E),D=ab(O);if(!(!O.audio&&!O.video)){if(D!==f&&I.push('codec count "'+D+'" !== "'+f+'"'),!n.sourceUpdater_.canChangeType()){var R=O.video&&li(O.video)[0]||null,H=O.audio&&li(O.audio)[0]||null;R&&m&&R.type.toLowerCase()!==m.type.toLowerCase()&&I.push('video codec "'+R.type+'" !== "'+m.type+'"'),H&&v&&H.type.toLowerCase()!==v.type.toLowerCase()&&I.push('audio codec "'+H.type+'" !== "'+v.type+'"')}I.length&&(E.excludeUntil=1/0,n.logger_("blacklisting "+E.id+": "+I.join(" && ")))}}})},i.updateAdCues_=function(e){var n=0,s=this.seekable();s.length&&(n=s.start(0)),T2(e,this.cueTagsTrack_,n)},i.goalBufferLength=function(){var e=this.tech_.currentTime(),n=pi.GOAL_BUFFER_LENGTH,s=pi.GOAL_BUFFER_LENGTH_RATE,o=Math.max(n,pi.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+e*s,o)},i.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),n=pi.BUFFER_LOW_WATER_LINE,s=pi.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(n,pi.MAX_BUFFER_LOW_WATER_LINE),l=Math.max(n,pi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+e*s,this.experimentalBufferBasedABR?l:o)},i.bufferHighWaterLine=function(){return pi.BUFFER_HIGH_WATER_LINE},t}(N.EventTarget),H2=function(t,i,r){return function(e){var n=t.master.playlists[i],s=a0(n),o=Jh(n);return typeof e>"u"?o:(e?delete n.disabled:n.disabled=!0,e!==o&&!s&&(r(),e?t.trigger("renditionenabled"):t.trigger("renditiondisabled")),e)}},$2=function(t,i,r){var e=t.masterPlaylistController_,n=t.options_.smoothQualityChange,s=n?"smooth":"fast",o=e[s+"QualityChange_"].bind(e);if(i.attributes){var l=i.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=i.attributes.BANDWIDTH,this.frameRate=i.attributes["FRAME-RATE"]}this.codecs=Dd(e.master(),i),this.playlist=i,this.id=r,this.enabled=H2(t.playlists,i.id,o)},W2=function(t){t.representations=function(){var i=t.masterPlaylistController_.master(),r=gf(i)?t.masterPlaylistController_.getAudioTrackPlaylists_():i.playlists;return r?r.filter(function(e){return!a0(e)}).map(function(e,n){return new $2(t,e,e.id)}):[]}},vb=["seeking","seeked","pause","playing","error"],q2=function(){function a(i){var r=this;this.masterPlaylistController_=i.masterPlaylistController,this.tech_=i.tech,this.seekable=i.seekable,this.allowSeeksWithinUnsafeLiveWindow=i.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=i.liveRangeSafeTimeDelta,this.media=i.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=On("PlaybackWatcher"),this.logger_("initialize");var e=function(){return r.monitorCurrentTime_()},n=function(){return r.monitorCurrentTime_()},s=function(){return r.techWaiting_()},o=function(){return r.cancelTimer_()},l=this.masterPlaylistController_,f=["main","subtitle","audio"],m={};f.forEach(function(y){m[y]={reset:function(){return r.resetSegmentDownloads_(y)},updateend:function(){return r.checkSegmentDownloads_(y)}},l[y+"SegmentLoader_"].on("appendsdone",m[y].updateend),l[y+"SegmentLoader_"].on("playlistupdate",m[y].reset),r.tech_.on(["seeked","seeking"],m[y].reset)});var v=function(E){["main","audio"].forEach(function(I){l[I+"SegmentLoader_"][E]("appended",r.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){r.fixesBadSeeks_()&&(r.consecutiveUpdates=0,r.lastRecordedTime=r.tech_.currentTime(),v("off"))},this.clearSeekingAppendCheck_=function(){return v("off")},this.watchForBadSeeking_=function(){r.clearSeekingAppendCheck_(),v("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(vb,o),this.tech_.on("canplay",n),this.tech_.one("play",e),this.dispose=function(){r.clearSeekingAppendCheck_(),r.logger_("dispose"),r.tech_.off("waiting",s),r.tech_.off(vb,o),r.tech_.off("canplay",n),r.tech_.off("play",e),r.tech_.off("seeking",r.watchForBadSeeking_),r.tech_.off("seeked",r.clearSeekingAppendCheck_),f.forEach(function(y){l[y+"SegmentLoader_"].off("appendsdone",m[y].updateend),l[y+"SegmentLoader_"].off("playlistupdate",m[y].reset),r.tech_.off(["seeked","seeking"],m[y].reset)}),r.checkCurrentTimeTimeout_&&F.clearTimeout(r.checkCurrentTimeTimeout_),r.cancelTimer_()}}var t=a.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&F.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=F.setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(r){var e=this.masterPlaylistController_[r+"SegmentLoader_"];this[r+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+r+" loader"),this[r+"StalledDownloads_"]=0,this[r+"Buffered_"]=e.buffered_()},t.checkSegmentDownloads_=function(r){var e=this.masterPlaylistController_,n=e[r+"SegmentLoader_"],s=n.buffered_(),o=FB(this[r+"Buffered_"],s);if(this[r+"Buffered_"]=s,o){this.resetSegmentDownloads_(r);return}this[r+"StalledDownloads_"]++,this.logger_("found #"+this[r+"StalledDownloads_"]+" "+r+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:po(s)}),!(this[r+"StalledDownloads_"]<10)&&(this.logger_(r+" loader stalled download exclusion"),this.resetSegmentDownloads_(r),this.tech_.trigger({type:"usage",name:"vhs-"+r+"-download-exclusion"}),r!=="subtitle"&&e.blacklistCurrentPlaylist({message:"Excessive "+r+" segment downloading detected."},1/0))},t.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var r=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===r&&(!e.length||r+Jn>=e.end(e.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&r===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):r===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=r)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){var r=this.tech_.seeking();if(!r)return!1;var e=this.seekable(),n=this.tech_.currentTime(),s=this.afterSeekableWindow_(e,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(s){var l=e.end(e.length-1);o=l}if(this.beforeSeekableWindow_(e,n)){var f=e.start(0);o=f+(f===e.end(0)?0:Jn)}if(typeof o<"u")return this.logger_("Trying to seek outside of seekable at time "+n+" with "+("seekable range "+t1(e)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var m=this.masterPlaylistController_.sourceUpdater_,v=this.tech_.buffered(),y=m.audioBuffer?m.audioBuffered():null,E=m.videoBuffer?m.videoBuffered():null,I=this.media(),O=I.partTargetDuration?I.partTargetDuration:(I.targetDuration-ws)*2,D=[y,E],R=0;R<D.length;R++)if(D[R]){var H=r0(D[R],n);if(H<O)return!1}var Z=fc(v,n);return Z.length===0?!1:(o=Z.start(0)+Jn,this.logger_("Buffered region starts ("+Z.start(0)+") "+(" just beyond seek point ("+n+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},t.waiting_=function(){if(!this.techWaiting_()){var r=this.tech_.currentTime(),e=this.tech_.buffered(),n=wu(e,r);if(n.length&&r+3<=n.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(r),this.logger_("Stopped at "+r+" while inside a buffered region "+("["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},t.techWaiting_=function(){var r=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(r,e)){var n=r.end(r.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to "+("live point (seekable end) "+n)),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var s=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),l=this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:e});if(l)return this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var f=fc(o,e);if(f.length>0){var m=f.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+m+", seeking "+("to "+f.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),m*1e3,e),!0}return!1},t.afterSeekableWindow_=function(r,e,n,s){if(s===void 0&&(s=!1),!r.length)return!1;var o=r.end(r.length-1)+Jn,l=!n.endList;return l&&s&&(o=r.end(r.length-1)+n.targetDuration*3),e>o},t.beforeSeekableWindow_=function(r,e){return!!(r.length&&r.start(0)>0&&e<r.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(r){var e=r.videoBuffered,n=r.audioBuffered,s=r.currentTime;if(e){var o;if(e.length&&n.length){var l=wu(e,s-3),f=wu(e,s),m=wu(n,s);m.length&&!f.length&&l.length&&(o={start:l.end(0),end:m.end(0)})}else{var v=fc(e,s);v.length||(o=this.gapFromVideoUnderflow_(e,s))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+s)),!0):!1}},t.skipTheGap_=function(r){var e=this.tech_.buffered(),n=this.tech_.currentTime(),s=fc(e,n);this.cancelTimer_(),!(s.length===0||n!==r)&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",r,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+ws),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(r,e){for(var n=kB(r),s=0;s<n.length;s++){var o=n.start(s),l=n.end(s);if(e-o<4&&e-o>2)return{start:o,end:l}}return null},a}(),G2={errorInterval:30,getSource:function(t){var i=this.tech({IWillNotUseThisInPlugins:!0}),r=i.currentSource_||this.currentSource();return t(r)}},z2=function a(t,i){var r=0,e=0,n=N.mergeOptions(G2,i);t.ready(function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){e&&t.currentTime(e)},o=function(y){y!=null&&(e=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(y),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},l=function(){if(Date.now()-r<n.errorInterval*1e3){t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),t.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!n.getSource||typeof n.getSource!="function"){N.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return r=Date.now(),n.getSource.call(t,o)},f=function v(){t.off("loadedmetadata",s),t.off("error",l),t.off("dispose",v)},m=function(y){f(),a(t,y)};t.on("error",l),t.on("dispose",f),t.reloadSourceOnError=m},K2=function(t){z2(this,t)},B1="2.16.2",X2="6.0.1",Q2="0.22.1",Y2="4.8.0",J2="3.1.3",Ii={PlaylistLoader:Cu,Playlist:hr,utils:oj,STANDARD_PLAYLIST_SELECTOR:ob,INITIAL_PLAYLIST_SELECTOR:Qj,lastBandwidthSelector:ob,movingAverageBandwidthSelector:Kj,comparePlaylistBandwidth:l0,comparePlaylistResolution:zj,xhr:g1()};Object.keys(pi).forEach(function(a){Object.defineProperty(Ii,a,{get:function(){return N.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),pi[a]},set:function(i){if(N.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),typeof i!="number"||i<0){N.log.warn("value of Vhs."+a+" must be greater than or equal to 0");return}pi[a]=i}})});var j1="videojs-vhs",V1=function(t,i){for(var r=i.media(),e=-1,n=0;n<t.length;n++)if(t[n].id===r.id){e=n;break}t.selectedIndex_=e,t.trigger({selectedIndex:e,type:"change"})},Z2=function(t,i){i.representations().forEach(function(r){t.addQualityLevel(r)}),V1(t,i.playlists)};Ii.canPlaySource=function(){return N.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var e3=function(t,i,r){if(!t)return t;var e={};i&&i.attributes&&i.attributes.CODECS&&(e=ah(li(i.attributes.CODECS))),r&&r.attributes&&r.attributes.CODECS&&(e.audio=r.attributes.CODECS);var n=Fa(e.video),s=Fa(e.audio),o={};for(var l in t)o[l]={},s&&(o[l].audioContentType=s),n&&(o[l].videoContentType=n),i.contentProtection&&i.contentProtection[l]&&i.contentProtection[l].pssh&&(o[l].pssh=i.contentProtection[l].pssh),typeof t[l]=="string"&&(o[l].url=t[l]);return N.mergeOptions(t,o)},t3=function(t,i){return t.reduce(function(r,e){if(!e.contentProtection)return r;var n=i.reduce(function(s,o){var l=e.contentProtection[o];return l&&l.pssh&&(s[o]={pssh:l.pssh}),s},{});return Object.keys(n).length&&r.push(n),r},[])},i3=function(t){var i=t.player,r=t.sourceKeySystems,e=t.audioMedia,n=t.mainPlaylists;if(!i.eme.initializeMediaKeys)return Promise.resolve();var s=e?n.concat([e]):n,o=t3(s,Object.keys(r)),l=[],f=[];return o.forEach(function(m){f.push(new Promise(function(v,y){i.tech_.one("keysessioncreated",v)})),l.push(new Promise(function(v,y){i.eme.initializeMediaKeys({keySystems:m},function(E){if(E){y(E);return}v()})}))}),Promise.race([Promise.all(l),Promise.race(f)])},r3=function(t){var i=t.player,r=t.sourceKeySystems,e=t.media,n=t.audioMedia,s=e3(r,e,n);return s?(i.currentSource().keySystems=s,s&&!i.eme?(N.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},H1=function(){if(!F.localStorage)return null;var t=F.localStorage.getItem(j1);if(!t)return null;try{return JSON.parse(t)}catch{return null}},n3=function(t){if(!F.localStorage)return!1;var i=H1();i=i?N.mergeOptions(i,t):t;try{F.localStorage.setItem(j1,JSON.stringify(i))}catch{return!1}return i},a3=function(t){return t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(t.substring(t.indexOf(",")+1)):t};Ii.supportsNativeHls=function(){if(!Se||!Se.createElement)return!1;var a=Se.createElement("video");if(!N.getTech("Html5").isSupported())return!1;var t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return t.some(function(i){return/maybe|probably/i.test(a.canPlayType(i))})}();Ii.supportsNativeDash=function(){return!Se||!Se.createElement||!N.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Se.createElement("video").canPlayType("application/dash+xml"))}();Ii.supportsTypeNatively=function(a){return a==="hls"?Ii.supportsNativeHls:a==="dash"?Ii.supportsNativeDash:!1};Ii.isSupported=function(){return N.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var s3=N.getComponent("Component"),f0=function(a){Ae(t,a);function t(r,e,n){var s;if(s=a.call(this,e,N.mergeOptions(n.hls,n.vhs))||this,n.hls&&Object.keys(n.hls).length&&N.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof n.initialBandwidth=="number"&&(s.options_.bandwidth=n.initialBandwidth),s.logger_=On("VhsHandler"),e.options_&&e.options_.playerId){var o=N(e.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return N.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"hls-player-access"}),Ue(s)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return N.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"vhs-player-access"}),Ue(s)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return N.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Ue(s)},configurable:!0}),s.player_=o}if(s.tech_=e,s.source_=r,s.stats={},s.ignoreNextSeekingEvent_=!1,s.setOptions_(),s.options_.overrideNative&&e.overrideNativeAudioTracks&&e.overrideNativeVideoTracks)e.overrideNativeAudioTracks(!0),e.overrideNativeVideoTracks(!0);else if(s.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(Se,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(l){var f=Se.fullscreenElement||Se.webkitFullscreenElement||Se.mozFullScreenElement||Se.msFullscreenElement;f&&f.contains(s.tech_.el())?s.masterPlaylistController_.fastQualityChange_():s.masterPlaylistController_.checkABR_()}),s.on(s.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),s.on(s.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}var i=t.prototype;return i.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var n=H1();n&&n.bandwidth&&(this.options_.bandwidth=n.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),n&&n.throughput&&(this.options_.throughput=n.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=pi.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===pi.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(s){typeof e.source_[s]<"u"&&(e.options_[s]=e.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},i.src=function(e,n){var s=this;if(e){this.setOptions_(),this.options_.src=a3(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Ii,this.options_.sourceType=Mh(n),this.options_.seekTo=function(f){s.tech_.setCurrentTime(f)},this.options_.smoothQualityChange&&N.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new V2(this.options_);var o=N.mergeOptions({liveRangeSafeTimeDelta:Jn},this.options_,{seekable:function(){return s.seekable()},media:function(){return s.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new q2(o),this.masterPlaylistController_.on("error",function(){var f=N.players[s.tech_.options_.playerId],m=s.masterPlaylistController_.error;typeof m=="object"&&!m.code?m.code=3:typeof m=="string"&&(m={message:m,code:3}),f.error(m)});var l=this.options_.experimentalBufferBasedABR?Ii.movingAverageBandwidthSelector(.55):Ii.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):l.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Ii.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(m){this.masterPlaylistController_.selectPlaylist=m.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(m){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=m,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var m=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,v=F.navigator.connection||F.navigator.mozConnection||F.navigator.webkitConnection,y=1e7;if(this.options_.useNetworkInformationApi&&v){var E=v.downlink*1e3*1e3;E>=y&&m>=y?m=Math.max(m,E):m=E}return m},set:function(m){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=m,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var m=1/(this.bandwidth||1),v;this.throughput>0?v=1/this.throughput:v=0;var y=Math.floor(1/(m+v));return y},set:function(){N.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return s.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return s.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return s.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return s.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return s.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return s.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return po(s.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return s.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return s.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return s.tech_.name_},enumerable:!0},duration:{get:function(){return s.tech_.duration()},enumerable:!0},master:{get:function(){return s.playlists.master},enumerable:!0},playerDimensions:{get:function(){return s.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return po(s.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return s.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){s.options_.useBandwidthFromLocalStorage&&n3({bandwidth:s.bandwidth,throughput:Math.round(s.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){W2(s)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){s.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=F.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},i.createKeySessions_=function(){var e=this,n=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),i3({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:n&&n.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(s){e.logger_("error while creating EME key session",s),e.player_.error({message:"Failed to initialize media keys for EME",code:3})})},i.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},i.setupEme_=function(){var e=this,n=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=r3({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:n&&n.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var l=e.masterPlaylistController_.master();if(!(!l||!l.playlists)){var f=[];if(l.playlists.forEach(function(v){v&&v.attributes&&v.attributes.RESOLUTION&&v.attributes.RESOLUTION.height>=720&&(!v.excludeUntil||v.excludeUntil<1/0)&&(v.excludeUntil=1/0,f.push(v))}),f.length){var m;(m=N.log).warn.apply(m,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(f)),e.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),N.browser.IE_VERSION===11||!s){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},i.setupQualityLevels_=function(){var e=this,n=N.players[this.tech_.options_.playerId];!n||!n.qualityLevels||this.qualityLevels_||(this.qualityLevels_=n.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){Z2(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){V1(e.qualityLevels_,e.playlists)}))},t.version=function(){return{"@videojs/http-streaming":B1,"mux.js":X2,"mpd-parser":Q2,"m3u8-parser":Y2,"aes-decrypter":J2}},i.version=function(){return this.constructor.version()},i.canChangeType=function(){return U1.canChangeType()},i.play=function(){this.masterPlaylistController_.play()},i.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},i.duration=function(){return this.masterPlaylistController_.duration()},i.seekable=function(){return this.masterPlaylistController_.seekable()},i.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&F.URL.revokeObjectURL&&(F.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),a.prototype.dispose.call(this)},i.convertToProgramTime=function(e,n){return pj({playlist:this.masterPlaylistController_.media(),time:e,callback:n})},i.seekToProgramTime=function(e,n,s,o){return s===void 0&&(s=!0),o===void 0&&(o=2),mj({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:n})},t}(s3),Yd={name:"videojs-http-streaming",VERSION:B1,canHandleSource:function(t,i){i===void 0&&(i={});var r=N.mergeOptions(N.options,i);return Yd.canPlayType(t.type,r)},handleSource:function(t,i,r){r===void 0&&(r={});var e=N.mergeOptions(N.options,r);return i.vhs=new f0(t,i,e),N.hasOwnProperty("hls")||Object.defineProperty(i,"hls",{get:function(){return N.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),i.vhs},configurable:!0}),i.vhs.xhr=g1(),i.vhs.src(t.src,t.type),i.vhs},canPlayType:function(t,i){var r=Mh(t);if(!r)return"";var e=Yd.getOverrideNative(i),n=Ii.supportsTypeNatively(r),s=!n||e;return s?"maybe":""},getOverrideNative:function(t){t===void 0&&(t={});var i=t,r=i.vhs,e=r===void 0?{}:r,n=i.hls,s=n===void 0?{}:n,o=!(N.browser.IS_ANY_SAFARI||N.browser.IS_IOS),l=e.overrideNative,f=l===void 0?o:l,m=s.overrideNative,v=m===void 0?!1:m;return v||f}},o3=function(){return _s("avc1.4d400d,mp4a.40.2")};o3()&&N.getTech("Html5").registerSourceHandler(Yd,0);N.VhsHandler=f0;Object.defineProperty(N,"HlsHandler",{get:function(){return N.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),f0},configurable:!0});N.VhsSourceHandler=Yd;Object.defineProperty(N,"HlsSourceHandler",{get:function(){return N.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Yd},configurable:!0});N.Vhs=Ii;Object.defineProperty(N,"Hls",{get:function(){return N.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Ii},configurable:!0});N.use||(N.registerComponent("Hls",Ii),N.registerComponent("Vhs",Ii));N.options.vhs=N.options.vhs||{};N.options.hls=N.options.hls||{};if(!N.getPlugin||!N.getPlugin("reloadSourceOnError")){var u3=N.registerPlugin||N.plugin;u3("reloadSourceOnError",K2)}var En=nf,lh=function(t,i,r){return t&&r&&r.responseURL&&i!==r.responseURL?r.responseURL:i},Dn=function(t){return N.log.debug?N.log.debug.bind(N,"VHS:",t+" >"):function(){}},Cs=1/30,ea=Cs*3,$1=function(t,i){var r=[],e;if(t&&t.length)for(e=0;e<t.length;e++)i(t.start(e),t.end(e))&&r.push([t.start(e),t.end(e)]);return N.createTimeRanges(r)},Au=function(t,i){return $1(t,function(r,e){return r-ea<=i&&e+ea>=i})},pc=function(t,i){return $1(t,function(r){return r-Cs>=i})},l3=function(t){if(t.length<2)return N.createTimeRanges();for(var i=[],r=1;r<t.length;r++){var e=t.end(r-1),n=t.start(r);i.push([e,n])}return N.createTimeRanges(i)},d3=function(t,i){var r=null,e=null,n=0,s=[],o=[];if(!t||!t.length||!i||!i.length)return N.createTimeRange();for(var l=t.length;l--;)s.push({time:t.start(l),type:"start"}),s.push({time:t.end(l),type:"end"});for(l=i.length;l--;)s.push({time:i.start(l),type:"start"}),s.push({time:i.end(l),type:"end"});for(s.sort(function(f,m){return f.time-m.time}),l=0;l<s.length;l++)s[l].type==="start"?(n++,n===2&&(r=s[l].time)):s[l].type==="end"&&(n--,n===1&&(e=s[l].time)),r!==null&&e!==null&&(o.push([r,e]),r=null,e=null);return N.createTimeRanges(o)},W1=function(t){var i=[];if(!t||!t.length)return"";for(var r=0;r<t.length;r++)i.push(t.start(r)+" => "+t.end(r));return i.join(", ")},f3=function(t,i,r){r===void 0&&(r=1);var e=t.length?t.end(t.length-1):0;return(e-i)/r},mo=function(t){for(var i=[],r=0;r<t.length;r++)i.push({start:t.start(r),end:t.end(r)});return i},c3=function(t,i){if(t===i)return!1;if(!t&&i||!i&&t||t.length!==i.length)return!0;for(var r=0;r<t.length;r++)if(t.start(r)!==i.start(r)||t.end(r)!==i.end(r))return!0;return!1},_b=function(t){if(!(!t||!t.length||!t.end))return t.end(t.length-1)},c0=function(t,i){var r=0;if(!t||!t.length)return r;for(var e=0;e<t.length;e++){var n=t.start(e),s=t.end(e);if(!(i>s)){if(i>n&&i<=s){r+=s-i;continue}r+=s-n}}return r},yb=N.createTimeRange,h0=function(t,i){if(!i.preload)return i.duration;var r=0;return(i.parts||[]).forEach(function(e){r+=e.duration}),(i.preloadHints||[]).forEach(function(e){e.type==="PART"&&(r+=t.partTargetDuration)}),r},bg=function(t){return(t.segments||[]).reduce(function(i,r,e){return r.parts?r.parts.forEach(function(n,s){i.push({duration:n.duration,segmentIndex:e,partIndex:s,part:n,segment:r})}):i.push({duration:r.duration,segmentIndex:e,partIndex:null,segment:r,part:null}),i},[])},q1=function(t){var i=t.segments&&t.segments.length&&t.segments[t.segments.length-1];return i&&i.parts||[]},G1=function(t){var i=t.preloadSegment;if(i){var r=i.parts,e=i.preloadHints,n=(e||[]).reduce(function(s,o){return s+(o.type==="PART"?1:0)},0);return n+=r&&r.length?r.length:0,n}},z1=function(t,i){if(i.endList)return 0;if(t&&t.suggestedPresentationDelay)return t.suggestedPresentationDelay;var r=q1(i).length>0;return r&&i.serverControl&&i.serverControl.partHoldBack?i.serverControl.partHoldBack:r&&i.partTargetDuration?i.partTargetDuration*3:i.serverControl&&i.serverControl.holdBack?i.serverControl.holdBack:i.targetDuration?i.targetDuration*3:0},h3=function(t,i){var r=0,e=i-t.mediaSequence,n=t.segments[e];if(n){if(typeof n.start<"u")return{result:n.start,precise:!0};if(typeof n.end<"u")return{result:n.end-n.duration,precise:!0}}for(;e--;){if(n=t.segments[e],typeof n.end<"u")return{result:r+n.end,precise:!0};if(r+=h0(t,n),typeof n.start<"u")return{result:r+n.start,precise:!0}}return{result:r,precise:!1}},p3=function(t,i){for(var r=0,e,n=i-t.mediaSequence;n<t.segments.length;n++){if(e=t.segments[n],typeof e.start<"u")return{result:e.start-r,precise:!0};if(r+=h0(t,e),typeof e.end<"u")return{result:e.end-r,precise:!0}}return{result:-1,precise:!1}},K1=function(t,i,r){if(typeof i>"u"&&(i=t.mediaSequence+t.segments.length),i<t.mediaSequence)return 0;var e=h3(t,i);if(e.precise)return e.result;var n=p3(t,i);return n.precise?n.result:e.result+r},X1=function(t,i,r){if(!t)return 0;if(typeof r!="number"&&(r=0),typeof i>"u"){if(t.totalDuration)return t.totalDuration;if(!t.endList)return F.Infinity}return K1(t,i,r)},Ld=function(t){var i=t.defaultDuration,r=t.durationList,e=t.startIndex,n=t.endIndex,s=0;if(e>n){var o=[n,e];e=o[0],n=o[1]}if(e<0){for(var l=e;l<Math.min(0,n);l++)s+=i;e=0}for(var f=e;f<n;f++)s+=r[f].duration;return s},Q1=function(t,i,r,e){if(!t||!t.segments)return null;if(t.endList)return X1(t);if(i===null)return null;i=i||0;var n=K1(t,t.mediaSequence+t.segments.length,i);return r&&(e=typeof e=="number"?e:z1(null,t),n-=e),Math.max(0,n)},m3=function(t,i,r){var e=!0,n=i||0,s=Q1(t,i,e,r);return s===null?yb():yb(n,s)},g3=function(t){for(var i=t.playlist,r=t.currentTime,e=t.startingSegmentIndex,n=t.startingPartIndex,s=t.startTime,o=t.experimentalExactManifestTimings,l=r-s,f=bg(i),m=0,v=0;v<f.length;v++){var y=f[v];if(e===y.segmentIndex&&!(typeof n=="number"&&typeof y.partIndex=="number"&&n!==y.partIndex)){m=v;break}}if(l<0){if(m>0)for(var E=m-1;E>=0;E--){var I=f[E];if(l+=I.duration,o){if(l<0)continue}else if(l+Cs<=0)continue;return{partIndex:I.partIndex,segmentIndex:I.segmentIndex,startTime:s-Ld({defaultDuration:i.targetDuration,durationList:f,startIndex:m,endIndex:E})}}return{partIndex:f[0]&&f[0].partIndex||null,segmentIndex:f[0]&&f[0].segmentIndex||0,startTime:r}}if(m<0){for(var O=m;O<0;O++)if(l-=i.targetDuration,l<0)return{partIndex:f[0]&&f[0].partIndex||null,segmentIndex:f[0]&&f[0].segmentIndex||0,startTime:r};m=0}for(var D=m;D<f.length;D++){var R=f[D];if(l-=R.duration,o){if(l>0)continue}else if(l-Cs>=0)continue;return{partIndex:R.partIndex,segmentIndex:R.segmentIndex,startTime:s+Ld({defaultDuration:i.targetDuration,durationList:f,startIndex:m,endIndex:D})}}return{segmentIndex:f[f.length-1].segmentIndex,partIndex:f[f.length-1].partIndex,startTime:r}},Y1=function(t){return t.excludeUntil&&t.excludeUntil>Date.now()},p0=function(t){return t.excludeUntil&&t.excludeUntil===1/0},Zh=function(t){var i=Y1(t);return!t.disabled&&!i},v3=function(t){return t.disabled},_3=function(t){for(var i=0;i<t.segments.length;i++)if(t.segments[i].key)return!0;return!1},J1=function(t,i){return i.attributes&&i.attributes[t]},y3=function(t,i,r,e){if(e===void 0&&(e=0),!J1("BANDWIDTH",r))return NaN;var n=t*r.attributes.BANDWIDTH;return(n-e*8)/i},xg=function(t,i){if(t.playlists.length===1)return!0;var r=i.attributes.BANDWIDTH||Number.MAX_VALUE;return t.playlists.filter(function(e){return Zh(e)?(e.attributes.BANDWIDTH||0)<r:!1}).length===0},m0=function(t,i){return!t&&!i||!t&&i||t&&!i?!1:!!(t===i||t.id&&i.id&&t.id===i.id||t.resolvedUri&&i.resolvedUri&&t.resolvedUri===i.resolvedUri||t.uri&&i.uri&&t.uri===i.uri)},Tb=function(t,i){var r=t&&t.mediaGroups&&t.mediaGroups.AUDIO||{},e=!1;for(var n in r){for(var s in r[n])if(e=i(r[n][s]),e)break;if(e)break}return!!e},vf=function(t){if(!t||!t.playlists||!t.playlists.length){var i=Tb(t,function(s){return s.playlists&&s.playlists.length||s.uri});return i}for(var r=function(o){var l=t.playlists[o],f=l.attributes&&l.attributes.CODECS;if(f&&f.split(",").every(function(v){return ov(v)}))return"continue";var m=Tb(t,function(v){return m0(l,v)});return m?"continue":{v:!1}},e=0;e<t.playlists.length;e++){var n=r(e);if(n!=="continue"&&typeof n=="object")return n.v}return!0},pr={liveEdgeDelay:z1,duration:X1,seekable:m3,getMediaInfoForTime:g3,isEnabled:Zh,isDisabled:v3,isBlacklisted:Y1,isIncompatible:p0,playlistEnd:Q1,isAes:_3,hasAttribute:J1,estimateSegmentRequestTime:y3,isLowestEnabledRendition:xg,isAudioOnly:vf,playlistMatch:m0,segmentDurationWithParts:h0},Z1=N.log,g0=function(t,i){return t+"-"+i},T3=function(t,i,r){return"placeholder-uri-"+t+"-"+i+"-"+r},b3=function(t){var i=t.onwarn,r=t.oninfo,e=t.manifestString,n=t.customTagParsers,s=n===void 0?[]:n,o=t.customTagMappers,l=o===void 0?[]:o,f=t.experimentalLLHLS,m=new Qx;i&&m.on("warn",i),r&&m.on("info",r),s.forEach(function(O){return m.addParser(O)}),l.forEach(function(O){return m.addTagMapper(O)}),m.push(e),m.end();var v=m.manifest;if(f||(["preloadSegment","skip","serverControl","renditionReports","partInf","partTargetDuration"].forEach(function(O){v.hasOwnProperty(O)&&delete v[O]}),v.segments&&v.segments.forEach(function(O){["parts","preloadHints"].forEach(function(D){O.hasOwnProperty(D)&&delete O[D]})})),!v.targetDuration){var y=10;v.segments&&v.segments.length&&(y=v.segments.reduce(function(O,D){return Math.max(O,D.duration)},0)),i&&i("manifest has no targetDuration defaulting to "+y),v.targetDuration=y}var E=q1(v);if(E.length&&!v.partTargetDuration){var I=E.reduce(function(O,D){return Math.max(O,D.duration)},0);i&&(i("manifest has no partTargetDuration defaulting to "+I),Z1.error("LL-HLS manifest has parts but lacks required #EXT-X-PART-INF:PART-TARGET value. See https://datatracker.ietf.org/doc/html/draft-pantos-hls-rfc8216bis-09#section-4.4.3.7. Playback is not guaranteed.")),v.partTargetDuration=I}return v},ul=function(t,i){t.mediaGroups&&["AUDIO","SUBTITLES"].forEach(function(r){if(t.mediaGroups[r])for(var e in t.mediaGroups[r])for(var n in t.mediaGroups[r][e]){var s=t.mediaGroups[r][e][n];i(s,r,e,n)}})},ew=function(t){var i=t.playlist,r=t.uri,e=t.id;i.id=e,i.playlistErrors_=0,r&&(i.uri=r),i.attributes=i.attributes||{}},x3=function(t){for(var i=t.playlists.length;i--;){var r=t.playlists[i];ew({playlist:r,id:g0(i,r.uri)}),r.resolvedUri=En(t.uri,r.uri),t.playlists[r.id]=r,t.playlists[r.uri]=r,r.attributes.BANDWIDTH||Z1.warn("Invalid playlist STREAM-INF detected. Missing BANDWIDTH attribute.")}},S3=function(t){ul(t,function(i){i.uri&&(i.resolvedUri=En(t.uri,i.uri))})},E3=function(t,i){var r=g0(0,i),e={mediaGroups:{AUDIO:{},VIDEO:{},"CLOSED-CAPTIONS":{},SUBTITLES:{}},uri:F.location.href,resolvedUri:F.location.href,playlists:[{uri:i,id:r,resolvedUri:i,attributes:{}}]};return e.playlists[r]=e.playlists[0],e.playlists[i]=e.playlists[0],e},tw=function(t,i,r){r===void 0&&(r=T3),t.uri=i;for(var e=0;e<t.playlists.length;e++)if(!t.playlists[e].uri){var n="placeholder-uri-"+e;t.playlists[e].uri=n}var s=vf(t);ul(t,function(o,l,f,m){if(!o.playlists||!o.playlists.length){if(s&&l==="AUDIO"&&!o.uri)for(var v=0;v<t.playlists.length;v++){var y=t.playlists[v];if(y.attributes&&y.attributes.AUDIO&&y.attributes.AUDIO===f)return}o.playlists=[Ni({},o)]}o.playlists.forEach(function(E,I){var O=r(l,f,m,E),D=g0(I,O);E.uri?E.resolvedUri=E.resolvedUri||En(t.uri,E.uri):(E.uri=I===0?O:D,E.resolvedUri=E.uri),E.id=E.id||D,E.attributes=E.attributes||{},t.playlists[E.id]=E,t.playlists[E.uri]=E})}),x3(t),S3(t)},dh=N.mergeOptions,w3=N.EventTarget,C3=function(t,i){if(i.endList||!i.serverControl)return t;var r={};if(i.serverControl.canBlockReload){var e=i.preloadSegment,n=i.mediaSequence+i.segments.length;if(e){var s=e.parts||[],o=G1(i)-1;o>-1&&o!==s.length-1&&(r._HLS_part=o),(o>-1||s.length)&&n--}r._HLS_msn=n}if(i.serverControl&&i.serverControl.canSkipUntil&&(r._HLS_skip=i.serverControl.canSkipDateranges?"v2":"YES"),Object.keys(r).length){var l=new F.URL(t);["_HLS_skip","_HLS_msn","_HLS_part"].forEach(function(f){r.hasOwnProperty(f)&&l.searchParams.set(f,r[f])}),t=l.toString()}return t},A3=function(t,i){if(!t)return i;var r=dh(t,i);if(t.preloadHints&&!i.preloadHints&&delete r.preloadHints,t.parts&&!i.parts)delete r.parts;else if(t.parts&&i.parts)for(var e=0;e<i.parts.length;e++)t.parts&&t.parts[e]&&(r.parts[e]=dh(t.parts[e],i.parts[e]));return!t.skipped&&i.skipped&&(r.skipped=!1),t.preload&&!i.preload&&(r.preload=!1),r},I3=function(t,i,r){var e=t.slice(),n=i.slice();r=r||0;for(var s=[],o,l=0;l<n.length;l++){var f=e[l+r],m=n[l];f?(o=f.map||o,s.push(A3(f,m))):(o&&!m.map&&(m.map=o),s.push(m))}return s},iw=function(t,i){!t.resolvedUri&&t.uri&&(t.resolvedUri=En(i,t.uri)),t.key&&!t.key.resolvedUri&&(t.key.resolvedUri=En(i,t.key.uri)),t.map&&!t.map.resolvedUri&&(t.map.resolvedUri=En(i,t.map.uri)),t.map&&t.map.key&&!t.map.key.resolvedUri&&(t.map.key.resolvedUri=En(i,t.map.key.uri)),t.parts&&t.parts.length&&t.parts.forEach(function(r){r.resolvedUri||(r.resolvedUri=En(i,r.uri))}),t.preloadHints&&t.preloadHints.length&&t.preloadHints.forEach(function(r){r.resolvedUri||(r.resolvedUri=En(i,r.uri))})},rw=function(t){var i=t.segments||[],r=t.preloadSegment;if(r&&r.parts&&r.parts.length){if(r.preloadHints){for(var e=0;e<r.preloadHints.length;e++)if(r.preloadHints[e].type==="MAP")return i}r.duration=t.targetDuration,r.preload=!0,i.push(r)}return i},nw=function(t,i){return t===i||t.segments&&i.segments&&t.segments.length===i.segments.length&&t.endList===i.endList&&t.mediaSequence===i.mediaSequence&&t.preloadSegment===i.preloadSegment},Sg=function(t,i,r){r===void 0&&(r=nw);var e=dh(t,{}),n=e.playlists[i.id];if(!n||r(n,i))return null;i.segments=rw(i);var s=dh(n,i);if(s.preloadSegment&&!i.preloadSegment&&delete s.preloadSegment,n.segments){if(i.skip){i.segments=i.segments||[];for(var o=0;o<i.skip.skippedSegments;o++)i.segments.unshift({skipped:!0})}s.segments=I3(n.segments,i.segments,i.mediaSequence-n.mediaSequence)}s.segments.forEach(function(f){iw(f,s.resolvedUri)});for(var l=0;l<e.playlists.length;l++)e.playlists[l].id===i.id&&(e.playlists[l]=s);return e.playlists[i.id]=s,e.playlists[i.uri]=s,ul(t,function(f,m,v,y){if(f.playlists)for(var E=0;E<f.playlists.length;E++)i.id===f.playlists[E].id&&(f.playlists[E]=s)}),e},Eg=function(t,i){var r=t.segments||[],e=r[r.length-1],n=e&&e.parts&&e.parts[e.parts.length-1],s=n&&n.duration||e&&e.duration;return i&&s?s*1e3:(t.partTargetDuration||t.targetDuration||10)*500},Iu=function(a){Ae(t,a);function t(r,e,n){var s;if(n===void 0&&(n={}),s=a.call(this)||this,!r)throw new Error("A non-empty playlist URL or object is required");s.logger_=Dn("PlaylistLoader");var o=n,l=o.withCredentials,f=l===void 0?!1:l,m=o.handleManifestRedirects,v=m===void 0?!1:m;s.src=r,s.vhs_=e,s.withCredentials=f,s.handleManifestRedirects=v;var y=e.options_;return s.customTagParsers=y&&y.customTagParsers||[],s.customTagMappers=y&&y.customTagMappers||[],s.experimentalLLHLS=y&&y.experimentalLLHLS||!1,N.browser.IE_VERSION&&(s.experimentalLLHLS=!1),s.state="HAVE_NOTHING",s.handleMediaupdatetimeout_=s.handleMediaupdatetimeout_.bind(Ue(s)),s.on("mediaupdatetimeout",s.handleMediaupdatetimeout_),s}var i=t.prototype;return i.handleMediaupdatetimeout_=function(){var e=this;if(this.state==="HAVE_METADATA"){var n=this.media(),s=En(this.master.uri,n.uri);this.experimentalLLHLS&&(s=C3(s,n)),this.state="HAVE_CURRENT_METADATA",this.request=this.vhs_.xhr({uri:s,withCredentials:this.withCredentials},function(o,l){if(e.request){if(o)return e.playlistRequestError(e.request,e.media(),"HAVE_METADATA");e.haveMetadata({playlistString:e.request.responseText,url:e.media().uri,id:e.media().id})}})}},i.playlistRequestError=function(e,n,s){var o=n.uri,l=n.id;this.request=null,s&&(this.state=s),this.error={playlist:this.master.playlists[l],status:e.status,message:"HLS playlist request error at URL: "+o+".",responseText:e.responseText,code:e.status>=500?4:2},this.trigger("error")},i.parseManifest_=function(e){var n=this,s=e.url,o=e.manifestString;return b3({onwarn:function(f){var m=f.message;return n.logger_("m3u8-parser warn for "+s+": "+m)},oninfo:function(f){var m=f.message;return n.logger_("m3u8-parser info for "+s+": "+m)},manifestString:o,customTagParsers:this.customTagParsers,customTagMappers:this.customTagMappers,experimentalLLHLS:this.experimentalLLHLS})},i.haveMetadata=function(e){var n=e.playlistString,s=e.playlistObject,o=e.url,l=e.id;this.request=null,this.state="HAVE_METADATA";var f=s||this.parseManifest_({url:o,manifestString:n});f.lastRequest=Date.now(),ew({playlist:f,uri:o,id:l});var m=Sg(this.master,f);this.targetDuration=f.partTargetDuration||f.targetDuration,this.pendingMedia_=null,m?(this.master=m,this.media_=this.master.playlists[l]):this.trigger("playlistunchanged"),this.updateMediaUpdateTimeout_(Eg(this.media(),!!m)),this.trigger("loadedplaylist")},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),F.clearTimeout(this.mediaUpdateTimeout),F.clearTimeout(this.finalRenditionTimeout),this.off()},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e,n){var s=this;if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);if(typeof e=="string"){if(!this.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.master.playlists[e]}if(F.clearTimeout(this.finalRenditionTimeout),n){var o=(e.partTargetDuration||e.targetDuration)/2*1e3||5e3;this.finalRenditionTimeout=F.setTimeout(this.media.bind(this,e,!1),o);return}var l=this.state,f=!this.media_||e.id!==this.media_.id,m=this.master.playlists[e.id];if(m&&m.endList||e.endList&&e.segments.length){this.request&&(this.request.onreadystatechange=null,this.request.abort(),this.request=null),this.state="HAVE_METADATA",this.media_=e,f&&(this.trigger("mediachanging"),l==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange"));return}if(this.updateMediaUpdateTimeout_(Eg(e,!0)),!!f){if(this.state="SWITCHING_MEDIA",this.request){if(e.resolvedUri===this.request.url)return;this.request.onreadystatechange=null,this.request.abort(),this.request=null}this.media_&&this.trigger("mediachanging"),this.pendingMedia_=e,this.request=this.vhs_.xhr({uri:e.resolvedUri,withCredentials:this.withCredentials},function(v,y){if(s.request){if(e.lastRequest=Date.now(),e.resolvedUri=lh(s.handleManifestRedirects,e.resolvedUri,y),v)return s.playlistRequestError(s.request,e,l);s.haveMetadata({playlistString:y.responseText,url:e.uri,id:e.id}),l==="HAVE_MASTER"?s.trigger("loadedmetadata"):s.trigger("mediachange")}})}},i.pause=function(){this.mediaUpdateTimeout&&(F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),this.stopRequest(),this.state==="HAVE_NOTHING"&&(this.started=!1),this.state==="SWITCHING_MEDIA"?this.media_?this.state="HAVE_METADATA":this.state="HAVE_MASTER":this.state==="HAVE_CURRENT_METADATA"&&(this.state="HAVE_METADATA")},i.load=function(e){var n=this;this.mediaUpdateTimeout&&(F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null);var s=this.media();if(e){var o=s?(s.partTargetDuration||s.targetDuration)/2*1e3:5e3;this.mediaUpdateTimeout=F.setTimeout(function(){n.mediaUpdateTimeout=null,n.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?this.trigger("mediaupdatetimeout"):this.trigger("loadedplaylist")},i.updateMediaUpdateTimeout_=function(e){var n=this;this.mediaUpdateTimeout&&(F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null),!(!this.media()||this.media().endList)&&(this.mediaUpdateTimeout=F.setTimeout(function(){n.mediaUpdateTimeout=null,n.trigger("mediaupdatetimeout"),n.updateMediaUpdateTimeout_(e)},e))},i.start=function(){var e=this;if(this.started=!0,typeof this.src=="object"){this.src.uri||(this.src.uri=F.location.href),this.src.resolvedUri=this.src.uri,setTimeout(function(){e.setupInitialPlaylist(e.src)},0);return}this.request=this.vhs_.xhr({uri:this.src,withCredentials:this.withCredentials},function(n,s){if(e.request){if(e.request=null,n)return e.error={status:s.status,message:"HLS playlist request error at URL: "+e.src+".",responseText:s.responseText,code:2},e.state==="HAVE_NOTHING"&&(e.started=!1),e.trigger("error");e.src=lh(e.handleManifestRedirects,e.src,s);var o=e.parseManifest_({manifestString:s.responseText,url:e.src});e.setupInitialPlaylist(o)}})},i.srcUri=function(){return typeof this.src=="string"?this.src:this.src.uri},i.setupInitialPlaylist=function(e){if(this.state="HAVE_MASTER",e.playlists){this.master=e,tw(this.master,this.srcUri()),e.playlists.forEach(function(s){s.segments=rw(s),s.segments.forEach(function(o){iw(o,s.resolvedUri)})}),this.trigger("loadedplaylist"),this.request||this.media(this.master.playlists[0]);return}var n=this.srcUri()||F.location.href;this.master=E3(e,n),this.haveMetadata({playlistObject:e,url:n,id:this.master.playlists[0].id}),this.trigger("loadedmetadata")},t}(w3),P3=N.xhr,O3=N.mergeOptions,wg=function(t,i,r,e){var n=t.responseType==="arraybuffer"?t.response:t.responseText;!i&&n&&(t.responseTime=Date.now(),t.roundTripTime=t.responseTime-t.requestTime,t.bytesReceived=n.byteLength||n.length,t.bandwidth||(t.bandwidth=Math.floor(t.bytesReceived/t.roundTripTime*8*1e3))),r.headers&&(t.responseHeaders=r.headers),i&&i.code==="ETIMEDOUT"&&(t.timedout=!0),!i&&!t.aborted&&r.statusCode!==200&&r.statusCode!==206&&r.statusCode!==0&&(i=new Error("XHR Failed with a response of: "+(t&&(n||t.responseText)))),e(i,t)},aw=function(){var t=function i(r,e){r=O3({timeout:45e3},r);var n=i.beforeRequest||N.Vhs.xhr.beforeRequest;if(n&&typeof n=="function"){var s=n(r);s&&(r=s)}var o=N.Vhs.xhr.original===!0?P3:N.Vhs.xhr,l=o(r,function(m,v){return wg(l,m,v,e)}),f=l.abort;return l.abort=function(){return l.aborted=!0,f.apply(l,arguments)},l.uri=r.uri,l.requestTime=Date.now(),l};return t.original=!0,t},D3=function(t){var i,r=t.offset;return typeof t.offset=="bigint"||typeof t.length=="bigint"?i=F.BigInt(t.offset)+F.BigInt(t.length)-F.BigInt(1):i=t.offset+t.length-1,"bytes="+r+"-"+i},Cg=function(t){var i={};return t.byterange&&(i.Range=D3(t.byterange)),i},L3=function(t,i){return t.start(i)+"-"+t.end(i)},k3=function(t,i){var r=t.toString(16);return"00".substring(0,2-r.length)+r+(i%2?" ":"")},R3=function(t){return t>=32&&t<126?String.fromCharCode(t):"."},sw=function(t){var i={};return Object.keys(t).forEach(function(r){var e=t[r];uv(e)?i[r]={bytes:e.buffer,byteOffset:e.byteOffset,byteLength:e.byteLength}:i[r]=e}),i},fh=function(t){var i=t.byterange||{length:1/0,offset:0};return[i.length,i.offset,t.resolvedUri].join(",")},ow=function(t){return t.resolvedUri},uw=function(t){for(var i=Array.prototype.slice.call(t),r=16,e="",n,s,o=0;o<i.length/r;o++)n=i.slice(o*r,o*r+r).map(k3).join(""),s=i.slice(o*r,o*r+r).map(R3).join(""),e+=n+" "+s+`
`;return e},M3=function(t){var i=t.bytes;return uw(i)},F3=function(t){var i="",r;for(r=0;r<t.length;r++)i+=L3(t,r)+" ";return i},N3=Object.freeze({__proto__:null,createTransferableMessage:sw,initSegmentId:fh,segmentKeyId:ow,hexDump:uw,tagDump:M3,textRanges:F3}),lw=.25,U3=function(t,i){if(!i.dateTimeObject)return null;var r=i.videoTimingInfo.transmuxerPrependedSeconds,e=i.videoTimingInfo.transmuxedPresentationStart,n=e+r,s=t-n;return new Date(i.dateTimeObject.getTime()+s*1e3)},B3=function(t){return t.transmuxedPresentationEnd-t.transmuxedPresentationStart-t.transmuxerPrependedSeconds},j3=function(t,i){var r;try{r=new Date(t)}catch{return null}if(!i||!i.segments||i.segments.length===0)return null;var e=i.segments[0];if(r<e.dateTimeObject)return null;for(var n=0;n<i.segments.length-1;n++){e=i.segments[n];var s=i.segments[n+1].dateTimeObject;if(r<s)break}var o=i.segments[i.segments.length-1],l=o.dateTimeObject,f=o.videoTimingInfo?B3(o.videoTimingInfo):o.duration+o.duration*lw,m=new Date(l.getTime()+f*1e3);return r>m?null:(r>l&&(e=o),{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:pr.duration(i,i.mediaSequence+i.segments.indexOf(e)),type:e.videoTimingInfo?"accurate":"estimate"})},V3=function(t,i){if(!i||!i.segments||i.segments.length===0)return null;for(var r=0,e,n=0;n<i.segments.length&&(e=i.segments[n],r=e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationEnd:r+e.duration,!(t<=r));n++);var s=i.segments[i.segments.length-1];if(s.videoTimingInfo&&s.videoTimingInfo.transmuxedPresentationEnd<t)return null;if(t>r){if(t>r+s.duration*lw)return null;e=s}return{segment:e,estimatedStart:e.videoTimingInfo?e.videoTimingInfo.transmuxedPresentationStart:r-e.duration,type:e.videoTimingInfo?"accurate":"estimate"}},H3=function(t,i){var r,e;try{r=new Date(t),e=new Date(i)}catch{}var n=r.getTime(),s=e.getTime();return(s-n)/1e3},$3=function(t){if(!t.segments||t.segments.length===0)return!1;for(var i=0;i<t.segments.length;i++){var r=t.segments[i];if(!r.dateTimeObject)return!1}return!0},W3=function(t){var i=t.playlist,r=t.time,e=r===void 0?void 0:r,n=t.callback;if(!n)throw new Error("getProgramTime: callback must be provided");if(!i||e===void 0)return n({message:"getProgramTime: playlist and time must be provided"});var s=V3(e,i);if(!s)return n({message:"valid programTime was not found"});if(s.type==="estimate")return n({message:"Accurate programTime could not be determined. Please seek to e.seekTime and try again",seekTime:s.estimatedStart});var o={mediaSeconds:e},l=U3(e,s.segment);return l&&(o.programDateTime=l.toISOString()),n(null,o)},q3=function a(t){var i=t.programTime,r=t.playlist,e=t.retryCount,n=e===void 0?2:e,s=t.seekTo,o=t.pauseAfterSeek,l=o===void 0?!0:o,f=t.tech,m=t.callback;if(!m)throw new Error("seekToProgramTime: callback must be provided");if(typeof i>"u"||!r||!s)return m({message:"seekToProgramTime: programTime, seekTo and playlist must be provided"});if(!r.endList&&!f.hasStarted_)return m({message:"player must be playing a live stream to start buffering"});if(!$3(r))return m({message:"programDateTime tags must be provided in the manifest "+r.resolvedUri});var v=j3(i,r);if(!v)return m({message:i+" was not found in the stream"});var y=v.segment,E=H3(y.dateTimeObject,i);if(v.type==="estimate"){if(n===0)return m({message:i+" is not buffered yet. Try again"});s(v.estimatedStart+E),f.one("seeked",function(){a({programTime:i,playlist:r,retryCount:n-1,seekTo:s,pauseAfterSeek:l,tech:f,callback:m})});return}var I=y.start+E,O=function(){return m(null,f.currentTime())};f.one("seeked",O),l&&f.pause(),s(I)},bm=function(t,i){if(t.readyState===4)return i()},G3=function(t,i,r){var e=[],n,s=!1,o=function(y,E,I,O){return E.abort(),s=!0,r(y,E,I,O)},l=function(y,E){if(!s){if(y)return o(y,E,"",e);var I=E.responseText.substring(e&&e.byteLength||0,E.responseText.length);if(e=Zx(e,lv(I,!0)),n=n||Su(e),e.length<10||n&&e.length<n+2)return bm(E,function(){return o(y,E,"",e)});var O=Zu(e);return O==="ts"&&e.length<188?bm(E,function(){return o(y,E,"",e)}):!O&&e.length<376?bm(E,function(){return o(y,E,"",e)}):o(null,E,O,e)}},f={uri:t,beforeSend:function(y){y.overrideMimeType("text/plain; charset=x-user-defined"),y.addEventListener("progress",function(E){return E.total,E.loaded,wg(y,null,{statusCode:y.status},l)})}},m=i(f,function(v,y){return wg(m,v,y,l)});return m},z3=N.EventTarget,dw=N.mergeOptions,bb=function(t,i){if(!nw(t,i)||t.sidx&&i.sidx&&(t.sidx.offset!==i.sidx.offset||t.sidx.length!==i.sidx.length))return!1;if(!t.sidx&&i.sidx||t.sidx&&!i.sidx||t.segments&&!i.segments||!t.segments&&i.segments)return!1;if(!t.segments&&!i.segments)return!0;for(var r=0;r<t.segments.length;r++){var e=t.segments[r],n=i.segments[r];if(e.uri!==n.uri)return!1;if(!(!e.byterange&&!n.byterange)){var s=e.byterange,o=n.byterange;if(s&&!o||!s&&o||s.offset!==o.offset||s.length!==o.length)return!1}}return!0},K3=function(t,i,r,e){var n=e.attributes.NAME||r;return"placeholder-uri-"+t+"-"+i+"-"+n},X3=function(t){var i=t.masterXml,r=t.srcUrl,e=t.clientOffset,n=t.sidxMapping,s=t.previousManifest,o=MS(i,{manifestUri:r,clientOffset:e,sidxMapping:n,previousManifest:s});return tw(o,r,K3),o},Q3=function(t,i){ul(t,function(r,e,n,s){s in i.mediaGroups[e][n]||delete t.mediaGroups[e][n][s]})},Y3=function(t,i,r){for(var e=!0,n=dw(t,{duration:i.duration,minimumUpdatePeriod:i.minimumUpdatePeriod,timelineStarts:i.timelineStarts}),s=0;s<i.playlists.length;s++){var o=i.playlists[s];if(o.sidx){var l=Lo(o.sidx);r&&r[l]&&r[l].sidx&&lf(o,r[l].sidx,o.sidx.resolvedUri)}var f=Sg(n,o,bb);f&&(n=f,e=!1)}return ul(i,function(m,v,y,E){if(m.playlists&&m.playlists.length){var I=m.playlists[0].id,O=Sg(n,m.playlists[0],bb);O&&(n=O,E in n.mediaGroups[v][y]||(n.mediaGroups[v][y][E]=m),n.mediaGroups[v][y][E].playlists[0]=n.playlists[I],e=!1)}}),Q3(n,i),i.minimumUpdatePeriod!==t.minimumUpdatePeriod&&(e=!1),e?null:n},J3=function(t,i){var r=Boolean(!t.map&&!i.map),e=r||Boolean(t.map&&i.map&&t.map.byterange.offset===i.map.byterange.offset&&t.map.byterange.length===i.map.byterange.length);return e&&t.uri===i.uri&&t.byterange.offset===i.byterange.offset&&t.byterange.length===i.byterange.length},xb=function(t,i){var r={};for(var e in t){var n=t[e],s=n.sidx;if(s){var o=Lo(s);if(!i[o])break;var l=i[o].sidxInfo;J3(l,s)&&(r[o]=i[o])}}return r},Z3=function(t,i){var r=xb(t.playlists,i),e=r;return ul(t,function(n,s,o,l){if(n.playlists&&n.playlists.length){var f=n.playlists;e=dw(e,xb(f,i))}}),e},Ag=function(a){Ae(t,a);function t(r,e,n,s){var o;n===void 0&&(n={}),o=a.call(this)||this,o.masterPlaylistLoader_=s||Ue(o),s||(o.isMaster_=!0);var l=n,f=l.withCredentials,m=f===void 0?!1:f,v=l.handleManifestRedirects,y=v===void 0?!1:v;if(o.vhs_=e,o.withCredentials=m,o.handleManifestRedirects=y,!r)throw new Error("A non-empty playlist URL or object is required");return o.on("minimumUpdatePeriod",function(){o.refreshXml_()}),o.on("mediaupdatetimeout",function(){o.refreshMedia_(o.media().id)}),o.state="HAVE_NOTHING",o.loadedPlaylists_={},o.logger_=Dn("DashPlaylistLoader"),o.isMaster_?(o.masterPlaylistLoader_.srcUrl=r,o.masterPlaylistLoader_.sidxMapping_={}):o.childPlaylist_=r,o}var i=t.prototype;return i.requestErrored_=function(e,n,s){if(!this.request)return!0;if(this.request=null,e)return this.error=typeof e=="object"&&!(e instanceof Error)?e:{status:n.status,message:"DASH request error at URL: "+n.uri,response:n.response,code:2},s&&(this.state=s),this.trigger("error"),!0},i.addSidxSegments_=function(e,n,s){var o=this,l=e.sidx&&Lo(e.sidx);if(!e.sidx||!l||this.masterPlaylistLoader_.sidxMapping_[l]){this.mediaRequest_=F.setTimeout(function(){return s(!1)},0);return}var f=lh(this.handleManifestRedirects,e.sidx.resolvedUri),m=function(y,E){if(!o.requestErrored_(y,E,n)){var I=o.masterPlaylistLoader_.sidxMapping_,O;try{O=US($e(E.response).subarray(8))}catch(D){o.requestErrored_(D,E,n);return}return I[l]={sidxInfo:e.sidx,sidx:O},lf(e,O,e.sidx.resolvedUri),s(!0)}};this.request=G3(f,this.vhs_.xhr,function(v,y,E,I){if(v)return m(v,y);if(!E||E!=="mp4")return m({status:y.status,message:"Unsupported "+(E||"unknown")+" container type for sidx segment at URL: "+f,response:"",playlist:e,internal:!0,blacklistDuration:1/0,code:2},y);var O=e.sidx.byterange,D=O.offset,R=O.length;if(I.length>=R+D)return m(v,{response:I.subarray(D,D+R),status:y.status,uri:y.uri});o.request=o.vhs_.xhr({uri:f,responseType:"arraybuffer",headers:Cg({byterange:e.sidx.byterange})},m)})},i.dispose=function(){this.trigger("dispose"),this.stopRequest(),this.loadedPlaylists_={},F.clearTimeout(this.minimumUpdatePeriodTimeout_),F.clearTimeout(this.mediaRequest_),F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.mediaRequest_=null,this.minimumUpdatePeriodTimeout_=null,this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.off()},i.hasPendingRequest=function(){return this.request||this.mediaRequest_},i.stopRequest=function(){if(this.request){var e=this.request;this.request=null,e.onreadystatechange=null,e.abort()}},i.media=function(e){var n=this;if(!e)return this.media_;if(this.state==="HAVE_NOTHING")throw new Error("Cannot switch media playlist from "+this.state);var s=this.state;if(typeof e=="string"){if(!this.masterPlaylistLoader_.master.playlists[e])throw new Error("Unknown playlist URI: "+e);e=this.masterPlaylistLoader_.master.playlists[e]}var o=!this.media_||e.id!==this.media_.id;if(o&&this.loadedPlaylists_[e.id]&&this.loadedPlaylists_[e.id].endList){this.state="HAVE_METADATA",this.media_=e,o&&(this.trigger("mediachanging"),this.trigger("mediachange"));return}o&&(this.media_&&this.trigger("mediachanging"),this.addSidxSegments_(e,s,function(l){n.haveMetadata({startingState:s,playlist:e})}))},i.haveMetadata=function(e){var n=e.startingState,s=e.playlist;this.state="HAVE_METADATA",this.loadedPlaylists_[s.id]=s,this.mediaRequest_=null,this.refreshMedia_(s.id),n==="HAVE_MASTER"?this.trigger("loadedmetadata"):this.trigger("mediachange")},i.pause=function(){this.masterPlaylistLoader_.createMupOnMedia_&&(this.off("loadedmetadata",this.masterPlaylistLoader_.createMupOnMedia_),this.masterPlaylistLoader_.createMupOnMedia_=null),this.stopRequest(),F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null,this.isMaster_&&(F.clearTimeout(this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_),this.masterPlaylistLoader_.minimumUpdatePeriodTimeout_=null),this.state==="HAVE_NOTHING"&&(this.started=!1)},i.load=function(e){var n=this;F.clearTimeout(this.mediaUpdateTimeout),this.mediaUpdateTimeout=null;var s=this.media();if(e){var o=s?s.targetDuration/2*1e3:5e3;this.mediaUpdateTimeout=F.setTimeout(function(){return n.load()},o);return}if(!this.started){this.start();return}s&&!s.endList?(this.isMaster_&&!this.minimumUpdatePeriodTimeout_&&(this.trigger("minimumUpdatePeriod"),this.updateMinimumUpdatePeriodTimeout_()),this.trigger("mediaupdatetimeout")):this.trigger("loadedplaylist")},i.start=function(){var e=this;if(this.started=!0,!this.isMaster_){this.mediaRequest_=F.setTimeout(function(){return e.haveMaster_()},0);return}this.requestMaster_(function(n,s){e.haveMaster_(),!e.hasPendingRequest()&&!e.media_&&e.media(e.masterPlaylistLoader_.master.playlists[0])})},i.requestMaster_=function(e){var n=this;this.request=this.vhs_.xhr({uri:this.masterPlaylistLoader_.srcUrl,withCredentials:this.withCredentials},function(s,o){if(n.requestErrored_(s,o)){n.state==="HAVE_NOTHING"&&(n.started=!1);return}var l=o.responseText!==n.masterPlaylistLoader_.masterXml_;if(n.masterPlaylistLoader_.masterXml_=o.responseText,o.responseHeaders&&o.responseHeaders.date?n.masterLoaded_=Date.parse(o.responseHeaders.date):n.masterLoaded_=Date.now(),n.masterPlaylistLoader_.srcUrl=lh(n.handleManifestRedirects,n.masterPlaylistLoader_.srcUrl,o),l){n.handleMaster_(),n.syncClientServerClock_(function(){return e(o,l)});return}return e(o,l)})},i.syncClientServerClock_=function(e){var n=this,s=FS(this.masterPlaylistLoader_.masterXml_);if(s===null)return this.masterPlaylistLoader_.clientOffset_=this.masterLoaded_-Date.now(),e();if(s.method==="DIRECT")return this.masterPlaylistLoader_.clientOffset_=s.value-Date.now(),e();this.request=this.vhs_.xhr({uri:En(this.masterPlaylistLoader_.srcUrl,s.value),method:s.method,withCredentials:this.withCredentials},function(o,l){if(n.request){if(o)return n.masterPlaylistLoader_.clientOffset_=n.masterLoaded_-Date.now(),e();var f;s.method==="HEAD"?!l.responseHeaders||!l.responseHeaders.date?f=n.masterLoaded_:f=Date.parse(l.responseHeaders.date):f=Date.parse(l.responseText),n.masterPlaylistLoader_.clientOffset_=f-Date.now(),e()}})},i.haveMaster_=function(){this.state="HAVE_MASTER",this.isMaster_?this.trigger("loadedplaylist"):this.media_||this.media(this.childPlaylist_)},i.handleMaster_=function(){this.mediaRequest_=null;var e=this.masterPlaylistLoader_.master,n=X3({masterXml:this.masterPlaylistLoader_.masterXml_,srcUrl:this.masterPlaylistLoader_.srcUrl,clientOffset:this.masterPlaylistLoader_.clientOffset_,sidxMapping:this.masterPlaylistLoader_.sidxMapping_,previousManifest:e});e&&(n=Y3(e,n,this.masterPlaylistLoader_.sidxMapping_)),this.masterPlaylistLoader_.master=n||e;var s=this.masterPlaylistLoader_.master.locations&&this.masterPlaylistLoader_.master.locations[0];return s&&s!==this.masterPlaylistLoader_.srcUrl&&(this.masterPlaylistLoader_.srcUrl=s),(!e||n&&n.minimumUpdatePeriod!==e.minimumUpdatePeriod)&&this.updateMinimumUpdatePeriodTimeout_(),Boolean(n)},i.updateMinimumUpdatePeriodTimeout_=function(){var e=this.masterPlaylistLoader_;e.createMupOnMedia_&&(e.off("loadedmetadata",e.createMupOnMedia_),e.createMupOnMedia_=null),e.minimumUpdatePeriodTimeout_&&(F.clearTimeout(e.minimumUpdatePeriodTimeout_),e.minimumUpdatePeriodTimeout_=null);var n=e.master&&e.master.minimumUpdatePeriod;if(n===0&&(e.media()?n=e.media().targetDuration*1e3:(e.createMupOnMedia_=e.updateMinimumUpdatePeriodTimeout_,e.one("loadedmetadata",e.createMupOnMedia_))),typeof n!="number"||n<=0){n<0&&this.logger_("found invalid minimumUpdatePeriod of "+n+", not setting a timeout");return}this.createMUPTimeout_(n)},i.createMUPTimeout_=function(e){var n=this.masterPlaylistLoader_;n.minimumUpdatePeriodTimeout_=F.setTimeout(function(){n.minimumUpdatePeriodTimeout_=null,n.trigger("minimumUpdatePeriod"),n.createMUPTimeout_(e)},e)},i.refreshXml_=function(){var e=this;this.requestMaster_(function(n,s){s&&(e.media_&&(e.media_=e.masterPlaylistLoader_.master.playlists[e.media_.id]),e.masterPlaylistLoader_.sidxMapping_=Z3(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.sidxMapping_),e.addSidxSegments_(e.media(),e.state,function(o){e.refreshMedia_(e.media().id)}))})},i.refreshMedia_=function(e){var n=this;if(!e)throw new Error("refreshMedia_ must take a media id");this.media_&&this.isMaster_&&this.handleMaster_();var s=this.masterPlaylistLoader_.master.playlists,o=!this.media_||this.media_!==s[e];if(o?this.media_=s[e]:this.trigger("playlistunchanged"),!this.mediaUpdateTimeout){var l=function f(){n.media().endList||(n.mediaUpdateTimeout=F.setTimeout(function(){n.trigger("mediaupdatetimeout"),f()},Eg(n.media(),Boolean(o))))};l()}this.trigger("loadedplaylist")},t}(z3),mi={GOAL_BUFFER_LENGTH:30,MAX_GOAL_BUFFER_LENGTH:60,BACK_BUFFER_LENGTH:30,GOAL_BUFFER_LENGTH_RATE:1,INITIAL_BANDWIDTH:4194304,BANDWIDTH_VARIANCE:1.2,BUFFER_LOW_WATER_LINE:0,MAX_BUFFER_LOW_WATER_LINE:30,EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:16,BUFFER_LOW_WATER_LINE_RATE:1,BUFFER_HIGH_WATER_LINE:30},e8=function(t){for(var i=new Uint8Array(new ArrayBuffer(t.length)),r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i.buffer},fw=function(t){return t.on=t.addEventListener,t.off=t.removeEventListener,t},t8=function(t){try{return URL.createObjectURL(new Blob([t],{type:"application/javascript"}))}catch{var i=new BlobBuilder;return i.append(t),URL.createObjectURL(i.getBlob())}},cw=function(t){return function(){var i=t8(t),r=fw(new Worker(i));r.objURL=i;var e=r.terminate;return r.on=r.addEventListener,r.off=r.removeEventListener,r.terminate=function(){return URL.revokeObjectURL(i),e.call(this)},r}},hw=function(t){return"var browserWorkerPolyFill = "+fw.toString()+`;
browserWorkerPolyFill(self);
`+t},pw=function(t){return t.toString().replace(/^function.+?{/,"").slice(0,-1)},i8=hw(pw(function(){var a=function(){this.init=function(){var d={};this.on=function(p,h){d[p]||(d[p]=[]),d[p]=d[p].concat(h)},this.off=function(p,h){var g;return d[p]?(g=d[p].indexOf(h),d[p]=d[p].slice(),d[p].splice(g,1),g>-1):!1},this.trigger=function(p){var h,g,_,T;if(h=d[p],!!h)if(arguments.length===2)for(_=h.length,g=0;g<_;++g)h[g].call(this,arguments[1]);else{for(T=[],g=arguments.length,g=1;g<arguments.length;++g)T.push(arguments[g]);for(_=h.length,g=0;g<_;++g)h[g].apply(this,T)}},this.dispose=function(){d={}}}};a.prototype.pipe=function(x){return this.on("data",function(d){x.push(d)}),this.on("done",function(d){x.flush(d)}),this.on("partialdone",function(d){x.partialFlush(d)}),this.on("endedtimeline",function(d){x.endTimeline(d)}),this.on("reset",function(d){x.reset(d)}),x},a.prototype.push=function(x){this.trigger("data",x)},a.prototype.flush=function(x){this.trigger("done",x)},a.prototype.partialFlush=function(x){this.trigger("partialdone",x)},a.prototype.endTimeline=function(x){this.trigger("endedtimeline",x)},a.prototype.reset=function(x){this.trigger("reset",x)};var t=a,i=Math.pow(2,32),r=function(d){var p=new DataView(d.buffer,d.byteOffset,d.byteLength),h;return p.getBigUint64?(h=p.getBigUint64(0),h<Number.MAX_SAFE_INTEGER?Number(h):h):p.getUint32(0)*i+p.getUint32(4)},e={getUint64:r,MAX_UINT32:i},n=e.MAX_UINT32,s,o,l,f,m,v,y,E,I,O,D,R,H,Z,V,W,te,z,q,X,j,oe,re,se,he,le,pe,ne,fe,Ie,Ce,Xe,Be,Qe,Et,Tt;(function(){var x;if(re={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},!(typeof Uint8Array>"u")){for(x in re)re.hasOwnProperty(x)&&(re[x]=[x.charCodeAt(0),x.charCodeAt(1),x.charCodeAt(2),x.charCodeAt(3)]);se=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),le=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),he=new Uint8Array([0,0,0,1]),pe=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),ne=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),fe={video:pe,audio:ne},Xe=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),Ce=new Uint8Array([0,0,0,0,0,0,0,0]),Be=new Uint8Array([0,0,0,0,0,0,0,0]),Qe=Be,Et=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),Tt=Be,Ie=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),s=function(d){var p=[],h=0,g,_,T;for(g=1;g<arguments.length;g++)p.push(arguments[g]);for(g=p.length;g--;)h+=p[g].byteLength;for(_=new Uint8Array(h+8),T=new DataView(_.buffer,_.byteOffset,_.byteLength),T.setUint32(0,_.byteLength),_.set(d,4),g=0,h=8;g<p.length;g++)_.set(p[g],h),h+=p[g].byteLength;return _},o=function(){return s(re.dinf,s(re.dref,Xe))},l=function(d){return s(re.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,d.audioobjecttype<<3|d.samplingfrequencyindex>>>1,d.samplingfrequencyindex<<7|d.channelcount<<3,6,1,2]))},f=function(){return s(re.ftyp,se,he,se,le)},W=function(d){return s(re.hdlr,fe[d])},m=function(d){return s(re.mdat,d)},V=function(d){var p=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,d.duration>>>24&255,d.duration>>>16&255,d.duration>>>8&255,d.duration&255,85,196,0,0]);return d.samplerate&&(p[12]=d.samplerate>>>24&255,p[13]=d.samplerate>>>16&255,p[14]=d.samplerate>>>8&255,p[15]=d.samplerate&255),s(re.mdhd,p)},Z=function(d){return s(re.mdia,V(d),W(d.type),y(d))},v=function(d){return s(re.mfhd,new Uint8Array([0,0,0,0,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255]))},y=function(d){return s(re.minf,d.type==="video"?s(re.vmhd,Ie):s(re.smhd,Ce),o(),z(d))},E=function(d,p){for(var h=[],g=p.length;g--;)h[g]=X(p[g]);return s.apply(null,[re.moof,v(d)].concat(h))},I=function(d){for(var p=d.length,h=[];p--;)h[p]=R(d[p]);return s.apply(null,[re.moov,D(4294967295)].concat(h).concat(O(d)))},O=function(d){for(var p=d.length,h=[];p--;)h[p]=j(d[p]);return s.apply(null,[re.mvex].concat(h))},D=function(d){var p=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(d&4278190080)>>24,(d&16711680)>>16,(d&65280)>>8,d&255,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return s(re.mvhd,p)},te=function(d){var p=d.samples||[],h=new Uint8Array(4+p.length),g,_;for(_=0;_<p.length;_++)g=p[_].flags,h[_+4]=g.dependsOn<<4|g.isDependedOn<<2|g.hasRedundancy;return s(re.sdtp,h)},z=function(d){return s(re.stbl,q(d),s(re.stts,Tt),s(re.stsc,Qe),s(re.stsz,Et),s(re.stco,Be))},function(){var x,d;q=function(h){return s(re.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),h.type==="video"?x(h):d(h))},x=function(h){var g=h.sps||[],_=h.pps||[],T=[],w=[],S,P;for(S=0;S<g.length;S++)T.push((g[S].byteLength&65280)>>>8),T.push(g[S].byteLength&255),T=T.concat(Array.prototype.slice.call(g[S]));for(S=0;S<_.length;S++)w.push((_[S].byteLength&65280)>>>8),w.push(_[S].byteLength&255),w=w.concat(Array.prototype.slice.call(_[S]));if(P=[re.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(h.width&65280)>>8,h.width&255,(h.height&65280)>>8,h.height&255,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s(re.avcC,new Uint8Array([1,h.profileIdc,h.profileCompatibility,h.levelIdc,255].concat([g.length],T,[_.length],w))),s(re.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))],h.sarRatio){var C=h.sarRatio[0],L=h.sarRatio[1];P.push(s(re.pasp,new Uint8Array([(C&4278190080)>>24,(C&16711680)>>16,(C&65280)>>8,C&255,(L&4278190080)>>24,(L&16711680)>>16,(L&65280)>>8,L&255])))}return s.apply(null,P)},d=function(h){return s(re.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(h.channelcount&65280)>>8,h.channelcount&255,(h.samplesize&65280)>>8,h.samplesize&255,0,0,0,0,(h.samplerate&65280)>>8,h.samplerate&255,0,0]),l(h))}}(),H=function(d){var p=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,0,(d.duration&4278190080)>>24,(d.duration&16711680)>>16,(d.duration&65280)>>8,d.duration&255,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(d.width&65280)>>8,d.width&255,0,0,(d.height&65280)>>8,d.height&255,0,0]);return s(re.tkhd,p)},X=function(d){var p,h,g,_,T,w,S;return p=s(re.tfhd,new Uint8Array([0,0,0,58,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),w=Math.floor(d.baseMediaDecodeTime/n),S=Math.floor(d.baseMediaDecodeTime%n),h=s(re.tfdt,new Uint8Array([1,0,0,0,w>>>24&255,w>>>16&255,w>>>8&255,w&255,S>>>24&255,S>>>16&255,S>>>8&255,S&255])),T=32+20+8+16+8+8,d.type==="audio"?(g=oe(d,T),s(re.traf,p,h,g)):(_=te(d),g=oe(d,_.length+T),s(re.traf,p,h,g,_))},R=function(d){return d.duration=d.duration||4294967295,s(re.trak,H(d),Z(d))},j=function(d){var p=new Uint8Array([0,0,0,0,(d.id&4278190080)>>24,(d.id&16711680)>>16,(d.id&65280)>>8,d.id&255,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return d.type!=="video"&&(p[p.length-1]=0),s(re.trex,p)},function(){var x,d,p;p=function(g,_){var T=0,w=0,S=0,P=0;return g.length&&(g[0].duration!==void 0&&(T=1),g[0].size!==void 0&&(w=2),g[0].flags!==void 0&&(S=4),g[0].compositionTimeOffset!==void 0&&(P=8)),[0,0,T|w|S|P,1,(g.length&4278190080)>>>24,(g.length&16711680)>>>16,(g.length&65280)>>>8,g.length&255,(_&4278190080)>>>24,(_&16711680)>>>16,(_&65280)>>>8,_&255]},d=function(g,_){var T,w,S,P,C,L;for(P=g.samples||[],_+=8+12+16*P.length,S=p(P,_),w=new Uint8Array(S.length+P.length*16),w.set(S),T=S.length,L=0;L<P.length;L++)C=P[L],w[T++]=(C.duration&4278190080)>>>24,w[T++]=(C.duration&16711680)>>>16,w[T++]=(C.duration&65280)>>>8,w[T++]=C.duration&255,w[T++]=(C.size&4278190080)>>>24,w[T++]=(C.size&16711680)>>>16,w[T++]=(C.size&65280)>>>8,w[T++]=C.size&255,w[T++]=C.flags.isLeading<<2|C.flags.dependsOn,w[T++]=C.flags.isDependedOn<<6|C.flags.hasRedundancy<<4|C.flags.paddingValue<<1|C.flags.isNonSyncSample,w[T++]=C.flags.degradationPriority&240<<8,w[T++]=C.flags.degradationPriority&15,w[T++]=(C.compositionTimeOffset&4278190080)>>>24,w[T++]=(C.compositionTimeOffset&16711680)>>>16,w[T++]=(C.compositionTimeOffset&65280)>>>8,w[T++]=C.compositionTimeOffset&255;return s(re.trun,w)},x=function(g,_){var T,w,S,P,C,L;for(P=g.samples||[],_+=8+12+8*P.length,S=p(P,_),T=new Uint8Array(S.length+P.length*8),T.set(S),w=S.length,L=0;L<P.length;L++)C=P[L],T[w++]=(C.duration&4278190080)>>>24,T[w++]=(C.duration&16711680)>>>16,T[w++]=(C.duration&65280)>>>8,T[w++]=C.duration&255,T[w++]=(C.size&4278190080)>>>24,T[w++]=(C.size&16711680)>>>16,T[w++]=(C.size&65280)>>>8,T[w++]=C.size&255;return s(re.trun,T)},oe=function(g,_){return g.type==="audio"?x(g,_):d(g,_)}}();var bt={ftyp:f,mdat:m,moof:E,moov:I,initSegment:function(d){var p=f(),h=I(d),g;return g=new Uint8Array(p.byteLength+h.byteLength),g.set(p),g.set(h,p.byteLength),g}},wt=function(d){var p,h,g=[],_=[];for(_.byteLength=0,_.nalCount=0,_.duration=0,g.byteLength=0,p=0;p<d.length;p++)h=d[p],h.nalUnitType==="access_unit_delimiter_rbsp"?(g.length&&(g.duration=h.dts-g.dts,_.byteLength+=g.byteLength,_.nalCount+=g.length,_.duration+=g.duration,_.push(g)),g=[h],g.byteLength=h.data.byteLength,g.pts=h.pts,g.dts=h.dts):(h.nalUnitType==="slice_layer_without_partitioning_rbsp_idr"&&(g.keyFrame=!0),g.duration=h.dts-g.dts,g.byteLength+=h.data.byteLength,g.push(h));return _.length&&(!g.duration||g.duration<=0)&&(g.duration=_[_.length-1].duration),_.byteLength+=g.byteLength,_.nalCount+=g.length,_.duration+=g.duration,_.push(g),_},Ct=function(d){var p,h,g=[],_=[];for(g.byteLength=0,g.nalCount=0,g.duration=0,g.pts=d[0].pts,g.dts=d[0].dts,_.byteLength=0,_.nalCount=0,_.duration=0,_.pts=d[0].pts,_.dts=d[0].dts,p=0;p<d.length;p++)h=d[p],h.keyFrame?(g.length&&(_.push(g),_.byteLength+=g.byteLength,_.nalCount+=g.nalCount,_.duration+=g.duration),g=[h],g.nalCount=h.length,g.byteLength=h.byteLength,g.pts=h.pts,g.dts=h.dts,g.duration=h.duration):(g.duration+=h.duration,g.nalCount+=h.length,g.byteLength+=h.byteLength,g.push(h));return _.length&&g.duration<=0&&(g.duration=_[_.length-1].duration),_.byteLength+=g.byteLength,_.nalCount+=g.nalCount,_.duration+=g.duration,_.push(g),_},ct=function(d){var p;return!d[0][0].keyFrame&&d.length>1&&(p=d.shift(),d.byteLength-=p.byteLength,d.nalCount-=p.nalCount,d[0][0].dts=p.dts,d[0][0].pts=p.pts,d[0][0].duration+=p.duration),d},Gt=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}},fi=function(d,p){var h=Gt();return h.dataOffset=p,h.compositionTimeOffset=d.pts-d.dts,h.duration=d.duration,h.size=4*d.length,h.size+=d.byteLength,d.keyFrame&&(h.flags.dependsOn=2,h.flags.isNonSyncSample=0),h},yi=function(d,p){var h,g,_,T,w,S=p||0,P=[];for(h=0;h<d.length;h++)for(T=d[h],g=0;g<T.length;g++)w=T[g],_=fi(w,S),S+=_.size,P.push(_);return P},G=function(d){var p,h,g,_,T,w,S=0,P=d.byteLength,C=d.nalCount,L=P+4*C,B=new Uint8Array(L),ee=new DataView(B.buffer);for(p=0;p<d.length;p++)for(_=d[p],h=0;h<_.length;h++)for(T=_[h],g=0;g<T.length;g++)w=T[g],ee.setUint32(S,w.data.byteLength),S+=4,B.set(w.data,S),S+=w.data.byteLength;return B},J=function(d,p){var h,g=p||0,_=[];return h=fi(d,g),_.push(h),_},de=function(d){var p,h,g=0,_=d.byteLength,T=d.length,w=_+4*T,S=new Uint8Array(w),P=new DataView(S.buffer);for(p=0;p<d.length;p++)h=d[p],P.setUint32(g,h.data.byteLength),g+=4,S.set(h.data,g),g+=h.data.byteLength;return S},me={groupNalsIntoFrames:wt,groupFramesIntoGops:Ct,extendFirstKeyFrame:ct,generateSampleTable:yi,concatenateNalData:G,generateSampleTableForFrame:J,concatenateNalDataForFrame:de},ce=[33,16,5,32,164,27],we=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ue=function(d){for(var p=[];d--;)p.push(0);return p},Ee=function(d){return Object.keys(d).reduce(function(p,h){return p[h]=new Uint8Array(d[h].reduce(function(g,_){return g.concat(_)},[])),p},{})},be,_e=function(){if(!be){var d={96e3:[ce,[227,64],ue(154),[56]],88200:[ce,[231],ue(170),[56]],64e3:[ce,[248,192],ue(240),[56]],48e3:[ce,[255,192],ue(268),[55,148,128],ue(54),[112]],44100:[ce,[255,192],ue(268),[55,163,128],ue(84),[112]],32e3:[ce,[255,192],ue(268),[55,234],ue(226),[112]],24e3:[ce,[255,192],ue(268),[55,255,128],ue(268),[111,112],ue(126),[224]],16e3:[ce,[255,192],ue(268),[55,255,128],ue(268),[111,255],ue(269),[223,108],ue(195),[1,192]],12e3:[we,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,253,128],ue(259),[56]],11025:[we,ue(268),[3,127,248],ue(268),[6,255,240],ue(268),[13,255,224],ue(268),[27,255,192],ue(268),[55,175,128],ue(108),[112]],8e3:[we,ue(268),[3,121,16],ue(47),[7]]};be=Ee(d)}return be},Re=9e4,ke,Me,je,qe,ot,ft,At;ke=function(d){return d*Re},Me=function(d,p){return d*p},je=function(d){return d/Re},qe=function(d,p){return d/p},ot=function(d,p){return ke(qe(d,p))},ft=function(d,p){return Me(je(d),p)},At=function(d,p,h){return je(h?d:d-p)};var Oe={ONE_SECOND_IN_TS:Re,secondsToVideoTs:ke,secondsToAudioTs:Me,videoTsToSeconds:je,audioTsToSeconds:qe,audioTsToVideoTs:ot,videoTsToAudioTs:ft,metadataTsToSeconds:At},ir=function(d){var p,h,g=0;for(p=0;p<d.length;p++)h=d[p],g+=h.data.byteLength;return g},Ln=function(d,p,h,g){var _,T=0,w=0,S=0,P=0,C,L,B;if(p.length&&(_=Oe.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),T=Math.ceil(Oe.ONE_SECOND_IN_TS/(d.samplerate/1024)),h&&g&&(w=_-Math.max(h,g),S=Math.floor(w/T),P=S*T),!(S<1||P>Oe.ONE_SECOND_IN_TS/2))){for(C=_e()[d.samplerate],C||(C=p[0].data),L=0;L<S;L++)B=p[0],p.splice(0,0,{data:C,dts:B.dts-T,pts:B.pts-T});return d.baseMediaDecodeTime-=Math.floor(Oe.videoTsToAudioTs(P,d.samplerate)),P}},vr=function(d,p,h){return p.minSegmentDts>=h?d:(p.minSegmentDts=1/0,d.filter(function(g){return g.dts>=h?(p.minSegmentDts=Math.min(p.minSegmentDts,g.dts),p.minSegmentPts=p.minSegmentDts,!0):!1}))},kn=function(d){var p,h,g=[];for(p=0;p<d.length;p++)h=d[p],g.push({size:h.data.byteLength,duration:1024});return g},Vt=function(d){var p,h,g=0,_=new Uint8Array(ir(d));for(p=0;p<d.length;p++)h=d[p],_.set(h.data,g),g+=h.data.byteLength;return _},Bt={prefixWithSilence:Ln,trimAdtsFramesByEarliestDts:vr,generateSampleTable:kn,concatenateFrameData:Vt},Ga=Oe.ONE_SECOND_IN_TS,ll=function(d,p){typeof p.pts=="number"&&(d.timelineStartInfo.pts===void 0&&(d.timelineStartInfo.pts=p.pts),d.minSegmentPts===void 0?d.minSegmentPts=p.pts:d.minSegmentPts=Math.min(d.minSegmentPts,p.pts),d.maxSegmentPts===void 0?d.maxSegmentPts=p.pts:d.maxSegmentPts=Math.max(d.maxSegmentPts,p.pts)),typeof p.dts=="number"&&(d.timelineStartInfo.dts===void 0&&(d.timelineStartInfo.dts=p.dts),d.minSegmentDts===void 0?d.minSegmentDts=p.dts:d.minSegmentDts=Math.min(d.minSegmentDts,p.dts),d.maxSegmentDts===void 0?d.maxSegmentDts=p.dts:d.maxSegmentDts=Math.max(d.maxSegmentDts,p.dts))},dl=function(d){delete d.minSegmentDts,delete d.maxSegmentDts,delete d.minSegmentPts,delete d.maxSegmentPts},Ro=function(d,p){var h,g,_=d.minSegmentDts;return p||(_-=d.timelineStartInfo.dts),h=d.timelineStartInfo.baseMediaDecodeTime,h+=_,h=Math.max(0,h),d.type==="audio"&&(g=d.samplerate/Ga,h*=g,h=Math.floor(h)),h},Mt={clearDtsInfo:dl,calculateTrackBaseMediaDecodeTime:Ro,collectDtsInfo:ll},Is=4,fl=128,cl=function(d){for(var p=0,h={payloadType:-1,payloadSize:0},g=0,_=0;p<d.byteLength&&d[p]!==fl;){for(;d[p]===255;)g+=255,p++;for(g+=d[p++];d[p]===255;)_+=255,p++;if(_+=d[p++],!h.payload&&g===Is){var T=String.fromCharCode(d[p+3],d[p+4],d[p+5],d[p+6]);if(T==="GA94"){h.payloadType=g,h.payloadSize=_,h.payload=d.subarray(p,p+_);break}else h.payload=void 0}p+=_,g=0,_=0}return h},hl=function(d){return d.payload[0]!==181||(d.payload[1]<<8|d.payload[2])!==49||String.fromCharCode(d.payload[3],d.payload[4],d.payload[5],d.payload[6])!=="GA94"||d.payload[7]!==3?null:d.payload.subarray(8,d.payload.length-1)},Mo=function(d,p){var h=[],g,_,T,w;if(!(p[0]&64))return h;for(_=p[0]&31,g=0;g<_;g++)T=g*3,w={type:p[T+2]&3,pts:d},p[T+2]&4&&(w.ccData=p[T+3]<<8|p[T+4],h.push(w));return h},pl=function(d){for(var p=d.byteLength,h=[],g=1,_,T;g<p-2;)d[g]===0&&d[g+1]===0&&d[g+2]===3?(h.push(g+2),g+=2):g++;if(h.length===0)return d;_=p-h.length,T=new Uint8Array(_);var w=0;for(g=0;g<_;w++,g++)w===h[0]&&(w++,h.shift()),T[g]=d[w];return T},_r={parseSei:cl,parseUserData:hl,parseCaptionPackets:Mo,discardEmulationPreventionBytes:pl,USER_DATA_REGISTERED_ITU_T_T35:Is},Pt=function x(d){d=d||{},x.prototype.init.call(this),this.parse708captions_=typeof d.parse708captions=="boolean"?d.parse708captions:!0,this.captionPackets_=[],this.ccStreams_=[new Ge(0,0),new Ge(0,1),new Ge(1,0),new Ge(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ve({captionServices:d.captionServices})),this.reset(),this.ccStreams_.forEach(function(p){p.on("data",this.trigger.bind(this,"data")),p.on("partialdone",this.trigger.bind(this,"partialdone")),p.on("done",this.trigger.bind(this,"done"))},this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};Pt.prototype=new t,Pt.prototype.push=function(x){var d,p,h;if(x.nalUnitType==="sei_rbsp"&&(d=_r.parseSei(x.escapedRBSP),!!d.payload&&d.payloadType===_r.USER_DATA_REGISTERED_ITU_T_T35&&(p=_r.parseUserData(d),!!p))){if(x.dts<this.latestDts_){this.ignoreNextEqualDts_=!0;return}else if(x.dts===this.latestDts_&&this.ignoreNextEqualDts_){this.numSameDts_--,this.numSameDts_||(this.ignoreNextEqualDts_=!1);return}h=_r.parseCaptionPackets(x.pts,p),this.captionPackets_=this.captionPackets_.concat(h),this.latestDts_!==x.dts&&(this.numSameDts_=0),this.numSameDts_++,this.latestDts_=x.dts}},Pt.prototype.flushCCStreams=function(x){this.ccStreams_.forEach(function(d){return x==="flush"?d.flush():d.partialFlush()},this)},Pt.prototype.flushStream=function(x){if(!this.captionPackets_.length){this.flushCCStreams(x);return}this.captionPackets_.forEach(function(d,p){d.presortIndex=p}),this.captionPackets_.sort(function(d,p){return d.pts===p.pts?d.presortIndex-p.presortIndex:d.pts-p.pts}),this.captionPackets_.forEach(function(d){d.type<2?this.dispatchCea608Packet(d):this.dispatchCea708Packet(d)},this),this.captionPackets_.length=0,this.flushCCStreams(x)},Pt.prototype.flush=function(){return this.flushStream("flush")},Pt.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Pt.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach(function(x){x.reset()})},Pt.prototype.dispatchCea608Packet=function(x){this.setsTextOrXDSActive(x)?this.activeCea608Channel_[x.type]=null:this.setsChannel1Active(x)?this.activeCea608Channel_[x.type]=0:this.setsChannel2Active(x)&&(this.activeCea608Channel_[x.type]=1),this.activeCea608Channel_[x.type]!==null&&this.ccStreams_[(x.type<<1)+this.activeCea608Channel_[x.type]].push(x)},Pt.prototype.setsChannel1Active=function(x){return(x.ccData&30720)===4096},Pt.prototype.setsChannel2Active=function(x){return(x.ccData&30720)===6144},Pt.prototype.setsTextOrXDSActive=function(x){return(x.ccData&28928)===256||(x.ccData&30974)===4138||(x.ccData&30974)===6186},Pt.prototype.dispatchCea708Packet=function(x){this.parse708captions_&&this.cc708Stream_.push(x)};var Ps={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},ml=function(d){var p=Ps[d]||d;return d&4096&&d===p?"":String.fromCharCode(p)},yr=function(d){return 32<=d&&d<=127||160<=d&&d<=255},zt=function(d){this.windowNum=d,this.reset()};zt.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},zt.prototype.getText=function(){return this.rows.join(`
`)},zt.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},zt.prototype.newLine=function(x){for(this.rows.length>=this.virtualRowCount&&typeof this.beforeRowOverflow=="function"&&this.beforeRowOverflow(x),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},zt.prototype.isEmpty=function(){return this.rows.length===0?!0:this.rows.length===1?this.rows[0]==="":!1},zt.prototype.addText=function(x){this.rows[this.rowIdx]+=x},zt.prototype.backspace=function(){if(!this.isEmpty()){var x=this.rows[this.rowIdx];this.rows[this.rowIdx]=x.substr(0,x.length-1)}};var en=function(d,p,h){this.serviceNum=d,this.text="",this.currentWindow=new zt(-1),this.windows=[],this.stream=h,typeof p=="string"&&this.createTextDecoder(p)};en.prototype.init=function(x,d){this.startPts=x;for(var p=0;p<8;p++)this.windows[p]=new zt(p),typeof d=="function"&&(this.windows[p].beforeRowOverflow=d)},en.prototype.setCurrentWindow=function(x){this.currentWindow=this.windows[x]},en.prototype.createTextDecoder=function(x){if(typeof TextDecoder>"u")this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(x)}catch(d){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+x+" encoding. "+d})}};var Ve=function x(d){d=d||{},x.prototype.init.call(this);var p=this,h=d.captionServices||{},g={},_;Object.keys(h).forEach(function(T){_=h[T],/^SERVICE/.test(T)&&(g[T]=_.encoding)}),this.serviceEncodings=g,this.current708Packet=null,this.services={},this.push=function(T){T.type===3?(p.new708Packet(),p.add708Bytes(T)):(p.current708Packet===null&&p.new708Packet(),p.add708Bytes(T))}};Ve.prototype=new t,Ve.prototype.new708Packet=function(){this.current708Packet!==null&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ve.prototype.add708Bytes=function(x){var d=x.ccData,p=d>>>8,h=d&255;this.current708Packet.ptsVals.push(x.pts),this.current708Packet.data.push(p),this.current708Packet.data.push(h)},Ve.prototype.push708Packet=function(){var x=this.current708Packet,d=x.data,p=null,h=null,g=0,_=d[g++];for(x.seq=_>>6,x.sizeCode=_&63;g<d.length;g++)_=d[g++],p=_>>5,h=_&31,p===7&&h>0&&(_=d[g++],p=_),this.pushServiceBlock(p,g,h),h>0&&(g+=h-1)},Ve.prototype.pushServiceBlock=function(x,d,p){var h,g=d,_=this.current708Packet.data,T=this.services[x];for(T||(T=this.initService(x,g));g<d+p&&g<_.length;g++)h=_[g],yr(h)?g=this.handleText(g,T):h===24?g=this.multiByteCharacter(g,T):h===16?g=this.extendedCommands(g,T):128<=h&&h<=135?g=this.setCurrentWindow(g,T):152<=h&&h<=159?g=this.defineWindow(g,T):h===136?g=this.clearWindows(g,T):h===140?g=this.deleteWindows(g,T):h===137?g=this.displayWindows(g,T):h===138?g=this.hideWindows(g,T):h===139?g=this.toggleWindows(g,T):h===151?g=this.setWindowAttributes(g,T):h===144?g=this.setPenAttributes(g,T):h===145?g=this.setPenColor(g,T):h===146?g=this.setPenLocation(g,T):h===143?T=this.reset(g,T):h===8?T.currentWindow.backspace():h===12?T.currentWindow.clearText():h===13?T.currentWindow.pendingNewLine=!0:h===14?T.currentWindow.clearText():h===141&&g++},Ve.prototype.extendedCommands=function(x,d){var p=this.current708Packet.data,h=p[++x];return yr(h)&&(x=this.handleText(x,d,{isExtended:!0})),x},Ve.prototype.getPts=function(x){return this.current708Packet.ptsVals[Math.floor(x/2)]},Ve.prototype.initService=function(x,d){var h="SERVICE"+x,p=this,h,g;return h in this.serviceEncodings&&(g=this.serviceEncodings[h]),this.services[x]=new en(x,g,p),this.services[x].init(this.getPts(d),function(_){p.flushDisplayed(_,p.services[x])}),this.services[x]},Ve.prototype.handleText=function(x,d,p){var h=p&&p.isExtended,g=p&&p.isMultiByte,_=this.current708Packet.data,T=h?4096:0,w=_[x],S=_[x+1],P=d.currentWindow,C,L;return d.textDecoder_&&!h?(g?(L=[w,S],x++):L=[w],C=d.textDecoder_.decode(new Uint8Array(L))):C=ml(T|w),P.pendingNewLine&&!P.isEmpty()&&P.newLine(this.getPts(x)),P.pendingNewLine=!1,P.addText(C),x},Ve.prototype.multiByteCharacter=function(x,d){var p=this.current708Packet.data,h=p[x+1],g=p[x+2];return yr(h)&&yr(g)&&(x=this.handleText(++x,d,{isMultiByte:!0})),x},Ve.prototype.setCurrentWindow=function(x,d){var p=this.current708Packet.data,h=p[x],g=h&7;return d.setCurrentWindow(g),x},Ve.prototype.defineWindow=function(x,d){var p=this.current708Packet.data,h=p[x],g=h&7;d.setCurrentWindow(g);var _=d.currentWindow;return h=p[++x],_.visible=(h&32)>>5,_.rowLock=(h&16)>>4,_.columnLock=(h&8)>>3,_.priority=h&7,h=p[++x],_.relativePositioning=(h&128)>>7,_.anchorVertical=h&127,h=p[++x],_.anchorHorizontal=h,h=p[++x],_.anchorPoint=(h&240)>>4,_.rowCount=h&15,h=p[++x],_.columnCount=h&63,h=p[++x],_.windowStyle=(h&56)>>3,_.penStyle=h&7,_.virtualRowCount=_.rowCount+1,x},Ve.prototype.setWindowAttributes=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.winAttr;return h=p[++x],g.fillOpacity=(h&192)>>6,g.fillRed=(h&48)>>4,g.fillGreen=(h&12)>>2,g.fillBlue=h&3,h=p[++x],g.borderType=(h&192)>>6,g.borderRed=(h&48)>>4,g.borderGreen=(h&12)>>2,g.borderBlue=h&3,h=p[++x],g.borderType+=(h&128)>>5,g.wordWrap=(h&64)>>6,g.printDirection=(h&48)>>4,g.scrollDirection=(h&12)>>2,g.justify=h&3,h=p[++x],g.effectSpeed=(h&240)>>4,g.effectDirection=(h&12)>>2,g.displayEffect=h&3,x},Ve.prototype.flushDisplayed=function(x,d){for(var p=[],h=0;h<8;h++)d.windows[h].visible&&!d.windows[h].isEmpty()&&p.push(d.windows[h].getText());d.endPts=x,d.text=p.join(`

`),this.pushCaption(d),d.startPts=x},Ve.prototype.pushCaption=function(x){x.text!==""&&(this.trigger("data",{startPts:x.startPts,endPts:x.endPts,text:x.text,stream:"cc708_"+x.serviceNum}),x.text="",x.startPts=x.endPts)},Ve.prototype.displayWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&(d.windows[_].visible=1);return x},Ve.prototype.hideWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&(d.windows[_].visible=0);return x},Ve.prototype.toggleWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&(d.windows[_].visible^=1);return x},Ve.prototype.clearWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&d.windows[_].clearText();return x},Ve.prototype.deleteWindows=function(x,d){var p=this.current708Packet.data,h=p[++x],g=this.getPts(x);this.flushDisplayed(g,d);for(var _=0;_<8;_++)h&1<<_&&d.windows[_].reset();return x},Ve.prototype.setPenAttributes=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.penAttr;return h=p[++x],g.textTag=(h&240)>>4,g.offset=(h&12)>>2,g.penSize=h&3,h=p[++x],g.italics=(h&128)>>7,g.underline=(h&64)>>6,g.edgeType=(h&56)>>3,g.fontStyle=h&7,x},Ve.prototype.setPenColor=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.penColor;return h=p[++x],g.fgOpacity=(h&192)>>6,g.fgRed=(h&48)>>4,g.fgGreen=(h&12)>>2,g.fgBlue=h&3,h=p[++x],g.bgOpacity=(h&192)>>6,g.bgRed=(h&48)>>4,g.bgGreen=(h&12)>>2,g.bgBlue=h&3,h=p[++x],g.edgeRed=(h&48)>>4,g.edgeGreen=(h&12)>>2,g.edgeBlue=h&3,x},Ve.prototype.setPenLocation=function(x,d){var p=this.current708Packet.data,h=p[x],g=d.currentWindow.penLoc;return d.currentWindow.pendingNewLine=!0,h=p[++x],g.row=h&15,h=p[++x],g.column=h&63,x},Ve.prototype.reset=function(x,d){var p=this.getPts(x);return this.flushDisplayed(p,d),this.initService(d.serviceNum,x)};var gl={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},tn=function(d){return d===null?"":(d=gl[d]||d,String.fromCharCode(d))},rn=14,vl=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],Ti=function(){for(var d=[],p=rn+1;p--;)d.push("");return d},Ge=function x(d,p){x.prototype.init.call(this),this.field_=d||0,this.dataChannel_=p||0,this.name_="CC"+((this.field_<<1|this.dataChannel_)+1),this.setConstants(),this.reset(),this.push=function(h){var g,_,T,w,S;if(g=h.ccData&32639,g===this.lastControlCode_){this.lastControlCode_=null;return}if((g&61440)===4096?this.lastControlCode_=g:g!==this.PADDING_&&(this.lastControlCode_=null),T=g>>>8,w=g&255,g!==this.PADDING_)if(g===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(g===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(h.pts),this.flushDisplayed(h.pts),_=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=_,this.startPts_=h.pts;else if(g===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(h.pts);else if(g===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(h.pts);else if(g===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(h.pts);else if(g===this.CARRIAGE_RETURN_)this.clearFormatting(h.pts),this.flushDisplayed(h.pts),this.shiftRowsUp_(),this.startPts_=h.pts;else if(g===this.BACKSPACE_)this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(g===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(h.pts),this.displayed_=Ti();else if(g===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=Ti();else if(g===this.RESUME_DIRECT_CAPTIONING_)this.mode_!=="paintOn"&&(this.flushDisplayed(h.pts),this.displayed_=Ti()),this.mode_="paintOn",this.startPts_=h.pts;else if(this.isSpecialCharacter(T,w))T=(T&3)<<8,S=tn(T|w),this[this.mode_](h.pts,S),this.column_++;else if(this.isExtCharacter(T,w))this.mode_==="popOn"?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),T=(T&3)<<8,S=tn(T|w),this[this.mode_](h.pts,S),this.column_++;else if(this.isMidRowCode(T,w))this.clearFormatting(h.pts),this[this.mode_](h.pts," "),this.column_++,(w&14)===14&&this.addFormatting(h.pts,["i"]),(w&1)===1&&this.addFormatting(h.pts,["u"]);else if(this.isOffsetControlCode(T,w))this.column_+=w&3;else if(this.isPAC(T,w)){var P=vl.indexOf(g&7968);this.mode_==="rollUp"&&(P-this.rollUpRows_+1<0&&(P=this.rollUpRows_-1),this.setRollUp(h.pts,P)),P!==this.row_&&(this.clearFormatting(h.pts),this.row_=P),w&1&&this.formatting_.indexOf("u")===-1&&this.addFormatting(h.pts,["u"]),(g&16)===16&&(this.column_=((g&14)>>1)*4),this.isColorPAC(w)&&(w&14)===14&&this.addFormatting(h.pts,["i"])}else this.isNormalChar(T)&&(w===0&&(w=null),S=tn(T),S+=tn(w),this[this.mode_](h.pts,S),this.column_+=S.length)}};Ge.prototype=new t,Ge.prototype.flushDisplayed=function(x){var d=this.displayed_.map(function(p,h){try{return p.trim()}catch{return this.trigger("log",{level:"warn",message:"Skipping a malformed 608 caption at index "+h+"."}),""}},this).join(`
`).replace(/^\n+|\n+$/g,"");d.length&&this.trigger("data",{startPts:this.startPts_,endPts:x,text:d,stream:this.name_})},Ge.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=Ti(),this.nonDisplayed_=Ti(),this.lastControlCode_=null,this.column_=0,this.row_=rn,this.rollUpRows_=2,this.formatting_=[]},Ge.prototype.setConstants=function(){this.dataChannel_===0?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):this.dataChannel_===1&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=this.CONTROL_|32,this.END_OF_CAPTION_=this.CONTROL_|47,this.ROLL_UP_2_ROWS_=this.CONTROL_|37,this.ROLL_UP_3_ROWS_=this.CONTROL_|38,this.ROLL_UP_4_ROWS_=this.CONTROL_|39,this.CARRIAGE_RETURN_=this.CONTROL_|45,this.RESUME_DIRECT_CAPTIONING_=this.CONTROL_|41,this.BACKSPACE_=this.CONTROL_|33,this.ERASE_DISPLAYED_MEMORY_=this.CONTROL_|44,this.ERASE_NON_DISPLAYED_MEMORY_=this.CONTROL_|46},Ge.prototype.isSpecialCharacter=function(x,d){return x===this.EXT_&&d>=48&&d<=63},Ge.prototype.isExtCharacter=function(x,d){return(x===this.EXT_+1||x===this.EXT_+2)&&d>=32&&d<=63},Ge.prototype.isMidRowCode=function(x,d){return x===this.EXT_&&d>=32&&d<=47},Ge.prototype.isOffsetControlCode=function(x,d){return x===this.OFFSET_&&d>=33&&d<=35},Ge.prototype.isPAC=function(x,d){return x>=this.BASE_&&x<this.BASE_+8&&d>=64&&d<=127},Ge.prototype.isColorPAC=function(x){return x>=64&&x<=79||x>=96&&x<=127},Ge.prototype.isNormalChar=function(x){return x>=32&&x<=127},Ge.prototype.setRollUp=function(x,d){if(this.mode_!=="rollUp"&&(this.row_=rn,this.mode_="rollUp",this.flushDisplayed(x),this.nonDisplayed_=Ti(),this.displayed_=Ti()),d!==void 0&&d!==this.row_)for(var p=0;p<this.rollUpRows_;p++)this.displayed_[d-p]=this.displayed_[this.row_-p],this.displayed_[this.row_-p]="";d===void 0&&(d=this.row_),this.topRow_=d-this.rollUpRows_+1},Ge.prototype.addFormatting=function(x,d){this.formatting_=this.formatting_.concat(d);var p=d.reduce(function(h,g){return h+"<"+g+">"},"");this[this.mode_](x,p)},Ge.prototype.clearFormatting=function(x){if(this.formatting_.length){var d=this.formatting_.reverse().reduce(function(p,h){return p+"</"+h+">"},"");this.formatting_=[],this[this.mode_](x,d)}},Ge.prototype.popOn=function(x,d){var p=this.nonDisplayed_[this.row_];p+=d,this.nonDisplayed_[this.row_]=p},Ge.prototype.rollUp=function(x,d){var p=this.displayed_[this.row_];p+=d,this.displayed_[this.row_]=p},Ge.prototype.shiftRowsUp_=function(){var x;for(x=0;x<this.topRow_;x++)this.displayed_[x]="";for(x=this.row_+1;x<rn+1;x++)this.displayed_[x]="";for(x=this.topRow_;x<this.row_;x++)this.displayed_[x]=this.displayed_[x+1];this.displayed_[this.row_]=""},Ge.prototype.paintOn=function(x,d){var p=this.displayed_[this.row_];p+=d,this.displayed_[this.row_]=p};var nn={CaptionStream:Pt,Cea608Stream:Ge,Cea708Stream:Ve},ht={H264_STREAM_TYPE:27,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},_l=8589934592,yl=4294967296,Os="shared",oa=function(d,p){var h=1;for(d>p&&(h=-1);Math.abs(p-d)>yl;)d+=h*_l;return d},Rn=function x(d){var p,h;x.prototype.init.call(this),this.type_=d||Os,this.push=function(g){this.type_!==Os&&g.type!==this.type_||(h===void 0&&(h=g.dts),g.dts=oa(g.dts,h),g.pts=oa(g.pts,h),p=g.dts,this.trigger("data",g))},this.flush=function(){h=p,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){h=void 0,p=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};Rn.prototype=new t;var Ds={TimestampRolloverStream:Rn,handleRollover:oa},Mn=function(d,p,h){var g,_="";for(g=p;g<h;g++)_+="%"+("00"+d[g].toString(16)).slice(-2);return _},an=function(d,p,h){return decodeURIComponent(Mn(d,p,h))},Tl=function(d,p,h){return unescape(Mn(d,p,h))},sn=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},za={TXXX:function(d){var p;if(d.data[0]===3){for(p=1;p<d.data.length;p++)if(d.data[p]===0){d.description=an(d.data,1,p),d.value=an(d.data,p+1,d.data.length).replace(/\0*$/,"");break}d.data=d.value}},WXXX:function(d){var p;if(d.data[0]===3){for(p=1;p<d.data.length;p++)if(d.data[p]===0){d.description=an(d.data,1,p),d.url=an(d.data,p+1,d.data.length);break}}},PRIV:function(d){var p;for(p=0;p<d.data.length;p++)if(d.data[p]===0){d.owner=Tl(d.data,0,p);break}d.privateData=d.data.subarray(p+1),d.data=d.privateData}},Br;Br=function(d){var p={descriptor:d&&d.descriptor},h=0,g=[],_=0,T;if(Br.prototype.init.call(this),this.dispatchType=ht.METADATA_STREAM_TYPE.toString(16),p.descriptor)for(T=0;T<p.descriptor.length;T++)this.dispatchType+=("00"+p.descriptor[T].toString(16)).slice(-2);this.push=function(w){var S,P,C,L,B,ee;if(w.type==="timed-metadata"){if(w.dataAlignmentIndicator&&(_=0,g.length=0),g.length===0&&(w.data.length<10||w.data[0]!=="I".charCodeAt(0)||w.data[1]!=="D".charCodeAt(0)||w.data[2]!=="3".charCodeAt(0))){this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});return}if(g.push(w),_+=w.data.byteLength,g.length===1&&(h=sn(w.data.subarray(6,10)),h+=10),!(_<h)){for(S={data:new Uint8Array(h),frames:[],pts:g[0].pts,dts:g[0].dts},B=0;B<h;)S.data.set(g[0].data.subarray(0,h-B),B),B+=g[0].data.byteLength,_-=g[0].data.byteLength,g.shift();P=10,S.data[5]&64&&(P+=4,P+=sn(S.data.subarray(10,14)),h-=sn(S.data.subarray(16,20)));do{if(C=sn(S.data.subarray(P+4,P+8)),C<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping metadata parsing."});return}if(ee=String.fromCharCode(S.data[P],S.data[P+1],S.data[P+2],S.data[P+3]),L={id:ee,data:S.data.subarray(P+10,P+C+10)},L.key=L.id,za[L.id]&&(za[L.id](L),L.owner==="com.apple.streaming.transportStreamTimestamp")){var ae=L.data,Q=(ae[3]&1)<<30|ae[4]<<22|ae[5]<<14|ae[6]<<6|ae[7]>>>2;Q*=4,Q+=ae[7]&3,L.timeStamp=Q,S.pts===void 0&&S.dts===void 0&&(S.pts=L.timeStamp,S.dts=L.timeStamp),this.trigger("timestamp",L)}S.frames.push(L),P+=10,P+=C}while(P<h);this.trigger("data",S)}}}},Br.prototype=new t;var Fo=Br,bl=Ds.TimestampRolloverStream,on,Tr,un,Oi=188,Fn=71;on=function(){var d=new Uint8Array(Oi),p=0;on.prototype.init.call(this),this.push=function(h){var g=0,_=Oi,T;for(p?(T=new Uint8Array(h.byteLength+p),T.set(d.subarray(0,p)),T.set(h,p),p=0):T=h;_<T.byteLength;){if(T[g]===Fn&&T[_]===Fn){this.trigger("data",T.subarray(g,_)),g+=Oi,_+=Oi;continue}g++,_++}g<T.byteLength&&(d.set(T.subarray(g),0),p=T.byteLength-g)},this.flush=function(){p===Oi&&d[0]===Fn&&(this.trigger("data",d),p=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){p=0,this.trigger("reset")}},on.prototype=new t,Tr=function(){var d,p,h,g;Tr.prototype.init.call(this),g=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,d=function(T,w){var S=0;w.payloadUnitStartIndicator&&(S+=T[S]+1),w.type==="pat"?p(T.subarray(S),w):h(T.subarray(S),w)},p=function(T,w){w.section_number=T[7],w.last_section_number=T[8],g.pmtPid=(T[10]&31)<<8|T[11],w.pmtPid=g.pmtPid},h=function(T,w){var S,P,C,L;if(T[5]&1){for(g.programMapTable={video:null,audio:null,"timed-metadata":{}},S=(T[1]&15)<<8|T[2],P=3+S-4,C=(T[10]&15)<<8|T[11],L=12+C;L<P;){var B=T[L],ee=(T[L+1]&31)<<8|T[L+2];B===ht.H264_STREAM_TYPE&&g.programMapTable.video===null?g.programMapTable.video=ee:B===ht.ADTS_STREAM_TYPE&&g.programMapTable.audio===null?g.programMapTable.audio=ee:B===ht.METADATA_STREAM_TYPE&&(g.programMapTable["timed-metadata"][ee]=B),L+=((T[L+3]&15)<<8|T[L+4])+5}w.programMapTable=g.programMapTable}},this.push=function(_){var T={},w=4;if(T.payloadUnitStartIndicator=!!(_[1]&64),T.pid=_[1]&31,T.pid<<=8,T.pid|=_[2],(_[3]&48)>>>4>1&&(w+=_[w]+1),T.pid===0)T.type="pat",d(_.subarray(w),T),this.trigger("data",T);else if(T.pid===this.pmtPid)for(T.type="pmt",d(_.subarray(w),T),this.trigger("data",T);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else this.programMapTable===void 0?this.packetsWaitingForPmt.push([_,w,T]):this.processPes_(_,w,T)},this.processPes_=function(_,T,w){w.pid===this.programMapTable.video?w.streamType=ht.H264_STREAM_TYPE:w.pid===this.programMapTable.audio?w.streamType=ht.ADTS_STREAM_TYPE:w.streamType=this.programMapTable["timed-metadata"][w.pid],w.type="pes",w.data=_.subarray(T),this.trigger("data",w)}},Tr.prototype=new t,Tr.STREAM_TYPES={h264:27,adts:15},un=function(){var d=this,p=!1,h={data:[],size:0},g={data:[],size:0},_={data:[],size:0},T,w=function(C,L){var B,ee=C[0]<<16|C[1]<<8|C[2];L.data=new Uint8Array,ee===1&&(L.packetLength=6+(C[4]<<8|C[5]),L.dataAlignmentIndicator=(C[6]&4)!==0,B=C[7],B&192&&(L.pts=(C[9]&14)<<27|(C[10]&255)<<20|(C[11]&254)<<12|(C[12]&255)<<5|(C[13]&254)>>>3,L.pts*=4,L.pts+=(C[13]&6)>>>1,L.dts=L.pts,B&64&&(L.dts=(C[14]&14)<<27|(C[15]&255)<<20|(C[16]&254)<<12|(C[17]&255)<<5|(C[18]&254)>>>3,L.dts*=4,L.dts+=(C[18]&6)>>>1)),L.data=C.subarray(9+C[8]))},S=function(C,L,B){var ee=new Uint8Array(C.size),ae={type:L},Q=0,ye=0,nt=!1,Ze;if(!(!C.data.length||C.size<9)){for(ae.trackId=C.data[0].pid,Q=0;Q<C.data.length;Q++)Ze=C.data[Q],ee.set(Ze.data,ye),ye+=Ze.data.byteLength;w(ee,ae),nt=L==="video"||ae.packetLength<=C.size,(B||nt)&&(C.size=0,C.data.length=0),nt&&d.trigger("data",ae)}};un.prototype.init.call(this),this.push=function(P){({pat:function(){},pes:function(){var L,B;switch(P.streamType){case ht.H264_STREAM_TYPE:L=h,B="video";break;case ht.ADTS_STREAM_TYPE:L=g,B="audio";break;case ht.METADATA_STREAM_TYPE:L=_,B="timed-metadata";break;default:return}P.payloadUnitStartIndicator&&S(L,B,!0),L.data.push(P),L.size+=P.data.byteLength},pmt:function(){var L={type:"metadata",tracks:[]};T=P.programMapTable,T.video!==null&&L.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.video,codec:"avc",type:"video"}),T.audio!==null&&L.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.audio,codec:"adts",type:"audio"}),p=!0,d.trigger("data",L)}})[P.type]()},this.reset=function(){h.size=0,h.data.length=0,g.size=0,g.data.length=0,this.trigger("reset")},this.flushStreams_=function(){S(h,"video"),S(g,"audio"),S(_,"timed-metadata")},this.flush=function(){if(!p&&T){var P={type:"metadata",tracks:[]};T.video!==null&&P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.video,codec:"avc",type:"video"}),T.audio!==null&&P.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+T.audio,codec:"adts",type:"audio"}),d.trigger("data",P)}p=!1,this.flushStreams_(),this.trigger("done")}},un.prototype=new t;var Ka={PAT_PID:0,MP2T_PACKET_LENGTH:Oi,TransportPacketStream:on,TransportParseStream:Tr,ElementaryStream:un,TimestampRolloverStream:bl,CaptionStream:nn.CaptionStream,Cea608Stream:nn.Cea608Stream,Cea708Stream:nn.Cea708Stream,MetadataStream:Fo};for(var ln in ht)ht.hasOwnProperty(ln)&&(Ka[ln]=ht[ln]);var Kt=Ka,No=Oe.ONE_SECOND_IN_TS,rr,Xa=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];rr=function(d){var p,h=0;rr.prototype.init.call(this),this.skipWarn_=function(g,_){this.trigger("log",{level:"warn",message:"adts skiping bytes "+g+" to "+_+" in frame "+h+" outside syncword"})},this.push=function(g){var _=0,T,w,S,P,C;if(d||(h=0),g.type==="audio"){p&&p.length?(S=p,p=new Uint8Array(S.byteLength+g.data.byteLength),p.set(S),p.set(g.data,S.byteLength)):p=g.data;for(var L;_+7<p.length;){if(p[_]!==255||(p[_+1]&246)!==240){typeof L!="number"&&(L=_),_++;continue}if(typeof L=="number"&&(this.skipWarn_(L,_),L=null),w=(~p[_+1]&1)*2,T=(p[_+3]&3)<<11|p[_+4]<<3|(p[_+5]&224)>>5,P=((p[_+6]&3)+1)*1024,C=P*No/Xa[(p[_+2]&60)>>>2],p.byteLength-_<T)break;this.trigger("data",{pts:g.pts+h*C,dts:g.dts+h*C,sampleCount:P,audioobjecttype:(p[_+2]>>>6&3)+1,channelcount:(p[_+2]&1)<<2|(p[_+3]&192)>>>6,samplerate:Xa[(p[_+2]&60)>>>2],samplingfrequencyindex:(p[_+2]&60)>>>2,samplesize:16,data:p.subarray(_+7+w,_+T)}),h++,_+=T}typeof L=="number"&&(this.skipWarn_(L,_),L=null),p=p.subarray(_)}},this.flush=function(){h=0,this.trigger("done")},this.reset=function(){p=void 0,this.trigger("reset")},this.endTimeline=function(){p=void 0,this.trigger("endedtimeline")}},rr.prototype=new t;var Ls=rr,Qa;Qa=function(d){var p=d.byteLength,h=0,g=0;this.length=function(){return 8*p},this.bitsAvailable=function(){return 8*p+g},this.loadWord=function(){var _=d.byteLength-p,T=new Uint8Array(4),w=Math.min(4,p);if(w===0)throw new Error("no bytes available");T.set(d.subarray(_,_+w)),h=new DataView(T.buffer).getUint32(0),g=w*8,p-=w},this.skipBits=function(_){var T;g>_?(h<<=_,g-=_):(_-=g,T=Math.floor(_/8),_-=T*8,p-=T,this.loadWord(),h<<=_,g-=_)},this.readBits=function(_){var T=Math.min(g,_),w=h>>>32-T;return g-=T,g>0?h<<=T:p>0&&this.loadWord(),T=_-T,T>0?w<<T|this.readBits(T):w},this.skipLeadingZeros=function(){var _;for(_=0;_<g;++_)if(h&2147483648>>>_)return h<<=_,g-=_,_;return this.loadWord(),_+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var _=this.skipLeadingZeros();return this.readBits(_+1)-1},this.readExpGolomb=function(){var _=this.readUnsignedExpGolomb();return 1&_?1+_>>>1:-1*(_>>>1)},this.readBoolean=function(){return this.readBits(1)===1},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()};var Uo=Qa,br,xr,Ya;xr=function(){var d=0,p,h;xr.prototype.init.call(this),this.push=function(g){var _;h?(_=new Uint8Array(h.byteLength+g.data.byteLength),_.set(h),_.set(g.data,h.byteLength),h=_):h=g.data;for(var T=h.byteLength;d<T-3;d++)if(h[d+2]===1){p=d+5;break}for(;p<T;)switch(h[p]){case 0:if(h[p-1]!==0){p+=2;break}else if(h[p-2]!==0){p++;break}d+3!==p-2&&this.trigger("data",h.subarray(d+3,p-2));do{p++}while(h[p]!==1&&p<T);d=p-2,p+=3;break;case 1:if(h[p-1]!==0||h[p-2]!==0){p+=3;break}this.trigger("data",h.subarray(d+3,p-2)),d=p-2,p+=3;break;default:p+=3;break}h=h.subarray(d),p-=d,d=0},this.reset=function(){h=null,d=0,this.trigger("reset")},this.flush=function(){h&&h.byteLength>3&&this.trigger("data",h.subarray(d+3)),h=null,d=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}},xr.prototype=new t,Ya={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},br=function(){var d=new xr,p,h,g,_,T,w,S;br.prototype.init.call(this),p=this,this.push=function(P){P.type==="video"&&(h=P.trackId,g=P.pts,_=P.dts,d.push(P))},d.on("data",function(P){var C={trackId:h,pts:g,dts:_,data:P,nalUnitTypeCode:P[0]&31};switch(C.nalUnitTypeCode){case 5:C.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:C.nalUnitType="sei_rbsp",C.escapedRBSP=T(P.subarray(1));break;case 7:C.nalUnitType="seq_parameter_set_rbsp",C.escapedRBSP=T(P.subarray(1)),C.config=w(C.escapedRBSP);break;case 8:C.nalUnitType="pic_parameter_set_rbsp";break;case 9:C.nalUnitType="access_unit_delimiter_rbsp";break}p.trigger("data",C)}),d.on("done",function(){p.trigger("done")}),d.on("partialdone",function(){p.trigger("partialdone")}),d.on("reset",function(){p.trigger("reset")}),d.on("endedtimeline",function(){p.trigger("endedtimeline")}),this.flush=function(){d.flush()},this.partialFlush=function(){d.partialFlush()},this.reset=function(){d.reset()},this.endTimeline=function(){d.endTimeline()},S=function(C,L){var B=8,ee=8,ae,Q;for(ae=0;ae<C;ae++)ee!==0&&(Q=L.readExpGolomb(),ee=(B+Q+256)%256),B=ee===0?B:ee},T=function(C){for(var L=C.byteLength,B=[],ee=1,ae,Q;ee<L-2;)C[ee]===0&&C[ee+1]===0&&C[ee+2]===3?(B.push(ee+2),ee+=2):ee++;if(B.length===0)return C;ae=L-B.length,Q=new Uint8Array(ae);var ye=0;for(ee=0;ee<ae;ye++,ee++)ye===B[0]&&(ye++,B.shift()),Q[ee]=C[ye];return Q},w=function(C){var L=0,B=0,ee=0,ae=0,Q,ye,nt,Ze,ni,ca,Gr,Un,Bn,pt,zs,Ye=[1,1],jn,Si;if(Q=new Uo(C),ye=Q.readUnsignedByte(),Ze=Q.readUnsignedByte(),nt=Q.readUnsignedByte(),Q.skipUnsignedExpGolomb(),Ya[ye]&&(ni=Q.readUnsignedExpGolomb(),ni===3&&Q.skipBits(1),Q.skipUnsignedExpGolomb(),Q.skipUnsignedExpGolomb(),Q.skipBits(1),Q.readBoolean()))for(zs=ni!==3?8:12,Si=0;Si<zs;Si++)Q.readBoolean()&&(Si<6?S(16,Q):S(64,Q));if(Q.skipUnsignedExpGolomb(),ca=Q.readUnsignedExpGolomb(),ca===0)Q.readUnsignedExpGolomb();else if(ca===1)for(Q.skipBits(1),Q.skipExpGolomb(),Q.skipExpGolomb(),Gr=Q.readUnsignedExpGolomb(),Si=0;Si<Gr;Si++)Q.skipExpGolomb();if(Q.skipUnsignedExpGolomb(),Q.skipBits(1),Un=Q.readUnsignedExpGolomb(),Bn=Q.readUnsignedExpGolomb(),pt=Q.readBits(1),pt===0&&Q.skipBits(1),Q.skipBits(1),Q.readBoolean()&&(L=Q.readUnsignedExpGolomb(),B=Q.readUnsignedExpGolomb(),ee=Q.readUnsignedExpGolomb(),ae=Q.readUnsignedExpGolomb()),Q.readBoolean()&&Q.readBoolean()){switch(jn=Q.readUnsignedByte(),jn){case 1:Ye=[1,1];break;case 2:Ye=[12,11];break;case 3:Ye=[10,11];break;case 4:Ye=[16,11];break;case 5:Ye=[40,33];break;case 6:Ye=[24,11];break;case 7:Ye=[20,11];break;case 8:Ye=[32,11];break;case 9:Ye=[80,33];break;case 10:Ye=[18,11];break;case 11:Ye=[15,11];break;case 12:Ye=[64,33];break;case 13:Ye=[160,99];break;case 14:Ye=[4,3];break;case 15:Ye=[3,2];break;case 16:Ye=[2,1];break;case 255:{Ye=[Q.readUnsignedByte()<<8|Q.readUnsignedByte(),Q.readUnsignedByte()<<8|Q.readUnsignedByte()];break}}Ye&&Ye[0]/Ye[1]}return{profileIdc:ye,levelIdc:nt,profileCompatibility:Ze,width:(Un+1)*16-L*2-B*2,height:(2-pt)*(Bn+1)*16-ee*2-ae*2,sarRatio:Ye}}},br.prototype=new t;var ks={H264Stream:br,NalByteStream:xr},Rs=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350],jr=function(d,p){var h=d[p+6]<<21|d[p+7]<<14|d[p+8]<<7|d[p+9],g=d[p+5],_=(g&16)>>4;return h=h>=0?h:0,_?h+20:h+10},Bo=function x(d,p){return d.length-p<10||d[p]!=="I".charCodeAt(0)||d[p+1]!=="D".charCodeAt(0)||d[p+2]!=="3".charCodeAt(0)?p:(p+=jr(d,p),x(d,p))},jo=function(d){var p=Bo(d,0);return d.length>=p+2&&(d[p]&255)===255&&(d[p+1]&240)===240&&(d[p+1]&22)===16},Ms=function(d){return d[0]<<21|d[1]<<14|d[2]<<7|d[3]},Vo=function(d,p,h){var g,_="";for(g=p;g<h;g++)_+="%"+("00"+d[g].toString(16)).slice(-2);return _},Ho=function(d,p,h){return unescape(Vo(d,p,h))},$o=function(d,p){var h=(d[p+5]&224)>>5,g=d[p+4]<<3,_=d[p+3]&3<<11;return _|g|h},Wo=function(d,p){return d[p]==="I".charCodeAt(0)&&d[p+1]==="D".charCodeAt(0)&&d[p+2]==="3".charCodeAt(0)?"timed-metadata":d[p]&!0&&(d[p+1]&240)===240?"audio":null},xl=function(d){for(var p=0;p+5<d.length;){if(d[p]!==255||(d[p+1]&246)!==240){p++;continue}return Rs[(d[p+2]&60)>>>2]}return null},Sl=function(d){var p,h,g,_;p=10,d[5]&64&&(p+=4,p+=Ms(d.subarray(10,14)));do{if(h=Ms(d.subarray(p+4,p+8)),h<1)return null;if(_=String.fromCharCode(d[p],d[p+1],d[p+2],d[p+3]),_==="PRIV"){g=d.subarray(p+10,p+h+10);for(var T=0;T<g.byteLength;T++)if(g[T]===0){var w=Ho(g,0,T);if(w==="com.apple.streaming.transportStreamTimestamp"){var S=g.subarray(T+1),P=(S[3]&1)<<30|S[4]<<22|S[5]<<14|S[6]<<6|S[7]>>>2;return P*=4,P+=S[7]&3,P}break}}p+=10,p+=h}while(p<d.byteLength);return null},dn={isLikelyAacData:jo,parseId3TagSize:jr,parseAdtsSize:$o,parseType:Wo,parseSampleRate:xl,parseAacTimestamp:Sl},Vr;Vr=function(){var d=new Uint8Array,p=0;Vr.prototype.init.call(this),this.setTimestamp=function(h){p=h},this.push=function(h){var g=0,_=0,T,w,S,P;for(d.length?(P=d.length,d=new Uint8Array(h.byteLength+P),d.set(d.subarray(0,P)),d.set(h,P)):d=h;d.length-_>=3;){if(d[_]==="I".charCodeAt(0)&&d[_+1]==="D".charCodeAt(0)&&d[_+2]==="3".charCodeAt(0)){if(d.length-_<10||(g=dn.parseId3TagSize(d,_),_+g>d.length))break;w={type:"timed-metadata",data:d.subarray(_,_+g)},this.trigger("data",w),_+=g;continue}else if((d[_]&255)===255&&(d[_+1]&240)===240){if(d.length-_<7||(g=dn.parseAdtsSize(d,_),_+g>d.length))break;S={type:"audio",data:d.subarray(_,_+g),pts:p,dts:p},this.trigger("data",S),_+=g;continue}_++}T=d.length-_,T>0?d=d.subarray(_):d=new Uint8Array},this.reset=function(){d=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){d=new Uint8Array,this.trigger("endedtimeline")}},Vr.prototype=new t;var El=Vr,wl=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize"],ua=wl,Cl=["width","height","profileIdc","levelIdc","profileCompatibility","sarRatio"],fn=Cl,Al=ks.H264Stream,Il=dn.isLikelyAacData,Pl=Oe.ONE_SECOND_IN_TS,Sr,Bi,_t,rt,Ol=function(d,p){p.stream=d,this.trigger("log",p)},Fs=function(d,p){for(var h=Object.keys(p),g=0;g<h.length;g++){var _=h[g];_==="headOfPipeline"||!p[_].on||p[_].on("log",Ol.bind(d,_))}},Ns=function(d,p){var h;if(d.length!==p.length)return!1;for(h=0;h<d.length;h++)if(d[h]!==p[h])return!1;return!0},la=function(d,p,h,g,_,T){var w=h-p,S=g-p,P=_-h;return{start:{dts:d,pts:d+w},end:{dts:d+S,pts:d+P},prependedContentDuration:T,baseMediaDecodeTime:d}};Bi=function(d,p){var h=[],g,_=0,T=0,w=1/0;p=p||{},g=p.firstSequenceNumber||0,Bi.prototype.init.call(this),this.push=function(S){Mt.collectDtsInfo(d,S),d&&ua.forEach(function(P){d[P]=S[P]}),h.push(S)},this.setEarliestDts=function(S){_=S},this.setVideoBaseMediaDecodeTime=function(S){w=S},this.setAudioAppendStart=function(S){T=S},this.flush=function(){var S,P,C,L,B,ee,ae;if(h.length===0){this.trigger("done","AudioSegmentStream");return}S=Bt.trimAdtsFramesByEarliestDts(h,d,_),d.baseMediaDecodeTime=Mt.calculateTrackBaseMediaDecodeTime(d,p.keepOriginalTimestamps),ae=Bt.prefixWithSilence(d,S,T,w),d.samples=Bt.generateSampleTable(S),C=bt.mdat(Bt.concatenateFrameData(S)),h=[],P=bt.moof(g,[d]),L=new Uint8Array(P.byteLength+C.byteLength),g++,L.set(P),L.set(C,P.byteLength),Mt.clearDtsInfo(d),B=Math.ceil(Pl*1024/d.samplerate),S.length&&(ee=S.length*B,this.trigger("segmentTimingInfo",la(Oe.audioTsToVideoTs(d.baseMediaDecodeTime,d.samplerate),S[0].dts,S[0].pts,S[0].dts+ee,S[0].pts+ee,ae||0)),this.trigger("timingInfo",{start:S[0].pts,end:S[0].pts+ee})),this.trigger("data",{track:d,boxes:L}),this.trigger("done","AudioSegmentStream")},this.reset=function(){Mt.clearDtsInfo(d),h=[],this.trigger("reset")}},Bi.prototype=new t,Sr=function(d,p){var h,g=[],_=[],T,w;p=p||{},h=p.firstSequenceNumber||0,Sr.prototype.init.call(this),delete d.minPTS,this.gopCache_=[],this.push=function(S){Mt.collectDtsInfo(d,S),S.nalUnitType==="seq_parameter_set_rbsp"&&!T&&(T=S.config,d.sps=[S.data],fn.forEach(function(P){d[P]=T[P]},this)),S.nalUnitType==="pic_parameter_set_rbsp"&&!w&&(w=S.data,d.pps=[S.data]),g.push(S)},this.flush=function(){for(var S,P,C,L,B,ee,ae=0,Q,ye;g.length&&g[0].nalUnitType!=="access_unit_delimiter_rbsp";)g.shift();if(g.length===0){this.resetStream_(),this.trigger("done","VideoSegmentStream");return}if(S=me.groupNalsIntoFrames(g),C=me.groupFramesIntoGops(S),C[0][0].keyFrame||(P=this.getGopForFusion_(g[0],d),P?(ae=P.duration,C.unshift(P),C.byteLength+=P.byteLength,C.nalCount+=P.nalCount,C.pts=P.pts,C.dts=P.dts,C.duration+=P.duration):C=me.extendFirstKeyFrame(C)),_.length){var nt;if(p.alignGopsAtEnd?nt=this.alignGopsAtEnd_(C):nt=this.alignGopsAtStart_(C),!nt){this.gopCache_.unshift({gop:C.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.resetStream_(),this.trigger("done","VideoSegmentStream");return}Mt.clearDtsInfo(d),C=nt}Mt.collectDtsInfo(d,C),d.samples=me.generateSampleTable(C),B=bt.mdat(me.concatenateNalData(C)),d.baseMediaDecodeTime=Mt.calculateTrackBaseMediaDecodeTime(d,p.keepOriginalTimestamps),this.trigger("processedGopsInfo",C.map(function(Ze){return{pts:Ze.pts,dts:Ze.dts,byteLength:Ze.byteLength}})),Q=C[0],ye=C[C.length-1],this.trigger("segmentTimingInfo",la(d.baseMediaDecodeTime,Q.dts,Q.pts,ye.dts+ye.duration,ye.pts+ye.duration,ae)),this.trigger("timingInfo",{start:C[0].pts,end:C[C.length-1].pts+C[C.length-1].duration}),this.gopCache_.unshift({gop:C.pop(),pps:d.pps,sps:d.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),g=[],this.trigger("baseMediaDecodeTime",d.baseMediaDecodeTime),this.trigger("timelineStartInfo",d.timelineStartInfo),L=bt.moof(h,[d]),ee=new Uint8Array(L.byteLength+B.byteLength),h++,ee.set(L),ee.set(B,L.byteLength),this.trigger("data",{track:d,boxes:ee}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),g=[],this.gopCache_.length=0,_.length=0,this.trigger("reset")},this.resetStream_=function(){Mt.clearDtsInfo(d),T=void 0,w=void 0},this.getGopForFusion_=function(S){var P=45e3,C=1e4,L=1/0,B,ee,ae,Q,ye;for(ye=0;ye<this.gopCache_.length;ye++)Q=this.gopCache_[ye],ae=Q.gop,!(!(d.pps&&Ns(d.pps[0],Q.pps[0]))||!(d.sps&&Ns(d.sps[0],Q.sps[0])))&&(ae.dts<d.timelineStartInfo.dts||(B=S.dts-ae.dts-ae.duration,B>=-C&&B<=P&&(!ee||L>B)&&(ee=Q,L=B)));return ee?ee.gop:null},this.alignGopsAtStart_=function(S){var P,C,L,B,ee,ae,Q,ye;for(ee=S.byteLength,ae=S.nalCount,Q=S.duration,P=C=0;P<_.length&&C<S.length&&(L=_[P],B=S[C],L.pts!==B.pts);){if(B.pts>L.pts){P++;continue}C++,ee-=B.byteLength,ae-=B.nalCount,Q-=B.duration}return C===0?S:C===S.length?null:(ye=S.slice(C),ye.byteLength=ee,ye.duration=Q,ye.nalCount=ae,ye.pts=ye[0].pts,ye.dts=ye[0].dts,ye)},this.alignGopsAtEnd_=function(S){var P,C,L,B,ee,ae;for(P=_.length-1,C=S.length-1,ee=null,ae=!1;P>=0&&C>=0;){if(L=_[P],B=S[C],L.pts===B.pts){ae=!0;break}if(L.pts>B.pts){P--;continue}P===_.length-1&&(ee=C),C--}if(!ae&&ee===null)return null;var Q;if(ae?Q=C:Q=ee,Q===0)return S;var ye=S.slice(Q),nt=ye.reduce(function(Ze,ni){return Ze.byteLength+=ni.byteLength,Ze.duration+=ni.duration,Ze.nalCount+=ni.nalCount,Ze},{byteLength:0,duration:0,nalCount:0});return ye.byteLength=nt.byteLength,ye.duration=nt.duration,ye.nalCount=nt.nalCount,ye.pts=ye[0].pts,ye.dts=ye[0].dts,ye},this.alignGopsWith=function(S){_=S}},Sr.prototype=new t,rt=function(d,p){this.numberOfTracks=0,this.metadataStream=p,d=d||{},typeof d.remux<"u"?this.remuxTracks=!!d.remux:this.remuxTracks=!0,typeof d.keepOriginalTimestamps=="boolean"?this.keepOriginalTimestamps=d.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,rt.prototype.init.call(this),this.push=function(h){if(h.text)return this.pendingCaptions.push(h);if(h.frames)return this.pendingMetadata.push(h);this.pendingTracks.push(h.track),this.pendingBytes+=h.boxes.byteLength,h.track.type==="video"&&(this.videoTrack=h.track,this.pendingBoxes.push(h.boxes)),h.track.type==="audio"&&(this.audioTrack=h.track,this.pendingBoxes.unshift(h.boxes))}},rt.prototype=new t,rt.prototype.flush=function(x){var d=0,p={captions:[],captionStreams:{},metadata:[],info:{}},h,g,_,T=0,w;if(this.pendingTracks.length<this.numberOfTracks){if(x!=="VideoSegmentStream"&&x!=="AudioSegmentStream")return;if(this.remuxTracks)return;if(this.pendingTracks.length===0){this.emittedTracks++,this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0);return}}if(this.videoTrack?(T=this.videoTrack.timelineStartInfo.pts,fn.forEach(function(S){p.info[S]=this.videoTrack[S]},this)):this.audioTrack&&(T=this.audioTrack.timelineStartInfo.pts,ua.forEach(function(S){p.info[S]=this.audioTrack[S]},this)),this.videoTrack||this.audioTrack){for(this.pendingTracks.length===1?p.type=this.pendingTracks[0].type:p.type="combined",this.emittedTracks+=this.pendingTracks.length,_=bt.initSegment(this.pendingTracks),p.initSegment=new Uint8Array(_.byteLength),p.initSegment.set(_),p.data=new Uint8Array(this.pendingBytes),w=0;w<this.pendingBoxes.length;w++)p.data.set(this.pendingBoxes[w],d),d+=this.pendingBoxes[w].byteLength;for(w=0;w<this.pendingCaptions.length;w++)h=this.pendingCaptions[w],h.startTime=Oe.metadataTsToSeconds(h.startPts,T,this.keepOriginalTimestamps),h.endTime=Oe.metadataTsToSeconds(h.endPts,T,this.keepOriginalTimestamps),p.captionStreams[h.stream]=!0,p.captions.push(h);for(w=0;w<this.pendingMetadata.length;w++)g=this.pendingMetadata[w],g.cueTime=Oe.metadataTsToSeconds(g.pts,T,this.keepOriginalTimestamps),p.metadata.push(g);for(p.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",p),w=0;w<p.captions.length;w++)h=p.captions[w],this.trigger("caption",h);for(w=0;w<p.metadata.length;w++)g=p.metadata[w],this.trigger("id3Frame",g)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},rt.prototype.setRemux=function(x){this.remuxTracks=x},_t=function(d){var p=this,h=!0,g,_;_t.prototype.init.call(this),d=d||{},this.baseMediaDecodeTime=d.baseMediaDecodeTime||0,this.transmuxPipeline_={},this.setupAacPipeline=function(){var T={};this.transmuxPipeline_=T,T.type="aac",T.metadataStream=new Kt.MetadataStream,T.aacStream=new El,T.audioTimestampRolloverStream=new Kt.TimestampRolloverStream("audio"),T.timedMetadataTimestampRolloverStream=new Kt.TimestampRolloverStream("timed-metadata"),T.adtsStream=new Ls,T.coalesceStream=new rt(d,T.metadataStream),T.headOfPipeline=T.aacStream,T.aacStream.pipe(T.audioTimestampRolloverStream).pipe(T.adtsStream),T.aacStream.pipe(T.timedMetadataTimestampRolloverStream).pipe(T.metadataStream).pipe(T.coalesceStream),T.metadataStream.on("timestamp",function(w){T.aacStream.setTimestamp(w.timeStamp)}),T.aacStream.on("data",function(w){w.type!=="timed-metadata"&&w.type!=="audio"||T.audioSegmentStream||(_=_||{timelineStartInfo:{baseMediaDecodeTime:p.baseMediaDecodeTime},codec:"adts",type:"audio"},T.coalesceStream.numberOfTracks++,T.audioSegmentStream=new Bi(_,d),T.audioSegmentStream.on("log",p.getLogTrigger_("audioSegmentStream")),T.audioSegmentStream.on("timingInfo",p.trigger.bind(p,"audioTimingInfo")),T.adtsStream.pipe(T.audioSegmentStream).pipe(T.coalesceStream),p.trigger("trackinfo",{hasAudio:!!_,hasVideo:!!g}))}),T.coalesceStream.on("data",this.trigger.bind(this,"data")),T.coalesceStream.on("done",this.trigger.bind(this,"done")),Fs(this,T)},this.setupTsPipeline=function(){var T={};this.transmuxPipeline_=T,T.type="ts",T.metadataStream=new Kt.MetadataStream,T.packetStream=new Kt.TransportPacketStream,T.parseStream=new Kt.TransportParseStream,T.elementaryStream=new Kt.ElementaryStream,T.timestampRolloverStream=new Kt.TimestampRolloverStream,T.adtsStream=new Ls,T.h264Stream=new Al,T.captionStream=new Kt.CaptionStream(d),T.coalesceStream=new rt(d,T.metadataStream),T.headOfPipeline=T.packetStream,T.packetStream.pipe(T.parseStream).pipe(T.elementaryStream).pipe(T.timestampRolloverStream),T.timestampRolloverStream.pipe(T.h264Stream),T.timestampRolloverStream.pipe(T.adtsStream),T.timestampRolloverStream.pipe(T.metadataStream).pipe(T.coalesceStream),T.h264Stream.pipe(T.captionStream).pipe(T.coalesceStream),T.elementaryStream.on("data",function(w){var S;if(w.type==="metadata"){for(S=w.tracks.length;S--;)!g&&w.tracks[S].type==="video"?(g=w.tracks[S],g.timelineStartInfo.baseMediaDecodeTime=p.baseMediaDecodeTime):!_&&w.tracks[S].type==="audio"&&(_=w.tracks[S],_.timelineStartInfo.baseMediaDecodeTime=p.baseMediaDecodeTime);g&&!T.videoSegmentStream&&(T.coalesceStream.numberOfTracks++,T.videoSegmentStream=new Sr(g,d),T.videoSegmentStream.on("log",p.getLogTrigger_("videoSegmentStream")),T.videoSegmentStream.on("timelineStartInfo",function(P){_&&!d.keepOriginalTimestamps&&(_.timelineStartInfo=P,T.audioSegmentStream.setEarliestDts(P.dts-p.baseMediaDecodeTime))}),T.videoSegmentStream.on("processedGopsInfo",p.trigger.bind(p,"gopInfo")),T.videoSegmentStream.on("segmentTimingInfo",p.trigger.bind(p,"videoSegmentTimingInfo")),T.videoSegmentStream.on("baseMediaDecodeTime",function(P){_&&T.audioSegmentStream.setVideoBaseMediaDecodeTime(P)}),T.videoSegmentStream.on("timingInfo",p.trigger.bind(p,"videoTimingInfo")),T.h264Stream.pipe(T.videoSegmentStream).pipe(T.coalesceStream)),_&&!T.audioSegmentStream&&(T.coalesceStream.numberOfTracks++,T.audioSegmentStream=new Bi(_,d),T.audioSegmentStream.on("log",p.getLogTrigger_("audioSegmentStream")),T.audioSegmentStream.on("timingInfo",p.trigger.bind(p,"audioTimingInfo")),T.audioSegmentStream.on("segmentTimingInfo",p.trigger.bind(p,"audioSegmentTimingInfo")),T.adtsStream.pipe(T.audioSegmentStream).pipe(T.coalesceStream)),p.trigger("trackinfo",{hasAudio:!!_,hasVideo:!!g})}}),T.coalesceStream.on("data",this.trigger.bind(this,"data")),T.coalesceStream.on("id3Frame",function(w){w.dispatchType=T.metadataStream.dispatchType,p.trigger("id3Frame",w)}),T.coalesceStream.on("caption",this.trigger.bind(this,"caption")),T.coalesceStream.on("done",this.trigger.bind(this,"done")),Fs(this,T)},this.setBaseMediaDecodeTime=function(T){var w=this.transmuxPipeline_;d.keepOriginalTimestamps||(this.baseMediaDecodeTime=T),_&&(_.timelineStartInfo.dts=void 0,_.timelineStartInfo.pts=void 0,Mt.clearDtsInfo(_),w.audioTimestampRolloverStream&&w.audioTimestampRolloverStream.discontinuity()),g&&(w.videoSegmentStream&&(w.videoSegmentStream.gopCache_=[]),g.timelineStartInfo.dts=void 0,g.timelineStartInfo.pts=void 0,Mt.clearDtsInfo(g),w.captionStream.reset()),w.timestampRolloverStream&&w.timestampRolloverStream.discontinuity()},this.setAudioAppendStart=function(T){_&&this.transmuxPipeline_.audioSegmentStream.setAudioAppendStart(T)},this.setRemux=function(T){var w=this.transmuxPipeline_;d.remux=T,w&&w.coalesceStream&&w.coalesceStream.setRemux(T)},this.alignGopsWith=function(T){g&&this.transmuxPipeline_.videoSegmentStream&&this.transmuxPipeline_.videoSegmentStream.alignGopsWith(T)},this.getLogTrigger_=function(T){var w=this;return function(S){S.stream=T,w.trigger("log",S)}},this.push=function(T){if(h){var w=Il(T);w&&this.transmuxPipeline_.type!=="aac"?this.setupAacPipeline():!w&&this.transmuxPipeline_.type!=="ts"&&this.setupTsPipeline(),h=!1}this.transmuxPipeline_.headOfPipeline.push(T)},this.flush=function(){h=!0,this.transmuxPipeline_.headOfPipeline.flush()},this.endTimeline=function(){this.transmuxPipeline_.headOfPipeline.endTimeline()},this.reset=function(){this.transmuxPipeline_.headOfPipeline&&this.transmuxPipeline_.headOfPipeline.reset()},this.resetCaptions=function(){this.transmuxPipeline_.captionStream&&this.transmuxPipeline_.captionStream.reset()}},_t.prototype=new t;var Dl={Transmuxer:_t,VideoSegmentStream:Sr,AudioSegmentStream:Bi,AUDIO_PROPERTIES:ua,VIDEO_PROPERTIES:fn,generateSegmentTimingInfo:la},Ll=function(d){return d>>>0},qo=function(d){return("00"+d.toString(16)).slice(-2)},cn={toUnsigned:Ll,toHexString:qo},Xt=function(d){var p="";return p+=String.fromCharCode(d[0]),p+=String.fromCharCode(d[1]),p+=String.fromCharCode(d[2]),p+=String.fromCharCode(d[3]),p},si=Xt,hn=cn.toUnsigned,Go=function x(d,p){var h=[],g,_,T,w,S;if(!p.length)return null;for(g=0;g<d.byteLength;)_=hn(d[g]<<24|d[g+1]<<16|d[g+2]<<8|d[g+3]),T=si(d.subarray(g+4,g+8)),w=_>1?g+_:d.byteLength,T===p[0]&&(p.length===1?h.push(d.subarray(g+8,w)):(S=x(d.subarray(g+8,w),p.slice(1)),S.length&&(h=h.concat(S)))),g=w;return h},He=Go,Di=cn.toUnsigned,zo=e.getUint64,Ko=function(d){var p={version:d[0],flags:new Uint8Array(d.subarray(1,4))};return p.version===1?p.baseMediaDecodeTime=zo(d.subarray(4)):p.baseMediaDecodeTime=Di(d[4]<<24|d[5]<<16|d[6]<<8|d[7]),p},Ja=Ko,Xo=function(d){return{isLeading:(d[0]&12)>>>2,dependsOn:d[0]&3,isDependedOn:(d[1]&192)>>>6,hasRedundancy:(d[1]&48)>>>4,paddingValue:(d[1]&14)>>>1,isNonSyncSample:d[1]&1,degradationPriority:d[2]<<8|d[3]}},Za=Xo,Qo=function(d){var p={version:d[0],flags:new Uint8Array(d.subarray(1,4)),samples:[]},h=new DataView(d.buffer,d.byteOffset,d.byteLength),g=p.flags[2]&1,_=p.flags[2]&4,T=p.flags[1]&1,w=p.flags[1]&2,S=p.flags[1]&4,P=p.flags[1]&8,C=h.getUint32(4),L=8,B;for(g&&(p.dataOffset=h.getInt32(L),L+=4),_&&C&&(B={flags:Za(d.subarray(L,L+4))},L+=4,T&&(B.duration=h.getUint32(L),L+=4),w&&(B.size=h.getUint32(L),L+=4),P&&(p.version===1?B.compositionTimeOffset=h.getInt32(L):B.compositionTimeOffset=h.getUint32(L),L+=4),p.samples.push(B),C--);C--;)B={},T&&(B.duration=h.getUint32(L),L+=4),w&&(B.size=h.getUint32(L),L+=4),S&&(B.flags=Za(d.subarray(L,L+4)),L+=4),P&&(p.version===1?B.compositionTimeOffset=h.getInt32(L):B.compositionTimeOffset=h.getUint32(L),L+=4),p.samples.push(B);return p},oi=Qo,kl=function(d){var p=new DataView(d.buffer,d.byteOffset,d.byteLength),h={version:d[0],flags:new Uint8Array(d.subarray(1,4)),trackId:p.getUint32(4)},g=h.flags[2]&1,_=h.flags[2]&2,T=h.flags[2]&8,w=h.flags[2]&16,S=h.flags[2]&32,P=h.flags[0]&65536,C=h.flags[0]&131072,L;return L=8,g&&(L+=4,h.baseDataOffset=p.getUint32(12),L+=4),_&&(h.sampleDescriptionIndex=p.getUint32(L),L+=4),T&&(h.defaultSampleDuration=p.getUint32(L),L+=4),w&&(h.defaultSampleSize=p.getUint32(L),L+=4),S&&(h.defaultSampleFlags=p.getUint32(L)),P&&(h.durationIsEmpty=!0),!g&&C&&(h.baseDataOffsetIsMoof=!0),h},ci=kl,Us=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},nr;typeof window<"u"?nr=window:typeof Us<"u"?nr=Us:typeof self<"u"?nr=self:nr={};var ri=nr,es=_r.discardEmulationPreventionBytes,Bs=nn.CaptionStream,Dt=function(d,p){for(var h=d,g=0;g<p.length;g++){var _=p[g];if(h<_.size)return _;h-=_.size}return null},Hr=function(d,p,h){var g=new DataView(d.buffer,d.byteOffset,d.byteLength),_={logs:[],seiNals:[]},T,w,S,P;for(w=0;w+4<d.length;w+=S)if(S=g.getUint32(w),w+=4,!(S<=0))switch(d[w]&31){case 6:var C=d.subarray(w+1,w+1+S),L=Dt(w,p);if(T={nalUnitType:"sei_rbsp",size:S,data:C,escapedRBSP:es(C),trackId:h},L)T.pts=L.pts,T.dts=L.dts,P=L;else if(P)T.pts=P.pts,T.dts=P.dts;else{_.logs.push({level:"warn",message:"We've encountered a nal unit without data at "+w+" for trackId "+h+". See mux.js#223."});break}_.seiNals.push(T);break}return _},js=function(d,p,h){var g=p,_=h.defaultSampleDuration||0,T=h.defaultSampleSize||0,w=h.trackId,S=[];return d.forEach(function(P){var C=oi(P),L=C.samples;L.forEach(function(B){B.duration===void 0&&(B.duration=_),B.size===void 0&&(B.size=T),B.trackId=w,B.dts=g,B.compositionTimeOffset===void 0&&(B.compositionTimeOffset=0),typeof g=="bigint"?(B.pts=g+ri.BigInt(B.compositionTimeOffset),g+=ri.BigInt(B.duration)):(B.pts=g+B.compositionTimeOffset,g+=B.duration)}),S=S.concat(L)}),S},Rl=function(d,p){var h=He(d,["moof","traf"]),g=He(d,["mdat"]),_={},T=[];return g.forEach(function(w,S){var P=h[S];T.push({mdat:w,traf:P})}),T.forEach(function(w){var S=w.mdat,P=w.traf,C=He(P,["tfhd"]),L=ci(C[0]),B=L.trackId,ee=He(P,["tfdt"]),ae=ee.length>0?Ja(ee[0]).baseMediaDecodeTime:0,Q=He(P,["trun"]),ye,nt;p===B&&Q.length>0&&(ye=js(Q,ae,L),nt=Hr(S,ye,B),_[B]||(_[B]={seiNals:[],logs:[]}),_[B].seiNals=_[B].seiNals.concat(nt.seiNals),_[B].logs=_[B].logs.concat(nt.logs))}),_},Vs=function(d,p,h){var g;if(p===null)return null;g=Rl(d,p);var _=g[p]||{};return{seiNals:_.seiNals,logs:_.logs,timescale:h}},Ml=function(){var d=!1,p,h,g,_,T,w;this.isInitialized=function(){return d},this.init=function(S){p=new Bs,d=!0,w=S?S.isPartial:!1,p.on("data",function(P){P.startTime=P.startPts/_,P.endTime=P.endPts/_,T.captions.push(P),T.captionStreams[P.stream]=!0}),p.on("log",function(P){T.logs.push(P)})},this.isNewInit=function(S,P){return S&&S.length===0||P&&typeof P=="object"&&Object.keys(P).length===0?!1:g!==S[0]||_!==P[g]},this.parse=function(S,P,C){var L;if(this.isInitialized()){if(!P||!C)return null;if(this.isNewInit(P,C))g=P[0],_=C[g];else if(g===null||!_)return h.push(S),null}else return null;for(;h.length>0;){var B=h.shift();this.parse(B,P,C)}return L=Vs(S,g,_),L&&L.logs&&(T.logs=T.logs.concat(L.logs)),L===null||!L.seiNals?T.logs.length?{logs:T.logs,captions:[],captionStreams:[]}:null:(this.pushNals(L.seiNals),this.flushStream(),T)},this.pushNals=function(S){if(!this.isInitialized()||!S||S.length===0)return null;S.forEach(function(P){p.push(P)})},this.flushStream=function(){if(!this.isInitialized())return null;w?p.partialFlush():p.flush()},this.clearParsedCaptions=function(){T.captions=[],T.captionStreams={},T.logs=[]},this.resetCaptionStream=function(){if(!this.isInitialized())return null;p.reset()},this.clearAllCaptions=function(){this.clearParsedCaptions(),this.resetCaptionStream()},this.reset=function(){h=[],g=null,_=null,T?this.clearParsedCaptions():T={captions:[],captionStreams:{},logs:[]},this.resetCaptionStream()},this.reset()},Fl=Ml,pn=cn.toUnsigned,ar=cn.toHexString,ts=e.getUint64,$r,Hs,is,rs,da,mn;$r=function(d){var p={},h=He(d,["moov","trak"]);return h.reduce(function(g,_){var T,w,S,P,C;return T=He(_,["tkhd"])[0],!T||(w=T[0],S=w===0?12:20,P=pn(T[S]<<24|T[S+1]<<16|T[S+2]<<8|T[S+3]),C=He(_,["mdia","mdhd"])[0],!C)?null:(w=C[0],S=w===0?12:20,g[P]=pn(C[S]<<24|C[S+1]<<16|C[S+2]<<8|C[S+3]),g)},p)},Hs=function(d,p){var h;h=He(p,["moof","traf"]);var g=h.reduce(function(_,T){var w=He(T,["tfhd"])[0],S=pn(w[4]<<24|w[5]<<16|w[6]<<8|w[7]),P=d[S]||9e4,C=He(T,["tfdt"])[0],L=new DataView(C.buffer,C.byteOffset,C.byteLength),B;C[0]===1?B=ts(C.subarray(4,12)):B=L.getUint32(4);var ee;return typeof B=="bigint"?ee=B/ri.BigInt(P):typeof B=="number"&&!isNaN(B)&&(ee=B/P),ee<Number.MAX_SAFE_INTEGER&&(ee=Number(ee)),ee<_&&(_=ee),_},1/0);return typeof g=="bigint"||isFinite(g)?g:0},is=function(d,p){var h=He(p,["moof","traf"]),g=0,_=0,T;if(h&&h.length){var w=He(h[0],["tfhd"])[0],S=He(h[0],["trun"])[0],P=He(h[0],["tfdt"])[0];if(w){var C=ci(w);T=C.trackId}if(P){var L=Ja(P);g=L.baseMediaDecodeTime}if(S){var B=oi(S);B.samples&&B.samples.length&&(_=B.samples[0].compositionTimeOffset||0)}}var ee=d[T]||9e4;typeof g=="bigint"&&(_=ri.BigInt(_),ee=ri.BigInt(ee));var ae=(g+_)/ee;return typeof ae=="bigint"&&ae<Number.MAX_SAFE_INTEGER&&(ae=Number(ae)),ae},rs=function(d){var p=He(d,["moov","trak"]),h=[];return p.forEach(function(g){var _=He(g,["mdia","hdlr"]),T=He(g,["tkhd"]);_.forEach(function(w,S){var P=si(w.subarray(8,12)),C=T[S],L,B,ee;P==="vide"&&(L=new DataView(C.buffer,C.byteOffset,C.byteLength),B=L.getUint8(0),ee=B===0?L.getUint32(12):L.getUint32(20),h.push(ee))})}),h},mn=function(d){var p=d[0],h=p===0?12:20;return pn(d[h]<<24|d[h+1]<<16|d[h+2]<<8|d[h+3])},da=function(d){var p=He(d,["moov","trak"]),h=[];return p.forEach(function(g){var _={},T=He(g,["tkhd"])[0],w,S;T&&(w=new DataView(T.buffer,T.byteOffset,T.byteLength),S=w.getUint8(0),_.id=S===0?w.getUint32(12):w.getUint32(20));var P=He(g,["mdia","hdlr"])[0];if(P){var C=si(P.subarray(8,12));C==="vide"?_.type="video":C==="soun"?_.type="audio":_.type=C}var L=He(g,["mdia","minf","stbl","stsd"])[0];if(L){var B=L.subarray(8);_.codec=si(B.subarray(4,8));var ee=He(B,[_.codec])[0],ae,Q;ee&&(/^[asm]vc[1-9]$/i.test(_.codec)?(ae=ee.subarray(78),Q=si(ae.subarray(4,8)),Q==="avcC"&&ae.length>11?(_.codec+=".",_.codec+=ar(ae[9]),_.codec+=ar(ae[10]),_.codec+=ar(ae[11])):_.codec="avc1.4d400d"):/^mp4[a,v]$/i.test(_.codec)?(ae=ee.subarray(28),Q=si(ae.subarray(4,8)),Q==="esds"&&ae.length>20&&ae[19]!==0?(_.codec+="."+ar(ae[19]),_.codec+="."+ar(ae[20]>>>2&63).replace(/^0/,"")):_.codec="mp4a.40.2"):_.codec=_.codec.toLowerCase())}var ye=He(g,["mdia","mdhd"])[0];ye&&(_.timescale=mn(ye)),h.push(_)}),h};var ns={findBox:He,parseType:si,timescale:$r,startTime:Hs,compositionStartTime:is,videoTrackIds:rs,tracks:da,getTimescaleFromMediaHeader:mn},$s=function(d){var p=d[1]&31;return p<<=8,p|=d[2],p},Er=function(d){return!!(d[1]&64)},wr=function(d){var p=0;return(d[3]&48)>>>4>1&&(p+=d[4]+1),p},Nl=function(d,p){var h=$s(d);return h===0?"pat":h===p?"pmt":p?"pes":null},Yo=function(d){var p=Er(d),h=4+wr(d);return p&&(h+=d[h]+1),(d[h+10]&31)<<8|d[h+11]},bi=function(d){var p={},h=Er(d),g=4+wr(d);if(h&&(g+=d[g]+1),!!(d[g+5]&1)){var _,T,w;_=(d[g+1]&15)<<8|d[g+2],T=3+_-4,w=(d[g+10]&15)<<8|d[g+11];for(var S=12+w;S<T;){var P=g+S;p[(d[P+1]&31)<<8|d[P+2]]=d[P],S+=((d[P+3]&15)<<8|d[P+4])+5}return p}},Ws=function(d,p){var h=$s(d),g=p[h];switch(g){case ht.H264_STREAM_TYPE:return"video";case ht.ADTS_STREAM_TYPE:return"audio";case ht.METADATA_STREAM_TYPE:return"timed-metadata";default:return null}},fa=function(d){var p=Er(d);if(!p)return null;var h=4+wr(d);if(h>=d.byteLength)return null;var g=null,_;return _=d[h+7],_&192&&(g={},g.pts=(d[h+9]&14)<<27|(d[h+10]&255)<<20|(d[h+11]&254)<<12|(d[h+12]&255)<<5|(d[h+13]&254)>>>3,g.pts*=4,g.pts+=(d[h+13]&6)>>>1,g.dts=g.pts,_&64&&(g.dts=(d[h+14]&14)<<27|(d[h+15]&255)<<20|(d[h+16]&254)<<12|(d[h+17]&255)<<5|(d[h+18]&254)>>>3,g.dts*=4,g.dts+=(d[h+18]&6)>>>1)),g},Nn=function(d){switch(d){case 5:return"slice_layer_without_partitioning_rbsp_idr";case 6:return"sei_rbsp";case 7:return"seq_parameter_set_rbsp";case 8:return"pic_parameter_set_rbsp";case 9:return"access_unit_delimiter_rbsp";default:return null}},Jo=function(d){for(var p=4+wr(d),h=d.subarray(p),g=0,_=0,T=!1,w;_<h.byteLength-3;_++)if(h[_+2]===1){g=_+5;break}for(;g<h.byteLength;)switch(h[g]){case 0:if(h[g-1]!==0){g+=2;break}else if(h[g-2]!==0){g++;break}_+3!==g-2&&(w=Nn(h[_+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0));do{g++}while(h[g]!==1&&g<h.length);_=g-2,g+=3;break;case 1:if(h[g-1]!==0||h[g-2]!==0){g+=3;break}w=Nn(h[_+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0),_=g-2,g+=3;break;default:g+=3;break}return h=h.subarray(_),g-=_,_=0,h&&h.byteLength>3&&(w=Nn(h[_+3]&31),w==="slice_layer_without_partitioning_rbsp_idr"&&(T=!0)),T},Ul={parseType:Nl,parsePat:Yo,parsePmt:bi,parsePayloadUnitStartIndicator:Er,parsePesType:Ws,parsePesTime:fa,videoPacketContainsKeyFrame:Jo},ji=Ds.handleRollover,Fe={};Fe.ts=Ul,Fe.aac=dn;var xi=Oe.ONE_SECOND_IN_TS,St=188,Lt=71,Bl=function(d,p){for(var h=0,g=St,_,T;g<d.byteLength;){if(d[h]===Lt&&d[g]===Lt){switch(_=d.subarray(h,g),T=Fe.ts.parseType(_,p.pid),T){case"pat":p.pid=Fe.ts.parsePat(_);break;case"pmt":var w=Fe.ts.parsePmt(_);p.table=p.table||{},Object.keys(w).forEach(function(S){p.table[S]=w[S]});break}h+=St,g+=St;continue}h++,g++}},qs=function(d,p,h){for(var g=0,_=St,T,w,S,P,C,L=!1;_<=d.byteLength;){if(d[g]===Lt&&(d[_]===Lt||_===d.byteLength)){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="audio"&&P&&(C=Fe.ts.parsePesTime(T),C&&(C.type="audio",h.audio.push(C),L=!0));break}if(L)break;g+=St,_+=St;continue}g++,_++}for(_=d.byteLength,g=_-St,L=!1;g>=0;){if(d[g]===Lt&&(d[_]===Lt||_===d.byteLength)){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="audio"&&P&&(C=Fe.ts.parsePesTime(T),C&&(C.type="audio",h.audio.push(C),L=!0));break}if(L)break;g-=St,_-=St;continue}g--,_--}},Gs=function(d,p,h){for(var g=0,_=St,T,w,S,P,C,L,B,ee,ae=!1,Q={data:[],size:0};_<d.byteLength;){if(d[g]===Lt&&d[_]===Lt){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":if(S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="video"&&(P&&!ae&&(C=Fe.ts.parsePesTime(T),C&&(C.type="video",h.video.push(C),ae=!0)),!h.firstKeyFrame)){if(P&&Q.size!==0){for(L=new Uint8Array(Q.size),B=0;Q.data.length;)ee=Q.data.shift(),L.set(ee,B),B+=ee.byteLength;if(Fe.ts.videoPacketContainsKeyFrame(L)){var ye=Fe.ts.parsePesTime(L);ye?(h.firstKeyFrame=ye,h.firstKeyFrame.type="video"):console.warn("Failed to extract PTS/DTS from PES at first keyframe. This could be an unusual TS segment, or else mux.js did not parse your TS segment correctly. If you know your TS segments do contain PTS/DTS on keyframes please file a bug report! You can try ffprobe to double check for yourself.")}Q.size=0}Q.data.push(T),Q.size+=T.byteLength}break}if(ae&&h.firstKeyFrame)break;g+=St,_+=St;continue}g++,_++}for(_=d.byteLength,g=_-St,ae=!1;g>=0;){if(d[g]===Lt&&d[_]===Lt){switch(T=d.subarray(g,_),w=Fe.ts.parseType(T,p.pid),w){case"pes":S=Fe.ts.parsePesType(T,p.table),P=Fe.ts.parsePayloadUnitStartIndicator(T),S==="video"&&P&&(C=Fe.ts.parsePesTime(T),C&&(C.type="video",h.video.push(C),ae=!0));break}if(ae)break;g-=St,_-=St;continue}g--,_--}},Zo=function(d,p){if(d.audio&&d.audio.length){var h=p;(typeof h>"u"||isNaN(h))&&(h=d.audio[0].dts),d.audio.forEach(function(T){T.dts=ji(T.dts,h),T.pts=ji(T.pts,h),T.dtsTime=T.dts/xi,T.ptsTime=T.pts/xi})}if(d.video&&d.video.length){var g=p;if((typeof g>"u"||isNaN(g))&&(g=d.video[0].dts),d.video.forEach(function(T){T.dts=ji(T.dts,g),T.pts=ji(T.pts,g),T.dtsTime=T.dts/xi,T.ptsTime=T.pts/xi}),d.firstKeyFrame){var _=d.firstKeyFrame;_.dts=ji(_.dts,g),_.pts=ji(_.pts,g),_.dtsTime=_.dts/xi,_.ptsTime=_.pts/xi}}},Wr=function(d){for(var p=!1,h=0,g=null,_=null,T=0,w=0,S;d.length-w>=3;){var P=Fe.aac.parseType(d,w);switch(P){case"timed-metadata":if(d.length-w<10){p=!0;break}if(T=Fe.aac.parseId3TagSize(d,w),T>d.length){p=!0;break}_===null&&(S=d.subarray(w,w+T),_=Fe.aac.parseAacTimestamp(S)),w+=T;break;case"audio":if(d.length-w<7){p=!0;break}if(T=Fe.aac.parseAdtsSize(d,w),T>d.length){p=!0;break}g===null&&(S=d.subarray(w,w+T),g=Fe.aac.parseSampleRate(S)),h++,w+=T;break;default:w++;break}if(p)return null}if(g===null||_===null)return null;var C=xi/g,L={audio:[{type:"audio",dts:_,pts:_},{type:"audio",dts:_+h*1024*C,pts:_+h*1024*C}]};return L},as=function(d){var p={pid:null,table:null},h={};Bl(d,p);for(var g in p.table)if(p.table.hasOwnProperty(g)){var _=p.table[g];switch(_){case ht.H264_STREAM_TYPE:h.video=[],Gs(d,p,h),h.video.length===0&&delete h.video;break;case ht.ADTS_STREAM_TYPE:h.audio=[],qs(d,p,h),h.audio.length===0&&delete h.audio;break}}return h},jl=function(d,p){var h=Fe.aac.isLikelyAacData(d),g;return h?g=Wr(d):g=as(d),!g||!g.audio&&!g.video?null:(Zo(g,p),g)},Vl={inspect:jl,parseAudioPes_:qs},Hl=function(d,p){p.on("data",function(h){var g=h.initSegment;h.initSegment={data:g.buffer,byteOffset:g.byteOffset,byteLength:g.byteLength};var _=h.data;h.data=_.buffer,d.postMessage({action:"data",segment:h,byteOffset:_.byteOffset,byteLength:_.byteLength},[h.data])}),p.on("done",function(h){d.postMessage({action:"done"})}),p.on("gopInfo",function(h){d.postMessage({action:"gopInfo",gopInfo:h})}),p.on("videoSegmentTimingInfo",function(h){var g={start:{decode:Oe.videoTsToSeconds(h.start.dts),presentation:Oe.videoTsToSeconds(h.start.pts)},end:{decode:Oe.videoTsToSeconds(h.end.dts),presentation:Oe.videoTsToSeconds(h.end.pts)},baseMediaDecodeTime:Oe.videoTsToSeconds(h.baseMediaDecodeTime)};h.prependedContentDuration&&(g.prependedContentDuration=Oe.videoTsToSeconds(h.prependedContentDuration)),d.postMessage({action:"videoSegmentTimingInfo",videoSegmentTimingInfo:g})}),p.on("audioSegmentTimingInfo",function(h){var g={start:{decode:Oe.videoTsToSeconds(h.start.dts),presentation:Oe.videoTsToSeconds(h.start.pts)},end:{decode:Oe.videoTsToSeconds(h.end.dts),presentation:Oe.videoTsToSeconds(h.end.pts)},baseMediaDecodeTime:Oe.videoTsToSeconds(h.baseMediaDecodeTime)};h.prependedContentDuration&&(g.prependedContentDuration=Oe.videoTsToSeconds(h.prependedContentDuration)),d.postMessage({action:"audioSegmentTimingInfo",audioSegmentTimingInfo:g})}),p.on("id3Frame",function(h){d.postMessage({action:"id3Frame",id3Frame:h})}),p.on("caption",function(h){d.postMessage({action:"caption",caption:h})}),p.on("trackinfo",function(h){d.postMessage({action:"trackinfo",trackInfo:h})}),p.on("audioTimingInfo",function(h){d.postMessage({action:"audioTimingInfo",audioTimingInfo:{start:Oe.videoTsToSeconds(h.start),end:Oe.videoTsToSeconds(h.end)}})}),p.on("videoTimingInfo",function(h){d.postMessage({action:"videoTimingInfo",videoTimingInfo:{start:Oe.videoTsToSeconds(h.start),end:Oe.videoTsToSeconds(h.end)}})}),p.on("log",function(h){d.postMessage({action:"log",log:h})})},qr=function(){function x(p,h){this.options=h||{},this.self=p,this.init()}var d=x.prototype;return d.init=function(){this.transmuxer&&this.transmuxer.dispose(),this.transmuxer=new Dl.Transmuxer(this.options),Hl(this.self,this.transmuxer)},d.pushMp4Captions=function(h){this.captionParser||(this.captionParser=new Fl,this.captionParser.init());var g=new Uint8Array(h.data,h.byteOffset,h.byteLength),_=this.captionParser.parse(g,h.trackIds,h.timescales);this.self.postMessage({action:"mp4Captions",captions:_&&_.captions||[],logs:_&&_.logs||[],data:g.buffer},[g.buffer])},d.probeMp4StartTime=function(h){var g=h.timescales,_=h.data,T=ns.startTime(g,_);this.self.postMessage({action:"probeMp4StartTime",startTime:T,data:_},[_.buffer])},d.probeMp4Tracks=function(h){var g=h.data,_=ns.tracks(g);this.self.postMessage({action:"probeMp4Tracks",tracks:_,data:g},[g.buffer])},d.probeTs=function(h){var g=h.data,_=h.baseStartTime,T=typeof _=="number"&&!isNaN(_)?_*Oe.ONE_SECOND_IN_TS:void 0,w=Vl.inspect(g,T),S=null;w&&(S={hasVideo:w.video&&w.video.length===2||!1,hasAudio:w.audio&&w.audio.length===2||!1},S.hasVideo&&(S.videoStart=w.video[0].ptsTime),S.hasAudio&&(S.audioStart=w.audio[0].ptsTime)),this.self.postMessage({action:"probeTs",result:S,data:g},[g.buffer])},d.clearAllMp4Captions=function(){this.captionParser&&this.captionParser.clearAllCaptions()},d.clearParsedMp4Captions=function(){this.captionParser&&this.captionParser.clearParsedCaptions()},d.push=function(h){var g=new Uint8Array(h.data,h.byteOffset,h.byteLength);this.transmuxer.push(g)},d.reset=function(){this.transmuxer.reset()},d.setTimestampOffset=function(h){var g=h.timestampOffset||0;this.transmuxer.setBaseMediaDecodeTime(Math.round(Oe.secondsToVideoTs(g)))},d.setAudioAppendStart=function(h){this.transmuxer.setAudioAppendStart(Math.ceil(Oe.secondsToVideoTs(h.appendStart)))},d.setRemux=function(h){this.transmuxer.setRemux(h.remux)},d.flush=function(h){this.transmuxer.flush(),self.postMessage({action:"done",type:"transmuxed"})},d.endTimeline=function(){this.transmuxer.endTimeline(),self.postMessage({action:"endedtimeline",type:"transmuxed"})},d.alignGopsWith=function(h){this.transmuxer.alignGopsWith(h.gopsToAlignWith.slice())},x}();self.onmessage=function(x){if(x.data.action==="init"&&x.data.options){this.messageHandlers=new qr(self,x.data.options);return}this.messageHandlers||(this.messageHandlers=new qr(self)),x.data&&x.data.action&&x.data.action!=="init"&&this.messageHandlers[x.data.action]&&this.messageHandlers[x.data.action](x.data)}})),r8=cw(i8),n8=function(t,i,r){var e=t.data.segment,n=e.type,s=e.initSegment,o=e.captions,l=e.captionStreams,f=e.metadata,m=e.videoFrameDtsTime,v=e.videoFramePtsTime;i.buffer.push({captions:o,captionStreams:l,metadata:f});var y=t.data.segment.boxes||{data:t.data.segment.data},E={type:n,data:new Uint8Array(y.data,y.data.byteOffset,y.data.byteLength),initSegment:new Uint8Array(s.data,s.byteOffset,s.byteLength)};typeof m<"u"&&(E.videoFrameDtsTime=m),typeof v<"u"&&(E.videoFramePtsTime=v),r(E)},a8=function(t){var i=t.transmuxedData,r=t.callback;i.buffer=[],r(i)},s8=function(t,i){i.gopInfo=t.data.gopInfo},mw=function(t){var i=t.transmuxer,r=t.bytes,e=t.audioAppendStart,n=t.gopsToAlignWith,s=t.remux,o=t.onData,l=t.onTrackInfo,f=t.onAudioTimingInfo,m=t.onVideoTimingInfo,v=t.onVideoSegmentTimingInfo,y=t.onAudioSegmentTimingInfo,E=t.onId3,I=t.onCaptions,O=t.onDone,D=t.onEndedTimeline,R=t.onTransmuxerLog,H=t.isEndOfTimeline,Z={buffer:[]},V=H,W=function(X){i.currentTransmux===t&&(X.data.action==="data"&&n8(X,Z,o),X.data.action==="trackinfo"&&l(X.data.trackInfo),X.data.action==="gopInfo"&&s8(X,Z),X.data.action==="audioTimingInfo"&&f(X.data.audioTimingInfo),X.data.action==="videoTimingInfo"&&m(X.data.videoTimingInfo),X.data.action==="videoSegmentTimingInfo"&&v(X.data.videoSegmentTimingInfo),X.data.action==="audioSegmentTimingInfo"&&y(X.data.audioSegmentTimingInfo),X.data.action==="id3Frame"&&E([X.data.id3Frame],X.data.id3Frame.dispatchType),X.data.action==="caption"&&I(X.data.caption),X.data.action==="endedtimeline"&&(V=!1,D()),X.data.action==="log"&&R(X.data.log),X.data.type==="transmuxed"&&(V||(i.onmessage=null,a8({transmuxedData:Z,callback:O}),gw(i))))};if(i.onmessage=W,e&&i.postMessage({action:"setAudioAppendStart",appendStart:e}),Array.isArray(n)&&i.postMessage({action:"alignGopsWith",gopsToAlignWith:n}),typeof s<"u"&&i.postMessage({action:"setRemux",remux:s}),r.byteLength){var te=r instanceof ArrayBuffer?r:r.buffer,z=r instanceof ArrayBuffer?0:r.byteOffset;i.postMessage({action:"push",data:te,byteOffset:z,byteLength:r.byteLength},[te])}H&&i.postMessage({action:"endTimeline"}),i.postMessage({action:"flush"})},gw=function(t){t.currentTransmux=null,t.transmuxQueue.length&&(t.currentTransmux=t.transmuxQueue.shift(),typeof t.currentTransmux=="function"?t.currentTransmux():mw(t.currentTransmux))},Sb=function(t,i){t.postMessage({action:i}),gw(t)},vw=function(t,i){if(!i.currentTransmux){i.currentTransmux=t,Sb(i,t);return}i.transmuxQueue.push(Sb.bind(null,i,t))},o8=function(t){vw("reset",t)},u8=function(t){vw("endTimeline",t)},_w=function(t){if(!t.transmuxer.currentTransmux){t.transmuxer.currentTransmux=t,mw(t);return}t.transmuxer.transmuxQueue.push(t)},l8=function(t){var i=new r8;i.currentTransmux=null,i.transmuxQueue=[];var r=i.terminate;return i.terminate=function(){return i.currentTransmux=null,i.transmuxQueue.length=0,r.call(i)},i.postMessage({action:"init",options:t}),i},xm={reset:o8,endTimeline:u8,transmux:_w,createTransmuxer:l8},ch=function(t){var i=t.transmuxer,r=t.endAction||t.action,e=t.callback,n=Ni({},t,{endAction:null,transmuxer:null,callback:null}),s=function f(m){m.data.action===r&&(i.removeEventListener("message",f),m.data.data&&(m.data.data=new Uint8Array(m.data.data,t.byteOffset||0,t.byteLength||m.data.data.byteLength),t.data&&(t.data=m.data.data)),e(m.data))};if(i.addEventListener("message",s),t.data){var o=t.data instanceof ArrayBuffer;n.byteOffset=o?0:t.data.byteOffset,n.byteLength=t.data.byteLength;var l=[o?t.data:t.data.buffer];i.postMessage(n,l)}else i.postMessage(n)},ta={FAILURE:2,TIMEOUT:-101,ABORTED:-102},Ig=function(t){t.forEach(function(i){i.abort()})},d8=function(t){return{bandwidth:t.bandwidth,bytesReceived:t.bytesReceived||0,roundTripTime:t.roundTripTime||0}},f8=function(t){var i=t.target,r=Date.now()-i.requestTime,e={bandwidth:1/0,bytesReceived:0,roundTripTime:r||0};return e.bytesReceived=t.loaded,e.bandwidth=Math.floor(e.bytesReceived/e.roundTripTime*8*1e3),e},v0=function(t,i){return i.timedout?{status:i.status,message:"HLS request timed-out at URL: "+i.uri,code:ta.TIMEOUT,xhr:i}:i.aborted?{status:i.status,message:"HLS request aborted at URL: "+i.uri,code:ta.ABORTED,xhr:i}:t?{status:i.status,message:"HLS request errored at URL: "+i.uri,code:ta.FAILURE,xhr:i}:i.responseType==="arraybuffer"&&i.response.byteLength===0?{status:i.status,message:"Empty HLS response at URL: "+i.uri,code:ta.FAILURE,xhr:i}:null},Eb=function(t,i,r){return function(e,n){var s=n.response,o=v0(e,n);if(o)return r(o,t);if(s.byteLength!==16)return r({status:n.status,message:"Invalid HLS key at URL: "+n.uri,code:ta.FAILURE,xhr:n},t);for(var l=new DataView(s),f=new Uint32Array([l.getUint32(0),l.getUint32(4),l.getUint32(8),l.getUint32(12)]),m=0;m<i.length;m++)i[m].bytes=f;return r(null,t)}},yw=function(t,i){var r=Zu(t.map.bytes);if(r!=="mp4"){var e=t.map.resolvedUri||t.map.uri;return i({internal:!0,message:"Found unsupported "+(r||"unknown")+" container for initialization segment at URL: "+e,code:ta.FAILURE})}ch({action:"probeMp4Tracks",data:t.map.bytes,transmuxer:t.transmuxer,callback:function(s){var o=s.tracks,l=s.data;return t.map.bytes=l,o.forEach(function(f){t.map.tracks=t.map.tracks||{},!t.map.tracks[f.type]&&(t.map.tracks[f.type]=f,typeof f.id=="number"&&f.timescale&&(t.map.timescales=t.map.timescales||{},t.map.timescales[f.id]=f.timescale))}),i(null)}})},c8=function(t){var i=t.segment,r=t.finishProcessingFn;return function(e,n){var s=v0(e,n);if(s)return r(s,i);var o=new Uint8Array(n.response);if(i.map.key)return i.map.encryptedBytes=o,r(null,i);i.map.bytes=o,yw(i,function(l){if(l)return l.xhr=n,l.status=n.status,r(l,i);r(null,i)})}},h8=function(t){var i=t.segment,r=t.finishProcessingFn,e=t.responseType;return function(n,s){var o=v0(n,s);if(o)return r(o,i);var l=e==="arraybuffer"||!s.responseText?s.response:e8(s.responseText.substring(i.lastReachedChar||0));return i.stats=d8(s),i.key?i.encryptedBytes=new Uint8Array(l):i.bytes=new Uint8Array(l),r(null,i)}},p8=function(t){var i=t.segment,r=t.bytes,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog,O=i.map&&i.map.tracks||{},D=Boolean(O.audio&&O.video),R=n.bind(null,i,"audio","start"),H=n.bind(null,i,"audio","end"),Z=n.bind(null,i,"video","start"),V=n.bind(null,i,"video","end"),W=function(){return _w({bytes:r,transmuxer:i.transmuxer,audioAppendStart:i.audioAppendStart,gopsToAlignWith:i.gopsToAlignWith,remux:D,onData:function(q){q.type=q.type==="combined"?"video":q.type,y(i,q)},onTrackInfo:function(q){e&&(D&&(q.isMuxed=!0),e(i,q))},onAudioTimingInfo:function(q){R&&typeof q.start<"u"&&(R(q.start),R=null),H&&typeof q.end<"u"&&H(q.end)},onVideoTimingInfo:function(q){Z&&typeof q.start<"u"&&(Z(q.start),Z=null),V&&typeof q.end<"u"&&V(q.end)},onVideoSegmentTimingInfo:function(q){s(q)},onAudioSegmentTimingInfo:function(q){o(q)},onId3:function(q,X){l(i,q,X)},onCaptions:function(q){f(i,[q])},isEndOfTimeline:m,onEndedTimeline:function(){v()},onTransmuxerLog:I,onDone:function(q){E&&(q.type=q.type==="combined"?"video":q.type,E(null,i,q))}})};ch({action:"probeTs",transmuxer:i.transmuxer,data:r,baseStartTime:i.baseStartTime,callback:function(z){i.bytes=r=z.data;var q=z.result;q&&(e(i,{hasAudio:q.hasAudio,hasVideo:q.hasVideo,isMuxed:D}),e=null,q.hasAudio&&!D&&R(q.audioStart),q.hasVideo&&Z(q.videoStart),R=null,Z=null),W()}})},Tw=function(t){var i=t.segment,r=t.bytes,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog,O=new Uint8Array(r);if(jS(O)){i.isFmp4=!0;var D=i.map.tracks,R={isFmp4:!0,hasVideo:!!D.video,hasAudio:!!D.audio};D.audio&&D.audio.codec&&D.audio.codec!=="enca"&&(R.audioCodec=D.audio.codec),D.video&&D.video.codec&&D.video.codec!=="encv"&&(R.videoCodec=D.video.codec),D.video&&D.audio&&(R.isMuxed=!0),e(i,R);var H=function(V){y(i,{data:O,type:R.hasAudio&&!R.isMuxed?"audio":"video"}),V&&V.length&&f(i,V),E(null,i,{})};ch({action:"probeMp4StartTime",timescales:i.map.timescales,data:O,transmuxer:i.transmuxer,callback:function(V){var W=V.data,te=V.startTime;if(r=W.buffer,i.bytes=O=W,R.hasAudio&&!R.isMuxed&&n(i,"audio","start",te),R.hasVideo&&n(i,"video","start",te),!D.video||!W.byteLength||!i.transmuxer){H();return}ch({action:"pushMp4Captions",endAction:"mp4Captions",transmuxer:i.transmuxer,data:O,timescales:i.map.timescales,trackIds:[D.video.id],callback:function(q){r=q.data.buffer,i.bytes=O=q.data,q.logs.forEach(function(X){I(N.mergeOptions(X,{stream:"mp4CaptionParser"}))}),H(q.captions)}})}});return}if(!i.transmuxer){E(null,i,{});return}if(typeof i.container>"u"&&(i.container=Zu(O)),i.container!=="ts"&&i.container!=="aac"){e(i,{hasAudio:!1,hasVideo:!1}),E(null,i,{});return}p8({segment:i,bytes:r,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I})},bw=function(t,i){var r=t.id,e=t.key,n=t.encryptedBytes,s=t.decryptionWorker,o=function f(m){if(m.data.source===r){s.removeEventListener("message",f);var v=m.data.decrypted;i(new Uint8Array(v.bytes,v.byteOffset,v.byteLength))}};s.addEventListener("message",o);var l;e.bytes.slice?l=e.bytes.slice():l=new Uint32Array(Array.prototype.slice.call(e.bytes)),s.postMessage(sw({source:r,encrypted:n,key:l,iv:e.iv}),[n.buffer,l.buffer])},m8=function(t){var i=t.decryptionWorker,r=t.segment,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog;bw({id:r.requestId,key:r.key,encryptedBytes:r.encryptedBytes,decryptionWorker:i},function(O){r.bytes=O,Tw({segment:r,bytes:r.bytes,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I})})},g8=function(t){var i=t.activeXhrs,r=t.decryptionWorker,e=t.trackInfoFn,n=t.timingInfoFn,s=t.videoSegmentTimingInfoFn,o=t.audioSegmentTimingInfoFn,l=t.id3Fn,f=t.captionsFn,m=t.isEndOfTimeline,v=t.endedTimelineFn,y=t.dataFn,E=t.doneFn,I=t.onTransmuxerLog,O=0,D=!1;return function(R,H){if(!D){if(R)return D=!0,Ig(i),E(R,H);if(O+=1,O===i.length){var Z=function(){if(H.encryptedBytes)return m8({decryptionWorker:r,segment:H,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I});Tw({segment:H,bytes:H.bytes,trackInfoFn:e,timingInfoFn:n,videoSegmentTimingInfoFn:s,audioSegmentTimingInfoFn:o,id3Fn:l,captionsFn:f,isEndOfTimeline:m,endedTimelineFn:v,dataFn:y,doneFn:E,onTransmuxerLog:I})};if(H.endOfAllRequests=Date.now(),H.map&&H.map.encryptedBytes&&!H.map.bytes)return bw({decryptionWorker:r,id:H.requestId+"-init",encryptedBytes:H.map.encryptedBytes,key:H.map.key},function(V){H.map.bytes=V,yw(H,function(W){if(W)return Ig(i),E(W,H);Z()})});Z()}}}},v8=function(t){var i=t.loadendState,r=t.abortFn;return function(e){var n=e.target;n.aborted&&r&&!i.calledAbortFn&&(r(),i.calledAbortFn=!0)}},_8=function(t){var i=t.segment,r=t.progressFn;return t.trackInfoFn,t.timingInfoFn,t.videoSegmentTimingInfoFn,t.audioSegmentTimingInfoFn,t.id3Fn,t.captionsFn,t.isEndOfTimeline,t.endedTimelineFn,t.dataFn,function(e){var n=e.target;if(!n.aborted)return i.stats=N.mergeOptions(i.stats,f8(e)),!i.stats.firstBytesReceivedAt&&i.stats.bytesReceived&&(i.stats.firstBytesReceivedAt=Date.now()),r(e,i)}},y8=function(t){var i=t.xhr,r=t.xhrOptions,e=t.decryptionWorker,n=t.segment,s=t.abortFn,o=t.progressFn,l=t.trackInfoFn,f=t.timingInfoFn,m=t.videoSegmentTimingInfoFn,v=t.audioSegmentTimingInfoFn,y=t.id3Fn,E=t.captionsFn,I=t.isEndOfTimeline,O=t.endedTimelineFn,D=t.dataFn,R=t.doneFn,H=t.onTransmuxerLog,Z=[],V=g8({activeXhrs:Z,decryptionWorker:e,trackInfoFn:l,timingInfoFn:f,videoSegmentTimingInfoFn:m,audioSegmentTimingInfoFn:v,id3Fn:y,captionsFn:E,isEndOfTimeline:I,endedTimelineFn:O,dataFn:D,doneFn:R,onTransmuxerLog:H});if(n.key&&!n.key.bytes){var W=[n.key];n.map&&!n.map.bytes&&n.map.key&&n.map.key.resolvedUri===n.key.resolvedUri&&W.push(n.map.key);var te=N.mergeOptions(r,{uri:n.key.resolvedUri,responseType:"arraybuffer"}),z=Eb(n,W,V),q=i(te,z);Z.push(q)}if(n.map&&!n.map.bytes){var X=n.map.key&&(!n.key||n.key.resolvedUri!==n.map.key.resolvedUri);if(X){var j=N.mergeOptions(r,{uri:n.map.key.resolvedUri,responseType:"arraybuffer"}),oe=Eb(n,[n.map.key],V),re=i(j,oe);Z.push(re)}var se=N.mergeOptions(r,{uri:n.map.resolvedUri,responseType:"arraybuffer",headers:Cg(n.map)}),he=c8({segment:n,finishProcessingFn:V}),le=i(se,he);Z.push(le)}var pe=N.mergeOptions(r,{uri:n.part&&n.part.resolvedUri||n.resolvedUri,responseType:"arraybuffer",headers:Cg(n)}),ne=h8({segment:n,finishProcessingFn:V,responseType:pe.responseType}),fe=i(pe,ne);fe.addEventListener("progress",_8({segment:n,progressFn:o,trackInfoFn:l,timingInfoFn:f,videoSegmentTimingInfoFn:m,audioSegmentTimingInfoFn:v,id3Fn:y,captionsFn:E,isEndOfTimeline:I,endedTimelineFn:O,dataFn:D})),Z.push(fe);var Ie={};return Z.forEach(function(Ce){Ce.addEventListener("loadend",v8({loadendState:Ie,abortFn:s}))}),function(){return Ig(Z)}},T8=Dn("CodecUtils"),b8=function(t){var i=t.attributes||{};if(i.CODECS)return li(i.CODECS)},xw=function(t,i){var r=i.attributes||{};return t&&t.mediaGroups&&t.mediaGroups.AUDIO&&r.AUDIO&&t.mediaGroups.AUDIO[r.AUDIO]},x8=function(t,i){if(!xw(t,i))return!0;var r=i.attributes||{},e=t.mediaGroups.AUDIO[r.AUDIO];for(var n in e)if(!e[n].uri&&!e[n].playlists)return!0;return!1},hh=function(t){var i={};return t.forEach(function(r){var e=r.mediaType,n=r.type,s=r.details;i[e]=i[e]||[],i[e].push(sv(""+n+s))}),Object.keys(i).forEach(function(r){if(i[r].length>1){T8("multiple "+r+" codecs found as attributes: "+i[r].join(", ")+". Setting playlist codecs to null so that we wait for mux.js to probe segments for real codecs."),i[r]=null;return}i[r]=i[r][0]}),i},wb=function(t){var i=0;return t.audio&&i++,t.video&&i++,i},kd=function(t,i){var r=i.attributes||{},e=hh(b8(i)||[]);if(xw(t,i)&&!e.audio&&!x8(t,i)){var n=hh(Yx(t,r.AUDIO)||[]);n.audio&&(e.audio=n.audio)}return e},mc=Dn("PlaylistSelector"),Cb=function(t){if(!(!t||!t.playlist)){var i=t.playlist;return JSON.stringify({id:i.id,bandwidth:t.bandwidth,width:t.width,height:t.height,codecs:i.attributes&&i.attributes.CODECS||""})}},ph=function(t,i){if(!t)return"";var r=F.getComputedStyle(t);return r?r[i]:""},Fu=function(t,i){var r=t.slice();t.sort(function(e,n){var s=i(e,n);return s===0?r.indexOf(e)-r.indexOf(n):s})},_0=function(t,i){var r,e;return t.attributes.BANDWIDTH&&(r=t.attributes.BANDWIDTH),r=r||F.Number.MAX_VALUE,i.attributes.BANDWIDTH&&(e=i.attributes.BANDWIDTH),e=e||F.Number.MAX_VALUE,r-e},S8=function(t,i){var r,e;return t.attributes.RESOLUTION&&t.attributes.RESOLUTION.width&&(r=t.attributes.RESOLUTION.width),r=r||F.Number.MAX_VALUE,i.attributes.RESOLUTION&&i.attributes.RESOLUTION.width&&(e=i.attributes.RESOLUTION.width),e=e||F.Number.MAX_VALUE,r===e&&t.attributes.BANDWIDTH&&i.attributes.BANDWIDTH?t.attributes.BANDWIDTH-i.attributes.BANDWIDTH:r-e},Sw=function(t,i,r,e,n,s){if(t){var o={bandwidth:i,width:r,height:e,limitRenditionByPlayerDimensions:n},l=t.playlists;pr.isAudioOnly(t)&&(l=s.getAudioTrackPlaylists_(),o.audioOnly=!0);var f=l.map(function(j){var oe,re=j.attributes&&j.attributes.RESOLUTION&&j.attributes.RESOLUTION.width,se=j.attributes&&j.attributes.RESOLUTION&&j.attributes.RESOLUTION.height;return oe=j.attributes&&j.attributes.BANDWIDTH,oe=oe||F.Number.MAX_VALUE,{bandwidth:oe,width:re,height:se,playlist:j}});Fu(f,function(j,oe){return j.bandwidth-oe.bandwidth}),f=f.filter(function(j){return!pr.isIncompatible(j.playlist)});var m=f.filter(function(j){return pr.isEnabled(j.playlist)});m.length||(m=f.filter(function(j){return!pr.isDisabled(j.playlist)}));var v=m.filter(function(j){return j.bandwidth*mi.BANDWIDTH_VARIANCE<i}),y=v[v.length-1],E=v.filter(function(j){return j.bandwidth===y.bandwidth})[0];if(n===!1){var I=E||m[0]||f[0];if(I&&I.playlist){var O="sortedPlaylistReps";return E&&(O="bandwidthBestRep"),m[0]&&(O="enabledPlaylistReps"),mc("choosing "+Cb(I)+" using "+O+" with options",o),I.playlist}return mc("could not choose a playlist with options",o),null}var D=v.filter(function(j){return j.width&&j.height});Fu(D,function(j,oe){return j.width-oe.width});var R=D.filter(function(j){return j.width===r&&j.height===e});y=R[R.length-1];var H=R.filter(function(j){return j.bandwidth===y.bandwidth})[0],Z,V,W;H||(Z=D.filter(function(j){return j.width>r||j.height>e}),V=Z.filter(function(j){return j.width===Z[0].width&&j.height===Z[0].height}),y=V[V.length-1],W=V.filter(function(j){return j.bandwidth===y.bandwidth})[0]);var te;if(s.experimentalLeastPixelDiffSelector){var z=D.map(function(j){return j.pixelDiff=Math.abs(j.width-r)+Math.abs(j.height-e),j});Fu(z,function(j,oe){return j.pixelDiff===oe.pixelDiff?oe.bandwidth-j.bandwidth:j.pixelDiff-oe.pixelDiff}),te=z[0]}var q=te||W||H||E||m[0]||f[0];if(q&&q.playlist){var X="sortedPlaylistReps";return te?X="leastPixelDiffRep":W?X="resolutionPlusOneRep":H?X="resolutionBestRep":E?X="bandwidthBestRep":m[0]&&(X="enabledPlaylistReps"),mc("choosing "+Cb(q)+" using "+X+" with options",o),q.playlist}return mc("could not choose a playlist with options",o),null}},Ab=function(){var t=this.useDevicePixelRatio&&F.devicePixelRatio||1;return Sw(this.playlists.master,this.systemBandwidth,parseInt(ph(this.tech_.el(),"width"),10)*t,parseInt(ph(this.tech_.el(),"height"),10)*t,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)},E8=function(t){var i=-1,r=-1;if(t<0||t>1)throw new Error("Moving average bandwidth decay must be between 0 and 1.");return function(){var e=this.useDevicePixelRatio&&F.devicePixelRatio||1;return i<0&&(i=this.systemBandwidth,r=this.systemBandwidth),this.systemBandwidth>0&&this.systemBandwidth!==r&&(i=t*this.systemBandwidth+(1-t)*i,r=this.systemBandwidth),Sw(this.playlists.master,i,parseInt(ph(this.tech_.el(),"width"),10)*e,parseInt(ph(this.tech_.el(),"height"),10)*e,this.limitRenditionByPlayerDimensions,this.masterPlaylistController_)}},w8=function(t){var i=t.master,r=t.currentTime,e=t.bandwidth,n=t.duration,s=t.segmentDuration,o=t.timeUntilRebuffer,l=t.currentTimeline,f=t.syncController,m=i.playlists.filter(function(O){return!pr.isIncompatible(O)}),v=m.filter(pr.isEnabled);v.length||(v=m.filter(function(O){return!pr.isDisabled(O)}));var y=v.filter(pr.hasAttribute.bind(null,"BANDWIDTH")),E=y.map(function(O){var D=f.getSyncPoint(O,n,l,r),R=D?1:2,H=pr.estimateSegmentRequestTime(s,e,O),Z=H*R-o;return{playlist:O,rebufferingImpact:Z}}),I=E.filter(function(O){return O.rebufferingImpact<=0});return Fu(I,function(O,D){return _0(D.playlist,O.playlist)}),I.length?I[0]:(Fu(E,function(O,D){return O.rebufferingImpact-D.rebufferingImpact}),E[0]||null)},C8=function(){var t=this,i=this.playlists.master.playlists.filter(pr.isEnabled);Fu(i,function(e,n){return _0(e,n)});var r=i.filter(function(e){return!!kd(t.playlists.master,e).video});return r[0]||null},A8=function(t){var i=0,r;return t.bytes&&(r=new Uint8Array(t.bytes),t.segments.forEach(function(e){r.set(e,i),i+=e.byteLength})),r},I8=function(t,i,r){if(!t[r]){i.trigger({type:"usage",name:"vhs-608"}),i.trigger({type:"usage",name:"hls-608"});var e=r;/^cc708_/.test(r)&&(e="SERVICE"+r.split("_")[1]);var n=i.textTracks().getTrackById(e);if(n)t[r]=n;else{var s=i.options_.vhs&&i.options_.vhs.captionServices||{},o=r,l=r,f=!1,m=s[e];m&&(o=m.label,l=m.language,f=m.default),t[r]=i.addRemoteTextTrack({kind:"captions",id:e,default:f,label:o,language:l},!1).track}}},P8=function(t){var i=t.inbandTextTracks,r=t.captionArray,e=t.timestampOffset;if(r){var n=F.WebKitDataCue||F.VTTCue;r.forEach(function(s){var o=s.stream;i[o].addCue(new n(s.startTime+e,s.endTime+e,s.text))})}},O8=function(t){Object.defineProperties(t.frame,{id:{get:function(){return N.log.warn("cue.frame.id is deprecated. Use cue.value.key instead."),t.value.key}},value:{get:function(){return N.log.warn("cue.frame.value is deprecated. Use cue.value.data instead."),t.value.data}},privateData:{get:function(){return N.log.warn("cue.frame.privateData is deprecated. Use cue.value.data instead."),t.value.data}}})},D8=function(t){var i=t.inbandTextTracks,r=t.metadataArray,e=t.timestampOffset,n=t.videoDuration;if(r){var s=F.WebKitDataCue||F.VTTCue,o=i.metadataTrack_;if(o&&(r.forEach(function(E){var I=E.cueTime+e;typeof I!="number"||F.isNaN(I)||I<0||!(I<1/0)||E.frames.forEach(function(O){var D=new s(I,I,O.value||O.url||O.data||"");D.frame=O,D.value=O,O8(D),o.addCue(D)})}),!(!o.cues||!o.cues.length))){for(var l=o.cues,f=[],m=0;m<l.length;m++)l[m]&&f.push(l[m]);var v=f.reduce(function(E,I){var O=E[I.startTime]||[];return O.push(I),E[I.startTime]=O,E},{}),y=Object.keys(v).sort(function(E,I){return Number(E)-Number(I)});y.forEach(function(E,I){var O=v[E],D=Number(y[I+1])||n;O.forEach(function(R){R.endTime=D})})}}},L8=function(t,i,r){t.metadataTrack_||(t.metadataTrack_=r.addRemoteTextTrack({kind:"metadata",label:"Timed Metadata"},!1).track,t.metadataTrack_.inBandMetadataTrackDispatchType=i)},xd=function(t,i,r){var e,n;if(r&&r.cues)for(e=r.cues.length;e--;)n=r.cues[e],n.startTime>=t&&n.endTime<=i&&r.removeCue(n)},k8=function(t){var i=t.cues;if(i)for(var r=0;r<i.length;r++){for(var e=[],n=0,s=0;s<i.length;s++)i[r].startTime===i[s].startTime&&i[r].endTime===i[s].endTime&&i[r].text===i[s].text&&(n++,n>1&&e.push(i[s]));e.length&&e.forEach(function(o){return t.removeCue(o)})}},R8=function(t,i,r){if(typeof i>"u"||i===null||!t.length)return[];var e=Math.ceil((i-r+3)*xs.ONE_SECOND_IN_TS),n;for(n=0;n<t.length&&!(t[n].pts>e);n++);return t.slice(n)},M8=function(t,i,r){if(!i.length)return t;if(r)return i.slice();var e=i[0].pts,n=0;for(n;n<t.length&&!(t[n].pts>=e);n++);return t.slice(0,n).concat(i)},F8=function(t,i,r,e){for(var n=Math.ceil((i-e)*xs.ONE_SECOND_IN_TS),s=Math.ceil((r-e)*xs.ONE_SECOND_IN_TS),o=t.slice(),l=t.length;l--&&!(t[l].pts<=s););if(l===-1)return o;for(var f=l+1;f--&&!(t[f].pts<=n););return f=Math.max(f,0),o.splice(f,l-f+1),o},N8=function(t,i){if(!t&&!i||!t&&i||t&&!i)return!1;if(t===i)return!0;var r=Object.keys(t).sort(),e=Object.keys(i).sort();if(r.length!==e.length)return!1;for(var n=0;n<r.length;n++){var s=r[n];if(s!==e[n]||t[s]!==i[s])return!1}return!0},Ew=22,U8=function(t,i,r){i=i||[];for(var e=[],n=0,s=0;s<i.length;s++){var o=i[s];if(t===o.timeline&&(e.push(s),n+=o.duration,n>r))return s}return e.length===0?0:e[e.length-1]},pd=1,B8=500,Ib=function(t){return typeof t=="number"&&isFinite(t)},gc=1/60,j8=function(t,i,r){return t!=="main"||!i||!r?null:!r.hasAudio&&!r.hasVideo?"Neither audio nor video found in segment.":i.hasVideo&&!r.hasVideo?"Only audio found in segment when we expected video. We can't switch to audio only from a stream that had video. To get rid of this message, please add codec information to the manifest.":!i.hasVideo&&r.hasVideo?"Video found in segment when we expected only audio. We can't switch to a stream with video from an audio only stream. To get rid of this message, please add codec information to the manifest.":null},V8=function(t,i,r){var e=i-mi.BACK_BUFFER_LENGTH;t.length&&(e=Math.max(e,t.start(0)));var n=i-r;return Math.min(n,e)},gu=function(t){var i=t.startOfSegment,r=t.duration,e=t.segment,n=t.part,s=t.playlist,o=s.mediaSequence,l=s.id,f=s.segments,m=f===void 0?[]:f,v=t.mediaIndex,y=t.partIndex,E=t.timeline,I=m.length-1,O="mediaIndex/partIndex increment";t.getMediaInfoForTime?O="getMediaInfoForTime ("+t.getMediaInfoForTime+")":t.isSyncRequest&&(O="getSyncSegmentCandidate (isSyncRequest)"),t.independent&&(O+=" with independent "+t.independent);var D=typeof y=="number",R=t.segment.uri?"segment":"pre-segment",H=D?G1({preloadSegment:e})-1:0;return R+" ["+(o+v)+"/"+(o+I)+"]"+(D?" part ["+y+"/"+H+"]":"")+(" segment start/end ["+e.start+" => "+e.end+"]")+(D?" part start/end ["+n.start+" => "+n.end+"]":"")+(" startOfSegment ["+i+"]")+(" duration ["+r+"]")+(" timeline ["+E+"]")+(" selected by ["+O+"]")+(" playlist ["+l+"]")},Pb=function(t){return t+"TimingInfo"},H8=function(t){var i=t.segmentTimeline,r=t.currentTimeline,e=t.startOfSegment,n=t.buffered,s=t.overrideCheck;return!s&&i===r?null:i<r?e:n.length?n.end(n.length-1):e},Ob=function(t){var i=t.timelineChangeController,r=t.currentTimeline,e=t.segmentTimeline,n=t.loaderType,s=t.audioDisabled;if(r===e)return!1;if(n==="audio"){var o=i.lastTimelineChange({type:"main"});return!o||o.to!==e}if(n==="main"&&s){var l=i.pendingTimelineChange({type:"audio"});return!(l&&l.to===e)}return!1},$8=function(t){var i=0;return["video","audio"].forEach(function(r){var e=t[r+"TimingInfo"];if(e){var n=e.start,s=e.end,o;typeof n=="bigint"||typeof s=="bigint"?o=F.BigInt(s)-F.BigInt(n):typeof n=="number"&&typeof s=="number"&&(o=s-n),typeof o<"u"&&o>i&&(i=o)}}),typeof i=="bigint"&&i<Number.MAX_SAFE_INTEGER&&(i=Number(i)),i},Db=function(t){var i=t.segmentDuration,r=t.maxDuration;return i?Math.round(i)>r+Cs:!1},W8=function(t,i){if(i!=="hls")return null;var r=$8({audioTimingInfo:t.audioTimingInfo,videoTimingInfo:t.videoTimingInfo});if(!r)return null;var e=t.playlist.targetDuration,n=Db({segmentDuration:r,maxDuration:e*2}),s=Db({segmentDuration:r,maxDuration:e}),o="Segment with index "+t.mediaIndex+" "+("from playlist "+t.playlist.id+" ")+("has a duration of "+r+" ")+("when the reported duration is "+t.duration+" ")+("and the target duration is "+e+". ")+"For HLS content, a duration in excess of the target duration may result in playback issues. See the HLS specification section on EXT-X-TARGETDURATION for more details: https://tools.ietf.org/html/draft-pantos-http-live-streaming-23#section-4.3.3.1";return n||s?{severity:n?"warn":"info",message:o}:null},Pg=function(a){Ae(t,a);function t(r,e){var n;if(n=a.call(this)||this,!r)throw new TypeError("Initialization settings are required");if(typeof r.currentTime!="function")throw new TypeError("No currentTime getter specified");if(!r.mediaSource)throw new TypeError("No MediaSource specified");return n.bandwidth=r.bandwidth,n.throughput={rate:0,count:0},n.roundTrip=NaN,n.resetStats_(),n.mediaIndex=null,n.partIndex=null,n.hasPlayed_=r.hasPlayed,n.currentTime_=r.currentTime,n.seekable_=r.seekable,n.seeking_=r.seeking,n.duration_=r.duration,n.mediaSource_=r.mediaSource,n.vhs_=r.vhs,n.loaderType_=r.loaderType,n.currentMediaInfo_=void 0,n.startingMediaInfo_=void 0,n.segmentMetadataTrack_=r.segmentMetadataTrack,n.goalBufferLength_=r.goalBufferLength,n.sourceType_=r.sourceType,n.sourceUpdater_=r.sourceUpdater,n.inbandTextTracks_=r.inbandTextTracks,n.state_="INIT",n.timelineChangeController_=r.timelineChangeController,n.shouldSaveSegmentTimingInfo_=!0,n.parse708captions_=r.parse708captions,n.useDtsForTimestampOffset_=r.useDtsForTimestampOffset,n.captionServices_=r.captionServices,n.experimentalExactManifestTimings=r.experimentalExactManifestTimings,n.checkBufferTimeout_=null,n.error_=void 0,n.currentTimeline_=-1,n.pendingSegment_=null,n.xhrOptions_=null,n.pendingSegments_=[],n.audioDisabled_=!1,n.isPendingTimestampOffset_=!1,n.gopBuffer_=[],n.timeMapping_=0,n.safeAppend_=N.browser.IE_VERSION>=11,n.appendInitSegment_={audio:!0,video:!0},n.playlistOfLastInitSegment_={audio:null,video:null},n.callQueue_=[],n.loadQueue_=[],n.metadataQueue_={id3:[],caption:[]},n.waitingOnRemove_=!1,n.quotaExceededErrorRetryTimeout_=null,n.activeInitSegmentId_=null,n.initSegments_={},n.cacheEncryptionKeys_=r.cacheEncryptionKeys,n.keyCache_={},n.decrypter_=r.decrypter,n.syncController_=r.syncController,n.syncPoint_={segmentIndex:0,time:0},n.transmuxer_=n.createTransmuxer_(),n.triggerSyncInfoUpdate_=function(){return n.trigger("syncinfoupdate")},n.syncController_.on("syncinfoupdate",n.triggerSyncInfoUpdate_),n.mediaSource_.addEventListener("sourceopen",function(){n.isEndOfStream_()||(n.ended_=!1)}),n.fetchAtBuffer_=!1,n.logger_=Dn("SegmentLoader["+n.loaderType_+"]"),Object.defineProperty(Ue(n),"state",{get:function(){return this.state_},set:function(o){o!==this.state_&&(this.logger_(this.state_+" -> "+o),this.state_=o,this.trigger("statechange"))}}),n.sourceUpdater_.on("ready",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n.loaderType_==="main"&&n.timelineChangeController_.on("pendingtimelinechange",function(){n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n.loaderType_==="audio"&&n.timelineChangeController_.on("timelinechange",function(){n.hasEnoughInfoToLoad_()&&n.processLoadQueue_(),n.hasEnoughInfoToAppend_()&&n.processCallQueue_()}),n}var i=t.prototype;return i.createTransmuxer_=function(){return xm.createTransmuxer({remux:!1,alignGopsAtEnd:this.safeAppend_,keepOriginalTimestamps:!0,parse708captions:this.parse708captions_,captionServices:this.captionServices_})},i.resetStats_=function(){this.mediaBytesTransferred=0,this.mediaRequests=0,this.mediaRequestsAborted=0,this.mediaRequestsTimedout=0,this.mediaRequestsErrored=0,this.mediaTransferDuration=0,this.mediaSecondsLoaded=0,this.mediaAppends=0},i.dispose=function(){this.trigger("dispose"),this.state="DISPOSED",this.pause(),this.abort_(),this.transmuxer_&&this.transmuxer_.terminate(),this.resetStats_(),this.checkBufferTimeout_&&F.clearTimeout(this.checkBufferTimeout_),this.syncController_&&this.triggerSyncInfoUpdate_&&this.syncController_.off("syncinfoupdate",this.triggerSyncInfoUpdate_),this.off()},i.setAudio=function(e){this.audioDisabled_=!e,e?this.appendInitSegment_.audio=!0:this.sourceUpdater_.removeAudio(0,this.duration_())},i.abort=function(){if(this.state!=="WAITING"){this.pendingSegment_&&(this.pendingSegment_=null);return}this.abort_(),this.state="READY",this.paused()||this.monitorBuffer_()},i.abort_=function(){this.pendingSegment_&&this.pendingSegment_.abortRequests&&this.pendingSegment_.abortRequests(),this.pendingSegment_=null,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.timelineChangeController_.clearPendingTimelineChange(this.loaderType_),this.waitingOnRemove_=!1,F.clearTimeout(this.quotaExceededErrorRetryTimeout_),this.quotaExceededErrorRetryTimeout_=null},i.checkForAbort_=function(e){return this.state==="APPENDING"&&!this.pendingSegment_?(this.state="READY",!0):!this.pendingSegment_||this.pendingSegment_.requestId!==e},i.error=function(e){return typeof e<"u"&&(this.logger_("error occurred:",e),this.error_=e),this.pendingSegment_=null,this.error_},i.endOfStream=function(){this.ended_=!0,this.transmuxer_&&xm.reset(this.transmuxer_),this.gopBuffer_.length=0,this.pause(),this.trigger("ended")},i.buffered_=function(){var e=this.getMediaInfo_();if(!this.sourceUpdater_||!e)return N.createTimeRanges();if(this.loaderType_==="main"){var n=e.hasAudio,s=e.hasVideo,o=e.isMuxed;if(s&&n&&!this.audioDisabled_&&!o)return this.sourceUpdater_.buffered();if(s)return this.sourceUpdater_.videoBuffered()}return this.sourceUpdater_.audioBuffered()},i.initSegmentForMap=function(e,n){if(n===void 0&&(n=!1),!e)return null;var s=fh(e),o=this.initSegments_[s];return n&&!o&&e.bytes&&(this.initSegments_[s]=o={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:e.bytes,tracks:e.tracks,timescales:e.timescales}),o||e},i.segmentKey=function(e,n){if(n===void 0&&(n=!1),!e)return null;var s=ow(e),o=this.keyCache_[s];this.cacheEncryptionKeys_&&n&&!o&&e.bytes&&(this.keyCache_[s]=o={resolvedUri:e.resolvedUri,bytes:e.bytes});var l={resolvedUri:(o||e).resolvedUri};return o&&(l.bytes=o.bytes),l},i.couldBeginLoading_=function(){return this.playlist_&&!this.paused()},i.load=function(){if(this.monitorBuffer_(),!!this.playlist_){if(this.state==="INIT"&&this.couldBeginLoading_())return this.init_();!this.couldBeginLoading_()||this.state!=="READY"&&this.state!=="INIT"||(this.state="READY")}},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.playlist=function(e,n){if(n===void 0&&(n={}),!!e){var s=this.playlist_,o=this.pendingSegment_;this.playlist_=e,this.xhrOptions_=n,this.state==="INIT"&&(e.syncInfo={mediaSequence:e.mediaSequence,time:0},this.loaderType_==="main"&&this.syncController_.setDateTimeMappingForStart(e));var l=null;if(s&&(s.id?l=s.id:s.uri&&(l=s.uri)),this.logger_("playlist update ["+l+" => "+(e.id||e.uri)+"]"),this.trigger("syncinfoupdate"),this.state==="INIT"&&this.couldBeginLoading_())return this.init_();if(!s||s.uri!==e.uri){this.mediaIndex!==null&&(e.endList?this.resyncLoader():this.resetLoader()),this.currentMediaInfo_=void 0,this.trigger("playlistupdate");return}var f=e.mediaSequence-s.mediaSequence;if(this.logger_("live window shift ["+f+"]"),this.mediaIndex!==null)if(this.mediaIndex-=f,this.mediaIndex<0)this.mediaIndex=null,this.partIndex=null;else{var m=this.playlist_.segments[this.mediaIndex];if(this.partIndex&&(!m.parts||!m.parts.length||!m.parts[this.partIndex])){var v=this.mediaIndex;this.logger_("currently processing part (index "+this.partIndex+") no longer exists."),this.resetLoader(),this.mediaIndex=v}}o&&(o.mediaIndex-=f,o.mediaIndex<0?(o.mediaIndex=null,o.partIndex=null):(o.mediaIndex>=0&&(o.segment=e.segments[o.mediaIndex]),o.partIndex>=0&&o.segment.parts&&(o.part=o.segment.parts[o.partIndex]))),this.syncController_.saveExpiredSegmentInfo(s,e)}},i.pause=function(){this.checkBufferTimeout_&&(F.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=null)},i.paused=function(){return this.checkBufferTimeout_===null},i.resetEverything=function(e){this.ended_=!1,this.activeInitSegmentId_=null,this.appendInitSegment_={audio:!0,video:!0},this.resetLoader(),this.remove(0,1/0,e),this.transmuxer_&&(this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),this.transmuxer_.postMessage({action:"reset"}))},i.resetLoader=function(){this.fetchAtBuffer_=!1,this.resyncLoader()},i.resyncLoader=function(){this.transmuxer_&&xm.reset(this.transmuxer_),this.mediaIndex=null,this.partIndex=null,this.syncPoint_=null,this.isPendingTimestampOffset_=!1,this.callQueue_=[],this.loadQueue_=[],this.metadataQueue_.id3=[],this.metadataQueue_.caption=[],this.abort(),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})},i.remove=function(e,n,s,o){if(s===void 0&&(s=function(){}),o===void 0&&(o=!1),n===1/0&&(n=this.duration_()),n<=e){this.logger_("skipping remove because end ${end} is <= start ${start}");return}if(!this.sourceUpdater_||!this.getMediaInfo_()){this.logger_("skipping remove because no source updater or starting media info");return}var l=1,f=function(){l--,l===0&&s()};(o||!this.audioDisabled_)&&(l++,this.sourceUpdater_.removeAudio(e,n,f)),(o||this.loaderType_==="main")&&(this.gopBuffer_=F8(this.gopBuffer_,e,n,this.timeMapping_),l++,this.sourceUpdater_.removeVideo(e,n,f));for(var m in this.inbandTextTracks_)xd(e,n,this.inbandTextTracks_[m]);xd(e,n,this.segmentMetadataTrack_),f()},i.monitorBuffer_=function(){this.checkBufferTimeout_&&F.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=F.setTimeout(this.monitorBufferTick_.bind(this),1)},i.monitorBufferTick_=function(){this.state==="READY"&&this.fillBuffer_(),this.checkBufferTimeout_&&F.clearTimeout(this.checkBufferTimeout_),this.checkBufferTimeout_=F.setTimeout(this.monitorBufferTick_.bind(this),B8)},i.fillBuffer_=function(){if(!this.sourceUpdater_.updating()){var e=this.chooseNextRequest_();e&&(typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!1,this.timelineChangeController_.pendingTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline})),this.loadSegment_(e))}},i.isEndOfStream_=function(e,n,s){if(e===void 0&&(e=this.mediaIndex),n===void 0&&(n=this.playlist_),s===void 0&&(s=this.partIndex),!n||!this.mediaSource_)return!1;var o=typeof e=="number"&&n.segments[e],l=e+1===n.segments.length,f=!o||!o.parts||s+1===o.parts.length;return n.endList&&this.mediaSource_.readyState==="open"&&l&&f},i.chooseNextRequest_=function(){var e=this.buffered_(),n=_b(e)||0,s=c0(e,this.currentTime_()),o=!this.hasPlayed_()&&s>=1,l=s>=this.goalBufferLength_(),f=this.playlist_.segments;if(!f.length||o||l)return null;this.syncPoint_=this.syncPoint_||this.syncController_.getSyncPoint(this.playlist_,this.duration_(),this.currentTimeline_,this.currentTime_());var m={partIndex:null,mediaIndex:null,startOfSegment:null,playlist:this.playlist_,isSyncRequest:Boolean(!this.syncPoint_)};if(m.isSyncRequest)m.mediaIndex=U8(this.currentTimeline_,f,n);else if(this.mediaIndex!==null){var v=f[this.mediaIndex],y=typeof this.partIndex=="number"?this.partIndex:-1;m.startOfSegment=v.end?v.end:n,v.parts&&v.parts[y+1]?(m.mediaIndex=this.mediaIndex,m.partIndex=y+1):m.mediaIndex=this.mediaIndex+1}else{var E=pr.getMediaInfoForTime({experimentalExactManifestTimings:this.experimentalExactManifestTimings,playlist:this.playlist_,currentTime:this.fetchAtBuffer_?n:this.currentTime_(),startingPartIndex:this.syncPoint_.partIndex,startingSegmentIndex:this.syncPoint_.segmentIndex,startTime:this.syncPoint_.time}),I=E.segmentIndex,O=E.startTime,D=E.partIndex;m.getMediaInfoForTime=this.fetchAtBuffer_?"bufferedEnd "+n:"currentTime "+this.currentTime_(),m.mediaIndex=I,m.startOfSegment=O,m.partIndex=D}var R=f[m.mediaIndex],H=R&&typeof m.partIndex=="number"&&R.parts&&R.parts[m.partIndex];if(!R||typeof m.partIndex=="number"&&!H)return null;if(typeof m.partIndex!="number"&&R.parts&&(m.partIndex=0,H=R.parts[0]),!s&&H&&!H.independent)if(m.partIndex===0){var Z=f[m.mediaIndex-1],V=Z.parts&&Z.parts.length&&Z.parts[Z.parts.length-1];V&&V.independent&&(m.mediaIndex-=1,m.partIndex=Z.parts.length-1,m.independent="previous segment")}else R.parts[m.partIndex-1].independent&&(m.partIndex-=1,m.independent="previous part");var W=this.mediaSource_&&this.mediaSource_.readyState==="ended";return m.mediaIndex>=f.length-1&&W&&!this.seeking_()?null:this.generateSegmentInfo_(m)},i.generateSegmentInfo_=function(e){var n=e.independent,s=e.playlist,o=e.mediaIndex,l=e.startOfSegment,f=e.isSyncRequest,m=e.partIndex,v=e.forceTimestampOffset,y=e.getMediaInfoForTime,E=s.segments[o],I=typeof m=="number"&&E.parts[m],O={requestId:"segment-loader-"+Math.random(),uri:I&&I.resolvedUri||E.resolvedUri,mediaIndex:o,partIndex:I?m:null,isSyncRequest:f,startOfSegment:l,playlist:s,bytes:null,encryptedBytes:null,timestampOffset:null,timeline:E.timeline,duration:I&&I.duration||E.duration,segment:E,part:I,byteLength:0,transmuxer:this.transmuxer_,getMediaInfoForTime:y,independent:n},D=typeof v<"u"?v:this.isPendingTimestampOffset_;O.timestampOffset=this.timestampOffsetForSegment_({segmentTimeline:E.timeline,currentTimeline:this.currentTimeline_,startOfSegment:l,buffered:this.buffered_(),overrideCheck:D});var R=_b(this.sourceUpdater_.audioBuffered());return typeof R=="number"&&(O.audioAppendStart=R-this.sourceUpdater_.audioTimestampOffset()),this.sourceUpdater_.videoBuffered().length&&(O.gopsToAlignWith=R8(this.gopBuffer_,this.currentTime_()-this.sourceUpdater_.videoTimestampOffset(),this.timeMapping_)),O},i.timestampOffsetForSegment_=function(e){return H8(e)},i.earlyAbortWhenNeeded_=function(e){if(!(this.vhs_.tech_.paused()||!this.xhrOptions_.timeout||!this.playlist_.attributes.BANDWIDTH)&&!(Date.now()-(e.firstBytesReceivedAt||Date.now())<1e3)){var n=this.currentTime_(),s=e.bandwidth,o=this.pendingSegment_.duration,l=pr.estimateSegmentRequestTime(o,s,this.playlist_,e.bytesReceived),f=f3(this.buffered_(),n,this.vhs_.tech_.playbackRate())-1;if(!(l<=f)){var m=w8({master:this.vhs_.playlists.master,currentTime:n,bandwidth:s,duration:this.duration_(),segmentDuration:o,timeUntilRebuffer:f,currentTimeline:this.currentTimeline_,syncController:this.syncController_});if(m){var v=l-f,y=v-m.rebufferingImpact,E=.5;f<=Cs&&(E=1),!(!m.playlist||m.playlist.uri===this.playlist_.uri||y<E)&&(this.bandwidth=m.playlist.attributes.BANDWIDTH*mi.BANDWIDTH_VARIANCE+1,this.trigger("earlyabort"))}}}},i.handleAbort_=function(e){this.logger_("Aborting "+gu(e)),this.mediaRequestsAborted+=1},i.handleProgress_=function(e,n){this.earlyAbortWhenNeeded_(n.stats),!this.checkForAbort_(n.requestId)&&this.trigger("progress")},i.handleTrackInfo_=function(e,n){this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)&&(this.checkForIllegalMediaSwitch(n)||(n=n||{},N8(this.currentMediaInfo_,n)||(this.appendInitSegment_={audio:!0,video:!0},this.startingMediaInfo_=n,this.currentMediaInfo_=n,this.logger_("trackinfo update",n),this.trigger("trackinfo")),!this.checkForAbort_(e.requestId)&&(this.pendingSegment_.trackInfo=n,this.hasEnoughInfoToAppend_()&&this.processCallQueue_())))},i.handleTimingInfo_=function(e,n,s,o){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var l=this.pendingSegment_,f=Pb(n);l[f]=l[f]||{},l[f][s]=o,this.logger_("timinginfo: "+n+" - "+s+" - "+o),this.hasEnoughInfoToAppend_()&&this.processCallQueue_()}},i.handleCaptions_=function(e,n){var s=this;if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(n.length===0){this.logger_("SegmentLoader received no captions from a caption event");return}var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.caption.push(this.handleCaptions_.bind(this,e,n));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset(),f={};n.forEach(function(m){f[m.stream]=f[m.stream]||{startTime:1/0,captions:[],endTime:0};var v=f[m.stream];v.startTime=Math.min(v.startTime,m.startTime+l),v.endTime=Math.max(v.endTime,m.endTime+l),v.captions.push(m)}),Object.keys(f).forEach(function(m){var v=f[m],y=v.startTime,E=v.endTime,I=v.captions,O=s.inbandTextTracks_;s.logger_("adding cues from "+y+" -> "+E+" for "+m),I8(O,s.vhs_.tech_,m),xd(y,E,O[m]),P8({captionArray:I,inbandTextTracks:O,timestampOffset:l})}),this.transmuxer_&&this.transmuxer_.postMessage({action:"clearParsedMp4Captions"})}},i.handleId3_=function(e,n,s){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){var o=this.pendingSegment_;if(!o.hasAppendedData_){this.metadataQueue_.id3.push(this.handleId3_.bind(this,e,n,s));return}var l=this.sourceUpdater_.videoTimestampOffset()===null?this.sourceUpdater_.audioTimestampOffset():this.sourceUpdater_.videoTimestampOffset();L8(this.inbandTextTracks_,s,this.vhs_.tech_),D8({inbandTextTracks:this.inbandTextTracks_,metadataArray:n,timestampOffset:l,videoDuration:this.duration_()})}},i.processMetadataQueue_=function(){this.metadataQueue_.id3.forEach(function(e){return e()}),this.metadataQueue_.caption.forEach(function(e){return e()}),this.metadataQueue_.id3=[],this.metadataQueue_.caption=[]},i.processCallQueue_=function(){var e=this.callQueue_;this.callQueue_=[],e.forEach(function(n){return n()})},i.processLoadQueue_=function(){var e=this.loadQueue_;this.loadQueue_=[],e.forEach(function(n){return n()})},i.hasEnoughInfoToLoad_=function(){if(this.loaderType_!=="audio")return!0;var e=this.pendingSegment_;return e?this.getCurrentMediaInfo_()?!Ob({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}):!0:!1},i.getCurrentMediaInfo_=function(e){return e===void 0&&(e=this.pendingSegment_),e&&e.trackInfo||this.currentMediaInfo_},i.getMediaInfo_=function(e){return e===void 0&&(e=this.pendingSegment_),this.getCurrentMediaInfo_(e)||this.startingMediaInfo_},i.getPendingSegmentPlaylist=function(){return this.pendingSegment_?this.pendingSegment_.playlist:null},i.hasEnoughInfoToAppend_=function(){if(!this.sourceUpdater_.ready()||this.waitingOnRemove_||this.quotaExceededErrorRetryTimeout_)return!1;var e=this.pendingSegment_,n=this.getCurrentMediaInfo_();if(!e||!n)return!1;var s=n.hasAudio,o=n.hasVideo,l=n.isMuxed;return!(o&&!e.videoTimingInfo||s&&!this.audioDisabled_&&!l&&!e.audioTimingInfo||Ob({timelineChangeController:this.timelineChangeController_,currentTimeline:this.currentTimeline_,segmentTimeline:e.timeline,loaderType:this.loaderType_,audioDisabled:this.audioDisabled_}))},i.handleData_=function(e,n){if(this.earlyAbortWhenNeeded_(e.stats),!this.checkForAbort_(e.requestId)){if(this.callQueue_.length||!this.hasEnoughInfoToAppend_()){this.callQueue_.push(this.handleData_.bind(this,e,n));return}var s=this.pendingSegment_;if(this.setTimeMapping_(s.timeline),this.updateMediaSecondsLoaded_(s.part||s.segment),this.mediaSource_.readyState!=="closed"){if(e.map&&(e.map=this.initSegmentForMap(e.map,!0),s.segment.map=e.map),e.key&&this.segmentKey(e.key,!0),s.isFmp4=e.isFmp4,s.timingInfo=s.timingInfo||{},s.isFmp4)this.trigger("fmp4"),s.timingInfo.start=s[Pb(n.type)].start;else{var o=this.getCurrentMediaInfo_(),l=this.loaderType_==="main"&&o&&o.hasVideo,f;l&&(f=s.videoTimingInfo.start),s.timingInfo.start=this.trueSegmentStart_({currentStart:s.timingInfo.start,playlist:s.playlist,mediaIndex:s.mediaIndex,currentVideoTimestampOffset:this.sourceUpdater_.videoTimestampOffset(),useVideoTimingInfo:l,firstVideoFrameTimeForData:f,videoTimingInfo:s.videoTimingInfo,audioTimingInfo:s.audioTimingInfo})}if(this.updateAppendInitSegmentStatus(s,n.type),this.updateSourceBufferTimestampOffset_(s),s.isSyncRequest){this.updateTimingInfoEnd_(s),this.syncController_.saveSegmentTimingInfo({segmentInfo:s,shouldSaveTimelineMapping:this.loaderType_==="main"});var m=this.chooseNextRequest_();if(m.mediaIndex!==s.mediaIndex||m.partIndex!==s.partIndex){this.logger_("sync segment was incorrect, not appending");return}this.logger_("sync segment was correct, appending")}s.hasAppendedData_=!0,this.processMetadataQueue_(),this.appendData_(s,n)}}},i.updateAppendInitSegmentStatus=function(e,n){this.loaderType_==="main"&&typeof e.timestampOffset=="number"&&!e.changedTimestampOffset&&(this.appendInitSegment_={audio:!0,video:!0}),this.playlistOfLastInitSegment_[n]!==e.playlist&&(this.appendInitSegment_[n]=!0)},i.getInitSegmentAndUpdateState_=function(e){var n=e.type,s=e.initSegment,o=e.map,l=e.playlist;if(o){var f=fh(o);if(this.activeInitSegmentId_===f)return null;s=this.initSegmentForMap(o,!0).bytes,this.activeInitSegmentId_=f}return s&&this.appendInitSegment_[n]?(this.playlistOfLastInitSegment_[n]=l,this.appendInitSegment_[n]=!1,this.activeInitSegmentId_=null,s):null},i.handleQuotaExceededError_=function(e,n){var s=this,o=e.segmentInfo,l=e.type,f=e.bytes,m=this.sourceUpdater_.audioBuffered(),v=this.sourceUpdater_.videoBuffered();m.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the audio buffer: "+mo(m).join(", ")),v.length>1&&this.logger_("On QUOTA_EXCEEDED_ERR, found gaps in the video buffer: "+mo(v).join(", "));var y=m.length?m.start(0):0,E=m.length?m.end(m.length-1):0,I=v.length?v.start(0):0,O=v.length?v.end(v.length-1):0;if(E-y<=pd&&O-I<=pd){this.logger_("On QUOTA_EXCEEDED_ERR, single segment too large to append to buffer, triggering an error. "+("Appended byte length: "+f.byteLength+", ")+("audio buffer: "+mo(m).join(", ")+", ")+("video buffer: "+mo(v).join(", ")+", ")),this.error({message:"Quota exceeded error with append of a single segment of content",excludeUntil:1/0}),this.trigger("error");return}this.waitingOnRemove_=!0,this.callQueue_.push(this.appendToSourceBuffer_.bind(this,{segmentInfo:o,type:l,bytes:f}));var D=this.currentTime_(),R=D-pd;this.logger_("On QUOTA_EXCEEDED_ERR, removing audio/video from 0 to "+R),this.remove(0,R,function(){s.logger_("On QUOTA_EXCEEDED_ERR, retrying append in "+pd+"s"),s.waitingOnRemove_=!1,s.quotaExceededErrorRetryTimeout_=F.setTimeout(function(){s.logger_("On QUOTA_EXCEEDED_ERR, re-processing call queue"),s.quotaExceededErrorRetryTimeout_=null,s.processCallQueue_()},pd*1e3)},!0)},i.handleAppendError_=function(e,n){var s=e.segmentInfo,o=e.type,l=e.bytes;if(n){if(n.code===Ew){this.handleQuotaExceededError_({segmentInfo:s,type:o,bytes:l});return}this.logger_("Received non QUOTA_EXCEEDED_ERR on append",n),this.error(o+" append of "+l.length+"b failed for segment "+("#"+s.mediaIndex+" in playlist "+s.playlist.id)),this.trigger("appenderror")}},i.appendToSourceBuffer_=function(e){var n=e.segmentInfo,s=e.type,o=e.initSegment,l=e.data,f=e.bytes;if(!f){var m=[l],v=l.byteLength;o&&(m.unshift(o),v+=o.byteLength),f=A8({bytes:v,segments:m})}this.sourceUpdater_.appendBuffer({segmentInfo:n,type:s,bytes:f},this.handleAppendError_.bind(this,{segmentInfo:n,type:s,bytes:f}))},i.handleSegmentTimingInfo_=function(e,n,s){if(!(!this.pendingSegment_||n!==this.pendingSegment_.requestId)){var o=this.pendingSegment_.segment,l=e+"TimingInfo";o[l]||(o[l]={}),o[l].transmuxerPrependedSeconds=s.prependedContentDuration||0,o[l].transmuxedPresentationStart=s.start.presentation,o[l].transmuxedDecodeStart=s.start.decode,o[l].transmuxedPresentationEnd=s.end.presentation,o[l].transmuxedDecodeEnd=s.end.decode,o[l].baseMediaDecodeTime=s.baseMediaDecodeTime}},i.appendData_=function(e,n){var s=n.type,o=n.data;if(!(!o||!o.byteLength)&&!(s==="audio"&&this.audioDisabled_)){var l=this.getInitSegmentAndUpdateState_({type:s,initSegment:n.initSegment,playlist:e.playlist,map:e.isFmp4?e.segment.map:null});this.appendToSourceBuffer_({segmentInfo:e,type:s,initSegment:l,data:o})}},i.loadSegment_=function(e){var n=this;if(this.state="WAITING",this.pendingSegment_=e,this.trimBackBuffer_(e),typeof e.timestampOffset=="number"&&this.transmuxer_&&this.transmuxer_.postMessage({action:"clearAllMp4Captions"}),!this.hasEnoughInfoToLoad_()){this.loadQueue_.push(function(){var s=Ni({},e,{forceTimestampOffset:!0});Ni(e,n.generateSegmentInfo_(s)),n.isPendingTimestampOffset_=!1,n.updateTransmuxerAndRequestSegment_(e)});return}this.updateTransmuxerAndRequestSegment_(e)},i.updateTransmuxerAndRequestSegment_=function(e){var n=this;this.shouldUpdateTransmuxerTimestampOffset_(e.timestampOffset)&&(this.gopBuffer_.length=0,e.gopsToAlignWith=[],this.timeMapping_=0,this.transmuxer_.postMessage({action:"reset"}),this.transmuxer_.postMessage({action:"setTimestampOffset",timestampOffset:e.timestampOffset}));var s=this.createSimplifiedSegmentObj_(e),o=this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex),l=this.mediaIndex!==null,f=e.timeline!==this.currentTimeline_&&e.timeline>0,m=o||l&&f;this.logger_("Requesting "+gu(e)),s.map&&!s.map.bytes&&(this.logger_("going to request init segment."),this.appendInitSegment_={video:!0,audio:!0}),e.abortRequests=y8({xhr:this.vhs_.xhr,xhrOptions:this.xhrOptions_,decryptionWorker:this.decrypter_,segment:s,abortFn:this.handleAbort_.bind(this,e),progressFn:this.handleProgress_.bind(this),trackInfoFn:this.handleTrackInfo_.bind(this),timingInfoFn:this.handleTimingInfo_.bind(this),videoSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"video",e.requestId),audioSegmentTimingInfoFn:this.handleSegmentTimingInfo_.bind(this,"audio",e.requestId),captionsFn:this.handleCaptions_.bind(this),isEndOfTimeline:m,endedTimelineFn:function(){n.logger_("received endedtimeline callback")},id3Fn:this.handleId3_.bind(this),dataFn:this.handleData_.bind(this),doneFn:this.segmentRequestFinished_.bind(this),onTransmuxerLog:function(y){var E=y.message,I=y.level,O=y.stream;n.logger_(gu(e)+" logged from transmuxer stream "+O+" as a "+I+": "+E)}})},i.trimBackBuffer_=function(e){var n=V8(this.seekable_(),this.currentTime_(),this.playlist_.targetDuration||10);n>0&&this.remove(0,n)},i.createSimplifiedSegmentObj_=function(e){var n=e.segment,s=e.part,o={resolvedUri:s?s.resolvedUri:n.resolvedUri,byterange:s?s.byterange:n.byterange,requestId:e.requestId,transmuxer:e.transmuxer,audioAppendStart:e.audioAppendStart,gopsToAlignWith:e.gopsToAlignWith,part:e.part},l=e.playlist.segments[e.mediaIndex-1];if(l&&l.timeline===n.timeline&&(l.videoTimingInfo?o.baseStartTime=l.videoTimingInfo.transmuxedDecodeEnd:l.audioTimingInfo&&(o.baseStartTime=l.audioTimingInfo.transmuxedDecodeEnd)),n.key){var f=n.key.iv||new Uint32Array([0,0,0,e.mediaIndex+e.playlist.mediaSequence]);o.key=this.segmentKey(n.key),o.key.iv=f}return n.map&&(o.map=this.initSegmentForMap(n.map)),o},i.saveTransferStats_=function(e){this.mediaRequests+=1,e&&(this.mediaBytesTransferred+=e.bytesReceived,this.mediaTransferDuration+=e.roundTripTime)},i.saveBandwidthRelatedStats_=function(e,n){if(this.pendingSegment_.byteLength=n.bytesReceived,e<gc){this.logger_("Ignoring segment's bandwidth because its duration of "+e+(" is less than the min to record "+gc));return}this.bandwidth=n.bandwidth,this.roundTrip=n.roundTripTime},i.handleTimeout_=function(){this.mediaRequestsTimedout+=1,this.bandwidth=1,this.roundTrip=NaN,this.trigger("bandwidthupdate"),this.trigger("timeout")},i.segmentRequestFinished_=function(e,n,s){if(this.callQueue_.length){this.callQueue_.push(this.segmentRequestFinished_.bind(this,e,n,s));return}if(this.saveTransferStats_(n.stats),!!this.pendingSegment_&&n.requestId===this.pendingSegment_.requestId){if(e){if(this.pendingSegment_=null,this.state="READY",e.code===ta.ABORTED)return;if(this.pause(),e.code===ta.TIMEOUT){this.handleTimeout_();return}this.mediaRequestsErrored+=1,this.error(e),this.trigger("error");return}var o=this.pendingSegment_;this.saveBandwidthRelatedStats_(o.duration,n.stats),o.endOfAllRequests=n.endOfAllRequests,s.gopInfo&&(this.gopBuffer_=M8(this.gopBuffer_,s.gopInfo,this.safeAppend_)),this.state="APPENDING",this.trigger("appending"),this.waitForAppendsToComplete_(o)}},i.setTimeMapping_=function(e){var n=this.syncController_.mappingForTimeline(e);n!==null&&(this.timeMapping_=n)},i.updateMediaSecondsLoaded_=function(e){typeof e.start=="number"&&typeof e.end=="number"?this.mediaSecondsLoaded+=e.end-e.start:this.mediaSecondsLoaded+=e.duration},i.shouldUpdateTransmuxerTimestampOffset_=function(e){return e===null?!1:this.loaderType_==="main"&&e!==this.sourceUpdater_.videoTimestampOffset()||!this.audioDisabled_&&e!==this.sourceUpdater_.audioTimestampOffset()},i.trueSegmentStart_=function(e){var n=e.currentStart,s=e.playlist,o=e.mediaIndex,l=e.firstVideoFrameTimeForData,f=e.currentVideoTimestampOffset,m=e.useVideoTimingInfo,v=e.videoTimingInfo,y=e.audioTimingInfo;if(typeof n<"u")return n;if(!m)return y.start;var E=s.segments[o-1];return o===0||!E||typeof E.start>"u"||E.end!==l+f?l:v.start},i.waitForAppendsToComplete_=function(e){var n=this.getCurrentMediaInfo_(e);if(!n){this.error({message:"No starting media returned, likely due to an unsupported media format.",blacklistDuration:1/0}),this.trigger("error");return}var s=n.hasAudio,o=n.hasVideo,l=n.isMuxed,f=this.loaderType_==="main"&&o,m=!this.audioDisabled_&&s&&!l;if(e.waitingOnAppends=0,!e.hasAppendedData_){!e.timingInfo&&typeof e.timestampOffset=="number"&&(this.isPendingTimestampOffset_=!0),e.timingInfo={start:0},e.waitingOnAppends++,this.isPendingTimestampOffset_||(this.updateSourceBufferTimestampOffset_(e),this.processMetadataQueue_()),this.checkAppendsDone_(e);return}f&&e.waitingOnAppends++,m&&e.waitingOnAppends++,f&&this.sourceUpdater_.videoQueueCallback(this.checkAppendsDone_.bind(this,e)),m&&this.sourceUpdater_.audioQueueCallback(this.checkAppendsDone_.bind(this,e))},i.checkAppendsDone_=function(e){this.checkForAbort_(e.requestId)||(e.waitingOnAppends--,e.waitingOnAppends===0&&this.handleAppendsDone_())},i.checkForIllegalMediaSwitch=function(e){var n=j8(this.loaderType_,this.getCurrentMediaInfo_(),e);return n?(this.error({message:n,blacklistDuration:1/0}),this.trigger("error"),!0):!1},i.updateSourceBufferTimestampOffset_=function(e){if(!(e.timestampOffset===null||typeof e.timingInfo.start!="number"||e.changedTimestampOffset||this.loaderType_!=="main")){var n=!1;e.timestampOffset-=this.getSegmentStartTimeForTimestampOffsetCalculation_({videoTimingInfo:e.segment.videoTimingInfo,audioTimingInfo:e.segment.audioTimingInfo,timingInfo:e.timingInfo}),e.changedTimestampOffset=!0,e.timestampOffset!==this.sourceUpdater_.videoTimestampOffset()&&(this.sourceUpdater_.videoTimestampOffset(e.timestampOffset),n=!0),e.timestampOffset!==this.sourceUpdater_.audioTimestampOffset()&&(this.sourceUpdater_.audioTimestampOffset(e.timestampOffset),n=!0),n&&this.trigger("timestampoffset")}},i.getSegmentStartTimeForTimestampOffsetCalculation_=function(e){var n=e.videoTimingInfo,s=e.audioTimingInfo,o=e.timingInfo;return this.useDtsForTimestampOffset_?n&&typeof n.transmuxedDecodeStart=="number"?n.transmuxedDecodeStart:s&&typeof s.transmuxedDecodeStart=="number"?s.transmuxedDecodeStart:o.start:o.start},i.updateTimingInfoEnd_=function(e){e.timingInfo=e.timingInfo||{};var n=this.getMediaInfo_(),s=this.loaderType_==="main"&&n&&n.hasVideo,o=s&&e.videoTimingInfo?e.videoTimingInfo:e.audioTimingInfo;o&&(e.timingInfo.end=typeof o.end=="number"?o.end:o.start+e.duration)},i.handleAppendsDone_=function(){if(this.pendingSegment_&&this.trigger("appendsdone"),!this.pendingSegment_){this.state="READY",this.paused()||this.monitorBuffer_();return}var e=this.pendingSegment_;this.updateTimingInfoEnd_(e),this.shouldSaveSegmentTimingInfo_&&this.syncController_.saveSegmentTimingInfo({segmentInfo:e,shouldSaveTimelineMapping:this.loaderType_==="main"});var n=W8(e,this.sourceType_);if(n&&(n.severity==="warn"?N.log.warn(n.message):this.logger_(n.message)),this.recordThroughput_(e),this.pendingSegment_=null,this.state="READY",e.isSyncRequest&&(this.trigger("syncinfoupdate"),!e.hasAppendedData_)){this.logger_("Throwing away un-appended sync request "+gu(e));return}this.logger_("Appended "+gu(e)),this.addSegmentMetadataCue_(e),this.fetchAtBuffer_=!0,this.currentTimeline_!==e.timeline&&(this.timelineChangeController_.lastTimelineChange({type:this.loaderType_,from:this.currentTimeline_,to:e.timeline}),this.loaderType_==="main"&&!this.audioDisabled_&&this.timelineChangeController_.lastTimelineChange({type:"audio",from:this.currentTimeline_,to:e.timeline})),this.currentTimeline_=e.timeline,this.trigger("syncinfoupdate");var s=e.segment,o=e.part,l=s.end&&this.currentTime_()-s.end>e.playlist.targetDuration*3,f=o&&o.end&&this.currentTime_()-o.end>e.playlist.partTargetDuration*3;if(l||f){this.logger_("bad "+(l?"segment":"part")+" "+gu(e)),this.resetEverything();return}var m=this.mediaIndex!==null;m&&this.trigger("bandwidthupdate"),this.trigger("progress"),this.mediaIndex=e.mediaIndex,this.partIndex=e.partIndex,this.isEndOfStream_(e.mediaIndex,e.playlist,e.partIndex)&&this.endOfStream(),this.trigger("appended"),e.hasAppendedData_&&this.mediaAppends++,this.paused()||this.monitorBuffer_()},i.recordThroughput_=function(e){if(e.duration<gc){this.logger_("Ignoring segment's throughput because its duration of "+e.duration+(" is less than the min to record "+gc));return}var n=this.throughput.rate,s=Date.now()-e.endOfAllRequests+1,o=Math.floor(e.byteLength/s*8*1e3);this.throughput.rate+=(o-n)/++this.throughput.count},i.addSegmentMetadataCue_=function(e){if(this.segmentMetadataTrack_){var n=e.segment,s=n.start,o=n.end;if(!(!Ib(s)||!Ib(o))){xd(s,o,this.segmentMetadataTrack_);var l=F.WebKitDataCue||F.VTTCue,f={custom:n.custom,dateTimeObject:n.dateTimeObject,dateTimeString:n.dateTimeString,bandwidth:e.playlist.attributes.BANDWIDTH,resolution:e.playlist.attributes.RESOLUTION,codecs:e.playlist.attributes.CODECS,byteLength:e.byteLength,uri:e.uri,timeline:e.timeline,playlist:e.playlist.id,start:s,end:o},m=JSON.stringify(f),v=new l(s,o,m);v.value=f,this.segmentMetadataTrack_.addCue(v)}}},t}(N.EventTarget);function Pa(){}var ww=function(t){return typeof t!="string"?t:t.replace(/./,function(i){return i.toUpperCase()})},q8=["video","audio"],Og=function(t,i){var r=i[t+"Buffer"];return r&&r.updating||i.queuePending[t]},G8=function(t,i){for(var r=0;r<i.length;r++){var e=i[r];if(e.type==="mediaSource")return null;if(e.type===t)return r}return null},y0=function a(t,i){if(i.queue.length!==0){var r=0,e=i.queue[r];if(e.type==="mediaSource"){!i.updating()&&i.mediaSource.readyState!=="closed"&&(i.queue.shift(),e.action(i),e.doneFn&&e.doneFn(),a("audio",i),a("video",i));return}if(t!=="mediaSource"&&!(!i.ready()||i.mediaSource.readyState==="closed"||Og(t,i))){if(e.type!==t){if(r=G8(t,i.queue),r===null)return;e=i.queue[r]}if(i.queue.splice(r,1),i.queuePending[t]=e,e.action(t,i),!e.doneFn){i.queuePending[t]=null,a(t,i);return}}}},Cw=function(t,i){var r=i[t+"Buffer"],e=ww(t);r&&(r.removeEventListener("updateend",i["on"+e+"UpdateEnd_"]),r.removeEventListener("error",i["on"+e+"Error_"]),i.codecs[t]=null,i[t+"Buffer"]=null)},zn=function(t,i){return t&&i&&Array.prototype.indexOf.call(t.sourceBuffers,i)!==-1},Lr={appendBuffer:function(t,i,r){return function(e,n){var s=n[e+"Buffer"];if(zn(n.mediaSource,s)){n.logger_("Appending segment "+i.mediaIndex+"'s "+t.length+" bytes to "+e+"Buffer");try{s.appendBuffer(t)}catch(o){n.logger_("Error with code "+o.code+" "+(o.code===Ew?"(QUOTA_EXCEEDED_ERR) ":"")+("when appending segment "+i.mediaIndex+" to "+e+"Buffer")),n.queuePending[e]=null,r(o)}}}},remove:function(t,i){return function(r,e){var n=e[r+"Buffer"];if(zn(e.mediaSource,n)){e.logger_("Removing "+t+" to "+i+" from "+r+"Buffer");try{n.remove(t,i)}catch{e.logger_("Remove "+t+" to "+i+" from "+r+"Buffer failed")}}}},timestampOffset:function(t){return function(i,r){var e=r[i+"Buffer"];zn(r.mediaSource,e)&&(r.logger_("Setting "+i+"timestampOffset to "+t),e.timestampOffset=t)}},callback:function(t){return function(i,r){t()}},endOfStream:function(t){return function(i){if(i.mediaSource.readyState==="open"){i.logger_("Calling mediaSource endOfStream("+(t||"")+")");try{i.mediaSource.endOfStream(t)}catch(r){N.log.warn("Failed to call media source endOfStream",r)}}}},duration:function(t){return function(i){i.logger_("Setting mediaSource duration to "+t);try{i.mediaSource.duration=t}catch(r){N.log.warn("Failed to set media source duration",r)}}},abort:function(){return function(t,i){if(i.mediaSource.readyState==="open"){var r=i[t+"Buffer"];if(zn(i.mediaSource,r)){i.logger_("calling abort on "+t+"Buffer");try{r.abort()}catch(e){N.log.warn("Failed to abort on "+t+"Buffer",e)}}}}},addSourceBuffer:function(t,i){return function(r){var e=ww(t),n=Fa(i);r.logger_("Adding "+t+"Buffer with codec "+i+" to mediaSource");var s=r.mediaSource.addSourceBuffer(n);s.addEventListener("updateend",r["on"+e+"UpdateEnd_"]),s.addEventListener("error",r["on"+e+"Error_"]),r.codecs[t]=i,r[t+"Buffer"]=s}},removeSourceBuffer:function(t){return function(i){var r=i[t+"Buffer"];if(Cw(t,i),!!zn(i.mediaSource,r)){i.logger_("Removing "+t+"Buffer with codec "+i.codecs[t]+" from mediaSource");try{i.mediaSource.removeSourceBuffer(r)}catch(e){N.log.warn("Failed to removeSourceBuffer "+t+"Buffer",e)}}}},changeType:function(t){return function(i,r){var e=r[i+"Buffer"],n=Fa(t);zn(r.mediaSource,e)&&r.codecs[i]!==t&&(r.logger_("changing "+i+"Buffer codec from "+r.codecs[i]+" to "+t),e.changeType(n),r.codecs[i]=t)}}},kr=function(t){var i=t.type,r=t.sourceUpdater,e=t.action,n=t.doneFn,s=t.name;r.queue.push({type:i,action:e,doneFn:n,name:s}),y0(i,r)},Lb=function(t,i){return function(r){if(i.queuePending[t]){var e=i.queuePending[t].doneFn;i.queuePending[t]=null,e&&e(i[t+"Error_"])}y0(t,i)}},Aw=function(a){Ae(t,a);function t(r){var e;return e=a.call(this)||this,e.mediaSource=r,e.sourceopenListener_=function(){return y0("mediaSource",Ue(e))},e.mediaSource.addEventListener("sourceopen",e.sourceopenListener_),e.logger_=Dn("SourceUpdater"),e.audioTimestampOffset_=0,e.videoTimestampOffset_=0,e.queue=[],e.queuePending={audio:null,video:null},e.delayedAudioAppendQueue_=[],e.videoAppendQueued_=!1,e.codecs={},e.onVideoUpdateEnd_=Lb("video",Ue(e)),e.onAudioUpdateEnd_=Lb("audio",Ue(e)),e.onVideoError_=function(n){e.videoError_=n},e.onAudioError_=function(n){e.audioError_=n},e.createdSourceBuffers_=!1,e.initializedEme_=!1,e.triggeredReady_=!1,e}var i=t.prototype;return i.initializedEme=function(){this.initializedEme_=!0,this.triggerReady()},i.hasCreatedSourceBuffers=function(){return this.createdSourceBuffers_},i.hasInitializedAnyEme=function(){return this.initializedEme_},i.ready=function(){return this.hasCreatedSourceBuffers()&&this.hasInitializedAnyEme()},i.createSourceBuffers=function(e){this.hasCreatedSourceBuffers()||(this.addOrChangeSourceBuffers(e),this.createdSourceBuffers_=!0,this.trigger("createdsourcebuffers"),this.triggerReady())},i.triggerReady=function(){this.ready()&&!this.triggeredReady_&&(this.triggeredReady_=!0,this.trigger("ready"))},i.addSourceBuffer=function(e,n){kr({type:"mediaSource",sourceUpdater:this,action:Lr.addSourceBuffer(e,n),name:"addSourceBuffer"})},i.abort=function(e){kr({type:e,sourceUpdater:this,action:Lr.abort(e),name:"abort"})},i.removeSourceBuffer=function(e){if(!this.canRemoveSourceBuffer()){N.log.error("removeSourceBuffer is not supported!");return}kr({type:"mediaSource",sourceUpdater:this,action:Lr.removeSourceBuffer(e),name:"removeSourceBuffer"})},i.canRemoveSourceBuffer=function(){return!N.browser.IE_VERSION&&!N.browser.IS_FIREFOX&&F.MediaSource&&F.MediaSource.prototype&&typeof F.MediaSource.prototype.removeSourceBuffer=="function"},t.canChangeType=function(){return F.SourceBuffer&&F.SourceBuffer.prototype&&typeof F.SourceBuffer.prototype.changeType=="function"},i.canChangeType=function(){return this.constructor.canChangeType()},i.changeType=function(e,n){if(!this.canChangeType()){N.log.error("changeType is not supported!");return}kr({type:e,sourceUpdater:this,action:Lr.changeType(n),name:"changeType"})},i.addOrChangeSourceBuffers=function(e){var n=this;if(!e||typeof e!="object"||Object.keys(e).length===0)throw new Error("Cannot addOrChangeSourceBuffers to undefined codecs");Object.keys(e).forEach(function(s){var o=e[s];if(!n.hasCreatedSourceBuffers())return n.addSourceBuffer(s,o);n.canChangeType()&&n.changeType(s,o)})},i.appendBuffer=function(e,n){var s=this,o=e.segmentInfo,l=e.type,f=e.bytes;if(this.processedAppend_=!0,l==="audio"&&this.videoBuffer&&!this.videoAppendQueued_){this.delayedAudioAppendQueue_.push([e,n]),this.logger_("delayed audio append of "+f.length+" until video append");return}var m=n;if(kr({type:l,sourceUpdater:this,action:Lr.appendBuffer(f,o||{mediaIndex:-1},m),doneFn:n,name:"appendBuffer"}),l==="video"){if(this.videoAppendQueued_=!0,!this.delayedAudioAppendQueue_.length)return;var v=this.delayedAudioAppendQueue_.slice();this.logger_("queuing delayed audio "+v.length+" appendBuffers"),this.delayedAudioAppendQueue_.length=0,v.forEach(function(y){s.appendBuffer.apply(s,y)})}},i.audioBuffered=function(){return zn(this.mediaSource,this.audioBuffer)&&this.audioBuffer.buffered?this.audioBuffer.buffered:N.createTimeRange()},i.videoBuffered=function(){return zn(this.mediaSource,this.videoBuffer)&&this.videoBuffer.buffered?this.videoBuffer.buffered:N.createTimeRange()},i.buffered=function(){var e=zn(this.mediaSource,this.videoBuffer)?this.videoBuffer:null,n=zn(this.mediaSource,this.audioBuffer)?this.audioBuffer:null;return n&&!e?this.audioBuffered():e&&!n?this.videoBuffered():d3(this.audioBuffered(),this.videoBuffered())},i.setDuration=function(e,n){n===void 0&&(n=Pa),kr({type:"mediaSource",sourceUpdater:this,action:Lr.duration(e),name:"duration",doneFn:n})},i.endOfStream=function(e,n){e===void 0&&(e=null),n===void 0&&(n=Pa),typeof e!="string"&&(e=void 0),kr({type:"mediaSource",sourceUpdater:this,action:Lr.endOfStream(e),name:"endOfStream",doneFn:n})},i.removeAudio=function(e,n,s){if(s===void 0&&(s=Pa),!this.audioBuffered().length||this.audioBuffered().end(0)===0){s();return}kr({type:"audio",sourceUpdater:this,action:Lr.remove(e,n),doneFn:s,name:"remove"})},i.removeVideo=function(e,n,s){if(s===void 0&&(s=Pa),!this.videoBuffered().length||this.videoBuffered().end(0)===0){s();return}kr({type:"video",sourceUpdater:this,action:Lr.remove(e,n),doneFn:s,name:"remove"})},i.updating=function(){return!!(Og("audio",this)||Og("video",this))},i.audioTimestampOffset=function(e){return typeof e<"u"&&this.audioBuffer&&this.audioTimestampOffset_!==e&&(kr({type:"audio",sourceUpdater:this,action:Lr.timestampOffset(e),name:"timestampOffset"}),this.audioTimestampOffset_=e),this.audioTimestampOffset_},i.videoTimestampOffset=function(e){return typeof e<"u"&&this.videoBuffer&&this.videoTimestampOffset!==e&&(kr({type:"video",sourceUpdater:this,action:Lr.timestampOffset(e),name:"timestampOffset"}),this.videoTimestampOffset_=e),this.videoTimestampOffset_},i.audioQueueCallback=function(e){this.audioBuffer&&kr({type:"audio",sourceUpdater:this,action:Lr.callback(e),name:"callback"})},i.videoQueueCallback=function(e){this.videoBuffer&&kr({type:"video",sourceUpdater:this,action:Lr.callback(e),name:"callback"})},i.dispose=function(){var e=this;this.trigger("dispose"),q8.forEach(function(n){e.abort(n),e.canRemoveSourceBuffer()?e.removeSourceBuffer(n):e[n+"QueueCallback"](function(){return Cw(n,e)})}),this.videoAppendQueued_=!1,this.delayedAudioAppendQueue_.length=0,this.sourceopenListener_&&this.mediaSource.removeEventListener("sourceopen",this.sourceopenListener_),this.off()},t}(N.EventTarget),kb=function(t){return decodeURIComponent(escape(String.fromCharCode.apply(null,t)))},Rb=new Uint8Array(`

`.split("").map(function(a){return a.charCodeAt(0)})),z8=function(a){Ae(t,a);function t(){return a.call(this,"Trying to parse received VTT cues, but there is no WebVTT. Make sure vtt.js is loaded.")||this}return t}(qc(Error)),K8=function(a){Ae(t,a);function t(r,e){var n;return e===void 0&&(e={}),n=a.call(this,r,e)||this,n.mediaSource_=null,n.subtitlesTrack_=null,n.loaderType_="subtitle",n.featuresNativeTextTracks_=r.featuresNativeTextTracks,n.loadVttJs=r.loadVttJs,n.shouldSaveSegmentTimingInfo_=!1,n}var i=t.prototype;return i.createTransmuxer_=function(){return null},i.buffered_=function(){if(!this.subtitlesTrack_||!this.subtitlesTrack_.cues||!this.subtitlesTrack_.cues.length)return N.createTimeRanges();var e=this.subtitlesTrack_.cues,n=e[0].startTime,s=e[e.length-1].startTime;return N.createTimeRanges([[n,s]])},i.initSegmentForMap=function(e,n){if(n===void 0&&(n=!1),!e)return null;var s=fh(e),o=this.initSegments_[s];if(n&&!o&&e.bytes){var l=Rb.byteLength+e.bytes.byteLength,f=new Uint8Array(l);f.set(e.bytes),f.set(Rb,e.bytes.byteLength),this.initSegments_[s]=o={resolvedUri:e.resolvedUri,byterange:e.byterange,bytes:f}}return o||e},i.couldBeginLoading_=function(){return this.playlist_&&this.subtitlesTrack_&&!this.paused()},i.init_=function(){return this.state="READY",this.resetEverything(),this.monitorBuffer_()},i.track=function(e){return typeof e>"u"?this.subtitlesTrack_:(this.subtitlesTrack_=e,this.state==="INIT"&&this.couldBeginLoading_()&&this.init_(),this.subtitlesTrack_)},i.remove=function(e,n){xd(e,n,this.subtitlesTrack_)},i.fillBuffer_=function(){var e=this,n=this.chooseNextRequest_();if(n){if(this.syncController_.timestampOffsetForTimeline(n.timeline)===null){var s=function(){e.state="READY",e.paused()||e.monitorBuffer_()};this.syncController_.one("timestampoffset",s),this.state="WAITING_ON_TIMELINE";return}this.loadSegment_(n)}},i.timestampOffsetForSegment_=function(){return null},i.chooseNextRequest_=function(){return this.skipEmptySegments_(a.prototype.chooseNextRequest_.call(this))},i.skipEmptySegments_=function(e){for(;e&&e.segment.empty;){if(e.mediaIndex+1>=e.playlist.segments.length){e=null;break}e=this.generateSegmentInfo_({playlist:e.playlist,mediaIndex:e.mediaIndex+1,startOfSegment:e.startOfSegment+e.duration,isSyncRequest:e.isSyncRequest})}return e},i.stopForError=function(e){this.error(e),this.state="READY",this.pause(),this.trigger("error")},i.segmentRequestFinished_=function(e,n,s){var o=this;if(!this.subtitlesTrack_){this.state="READY";return}if(this.saveTransferStats_(n.stats),!this.pendingSegment_){this.state="READY",this.mediaRequestsAborted+=1;return}if(e){e.code===ta.TIMEOUT&&this.handleTimeout_(),e.code===ta.ABORTED?this.mediaRequestsAborted+=1:this.mediaRequestsErrored+=1,this.stopForError(e);return}var l=this.pendingSegment_;this.saveBandwidthRelatedStats_(l.duration,n.stats),n.key&&this.segmentKey(n.key,!0),this.state="APPENDING",this.trigger("appending");var f=l.segment;if(f.map&&(f.map.bytes=n.map.bytes),l.bytes=n.bytes,typeof F.WebVTT!="function"&&typeof this.loadVttJs=="function"){this.state="WAITING_ON_VTTJS",this.loadVttJs().then(function(){return o.segmentRequestFinished_(e,n,s)},function(){return o.stopForError({message:"Error loading vtt.js"})});return}f.requested=!0;try{this.parseVTTCues_(l)}catch(m){this.stopForError({message:m.message});return}if(this.updateTimeMapping_(l,this.syncController_.timelines[l.timeline],this.playlist_),l.cues.length?l.timingInfo={start:l.cues[0].startTime,end:l.cues[l.cues.length-1].endTime}:l.timingInfo={start:l.startOfSegment,end:l.startOfSegment+l.duration},l.isSyncRequest){this.trigger("syncinfoupdate"),this.pendingSegment_=null,this.state="READY";return}l.byteLength=l.bytes.byteLength,this.mediaSecondsLoaded+=f.duration,l.cues.forEach(function(m){o.subtitlesTrack_.addCue(o.featuresNativeTextTracks_?new F.VTTCue(m.startTime,m.endTime,m.text):m)}),k8(this.subtitlesTrack_),this.handleAppendsDone_()},i.handleData_=function(){},i.updateTimingInfoEnd_=function(){},i.parseVTTCues_=function(e){var n,s=!1;if(typeof F.WebVTT!="function")throw new z8;typeof F.TextDecoder=="function"?n=new F.TextDecoder("utf8"):(n=F.WebVTT.StringDecoder(),s=!0);var o=new F.WebVTT.Parser(F,F.vttjs,n);if(e.cues=[],e.timestampmap={MPEGTS:0,LOCAL:0},o.oncue=e.cues.push.bind(e.cues),o.ontimestampmap=function(m){e.timestampmap=m},o.onparsingerror=function(m){N.log.warn("Error encountered when parsing cues: "+m.message)},e.segment.map){var l=e.segment.map.bytes;s&&(l=kb(l)),o.parse(l)}var f=e.bytes;s&&(f=kb(f)),o.parse(f),o.flush()},i.updateTimeMapping_=function(e,n,s){var o=e.segment;if(n){if(!e.cues.length){o.empty=!0;return}var l=e.timestampmap,f=l.MPEGTS/xs.ONE_SECOND_IN_TS-l.LOCAL+n.mapping;if(e.cues.forEach(function(y){y.startTime+=f,y.endTime+=f}),!s.syncInfo){var m=e.cues[0].startTime,v=e.cues[e.cues.length-1].startTime;s.syncInfo={mediaSequence:s.mediaSequence+e.mediaIndex,time:Math.min(m,v-o.duration)}}}},t}(Pg),X8=function(t,i){for(var r=t.cues,e=0;e<r.length;e++){var n=r[e];if(i>=n.adStartTime&&i<=n.adEndTime)return n}return null},Q8=function(t,i,r){if(r===void 0&&(r=0),!!t.segments)for(var e=r,n,s=0;s<t.segments.length;s++){var o=t.segments[s];if(n||(n=X8(i,e+o.duration/2)),n){if("cueIn"in o){n.endTime=e,n.adEndTime=e,e+=o.duration,n=null;continue}if(e<n.endTime){e+=o.duration;continue}n.endTime+=o.duration}else if("cueOut"in o&&(n=new F.VTTCue(e,e+o.duration,o.cueOut),n.adStartTime=e,n.adEndTime=e+parseFloat(o.cueOut),i.addCue(n)),"cueOutCont"in o){var l=o.cueOutCont.split("/").map(parseFloat),f=l[0],m=l[1];n=new F.VTTCue(e,e+o.duration,""),n.adStartTime=e-f,n.adEndTime=n.adStartTime+m,i.addCue(n)}e+=o.duration}},Y8=86400,Mb=[{name:"VOD",run:function(t,i,r,e,n){if(r!==1/0){var s={time:0,segmentIndex:0,partIndex:null};return s}return null}},{name:"ProgramDateTime",run:function(t,i,r,e,n){if(!Object.keys(t.timelineToDatetimeMappings).length)return null;var s=null,o=null,l=bg(i);n=n||0;for(var f=0;f<l.length;f++){var m=i.endList||n===0?f:l.length-(f+1),v=l[m],y=v.segment,E=t.timelineToDatetimeMappings[y.timeline];if(!(!E||!y.dateTimeObject)){var I=y.dateTimeObject.getTime()/1e3,O=I+E;if(y.parts&&typeof v.partIndex=="number")for(var D=0;D<v.partIndex;D++)O+=y.parts[D].duration;var R=Math.abs(n-O);if(o!==null&&(R===0||o<R))break;o=R,s={time:O,segmentIndex:v.segmentIndex,partIndex:v.partIndex}}}return s}},{name:"Segment",run:function(t,i,r,e,n){var s=null,o=null;n=n||0;for(var l=bg(i),f=0;f<l.length;f++){var m=i.endList||n===0?f:l.length-(f+1),v=l[m],y=v.segment,E=v.part&&v.part.start||y&&y.start;if(y.timeline===e&&typeof E<"u"){var I=Math.abs(n-E);if(o!==null&&o<I)break;(!s||o===null||o>=I)&&(o=I,s={time:E,segmentIndex:v.segmentIndex,partIndex:v.partIndex})}}return s}},{name:"Discontinuity",run:function(t,i,r,e,n){var s=null;if(n=n||0,i.discontinuityStarts&&i.discontinuityStarts.length)for(var o=null,l=0;l<i.discontinuityStarts.length;l++){var f=i.discontinuityStarts[l],m=i.discontinuitySequence+l+1,v=t.discontinuities[m];if(v){var y=Math.abs(n-v.time);if(o!==null&&o<y)break;(!s||o===null||o>=y)&&(o=y,s={time:v.time,segmentIndex:f,partIndex:null})}}return s}},{name:"Playlist",run:function(t,i,r,e,n){if(i.syncInfo){var s={time:i.syncInfo.time,segmentIndex:i.syncInfo.mediaSequence-i.mediaSequence,partIndex:null};return s}return null}}],J8=function(a){Ae(t,a);function t(r){var e;return e=a.call(this)||this,e.timelines=[],e.discontinuities=[],e.timelineToDatetimeMappings={},e.logger_=Dn("SyncController"),e}var i=t.prototype;return i.getSyncPoint=function(e,n,s,o){var l=this.runStrategies_(e,n,s,o);return l.length?this.selectSyncPoint_(l,{key:"time",value:o}):null},i.getExpiredTime=function(e,n){if(!e||!e.segments)return null;var s=this.runStrategies_(e,n,e.discontinuitySequence,0);if(!s.length)return null;var o=this.selectSyncPoint_(s,{key:"segmentIndex",value:0});return o.segmentIndex>0&&(o.time*=-1),Math.abs(o.time+Ld({defaultDuration:e.targetDuration,durationList:e.segments,startIndex:o.segmentIndex,endIndex:0}))},i.runStrategies_=function(e,n,s,o){for(var l=[],f=0;f<Mb.length;f++){var m=Mb[f],v=m.run(this,e,n,s,o);v&&(v.strategy=m.name,l.push({strategy:m.name,syncPoint:v}))}return l},i.selectSyncPoint_=function(e,n){for(var s=e[0].syncPoint,o=Math.abs(e[0].syncPoint[n.key]-n.value),l=e[0].strategy,f=1;f<e.length;f++){var m=Math.abs(e[f].syncPoint[n.key]-n.value);m<o&&(o=m,s=e[f].syncPoint,l=e[f].strategy)}return this.logger_("syncPoint for ["+n.key+": "+n.value+"] chosen with strategy"+(" ["+l+"]: [time:"+s.time+",")+(" segmentIndex:"+s.segmentIndex)+(typeof s.partIndex=="number"?",partIndex:"+s.partIndex:"")+"]"),s},i.saveExpiredSegmentInfo=function(e,n){var s=n.mediaSequence-e.mediaSequence;if(s>Y8){N.log.warn("Not saving expired segment info. Media sequence gap "+s+" is too large.");return}for(var o=s-1;o>=0;o--){var l=e.segments[o];if(l&&typeof l.start<"u"){n.syncInfo={mediaSequence:e.mediaSequence+o,time:l.start},this.logger_("playlist refresh sync: [time:"+n.syncInfo.time+","+(" mediaSequence: "+n.syncInfo.mediaSequence+"]")),this.trigger("syncinfoupdate");break}}},i.setDateTimeMappingForStart=function(e){if(this.timelineToDatetimeMappings={},e.segments&&e.segments.length&&e.segments[0].dateTimeObject){var n=e.segments[0],s=n.dateTimeObject.getTime()/1e3;this.timelineToDatetimeMappings[n.timeline]=-s}},i.saveSegmentTimingInfo=function(e){var n=e.segmentInfo,s=e.shouldSaveTimelineMapping,o=this.calculateSegmentTimeMapping_(n,n.timingInfo,s),l=n.segment;o&&(this.saveDiscontinuitySyncInfo_(n),n.playlist.syncInfo||(n.playlist.syncInfo={mediaSequence:n.playlist.mediaSequence+n.mediaIndex,time:l.start}));var f=l.dateTimeObject;l.discontinuity&&s&&f&&(this.timelineToDatetimeMappings[l.timeline]=-(f.getTime()/1e3))},i.timestampOffsetForTimeline=function(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].time},i.mappingForTimeline=function(e){return typeof this.timelines[e]>"u"?null:this.timelines[e].mapping},i.calculateSegmentTimeMapping_=function(e,n,s){var o=e.segment,l=e.part,f=this.timelines[e.timeline],m,v;if(typeof e.timestampOffset=="number")f={time:e.startOfSegment,mapping:e.startOfSegment-n.start},s&&(this.timelines[e.timeline]=f,this.trigger("timestampoffset"),this.logger_("time mapping for timeline "+e.timeline+": "+("[time: "+f.time+"] [mapping: "+f.mapping+"]"))),m=e.startOfSegment,v=n.end+f.mapping;else if(f)m=n.start+f.mapping,v=n.end+f.mapping;else return!1;return l&&(l.start=m,l.end=v),(!o.start||m<o.start)&&(o.start=m),o.end=v,!0},i.saveDiscontinuitySyncInfo_=function(e){var n=e.playlist,s=e.segment;if(s.discontinuity)this.discontinuities[s.timeline]={time:s.start,accuracy:0};else if(n.discontinuityStarts&&n.discontinuityStarts.length)for(var o=0;o<n.discontinuityStarts.length;o++){var l=n.discontinuityStarts[o],f=n.discontinuitySequence+o+1,m=l-e.mediaIndex,v=Math.abs(m);if(!this.discontinuities[f]||this.discontinuities[f].accuracy>v){var y=void 0;m<0?y=s.start-Ld({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex,endIndex:l}):y=s.end+Ld({defaultDuration:n.targetDuration,durationList:n.segments,startIndex:e.mediaIndex+1,endIndex:l}),this.discontinuities[f]={time:y,accuracy:v}}}},i.dispose=function(){this.trigger("dispose"),this.off()},t}(N.EventTarget),Z8=function(a){Ae(t,a);function t(){var r;return r=a.call(this)||this,r.pendingTimelineChanges_={},r.lastTimelineChanges_={},r}var i=t.prototype;return i.clearPendingTimelineChange=function(e){this.pendingTimelineChanges_[e]=null,this.trigger("pendingtimelinechange")},i.pendingTimelineChange=function(e){var n=e.type,s=e.from,o=e.to;return typeof s=="number"&&typeof o=="number"&&(this.pendingTimelineChanges_[n]={type:n,from:s,to:o},this.trigger("pendingtimelinechange")),this.pendingTimelineChanges_[n]},i.lastTimelineChange=function(e){var n=e.type,s=e.from,o=e.to;return typeof s=="number"&&typeof o=="number"&&(this.lastTimelineChanges_[n]={type:n,from:s,to:o},delete this.pendingTimelineChanges_[n],this.trigger("timelinechange")),this.lastTimelineChanges_[n]},i.dispose=function(){this.trigger("dispose"),this.pendingTimelineChanges_={},this.lastTimelineChanges_={},this.off()},t}(N.EventTarget),e4=hw(pw(function(){var a=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function t(V,W,te){return te={path:W,exports:{},require:function(q,X){return i(q,X??te.path)}},V(te,te.exports),te.exports}function i(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}var r=t(function(V){function W(z,q){for(var X=0;X<q.length;X++){var j=q[X];j.enumerable=j.enumerable||!1,j.configurable=!0,"value"in j&&(j.writable=!0),Object.defineProperty(z,j.key,j)}}function te(z,q,X){return q&&W(z.prototype,q),X&&W(z,X),z}V.exports=te,V.exports.default=V.exports,V.exports.__esModule=!0}),e=t(function(V){function W(te,z){return V.exports=W=Object.setPrototypeOf||function(X,j){return X.__proto__=j,X},V.exports.default=V.exports,V.exports.__esModule=!0,W(te,z)}V.exports=W,V.exports.default=V.exports,V.exports.__esModule=!0}),n=t(function(V){function W(te,z){te.prototype=Object.create(z.prototype),te.prototype.constructor=te,e(te,z)}V.exports=W,V.exports.default=V.exports,V.exports.__esModule=!0}),s=function(){function V(){this.listeners={}}var W=V.prototype;return W.on=function(z,q){this.listeners[z]||(this.listeners[z]=[]),this.listeners[z].push(q)},W.off=function(z,q){if(!this.listeners[z])return!1;var X=this.listeners[z].indexOf(q);return this.listeners[z]=this.listeners[z].slice(0),this.listeners[z].splice(X,1),X>-1},W.trigger=function(z){var q=this.listeners[z];if(q)if(arguments.length===2)for(var X=q.length,j=0;j<X;++j)q[j].call(this,arguments[1]);else for(var oe=Array.prototype.slice.call(arguments,1),re=q.length,se=0;se<re;++se)q[se].apply(this,oe)},W.dispose=function(){this.listeners={}},W.pipe=function(z){this.on("data",function(q){z.push(q)})},V}();function o(V){return V.subarray(0,V.byteLength-V[V.byteLength-1])}var l=function(){var W=[[[],[],[],[],[]],[[],[],[],[],[]]],te=W[0],z=W[1],q=te[4],X=z[4],j,oe,re,se=[],he=[],le,pe,ne,fe,Ie,Ce;for(j=0;j<256;j++)he[(se[j]=j<<1^(j>>7)*283)^j]=j;for(oe=re=0;!q[oe];oe^=le||1,re=he[re]||1)for(fe=re^re<<1^re<<2^re<<3^re<<4,fe=fe>>8^fe&255^99,q[oe]=fe,X[fe]=oe,ne=se[pe=se[le=se[oe]]],Ce=ne*16843009^pe*65537^le*257^oe*16843008,Ie=se[fe]*257^fe*16843008,j=0;j<4;j++)te[j][oe]=Ie=Ie<<24^Ie>>>8,z[j][fe]=Ce=Ce<<24^Ce>>>8;for(j=0;j<5;j++)te[j]=te[j].slice(0),z[j]=z[j].slice(0);return W},f=null,m=function(){function V(te){f||(f=l()),this._tables=[[f[0][0].slice(),f[0][1].slice(),f[0][2].slice(),f[0][3].slice(),f[0][4].slice()],[f[1][0].slice(),f[1][1].slice(),f[1][2].slice(),f[1][3].slice(),f[1][4].slice()]];var z,q,X,j=this._tables[0][4],oe=this._tables[1],re=te.length,se=1;if(re!==4&&re!==6&&re!==8)throw new Error("Invalid aes key size");var he=te.slice(0),le=[];for(this._key=[he,le],z=re;z<4*re+28;z++)X=he[z-1],(z%re===0||re===8&&z%re===4)&&(X=j[X>>>24]<<24^j[X>>16&255]<<16^j[X>>8&255]<<8^j[X&255],z%re===0&&(X=X<<8^X>>>24^se<<24,se=se<<1^(se>>7)*283)),he[z]=he[z-re]^X;for(q=0;z;q++,z--)X=he[q&3?z:z-4],z<=4||q<4?le[q]=X:le[q]=oe[0][j[X>>>24]]^oe[1][j[X>>16&255]]^oe[2][j[X>>8&255]]^oe[3][j[X&255]]}var W=V.prototype;return W.decrypt=function(z,q,X,j,oe,re){var se=this._key[1],he=z^se[0],le=j^se[1],pe=X^se[2],ne=q^se[3],fe,Ie,Ce,Xe=se.length/4-2,Be,Qe=4,Et=this._tables[1],Tt=Et[0],bt=Et[1],wt=Et[2],Ct=Et[3],ct=Et[4];for(Be=0;Be<Xe;Be++)fe=Tt[he>>>24]^bt[le>>16&255]^wt[pe>>8&255]^Ct[ne&255]^se[Qe],Ie=Tt[le>>>24]^bt[pe>>16&255]^wt[ne>>8&255]^Ct[he&255]^se[Qe+1],Ce=Tt[pe>>>24]^bt[ne>>16&255]^wt[he>>8&255]^Ct[le&255]^se[Qe+2],ne=Tt[ne>>>24]^bt[he>>16&255]^wt[le>>8&255]^Ct[pe&255]^se[Qe+3],Qe+=4,he=fe,le=Ie,pe=Ce;for(Be=0;Be<4;Be++)oe[(3&-Be)+re]=ct[he>>>24]<<24^ct[le>>16&255]<<16^ct[pe>>8&255]<<8^ct[ne&255]^se[Qe++],fe=he,he=le,le=pe,pe=ne,ne=fe},V}(),v=function(V){n(W,V);function W(){var z;return z=V.call(this,s)||this,z.jobs=[],z.delay=1,z.timeout_=null,z}var te=W.prototype;return te.processJob_=function(){this.jobs.shift()(),this.jobs.length?this.timeout_=setTimeout(this.processJob_.bind(this),this.delay):this.timeout_=null},te.push=function(q){this.jobs.push(q),this.timeout_||(this.timeout_=setTimeout(this.processJob_.bind(this),this.delay))},W}(s),y=function(W){return W<<24|(W&65280)<<8|(W&16711680)>>8|W>>>24},E=function(W,te,z){var q=new Int32Array(W.buffer,W.byteOffset,W.byteLength>>2),X=new m(Array.prototype.slice.call(te)),j=new Uint8Array(W.byteLength),oe=new Int32Array(j.buffer),re,se,he,le,pe,ne,fe,Ie,Ce;for(re=z[0],se=z[1],he=z[2],le=z[3],Ce=0;Ce<q.length;Ce+=4)pe=y(q[Ce]),ne=y(q[Ce+1]),fe=y(q[Ce+2]),Ie=y(q[Ce+3]),X.decrypt(pe,ne,fe,Ie,oe,Ce),oe[Ce]=y(oe[Ce]^re),oe[Ce+1]=y(oe[Ce+1]^se),oe[Ce+2]=y(oe[Ce+2]^he),oe[Ce+3]=y(oe[Ce+3]^le),re=pe,se=ne,he=fe,le=Ie;return j},I=function(){function V(te,z,q,X){var j=V.STEP,oe=new Int32Array(te.buffer),re=new Uint8Array(te.byteLength),se=0;for(this.asyncStream_=new v,this.asyncStream_.push(this.decryptChunk_(oe.subarray(se,se+j),z,q,re)),se=j;se<oe.length;se+=j)q=new Uint32Array([y(oe[se-4]),y(oe[se-3]),y(oe[se-2]),y(oe[se-1])]),this.asyncStream_.push(this.decryptChunk_(oe.subarray(se,se+j),z,q,re));this.asyncStream_.push(function(){X(null,o(re))})}var W=V.prototype;return W.decryptChunk_=function(z,q,X,j){return function(){var oe=E(z,q,X);j.set(oe,z.byteOffset)}},r(V,null,[{key:"STEP",get:function(){return 32e3}}]),V}(),O;typeof window<"u"?O=window:typeof a<"u"?O=a:typeof self<"u"?O=self:O={};var D=O,R=function(W){return ArrayBuffer.isView==="function"?ArrayBuffer.isView(W):W&&W.buffer instanceof ArrayBuffer},H=D.BigInt||Number;H("0x1"),H("0x100"),H("0x10000"),H("0x1000000"),H("0x100000000"),H("0x10000000000"),H("0x1000000000000"),H("0x100000000000000"),H("0x10000000000000000"),function(){var V=new Uint16Array([65484]),W=new Uint8Array(V.buffer,V.byteOffset,V.byteLength);return W[0]===255?"big":W[0]===204?"little":"unknown"}();var Z=function(W){var te={};return Object.keys(W).forEach(function(z){var q=W[z];R(q)?te[z]={bytes:q.buffer,byteOffset:q.byteOffset,byteLength:q.byteLength}:te[z]=q}),te};self.onmessage=function(V){var W=V.data,te=new Uint8Array(W.encrypted.bytes,W.encrypted.byteOffset,W.encrypted.byteLength),z=new Uint32Array(W.key.bytes,W.key.byteOffset,W.key.byteLength/4),q=new Uint32Array(W.iv.bytes,W.iv.byteOffset,W.iv.byteLength/4);new I(te,z,q,function(X,j){self.postMessage(Z({source:W.source,decrypted:j}),[j.buffer])})}})),t4=cw(e4),i4=function(t){var i=t.default?"main":"alternative";return t.characteristics&&t.characteristics.indexOf("public.accessibility.describes-video")>=0&&(i="main-desc"),i},mh=function(t,i){t.abort(),t.pause(),i&&i.activePlaylistLoader&&(i.activePlaylistLoader.pause(),i.activePlaylistLoader=null)},Dg=function(t,i){i.activePlaylistLoader=t,t.load()},r4=function(t,i){return function(){var r=i.segmentLoaders,e=r[t],n=r.main,s=i.mediaTypes[t],o=s.activeTrack(),l=s.getActiveGroup(),f=s.activePlaylistLoader,m=s.lastGroup_;if(!(l&&m&&l.id===m.id)&&(s.lastGroup_=l,s.lastTrack_=o,mh(e,s),!(!l||l.isMasterPlaylist))){if(!l.playlistLoader){f&&n.resetEverything();return}e.resyncLoader(),Dg(l.playlistLoader,s)}}},n4=function(t,i){return function(){var r=i.segmentLoaders[t],e=i.mediaTypes[t];e.lastGroup_=null,r.abort(),r.pause()}},a4=function(t,i){return function(){var r=i.masterPlaylistLoader,e=i.segmentLoaders,n=e[t],s=e.main,o=i.mediaTypes[t],l=o.activeTrack(),f=o.getActiveGroup(),m=o.activePlaylistLoader,v=o.lastTrack_;if(!(v&&l&&v.id===l.id)&&(o.lastGroup_=f,o.lastTrack_=l,mh(n,o),!!f)){if(f.isMasterPlaylist){if(!l||!v||l.id===v.id)return;var y=i.vhs.masterPlaylistController_,E=y.selectPlaylist();if(y.media()===E)return;o.logger_("track change. Switching master audio from "+v.id+" to "+l.id),r.pause(),s.resetEverything(),y.fastQualityChange_(E);return}if(t==="AUDIO"){if(!f.playlistLoader){s.setAudio(!0),s.resetEverything();return}n.setAudio(!0),s.setAudio(!1)}if(m===f.playlistLoader){Dg(f.playlistLoader,o);return}n.track&&n.track(l),n.resetEverything(),Dg(f.playlistLoader,o)}}},gh={AUDIO:function(t,i){return function(){var r=i.segmentLoaders[t],e=i.mediaTypes[t],n=i.blacklistCurrentPlaylist;mh(r,e);var s=e.activeTrack(),o=e.activeGroup(),l=(o.filter(function(v){return v.default})[0]||o[0]).id,f=e.tracks[l];if(s===f){n({message:"Problem encountered loading the default audio track."});return}N.log.warn("Problem encountered loading the alternate audio track.Switching back to default.");for(var m in e.tracks)e.tracks[m].enabled=e.tracks[m]===f;e.onTrackChanged()}},SUBTITLES:function(t,i){return function(){var r=i.segmentLoaders[t],e=i.mediaTypes[t];N.log.warn("Problem encountered loading the subtitle track.Disabling subtitle track."),mh(r,e);var n=e.activeTrack();n&&(n.mode="disabled"),e.onTrackChanged()}}},Fb={AUDIO:function(t,i,r){if(i){var e=r.tech,n=r.requestOptions,s=r.segmentLoaders[t];i.on("loadedmetadata",function(){var o=i.media();s.playlist(o,n),(!e.paused()||o.endList&&e.preload()!=="none")&&s.load()}),i.on("loadedplaylist",function(){s.playlist(i.media(),n),e.paused()||s.load()}),i.on("error",gh[t](t,r))}},SUBTITLES:function(t,i,r){var e=r.tech,n=r.requestOptions,s=r.segmentLoaders[t],o=r.mediaTypes[t];i.on("loadedmetadata",function(){var l=i.media();s.playlist(l,n),s.track(o.activeTrack()),(!e.paused()||l.endList&&e.preload()!=="none")&&s.load()}),i.on("loadedplaylist",function(){s.playlist(i.media(),n),e.paused()||s.load()}),i.on("error",gh[t](t,r))}},s4={AUDIO:function(t,i){var r=i.vhs,e=i.sourceType,n=i.segmentLoaders[t],s=i.requestOptions,o=i.master.mediaGroups,l=i.mediaTypes[t],f=l.groups,m=l.tracks,v=l.logger_,y=i.masterPlaylistLoader,E=vf(y.master);(!o[t]||Object.keys(o[t]).length===0)&&(o[t]={main:{default:{default:!0}}},E&&(o[t].main.default.playlists=y.master.playlists));for(var I in o[t]){f[I]||(f[I]=[]);for(var O in o[t][I]){var D=o[t][I][O],R=void 0;if(E?(v("AUDIO group '"+I+"' label '"+O+"' is a master playlist"),D.isMasterPlaylist=!0,R=null):e==="vhs-json"&&D.playlists?R=new Iu(D.playlists[0],r,s):D.resolvedUri?R=new Iu(D.resolvedUri,r,s):D.playlists&&e==="dash"?R=new Ag(D.playlists[0],r,s,y):R=null,D=N.mergeOptions({id:O,playlistLoader:R},D),Fb[t](t,D.playlistLoader,i),f[I].push(D),typeof m[O]>"u"){var H=new N.AudioTrack({id:O,kind:i4(D),enabled:!1,language:D.language,default:D.default,label:O});m[O]=H}}}n.on("error",gh[t](t,i))},SUBTITLES:function(t,i){var r=i.tech,e=i.vhs,n=i.sourceType,s=i.segmentLoaders[t],o=i.requestOptions,l=i.master.mediaGroups,f=i.mediaTypes[t],m=f.groups,v=f.tracks,y=i.masterPlaylistLoader;for(var E in l[t]){m[E]||(m[E]=[]);for(var I in l[t][E])if(!l[t][E][I].forced){var O=l[t][E][I],D=void 0;if(n==="hls")D=new Iu(O.resolvedUri,e,o);else if(n==="dash"){var R=O.playlists.filter(function(Z){return Z.excludeUntil!==1/0});if(!R.length)return;D=new Ag(O.playlists[0],e,o,y)}else n==="vhs-json"&&(D=new Iu(O.playlists?O.playlists[0]:O.resolvedUri,e,o));if(O=N.mergeOptions({id:I,playlistLoader:D},O),Fb[t](t,O.playlistLoader,i),m[E].push(O),typeof v[I]>"u"){var H=r.addRemoteTextTrack({id:I,kind:"subtitles",default:O.default&&O.autoselect,language:O.language,label:I},!1).track;v[I]=H}}}s.on("error",gh[t](t,i))},"CLOSED-CAPTIONS":function(t,i){var r=i.tech,e=i.master.mediaGroups,n=i.mediaTypes[t],s=n.groups,o=n.tracks;for(var l in e[t]){s[l]||(s[l]=[]);for(var f in e[t][l]){var m=e[t][l][f];if(/^(?:CC|SERVICE)/.test(m.instreamId)){var v=r.options_.vhs&&r.options_.vhs.captionServices||{},y={label:f,language:m.language,instreamId:m.instreamId,default:m.default&&m.autoselect};if(v[y.instreamId]&&(y=N.mergeOptions(y,v[y.instreamId])),y.default===void 0&&delete y.default,s[l].push(N.mergeOptions({id:f},m)),typeof o[f]>"u"){var E=r.addRemoteTextTrack({id:y.instreamId,kind:"captions",default:y.default,language:y.language,label:y.label},!1).track;o[f]=E}}}}}},o4=function a(t,i){for(var r=0;r<t.length;r++)if(m0(i,t[r])||t[r].playlists&&a(t[r].playlists,i))return!0;return!1},u4=function(t,i){return function(r){var e=i.masterPlaylistLoader,n=i.mediaTypes[t].groups,s=e.media();if(!s)return null;var o=null;s.attributes[t]&&(o=n[s.attributes[t]]);var l=Object.keys(n);if(!o)if(t==="AUDIO"&&l.length>1&&vf(i.master))for(var f=0;f<l.length;f++){var m=n[l[f]];if(o4(m,s)){o=m;break}}else n.main?o=n.main:l.length===1&&(o=n[l[0]]);return typeof r>"u"?o:r===null||!o?null:o.filter(function(v){return v.id===r.id})[0]||null}},l4={AUDIO:function(t,i){return function(){var r=i.mediaTypes[t].tracks;for(var e in r)if(r[e].enabled)return r[e];return null}},SUBTITLES:function(t,i){return function(){var r=i.mediaTypes[t].tracks;for(var e in r)if(r[e].mode==="showing"||r[e].mode==="hidden")return r[e];return null}}},d4=function(t,i){var r=i.mediaTypes;return function(){var e=r[t].activeTrack();return e?r[t].activeGroup(e):null}},f4=function(t){["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(I){s4[I](I,t)});var i=t.mediaTypes,r=t.masterPlaylistLoader,e=t.tech,n=t.vhs,s=t.segmentLoaders,o=s.AUDIO,l=s.main;["AUDIO","SUBTITLES"].forEach(function(I){i[I].activeGroup=u4(I,t),i[I].activeTrack=l4[I](I,t),i[I].onGroupChanged=r4(I,t),i[I].onGroupChanging=n4(I,t),i[I].onTrackChanged=a4(I,t),i[I].getActiveGroup=d4(I,t)});var f=i.AUDIO.activeGroup();if(f){var m=(f.filter(function(I){return I.default})[0]||f[0]).id;i.AUDIO.tracks[m].enabled=!0,i.AUDIO.onGroupChanged(),i.AUDIO.onTrackChanged();var v=i.AUDIO.getActiveGroup();v.playlistLoader?(l.setAudio(!1),o.setAudio(!0)):l.setAudio(!0)}r.on("mediachange",function(){["AUDIO","SUBTITLES"].forEach(function(I){return i[I].onGroupChanged()})}),r.on("mediachanging",function(){["AUDIO","SUBTITLES"].forEach(function(I){return i[I].onGroupChanging()})});var y=function(){i.AUDIO.onTrackChanged(),e.trigger({type:"usage",name:"vhs-audio-change"}),e.trigger({type:"usage",name:"hls-audio-change"})};e.audioTracks().addEventListener("change",y),e.remoteTextTracks().addEventListener("change",i.SUBTITLES.onTrackChanged),n.on("dispose",function(){e.audioTracks().removeEventListener("change",y),e.remoteTextTracks().removeEventListener("change",i.SUBTITLES.onTrackChanged)}),e.clearTracks("audio");for(var E in i.AUDIO.tracks)e.audioTracks().addTrack(i.AUDIO.tracks[E])},c4=function(){var t={};return["AUDIO","SUBTITLES","CLOSED-CAPTIONS"].forEach(function(i){t[i]={groups:{},tracks:{},activePlaylistLoader:null,activeGroup:Pa,activeTrack:Pa,getActiveGroup:Pa,onGroupChanged:Pa,onTrackChanged:Pa,lastTrack_:null,logger_:Dn("MediaGroups["+i+"]")}}),t},h4=60*2,Sa,p4=["mediaRequests","mediaRequestsAborted","mediaRequestsTimedout","mediaRequestsErrored","mediaTransferDuration","mediaBytesTransferred","mediaAppends"],m4=function(t){return this.audioSegmentLoader_[t]+this.mainSegmentLoader_[t]},g4=function(t){var i=t.currentPlaylist,r=t.buffered,e=t.currentTime,n=t.nextPlaylist,s=t.bufferLowWaterLine,o=t.bufferHighWaterLine,l=t.duration,f=t.experimentalBufferBasedABR,m=t.log;if(!n)return N.log.warn("We received no playlist to switch to. Please check your stream."),!1;var v="allowing switch "+(i&&i.id||"null")+" -> "+n.id;if(!i)return m(v+" as current playlist is not set"),!0;if(n.id===i.id)return!1;var y=Boolean(Au(r,e).length);if(!i.endList)return!y&&typeof i.partTargetDuration=="number"?(m("not "+v+" as current playlist is live llhls, but currentTime isn't in buffered."),!1):(m(v+" as current playlist is live"),!0);var E=c0(r,e),I=f?mi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE:mi.MAX_BUFFER_LOW_WATER_LINE;if(l<I)return m(v+" as duration < max low water line ("+l+" < "+I+")"),!0;var O=n.attributes.BANDWIDTH,D=i.attributes.BANDWIDTH;if(O<D&&(!f||E<o)){var R=v+" as next bandwidth < current bandwidth ("+O+" < "+D+")";return f&&(R+=" and forwardBuffer < bufferHighWaterLine ("+E+" < "+o+")"),m(R),!0}if((!f||O>D)&&E>=s){var H=v+" as forwardBuffer >= bufferLowWaterLine ("+E+" >= "+s+")";return f&&(H+=" and next bandwidth > current bandwidth ("+O+" > "+D+")"),m(H),!0}return m("not "+v+" as no switching criteria met"),!1},v4=function(a){Ae(t,a);function t(r){var e;e=a.call(this)||this;var n=r.src,s=r.handleManifestRedirects,o=r.withCredentials,l=r.tech,f=r.bandwidth,m=r.externVhs,v=r.useCueTags,y=r.blacklistDuration,E=r.enableLowInitialPlaylist,I=r.sourceType,O=r.cacheEncryptionKeys,D=r.experimentalBufferBasedABR,R=r.experimentalLeastPixelDiffSelector,H=r.captionServices;if(!n)throw new Error("A non-empty playlist URL or JSON manifest string is required");var Z=r.maxPlaylistRetries;(Z===null||typeof Z>"u")&&(Z=1/0),Sa=m,e.experimentalBufferBasedABR=Boolean(D),e.experimentalLeastPixelDiffSelector=Boolean(R),e.withCredentials=o,e.tech_=l,e.vhs_=l.vhs,e.sourceType_=I,e.useCueTags_=v,e.blacklistDuration=y,e.maxPlaylistRetries=Z,e.enableLowInitialPlaylist=E,e.useCueTags_&&(e.cueTagsTrack_=e.tech_.addTextTrack("metadata","ad-cues"),e.cueTagsTrack_.inBandMetadataTrackDispatchType=""),e.requestOptions_={withCredentials:o,handleManifestRedirects:s,maxPlaylistRetries:Z,timeout:null},e.on("error",e.pauseLoading),e.mediaTypes_=c4(),e.mediaSource=new F.MediaSource,e.handleDurationChange_=e.handleDurationChange_.bind(Ue(e)),e.handleSourceOpen_=e.handleSourceOpen_.bind(Ue(e)),e.handleSourceEnded_=e.handleSourceEnded_.bind(Ue(e)),e.mediaSource.addEventListener("durationchange",e.handleDurationChange_),e.mediaSource.addEventListener("sourceopen",e.handleSourceOpen_),e.mediaSource.addEventListener("sourceended",e.handleSourceEnded_),e.seekable_=N.createTimeRanges(),e.hasPlayed_=!1,e.syncController_=new J8(r),e.segmentMetadataTrack_=l.addRemoteTextTrack({kind:"metadata",label:"segment-metadata"},!1).track,e.decrypter_=new t4,e.sourceUpdater_=new Aw(e.mediaSource),e.inbandTextTracks_={},e.timelineChangeController_=new Z8;var V={vhs:e.vhs_,parse708captions:r.parse708captions,useDtsForTimestampOffset:r.useDtsForTimestampOffset,captionServices:H,mediaSource:e.mediaSource,currentTime:e.tech_.currentTime.bind(e.tech_),seekable:function(){return e.seekable()},seeking:function(){return e.tech_.seeking()},duration:function(){return e.duration()},hasPlayed:function(){return e.hasPlayed_},goalBufferLength:function(){return e.goalBufferLength()},bandwidth:f,syncController:e.syncController_,decrypter:e.decrypter_,sourceType:e.sourceType_,inbandTextTracks:e.inbandTextTracks_,cacheEncryptionKeys:O,sourceUpdater:e.sourceUpdater_,timelineChangeController:e.timelineChangeController_,experimentalExactManifestTimings:r.experimentalExactManifestTimings};e.masterPlaylistLoader_=e.sourceType_==="dash"?new Ag(n,e.vhs_,e.requestOptions_):new Iu(n,e.vhs_,e.requestOptions_),e.setupMasterPlaylistLoaderListeners_(),e.mainSegmentLoader_=new Pg(N.mergeOptions(V,{segmentMetadataTrack:e.segmentMetadataTrack_,loaderType:"main"}),r),e.audioSegmentLoader_=new Pg(N.mergeOptions(V,{loaderType:"audio"}),r),e.subtitleSegmentLoader_=new K8(N.mergeOptions(V,{loaderType:"vtt",featuresNativeTextTracks:e.tech_.featuresNativeTextTracks,loadVttJs:function(){return new Promise(function(z,q){function X(){l.off("vttjserror",j),z()}function j(){l.off("vttjsloaded",X),q()}l.one("vttjsloaded",X),l.one("vttjserror",j),l.addWebVttScript_()})}}),r),e.setupSegmentLoaderListeners_(),e.experimentalBufferBasedABR&&(e.masterPlaylistLoader_.one("loadedplaylist",function(){return e.startABRTimer_()}),e.tech_.on("pause",function(){return e.stopABRTimer_()}),e.tech_.on("play",function(){return e.startABRTimer_()})),p4.forEach(function(te){e[te+"_"]=m4.bind(Ue(e),te)}),e.logger_=Dn("MPC"),e.triggeredFmp4Usage=!1,e.tech_.preload()==="none"?(e.loadOnPlay_=function(){e.loadOnPlay_=null,e.masterPlaylistLoader_.load()},e.tech_.one("play",e.loadOnPlay_)):e.masterPlaylistLoader_.load(),e.timeToLoadedData__=-1,e.mainAppendsToLoadedData__=-1,e.audioAppendsToLoadedData__=-1;var W=e.tech_.preload()==="none"?"play":"loadstart";return e.tech_.one(W,function(){var te=Date.now();e.tech_.one("loadeddata",function(){e.timeToLoadedData__=Date.now()-te,e.mainAppendsToLoadedData__=e.mainSegmentLoader_.mediaAppends,e.audioAppendsToLoadedData__=e.audioSegmentLoader_.mediaAppends})}),e}var i=t.prototype;return i.mainAppendsToLoadedData_=function(){return this.mainAppendsToLoadedData__},i.audioAppendsToLoadedData_=function(){return this.audioAppendsToLoadedData__},i.appendsToLoadedData_=function(){var e=this.mainAppendsToLoadedData_(),n=this.audioAppendsToLoadedData_();return e===-1||n===-1?-1:e+n},i.timeToLoadedData_=function(){return this.timeToLoadedData__},i.checkABR_=function(e){e===void 0&&(e="abr");var n=this.selectPlaylist();n&&this.shouldSwitchToMedia_(n)&&this.switchMedia_(n,e)},i.switchMedia_=function(e,n,s){var o=this.media(),l=o&&(o.id||o.uri),f=e.id||e.uri;l&&l!==f&&(this.logger_("switch media "+l+" -> "+f+" from "+n),this.tech_.trigger({type:"usage",name:"vhs-rendition-change-"+n})),this.masterPlaylistLoader_.media(e,s)},i.startABRTimer_=function(){var e=this;this.stopABRTimer_(),this.abrTimer_=F.setInterval(function(){return e.checkABR_()},250)},i.stopABRTimer_=function(){this.tech_.scrubbing&&this.tech_.scrubbing()||(F.clearInterval(this.abrTimer_),this.abrTimer_=null)},i.getAudioTrackPlaylists_=function(){var e=this.master(),n=e&&e.playlists||[];if(!e||!e.mediaGroups||!e.mediaGroups.AUDIO)return n;var s=e.mediaGroups.AUDIO,o=Object.keys(s),l;if(Object.keys(this.mediaTypes_.AUDIO.groups).length)l=this.mediaTypes_.AUDIO.activeTrack();else{var f=s.main||o.length&&s[o[0]];for(var m in f)if(f[m].default){l={label:m};break}}if(!l)return n;var v=[];for(var y in s)if(s[y][l.label]){var E=s[y][l.label];if(E.playlists&&E.playlists.length)v.push.apply(v,E.playlists);else if(E.uri)v.push(E);else if(e.playlists.length)for(var I=0;I<e.playlists.length;I++){var O=e.playlists[I];O.attributes&&O.attributes.AUDIO&&O.attributes.AUDIO===y&&v.push(O)}}return v.length?v:n},i.setupMasterPlaylistLoaderListeners_=function(){var e=this;this.masterPlaylistLoader_.on("loadedmetadata",function(){var n=e.masterPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;xg(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=s,n.endList&&e.tech_.preload()!=="none"&&(e.mainSegmentLoader_.playlist(n,e.requestOptions_),e.mainSegmentLoader_.load()),f4({sourceType:e.sourceType_,segmentLoaders:{AUDIO:e.audioSegmentLoader_,SUBTITLES:e.subtitleSegmentLoader_,main:e.mainSegmentLoader_},tech:e.tech_,requestOptions:e.requestOptions_,masterPlaylistLoader:e.masterPlaylistLoader_,vhs:e.vhs_,master:e.master(),mediaTypes:e.mediaTypes_,blacklistCurrentPlaylist:e.blacklistCurrentPlaylist.bind(e)}),e.triggerPresenceUsage_(e.master(),n),e.setupFirstPlay(),!e.mediaTypes_.AUDIO.activePlaylistLoader||e.mediaTypes_.AUDIO.activePlaylistLoader.media()?e.trigger("selectedinitialmedia"):e.mediaTypes_.AUDIO.activePlaylistLoader.one("loadedmetadata",function(){e.trigger("selectedinitialmedia")})}),this.masterPlaylistLoader_.on("loadedplaylist",function(){e.loadOnPlay_&&e.tech_.off("play",e.loadOnPlay_);var n=e.masterPlaylistLoader_.media();if(!n){e.excludeUnsupportedVariants_();var s;if(e.enableLowInitialPlaylist&&(s=e.selectInitialPlaylist()),s||(s=e.selectPlaylist()),!s||!e.shouldSwitchToMedia_(s))return;e.initialMedia_=s,e.switchMedia_(e.initialMedia_,"initial");var o=e.sourceType_==="vhs-json"&&e.initialMedia_.segments;if(!o)return;n=e.initialMedia_}e.handleUpdatedMediaPlaylist(n)}),this.masterPlaylistLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.masterPlaylistLoader_.error)}),this.masterPlaylistLoader_.on("mediachanging",function(){e.mainSegmentLoader_.abort(),e.mainSegmentLoader_.pause()}),this.masterPlaylistLoader_.on("mediachange",function(){var n=e.masterPlaylistLoader_.media(),s=n.targetDuration*1.5*1e3;xg(e.masterPlaylistLoader_.master,e.masterPlaylistLoader_.media())?e.requestOptions_.timeout=0:e.requestOptions_.timeout=s,e.masterPlaylistLoader_.load(),e.mainSegmentLoader_.playlist(n,e.requestOptions_),e.mainSegmentLoader_.load(),e.tech_.trigger({type:"mediachange",bubbles:!0})}),this.masterPlaylistLoader_.on("playlistunchanged",function(){var n=e.masterPlaylistLoader_.media();if(n.lastExcludeReason_!=="playlist-unchanged"){var s=e.stuckAtPlaylistEnd_(n);s&&(e.blacklistCurrentPlaylist({message:"Playlist no longer updating.",reason:"playlist-unchanged"}),e.tech_.trigger("playliststuck"))}}),this.masterPlaylistLoader_.on("renditiondisabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-disabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-disabled"})}),this.masterPlaylistLoader_.on("renditionenabled",function(){e.tech_.trigger({type:"usage",name:"vhs-rendition-enabled"}),e.tech_.trigger({type:"usage",name:"hls-rendition-enabled"})})},i.handleUpdatedMediaPlaylist=function(e){this.useCueTags_&&this.updateAdCues_(e),this.mainSegmentLoader_.playlist(e,this.requestOptions_),this.updateDuration(!e.endList),this.tech_.paused()||(this.mainSegmentLoader_.load(),this.audioSegmentLoader_&&this.audioSegmentLoader_.load())},i.triggerPresenceUsage_=function(e,n){var s=e.mediaGroups||{},o=!0,l=Object.keys(s.AUDIO);for(var f in s.AUDIO)for(var m in s.AUDIO[f]){var v=s.AUDIO[f][m];v.uri||(o=!1)}o&&(this.tech_.trigger({type:"usage",name:"vhs-demuxed"}),this.tech_.trigger({type:"usage",name:"hls-demuxed"})),Object.keys(s.SUBTITLES).length&&(this.tech_.trigger({type:"usage",name:"vhs-webvtt"}),this.tech_.trigger({type:"usage",name:"hls-webvtt"})),Sa.Playlist.isAes(n)&&(this.tech_.trigger({type:"usage",name:"vhs-aes"}),this.tech_.trigger({type:"usage",name:"hls-aes"})),l.length&&Object.keys(s.AUDIO[l[0]]).length>1&&(this.tech_.trigger({type:"usage",name:"vhs-alternate-audio"}),this.tech_.trigger({type:"usage",name:"hls-alternate-audio"})),this.useCueTags_&&(this.tech_.trigger({type:"usage",name:"vhs-playlist-cue-tags"}),this.tech_.trigger({type:"usage",name:"hls-playlist-cue-tags"}))},i.shouldSwitchToMedia_=function(e){var n=this.masterPlaylistLoader_.media()||this.masterPlaylistLoader_.pendingMedia_,s=this.tech_.currentTime(),o=this.bufferLowWaterLine(),l=this.bufferHighWaterLine(),f=this.tech_.buffered();return g4({buffered:f,currentTime:s,currentPlaylist:n,nextPlaylist:e,bufferLowWaterLine:o,bufferHighWaterLine:l,duration:this.duration(),experimentalBufferBasedABR:this.experimentalBufferBasedABR,log:this.logger_})},i.setupSegmentLoaderListeners_=function(){var e=this;this.mainSegmentLoader_.on("bandwidthupdate",function(){e.checkABR_("bandwidthupdate"),e.tech_.trigger("bandwidthupdate")}),this.mainSegmentLoader_.on("timeout",function(){e.experimentalBufferBasedABR&&e.mainSegmentLoader_.load()}),this.experimentalBufferBasedABR||this.mainSegmentLoader_.on("progress",function(){e.trigger("progress")}),this.mainSegmentLoader_.on("error",function(){e.blacklistCurrentPlaylist(e.mainSegmentLoader_.error())}),this.mainSegmentLoader_.on("appenderror",function(){e.error=e.mainSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.mainSegmentLoader_.on("timestampoffset",function(){e.tech_.trigger({type:"usage",name:"vhs-timestamp-offset"}),e.tech_.trigger({type:"usage",name:"hls-timestamp-offset"})}),this.audioSegmentLoader_.on("syncinfoupdate",function(){e.onSyncInfoUpdate_()}),this.audioSegmentLoader_.on("appenderror",function(){e.error=e.audioSegmentLoader_.error_,e.trigger("error")}),this.mainSegmentLoader_.on("ended",function(){e.logger_("main segment loader ended"),e.onEndOfStream()}),this.mainSegmentLoader_.on("earlyabort",function(s){e.experimentalBufferBasedABR||(e.delegateLoaders_("all",["abort"]),e.blacklistCurrentPlaylist({message:"Aborted early because there isn't enough bandwidth to complete the request without rebuffering."},h4))});var n=function(){if(!e.sourceUpdater_.hasCreatedSourceBuffers())return e.tryToCreateSourceBuffers_();var o=e.getCodecsOrExclude_();o&&e.sourceUpdater_.addOrChangeSourceBuffers(o)};this.mainSegmentLoader_.on("trackinfo",n),this.audioSegmentLoader_.on("trackinfo",n),this.mainSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("fmp4",function(){e.triggeredFmp4Usage||(e.tech_.trigger({type:"usage",name:"vhs-fmp4"}),e.tech_.trigger({type:"usage",name:"hls-fmp4"}),e.triggeredFmp4Usage=!0)}),this.audioSegmentLoader_.on("ended",function(){e.logger_("audioSegmentLoader ended"),e.onEndOfStream()})},i.mediaSecondsLoaded_=function(){return Math.max(this.audioSegmentLoader_.mediaSecondsLoaded+this.mainSegmentLoader_.mediaSecondsLoaded)},i.load=function(){this.mainSegmentLoader_.load(),this.mediaTypes_.AUDIO.activePlaylistLoader&&this.audioSegmentLoader_.load(),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&this.subtitleSegmentLoader_.load()},i.smoothQualityChange_=function(e){e===void 0&&(e=this.selectPlaylist()),this.fastQualityChange_(e)},i.fastQualityChange_=function(e){var n=this;if(e===void 0&&(e=this.selectPlaylist()),e===this.masterPlaylistLoader_.media()){this.logger_("skipping fastQualityChange because new media is same as old");return}this.switchMedia_(e,"fast-quality"),this.mainSegmentLoader_.resetEverything(function(){N.browser.IE_VERSION||N.browser.IS_EDGE?n.tech_.setCurrentTime(n.tech_.currentTime()+.04):n.tech_.setCurrentTime(n.tech_.currentTime())})},i.play=function(){if(!this.setupFirstPlay()){this.tech_.ended()&&this.tech_.setCurrentTime(0),this.hasPlayed_&&this.load();var e=this.tech_.seekable();if(this.tech_.duration()===1/0&&this.tech_.currentTime()<e.start(0))return this.tech_.setCurrentTime(e.end(e.length-1))}},i.setupFirstPlay=function(){var e=this,n=this.masterPlaylistLoader_.media();if(!n||this.tech_.paused()||this.hasPlayed_)return!1;if(!n.endList){var s=this.seekable();if(!s.length)return!1;if(N.browser.IE_VERSION&&this.tech_.readyState()===0)return this.tech_.one("loadedmetadata",function(){e.trigger("firstplay"),e.tech_.setCurrentTime(s.end(0)),e.hasPlayed_=!0}),!1;this.trigger("firstplay"),this.tech_.setCurrentTime(s.end(0))}return this.hasPlayed_=!0,this.load(),!0},i.handleSourceOpen_=function(){if(this.tryToCreateSourceBuffers_(),this.tech_.autoplay()){var e=this.tech_.play();typeof e<"u"&&typeof e.then=="function"&&e.then(null,function(n){})}this.trigger("sourceopen")},i.handleSourceEnded_=function(){if(this.inbandTextTracks_.metadataTrack_){var e=this.inbandTextTracks_.metadataTrack_.cues;if(!(!e||!e.length)){var n=this.duration();e[e.length-1].endTime=isNaN(n)||Math.abs(n)===1/0?Number.MAX_VALUE:n}}},i.handleDurationChange_=function(){this.tech_.trigger("durationchange")},i.onEndOfStream=function(){var e=this.mainSegmentLoader_.ended_;if(this.mediaTypes_.AUDIO.activePlaylistLoader){var n=this.mainSegmentLoader_.getCurrentMediaInfo_();!n||n.hasVideo?e=e&&this.audioSegmentLoader_.ended_:e=this.audioSegmentLoader_.ended_}e&&(this.stopABRTimer_(),this.sourceUpdater_.endOfStream())},i.stuckAtPlaylistEnd_=function(e){var n=this.seekable();if(!n.length)return!1;var s=this.syncController_.getExpiredTime(e,this.duration());if(s===null)return!1;var o=Sa.Playlist.playlistEnd(e,s),l=this.tech_.currentTime(),f=this.tech_.buffered();if(!f.length)return o-l<=ea;var m=f.end(f.length-1);return m-l<=ea&&o-m<=ea},i.blacklistCurrentPlaylist=function(e,n){e===void 0&&(e={});var s=e.playlist||this.masterPlaylistLoader_.media();if(n=n||e.blacklistDuration||this.blacklistDuration,!s){this.error=e,this.mediaSource.readyState!=="open"?this.trigger("error"):this.sourceUpdater_.endOfStream("network");return}s.playlistErrors_++;var o=this.masterPlaylistLoader_.master.playlists,l=o.filter(Zh),f=l.length===1&&l[0]===s;if(o.length===1&&n!==1/0)return N.log.warn("Problem encountered with playlist "+s.id+". Trying again since it is the only playlist."),this.tech_.trigger("retryplaylist"),this.masterPlaylistLoader_.load(f);if(f){var m=!1;o.forEach(function(R){if(R!==s){var H=R.excludeUntil;typeof H<"u"&&H!==1/0&&(m=!0,delete R.excludeUntil)}}),m&&(N.log.warn("Removing other playlists from the exclusion list because the last rendition is about to be excluded."),this.tech_.trigger("retryplaylist"))}var v;s.playlistErrors_>this.maxPlaylistRetries?v=1/0:v=Date.now()+n*1e3,s.excludeUntil=v,e.reason&&(s.lastExcludeReason_=e.reason),this.tech_.trigger("blacklistplaylist"),this.tech_.trigger({type:"usage",name:"vhs-rendition-blacklisted"}),this.tech_.trigger({type:"usage",name:"hls-rendition-blacklisted"});var y=this.selectPlaylist();if(!y){this.error="Playback cannot continue. No available working or supported playlists.",this.trigger("error");return}var E=e.internal?this.logger_:N.log.warn,I=e.message?" "+e.message:"";E((e.internal?"Internal problem":"Problem")+" encountered with playlist "+s.id+"."+(I+" Switching to playlist "+y.id+".")),y.attributes.AUDIO!==s.attributes.AUDIO&&this.delegateLoaders_("audio",["abort","pause"]),y.attributes.SUBTITLES!==s.attributes.SUBTITLES&&this.delegateLoaders_("subtitle",["abort","pause"]),this.delegateLoaders_("main",["abort","pause"]);var O=y.targetDuration/2*1e3||5*1e3,D=typeof y.lastRequest=="number"&&Date.now()-y.lastRequest<=O;return this.switchMedia_(y,"exclude",f||D)},i.pauseLoading=function(){this.delegateLoaders_("all",["abort","pause"]),this.stopABRTimer_()},i.delegateLoaders_=function(e,n){var s=this,o=[],l=e==="all";(l||e==="main")&&o.push(this.masterPlaylistLoader_);var f=[];(l||e==="audio")&&f.push("AUDIO"),(l||e==="subtitle")&&(f.push("CLOSED-CAPTIONS"),f.push("SUBTITLES")),f.forEach(function(m){var v=s.mediaTypes_[m]&&s.mediaTypes_[m].activePlaylistLoader;v&&o.push(v)}),["main","audio","subtitle"].forEach(function(m){var v=s[m+"SegmentLoader_"];v&&(e===m||e==="all")&&o.push(v)}),o.forEach(function(m){return n.forEach(function(v){typeof m[v]=="function"&&m[v]()})})},i.setCurrentTime=function(e){var n=Au(this.tech_.buffered(),e);if(!(this.masterPlaylistLoader_&&this.masterPlaylistLoader_.media())||!this.masterPlaylistLoader_.media().segments)return 0;if(n&&n.length)return e;this.mainSegmentLoader_.resetEverything(),this.mainSegmentLoader_.abort(),this.mediaTypes_.AUDIO.activePlaylistLoader&&(this.audioSegmentLoader_.resetEverything(),this.audioSegmentLoader_.abort()),this.mediaTypes_.SUBTITLES.activePlaylistLoader&&(this.subtitleSegmentLoader_.resetEverything(),this.subtitleSegmentLoader_.abort()),this.load()},i.duration=function(){if(!this.masterPlaylistLoader_)return 0;var e=this.masterPlaylistLoader_.media();return e?e.endList?this.mediaSource?this.mediaSource.duration:Sa.Playlist.duration(e):1/0:0},i.seekable=function(){return this.seekable_},i.onSyncInfoUpdate_=function(){var e;if(this.masterPlaylistLoader_){var n=this.masterPlaylistLoader_.media();if(n){var s=this.syncController_.getExpiredTime(n,this.duration());if(s!==null){var o=this.masterPlaylistLoader_.master,l=Sa.Playlist.seekable(n,s,Sa.Playlist.liveEdgeDelay(o,n));if(l.length!==0&&!(this.mediaTypes_.AUDIO.activePlaylistLoader&&(n=this.mediaTypes_.AUDIO.activePlaylistLoader.media(),s=this.syncController_.getExpiredTime(n,this.duration()),s===null||(e=Sa.Playlist.seekable(n,s,Sa.Playlist.liveEdgeDelay(o,n)),e.length===0)))){var f,m;this.seekable_&&this.seekable_.length&&(f=this.seekable_.end(0),m=this.seekable_.start(0)),e?e.start(0)>l.end(0)||l.start(0)>e.end(0)?this.seekable_=l:this.seekable_=N.createTimeRanges([[e.start(0)>l.start(0)?e.start(0):l.start(0),e.end(0)<l.end(0)?e.end(0):l.end(0)]]):this.seekable_=l,!(this.seekable_&&this.seekable_.length&&this.seekable_.end(0)===f&&this.seekable_.start(0)===m)&&(this.logger_("seekable updated ["+W1(this.seekable_)+"]"),this.tech_.trigger("seekablechanged"))}}}}},i.updateDuration=function(e){if(this.updateDuration_&&(this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.updateDuration_=null),this.mediaSource.readyState!=="open"){this.updateDuration_=this.updateDuration.bind(this,e),this.mediaSource.addEventListener("sourceopen",this.updateDuration_);return}if(e){var n=this.seekable();if(!n.length)return;(isNaN(this.mediaSource.duration)||this.mediaSource.duration<n.end(n.length-1))&&this.sourceUpdater_.setDuration(n.end(n.length-1));return}var s=this.tech_.buffered(),o=Sa.Playlist.duration(this.masterPlaylistLoader_.media());s.length>0&&(o=Math.max(o,s.end(s.length-1))),this.mediaSource.duration!==o&&this.sourceUpdater_.setDuration(o)},i.dispose=function(){var e=this;this.trigger("dispose"),this.decrypter_.terminate(),this.masterPlaylistLoader_.dispose(),this.mainSegmentLoader_.dispose(),this.loadOnPlay_&&this.tech_.off("play",this.loadOnPlay_),["AUDIO","SUBTITLES"].forEach(function(n){var s=e.mediaTypes_[n].groups;for(var o in s)s[o].forEach(function(l){l.playlistLoader&&l.playlistLoader.dispose()})}),this.audioSegmentLoader_.dispose(),this.subtitleSegmentLoader_.dispose(),this.sourceUpdater_.dispose(),this.timelineChangeController_.dispose(),this.stopABRTimer_(),this.updateDuration_&&this.mediaSource.removeEventListener("sourceopen",this.updateDuration_),this.mediaSource.removeEventListener("durationchange",this.handleDurationChange_),this.mediaSource.removeEventListener("sourceopen",this.handleSourceOpen_),this.mediaSource.removeEventListener("sourceended",this.handleSourceEnded_),this.off()},i.master=function(){return this.masterPlaylistLoader_.master},i.media=function(){return this.masterPlaylistLoader_.media()||this.initialMedia_},i.areMediaTypesKnown_=function(){var e=!!this.mediaTypes_.AUDIO.activePlaylistLoader,n=!!this.mainSegmentLoader_.getCurrentMediaInfo_(),s=e?!!this.audioSegmentLoader_.getCurrentMediaInfo_():!0;return!(!n||!s)},i.getCodecsOrExclude_=function(){var e=this,n={main:this.mainSegmentLoader_.getCurrentMediaInfo_()||{},audio:this.audioSegmentLoader_.getCurrentMediaInfo_()||{}},s=this.mainSegmentLoader_.getPendingSegmentPlaylist()||this.media();n.video=n.main;var o=kd(this.master(),s),l={},f=!!this.mediaTypes_.AUDIO.activePlaylistLoader;if(n.main.hasVideo&&(l.video=o.video||n.main.videoCodec||Jx),n.main.isMuxed&&(l.video+=","+(o.audio||n.main.audioCodec||Bc)),(n.main.hasAudio&&!n.main.isMuxed||n.audio.hasAudio||f)&&(l.audio=o.audio||n.main.audioCodec||n.audio.audioCodec||Bc,n.audio.isFmp4=n.main.hasAudio&&!n.main.isMuxed?n.main.isFmp4:n.audio.isFmp4),!l.audio&&!l.video){this.blacklistCurrentPlaylist({playlist:s,message:"Could not determine codecs for playlist.",blacklistDuration:1/0});return}var m=function(R,H){return R?_s(H):Lu(H)},v={},y;if(["video","audio"].forEach(function(D){if(l.hasOwnProperty(D)&&!m(n[D].isFmp4,l[D])){var R=n[D].isFmp4?"browser":"muxer";v[R]=v[R]||[],v[R].push(l[D]),D==="audio"&&(y=R)}}),f&&y&&s.attributes.AUDIO){var E=s.attributes.AUDIO;this.master().playlists.forEach(function(D){var R=D.attributes&&D.attributes.AUDIO;R===E&&D!==s&&(D.excludeUntil=1/0)}),this.logger_("excluding audio group "+E+" as "+y+' does not support codec(s): "'+l.audio+'"')}if(Object.keys(v).length){var I=Object.keys(v).reduce(function(D,R){return D&&(D+=", "),D+=R+' does not support codec(s): "'+v[R].join(",")+'"',D},"")+".";this.blacklistCurrentPlaylist({playlist:s,internal:!0,message:I,blacklistDuration:1/0});return}if(this.sourceUpdater_.hasCreatedSourceBuffers()&&!this.sourceUpdater_.canChangeType()){var O=[];if(["video","audio"].forEach(function(D){var R=(li(e.sourceUpdater_.codecs[D]||"")[0]||{}).type,H=(li(l[D]||"")[0]||{}).type;R&&H&&R.toLowerCase()!==H.toLowerCase()&&O.push('"'+e.sourceUpdater_.codecs[D]+'" -> "'+l[D]+'"')}),O.length){this.blacklistCurrentPlaylist({playlist:s,message:"Codec switching not supported: "+O.join(", ")+".",blacklistDuration:1/0,internal:!0});return}}return l},i.tryToCreateSourceBuffers_=function(){if(!(this.mediaSource.readyState!=="open"||this.sourceUpdater_.hasCreatedSourceBuffers())&&this.areMediaTypesKnown_()){var e=this.getCodecsOrExclude_();if(e){this.sourceUpdater_.createSourceBuffers(e);var n=[e.video,e.audio].filter(Boolean).join(",");this.excludeIncompatibleVariants_(n)}}},i.excludeUnsupportedVariants_=function(){var e=this,n=this.master().playlists,s=[];Object.keys(n).forEach(function(o){var l=n[o];if(s.indexOf(l.id)===-1){s.push(l.id);var f=kd(e.master,l),m=[];f.audio&&!Lu(f.audio)&&!_s(f.audio)&&m.push("audio codec "+f.audio),f.video&&!Lu(f.video)&&!_s(f.video)&&m.push("video codec "+f.video),f.text&&f.text==="stpp.ttml.im1t"&&m.push("text codec "+f.text),m.length&&(l.excludeUntil=1/0,e.logger_("excluding "+l.id+" for unsupported: "+m.join(", ")))}})},i.excludeIncompatibleVariants_=function(e){var n=this,s=[],o=this.master().playlists,l=hh(li(e)),f=wb(l),m=l.video&&li(l.video)[0]||null,v=l.audio&&li(l.audio)[0]||null;Object.keys(o).forEach(function(y){var E=o[y];if(!(s.indexOf(E.id)!==-1||E.excludeUntil===1/0)){s.push(E.id);var I=[],O=kd(n.masterPlaylistLoader_.master,E),D=wb(O);if(!(!O.audio&&!O.video)){if(D!==f&&I.push('codec count "'+D+'" !== "'+f+'"'),!n.sourceUpdater_.canChangeType()){var R=O.video&&li(O.video)[0]||null,H=O.audio&&li(O.audio)[0]||null;R&&m&&R.type.toLowerCase()!==m.type.toLowerCase()&&I.push('video codec "'+R.type+'" !== "'+m.type+'"'),H&&v&&H.type.toLowerCase()!==v.type.toLowerCase()&&I.push('audio codec "'+H.type+'" !== "'+v.type+'"')}I.length&&(E.excludeUntil=1/0,n.logger_("blacklisting "+E.id+": "+I.join(" && ")))}}})},i.updateAdCues_=function(e){var n=0,s=this.seekable();s.length&&(n=s.start(0)),Q8(e,this.cueTagsTrack_,n)},i.goalBufferLength=function(){var e=this.tech_.currentTime(),n=mi.GOAL_BUFFER_LENGTH,s=mi.GOAL_BUFFER_LENGTH_RATE,o=Math.max(n,mi.MAX_GOAL_BUFFER_LENGTH);return Math.min(n+e*s,o)},i.bufferLowWaterLine=function(){var e=this.tech_.currentTime(),n=mi.BUFFER_LOW_WATER_LINE,s=mi.BUFFER_LOW_WATER_LINE_RATE,o=Math.max(n,mi.MAX_BUFFER_LOW_WATER_LINE),l=Math.max(n,mi.EXPERIMENTAL_MAX_BUFFER_LOW_WATER_LINE);return Math.min(n+e*s,this.experimentalBufferBasedABR?l:o)},i.bufferHighWaterLine=function(){return mi.BUFFER_HIGH_WATER_LINE},t}(N.EventTarget),_4=function(t,i,r){return function(e){var n=t.master.playlists[i],s=p0(n),o=Zh(n);return typeof e>"u"?o:(e?delete n.disabled:n.disabled=!0,e!==o&&!s&&(r(),e?t.trigger("renditionenabled"):t.trigger("renditiondisabled")),e)}},y4=function(t,i,r){var e=t.masterPlaylistController_,n=t.options_.smoothQualityChange,s=n?"smooth":"fast",o=e[s+"QualityChange_"].bind(e);if(i.attributes){var l=i.attributes.RESOLUTION;this.width=l&&l.width,this.height=l&&l.height,this.bandwidth=i.attributes.BANDWIDTH,this.frameRate=i.attributes["FRAME-RATE"]}this.codecs=kd(e.master(),i),this.playlist=i,this.id=r,this.enabled=_4(t.playlists,i.id,o)},T4=function(t){t.representations=function(){var i=t.masterPlaylistController_.master(),r=vf(i)?t.masterPlaylistController_.getAudioTrackPlaylists_():i.playlists;return r?r.filter(function(e){return!p0(e)}).map(function(e,n){return new y4(t,e,e.id)}):[]}},Nb=["seeking","seeked","pause","playing","error"],b4=function(){function a(i){var r=this;this.masterPlaylistController_=i.masterPlaylistController,this.tech_=i.tech,this.seekable=i.seekable,this.allowSeeksWithinUnsafeLiveWindow=i.allowSeeksWithinUnsafeLiveWindow,this.liveRangeSafeTimeDelta=i.liveRangeSafeTimeDelta,this.media=i.media,this.consecutiveUpdates=0,this.lastRecordedTime=null,this.timer_=null,this.checkCurrentTimeTimeout_=null,this.logger_=Dn("PlaybackWatcher"),this.logger_("initialize");var e=function(){return r.monitorCurrentTime_()},n=function(){return r.monitorCurrentTime_()},s=function(){return r.techWaiting_()},o=function(){return r.cancelTimer_()},l=this.masterPlaylistController_,f=["main","subtitle","audio"],m={};f.forEach(function(y){m[y]={reset:function(){return r.resetSegmentDownloads_(y)},updateend:function(){return r.checkSegmentDownloads_(y)}},l[y+"SegmentLoader_"].on("appendsdone",m[y].updateend),l[y+"SegmentLoader_"].on("playlistupdate",m[y].reset),r.tech_.on(["seeked","seeking"],m[y].reset)});var v=function(E){["main","audio"].forEach(function(I){l[I+"SegmentLoader_"][E]("appended",r.seekingAppendCheck_)})};this.seekingAppendCheck_=function(){r.fixesBadSeeks_()&&(r.consecutiveUpdates=0,r.lastRecordedTime=r.tech_.currentTime(),v("off"))},this.clearSeekingAppendCheck_=function(){return v("off")},this.watchForBadSeeking_=function(){r.clearSeekingAppendCheck_(),v("on")},this.tech_.on("seeked",this.clearSeekingAppendCheck_),this.tech_.on("seeking",this.watchForBadSeeking_),this.tech_.on("waiting",s),this.tech_.on(Nb,o),this.tech_.on("canplay",n),this.tech_.one("play",e),this.dispose=function(){r.clearSeekingAppendCheck_(),r.logger_("dispose"),r.tech_.off("waiting",s),r.tech_.off(Nb,o),r.tech_.off("canplay",n),r.tech_.off("play",e),r.tech_.off("seeking",r.watchForBadSeeking_),r.tech_.off("seeked",r.clearSeekingAppendCheck_),f.forEach(function(y){l[y+"SegmentLoader_"].off("appendsdone",m[y].updateend),l[y+"SegmentLoader_"].off("playlistupdate",m[y].reset),r.tech_.off(["seeked","seeking"],m[y].reset)}),r.checkCurrentTimeTimeout_&&F.clearTimeout(r.checkCurrentTimeTimeout_),r.cancelTimer_()}}var t=a.prototype;return t.monitorCurrentTime_=function(){this.checkCurrentTime_(),this.checkCurrentTimeTimeout_&&F.clearTimeout(this.checkCurrentTimeTimeout_),this.checkCurrentTimeTimeout_=F.setTimeout(this.monitorCurrentTime_.bind(this),250)},t.resetSegmentDownloads_=function(r){var e=this.masterPlaylistController_[r+"SegmentLoader_"];this[r+"StalledDownloads_"]>0&&this.logger_("resetting possible stalled download count for "+r+" loader"),this[r+"StalledDownloads_"]=0,this[r+"Buffered_"]=e.buffered_()},t.checkSegmentDownloads_=function(r){var e=this.masterPlaylistController_,n=e[r+"SegmentLoader_"],s=n.buffered_(),o=c3(this[r+"Buffered_"],s);if(this[r+"Buffered_"]=s,o){this.resetSegmentDownloads_(r);return}this[r+"StalledDownloads_"]++,this.logger_("found #"+this[r+"StalledDownloads_"]+" "+r+" appends that did not increase buffer (possible stalled download)",{playlistId:n.playlist_&&n.playlist_.id,buffered:mo(s)}),!(this[r+"StalledDownloads_"]<10)&&(this.logger_(r+" loader stalled download exclusion"),this.resetSegmentDownloads_(r),this.tech_.trigger({type:"usage",name:"vhs-"+r+"-download-exclusion"}),r!=="subtitle"&&e.blacklistCurrentPlaylist({message:"Excessive "+r+" segment downloading detected."},1/0))},t.checkCurrentTime_=function(){if(!(this.tech_.paused()||this.tech_.seeking())){var r=this.tech_.currentTime(),e=this.tech_.buffered();if(this.lastRecordedTime===r&&(!e.length||r+ea>=e.end(e.length-1)))return this.techWaiting_();this.consecutiveUpdates>=5&&r===this.lastRecordedTime?(this.consecutiveUpdates++,this.waiting_()):r===this.lastRecordedTime?this.consecutiveUpdates++:(this.consecutiveUpdates=0,this.lastRecordedTime=r)}},t.cancelTimer_=function(){this.consecutiveUpdates=0,this.timer_&&(this.logger_("cancelTimer_"),clearTimeout(this.timer_)),this.timer_=null},t.fixesBadSeeks_=function(){var r=this.tech_.seeking();if(!r)return!1;var e=this.seekable(),n=this.tech_.currentTime(),s=this.afterSeekableWindow_(e,n,this.media(),this.allowSeeksWithinUnsafeLiveWindow),o;if(s){var l=e.end(e.length-1);o=l}if(this.beforeSeekableWindow_(e,n)){var f=e.start(0);o=f+(f===e.end(0)?0:ea)}if(typeof o<"u")return this.logger_("Trying to seek outside of seekable at time "+n+" with "+("seekable range "+W1(e)+". Seeking to ")+(o+".")),this.tech_.setCurrentTime(o),!0;for(var m=this.masterPlaylistController_.sourceUpdater_,v=this.tech_.buffered(),y=m.audioBuffer?m.audioBuffered():null,E=m.videoBuffer?m.videoBuffered():null,I=this.media(),O=I.partTargetDuration?I.partTargetDuration:(I.targetDuration-Cs)*2,D=[y,E],R=0;R<D.length;R++)if(D[R]){var H=c0(D[R],n);if(H<O)return!1}var Z=pc(v,n);return Z.length===0?!1:(o=Z.start(0)+ea,this.logger_("Buffered region starts ("+Z.start(0)+") "+(" just beyond seek point ("+n+"). Seeking to "+o+".")),this.tech_.setCurrentTime(o),!0)},t.waiting_=function(){if(!this.techWaiting_()){var r=this.tech_.currentTime(),e=this.tech_.buffered(),n=Au(e,r);if(n.length&&r+3<=n.end(0)){this.cancelTimer_(),this.tech_.setCurrentTime(r),this.logger_("Stopped at "+r+" while inside a buffered region "+("["+n.start(0)+" -> "+n.end(0)+"]. Attempting to resume ")+"playback by seeking to the current time."),this.tech_.trigger({type:"usage",name:"vhs-unknown-waiting"}),this.tech_.trigger({type:"usage",name:"hls-unknown-waiting"});return}}},t.techWaiting_=function(){var r=this.seekable(),e=this.tech_.currentTime();if(this.tech_.seeking()||this.timer_!==null)return!0;if(this.beforeSeekableWindow_(r,e)){var n=r.end(r.length-1);return this.logger_("Fell out of live window at time "+e+". Seeking to "+("live point (seekable end) "+n)),this.cancelTimer_(),this.tech_.setCurrentTime(n),this.tech_.trigger({type:"usage",name:"vhs-live-resync"}),this.tech_.trigger({type:"usage",name:"hls-live-resync"}),!0}var s=this.tech_.vhs.masterPlaylistController_.sourceUpdater_,o=this.tech_.buffered(),l=this.videoUnderflow_({audioBuffered:s.audioBuffered(),videoBuffered:s.videoBuffered(),currentTime:e});if(l)return this.cancelTimer_(),this.tech_.setCurrentTime(e),this.tech_.trigger({type:"usage",name:"vhs-video-underflow"}),this.tech_.trigger({type:"usage",name:"hls-video-underflow"}),!0;var f=pc(o,e);if(f.length>0){var m=f.start(0)-e;return this.logger_("Stopped at "+e+", setting timer for "+m+", seeking "+("to "+f.start(0))),this.cancelTimer_(),this.timer_=setTimeout(this.skipTheGap_.bind(this),m*1e3,e),!0}return!1},t.afterSeekableWindow_=function(r,e,n,s){if(s===void 0&&(s=!1),!r.length)return!1;var o=r.end(r.length-1)+ea,l=!n.endList;return l&&s&&(o=r.end(r.length-1)+n.targetDuration*3),e>o},t.beforeSeekableWindow_=function(r,e){return!!(r.length&&r.start(0)>0&&e<r.start(0)-this.liveRangeSafeTimeDelta)},t.videoUnderflow_=function(r){var e=r.videoBuffered,n=r.audioBuffered,s=r.currentTime;if(e){var o;if(e.length&&n.length){var l=Au(e,s-3),f=Au(e,s),m=Au(n,s);m.length&&!f.length&&l.length&&(o={start:l.end(0),end:m.end(0)})}else{var v=pc(e,s);v.length||(o=this.gapFromVideoUnderflow_(e,s))}return o?(this.logger_("Encountered a gap in video from "+o.start+" to "+o.end+". "+("Seeking to current time "+s)),!0):!1}},t.skipTheGap_=function(r){var e=this.tech_.buffered(),n=this.tech_.currentTime(),s=pc(e,n);this.cancelTimer_(),!(s.length===0||n!==r)&&(this.logger_("skipTheGap_:","currentTime:",n,"scheduled currentTime:",r,"nextRange start:",s.start(0)),this.tech_.setCurrentTime(s.start(0)+Cs),this.tech_.trigger({type:"usage",name:"vhs-gap-skip"}),this.tech_.trigger({type:"usage",name:"hls-gap-skip"}))},t.gapFromVideoUnderflow_=function(r,e){for(var n=l3(r),s=0;s<n.length;s++){var o=n.start(s),l=n.end(s);if(e-o<4&&e-o>2)return{start:o,end:l}}return null},a}(),x4={errorInterval:30,getSource:function(t){var i=this.tech({IWillNotUseThisInPlugins:!0}),r=i.currentSource_||this.currentSource();return t(r)}},S4=function a(t,i){var r=0,e=0,n=N.mergeOptions(x4,i);t.ready(function(){t.trigger({type:"usage",name:"vhs-error-reload-initialized"}),t.trigger({type:"usage",name:"hls-error-reload-initialized"})});var s=function(){e&&t.currentTime(e)},o=function(y){y!=null&&(e=t.duration()!==1/0&&t.currentTime()||0,t.one("loadedmetadata",s),t.src(y),t.trigger({type:"usage",name:"vhs-error-reload"}),t.trigger({type:"usage",name:"hls-error-reload"}),t.play())},l=function(){if(Date.now()-r<n.errorInterval*1e3){t.trigger({type:"usage",name:"vhs-error-reload-canceled"}),t.trigger({type:"usage",name:"hls-error-reload-canceled"});return}if(!n.getSource||typeof n.getSource!="function"){N.log.error("ERROR: reloadSourceOnError - The option getSource must be a function!");return}return r=Date.now(),n.getSource.call(t,o)},f=function v(){t.off("loadedmetadata",s),t.off("error",l),t.off("dispose",v)},m=function(y){f(),a(t,y)};t.on("error",l),t.on("dispose",f),t.reloadSourceOnError=m},E4=function(t){S4(this,t)},Iw="2.16.2",w4="6.0.1",C4="0.22.1",A4="4.8.0",I4="3.1.3",Pi={PlaylistLoader:Iu,Playlist:pr,utils:N3,STANDARD_PLAYLIST_SELECTOR:Ab,INITIAL_PLAYLIST_SELECTOR:C8,lastBandwidthSelector:Ab,movingAverageBandwidthSelector:E8,comparePlaylistBandwidth:_0,comparePlaylistResolution:S8,xhr:aw()};Object.keys(mi).forEach(function(a){Object.defineProperty(Pi,a,{get:function(){return N.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),mi[a]},set:function(i){if(N.log.warn("using Vhs."+a+" is UNSAFE be sure you know what you are doing"),typeof i!="number"||i<0){N.log.warn("value of Vhs."+a+" must be greater than or equal to 0");return}mi[a]=i}})});var Pw="videojs-vhs",Ow=function(t,i){for(var r=i.media(),e=-1,n=0;n<t.length;n++)if(t[n].id===r.id){e=n;break}t.selectedIndex_=e,t.trigger({selectedIndex:e,type:"change"})},P4=function(t,i){i.representations().forEach(function(r){t.addQualityLevel(r)}),Ow(t,i.playlists)};Pi.canPlaySource=function(){return N.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var O4=function(t,i,r){if(!t)return t;var e={};i&&i.attributes&&i.attributes.CODECS&&(e=hh(li(i.attributes.CODECS))),r&&r.attributes&&r.attributes.CODECS&&(e.audio=r.attributes.CODECS);var n=Fa(e.video),s=Fa(e.audio),o={};for(var l in t)o[l]={},s&&(o[l].audioContentType=s),n&&(o[l].videoContentType=n),i.contentProtection&&i.contentProtection[l]&&i.contentProtection[l].pssh&&(o[l].pssh=i.contentProtection[l].pssh),typeof t[l]=="string"&&(o[l].url=t[l]);return N.mergeOptions(t,o)},D4=function(t,i){return t.reduce(function(r,e){if(!e.contentProtection)return r;var n=i.reduce(function(s,o){var l=e.contentProtection[o];return l&&l.pssh&&(s[o]={pssh:l.pssh}),s},{});return Object.keys(n).length&&r.push(n),r},[])},L4=function(t){var i=t.player,r=t.sourceKeySystems,e=t.audioMedia,n=t.mainPlaylists;if(!i.eme.initializeMediaKeys)return Promise.resolve();var s=e?n.concat([e]):n,o=D4(s,Object.keys(r)),l=[],f=[];return o.forEach(function(m){f.push(new Promise(function(v,y){i.tech_.one("keysessioncreated",v)})),l.push(new Promise(function(v,y){i.eme.initializeMediaKeys({keySystems:m},function(E){if(E){y(E);return}v()})}))}),Promise.race([Promise.all(l),Promise.race(f)])},k4=function(t){var i=t.player,r=t.sourceKeySystems,e=t.media,n=t.audioMedia,s=O4(r,e,n);return s?(i.currentSource().keySystems=s,s&&!i.eme?(N.log.warn("DRM encrypted source cannot be decrypted without a DRM plugin"),!1):!0):!1},Dw=function(){if(!F.localStorage)return null;var t=F.localStorage.getItem(Pw);if(!t)return null;try{return JSON.parse(t)}catch{return null}},R4=function(t){if(!F.localStorage)return!1;var i=Dw();i=i?N.mergeOptions(i,t):t;try{F.localStorage.setItem(Pw,JSON.stringify(i))}catch{return!1}return i},M4=function(t){return t.toLowerCase().indexOf("data:application/vnd.videojs.vhs+json,")===0?JSON.parse(t.substring(t.indexOf(",")+1)):t};Pi.supportsNativeHls=function(){if(!Se||!Se.createElement)return!1;var a=Se.createElement("video");if(!N.getTech("Html5").isSupported())return!1;var t=["application/vnd.apple.mpegurl","audio/mpegurl","audio/x-mpegurl","application/x-mpegurl","video/x-mpegurl","video/mpegurl","application/mpegurl"];return t.some(function(i){return/maybe|probably/i.test(a.canPlayType(i))})}();Pi.supportsNativeDash=function(){return!Se||!Se.createElement||!N.getTech("Html5").isSupported()?!1:/maybe|probably/i.test(Se.createElement("video").canPlayType("application/dash+xml"))}();Pi.supportsTypeNatively=function(a){return a==="hls"?Pi.supportsNativeHls:a==="dash"?Pi.supportsNativeDash:!1};Pi.isSupported=function(){return N.log.warn("HLS is no longer a tech. Please remove it from your player's techOrder.")};var F4=N.getComponent("Component"),T0=function(a){Ae(t,a);function t(r,e,n){var s;if(s=a.call(this,e,N.mergeOptions(n.hls,n.vhs))||this,n.hls&&Object.keys(n.hls).length&&N.log.warn("Using hls options is deprecated. Please rename `hls` to `vhs` in your options object."),typeof n.initialBandwidth=="number"&&(s.options_.bandwidth=n.initialBandwidth),s.logger_=Dn("VhsHandler"),e.options_&&e.options_.playerId){var o=N(e.options_.playerId);o.hasOwnProperty("hls")||Object.defineProperty(o,"hls",{get:function(){return N.log.warn("player.hls is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"hls-player-access"}),Ue(s)},configurable:!0}),o.hasOwnProperty("vhs")||Object.defineProperty(o,"vhs",{get:function(){return N.log.warn("player.vhs is deprecated. Use player.tech().vhs instead."),e.trigger({type:"usage",name:"vhs-player-access"}),Ue(s)},configurable:!0}),o.hasOwnProperty("dash")||Object.defineProperty(o,"dash",{get:function(){return N.log.warn("player.dash is deprecated. Use player.tech().vhs instead."),Ue(s)},configurable:!0}),s.player_=o}if(s.tech_=e,s.source_=r,s.stats={},s.ignoreNextSeekingEvent_=!1,s.setOptions_(),s.options_.overrideNative&&e.overrideNativeAudioTracks&&e.overrideNativeVideoTracks)e.overrideNativeAudioTracks(!0),e.overrideNativeVideoTracks(!0);else if(s.options_.overrideNative&&(e.featuresNativeVideoTracks||e.featuresNativeAudioTracks))throw new Error("Overriding native HLS requires emulated tracks. See https://git.io/vMpjB");return s.on(Se,["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","MSFullscreenChange"],function(l){var f=Se.fullscreenElement||Se.webkitFullscreenElement||Se.mozFullScreenElement||Se.msFullscreenElement;f&&f.contains(s.tech_.el())?s.masterPlaylistController_.fastQualityChange_():s.masterPlaylistController_.checkABR_()}),s.on(s.tech_,"seeking",function(){if(this.ignoreNextSeekingEvent_){this.ignoreNextSeekingEvent_=!1;return}this.setCurrentTime(this.tech_.currentTime())}),s.on(s.tech_,"error",function(){this.tech_.error()&&this.masterPlaylistController_&&this.masterPlaylistController_.pauseLoading()}),s.on(s.tech_,"play",s.play),s}var i=t.prototype;return i.setOptions_=function(){var e=this;if(this.options_.withCredentials=this.options_.withCredentials||!1,this.options_.handleManifestRedirects=this.options_.handleManifestRedirects!==!1,this.options_.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions!==!1,this.options_.useDevicePixelRatio=this.options_.useDevicePixelRatio||!1,this.options_.smoothQualityChange=this.options_.smoothQualityChange||!1,this.options_.useBandwidthFromLocalStorage=typeof this.source_.useBandwidthFromLocalStorage<"u"?this.source_.useBandwidthFromLocalStorage:this.options_.useBandwidthFromLocalStorage||!1,this.options_.useNetworkInformationApi=this.options_.useNetworkInformationApi||!1,this.options_.useDtsForTimestampOffset=this.options_.useDtsForTimestampOffset||!1,this.options_.customTagParsers=this.options_.customTagParsers||[],this.options_.customTagMappers=this.options_.customTagMappers||[],this.options_.cacheEncryptionKeys=this.options_.cacheEncryptionKeys||!1,typeof this.options_.blacklistDuration!="number"&&(this.options_.blacklistDuration=5*60),typeof this.options_.bandwidth!="number"&&this.options_.useBandwidthFromLocalStorage){var n=Dw();n&&n.bandwidth&&(this.options_.bandwidth=n.bandwidth,this.tech_.trigger({type:"usage",name:"vhs-bandwidth-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-bandwidth-from-local-storage"})),n&&n.throughput&&(this.options_.throughput=n.throughput,this.tech_.trigger({type:"usage",name:"vhs-throughput-from-local-storage"}),this.tech_.trigger({type:"usage",name:"hls-throughput-from-local-storage"}))}typeof this.options_.bandwidth!="number"&&(this.options_.bandwidth=mi.INITIAL_BANDWIDTH),this.options_.enableLowInitialPlaylist=this.options_.enableLowInitialPlaylist&&this.options_.bandwidth===mi.INITIAL_BANDWIDTH,["withCredentials","useDevicePixelRatio","limitRenditionByPlayerDimensions","bandwidth","smoothQualityChange","customTagParsers","customTagMappers","handleManifestRedirects","cacheEncryptionKeys","playlistSelector","initialPlaylistSelector","experimentalBufferBasedABR","liveRangeSafeTimeDelta","experimentalLLHLS","useNetworkInformationApi","useDtsForTimestampOffset","experimentalExactManifestTimings","experimentalLeastPixelDiffSelector"].forEach(function(s){typeof e.source_[s]<"u"&&(e.options_[s]=e.source_[s])}),this.limitRenditionByPlayerDimensions=this.options_.limitRenditionByPlayerDimensions,this.useDevicePixelRatio=this.options_.useDevicePixelRatio},i.src=function(e,n){var s=this;if(e){this.setOptions_(),this.options_.src=M4(this.source_.src),this.options_.tech=this.tech_,this.options_.externVhs=Pi,this.options_.sourceType=Mh(n),this.options_.seekTo=function(f){s.tech_.setCurrentTime(f)},this.options_.smoothQualityChange&&N.log.warn("smoothQualityChange is deprecated and will be removed in the next major version"),this.masterPlaylistController_=new v4(this.options_);var o=N.mergeOptions({liveRangeSafeTimeDelta:ea},this.options_,{seekable:function(){return s.seekable()},media:function(){return s.masterPlaylistController_.media()},masterPlaylistController:this.masterPlaylistController_});this.playbackWatcher_=new b4(o),this.masterPlaylistController_.on("error",function(){var f=N.players[s.tech_.options_.playerId],m=s.masterPlaylistController_.error;typeof m=="object"&&!m.code?m.code=3:typeof m=="string"&&(m={message:m,code:3}),f.error(m)});var l=this.options_.experimentalBufferBasedABR?Pi.movingAverageBandwidthSelector(.55):Pi.STANDARD_PLAYLIST_SELECTOR;this.masterPlaylistController_.selectPlaylist=this.selectPlaylist?this.selectPlaylist.bind(this):l.bind(this),this.masterPlaylistController_.selectInitialPlaylist=Pi.INITIAL_PLAYLIST_SELECTOR.bind(this),this.playlists=this.masterPlaylistController_.masterPlaylistLoader_,this.mediaSource=this.masterPlaylistController_.mediaSource,Object.defineProperties(this,{selectPlaylist:{get:function(){return this.masterPlaylistController_.selectPlaylist},set:function(m){this.masterPlaylistController_.selectPlaylist=m.bind(this)}},throughput:{get:function(){return this.masterPlaylistController_.mainSegmentLoader_.throughput.rate},set:function(m){this.masterPlaylistController_.mainSegmentLoader_.throughput.rate=m,this.masterPlaylistController_.mainSegmentLoader_.throughput.count=1}},bandwidth:{get:function(){var m=this.masterPlaylistController_.mainSegmentLoader_.bandwidth,v=F.navigator.connection||F.navigator.mozConnection||F.navigator.webkitConnection,y=1e7;if(this.options_.useNetworkInformationApi&&v){var E=v.downlink*1e3*1e3;E>=y&&m>=y?m=Math.max(m,E):m=E}return m},set:function(m){this.masterPlaylistController_.mainSegmentLoader_.bandwidth=m,this.masterPlaylistController_.mainSegmentLoader_.throughput={rate:0,count:0}}},systemBandwidth:{get:function(){var m=1/(this.bandwidth||1),v;this.throughput>0?v=1/this.throughput:v=0;var y=Math.floor(1/(m+v));return y},set:function(){N.log.error('The "systemBandwidth" property is read-only')}}}),this.options_.bandwidth&&(this.bandwidth=this.options_.bandwidth),this.options_.throughput&&(this.throughput=this.options_.throughput),Object.defineProperties(this.stats,{bandwidth:{get:function(){return s.bandwidth||0},enumerable:!0},mediaRequests:{get:function(){return s.masterPlaylistController_.mediaRequests_()||0},enumerable:!0},mediaRequestsAborted:{get:function(){return s.masterPlaylistController_.mediaRequestsAborted_()||0},enumerable:!0},mediaRequestsTimedout:{get:function(){return s.masterPlaylistController_.mediaRequestsTimedout_()||0},enumerable:!0},mediaRequestsErrored:{get:function(){return s.masterPlaylistController_.mediaRequestsErrored_()||0},enumerable:!0},mediaTransferDuration:{get:function(){return s.masterPlaylistController_.mediaTransferDuration_()||0},enumerable:!0},mediaBytesTransferred:{get:function(){return s.masterPlaylistController_.mediaBytesTransferred_()||0},enumerable:!0},mediaSecondsLoaded:{get:function(){return s.masterPlaylistController_.mediaSecondsLoaded_()||0},enumerable:!0},mediaAppends:{get:function(){return s.masterPlaylistController_.mediaAppends_()||0},enumerable:!0},mainAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.mainAppendsToLoadedData_()||0},enumerable:!0},audioAppendsToLoadedData:{get:function(){return s.masterPlaylistController_.audioAppendsToLoadedData_()||0},enumerable:!0},appendsToLoadedData:{get:function(){return s.masterPlaylistController_.appendsToLoadedData_()||0},enumerable:!0},timeToLoadedData:{get:function(){return s.masterPlaylistController_.timeToLoadedData_()||0},enumerable:!0},buffered:{get:function(){return mo(s.tech_.buffered())},enumerable:!0},currentTime:{get:function(){return s.tech_.currentTime()},enumerable:!0},currentSource:{get:function(){return s.tech_.currentSource_},enumerable:!0},currentTech:{get:function(){return s.tech_.name_},enumerable:!0},duration:{get:function(){return s.tech_.duration()},enumerable:!0},master:{get:function(){return s.playlists.master},enumerable:!0},playerDimensions:{get:function(){return s.tech_.currentDimensions()},enumerable:!0},seekable:{get:function(){return mo(s.tech_.seekable())},enumerable:!0},timestamp:{get:function(){return Date.now()},enumerable:!0},videoPlaybackQuality:{get:function(){return s.tech_.getVideoPlaybackQuality()},enumerable:!0}}),this.tech_.one("canplay",this.masterPlaylistController_.setupFirstPlay.bind(this.masterPlaylistController_)),this.tech_.on("bandwidthupdate",function(){s.options_.useBandwidthFromLocalStorage&&R4({bandwidth:s.bandwidth,throughput:Math.round(s.throughput)})}),this.masterPlaylistController_.on("selectedinitialmedia",function(){T4(s)}),this.masterPlaylistController_.sourceUpdater_.on("createdsourcebuffers",function(){s.setupEme_()}),this.on(this.masterPlaylistController_,"progress",function(){this.tech_.trigger("progress")}),this.on(this.masterPlaylistController_,"firstplay",function(){this.ignoreNextSeekingEvent_=!0}),this.setupQualityLevels_(),this.tech_.el()&&(this.mediaSourceUrl_=F.URL.createObjectURL(this.masterPlaylistController_.mediaSource),this.tech_.src(this.mediaSourceUrl_))}},i.createKeySessions_=function(){var e=this,n=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader;this.logger_("waiting for EME key session creation"),L4({player:this.player_,sourceKeySystems:this.source_.keySystems,audioMedia:n&&n.media(),mainPlaylists:this.playlists.master.playlists}).then(function(){e.logger_("created EME key session"),e.masterPlaylistController_.sourceUpdater_.initializedEme()}).catch(function(s){e.logger_("error while creating EME key session",s),e.player_.error({message:"Failed to initialize media keys for EME",code:3})})},i.handleWaitingForKey_=function(){this.logger_("waitingforkey fired, attempting to create any new key sessions"),this.createKeySessions_()},i.setupEme_=function(){var e=this,n=this.masterPlaylistController_.mediaTypes_.AUDIO.activePlaylistLoader,s=k4({player:this.player_,sourceKeySystems:this.source_.keySystems,media:this.playlists.media(),audioMedia:n&&n.media()});if(this.player_.tech_.on("keystatuschange",function(o){if(o.status==="output-restricted"){var l=e.masterPlaylistController_.master();if(!(!l||!l.playlists)){var f=[];if(l.playlists.forEach(function(v){v&&v.attributes&&v.attributes.RESOLUTION&&v.attributes.RESOLUTION.height>=720&&(!v.excludeUntil||v.excludeUntil<1/0)&&(v.excludeUntil=1/0,f.push(v))}),f.length){var m;(m=N.log).warn.apply(m,['DRM keystatus changed to "output-restricted." Removing the following HD playlists that will most likely fail to play and clearing the buffer. This may be due to HDCP restrictions on the stream and the capabilities of the current device.'].concat(f)),e.masterPlaylistController_.fastQualityChange_()}}}}),this.handleWaitingForKey_=this.handleWaitingForKey_.bind(this),this.player_.tech_.on("waitingforkey",this.handleWaitingForKey_),N.browser.IE_VERSION===11||!s){this.masterPlaylistController_.sourceUpdater_.initializedEme();return}this.createKeySessions_()},i.setupQualityLevels_=function(){var e=this,n=N.players[this.tech_.options_.playerId];!n||!n.qualityLevels||this.qualityLevels_||(this.qualityLevels_=n.qualityLevels(),this.masterPlaylistController_.on("selectedinitialmedia",function(){P4(e.qualityLevels_,e)}),this.playlists.on("mediachange",function(){Ow(e.qualityLevels_,e.playlists)}))},t.version=function(){return{"@videojs/http-streaming":Iw,"mux.js":w4,"mpd-parser":C4,"m3u8-parser":A4,"aes-decrypter":I4}},i.version=function(){return this.constructor.version()},i.canChangeType=function(){return Aw.canChangeType()},i.play=function(){this.masterPlaylistController_.play()},i.setCurrentTime=function(e){this.masterPlaylistController_.setCurrentTime(e)},i.duration=function(){return this.masterPlaylistController_.duration()},i.seekable=function(){return this.masterPlaylistController_.seekable()},i.dispose=function(){this.playbackWatcher_&&this.playbackWatcher_.dispose(),this.masterPlaylistController_&&this.masterPlaylistController_.dispose(),this.qualityLevels_&&this.qualityLevels_.dispose(),this.player_&&(delete this.player_.vhs,delete this.player_.dash,delete this.player_.hls),this.tech_&&this.tech_.vhs&&delete this.tech_.vhs,this.tech_&&delete this.tech_.hls,this.mediaSourceUrl_&&F.URL.revokeObjectURL&&(F.URL.revokeObjectURL(this.mediaSourceUrl_),this.mediaSourceUrl_=null),this.tech_&&this.tech_.off("waitingforkey",this.handleWaitingForKey_),a.prototype.dispose.call(this)},i.convertToProgramTime=function(e,n){return W3({playlist:this.masterPlaylistController_.media(),time:e,callback:n})},i.seekToProgramTime=function(e,n,s,o){return s===void 0&&(s=!0),o===void 0&&(o=2),q3({programTime:e,playlist:this.masterPlaylistController_.media(),retryCount:o,pauseAfterSeek:s,seekTo:this.options_.seekTo,tech:this.options_.tech,callback:n})},t}(F4),Jd={name:"videojs-http-streaming",VERSION:Iw,canHandleSource:function(t,i){i===void 0&&(i={});var r=N.mergeOptions(N.options,i);return Jd.canPlayType(t.type,r)},handleSource:function(t,i,r){r===void 0&&(r={});var e=N.mergeOptions(N.options,r);return i.vhs=new T0(t,i,e),N.hasOwnProperty("hls")||Object.defineProperty(i,"hls",{get:function(){return N.log.warn("player.tech().hls is deprecated. Use player.tech().vhs instead."),i.vhs},configurable:!0}),i.vhs.xhr=aw(),i.vhs.src(t.src,t.type),i.vhs},canPlayType:function(t,i){var r=Mh(t);if(!r)return"";var e=Jd.getOverrideNative(i),n=Pi.supportsTypeNatively(r),s=!n||e;return s?"maybe":""},getOverrideNative:function(t){t===void 0&&(t={});var i=t,r=i.vhs,e=r===void 0?{}:r,n=i.hls,s=n===void 0?{}:n,o=!(N.browser.IS_ANY_SAFARI||N.browser.IS_IOS),l=e.overrideNative,f=l===void 0?o:l,m=s.overrideNative,v=m===void 0?!1:m;return v||f}},N4=function(){return _s("avc1.4d400d,mp4a.40.2")};N4()&&N.getTech("Html5").registerSourceHandler(Jd,0);N.VhsHandler=T0;Object.defineProperty(N,"HlsHandler",{get:function(){return N.log.warn("videojs.HlsHandler is deprecated. Use videojs.VhsHandler instead."),T0},configurable:!0});N.VhsSourceHandler=Jd;Object.defineProperty(N,"HlsSourceHandler",{get:function(){return N.log.warn("videojs.HlsSourceHandler is deprecated. Use videojs.VhsSourceHandler instead."),Jd},configurable:!0});N.Vhs=Pi;Object.defineProperty(N,"Hls",{get:function(){return N.log.warn("videojs.Hls is deprecated. Use videojs.Vhs instead."),Pi},configurable:!0});N.use||(N.registerComponent("Hls",Pi),N.registerComponent("Vhs",Pi));N.options.vhs=N.options.vhs||{};N.options.hls=N.options.hls||{};if(!N.getPlugin||!N.getPlugin("reloadSourceOnError")){var U4=N.registerPlugin||N.plugin;U4("reloadSourceOnError",E4)}function B4(a,t){a.prototype=Object.create(t.prototype),a.prototype.constructor=a,a.__proto__=t}function Sm(a){if(a===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return a}var j4=function(t){var i=this;return i.id=t.id,i.label=i.id,i.width=t.width,i.height=t.height,i.bitrate=t.bandwidth,i.frameRate=t.frameRate,i.enabled_=t.enabled,Object.defineProperty(i,"enabled",{get:function(){return i.enabled_()},set:function(e){i.enabled_(e)}}),i},vh=function(a){B4(t,a);function t(){var r;r=a.call(this)||this;var e=Sm(Sm(r));return e.levels_=[],e.selectedIndex_=-1,Object.defineProperty(e,"selectedIndex",{get:function(){return e.selectedIndex_}}),Object.defineProperty(e,"length",{get:function(){return e.levels_.length}}),e||Sm(r)}var i=t.prototype;return i.addQualityLevel=function(e){var n=this.getQualityLevelById(e.id);if(n)return n;var s=this.levels_.length;return n=new j4(e),""+s in this||Object.defineProperty(this,s,{get:function(){return this.levels_[s]}}),this.levels_.push(n),this.trigger({qualityLevel:n,type:"addqualitylevel"}),n},i.removeQualityLevel=function(e){for(var n=null,s=0,o=this.length;s<o;s++)if(this[s]===e){n=this.levels_.splice(s,1)[0],this.selectedIndex_===s?this.selectedIndex_=-1:this.selectedIndex_>s&&this.selectedIndex_--;break}return n&&this.trigger({qualityLevel:e,type:"removequalitylevel"}),n},i.getQualityLevelById=function(e){for(var n=0,s=this.length;n<s;n++){var o=this[n];if(o.id===e)return o}return null},i.dispose=function(){this.selectedIndex_=-1,this.levels_.length=0},t}(N.EventTarget);vh.prototype.allowedEvents_={change:"change",addqualitylevel:"addqualitylevel",removequalitylevel:"removequalitylevel"};for(var V4 in vh.prototype.allowedEvents_)vh.prototype["on"+V4]=null;var Lw="2.2.1",H4=N.registerPlugin||N.plugin,$4=function(t,i){var r=t.qualityLevels,e=new vh,n=function s(){e.dispose(),t.qualityLevels=r,t.off("dispose",s)};return t.on("dispose",n),t.qualityLevels=function(){return e},t.qualityLevels.VERSION=Lw,e},kw=function(t){return $4(this,N.mergeOptions({},t))};H4("qualityLevels",kw);kw.VERSION=Lw;var W4="1.1.4",Ub=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b0=function(a,t){if(!(a instanceof t))throw new TypeError("Cannot call a class as a function")},Rw=function(a,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof t);a.prototype=Object.create(t&&t.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(a,t):a.__proto__=t)},Mw=function(a,t){if(!a)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t&&(typeof t=="object"||typeof t=="function")?t:a},q4=N.getComponent("MenuButton"),G4=N.getComponent("Menu"),z4=N.getComponent("Component"),K4=N.dom;function X4(a){return typeof a!="string"?a:a.charAt(0).toUpperCase()+a.slice(1)}var Q4=function(a){Rw(t,a);function t(i){return b0(this,t),Mw(this,a.call(this,i,{title:i.localize("Quality"),name:"QualityButton"}))}return t.prototype.createItems=function(){return[]},t.prototype.createMenu=function(){var r=new G4(this.player_,{menuButton:this});if(this.hideThreshold_=0,this.options_.title){var e=K4.createEl("li",{className:"vjs-menu-title",innerHTML:X4(this.options_.title),tabIndex:-1}),n=new z4(this.player_,{el:e});this.hideThreshold_+=1,r.addItem(n)}if(this.items=this.createItems(),this.items)for(var s=0;s<this.items.length;s++)r.addItem(this.items[s]);return r},t}(q4),Y4=N.getComponent("MenuItem"),J4=function(a){Rw(t,a);function t(i,r,e,n){b0(this,t);var s=Mw(this,a.call(this,i,{label:r.label,selectable:!0,selected:r.selected||!1}));return s.item=r,s.qualityButton=e,s.plugin=n,s}return t.prototype.handleClick=function(){for(var r=0;r<this.qualityButton.items.length;++r)this.qualityButton.items[r].selected(!1);this.plugin.setQuality(this.item.value),this.selected(!0)},t}(Y4),Z4={},eV=N.registerPlugin||N.plugin,tV=function(){function a(t,i){b0(this,a),this.player=t,this.config=i,this.player.qualityLevels&&this.getHls()&&(this.createQualityButton(),this.bindPlayerEvents())}return a.prototype.getHls=function(){return this.player.tech({IWillNotUseThisInPlugins:!0}).hls},a.prototype.bindPlayerEvents=function(){this.player.qualityLevels().on("addqualitylevel",this.onAddQualityLevel.bind(this))},a.prototype.createQualityButton=function(){var i=this.player;this._qualityButton=new Q4(i);var r=i.controlBar.children().length-2,e=i.controlBar.addChild(this._qualityButton,{componentClass:"qualitySelector"},this.config.placementIndex||r);if(e.addClass("vjs-quality-selector"),this.config.displayCurrentQuality)this.setButtonInnerText("auto");else{var n=" "+(this.config.vjsIconClass||"vjs-icon-hd");e.menuButton_.$(".vjs-icon-placeholder").className+=n}e.removeClass("vjs-hidden")},a.prototype.setButtonInnerText=function(i){this._qualityButton.menuButton_.$(".vjs-icon-placeholder").innerHTML=i},a.prototype.getQualityMenuItem=function(i){var r=this.player;return new J4(r,i,this._qualityButton,this)},a.prototype.onAddQualityLevel=function(){for(var i=this,r=this.player,e=r.qualityLevels(),n=e.levels_||[],s=[],o=function(m){if(!s.filter(function(y){return y.item&&y.item.value===n[m].height}).length){var v=i.getQualityMenuItem.call(i,{label:n[m].height+"p",value:n[m].height});s.push(v)}},l=0;l<n.length;++l)o(l);s.sort(function(f,m){return(typeof f>"u"?"undefined":Ub(f))!=="object"||(typeof m>"u"?"undefined":Ub(m))!=="object"||f.item.value<m.item.value?-1:f.item.value>m.item.value?1:0}),s.push(this.getQualityMenuItem.call(this,{label:r.localize("Auto"),value:"auto",selected:!0})),this._qualityButton&&(this._qualityButton.createItems=function(){return s},this._qualityButton.update())},a.prototype.setQuality=function(i){var r=this.player.qualityLevels();this._currentQuality=i,this.config.displayCurrentQuality&&this.setButtonInnerText(i==="auto"?i:i+"p");for(var e=0;e<r.length;++e){var n=r[e];n.enabled=n.height===i||i==="auto"}this._qualityButton.unpressButton()},a.prototype.getCurrentQuality=function(){return this._currentQuality||"auto"},a}(),iV=function(t,i){t.addClass("vjs-hls-quality-selector"),t.hlsQualitySelector=new tV(t,i)},x0=function(t){var i=this;this.ready(function(){iV(i,N.mergeOptions(Z4,t))})};eV("hlsQualitySelector",x0);x0.VERSION=W4;var rV="2.1.6",nV=N.getPlugin("plugin"),aV={image:void 0,url:void 0,position:"top-right",offsetH:0,offsetV:0,width:void 0,height:void 0,padding:5,fadeDelay:5e3,hideOnReady:!1,opacity:1},S0=function(a){Ae(t,a);function t(r,e){var n;return n=a.call(this,r)||this,n.tid=null,n.div=null,n.options=N.mergeOptions(aV,e),n.player.ready(function(){return n._onPlayerReady()}),n}var i=t.prototype;return i._onPlayerReady=function(){this.player.addClass("vjs-logo"),this.options.image&&(this._setup(),this.options.hideOnReady||this.show())},i._setup=function(){var e=this,n=this.player.el(),s=document.createElement("div");s.classList.add("vjs-logo-content"),s.classList.add("vjs-logo-hide"),s.style.padding=this.options.padding+"px";var o=this.options,l=o.offsetH,f=o.offsetV;switch(this.options.position){case"top-left":s.style.top=f+"px",s.style.left=l+"px";break;case"top-right":s.style.top=f+"px",s.style.right=l+"px";break;case"bottom-left":s.style.bottom=f+"px",s.style.left=l+"px";break;case"bottom-right":s.style.bottom=f+"px",s.style.right=l+"px";break;default:s.style.top=f+"px",s.style.right=l+"px"}this.div=s;var m=document.createElement("img");m.src=this.options.image;var v=this.options,y=v.width,E=v.height,I=v.opacity;if(y&&(m.width=y),E&&(m.height=E),I&&(m.style.opacity=I),this.options.url){var O=document.createElement("a");O.href=this.options.url,O.onclick=function(D){D.preventDefault(),window.open(e.options.url)},O.appendChild(m),s.appendChild(O)}else s.appendChild(m);n.appendChild(s)},i.show=function(){var e=this;this.tid&&(clearTimeout(this.tid),this.tid=null),this.div&&this.div.classList.remove("vjs-logo-hide"),this.options.fadeDelay!==null&&(this.tid=setTimeout(function(){e.hide(),e.tid=null},this.options.fadeDelay))},i.hide=function(){this.div&&this.div.classList.add("vjs-logo-hide")},t}(nV);S0.defaultState={};S0.VERSION=rV;N.registerPlugin("logo",S0);let qi=null;const sV=tf({mixins:[$x],props:{logo:{type:String,default:null},source:{type:Object}},data:()=>({withCredentials:!1}),mounted(){this.init()},beforeUnmount(){qi&&qi.dispose()},methods:{async init(){await this.$nextTick();const a=$(this.$el).find(".video-js")[0];await this.$nextTick(),qi=N(a,{controls:!this.disabled,preload:"auto",width:this.width,height:this.height,html5:{vhs:{overrideNative:!0,withCredentials:this.withCredentials}}}),qi.on("ready",()=>{this.onPlayerReady()})},async onPlayerReady(){this.logo&&qi.logo({image:this.logo,width:60,height:60,hideOnReady:!1,fadeDelay:null,padding:10,opacity:.7}),await this.setupSource(),this.setupEventListeners()},async setupSource(){var a,t,i,r;((a=this.source)==null?void 0:a.type)==ho.M3U8?qi.src({type:"application/x-mpegURL",src:(t=this.source)==null?void 0:t.url,withCredentials:this.withCredentials}):qi.src({src:(i=this.source)==null?void 0:i.url}),await this.$nextTick(),((r=this.source)==null?void 0:r.type)===ho.M3U8&&(qi.hlsQualitySelector=x0,qi.hlsQualitySelector({displayCurrentQuality:!0})),this.startTime&&qi.currentTime(this.startTime),this.shouldAutoplay&&qi.autoplay("muted")},setupEventListeners(){qi.on("firstplay",()=>{this.videoFirstPlay()}),qi.on("play",()=>{this.videoPlay()}),qi.on("pause",()=>{this.videoPause()}),qi.on("ended",()=>{this.videoEnd()})}},watch:{source:{deep:!0,handler(a,t){JSON.stringify(a)!=JSON.stringify(t)&&this.init()}},disabled:{handler(a,t){this.init()}}}}),oV={"micro-media-player":"video-js"},uV=Dh("video",{class:"video-js",controls:""},null,-1),lV=[uV];function dV(a,t,i,r,e,n){return Bd(),Yg("div",oV,lV)}const Bb=iv(sV,[["render",dV]]),fV=["debug"],cV=tf({__name:"playerRoot.ce",props:{debug:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1}},setup(a,{expose:t}){const i=a;$R(H=>({"4f0eb53b":vu(R).width,"78f8f852":vu(R).height}));const r=Eh({width:0,height:0,ready:!1,initOptions:{},source:null,playerReady:!0,disabled:!1}),e=DL(null),n=()=>{if(e.value)r.width=r.initOptions.width||400,r.height=r.initOptions.height||300;else return},s=Ec(()=>{var H,Z,V,W;return r.ready?((H=r.source)==null?void 0:H.type)===ho.YOUTUBE?lM:((Z=r.source)==null?void 0:Z.type)===ho.M3U8||((V=r.source)==null?void 0:V.type)===ho.STATIC_VIDEO?Bb:(i.debug&&console.warn("video source undefined: ",(W=r.source)==null?void 0:W.type),null):null}),o=H=>{var Z;r.width=H.width,r.height=H.height,((Z=r.source)==null?void 0:Z.type)==ho.YOUTUBE&&D()},l=()=>{r.source=null},f=Ec(()=>({width:`${r.width}px`,height:`${r.height}px`})),m=async H=>{r.initOptions=H,r.ready=!1,n(),await Nu(),r.ready=!0},v=H=>{r.source=H},y=()=>{typeof r.initOptions.eventOnFirstPlay=="function"&&r.initOptions.eventOnFirstPlay()},E=()=>{typeof r.initOptions.eventOnPlay=="function"&&r.initOptions.eventOnPlay()},I=()=>{typeof r.initOptions.eventOnPause=="function"&&r.initOptions.eventOnPause()},O=()=>{typeof r.initOptions.eventOnEnd=="function"&&r.initOptions.eventOnEnd()};t({init:m,setupSource:v,clearSource:l,setSize:o});const D=async()=>{r.playerReady=!1,await Nu(),r.playerReady=!0},R=Ec(()=>({width:`${r.width}px`,height:`${r.height}px`}));return Ed(()=>r.source,(H,Z)=>{tM.isEqual(Z,H)||D()},{deep:!0}),Ed(()=>i.disabled,(H,Z)=>D()),(H,Z)=>{var V,W;return Ak((Bd(),Yg("div",{ce:"player-root",ref_key:"playerRoot",ref:e,debug:a.debug,style:_h(vu(f))},[vu(s)&&r.playerReady?(Bd(),Mx(Ik(vu(s)),{key:0,onVideoFirstPlay:y,onVideoPlay:E,onVideoPause:I,onVideoEnd:O,source:r.source,width:r.width,height:r.height,logo:r.initOptions.logo,autoplay:((V=r.source)==null?void 0:V.autoplay)===!0,startTime:(W=r.source)==null?void 0:W.startTime,disabled:a.disabled==!0,debug:a.debug},null,40,["source","width","height","logo","autoplay","startTime","disabled","debug"])):oR("",!0)],12,fV)),[[WR,r.ready&&r.source]])}}}),hV=`@charset "UTF-8";.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-modal-dialog,.vjs-button>.vjs-icon-placeholder:before,.vjs-modal-dialog .vjs-modal-dialog-content{position:absolute;top:0;left:0;width:100%;height:100%}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.vjs-button>.vjs-icon-placeholder:before{text-align:center}@font-face{font-family:VideoJS;src:url(data:application/font-woff;charset=utf-8;base64,d09GRgABAAAAABDkAAsAAAAAG6gAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAABHU1VCAAABCAAAADsAAABUIIslek9TLzIAAAFEAAAAPgAAAFZRiV3hY21hcAAAAYQAAADaAAADPv749/pnbHlmAAACYAAAC3AAABHQZg6OcWhlYWQAAA3QAAAAKwAAADYZw251aGhlYQAADfwAAAAdAAAAJA+RCLFobXR4AAAOHAAAABMAAACM744AAGxvY2EAAA4wAAAASAAAAEhF6kqubWF4cAAADngAAAAfAAAAIAE0AIFuYW1lAAAOmAAAASUAAAIK1cf1oHBvc3QAAA/AAAABJAAAAdPExYuNeJxjYGRgYOBiMGCwY2BycfMJYeDLSSzJY5BiYGGAAJA8MpsxJzM9kYEDxgPKsYBpDiBmg4gCACY7BUgAeJxjYGS7wTiBgZWBgaWQ5RkDA8MvCM0cwxDOeI6BgYmBlZkBKwhIc01hcPjI+FGJHcRdyA4RZgQRADK3CxEAAHic7dFZbsMgAEXRS0ycyZnnOeG7y+qC8pU1dHusIOXxuoxaOlwZYWQB0Aea4quIEN4E9LzKbKjzDeM6H/mua6Lmc/p8yhg0lvdYx15ZG8uOLQOGjMp3EzqmzJizYMmKNRu27Nhz4MiJMxeu3Ljz4Ekqm7T8P52G8PP3lnTOVk++Z6iN6QZzNN1F7ptuN7eGOjDUoaGODHVsuvU8MdTO9Hd5aqgzQ50b6sJQl4a6MtS1oW4MdWuoO0PdG+rBUI+GejLUs6FeDPVqqDdDvRvqw1CfhpqM9At0iFLaAAB4nJ1YDXBTVRZ+5/22TUlJ8we0pHlJm7RJf5O8F2j6EymlSPkpxaL8U2xpa3DKj0CBhc2IW4eWKSokIoLsuMqssM64f+jA4HSdWXXXscBq67IOs3FXZ1ZYWVyRFdo899yXtIBQZ90k7717zz3v3HPPOfd854YCCj9cL9dL0RQFOqCbGJnrHb5EayiKIWN8iA/hWBblo6hUWm8TtCDwE80WMJus/irwyxOdxeB0MDb14VNJHnXYoLLSl6FfCUYO9nYPTA8Epg9090LprfbBbZ2hY0UlJUXHQp3/vtWkS6EBv8+rPMq5u9692f/dNxJNiqwC1xPE9TCUgCsSdQWgE3XQD25lkG4CN2xmTcOXWBOyser6RN6KnGbKSbmQ3+d0OI1m2W8QzLLkI2sykrWAgJJEtA8vGGW/2Q+CmT3n8zS9wZwu2DCvtuZKZN3xkrLh36yCZuUomQSqGpY8t/25VfHVhw8z4ebGBtfLb0ya9PCaDc+8dGTvk2dsh6z7WzvowlXKUSWo9MJ15a3KrEP2loOr2Ojhw6iW6hf2BDdEccQvZGpaAy7YovSwq8kr7HGllxpd71rkS6G0Sf11sl9OvMK1+jwPPODxjUwkOim9CU3ix1wNjXDfmJSEn618Bs6lpWwUpU+8PCqLMY650zjq8VhCIP17NEKTx3eaLL+s5Pi6yJWaWjTHLR1jYzPSV9VF/6Ojdb/1kO3Mk3uhHC0x6gc1BjlKQ+nQFxTYdaJkZ7ySVxLBbhR1dsboNXp1tCYKW2LRaEzpYcIx2BKNxaL0ZaUnSqfFoiNhHKR/GkX6PWUSAaJelQaqZL1EpoHNsajSEyPSoJ9IjhIxTdjHLmwZvhRDOiFTY/YeQnvrVZmiTQtGncECXtFTBZLOVwwMRgoXHAkXzMzPn1nAJJ8jYSbMDaqN2waGLzNhih/bZynUBMpIWSg7VYi7DRx2m8ALkIdRCJwI6ArJx2EI8kaDWeTQKeAFk9fjl/1AvwktjQ1P7NjyMGQyfd4vjipX6M/i52D7Cq80kqlcxEcGXRr/FEcgs0u5uGgB4VWuMFfpdn2Re6Hi3PqzmxWKsz6+ae2Pn9hXXw/fqM859UiGC0oKYYILJBqJrsn1Z1E5qOs9rQCiUQRREjm8yJcbHF5cUJufX1vAHlefw0XgUoboS3ETfQlTxBC4SOtuE8VPRJTBSCQSjZCpk7Gqzu+masaZ2y7Zjehho4F3g82BNDkAHpORG4+OCS+f6JTPmtRn/PH1kch6d04sp7AQb25aQ/pqUyXeQ8vrebG8OYQdXOQ+585u0sdW9rqalzRURiJ+9F4MweRFrKUjl1GUYhH1A27WOHw5cTFSFPMo9EeUIGnQTZHIaJ7AHLaOKsOODaNF9jkBjYG2QEsQ2xjMUAx2bBEbeTBWMHwskBjngq56S/yfgkBnWBa4K9sqKtq2t1UI8S9He5XuBRbawAdatrQEAi30Aks2+LM8WeCbalVZkWNylvJ+dqJnzVb+OHlSoKW8nPCP7Rd+CcZ2DdWAGqJ2CBFOphgywFFCFBNtfAbGtNPBCwxvygHeYMZMY9ZboBqwq/pVrsbgN5tkv152ODlbMfiqwGMBgxa4Exz3QhovRIUp6acqZmQzRq0ypDXS2TPLT02YIkQETnOE445oOGxOmXAqUJNNG7XgupMjPq2ua9asrj5yY/yuKteO1Kx0YNJTufrirLe1mZnat7OL6rnUdCWenpW6I8mAnbsY8KWs1PuSovCW9A/Z25PQ24a7cNOqgmTkLmBMgh4THgc4b9k2IVv1/g/F5nGljwPLfOgHAzJzh45V/4+WenTzmMtR5Z7us2Tys909UHqrPY7KbckoxRvRHhmVc3cJGE97uml0R1S0jdULVl7EvZtDFVBF35N9cEdjpgmAiOlFZ+Dtoh93+D3zzHr8RRNZQhnCNMNbcegOvpEwZoL+06cJQ07h+th3fZ/7PVbVC6ngTAV/KoLFuO6+2KFcU651gEb5ugPSIb1D+Xp8V4+k3sEIGnw5mYe4If4k1lFYr6SCzmM2EQ8iWtmwjnBI9kTwe1TlfAmXh7H02by9fW2gsjKwtv0aaURKil4OdV7rDL1MXIFNrhdxohcZXYTnq47WisrKitaObbf5+yvkLi5J6lCNZZ+B6GC38VNBZBDidSS/+mSvh6s+srgC8pyKMvDtt+de3c9fU76ZPfuM8ud4Kv0fyP/LqfepMT/3oZxSqpZaTa1DaQYLY8TFsHYbWYsPoRhRWfL5eSSQbhUGgGC3YLbVMk6PitTFNGpAsNrC6D1VNBKgBHMejaiuRWEWGgsSDBTJjqWIl8kJLlsaLJ2tXDr6xGfT85bM2Q06a46x2HTgvdnV8z5YDy/27J4zt6x2VtkzjoYpkq36kaBr4eQSg7tyiVweWubXZugtadl58ydapfbORfKsDTuZ0OBgx4cfdjCf5tbWNITnL120fdOi1RV1C3uKGzNdwYLcMvZ3BxoPyTOCD1XvXTp7U10gWCVmTV9b3r2z0SkGWovb2hp9I89O8a2smlyaO8muMU+dRmtzp60IzAoFpjLr1n388boLyf0dRvxhsHZ0qbWqDkwqvvpkj4l0fY6EIXRi5sQSrAvsVYwXRy4qJ2EVtD1AN7a0HWth9ymvL1xc3WTUKK/TAHA/bXDVtVWfOMfuGxGZv4Ln/jVr9jc3j1yMv0tndmyt9Vq88Y9gH1wtLX3KWjot5++jWHgAoZZkQ14wGQ20Fli71UmKJAy4xKMSTGbVdybW7FDDAut9XpD5AzWrYO7zQ8qffqF8+Ynd/clrHcdyxGy3a/3+mfNnzC/cBsveTjnTvXf1o6vzOlZw7WtqtdmPK/Errz/6NNtD72zmNOZfbmYdTGHfoofqI79Oc+R2n1lrnL6pOm0Up7kwxhTW12Amm7WYkXR2qYrF2AmgmbAsxZjwy1xpg/m1Je2vrp8v/nz2xpmlBg4E9hrMU341wVpTOh/OfmGvAnra8q6uctr60ZQHV3Q+WMQJykMj8ZsWn2QBOmmHMB+m5pDIpTFonYigiaKAhGEiAHF7EliVnQkjoLVIMPtJpBKHYd3A8GYH9jJzrWwmHx5Qjp7vDAX0suGRym1vtm/9W1/HyR8vczfMs6Sk8DSv855/5dlX9oQq52hT8syyp2rx5Id17IAyAM3wIjQPMOHzytEB64q6D5zT91yNbnx3V/nqnd017S9Y0605k3izoXLpsxde2n38yoOV9s1LcjwzNjbdX6asnBVaBj/6/DwKwPkpcqbDG7BnsXoSqWnUAmottYF6jMSdVyYZh3zVXCjwTiwwHH6sGuRiEHQGzuRX6whZkp123oy1BWE2mEfJ/tvIRtM4ZM5bDXiMsPMaAKOTyc5uL57rqyyc5y5JE5pm1i2S2iUX0CcaQ6lC6Zog7JqSqZmYlosl2K6pwNA84zRnQW6SaALYZQGW5lhCtU/W34N6o+bKfZ8cf3/Cl/+iTX3wBzpOY4mRkeNf3rptycGSshQWgGbYt5jFc2e0+DglIrwl6DVWQ7BuwaJ3Xk1J4VL5urnLl/Wf+gHU/hZoZdKNym6lG+I34FaNeZKcSpJIo2IeCVvpdsDGfKvzJnAwmeD37Ow65ZWwSowpgwX5T69s/rB55dP5BcpgDKFV8p7q2sn/1uc93bVzT/w6UrCqDTWvfCq/oCD/qZXNoUj8BL5Kp6GU017frfNXkAtiiyf/SOCEeLqnd8R/Ql9GlCRfctS6k5chvIBuQ1zCCjoCHL2DHNHIXxMJ3kQeO8lbsUXONeSfA5EjcG6/E+KdhN4bP04vBhdi883+BFBzQbxFbvZzQeY9LNBZc0FNfn5NwfDn6rCTnTw6R8o+gfpf5hCom33cRuiTlss3KHmZjD+BPN+5gXuA2ziS/Q73mLxUkpbKN/eqwz5uK0X9F3h2d1V4nGNgZGBgAOJd776+iue3+crAzc4AAje5Bfcg0xz9YHEOBiYQBQA8FQlFAHicY2BkYGBnAAGOPgaG//85+hkYGVCBMgBGGwNYAAAAeJxjYGBgYB8EmKOPgQEAQ04BfgAAAAAAAA4AaAB+AMwA4AECAUIBbAGYAcICGAJYArQC4AMwA7AD3gQwBJYE3AUkBWYFigYgBmYGtAbqB1gIEghYCG4IhAi2COh4nGNgZGBgUGYoZWBnAAEmIOYCQgaG/2A+AwAYCQG2AHicXZBNaoNAGIZfE5PQCKFQ2lUps2oXBfOzzAESyDKBQJdGR2NQR3QSSE/QE/QEPUUPUHqsvsrXjTMw83zPvPMNCuAWP3DQDAejdm1GjzwS7pMmwi75XngAD4/CQ/oX4TFe4Qt7uMMbOzjuDc0EmXCP/C7cJ38Iu+RP4QEe8CU8pP8WHmOPX2EPz87TPo202ey2OjlnQSXV/6arOjWFmvszMWtd6CqwOlKHq6ovycLaWMWVydXKFFZnmVFlZU46tP7R2nI5ncbi/dDkfDtFBA2DDXbYkhKc+V0Bqs5Zt9JM1HQGBRTm/EezTmZNKtpcAMs9Yu6AK9caF76zoLWIWcfMGOSkVduvSWechqZsz040Ib2PY3urxBJTzriT95lipz+TN1fmAAAAeJxtkMl2wjAMRfOAhABlKm2h80C3+ajgCKKDY6cegP59TYBzukAL+z1Zsq8ctaJTTKPrsUQLbXQQI0EXKXroY4AbDDHCGBNMcYsZ7nCPB8yxwCOe8IwXvOIN7/jAJ76wxHfUqWX+OzgumWAjJMV17i0Ndlr6irLKO+qftdT7i6y4uFSUvCknay+lFYZIZaQcmfH/xIFdYn98bqhra1aKTM/6lWMnyaYirx1rFUQZFBkb2zJUtoXeJCeg0WnLtHeSFc3OtrnozNwqi0TkSpBMDB1nSde5oJXW23hTS2/T0LilglXX7dmFVxLnq5U0vYATHFk3zX3BOisoQHNDFDeZnqKDy9hRNawN7Vh727hFzcJ5c8TILrKZfH7tIPxAFP0BpLeJPA==) format("woff");font-weight:400;font-style:normal}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-play-control .vjs-icon-placeholder,.vjs-icon-play{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-big-play-button .vjs-icon-placeholder:before,.video-js .vjs-play-control .vjs-icon-placeholder:before,.vjs-icon-play:before{content:"\\f101"}.vjs-icon-play-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-play-circle:before{content:"\\f102"}.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder,.vjs-icon-pause{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-control.vjs-playing .vjs-icon-placeholder:before,.vjs-icon-pause:before{content:"\\f103"}.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder,.vjs-icon-volume-mute{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-0 .vjs-icon-placeholder:before,.vjs-icon-volume-mute:before{content:"\\f104"}.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder,.vjs-icon-volume-low{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-1 .vjs-icon-placeholder:before,.vjs-icon-volume-low:before{content:"\\f105"}.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder,.vjs-icon-volume-mid{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control.vjs-vol-2 .vjs-icon-placeholder:before,.vjs-icon-volume-mid:before{content:"\\f106"}.video-js .vjs-mute-control .vjs-icon-placeholder,.vjs-icon-volume-high{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-mute-control .vjs-icon-placeholder:before,.vjs-icon-volume-high:before{content:"\\f107"}.video-js .vjs-fullscreen-control .vjs-icon-placeholder,.vjs-icon-fullscreen-enter{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-fullscreen-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-enter:before{content:"\\f108"}.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder,.vjs-icon-fullscreen-exit{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.vjs-fullscreen .vjs-fullscreen-control .vjs-icon-placeholder:before,.vjs-icon-fullscreen-exit:before{content:"\\f109"}.vjs-icon-square{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-square:before{content:"\\f10a"}.vjs-icon-spinner{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-spinner:before{content:"\\f10b"}.video-js .vjs-subs-caps-button .vjs-icon-placeholder,.video-js .vjs-subtitles-button .vjs-icon-placeholder,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder,.vjs-icon-subtitles{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js .vjs-subtitles-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-AU) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-GB) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-IE) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js.video-js:lang(en-NZ) .vjs-subs-caps-button .vjs-icon-placeholder:before,.vjs-icon-subtitles:before{content:"\\f10c"}.video-js .vjs-captions-button .vjs-icon-placeholder,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder,.vjs-icon-captions{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-captions-button .vjs-icon-placeholder:before,.video-js:lang(en) .vjs-subs-caps-button .vjs-icon-placeholder:before,.video-js:lang(fr-CA) .vjs-subs-caps-button .vjs-icon-placeholder:before,.vjs-icon-captions:before{content:"\\f10d"}.video-js .vjs-chapters-button .vjs-icon-placeholder,.vjs-icon-chapters{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-chapters-button .vjs-icon-placeholder:before,.vjs-icon-chapters:before{content:"\\f10e"}.vjs-icon-share{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-share:before{content:"\\f10f"}.vjs-icon-cog{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-cog:before{content:"\\f110"}.video-js .vjs-play-progress,.video-js .vjs-volume-level,.vjs-icon-circle,.vjs-seek-to-live-control .vjs-icon-placeholder{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-progress:before,.video-js .vjs-volume-level:before,.vjs-icon-circle:before,.vjs-seek-to-live-control .vjs-icon-placeholder:before{content:"\\f111"}.vjs-icon-circle-outline{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-outline:before{content:"\\f112"}.vjs-icon-circle-inner-circle{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-circle-inner-circle:before{content:"\\f113"}.vjs-icon-hd{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-hd:before{content:"\\f114"}.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder,.vjs-icon-cancel{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-control.vjs-close-button .vjs-icon-placeholder:before,.vjs-icon-cancel:before{content:"\\f115"}.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder,.vjs-icon-replay{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-play-control.vjs-ended .vjs-icon-placeholder:before,.vjs-icon-replay:before{content:"\\f116"}.vjs-icon-facebook{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-facebook:before{content:"\\f117"}.vjs-icon-gplus{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-gplus:before{content:"\\f118"}.vjs-icon-linkedin{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-linkedin:before{content:"\\f119"}.vjs-icon-twitter{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-twitter:before{content:"\\f11a"}.vjs-icon-tumblr{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-tumblr:before{content:"\\f11b"}.vjs-icon-pinterest{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-pinterest:before{content:"\\f11c"}.video-js .vjs-descriptions-button .vjs-icon-placeholder,.vjs-icon-audio-description{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-descriptions-button .vjs-icon-placeholder:before,.vjs-icon-audio-description:before{content:"\\f11d"}.video-js .vjs-audio-button .vjs-icon-placeholder,.vjs-icon-audio{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-audio-button .vjs-icon-placeholder:before,.vjs-icon-audio:before{content:"\\f11e"}.vjs-icon-next-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-next-item:before{content:"\\f11f"}.vjs-icon-previous-item{font-family:VideoJS;font-weight:400;font-style:normal}.vjs-icon-previous-item:before{content:"\\f120"}.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder,.vjs-icon-picture-in-picture-enter{font-family:VideoJS;font-weight:400;font-style:normal}.video-js .vjs-picture-in-picture-control .vjs-icon-placeholder:before,.vjs-icon-picture-in-picture-enter:before{content:"\\f121"}.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder,.vjs-icon-picture-in-picture-exit{font-family:VideoJS;font-weight:400;font-style:normal}.video-js.vjs-picture-in-picture .vjs-picture-in-picture-control .vjs-icon-placeholder:before,.vjs-icon-picture-in-picture-exit:before{content:"\\f122"}.video-js{display:block;vertical-align:top;box-sizing:border-box;color:#fff;background-color:#000;position:relative;padding:0;font-size:10px;line-height:1;font-weight:400;font-style:normal;font-family:Arial,Helvetica,sans-serif;word-break:initial}.video-js:-moz-full-screen{position:absolute}.video-js:-webkit-full-screen{width:100%!important;height:100%!important}.video-js[tabindex="-1"]{outline:0}.video-js *,.video-js :after,.video-js :before{box-sizing:inherit}.video-js ul{font-family:inherit;font-size:inherit;line-height:inherit;list-style-position:outside;margin:0}.video-js.vjs-1-1,.video-js.vjs-16-9,.video-js.vjs-4-3,.video-js.vjs-9-16,.video-js.vjs-fluid{width:100%;max-width:100%}.video-js.vjs-1-1:not(.vjs-audio-only-mode),.video-js.vjs-16-9:not(.vjs-audio-only-mode),.video-js.vjs-4-3:not(.vjs-audio-only-mode),.video-js.vjs-9-16:not(.vjs-audio-only-mode),.video-js.vjs-fluid:not(.vjs-audio-only-mode){height:0}.video-js.vjs-16-9:not(.vjs-audio-only-mode){padding-top:56.25%}.video-js.vjs-4-3:not(.vjs-audio-only-mode){padding-top:75%}.video-js.vjs-9-16:not(.vjs-audio-only-mode){padding-top:177.7777777778%}.video-js.vjs-1-1:not(.vjs-audio-only-mode){padding-top:100%}.video-js.vjs-fill:not(.vjs-audio-only-mode){width:100%;height:100%}.video-js .vjs-tech{position:absolute;top:0;left:0;width:100%;height:100%}.video-js.vjs-audio-only-mode .vjs-tech{display:none}body.vjs-full-window{padding:0;margin:0;height:100%}.vjs-full-window .video-js.vjs-fullscreen{position:fixed;overflow:hidden;z-index:1000;left:0;top:0;bottom:0;right:0}.video-js.vjs-fullscreen:not(.vjs-ios-native-fs){width:100%!important;height:100%!important;padding-top:0!important}.video-js.vjs-fullscreen.vjs-user-inactive{cursor:none}.vjs-hidden{display:none!important}.vjs-disabled{opacity:.5;cursor:default}.video-js .vjs-offscreen{height:1px;left:-9999px;position:absolute;top:0;width:1px}.vjs-lock-showing{display:block!important;opacity:1!important;visibility:visible!important}.vjs-no-js{padding:20px;color:#fff;background-color:#000;font-size:18px;font-family:Arial,Helvetica,sans-serif;text-align:center;width:300px;height:150px;margin:0 auto}.vjs-no-js a,.vjs-no-js a:visited{color:#66a8cc}.video-js .vjs-big-play-button{font-size:3em;line-height:1.5em;height:1.63332em;width:3em;display:block;position:absolute;top:10px;left:10px;padding:0;cursor:pointer;opacity:1;border:.06666em solid #fff;background-color:#2b333f;background-color:#2b333fb3;border-radius:.3em;transition:all .4s}.vjs-big-play-centered .vjs-big-play-button{top:50%;left:50%;margin-top:-.81666em;margin-left:-1.5em}.video-js .vjs-big-play-button:focus,.video-js:hover .vjs-big-play-button{border-color:#fff;background-color:#73859f;background-color:#73859f80;transition:all 0s}.vjs-controls-disabled .vjs-big-play-button,.vjs-error .vjs-big-play-button,.vjs-has-started .vjs-big-play-button,.vjs-using-native-controls .vjs-big-play-button{display:none}.vjs-has-started.vjs-paused.vjs-show-big-play-button-on-pause .vjs-big-play-button{display:block}.video-js button{background:0 0;border:none;color:inherit;display:inline-block;font-size:inherit;line-height:inherit;text-transform:none;text-decoration:none;transition:none;-webkit-appearance:none;-moz-appearance:none;appearance:none}.vjs-control .vjs-button{width:100%;height:100%}.video-js .vjs-control.vjs-close-button{cursor:pointer;height:3em;position:absolute;right:0;top:.5em;z-index:2}.video-js .vjs-modal-dialog{background:rgba(0,0,0,.8);background:linear-gradient(180deg,rgba(0,0,0,.8),rgba(255,255,255,0));overflow:auto}.video-js .vjs-modal-dialog>*{box-sizing:border-box}.vjs-modal-dialog .vjs-modal-dialog-content{font-size:1.2em;line-height:1.5;padding:20px 24px;z-index:1}.vjs-menu-button{cursor:pointer}.vjs-menu-button.vjs-disabled{cursor:default}.vjs-workinghover .vjs-menu-button.vjs-disabled:hover .vjs-menu{display:none}.vjs-menu .vjs-menu-content{display:block;padding:0;margin:0;font-family:Arial,Helvetica,sans-serif;overflow:auto}.vjs-menu .vjs-menu-content>*{box-sizing:border-box}.vjs-scrubbing .vjs-control.vjs-menu-button:hover .vjs-menu{display:none}.vjs-menu li{list-style:none;margin:0;padding:.2em 0;line-height:1.4em;font-size:1.2em;text-align:center;text-transform:lowercase}.js-focus-visible .vjs-menu li.vjs-menu-item:hover,.vjs-menu li.vjs-menu-item:focus,.vjs-menu li.vjs-menu-item:hover{background-color:#73859f;background-color:#73859f80}.js-focus-visible .vjs-menu li.vjs-selected:hover,.vjs-menu li.vjs-selected,.vjs-menu li.vjs-selected:focus,.vjs-menu li.vjs-selected:hover{background-color:#fff;color:#2b333f}.js-focus-visible .vjs-menu :not(.vjs-selected):focus:not(.focus-visible),.video-js .vjs-menu :not(.vjs-selected):focus:not(:focus-visible){background:0 0}.vjs-menu li.vjs-menu-title{text-align:center;text-transform:uppercase;font-size:1em;line-height:2em;padding:0;margin:0 0 .3em;font-weight:700;cursor:default}.vjs-menu-button-popup .vjs-menu{display:none;position:absolute;bottom:0;width:10em;left:-3em;height:0;margin-bottom:1.5em;border-top-color:#2b333fb3}.vjs-menu-button-popup .vjs-menu .vjs-menu-content{background-color:#2b333f;background-color:#2b333fb3;position:absolute;width:100%;bottom:1.5em;max-height:15em}.vjs-layout-tiny .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:5em}.vjs-layout-small .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:10em}.vjs-layout-medium .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:14em}.vjs-layout-huge .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content,.vjs-layout-x-large .vjs-menu-button-popup .vjs-menu .vjs-menu-content{max-height:25em}.vjs-menu-button-popup .vjs-menu.vjs-lock-showing,.vjs-workinghover .vjs-menu-button-popup.vjs-hover .vjs-menu{display:block}.video-js .vjs-menu-button-inline{transition:all .4s;overflow:hidden}.video-js .vjs-menu-button-inline:before{width:2.222222222em}.video-js .vjs-menu-button-inline.vjs-slider-active,.video-js .vjs-menu-button-inline:focus,.video-js .vjs-menu-button-inline:hover,.video-js.vjs-no-flex .vjs-menu-button-inline{width:12em}.vjs-menu-button-inline .vjs-menu{opacity:0;height:100%;width:auto;position:absolute;left:4em;top:0;padding:0;margin:0;transition:all .4s}.vjs-menu-button-inline.vjs-slider-active .vjs-menu,.vjs-menu-button-inline:focus .vjs-menu,.vjs-menu-button-inline:hover .vjs-menu{display:block;opacity:1}.vjs-no-flex .vjs-menu-button-inline .vjs-menu{display:block;opacity:1;position:relative;width:auto}.vjs-no-flex .vjs-menu-button-inline.vjs-slider-active .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:focus .vjs-menu,.vjs-no-flex .vjs-menu-button-inline:hover .vjs-menu{width:auto}.vjs-menu-button-inline .vjs-menu-content{width:auto;height:100%;margin:0;overflow:hidden}.video-js .vjs-control-bar{display:none;width:100%;position:absolute;bottom:0;left:0;right:0;height:3em;background-color:#2b333f;background-color:#2b333fb3}.vjs-audio-only-mode .vjs-control-bar,.vjs-has-started .vjs-control-bar{display:flex;visibility:visible;opacity:1;transition:visibility .1s,opacity .1s}.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{visibility:visible;opacity:0;pointer-events:none;transition:visibility 1s,opacity 1s}.vjs-controls-disabled .vjs-control-bar,.vjs-error .vjs-control-bar,.vjs-using-native-controls .vjs-control-bar{display:none!important}.vjs-audio-only-mode.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar,.vjs-audio.vjs-has-started.vjs-user-inactive.vjs-playing .vjs-control-bar{opacity:1;visibility:visible;pointer-events:auto}.vjs-has-started.vjs-no-flex .vjs-control-bar{display:table}.video-js .vjs-control{position:relative;text-align:center;margin:0;padding:0;height:100%;width:4em;flex:none}.video-js .vjs-control.vjs-visible-text{width:auto;padding-left:1em;padding-right:1em}.vjs-button>.vjs-icon-placeholder:before{font-size:1.8em;line-height:1.67}.vjs-button>.vjs-icon-placeholder{display:block}.video-js .vjs-control:focus,.video-js .vjs-control:focus:before,.video-js .vjs-control:hover:before{text-shadow:0 0 1em #fff}.video-js :not(.vjs-visible-text)>.vjs-control-text{border:0;clip:rect(0 0 0 0);height:1px;overflow:hidden;padding:0;position:absolute;width:1px}.vjs-no-flex .vjs-control{display:table-cell;vertical-align:middle}.video-js .vjs-custom-control-spacer{display:none}.video-js .vjs-progress-control{cursor:pointer;flex:auto;display:flex;align-items:center;min-width:4em;touch-action:none}.video-js .vjs-progress-control.disabled{cursor:default}.vjs-live .vjs-progress-control{display:none}.vjs-liveui .vjs-progress-control{display:flex;align-items:center}.vjs-no-flex .vjs-progress-control{width:auto}.video-js .vjs-progress-holder{flex:auto;transition:all .2s;height:.3em}.video-js .vjs-progress-control .vjs-progress-holder{margin:0 10px}.video-js .vjs-progress-control:hover .vjs-progress-holder{font-size:1.6666666667em}.video-js .vjs-progress-control:hover .vjs-progress-holder.disabled{font-size:1em}.video-js .vjs-progress-holder .vjs-load-progress,.video-js .vjs-progress-holder .vjs-load-progress div,.video-js .vjs-progress-holder .vjs-play-progress{position:absolute;display:block;height:100%;margin:0;padding:0;width:0}.video-js .vjs-play-progress{background-color:#fff}.video-js .vjs-play-progress:before{font-size:.9em;position:absolute;right:-.5em;top:-.3333333333em;z-index:1}.video-js .vjs-load-progress{background:rgba(115,133,159,.5)}.video-js .vjs-load-progress div{background:rgba(115,133,159,.75)}.video-js .vjs-time-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-progress-holder:focus .vjs-time-tooltip{display:none}.video-js .vjs-progress-control:hover .vjs-progress-holder:focus .vjs-time-tooltip,.video-js .vjs-progress-control:hover .vjs-time-tooltip{display:block;font-size:.6em;visibility:visible}.video-js .vjs-progress-control.disabled:hover .vjs-time-tooltip{font-size:1em}.video-js .vjs-progress-control .vjs-mouse-display{display:none;position:absolute;width:1px;height:100%;background-color:#000;z-index:1}.vjs-no-flex .vjs-progress-control .vjs-mouse-display{z-index:0}.video-js .vjs-progress-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-progress-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-progress-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-time-tooltip{color:#fff;background-color:#000;background-color:#000c}.video-js .vjs-slider{position:relative;cursor:pointer;padding:0;margin:0 .45em;-webkit-touch-callout:none;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;background-color:#73859f;background-color:#73859f80}.video-js .vjs-slider.disabled{cursor:default}.video-js .vjs-slider:focus{text-shadow:0 0 1em #fff;box-shadow:0 0 1em #fff}.video-js .vjs-mute-control{cursor:pointer;flex:none}.video-js .vjs-volume-control{cursor:pointer;margin-right:1em;display:flex}.video-js .vjs-volume-control.vjs-volume-horizontal{width:5em}.video-js .vjs-volume-panel .vjs-volume-control{visibility:visible;opacity:0;width:1px;height:1px;margin-left:-1px}.video-js .vjs-volume-panel{transition:width 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active,.video-js .vjs-volume-panel .vjs-volume-control:active,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control,.video-js .vjs-volume-panel:active .vjs-volume-control,.video-js .vjs-volume-panel:focus .vjs-volume-control{visibility:visible;opacity:1;position:relative;transition:visibility .1s,opacity .1s,height .1s,width .1s,left 0s,top 0s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-horizontal,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-horizontal,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;margin-right:0}.video-js .vjs-volume-panel .vjs-volume-control.vjs-slider-active.vjs-volume-vertical,.video-js .vjs-volume-panel .vjs-volume-control:active.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-mute-control~.vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel.vjs-hover .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:active .vjs-volume-control.vjs-volume-vertical,.video-js .vjs-volume-panel:focus .vjs-volume-control.vjs-volume-vertical{left:-3.5em;transition:left 0s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js .vjs-volume-panel.vjs-volume-panel-horizontal:active{width:10em;transition:width .1s}.video-js .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-mute-toggle-only{width:4em}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{height:8em;width:3em;left:-3000em;transition:visibility 1s,opacity 1s,height 1s 1s,width 1s 1s,left 1s 1s,top 1s 1s}.video-js .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{transition:visibility 1s,opacity 1s,height 1s 1s,width 1s,left 1s 1s,top 1s 1s}.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-horizontal{width:5em;height:3em;visibility:visible;opacity:1;position:relative;transition:none}.video-js.vjs-no-flex .vjs-volume-control.vjs-volume-vertical,.video-js.vjs-no-flex .vjs-volume-panel .vjs-volume-control.vjs-volume-vertical{position:absolute;bottom:3em;left:.5em}.video-js .vjs-volume-panel{display:flex}.video-js .vjs-volume-bar{margin:1.35em .45em}.vjs-volume-bar.vjs-slider-horizontal{width:5em;height:.3em}.vjs-volume-bar.vjs-slider-vertical{width:.3em;height:5em;margin:1.35em auto}.video-js .vjs-volume-level{position:absolute;bottom:0;left:0;background-color:#fff}.video-js .vjs-volume-level:before{position:absolute;font-size:.9em;z-index:1}.vjs-slider-vertical .vjs-volume-level{width:.3em}.vjs-slider-vertical .vjs-volume-level:before{top:-.5em;left:-.3em;z-index:1}.vjs-slider-horizontal .vjs-volume-level{height:.3em}.vjs-slider-horizontal .vjs-volume-level:before{top:-.3em;right:-.5em}.video-js .vjs-volume-panel.vjs-volume-panel-vertical{width:4em}.vjs-volume-bar.vjs-slider-vertical .vjs-volume-level{height:100%}.vjs-volume-bar.vjs-slider-horizontal .vjs-volume-level{width:100%}.video-js .vjs-volume-vertical{width:3em;height:8em;bottom:8em;background-color:#2b333f;background-color:#2b333fb3}.video-js .vjs-volume-horizontal .vjs-menu{left:-2em}.video-js .vjs-volume-tooltip{background-color:#fff;background-color:#fffc;border-radius:.3em;color:#000;float:right;font-family:Arial,Helvetica,sans-serif;font-size:1em;padding:6px 8px 8px;pointer-events:none;position:absolute;top:-3.4em;visibility:hidden;z-index:1}.video-js .vjs-volume-control:hover .vjs-progress-holder:focus .vjs-volume-tooltip,.video-js .vjs-volume-control:hover .vjs-volume-tooltip{display:block;font-size:1em;visibility:visible}.video-js .vjs-volume-vertical:hover .vjs-progress-holder:focus .vjs-volume-tooltip,.video-js .vjs-volume-vertical:hover .vjs-volume-tooltip{left:1em;top:-12px}.video-js .vjs-volume-control.disabled:hover .vjs-volume-tooltip{font-size:1em}.video-js .vjs-volume-control .vjs-mouse-display{display:none;position:absolute;width:100%;height:1px;background-color:#000;z-index:1}.video-js .vjs-volume-horizontal .vjs-mouse-display{width:1px;height:100%}.vjs-no-flex .vjs-volume-control .vjs-mouse-display{z-index:0}.video-js .vjs-volume-control:hover .vjs-mouse-display{display:block}.video-js.vjs-user-inactive .vjs-volume-control .vjs-mouse-display{visibility:hidden;opacity:0;transition:visibility 1s,opacity 1s}.video-js.vjs-user-inactive.vjs-no-flex .vjs-volume-control .vjs-mouse-display{display:none}.vjs-mouse-display .vjs-volume-tooltip{color:#fff;background-color:#000;background-color:#000c}.vjs-poster{display:inline-block;vertical-align:middle;background-repeat:no-repeat;background-position:50% 50%;background-size:contain;background-color:#000;cursor:pointer;margin:0;padding:0;position:absolute;top:0;right:0;bottom:0;left:0;height:100%}.vjs-has-started .vjs-poster,.vjs-using-native-controls .vjs-poster{display:none}.vjs-audio.vjs-has-started .vjs-poster,.vjs-has-started.vjs-audio-poster-mode .vjs-poster{display:block}.video-js .vjs-live-control{display:flex;align-items:flex-start;flex:auto;font-size:1em;line-height:3em}.vjs-no-flex .vjs-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-liveui .vjs-live-control,.video-js:not(.vjs-live) .vjs-live-control{display:none}.video-js .vjs-seek-to-live-control{align-items:center;cursor:pointer;flex:none;display:inline-flex;height:100%;padding-left:.5em;padding-right:.5em;font-size:1em;line-height:3em;width:auto;min-width:4em}.vjs-no-flex .vjs-seek-to-live-control{display:table-cell;width:auto;text-align:left}.video-js.vjs-live:not(.vjs-liveui) .vjs-seek-to-live-control,.video-js:not(.vjs-live) .vjs-seek-to-live-control{display:none}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge{cursor:auto}.vjs-seek-to-live-control .vjs-icon-placeholder{margin-right:.5em;color:#888}.vjs-seek-to-live-control.vjs-control.vjs-at-live-edge .vjs-icon-placeholder{color:red}.video-js .vjs-time-control{flex:none;font-size:1em;line-height:3em;min-width:2em;width:auto;padding-left:1em;padding-right:1em}.vjs-live .vjs-time-control,.video-js .vjs-current-time,.vjs-no-flex .vjs-current-time,.video-js .vjs-duration,.vjs-no-flex .vjs-duration{display:none}.vjs-time-divider{display:none;line-height:3em}.vjs-live .vjs-time-divider{display:none}.video-js .vjs-play-control{cursor:pointer}.video-js .vjs-play-control .vjs-icon-placeholder{flex:none}.vjs-text-track-display{position:absolute;bottom:3em;left:0;right:0;top:0;pointer-events:none}.video-js.vjs-controls-disabled .vjs-text-track-display,.video-js.vjs-user-inactive.vjs-playing .vjs-text-track-display{bottom:1em}.video-js .vjs-text-track{font-size:1.4em;text-align:center;margin-bottom:.1em}.vjs-subtitles{color:#fff}.vjs-captions{color:#fc6}.vjs-tt-cue{display:block}video::-webkit-media-text-track-display{transform:translateY(-3em)}.video-js.vjs-controls-disabled video::-webkit-media-text-track-display,.video-js.vjs-user-inactive.vjs-playing video::-webkit-media-text-track-display{transform:translateY(-1.5em)}.video-js .vjs-picture-in-picture-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-picture-in-picture-control{display:none}.video-js .vjs-fullscreen-control{cursor:pointer;flex:none}.video-js.vjs-audio-only-mode .vjs-fullscreen-control{display:none}.vjs-playback-rate .vjs-playback-rate-value,.vjs-playback-rate>.vjs-menu-button{position:absolute;top:0;left:0;width:100%;height:100%}.vjs-playback-rate .vjs-playback-rate-value{pointer-events:none;font-size:1.5em;line-height:2;text-align:center}.vjs-playback-rate .vjs-menu{width:4em;left:0}.vjs-error .vjs-error-display .vjs-modal-dialog-content{font-size:1.4em;text-align:center}.vjs-error .vjs-error-display:before{color:#fff;content:"X";font-family:Arial,Helvetica,sans-serif;font-size:4em;left:0;line-height:1;margin-top:-.5em;position:absolute;text-shadow:.05em .05em .1em #000;text-align:center;top:50%;vertical-align:middle;width:100%}.vjs-loading-spinner{display:none;position:absolute;top:50%;left:50%;margin:-25px 0 0 -25px;opacity:.85;text-align:left;border:6px solid rgba(43,51,63,.7);box-sizing:border-box;background-clip:padding-box;width:50px;height:50px;border-radius:25px;visibility:hidden}.vjs-seeking .vjs-loading-spinner,.vjs-waiting .vjs-loading-spinner{display:block;-webkit-animation:vjs-spinner-show 0s linear .3s forwards;animation:vjs-spinner-show 0s linear .3s forwards}.vjs-loading-spinner:after,.vjs-loading-spinner:before{content:"";position:absolute;margin:-6px;box-sizing:inherit;width:inherit;height:inherit;border-radius:inherit;opacity:1;border:inherit;border-color:transparent;border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:before{-webkit-animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite;animation:vjs-spinner-spin 1.1s cubic-bezier(.6,.2,0,.8) infinite,vjs-spinner-fade 1.1s linear infinite}.vjs-seeking .vjs-loading-spinner:before,.vjs-waiting .vjs-loading-spinner:before{border-top-color:#fff}.vjs-seeking .vjs-loading-spinner:after,.vjs-waiting .vjs-loading-spinner:after{border-top-color:#fff;-webkit-animation-delay:.44s;animation-delay:.44s}@keyframes vjs-spinner-show{to{visibility:visible}}@-webkit-keyframes vjs-spinner-show{to{visibility:visible}}@keyframes vjs-spinner-spin{to{transform:rotate(360deg)}}@-webkit-keyframes vjs-spinner-spin{to{-webkit-transform:rotate(360deg)}}@keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}@-webkit-keyframes vjs-spinner-fade{0%{border-top-color:#73859f}20%{border-top-color:#73859f}35%{border-top-color:#fff}60%{border-top-color:#73859f}to{border-top-color:#73859f}}.video-js.vjs-audio-only-mode .vjs-captions-button{display:none}.vjs-chapters-button .vjs-menu ul{width:24em}.video-js.vjs-audio-only-mode .vjs-descriptions-button{display:none}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-subs-caps-button+.vjs-menu .vjs-captions-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:"\\f10d";font-size:1.5em;line-height:inherit}.video-js.vjs-audio-only-mode .vjs-subs-caps-button{display:none}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder{vertical-align:middle;display:inline-block;margin-bottom:-.1em}.video-js .vjs-audio-button+.vjs-menu .vjs-main-desc-menu-item .vjs-menu-item-text .vjs-icon-placeholder:before{font-family:VideoJS;content:" \\f11d";font-size:1.5em;line-height:inherit}.video-js.vjs-layout-small .vjs-current-time,.video-js.vjs-layout-small .vjs-duration,.video-js.vjs-layout-small .vjs-playback-rate,.video-js.vjs-layout-small .vjs-remaining-time,.video-js.vjs-layout-small .vjs-time-divider,.video-js.vjs-layout-small .vjs-volume-control,.video-js.vjs-layout-tiny .vjs-current-time,.video-js.vjs-layout-tiny .vjs-duration,.video-js.vjs-layout-tiny .vjs-playback-rate,.video-js.vjs-layout-tiny .vjs-remaining-time,.video-js.vjs-layout-tiny .vjs-time-divider,.video-js.vjs-layout-tiny .vjs-volume-control,.video-js.vjs-layout-x-small .vjs-current-time,.video-js.vjs-layout-x-small .vjs-duration,.video-js.vjs-layout-x-small .vjs-playback-rate,.video-js.vjs-layout-x-small .vjs-remaining-time,.video-js.vjs-layout-x-small .vjs-time-divider,.video-js.vjs-layout-x-small .vjs-volume-control{display:none}.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-tiny .vjs-volume-panel.vjs-volume-panel-horizontal:hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-hover,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal.vjs-slider-active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:active,.video-js.vjs-layout-x-small .vjs-volume-panel.vjs-volume-panel-horizontal:hover{width:auto;width:initial}.video-js.vjs-layout-tiny .vjs-progress-control,.video-js.vjs-layout-x-small .vjs-progress-control{display:none}.video-js.vjs-layout-x-small .vjs-custom-control-spacer{flex:auto;display:block}.video-js.vjs-layout-x-small.vjs-no-flex .vjs-custom-control-spacer{width:auto}.vjs-modal-dialog.vjs-text-track-settings{background-color:#2b333f;background-color:#2b333fbf;color:#fff;height:70%}.vjs-text-track-settings .vjs-modal-dialog-content{display:table}.vjs-text-track-settings .vjs-track-settings-colors,.vjs-text-track-settings .vjs-track-settings-controls,.vjs-text-track-settings .vjs-track-settings-font{display:table-cell}.vjs-text-track-settings .vjs-track-settings-controls{text-align:right;vertical-align:bottom}@supports (display:grid){.vjs-text-track-settings .vjs-modal-dialog-content{display:grid;grid-template-columns:1fr 1fr;grid-template-rows:1fr;padding:20px 24px 0}.vjs-track-settings-controls .vjs-default-button{margin-bottom:20px}.vjs-text-track-settings .vjs-track-settings-controls{grid-column:1/-1}.vjs-layout-small .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-tiny .vjs-text-track-settings .vjs-modal-dialog-content,.vjs-layout-x-small .vjs-text-track-settings .vjs-modal-dialog-content{grid-template-columns:1fr}}.vjs-track-setting>select{margin-right:1em;margin-bottom:.5em}.vjs-text-track-settings fieldset{margin:5px;padding:3px;border:none}.vjs-text-track-settings fieldset span{display:inline-block}.vjs-text-track-settings fieldset span>select{max-width:7.3em}.vjs-text-track-settings legend{color:#fff;margin:0 0 5px}.vjs-text-track-settings .vjs-label{position:absolute;clip:rect(1px 1px 1px 1px);clip:rect(1px,1px,1px,1px);display:block;margin:0 0 5px;padding:0;border:0;height:1px;width:1px;overflow:hidden}.vjs-track-settings-controls button:active,.vjs-track-settings-controls button:focus{outline-style:solid;outline-width:medium;background-image:linear-gradient(0deg,#fff 88%,#73859f 100%)}.vjs-track-settings-controls button:hover{color:#2b333fbf}.vjs-track-settings-controls button{background-color:#fff;background-image:linear-gradient(-180deg,#fff 88%,#73859f 100%);color:#2b333f;cursor:pointer;border-radius:2px}.vjs-track-settings-controls .vjs-default-button{margin-right:1em}@media print{.video-js>:not(.vjs-tech):not(.vjs-poster){visibility:hidden}}.vjs-resize-manager{position:absolute;top:0;left:0;width:100%;height:100%;border:none;z-index:-1000}.js-focus-visible .video-js :focus:not(.focus-visible){outline:0}.video-js :focus:not(:focus-visible){outline:0}/*! @name videojs-logo @version 2.1.6 @license MIT */.video-js.vjs-logo{display:block}.video-js.vjs-logo .vjs-logo-content{position:absolute;opacity:1;transition:visibility 2s,opacity 2s}.video-js.vjs-logo .vjs-logo-content.vjs-logo-hide{visibility:hidden;opacity:0}*[ce=player-root][debug]{border:1px grey solid}.video-js{width:var(--4f0eb53b);height:var(--78f8f852)}.vjs-fluid:not(.vjs-audio-only-mode){padding-top:56.25%}div[micro-media-player=youtube][disabled=true]{opacity:.8;cursor:not-allowed}div[micro-media-player=youtube][disabled=true]>*{pointer-events:none}
`,pV=iv(cV,[["styles",[hV]]]);customElements.define(KR.webComponentNamePlayer,VR(pV));